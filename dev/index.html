<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:19,&quot;tests&quot;:479,&quot;passes&quot;:472,&quot;pending&quot;:0,&quot;failures&quot;:4,&quot;start&quot;:&quot;2021-04-01T18:27:37.814Z&quot;,&quot;end&quot;:&quot;2021-04-01T18:27:37.814Z&quot;,&quot;duration&quot;:88849,&quot;testsRegistered&quot;:479,&quot;passPercent&quot;:98.53862212943632,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:3,&quot;hasSkipped&quot;:true},&quot;results&quot;:[{&quot;uuid&quot;:&quot;8123d45f-c943-45f8-9243-22951aaf96a0&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// insert known tokens into redis (normally these are created by emailPasswordReset)\nconst mockRes = mocks.mockResponse();\nconst mockReq = await mocks.emailPasswordReset();\nawait redisClient.setexAsync(`pwReset:${accountGuid}`, 3600, securityToken);\nawait redisClient.setexAsync(`pwReset:${securityToken}`, 3600, accountGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b3f19fb-c0da-43de-8146-97c05e12cf55&quot;,&quot;parentUUID&quot;:&quot;8123d45f-c943-45f8-9243-22951aaf96a0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a new password&quot;,&quot;fullTitle&quot;:&quot;should create a new password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = mocks.createNewPassword(securityToken);\nconst mockRes = mocks.mockResponse();\nawait resetPassword.createNewPassword(mockReq, mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;\n// ensure createNewPassword cleans up redis\nexpect(await redisClient.getAsync(`pwReset:${accountGuid}`)).to.be.null;\nexpect(await redisClient.getAsync(`pwReset:${securityToken}`)).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;feb76de7-ca9b-4e30-bb6e-6f963c613046&quot;,&quot;parentUUID&quot;:&quot;8123d45f-c943-45f8-9243-22951aaf96a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;478d4056-46bc-4144-89de-837393c77f36&quot;,&quot;title&quot;:&quot;Auth API API Key Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-auth/test/integration/functions/apiKey.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/apiKey.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Auth API API Key Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests \&quot;before all\&quot; hook in \&quot;Auth API API Key Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c0a3340-0332-490e-9386-3864739a271a&quot;,&quot;parentUUID&quot;:&quot;478d4056-46bc-4144-89de-837393c77f36&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Auth API API Key Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests \&quot;after all\&quot; hook in \&quot;Auth API API Key Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await apiKey.deleteTestKeys(testConfig.tenantOne.tenantId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;118b3020-8ac7-4db2-8bcf-7cb7d78d5ba4&quot;,&quot;parentUUID&quot;:&quot;478d4056-46bc-4144-89de-837393c77f36&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5a6c9037-400c-4eb6-85fd-71724c31d14e&quot;,&quot;title&quot;:&quot;api key crud &quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-auth/test/integration/functions/apiKey.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/apiKey.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should insert an apiKey and return a doc&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should insert an apiKey and return a doc&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:256,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = {expires: new Date(new Date().getTime() + 60000), testOnly: true, description: \&quot;this is a test\&quot;}\nawait apiKey.createApiKey(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst inserted = mockRes.body;\nkey = inserted.key;\nid = inserted._id;\nexpect(inserted).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;834f977d-052c-42dd-b6ce-c35164b6ee5c&quot;,&quot;parentUUID&quot;:&quot;5a6c9037-400c-4eb6-85fd-71724c31d14e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list an apiKeys&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should list an apiKeys&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.key = key;\nawait apiKey.listApiKeys(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst keyList = mockRes.body;\nexpect(keyList).to.exist;\nexpect(keyList.length).to.be.gt(0);\nexpect(keyList[0].hashedKey).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9115dca-b530-45a8-9ac4-2632cf4b211c&quot;,&quot;parentUUID&quot;:&quot;5a6c9037-400c-4eb6-85fd-71724c31d14e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should verify an apiKey&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should verify an apiKey&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.key = key;\nreq.params.tenant = testConfig.tenantOne.tenantId;\nawait apiKey.verifyApiKey(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst deleted = mockRes.body;\nexpect(deleted.message).to.equal(\&quot;api key valid\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2328f738-23ee-4cfc-adc1-5e202f239700&quot;,&quot;parentUUID&quot;:&quot;5a6c9037-400c-4eb6-85fd-71724c31d14e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should  impersonate using a valid api key and return a JWT&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should  impersonate using a valid api key and return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.key = key;\nreq.params.tenant = testConfig.tenantOne.tenantId;\nreq.params.userName = testConfig.tenantOne.adminUser.userName;\nawait apiKey.impersonate(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst impersonated = mockRes.body;\nexpect(impersonated).to.exist;\nexpect(impersonated.token).to.exist;\nexpect(impersonated.userName).to.equal(testConfig.tenantOne.adminUser.userName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ecc6f2a-cc00-4982-a76e-afa8b841b067&quot;,&quot;parentUUID&quot;:&quot;5a6c9037-400c-4eb6-85fd-71724c31d14e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should  impersonate using a valid env token and userName and return a JWT&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should  impersonate using a valid env token and userName and return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\n\n\nreq.params.tenant = testConfig.tenantOne.tenantId;\nreq.params.userName = testConfig.tenantOne.adminUser.userName;\nawait apiKey.impersonateWithSystemApiKey(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst impersonated = mockRes.body;\nexpect(impersonated).to.exist;\nexpect(impersonated.token).to.exist;\nexpect(impersonated.userName).to.equal(testConfig.tenantOne.adminUser.userName);\ncontact = impersonated;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c94dc62e-e9f6-4c09-9d06-7b41917b3bbe&quot;,&quot;parentUUID&quot;:&quot;5a6c9037-400c-4eb6-85fd-71724c31d14e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should  impersonate using a valid env token and userSid and return a JWT&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should  impersonate using a valid env token and userSid and return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\n\n\nreq.params.tenant = testConfig.tenantOne.tenantId;\nreq.params.userSid = contact.contactGuid;\nawait apiKey.impersonateWithSystemApiKey(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst impersonated = mockRes.body;\nexpect(impersonated).to.exist;\nexpect(impersonated.token).to.exist;\nexpect(impersonated.userName).to.equal(testConfig.tenantOne.adminUser.userName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b05e6d70-e98b-47e0-a761-1a7680603414&quot;,&quot;parentUUID&quot;:&quot;5a6c9037-400c-4eb6-85fd-71724c31d14e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;834f977d-052c-42dd-b6ce-c35164b6ee5c&quot;,&quot;b9115dca-b530-45a8-9ac4-2632cf4b211c&quot;,&quot;2328f738-23ee-4cfc-adc1-5e202f239700&quot;,&quot;6ecc6f2a-cc00-4982-a76e-afa8b841b067&quot;,&quot;c94dc62e-e9f6-4c09-9d06-7b41917b3bbe&quot;,&quot;b05e6d70-e98b-47e0-a761-1a7680603414&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:330,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7b0a8fef-8067-4fcf-9696-c6c693d2103c&quot;,&quot;title&quot;:&quot;Auth API Auth Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Auth API Auth Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests \&quot;before all\&quot; hook in \&quot;Auth API Auth Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d57ce0f3-ba05-4fe8-93c9-de64141a87b9&quot;,&quot;parentUUID&quot;:&quot;7b0a8fef-8067-4fcf-9696-c6c693d2103c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1e1c3d24-230d-4f34-bd5e-2e7eb4abd33f&quot;,&quot;title&quot;:&quot;getGuestToken&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return guest auth token&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests getGuestToken should return guest auth token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:37,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet getGuestTokenEvent = await mocks.getGuestTokenEvent()\n\t\t\tlet results = await dbauth.getGuestToken(getGuestTokenEvent, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n      expect(mockRes.body.length).to.be.greaterThan(1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a78d4f1e-7339-41ad-9c0a-7739e2fe07e3&quot;,&quot;parentUUID&quot;:&quot;1e1c3d24-230d-4f34-bd5e-2e7eb4abd33f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a78d4f1e-7339-41ad-9c0a-7739e2fe07e3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:37,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b100a953-776b-4d52-bc9a-94d6c9f28ce2&quot;,&quot;title&quot;:&quot;login&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a contact with a token&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests login should return a contact with a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:87,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet loginEvent = await mocks.loginEvent()\n\t\t\tlet results = await dbauth.login(loginEvent, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst contactInfo = mockRes.body;\n\t\t\texpect(contactInfo.userName).equal(loginEvent.body.username);\n\t\t\texpect(contactInfo.token).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5eb28ae-57f6-4997-a17a-f08af6745595&quot;,&quot;parentUUID&quot;:&quot;b100a953-776b-4d52-bc9a-94d6c9f28ce2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d5eb28ae-57f6-4997-a17a-f08af6745595&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:87,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0aec378f-69d6-4d52-8c47-df5063f4875f&quot;,&quot;title&quot;:&quot;refreshJwt&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;refresh a token a user out&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests refreshJwt refresh a token a user out&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:74,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let mockRes = await mocks.mockResponse();\nlet loginEvent = await mocks.loginEvent()\nlet logoutEvent = await mocks.logoutEvent()\nawait dbauth.login(loginEvent, mockRes);\nconst contactInfo = mockRes.body;\nlogoutEvent.cookies = {\&quot;integrifyRefreshToken\&quot;: contactInfo.refreshToken };\nlogoutEvent.body = {token: contactInfo.token, refreshToken: contactInfo.refreshToken }\nawait jwtFuncs.refreshJwt(logoutEvent, await mocks.mockResponse());\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e658f7c-9d77-4d15-a88f-59a1eed83eb7&quot;,&quot;parentUUID&quot;:&quot;0aec378f-69d6-4d52-8c47-df5063f4875f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2e658f7c-9d77-4d15-a88f-59a1eed83eb7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:74,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;93364cb6-7f49-47e1-84af-784a956e712e&quot;,&quot;title&quot;:&quot;isAuthenticated&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;refresh a token a user out&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests isAuthenticated refresh a token a user out&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let mockRes = await mocks.mockResponse();\n\nawait jwtFuncs.isAuthenticated({cookies: {integrifyToken: \&quot;fake\&quot;}}, mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e319cf8-ffaa-4ecb-9068-2c4ce80f4738&quot;,&quot;parentUUID&quot;:&quot;93364cb6-7f49-47e1-84af-784a956e712e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5e319cf8-ffaa-4ecb-9068-2c4ce80f4738&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7100c788-f381-40fc-a620-5ba45c6ee49a&quot;,&quot;title&quot;:&quot;logout&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should log a user out&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests logout should log a user out&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nlet logoutEvent = await mocks.logoutEvent()\nawait dbauth.logout(logoutEvent, mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;\nexpect(mockRes.body).to.deep.equal({message: &#x27;OK&#x27;});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ced245d9-b66b-4ba4-be7f-4a656ad59026&quot;,&quot;parentUUID&quot;:&quot;7100c788-f381-40fc-a620-5ba45c6ee49a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ced245d9-b66b-4ba4-be7f-4a656ad59026&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f60fa30e-95c5-4171-a4f0-a34d0921a71a&quot;,&quot;title&quot;:&quot;Auth API Reset Password Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-auth/test/integration/functions/resetPassword.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/resetPassword.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Auth API Reset Password Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API Reset Password Tests \&quot;before all\&quot; hook in \&quot;Auth API Reset Password Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(1050000);\nprocess.env.TESTING = true;\nresetRewired.__set__(&#x27;nodemailer&#x27;, nodemailerMock);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40e5a6ea-7859-447b-8420-24816cb63662&quot;,&quot;parentUUID&quot;:&quot;f60fa30e-95c5-4171-a4f0-a34d0921a71a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f9f086b4-25af-4ded-83a9-96578d9ee75b&quot;,&quot;title&quot;:&quot;emailUsernames&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-auth/test/integration/functions/resetPassword.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/resetPassword.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should send an email of accounts for existing email&quot;,&quot;fullTitle&quot;:&quot;Auth API Reset Password Tests emailUsernames should send an email of accounts for existing email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let config = (await Config.getConfig()).test;\n      const accountGuid = config.tenantOne.adminUser.sid.toLowerCase();\n      const mockRes = mocks.mockResponse();\n      const mockReq = await mocks.emailUsernames();\n      await resetRewired.emailUsernames(mockReq, mockRes);\n      expect(mockRes.statusCode).equal(200);\n      expect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69d1925c-c951-4e28-be44-a62bdf763933&quot;,&quot;parentUUID&quot;:&quot;f9f086b4-25af-4ded-83a9-96578d9ee75b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;69d1925c-c951-4e28-be44-a62bdf763933&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7cc865fd-a369-4dd3-8bc6-69605548d1e5&quot;,&quot;title&quot;:&quot;passwordReset&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-auth/test/integration/functions/resetPassword.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/resetPassword.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;passwordReset\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API Reset Password Tests passwordReset \&quot;before all\&quot; hook in \&quot;passwordReset\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;resetRewired.__set__(&#x27;nodemailer&#x27;, nodemailerMock);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bcc2c0ac-dcdc-4e8a-821b-43d4fb33aaeb&quot;,&quot;parentUUID&quot;:&quot;7cc865fd-a369-4dd3-8bc6-69605548d1e5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;emailPassworReset&quot;,&quot;fullTitle&quot;:&quot;Auth API Reset Password Tests passwordReset emailPassworReset&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let config = (await Config.getConfig()).test;\nconst accountGuid = config.tenantOne.adminUser.sid.toLowerCase();\nconst mockRes = mocks.mockResponse();\nconst mockReq = await mocks.emailPasswordReset();\nawait resetRewired.emailPasswordReset(mockReq, mockRes);\n// check if security token was added to redis\nconst securityToken = await redisClient.getAsync(`pwReset:${accountGuid}`);\nconst accountEntry = await redisClient.getAsync(`pwReset:${securityToken}`);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;\nexpect(securityToken).to.exist;\nexpect(accountEntry).to.exist;\n// clean up entries leftover from calling emailPasswordReset\nawait redisClient.del(`pwReset:${accountGuid}`);\nawait redisClient.del(`pwReset:${securityToken}`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c0bd0c3b-3b77-4370-a7e2-d7450a130e37&quot;,&quot;parentUUID&quot;:&quot;7cc865fd-a369-4dd3-8bc6-69605548d1e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c0bd0c3b-3b77-4370-a7e2-d7450a130e37&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;eae3a0a1-0976-4a92-bbe8-f5df0d69ed7f&quot;,&quot;title&quot;:&quot;Auth API SAML Settings Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-auth/test/integration/functions/samlSettings.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/samlSettings.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Auth API SAML Settings Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests \&quot;before all\&quot; hook in \&quot;Auth API SAML Settings Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a61e47d7-2656-4d74-b84e-5baf285522b4&quot;,&quot;parentUUID&quot;:&quot;eae3a0a1-0976-4a92-bbe8-f5df0d69ed7f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Auth API SAML Settings Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests \&quot;after all\&quot; hook in \&quot;Auth API SAML Settings Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await samlSettings.deleteSamlSettingsByName(testConfig.tenantOne.tenantId, &#x27;unitTestIDP&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0af966ca-2f64-426f-b0aa-dad22c02f1ee&quot;,&quot;parentUUID&quot;:&quot;eae3a0a1-0976-4a92-bbe8-f5df0d69ed7f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;dbd2564e-d7f3-4456-90a0-1bcfa47e950e&quot;,&quot;title&quot;:&quot;SAML Settings crud &quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-auth/test/integration/functions/samlSettings.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/samlSettings.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should insert saml settings and return a doc&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should insert saml settings and return a doc&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\n           \nreq.body = data;\nawait samlSettings.createSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst inserted = mockRes.body;\n\nsamlId = inserted._id;\nexpect(inserted).to.exist;\nexpect(inserted.idpMetaData).to.equal(data.idpMetaData);\nexpect(inserted.idpName).to.equal(data.idpName);\nexpect(inserted.idpDescription).to.equal(data.idpDescription);\nexpect(inserted.createdByDetail).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d2839bf3-7fdd-4cbd-81cf-db6dd4ad1d27&quot;,&quot;parentUUID&quot;:&quot;dbd2564e-d7f3-4456-90a0-1bcfa47e950e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get saml settings without an id&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should get saml settings without an id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nawait samlSettings.getSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result.createdByDetail).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e082ed39-0a2c-4cd1-9747-66471e89f719&quot;,&quot;parentUUID&quot;:&quot;dbd2564e-d7f3-4456-90a0-1bcfa47e950e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get saml settings with an id&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should get saml settings with an id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.samlId = samlId.toString();\nawait samlSettings.getSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result._id.toString()).to.equal(samlId.toString());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c490da84-53e3-4059-9029-0a6be0527889&quot;,&quot;parentUUID&quot;:&quot;dbd2564e-d7f3-4456-90a0-1bcfa47e950e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update saml settings&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should update saml settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.samlId = samlId;\n\nreq.body = data;\n\nawait samlSettings.updateSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;659e7483-9915-465d-a545-92a471725783&quot;,&quot;parentUUID&quot;:&quot;dbd2564e-d7f3-4456-90a0-1bcfa47e950e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return sp metadata&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should return sp metadata&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.tenant = testConfig.tenantOne.tenantId;\nawait samlSettings.getMetaData(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst metadata = mockRes.body;\nexpect(metadata).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd99c674-3653-4a31-aeaa-7b1c5a86cd53&quot;,&quot;parentUUID&quot;:&quot;dbd2564e-d7f3-4456-90a0-1bcfa47e950e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete saml settings&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should delete saml settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.samlId = samlId;\nawait samlSettings.deleteSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst deleted = mockRes.body;\nexpect(deleted.message).to.equal(\&quot;delete successful\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dfaf7b32-5190-40c8-88c0-983ec1d6afc8&quot;,&quot;parentUUID&quot;:&quot;dbd2564e-d7f3-4456-90a0-1bcfa47e950e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d2839bf3-7fdd-4cbd-81cf-db6dd4ad1d27&quot;,&quot;e082ed39-0a2c-4cd1-9747-66471e89f719&quot;,&quot;c490da84-53e3-4059-9029-0a6be0527889&quot;,&quot;659e7483-9915-465d-a545-92a471725783&quot;,&quot;fd99c674-3653-4a31-aeaa-7b1c5a86cd53&quot;,&quot;dfaf7b32-5190-40c8-88c0-983ec1d6afc8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:45,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;feb76de7-ca9b-4e30-bb6e-6f963c613046&quot;],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2c85c368-6a83-43d3-a3e5-31bf20eba60b&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ec140918-68bc-4b1e-b0fb-c054bdd37f17&quot;,&quot;title&quot;:&quot;Dashboard controller tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-dashboards/test/dashboard.controller.test.js&quot;,&quot;file&quot;:&quot;/test/dashboard.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3be39909-3d92-42d1-91e8-8274662f2459&quot;,&quot;parentUUID&quot;:&quot;ec140918-68bc-4b1e-b0fb-c054bdd37f17&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test&#x27;});\ndeleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test-copy&#x27;});\nconsole.log(deleted);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;62fc7e96-4d98-407a-b9bd-de4d26fb311d&quot;,&quot;parentUUID&quot;:&quot;ec140918-68bc-4b1e-b0fb-c054bdd37f17&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f0cad86d-fa9d-4963-997a-516b5b496e77&quot;,&quot;title&quot;:&quot;dashboard crud &quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-dashboards/test/dashboard.controller.test.js&quot;,&quot;file&quot;:&quot;/test/dashboard.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should create a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  dashboard = await dashboardController.createDashboard(tenant, dashboardObj);\nsid = dashboard.sid;\nexpect(sid).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d35d4826-1d6c-4911-8c8c-393359aacca2&quot;,&quot;parentUUID&quot;:&quot;f0cad86d-fa9d-4963-997a-516b5b496e77&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list dashboards for end users&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should list dashboards for end users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  dashboards = await dashboardController.listDashboards(tenant);\n         expect(dashboards.length).to.be.gt(0);  \n         let createdDashord  = dashboards.find((d) =&gt; {\n             return d.sid === sid;\n         })\n         expect\n         (createdDashord).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2922fdeb-96f3-4ade-84cb-4e9c76412104&quot;,&quot;parentUUID&quot;:&quot;f0cad86d-fa9d-4963-997a-516b5b496e77&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should get a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;dashboard = await dashboardController.getDashboard(tenant,sid);\n            expect(dashboard).to.exist         \n            expect(dashboard.sid).to.equal(sid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cbbacf60-0909-4a39-a52d-f5608a187e9b&quot;,&quot;parentUUID&quot;:&quot;f0cad86d-fa9d-4963-997a-516b5b496e77&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should update a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;dashboard.banner = &#x27;test-updated&#x27;;\n            const updatedDashboard = await dashboardController.updateDashboard(tenant,dashboard.toObject());\n            expect(updatedDashboard).to.exist         \n            expect(updatedDashboard.sid).to.equal(sid)\n            expect(updatedDashboard.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5df7780-d791-4991-8519-5615b3bdafd8&quot;,&quot;parentUUID&quot;:&quot;f0cad86d-fa9d-4963-997a-516b5b496e77&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should copy a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should copy a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const copiedDashboard = await dashboardController.copyDashboard(tenant, sid);\n            expect(copiedDashboard).to.exist         \n            expect(copiedDashboard.sid).to.not.equal(sid)\n            expect(copiedDashboard._id).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e0f3c217-7be9-4242-8580-06cabee6d678&quot;,&quot;parentUUID&quot;:&quot;f0cad86d-fa9d-4963-997a-516b5b496e77&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  delete a a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const deleted = await dashboardController.deleteDashboard(tenant,sid);\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e21c958-88ec-4334-a2d1-d9effb7aac81&quot;,&quot;parentUUID&quot;:&quot;f0cad86d-fa9d-4963-997a-516b5b496e77&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d35d4826-1d6c-4911-8c8c-393359aacca2&quot;,&quot;2922fdeb-96f3-4ade-84cb-4e9c76412104&quot;,&quot;cbbacf60-0909-4a39-a52d-f5608a187e9b&quot;,&quot;f5df7780-d791-4991-8519-5615b3bdafd8&quot;,&quot;e0f3c217-7be9-4242-8580-06cabee6d678&quot;,&quot;0e21c958-88ec-4334-a2d1-d9effb7aac81&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:65,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;99a07f92-2aea-4bd0-9f83-0633629745b4&quot;,&quot;title&quot;:&quot;Dashboard route handler tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-dashboards/test/dashboard.handlers.test.js&quot;,&quot;file&quot;:&quot;/test/dashboard.handlers.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\n\ntestConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;\nsession = (await mocks.req()).oauth;\nperms  = await permissions.currentUserPermissions(session)\nlet permissionsWithRun = perms.concat([\n    {\n        \&quot;objectType\&quot;: \&quot;tab\&quot;,\n        \&quot;ownerSid\&quot;: \&quot;bb6cb26b-d179-4763-b2cb-69d107dfd1d8\&quot;,\n        \&quot;ownerType\&quot;: \&quot;system\&quot;,\n        \&quot;permissions\&quot;: enums.permissionTypes.run,\n        \&quot;roleName\&quot;: \&quot;system administrators\&quot;,\n        \&quot;roleGuid\&quot;: \&quot;a48ea7cf-f1ba-4ca9-bf17-2c97d49336cd\&quot;\n      }\n])\nawait permissions.cachePerms(session, permissionsWithRun);\nconsole.log(permissionsWithRun)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ae8179c-d7a8-451c-8af8-6d2032f0fcc5&quot;,&quot;parentUUID&quot;:&quot;99a07f92-2aea-4bd0-9f83-0633629745b4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test&#x27;});\ndeleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test-copy&#x27;});\nconsole.log(deleted);\nawait permissions.cachePerms(session, perms);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;52c9d42c-e698-46d8-957d-5b33b8a88cfd&quot;,&quot;parentUUID&quot;:&quot;99a07f92-2aea-4bd0-9f83-0633629745b4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;961c41a9-4ae8-4dd6-a8e6-c72848c30c14&quot;,&quot;title&quot;:&quot;dashboard crud &quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-dashboards/test/dashboard.handlers.test.js&quot;,&quot;file&quot;:&quot;/test/dashboard.handlers.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should create a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = dashboardObj;\nawait handlers.createDashboard(req,mockRes);\nconst dashboard = req.body;\nsid = dashboard.sid;\nexpect(sid).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7bf0f31b-a69c-4864-8ea6-cb9381fbb673&quot;,&quot;parentUUID&quot;:&quot;961c41a9-4ae8-4dd6-a8e6-c72848c30c14&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list dashboards for end users&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should list dashboards for end users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nawait handlers.listDashboards(req,mockRes);\nconst  dashboards = mockRes.body;\nexpect(dashboards.length).to.be.gt(0);  \nlet createdDashboard  = dashboards.find((d) =&gt; {\n    return d.sid === sid;\n})\nexpect(createdDashboard).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1433e524-5277-4d99-8ec1-02ff314878b5&quot;,&quot;parentUUID&quot;:&quot;961c41a9-4ae8-4dd6-a8e6-c72848c30c14&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list dashboards for admins&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should list dashboards for admins&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.query.admin = true;\nawait handlers.listDashboards(req,mockRes);\nconst  dashboards = mockRes.body;\nexpect(dashboards.length).to.be.gt(0);  \nlet createdDashboard  = dashboards.find((d) =&gt; {\n    return d.sid === sid;\n})\nexpect(createdDashboard).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d145e0c0-2a4d-4db1-b710-187b9c1883c3&quot;,&quot;parentUUID&quot;:&quot;961c41a9-4ae8-4dd6-a8e6-c72848c30c14&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should get a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.sid = sid;\nawait handlers.getDashboard(req,mockRes);\ndashboard = mockRes.body;\nexpect(dashboard).to.exist         \nexpect(dashboard.sid).to.equal(sid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48470839-5fdd-4206-b841-52f3af91161c&quot;,&quot;parentUUID&quot;:&quot;961c41a9-4ae8-4dd6-a8e6-c72848c30c14&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should update a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.sid = sid;\nreq.body = dashboard.toObject();\nawait handlers.updateDashboard(req,mockRes);\nconst updatedDashboard = mockRes.body;\nexpect(updatedDashboard).to.exist         \nexpect(updatedDashboard.sid).to.equal(sid)\nexpect(updatedDashboard.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0a14245-8105-4ca5-83ae-e843fc53746a&quot;,&quot;parentUUID&quot;:&quot;961c41a9-4ae8-4dd6-a8e6-c72848c30c14&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should copy a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should copy a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.sid = sid;\nreq.body = dashboard.toObject();\nawait handlers.copyDashboard(req,mockRes);\nconst copiedDashboard = mockRes.body;\nexpect(copiedDashboard).to.exist         \nexpect(copiedDashboard.sid).to.not.equal(sid)\nexpect(copiedDashboard._id).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f83d560-bdbc-404e-9dca-e4d49f445aeb&quot;,&quot;parentUUID&quot;:&quot;961c41a9-4ae8-4dd6-a8e6-c72848c30c14&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should delete a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.sid = sid;\nawait handlers.deleteDashboard(req,mockRes);\nlet deleted = mockRes.body;\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc351737-296d-4681-a4f9-9875bc8c8bfa&quot;,&quot;parentUUID&quot;:&quot;961c41a9-4ae8-4dd6-a8e6-c72848c30c14&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7bf0f31b-a69c-4864-8ea6-cb9381fbb673&quot;,&quot;1433e524-5277-4d99-8ec1-02ff314878b5&quot;,&quot;d145e0c0-2a4d-4db1-b710-187b9c1883c3&quot;,&quot;48470839-5fdd-4206-b841-52f3af91161c&quot;,&quot;a0a14245-8105-4ca5-83ae-e843fc53746a&quot;,&quot;2f83d560-bdbc-404e-9dca-e4d49f445aeb&quot;,&quot;cc351737-296d-4681-a4f9-9875bc8c8bfa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:34,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;18c57c65-ee27-41db-bdab-4fd49513d07f&quot;,&quot;title&quot;:&quot;Legacy tab mongo tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-dashboards/test/tab.test.js&quot;,&quot;file&quot;:&quot;/test/tab.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig()\ntenant = testConfig.tenantOne.tenantId;;\ntab = await dashboardController.createTestTab(tenant)\nexpect(tab.SID).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b788269a-f853-40a0-8cdd-eb1908333c75&quot;,&quot;parentUUID&quot;:&quot;18c57c65-ee27-41db-bdab-4fd49513d07f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await dashboardController.deleteTabs(tenant, {Title: &#x27;created-by-mocha-test&#x27;});\ndeleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test&#x27;});\ndeleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test-migrated&#x27;});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;490a3197-163f-4773-9e98-4b917d22e07b&quot;,&quot;parentUUID&quot;:&quot;18c57c65-ee27-41db-bdab-4fd49513d07f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b08cd335-0367-4b24-8804-40b29d5c5b88&quot;,&quot;title&quot;:&quot;tab crud &quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-dashboards/test/tab.test.js&quot;,&quot;file&quot;:&quot;/test/tab.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a legacy tab&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should create a legacy tab&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  tab = await dashboardController.createTestTab(tenant);\n\n tabSid = tab.SID;\n expect(tabSid).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be29dcbe-6fcd-4342-a446-9ef891e8df11&quot;,&quot;parentUUID&quot;:&quot;b08cd335-0367-4b24-8804-40b29d5c5b88&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list legacy tabs&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should list legacy tabs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  tabs = await dashboardController.listTabs(tenant);\n expect(tabs.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45242b67-feab-42e2-ad5c-fceb1871c005&quot;,&quot;parentUUID&quot;:&quot;b08cd335-0367-4b24-8804-40b29d5c5b88&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a legacy tab&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should get a legacy tab&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;tab = await dashboardController.getTab(tenant,tabSid);\n            expect(tab).to.exist         \n            expect(tab.SID).to.equal(tabSid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;942f7f26-7f79-44c3-8025-b878bffb3431&quot;,&quot;parentUUID&quot;:&quot;b08cd335-0367-4b24-8804-40b29d5c5b88&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a tab using a dashboard object&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should update a tab using a dashboard object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const dashboardObject = {\n    sid: tab.SID,\n    title: tab.Title,\n    ordinal: 5000,\n}\nconst dashboardMask = await dashboardController.updateTabFromDashboardObject(tenant,dashboardObject);\nexpect(dashboardObject.modifiedDate).to.exist\ntab = await dashboardController.getTab(tenant,tab.SID);\nexpect(tab).to.exist         \nexpect(tab.SID).to.equal(tabSid)\nexpect(tab.Ordinal).to.equal(dashboardObject.ordinal)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3141b8c0-1302-48e2-9b6d-103b6fdf3ade&quot;,&quot;parentUUID&quot;:&quot;b08cd335-0367-4b24-8804-40b29d5c5b88&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should convert a legacy tab&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should convert a legacy tab&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  dashboard = await dashboardController.converTabToDashboard(tab);\n            expect(dashboard).to.exist         \n            expect(dashboard.layouts).to.exist;\n            expect(dashboard.legacySid).to.equal(tabSid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2bc43abe-b9d5-4b74-9e11-331d2902f1ed&quot;,&quot;parentUUID&quot;:&quot;b08cd335-0367-4b24-8804-40b29d5c5b88&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should migrate legacy tab to dashboard&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should migrate legacy tab to dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  success = await dashboardController.migrateTabToDashboard(tenant, tabSid);\n            expect(success.sid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae0ed21f-f1e8-4801-9c18-27fcfe453dea&quot;,&quot;parentUUID&quot;:&quot;b08cd335-0367-4b24-8804-40b29d5c5b88&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;be29dcbe-6fcd-4342-a446-9ef891e8df11&quot;,&quot;45242b67-feab-42e2-ad5c-fceb1871c005&quot;,&quot;942f7f26-7f79-44c3-8025-b878bffb3431&quot;,&quot;3141b8c0-1302-48e2-9b6d-103b6fdf3ade&quot;,&quot;2bc43abe-b9d5-4b74-9e11-331d2902f1ed&quot;,&quot;ae0ed21f-f1e8-4801-9c18-27fcfe453dea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bf187291-7579-4073-ac45-9d887149b874&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bd3e9d11-0f8b-41d5-bfed-cb2fd2f1aabf&quot;,&quot;title&quot;:&quot;Files db controller tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-files/test/db/file.controller.test.js&quot;,&quot;file&quot;:&quot;/test/db/file.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Files db controller tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests \&quot;before all\&quot; hook in \&quot;Files db controller tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await testLib.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97b7adf2-f690-40f9-9414-01f2af8938b8&quot;,&quot;parentUUID&quot;:&quot;bd3e9d11-0f8b-41d5-bfed-cb2fd2f1aabf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Files db controller tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests \&quot;after all\&quot; hook in \&quot;Files db controller tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await fileController.removeFiles(tenant, {path: \&quot;/created/by/mocha/test\&quot;});\nconsole.log(deleted);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bbf2c15f-b9e3-422a-94d9-146d9172689e&quot;,&quot;parentUUID&quot;:&quot;bd3e9d11-0f8b-41d5-bfed-cb2fd2f1aabf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c43aefe8-997d-4843-bf17-67d0adf668af&quot;,&quot;title&quot;:&quot;file crud &quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-files/test/db/file.controller.test.js&quot;,&quot;file&quot;:&quot;/test/db/file.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  should create a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:64,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const file = await fileController.createFile(tenant, fileObj);\nsid = file.sid;\nexpect(sid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff2cd980-7dd8-4f80-a044-ae17750d26d8&quot;,&quot;parentUUID&quot;:&quot;c43aefe8-997d-4843-bf17-67d0adf668af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  should get a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;file = await fileController.getFile(tenant, sid);\nexpect(file).to.exist;\nexpect(file.sid).to.equal(sid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4669f528-5c76-4e95-9c75-cec7f048b5f2&quot;,&quot;parentUUID&quot;:&quot;c43aefe8-997d-4843-bf17-67d0adf668af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should find a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  should find a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;file = await fileController.findFile(tenant, {filePath: \&quot;/created/by/mocha/test\&quot;});\nexpect(file).to.exist;\nexpect(file.sid).to.equal(sid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b42232d7-5037-46a0-8340-8391d17eb3ac&quot;,&quot;parentUUID&quot;:&quot;c43aefe8-997d-4843-bf17-67d0adf668af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  should update a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const updatedFile = await fileController.updateFile(\n  tenant,\n  file.toObject()\n);\nexpect(updatedFile).to.exist;\nexpect(updatedFile.sid).to.equal(sid);\nexpect(updatedFile.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;32debe97-a892-4217-bc3b-8f128e9e9a61&quot;,&quot;parentUUID&quot;:&quot;c43aefe8-997d-4843-bf17-67d0adf668af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  delete a a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const deleted = await fileController.removeFile(tenant, fileObj);\nexpect(deleted).to.exist;\nexpect(deleted.deletedCount).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;72f91c4b-5e01-4a04-b383-df087fe34415&quot;,&quot;parentUUID&quot;:&quot;c43aefe8-997d-4843-bf17-67d0adf668af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ff2cd980-7dd8-4f80-a044-ae17750d26d8&quot;,&quot;4669f528-5c76-4e95-9c75-cec7f048b5f2&quot;,&quot;b42232d7-5037-46a0-8340-8391d17eb3ac&quot;,&quot;32debe97-a892-4217-bc3b-8f128e9e9a61&quot;,&quot;72f91c4b-5e01-4a04-b383-df087fe34415&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:90,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c605984e-0fda-499a-9936-ed31607bc1c9&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;22536df1-9717-4065-8c0c-dd7373a9dbcd&quot;,&quot;title&quot;:&quot;Instance API Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()} //system level\n// session = {tenant: config.tenantOne.tenantId, user_sid: &#x27;1e660111-de6f-4318-8f51-6e59cb33d8d7&#x27;} //process level\n// session = {tenant: config.tenantOne.tenantId, user_sid:&#x27;521a92c8-e77c-4537-811b-dea6e533d800&#x27;} //category level\ntenantId = config.tenantOne.tenantId;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d3d41d4-048f-4ea0-b628-183a59b35d6d&quot;,&quot;parentUUID&quot;:&quot;22536df1-9717-4065-8c0c-dd7373a9dbcd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;77415f67-06d4-4913-b595-0c8dab81d587&quot;,&quot;title&quot;:&quot;list tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;get a full instance&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get a full instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:262,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet instances = await Instance.query().orderBy(\&quot;createdDate\&quot;, \&quot;desc\&quot;);\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst fullInstance = await instanceController.getFullInstance(\n  sampleInstanceGuid\n);\nexpect(fullInstance).to.exist;\nexpect(fullInstance.instanceTasks.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f583558-279a-4ab1-91d0-185e6e5bfd69&quot;,&quot;parentUUID&quot;:&quot;77415f67-06d4-4913-b595-0c8dab81d587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet instances = await Instance.query().orderBy(\&quot;createdDate\&quot;, \&quot;desc\&quot;);\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst instance = await instanceController.getInstance(sampleInstanceGuid)\nexpect(instance).to.exist;\nexpect(instance.instanceGuid).to.equal(sampleInstanceGuid)\nexpect(instance.instanceId).to.be.gt(0)\nexpect(instance.requester).to.not.exist;\nexpect(instance.client).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;194d92df-c2cf-4aad-ae17-794689d906d2&quot;,&quot;parentUUID&quot;:&quot;77415f67-06d4-4913-b595-0c8dab81d587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance with requester&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance with requester&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet instances = await Instance.query().orderBy(\&quot;createdDate\&quot;, \&quot;desc\&quot;);\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst instance = await instanceController.getInstance(sampleInstanceGuid, {requester: true})\nexpect(instance).to.exist;\nexpect(instance.instanceGuid).to.equal(sampleInstanceGuid)\nexpect(instance.instanceId).to.be.gt(0)\nexpect(instance.requester).to.exist;\nexpect(instance.requester.contactGuid).to.exist;\nexpect(instance.client).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d2ceeb7-c88f-4732-b0f2-750fc3831492&quot;,&quot;parentUUID&quot;:&quot;77415f67-06d4-4913-b595-0c8dab81d587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance with client&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance with client&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet instances = await Instance.query().orderBy(\&quot;createdDate\&quot;, \&quot;desc\&quot;);\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst instance = await instanceController.getInstance(sampleInstanceGuid, {client: true})\nexpect(instance).to.exist;\nexpect(instance.instanceGuid).to.equal(sampleInstanceGuid)\nexpect(instance.instanceId).to.be.gt(0)\nexpect(instance.requester).to.not.exist;\nexpect(instance.client).to.exist;\nexpect(instance.client.contactGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd59bd29-e7d6-40f1-89e1-1ccddd6fae26&quot;,&quot;parentUUID&quot;:&quot;77415f67-06d4-4913-b595-0c8dab81d587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance with client manager&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance with client manager&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\n// get instances for Joe User, who reports to System System\nlet instances = await Instance.query().where(\&quot;clientGuid\&quot;, &#x27;92a73dad-d953-4c59-9c5e-5d037791d411&#x27;);\n\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst instance = await instanceController.getInstance(sampleInstanceGuid, {clientManager: true})\nexpect(instance).to.exist;\nexpect(instance.instanceGuid).to.equal(sampleInstanceGuid)\nexpect(instance.instanceId).to.be.gt(0)\nexpect(instance.requester).to.not.exist;\nexpect(instance.client).to.exist;\nexpect(instance.client.contactGuid).to.exist;\nexpect(instance.client.manager).to.exist;\nexpect(instance.client.manager.contactGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0514faee-9d4d-4980-a327-e1e089bdb858&quot;,&quot;parentUUID&quot;:&quot;77415f67-06d4-4913-b595-0c8dab81d587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance process&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance process&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet instances = await Instance.query().orderBy(\&quot;createdDate\&quot;, \&quot;desc\&quot;);\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst instanceProcess = await instanceController.getInstanceProcess(sampleInstanceGuid)\nexpect(instanceProcess).to.exist;\nexpect(instanceProcess.instanceGuid).to.equal(sampleInstanceGuid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;311721b5-6a70-4f1f-88e4-877a5ce02814&quot;,&quot;parentUUID&quot;:&quot;77415f67-06d4-4913-b595-0c8dab81d587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance recipient tasks data by instanceSid&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance recipient tasks data by instanceSid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(config.tenantOne);\nconst instanceSid = &#x27;6D4785AE-57A2-46C5-9141-DE2B134ED8EF&#x27;\nconst instanceTasks = await instanceController.getInstanceRecipientTasksData(instanceSid);\n\nexpect(instanceTasks).to.exist;\nexpect(instanceTasks.length).to.be.gt(0);\nconst maintenanceReqFormTask = instanceTasks[2]\nexpect(maintenanceReqFormTask.taskName).to.equal(&#x27;Maintenance Request Form&#x27;)\nexpect(maintenanceReqFormTask.recipientTasks.length).to.be.gt(0)\nconst recipientTask = maintenanceReqFormTask.recipientTasks[0]\nexpect(recipientTask.recipientGuid).to.equal(&#x27;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF&#x27;);\nexpect(recipientTask.taskData.length).to.be.gt(0)\nexpect(recipientTask.taskData.find(x =&gt; x.dataLabel == &#x27;Location of Problem&#x27;).dataValue).to.equal(&#x27;Inside the building&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;185bd747-5687-4bd0-8ce9-13bad48bc00b&quot;,&quot;parentUUID&quot;:&quot;77415f67-06d4-4913-b595-0c8dab81d587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my requests columns&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my requests columns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getMyRequests();\n        \nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64ab64db-a7d8-4c19-9e93-de72bf0336c0&quot;,&quot;parentUUID&quot;:&quot;77415f67-06d4-4913-b595-0c8dab81d587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - filters - ID&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - filters - ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\n        \nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;processId\&quot;,\n          data: {\n            comparison: \&quot;eq\&quot;,\n            value: sampleInstance.processId,\n          },\n        },\n      ],\n      count: 5,\n    });\n        \n    expect(result.results[0].processId).to.equal(sampleInstance.processId);\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;instanceId\&quot;,\n          data: {\n            comparison: \&quot;gt\&quot;,\n            value: 500,\n          },\n        },\n      ],\n      sort: \&quot;instanceId\&quot;,\n      dir: \&quot;asc\&quot;,\n      count: 5,\n    });\n        \n    // no longer useful after starting over with an empty db\n    // result.results.length.should.equal(5); \n        \n    result.results.forEach((result) =&gt; {\n      expect(result.instanceId).to.be.gt(500);\n    });\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;instanceId\&quot;,\n          data: {\n            comparison: \&quot;lt\&quot;,\n            value: 505,\n          },\n        },\n      ],\n      sort: \&quot;instanceId\&quot;,\n      dir: \&quot;desc\&quot;,\n      count: 2,\n    });\n        \n    expect(result.results.length).to.equal(2);\n    result.results.forEach((result) =&gt; {\n      expect(result.instanceId).to.be.lt(505);\n    });\n  })\n);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;TypeError: Cannot read property &#x27;processId&#x27; of undefined&quot;,&quot;estack&quot;:&quot;TypeError: Cannot read property &#x27;processId&#x27; of undefined\n    at /home/omar/Github/integrify/api-instance/test/db/instanceController.test.js:187:42\n    at async Promise.all (index 0)\n    at async Context.&lt;anonymous&gt; (test/db/instanceController.test.js:172:13)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;1cb0b33f-9504-4630-8d7d-5de559f52f1d&quot;,&quot;parentUUID&quot;:&quot;77415f67-06d4-4913-b595-0c8dab81d587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - filters - date&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - filters - date&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:100,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\n        \nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let d = moment().day(-90);\n    let result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;range\&quot;, value: \&quot;90\&quot; },\n        },\n      ],\n      count: 1,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    if (result.results.length)\n      expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    d = moment().year(-30);\n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;range\&quot;, value: \&quot;30\&quot; },\n        },\n      ],\n      count: 1,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    if (result.results.length)\n        expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    d = moment().day(-7);\n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;range\&quot;, value: \&quot;7\&quot; },\n        },\n      ],\n      count: 1,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    // if (result.results.length)\n    //     expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    // d = moment().day(-3);\n    // result = await f.call(instanceController, {\n    //   filters: [\n    //     {\n    //       field: \&quot;StartDate\&quot;,\n    //       data: { comparison: \&quot;range\&quot;, value: \&quot;3\&quot; },\n    //     },\n    //   ],\n    //   count: 1,\n    //   dir: \&quot;asc\&quot;,\n    // });\n        \n    // if (result.results.length)\n    //     expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    // d = moment().day(-1);\n    // result = await f.call(instanceController, {\n    //   filters: [\n    //     {\n    //       field: \&quot;StartDate\&quot;,\n    //       data: { comparison: \&quot;range\&quot;, value: \&quot;1\&quot; },\n    //     },\n    //   ],\n    //   count: 1,\n    //   dir: \&quot;asc\&quot;,\n    // });\n        \n    // if (result.results.length)\n    //     expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    const startDate = moment(\&quot;2018-10-11\&quot;);\n    const endDate = moment(\&quot;2018-11-23\&quot;);\n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;gt\&quot;, value: \&quot;2018-10-11\&quot; },\n        },\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;lt\&quot;, value: \&quot;2018-11-23\&quot; },\n        },\n      ],\n      count: 1,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    if (result.results.length) {\n        expect(result.results[0].startDate).to.be.gt(startDate.toDate());\n        expect(result.results[0].startDate).to.be.lt(endDate.toDate());\n    }\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6dd8221d-f6cf-47e9-9df4-2160c8f044f3&quot;,&quot;parentUUID&quot;:&quot;77415f67-06d4-4913-b595-0c8dab81d587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - filters - name&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - filters - name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:77,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;instanceName\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: \&quot;test\&quot; },\n        },\n      ],\n      count: 10,\n    });\n        \n    result.results.forEach((instance) =&gt; {\n      expect(instance.instanceName.toLowerCase()).to.contain(\&quot;test\&quot;);\n    });\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;processName\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: \&quot;test\&quot; },\n        },\n      ],\n      count: 10,\n    });\n        \n    // no longer useful after starting over with an empty db\n    // result.results.forEach((instance) =&gt; {\n    //   instance.processName.should.contain(\&quot;test\&quot;);\n    // });\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;requester\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: \&quot;system system\&quot; },\n        },\n      ],\n      count: 10,\n    });\n        \n    result.results.forEach((instance) =&gt; {\n      expect(instance.requesterGuid\n        .toLowerCase())\n        .to.equal(session.user_sid.toLowerCase());\n    });\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da06bb5a-370a-4e13-97cb-67dd7e095bcd&quot;,&quot;parentUUID&quot;:&quot;77415f67-06d4-4913-b595-0c8dab81d587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - filters - guid&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - filters - guid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:51,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;processGuid\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: sampleInstance.processGuid },\n        },\n      ],\n      count: 10,\n    });\n        \n    result.results.forEach((instance) =&gt; {\n      expect(instance.processName.indexOf(sampleInstance.processName)).to.be.gt(-1);\n    });\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;requesterGuid\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: session.user_sid },\n        },\n      ],\n      count: 10,\n    });\n        \n    result.results.forEach((instance) =&gt; {\n      expect(instance.requesterGuid\n        .toLowerCase())\n        .to.equal(session.user_sid);\n    });\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;babeb394-6626-4aad-9a63-e929779ab13d&quot;,&quot;parentUUID&quot;:&quot;77415f67-06d4-4913-b595-0c8dab81d587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - count&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\n        \nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, { count: 2 });\n        \n    expect(result.results).to.exist;\n    expect(result.results.length).to.equal(2);\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e0667d0-51bf-4975-b363-4793da4e197b&quot;,&quot;parentUUID&quot;:&quot;77415f67-06d4-4913-b595-0c8dab81d587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my requests params - sort, dir&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my requests params - sort, dir&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      count: 2,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    expect(result.results[0].createdDate).to.be.lt(\n      result.results[1].createdDate\n    );\n        \n    result = await f.call(instanceController, {\n      count: 2,\n      dir: \&quot;desc\&quot;,\n    });\n        \n    expect(result.results[0].createdDate).to.be.gt(\n      result.results[1].createdDate\n    );\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0f2980b-8df9-410b-ab17-d70238b64d8e&quot;,&quot;parentUUID&quot;:&quot;77415f67-06d4-4913-b595-0c8dab81d587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my requests param - start&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my requests param - start&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      start: 0,\n      count: 2,\n      sort: \&quot;instanceId\&quot;,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    const startZeroId = result.results[0].instanceId;\n        \n    result = await f.call(instanceController, {\n      start: 1,\n      count: 2,\n      sort: \&quot;instanceId\&quot;,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    const startOneId = result.results[0].instanceId;\n        \n    expect(startZeroId).to.be.lessThan(startOneId);\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44969f2c-05d8-4d63-9dfd-38bad191793a&quot;,&quot;parentUUID&quot;:&quot;77415f67-06d4-4913-b595-0c8dab81d587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get monitor requests&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get monitor requests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({permisionType: &#x27;monitor&#x27;});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\nexpect(firstInstance.requester).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c26a4fe4-1f48-42c6-b4d0-f1e8f61e8d7c&quot;,&quot;parentUUID&quot;:&quot;77415f67-06d4-4913-b595-0c8dab81d587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get monitor requests with search term against procssName, instanceName and requester&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get monitor requests with search term against procssName, instanceName and requester&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({search: sampleInstance.processName, permisionType: &#x27;monitor&#x27;});\nconsole.log(result)\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\nexpect(firstInstance.requester).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20319cb2-e7e8-4c80-a703-1ac6a5b39cd0&quot;,&quot;parentUUID&quot;:&quot;77415f67-06d4-4913-b595-0c8dab81d587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get monitor requests with a numeric term against instanceId&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get monitor requests with a numeric term against instanceId&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({search: sampleInstance.instanceId, permisionType: &#x27;monitor&#x27;});\nconsole.log(result)\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\nexpect(firstInstance.requester).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a04d3a34-cee5-41d7-bac9-12c96127e2dc&quot;,&quot;parentUUID&quot;:&quot;77415f67-06d4-4913-b595-0c8dab81d587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get manage requests&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get manage requests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({permisionType: &#x27;manage&#x27;});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\nexpect(firstInstance.requester).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9b07e6d-8593-4b21-81b4-f24fabc07346&quot;,&quot;parentUUID&quot;:&quot;77415f67-06d4-4913-b595-0c8dab81d587&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2f583558-279a-4ab1-91d0-185e6e5bfd69&quot;,&quot;194d92df-c2cf-4aad-ae17-794689d906d2&quot;,&quot;3d2ceeb7-c88f-4732-b0f2-750fc3831492&quot;,&quot;dd59bd29-e7d6-40f1-89e1-1ccddd6fae26&quot;,&quot;0514faee-9d4d-4980-a327-e1e089bdb858&quot;,&quot;311721b5-6a70-4f1f-88e4-877a5ce02814&quot;,&quot;185bd747-5687-4bd0-8ce9-13bad48bc00b&quot;,&quot;64ab64db-a7d8-4c19-9e93-de72bf0336c0&quot;,&quot;6dd8221d-f6cf-47e9-9df4-2160c8f044f3&quot;,&quot;da06bb5a-370a-4e13-97cb-67dd7e095bcd&quot;,&quot;babeb394-6626-4aad-9a63-e929779ab13d&quot;,&quot;4e0667d0-51bf-4975-b363-4793da4e197b&quot;,&quot;f0f2980b-8df9-410b-ab17-d70238b64d8e&quot;,&quot;44969f2c-05d8-4d63-9dfd-38bad191793a&quot;,&quot;c26a4fe4-1f48-42c6-b4d0-f1e8f61e8d7c&quot;,&quot;20319cb2-e7e8-4c80-a703-1ac6a5b39cd0&quot;,&quot;a04d3a34-cee5-41d7-bac9-12c96127e2dc&quot;,&quot;a9b07e6d-8593-4b21-81b4-f24fabc07346&quot;],&quot;failures&quot;:[&quot;1cb0b33f-9504-4630-8d7d-5de559f52f1d&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:777,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;5789e6f8-0509-463b-a282-532fd0709842&quot;,&quot;title&quot;:&quot;delete/undelete tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes a request&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests deletes a request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:62,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({permisionType: &#x27;monitor&#x27;});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\nsampleInstances = result.results;\n    \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\nsampleInstanceGuid = firstInstance.instanceGuid;\n      \nlet deleted = await instanceController.deleteInstance(sampleInstanceGuid);\n\nexpect(sampleInstanceGuid).to.equal(deleted.instanceGuid)\nexpect(deleted.deletedDate).not.be.null\nconst Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet excludeDeleted = await Instance.query().where({instanceGuid: sampleInstanceGuid})\nexpect(excludeDeleted.length).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a57a5e61-a741-4d77-8f03-6a79a24552e9&quot;,&quot;parentUUID&quot;:&quot;5789e6f8-0509-463b-a282-532fd0709842&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retores a request&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests retores a request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nlet undeleted = await instanceController.restoreInstance(sampleInstanceGuid);\n//expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\nexpect(sampleInstanceGuid).to.equal(undeleted.instanceGuid)\nexpect(undeleted.deletedDate).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce3e72ec-b4df-4725-be09-1ce41a2e15ba&quot;,&quot;parentUUID&quot;:&quot;5789e6f8-0509-463b-a282-532fd0709842&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;deletes a batch of requests&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests deletes a batch of requests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:151,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst instanceGuids = sampleInstances.map((i) =&gt; {\n  return i.instanceGuid;\n})\nlet deleted = await instanceController.deleteInstances(instanceGuids);\n//expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\nexpect(deleted.length).to.equal(sampleInstances.length);\n//expect(deleted[0].instanceGuid).to.equal(sampleInstances[0].instanceGuid);\nexpect(deleted[0].deletedDate).not.to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4f88774-6905-443c-ba95-fef0b9ac03d5&quot;,&quot;parentUUID&quot;:&quot;5789e6f8-0509-463b-a282-532fd0709842&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;restores a batch of requests&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests restores a batch of requests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:184,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst instanceGuids = sampleInstances.map((i) =&gt; {\n  return i.instanceGuid;\n})\nlet deleted = await instanceController.restoreInstances(instanceGuids);\n//expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\nexpect(deleted.length).to.equal(sampleInstances.length);\nexpect(deleted[0].instanceGuid).to.equal(sampleInstances[0].instanceGuid);\nexpect(deleted[0].deletedDate).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac48c82a-6ba9-4307-8e9a-63e0173772a0&quot;,&quot;parentUUID&quot;:&quot;5789e6f8-0509-463b-a282-532fd0709842&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;restores all&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests restores all&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1926,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nlet restored = await instanceController.restoreAllInstances();\n//expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\nexpect(restored.length).to.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb27cfed-7a04-4c30-8145-d72982435729&quot;,&quot;parentUUID&quot;:&quot;5789e6f8-0509-463b-a282-532fd0709842&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a57a5e61-a741-4d77-8f03-6a79a24552e9&quot;,&quot;ce3e72ec-b4df-4725-be09-1ce41a2e15ba&quot;,&quot;e4f88774-6905-443c-ba95-fef0b9ac03d5&quot;,&quot;ac48c82a-6ba9-4307-8e9a-63e0173772a0&quot;,&quot;cb27cfed-7a04-4c30-8145-d72982435729&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2351,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;94d3bdf3-98bc-4e14-996e-36df7aea5466&quot;,&quot;title&quot;:&quot;insert tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;inserts an instance data&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests insert tests inserts an instance data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceDataRow = {\n  itaskRecipientGuid: &#x27;8ad1a6f2-9f6f-4667-9750-d961044ed817&#x27;,\n  itaskGuid: &#x27;5bde578f-615f-4494-86b2-ca61044ed883&#x27;,\n  taskGuid: &#x27;6386f905-7fac-41c6-9b6b-86d53f14d61c&#x27;,\n  objectGuid: null,\n  objectType: null,\n  objectId: null,\n  dataProperty: &#x27;1491430190541&#x27;,\n  dataType: &#x27;String&#x27;,\n  dataSid: &#x27;14777392-ac81-44f0-b1f2-87d53f14d65d&#x27;,\n  dataId: null,\n  dataClientId: &#x27;1491430190541&#x27;,\n  dataLabel: &#x27;Enter Details:&#x27;,\n  dataValue: &#x27;Need a background check&#x27;,\n  META_1: &#x27;TEST_INSERT_INSTANCE_DATA&#x27;,\n  META_2: null,\n  dataHide: null,\n  instanceContactGuid: null,\n  roleGuid: null,\n  dataValueExt: null,\n  questionType: &#x27;LongText&#x27;,\n  deletedDate: new Date().toISOString() // so that it doesnt interfere with its instance\n}\nconst instanceController = new InstanceController(session)\nlet instanceDataGuid = await instanceController.insertInstanceData(instanceDataRow)\nexpect(instanceDataGuid).to.be.a.uuid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a73f6c1-3f9c-4178-a6db-1dbf3a10a59f&quot;,&quot;parentUUID&quot;:&quot;94d3bdf3-98bc-4e14-996e-36df7aea5466&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6a73f6c1-3f9c-4178-a6db-1dbf3a10a59f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;d44e6187-962f-4988-ac87-1f0c2007b85a&quot;,&quot;title&quot;:&quot;update tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates an instance task recipient task state&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests update tests updates an instance task recipient task state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session)\nconst recipTaskSid = &#x27;b3fef53a-7742-46d1-9faf-be573c14d6fa&#x27;\nlet taskState = &#x27;Cancelled&#x27;\nlet updated = await instanceController.setInstanceRecipientTaskState(recipTaskSid, taskState)\nexpect(updated.taskState).to.equal(taskState)\n// change it back to Completed\ntaskState = &#x27;Completed&#x27;\nupdated = await instanceController.setInstanceRecipientTaskState(recipTaskSid, taskState)\nexpect(updated.taskState).to.equal(taskState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a148779b-3474-49c9-b083-ed97bb7f3976&quot;,&quot;parentUUID&quot;:&quot;d44e6187-962f-4988-ac87-1f0c2007b85a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a148779b-3474-49c9-b083-ed97bb7f3976&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:31,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;68831949-3779-488e-a955-c8a470d69414&quot;,&quot;title&quot;:&quot;Instance API Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-instance/test/db/instanceModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3ab05f2e-8d8d-4149-be5a-c447eab7b57f&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-instance/test/db/instanceModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceModel.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Instance API Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3efc8409-ce76-4781-a6e2-83dd423d008a&quot;,&quot;parentUUID&quot;:&quot;3ab05f2e-8d8d-4149-be5a-c447eab7b57f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Instance API Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceModel = await sqldb.models.bindModel(config.tenantOne.tenantId, instanceModels.Instance)\n          \n          let results = await instanceModel.query()\n          //console.log(results)\n          expect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8513ec14-f0d9-4449-a145-c6b1cb00c47a&quot;,&quot;parentUUID&quot;:&quot;3ab05f2e-8d8d-4149-be5a-c447eab7b57f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a hash of bound models&quot;,&quot;fullTitle&quot;:&quot;Instance API Model Tests tests should return a hash of bound models&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceModel = (await models.getModels(config.tenantOne.tenantId)).Instance;\n          \n          let results = await instanceModel.query()\n          //console.log(results)\n          expect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c036a9dd-e3ef-455e-8e04-494c3eff5394&quot;,&quot;parentUUID&quot;:&quot;3ab05f2e-8d8d-4149-be5a-c447eab7b57f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should bound models should be cached in memory&quot;,&quot;fullTitle&quot;:&quot;Instance API Model Tests tests should bound models should be cached in memory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(models._tenantModels[config.tenantOne.tenantId]).to.exist\n          let results = await models._tenantModels[config.tenantOne.tenantId].Instance.query()\n          //console.log(results)\n          expect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;35ff8cb0-f924-4a2a-a1f3-7a2163b3bb37&quot;,&quot;parentUUID&quot;:&quot;3ab05f2e-8d8d-4149-be5a-c447eab7b57f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8513ec14-f0d9-4449-a145-c6b1cb00c47a&quot;,&quot;c036a9dd-e3ef-455e-8e04-494c3eff5394&quot;,&quot;35ff8cb0-f924-4a2a-a1f3-7a2163b3bb37&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:32,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;0d6df12e-3515-405b-bc5c-a87b1ba123ec&quot;,&quot;title&quot;:&quot;Task API Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-instance/test/db/myTaskController.test.js&quot;,&quot;file&quot;:&quot;/test/db/myTaskController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()};\ntenantId = config.tenantOne.tenantId;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16ebe4ab-0370-4cd1-82ce-aea280cf04c3&quot;,&quot;parentUUID&quot;:&quot;0d6df12e-3515-405b-bc5c-a87b1ba123ec&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ac9506ec-00a9-434d-9412-3884c2e86245&quot;,&quot;title&quot;:&quot;list tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-instance/test/db/myTaskController.test.js&quot;,&quot;file&quot;:&quot;/test/db/myTaskController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set a sample task&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should set a sample task&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:202,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Task = await models.getModel(config.tenantOne.tenantId, &#x27;InstanceRecipientTask&#x27;);\nconst tasks = await Task.query()\n  .withGraphFetched(&#x27;[instanceTaskBase, taskType, instance]&#x27;)\n  .where(&#x27;recipientGuid&#x27;, session.user_sid)\n  .orderBy(&#x27;instanceRecipientTask.createdDate&#x27;, &#x27;desc&#x27;);\nexpect(tasks.length).to.be.gt(0);\nsampleTaskGuid = tasks[0].itaskRecipientGuid;\nsampleTask = tasks[0];\nsampleTask.taskName = sampleTask.instanceTaskBase.taskName;\nsampleTask.taskTypeName = sampleTask.taskType.taskTypeName;\nsampleTask.instanceId = sampleTask.instance.instanceId;\nsampleTask.instanceName = sampleTask.instance.instanceName;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56020202-b044-4a61-8d7c-0d917a5239ec&quot;,&quot;parentUUID&quot;:&quot;ac9506ec-00a9-434d-9412-3884c2e86245&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks columns&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks columns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:136,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst result = await taskController.getMyTasks();\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\nconst firstTask = result.results[0];\nexpect(firstTask.itaskRecipientId).to.be.ok;\nexpect(firstTask.itaskRecipientGuid).to.be.ok;\nexpect(firstTask.taskName).to.be.ok;\nexpect(firstTask.taskTypeName).to.be.ok;\nexpect(firstTask.createdDate).to.be.ok;\nexpect(firstTask.dueDate).not.to.be.undefined;\nexpect(firstTask.priority).not.to.be.undefined;\nexpect(firstTask.instanceName).to.be.ok;\nexpect(firstTask.instanceId).to.be.ok;\nexpect(firstTask.lastMilestone).to.be.ok;\nexpect(result.total).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;048a78c8-7fdb-4572-97d8-fbf37cca8e52&quot;,&quot;parentUUID&quot;:&quot;ac9506ec-00a9-434d-9412-3884c2e86245&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my open tasks only&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my open tasks only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:61,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskState&#x27;, &#x27;eq&#x27;, &#x27;Open&#x27;, 50, &#x27;asc&#x27;);\nconst result = await taskController.getMyTasks(options);\nresult.results.forEach(task =&gt; {\n  expect(task.taskState === &#x27;Initialized&#x27; || task.taskState === &#x27;Started&#x27;).to.equal(true);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46892668-cc03-4774-b0cb-825f7dfca83d&quot;,&quot;parentUUID&quot;:&quot;ac9506ec-00a9-434d-9412-3884c2e86245&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my completed tasks only&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my completed tasks only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:115,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskState&#x27;, &#x27;eq&#x27;, &#x27;Completed&#x27;, 50, &#x27;asc&#x27;);\nconst result = await taskController.getMyTasks(options);\nresult.results.forEach(task =&gt; {\n  expect(task.taskState).to.equal(&#x27;Completed&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d9b99af-3ef2-45b6-971e-fa73c6b073d5&quot;,&quot;parentUUID&quot;:&quot;ac9506ec-00a9-434d-9412-3884c2e86245&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: taskName&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: taskName&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:107,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskName&#x27;, &#x27;contains&#x27;, sampleTask.taskName);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db337c31-9149-4704-b07a-716e0fc20860&quot;,&quot;parentUUID&quot;:&quot;ac9506ec-00a9-434d-9412-3884c2e86245&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: taskType&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: taskType&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:59,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskType&#x27;, &#x27;contains&#x27;, sampleTask.taskTypeName);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;854bfe52-0698-4820-8eeb-7a8676cb36ad&quot;,&quot;parentUUID&quot;:&quot;ac9506ec-00a9-434d-9412-3884c2e86245&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: description (instanceName)&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: description (instanceName)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:110,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;instanceName&#x27;, &#x27;contains&#x27;, sampleTask.instanceName);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3bd20d7b-9582-47c6-aba2-c2753f490b46&quot;,&quot;parentUUID&quot;:&quot;ac9506ec-00a9-434d-9412-3884c2e86245&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: requestId (instanceId)&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: requestId (instanceId)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:54,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;instanceId&#x27;, &#x27;contains&#x27;, sampleTask.instanceId);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fff14c2e-ebe1-4621-9532-697eb987cf1e&quot;,&quot;parentUUID&quot;:&quot;ac9506ec-00a9-434d-9412-3884c2e86245&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: requester&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: requester&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:71,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;requester&#x27;, &#x27;contains&#x27;, &#x27;system system&#x27;);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed88c18c-9c8a-433e-bd77-c0a63d6dac6a&quot;,&quot;parentUUID&quot;:&quot;ac9506ec-00a9-434d-9412-3884c2e86245&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my task by searching&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my task by searching&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:349,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {search: sampleTask.taskName};\nlet result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);\noptions = {search: sampleTask.taskTypeName};\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);\noptions = {search: sampleTask.instanceName};\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);\noptions = {search: sampleTask.instanceId};\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08a80274-8ab3-4db3-ab77-41fda1724cd1&quot;,&quot;parentUUID&quot;:&quot;ac9506ec-00a9-434d-9412-3884c2e86245&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. params - start&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. params - start&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:126,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {\n  start: 0,\n  count: 2,\n  sort: &#x27;itaskRecipientId&#x27;,\n  dir: &#x27;asc&#x27;\n};\nlet result = await taskController.getMyTasks(options);\nconst startZeroId = result.results[0].itaskRecipientId;\noptions.start = 1;\nresult = await taskController.getMyTasks(options);\nconst startOneId = result.results[0].itaskRecipientId;\nexpect(startZeroId).to.be.lt(startOneId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a730eb99-1cf2-429b-9881-fe04873533c2&quot;,&quot;parentUUID&quot;:&quot;ac9506ec-00a9-434d-9412-3884c2e86245&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. params - sort, dir&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. params - sort, dir&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:107,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {count: 2, dir: &#x27;asc&#x27;};\nlet result = await taskController.getMyTasks(options);\nexpect(result.results[0].createdDate).to.be.lt(result.results[1].createdDate);\noptions.dir = &#x27;desc&#x27;;\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].createdDate).to.be.gt(result.results[1].createdDate);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8694b31c-686a-4a64-bbd7-1fa01849e8af&quot;,&quot;parentUUID&quot;:&quot;ac9506ec-00a9-434d-9412-3884c2e86245&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. params - count&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. params - count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:60,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {count: 2};\nlet result = await taskController.getMyTasks(options);\nexpect(result.results).to.exist;\nexpect(result.results.length).to.eq(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb5ce57e-8c20-4ce5-ab10-727edf75b4b7&quot;,&quot;parentUUID&quot;:&quot;ac9506ec-00a9-434d-9412-3884c2e86245&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;56020202-b044-4a61-8d7c-0d917a5239ec&quot;,&quot;048a78c8-7fdb-4572-97d8-fbf37cca8e52&quot;,&quot;46892668-cc03-4774-b0cb-825f7dfca83d&quot;,&quot;2d9b99af-3ef2-45b6-971e-fa73c6b073d5&quot;,&quot;db337c31-9149-4704-b07a-716e0fc20860&quot;,&quot;854bfe52-0698-4820-8eeb-7a8676cb36ad&quot;,&quot;3bd20d7b-9582-47c6-aba2-c2753f490b46&quot;,&quot;fff14c2e-ebe1-4621-9532-697eb987cf1e&quot;,&quot;ed88c18c-9c8a-433e-bd77-c0a63d6dac6a&quot;,&quot;08a80274-8ab3-4db3-ab77-41fda1724cd1&quot;,&quot;a730eb99-1cf2-429b-9881-fe04873533c2&quot;,&quot;8694b31c-686a-4a64-bbd7-1fa01849e8af&quot;,&quot;cb5ce57e-8c20-4ce5-ab10-727edf75b4b7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1557,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;04bc4932-39b7-49a9-90ac-cab7258f8d27&quot;,&quot;title&quot;:&quot;My Task API Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-instance/test/db/myTaskModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/myTaskModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;940d7a8e-9920-46a5-99c0-4ca96363ca4c&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-instance/test/db/myTaskModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/myTaskModel.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;My Task API Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73768e97-276d-4e16-9ca1-1f1c9f5c53ff&quot;,&quot;parentUUID&quot;:&quot;940d7a8e-9920-46a5-99c0-4ca96363ca4c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;My Task API Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskModel = await sqldb.models.bindModel(config.tenantOne.tenantId, taskModels.InstanceRecipientTask);\nconst results = await taskModel.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16f8c552-c322-415a-bf2e-f7dcd0144e43&quot;,&quot;parentUUID&quot;:&quot;940d7a8e-9920-46a5-99c0-4ca96363ca4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a hash of bound models&quot;,&quot;fullTitle&quot;:&quot;My Task API Model Tests tests should return a hash of bound models&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskModel = (await models.getModels(config.tenantOne.tenantId)).InstanceRecipientTask;\nconst results = await taskModel.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e04dc622-811c-454e-97f2-930c9bbc3d49&quot;,&quot;parentUUID&quot;:&quot;940d7a8e-9920-46a5-99c0-4ca96363ca4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should bound models cached in memory&quot;,&quot;fullTitle&quot;:&quot;My Task API Model Tests tests should bound models cached in memory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(models._tenantModels[config.tenantOne.tenantId]).to.exist;\nconst results = await models._tenantModels[config.tenantOne.tenantId].InstanceRecipientTask.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed4cc635-0e2b-42f2-91c7-738c0735d563&quot;,&quot;parentUUID&quot;:&quot;940d7a8e-9920-46a5-99c0-4ca96363ca4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;16f8c552-c322-415a-bf2e-f7dcd0144e43&quot;,&quot;e04dc622-811c-454e-97f2-930c9bbc3d49&quot;,&quot;ed4cc635-0e2b-42f2-91c7-738c0735d563&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:33,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;a5aea8f3-b540-44a9-91b7-c82ea4ee178c&quot;,&quot;title&quot;:&quot;Instance API Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-instance/test/integration/instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/instance.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\njwt = await testLib.getAuthToken()\nthis.timeout(105000); \nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()} //system level&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f3c38910-8a40-4c51-8c21-dc6918a9da62&quot;,&quot;parentUUID&quot;:&quot;a5aea8f3-b540-44a9-91b7-c82ea4ee178c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7fe35081-384d-45e8-8f89-6e39faa1f80f&quot;,&quot;title&quot;:&quot;getInstancesByPermission&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-instance/test/integration/instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/instance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of instances for a user with monitor permissions&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a list of instances for a user with monitor permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;monitor\&quot;;\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();\n            sampleInstance = result.results[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd688aa9-b8f5-4297-a136-4a894bcc1d0d&quot;,&quot;parentUUID&quot;:&quot;7fe35081-384d-45e8-8f89-6e39faa1f80f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a list of instances for a user with manage permissions&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a list of instances for a user with manage permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;monitor\&quot;;\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();\n            sampleInstance = result.results[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f27cae8-f868-4dd9-8528-04ae3f099c48&quot;,&quot;parentUUID&quot;:&quot;7fe35081-384d-45e8-8f89-6e39faa1f80f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a list of instances started by the user calling the endpoint&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a list of instances started by the user calling the endpoint&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;mine\&quot;;\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();\n            sampleInstance = result.results[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;046ddbe9-f51f-4109-ba3a-f8ae52da5f64&quot;,&quot;parentUUID&quot;:&quot;7fe35081-384d-45e8-8f89-6e39faa1f80f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a \&quot;monitor\&quot; list of instances filtered&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a \&quot;monitor\&quot; list of instances filtered&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:68,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;monitor\&quot;;\n            req.query.filters = [\n                \n                {\&quot;field\&quot;:\&quot;instanceName\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.instanceName}},\n                {\&quot;field\&quot;:\&quot;instanceId\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;gteq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:1}},\n                {\&quot;field\&quot;:\&quot;instanceId\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;lteq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:1000000}},\n                {\&quot;field\&quot;:\&quot;processName\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.processName}},\n                {\&quot;field\&quot;:\&quot;instanceState\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.instanceState}},\n                {\&quot;field\&quot;:\&quot;lastMilestone\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.lastMilestone}},\n                {\&quot;field\&quot;:\&quot;requesterGuid\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.requesterGuid}},\n                {\&quot;field\&quot;:\&quot;requester\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.requester}},\n                {\&quot;field\&quot;:\&quot;startDate\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;gteq\&quot;,\&quot;type\&quot;:\&quot;date\&quot;,\&quot;value\&quot;:&#x27;2010-01-01&#x27;}},\n                {\&quot;field\&quot;:\&quot;startDate\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;lteq\&quot;,\&quot;type\&quot;:\&quot;date\&quot;,\&quot;value\&quot;:&#x27;2030-01-01&#x27;}}\n            ]\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c3685c9-1703-494a-adac-a32c61a5cb49&quot;,&quot;parentUUID&quot;:&quot;7fe35081-384d-45e8-8f89-6e39faa1f80f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a \&quot;mine\&quot; list of instances filtered&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a \&quot;mine\&quot; list of instances filtered&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:69,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;mine\&quot;;\n            req.query.filters = [\n                \n                {\&quot;field\&quot;:\&quot;instanceName\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.instanceName}},\n                {\&quot;field\&quot;:\&quot;instanceId\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;gteq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:1}},\n                {\&quot;field\&quot;:\&quot;instanceId\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;lteq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:1000000}},\n                {\&quot;field\&quot;:\&quot;processName\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.processName}},\n                {\&quot;field\&quot;:\&quot;instanceState\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.instanceState}},\n                {\&quot;field\&quot;:\&quot;lastMilestone\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.lastMilestone}},\n                {\&quot;field\&quot;:\&quot;requesterGuid\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.requesterGuid}},\n                {\&quot;field\&quot;:\&quot;requester\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.requester}}\n            ]\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e687e44-d083-41f7-9488-5a18a6d8a820&quot;,&quot;parentUUID&quot;:&quot;7fe35081-384d-45e8-8f89-6e39faa1f80f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dd688aa9-b8f5-4297-a136-4a894bcc1d0d&quot;,&quot;3f27cae8-f868-4dd9-8528-04ae3f099c48&quot;,&quot;046ddbe9-f51f-4109-ba3a-f8ae52da5f64&quot;,&quot;9c3685c9-1703-494a-adac-a32c61a5cb49&quot;,&quot;8e687e44-d083-41f7-9488-5a18a6d8a820&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:159,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;ea353624-25cf-43d6-8387-9144246bb4b0&quot;,&quot;title&quot;:&quot;deleteInstances&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-instance/test/integration/instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/instance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a batch of instances&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests deleteInstances should delete a batch of instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:423,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\n            let result = await instanceController.getMyRequests()\n            let instanceGuids= result.results.map((i) =&gt; {\n                return i.instanceGuid;\n            })\n\t\t\tconst mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.body = JSON.stringify(instanceGuids);\n           \n\t\t\tawait handlers.deleteInstances(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n            expect(mockRes.body).to.exist;\n\t\t\tlet deleted = mockRes.body;\n            expect(deleted.instancesDeleted).to.exist;\n            expect(deleted.instancesDeleted).to.equal(instanceGuids.length);\n            \n            //retore them\n            \n            let restored = await instanceController.restoreInstances(instanceGuids);\n            //expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\n            expect(restored.length).to.equal(instanceGuids.length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b16a1d6d-ca68-437f-a177-cfdd4b6725f0&quot;,&quot;parentUUID&quot;:&quot;ea353624-25cf-43d6-8387-9144246bb4b0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b16a1d6d-ca68-437f-a177-cfdd4b6725f0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:423,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;a277646a-902e-45d7-860f-e8f534798907&quot;,&quot;title&quot;:&quot;MyTask API Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-instance/test/integration/myTask.test.js&quot;,&quot;file&quot;:&quot;/test/integration/myTask.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;MyTask API Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\njwt = await testLib.getAuthToken();\nthis.timeout(10500);\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b119582-8274-4394-883f-ede5c4cf47e6&quot;,&quot;parentUUID&quot;:&quot;a277646a-902e-45d7-860f-e8f534798907&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of my tasks&quot;,&quot;fullTitle&quot;:&quot;MyTask API Tests should return a list of my tasks&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:116,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req(jwt);\nawait handlers.getMyTasks(req, mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;\nconst result = mockRes.body;\nexpect(result.total).to.exist;\nexpect(result.total).to.be.gt(0);\nexpect(result.results).to.be.array();\nexpect(result.results.length).to.be.gt(0);\nsampleTask = result.results[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41e76a7b-cd48-42d8-8489-a63fcf2f9c6d&quot;,&quot;parentUUID&quot;:&quot;a277646a-902e-45d7-860f-e8f534798907&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;41e76a7b-cd48-42d8-8489-a63fcf2f9c6d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:116,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;050afbcc-f7b9-49ba-b73a-58021f74cd74&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9f9147b3-33b4-4a48-974c-82c06cf32b9b&quot;,&quot;title&quot;:&quot;Permission/User Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-permissions/test/integration/user.test.js&quot;,&quot;file&quot;:&quot;/test/integration/user.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Permission/User Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nconst user  = config.tenantOne.adminUser;\nconst session = {tenant: config.tenantOne.tenantId, user_sid: user.sid.toLowerCase()}\nthis.timeout(105000); \nlet deletes = await redis.delAsync([`{$session.tenant}.permissions.${session.user_sid}.`]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2bfb829-be93-4d05-8fa6-7c42e63e979b&quot;,&quot;parentUUID&quot;:&quot;9f9147b3-33b4-4a48-974c-82c06cf32b9b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Permission/User Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc634a87-1154-4ca6-b344-9c2a5b186fd4&quot;,&quot;parentUUID&quot;:&quot;9f9147b3-33b4-4a48-974c-82c06cf32b9b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;60f992d6-ac7a-4d9c-80ac-71f9786be912&quot;,&quot;title&quot;:&quot;isSysAdminHandler&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-permissions/test/integration/user.test.js&quot;,&quot;file&quot;:&quot;/test/integration/user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return {isSysAdmin: true} for an admin user&quot;,&quot;fullTitle&quot;:&quot;Permission/User Tests isSysAdminHandler should return {isSysAdmin: true} for an admin user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n        let req = await mocks.req();\n        let isSysAdmin  = await userFunctions.isSysAdminHandler(req, mockRes);\n        expect(mockRes.statusCode).equal(200);\n        expect(mockRes.body).to.exist;\n        const info = mockRes.body;\n        expect(info.isSysAdmin).to.be.true&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb20cc4e-60ba-4f40-b614-21122c83c503&quot;,&quot;parentUUID&quot;:&quot;60f992d6-ac7a-4d9c-80ac-71f9786be912&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cb20cc4e-60ba-4f40-b614-21122c83c503&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a8ae4c46-370c-4eb3-a4f0-280510177971&quot;,&quot;title&quot;:&quot;Permission/Workflow Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-permissions/test/integration/workflow.test.js&quot;,&quot;file&quot;:&quot;/test/integration/workflow.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Permission/Workflow Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig()\nuser  = config.tenantOne.adminUser;\nsession = {tenant: config.tenantOne.tenantId, user_sid: user.sid.toLowerCase()}\nthis.timeout(105000);\nlet deletes = await redis.delAsync([`{$session.tenant}.${session.user_name}.permissions`]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3d91564-7760-48c9-828d-db21c101b411&quot;,&quot;parentUUID&quot;:&quot;a8ae4c46-370c-4eb3-a4f0-280510177971&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Permission/Workflow Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1eb1aa73-4ddc-40f1-b3e9-ecc32a0485c6&quot;,&quot;parentUUID&quot;:&quot;a8ae4c46-370c-4eb3-a4f0-280510177971&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bd53007f-ad28-425a-b7c4-479047b27737&quot;,&quot;title&quot;:&quot;currentUserPermissionssHandler&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-permissions/test/integration/workflow.test.js&quot;,&quot;file&quot;:&quot;/test/integration/workflow.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should cache and return permissions&quot;,&quot;fullTitle&quot;:&quot;Permission/Workflow Tests currentUserPermissionssHandler should cache and return permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n        let req = await mocks.req();\n        let isSysAdmin  = await workflow.currentUserPermissionsHandler(req, mockRes);\n        expect(mockRes.statusCode).equal(200);\n        expect(mockRes.body).to.exist;\n        const info = mockRes.body;\n        expect(info.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f645620-64d2-46c2-9269-5d2beff6e818&quot;,&quot;parentUUID&quot;:&quot;bd53007f-ad28-425a-b7c4-479047b27737&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3f645620-64d2-46c2-9269-5d2beff6e818&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a52fa13d-8d67-444d-a81c-20e2a2960085&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e017fa07-94d7-4de2-9441-6343eacbd7d9&quot;,&quot;title&quot;:&quot;Settings API Holiday Controller tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-settings/test/integration/db/holidays.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/holidays.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Settings API Holiday Controller tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nsession = {tenantId: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()}\ntenantId = config.tenantOne.tenantId;\noauth = {\n  instance_name: config.tenantOne.tenantId,\n  user_sid: config.tenantOne.adminUser.sid\n}\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15cebc6f-442b-4c45-8a22-ead009f23367&quot;,&quot;parentUUID&quot;:&quot;e017fa07-94d7-4de2-9441-6343eacbd7d9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should insert, select, delete and list holidays&quot;,&quot;fullTitle&quot;:&quot;Settings API Holiday Controller tests should insert, select, delete and list holidays&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:213,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let holiday = {\n  holidayName: \&quot;O Day\&quot;,\n  startDate: \&quot;2019-10-10T00:00:00.000Z\&quot;,\n  endDate: \&quot;2019-10-11T00:00:00.000Z\&quot;,\n  country: \&quot;USA\&quot;\n};\nlet holidayController = new HolidayController(oauth);\n// insert\nconst inserted = await holidayController.insertHoliday(holiday);\nvalidateHoliday(holiday, inserted);\n// select\nlet gotOne = await holidayController.getHoliday(inserted.holidayGuid);\nvalidateHoliday(holiday, gotOne);\n// update\nholiday.holidayGuid = inserted.holidayGuid;\nholiday.holidayName = \&quot;Easter Monday\&quot;;\nholiday.country = \&quot;Papa New Guinea\&quot;;\nawait holidayController.updateHoliday(holiday);\ngotOne = await holidayController.getHoliday(inserted.holidayGuid);\nvalidateHoliday(holiday, gotOne);\n//list\nconst holidays = await holidayController.listHolidays();\nexpect(holidays.length).to.be.gt(0);\nholiday = holidays[0];\nexpect(holiday.holidayGuid).to.exist;\nexpect(holiday.holidayName).to.exist;\nexpect(holiday.startDate).to.exist;\nexpect(holiday.endDate).to.exist;\nexpect(holiday.country).to.exist;\n// delete\nconst holidayGuids = [inserted.holidayGuid];\nawait holidayController.deleteHolidays(holidayGuids);\ngotOne = await holidayController.getHoliday(inserted.holidayGuid);\nexpect(gotOne).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5530cbb-7659-4eed-a08f-c22c9409eb72&quot;,&quot;parentUUID&quot;:&quot;e017fa07-94d7-4de2-9441-6343eacbd7d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d5530cbb-7659-4eed-a08f-c22c9409eb72&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:213,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e1e62e42-1224-4488-a21f-d8126f88014c&quot;,&quot;title&quot;:&quot;Settings API Language Controller test&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-settings/test/integration/db/languages.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/languages.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Settings API Language Controller test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\noauth = {\n  instance_name: config.tenantOne.tenantId,\n  user_sid: config.tenantOne.adminUser.sid\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c4519ab4-7592-4389-8632-38da58693b50&quot;,&quot;parentUUID&quot;:&quot;e1e62e42-1224-4488-a21f-d8126f88014c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a list of languages&quot;,&quot;fullTitle&quot;:&quot;Settings API Language Controller test should get a list of languages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const languageCtrl = new LanguageController(oauth);\nconst languages = await languageCtrl.listLanguages();\nexpect(languages.length).to.be.gt(0);\nconst language = languages[0];\nexpect(language.languageGuid).to.exist;\nexpect(language.languageName).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e54c2f71-d8ad-4782-a2fb-89aa184907b7&quot;,&quot;parentUUID&quot;:&quot;e1e62e42-1224-4488-a21f-d8126f88014c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e54c2f71-d8ad-4782-a2fb-89aa184907b7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3e7cab00-cfdb-46de-b1b8-dfeb1b7890eb&quot;,&quot;title&quot;:&quot;Settings API System Setting Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-settings/test/integration/db/systemsetting.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/systemsetting.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()} \nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3339dead-3420-4728-a6c5-c60aadf379b1&quot;,&quot;parentUUID&quot;:&quot;3e7cab00-cfdb-46de-b1b8-dfeb1b7890eb&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;370c1f43-a1e4-47b5-932f-3963eb4d06e7&quot;,&quot;title&quot;:&quot;Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-settings/test/integration/db/systemsetting.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/systemsetting.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a system setting model&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Model Tests should get a system setting model&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const SystemSettingsModel = await model.getConsumerModel(\n  config.ConsumersConn1,\n  \&quot;SystemSettings\&quot;\n);\nexpect(SystemSettingsModel).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7ab228e-28b1-424c-844f-0fc4c62162b2&quot;,&quot;parentUUID&quot;:&quot;370c1f43-a1e4-47b5-932f-3963eb4d06e7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return system settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Model Tests should return system settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const SystemSettingsModel = await model.getConsumerModel(\n  config.ConsumersConn1,\n  \&quot;SystemSettings\&quot;\n);\nlet results = await SystemSettingsModel.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;35be9e16-7f6c-4014-aef9-fae4a5dc14ad&quot;,&quot;parentUUID&quot;:&quot;370c1f43-a1e4-47b5-932f-3963eb4d06e7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f7ab228e-28b1-424c-844f-0fc4c62162b2&quot;,&quot;35be9e16-7f6c-4014-aef9-fae4a5dc14ad&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d109bf84-bc6b-4dee-a084-b6e883929003&quot;,&quot;title&quot;:&quot;Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-settings/test/integration/db/systemsetting.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/systemsetting.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list system settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Controller Tests should list system settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:37,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let systemSettingController = new SystemSettingController(session);\nlet systemSettings = await systemSettingController.listSystemSettings();\nexpect(systemSettings).to.exist;\nexpect(systemSettings.length).to.be.gt(0);\nexpect(systemSettings[0].masterSettings.settingsGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5671fa06-a0d1-414c-8501-b09c9e4b1afb&quot;,&quot;parentUUID&quot;:&quot;d109bf84-bc6b-4dee-a084-b6e883929003&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list password settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Controller Tests should list password settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let systemSettingController = new SystemSettingController(session);\nlet systemSettings = await systemSettingController.listPasswordSettings();\nexpect(systemSettings).to.exist;\nexpect(systemSettings.length).to.be.gt(0);\n// only system settings listed should be the ones related to passwords   \nexpect(systemSettings.filter(x =&gt; x.settingsKey.startsWith(&#x27;PWD&#x27;)).length).to.equal(systemSettings.length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a288a6b6-cc34-4411-8176-15764e2cdb9c&quot;,&quot;parentUUID&quot;:&quot;d109bf84-bc6b-4dee-a084-b6e883929003&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update system settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Controller Tests should update system settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:150,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let pwdSettings = [{\n  \&quot;settingsGuid\&quot;:\&quot;6F170960-C5BC-4A12-B170-1CCEDCAC3DF2\&quot;,\n  \&quot;dataInstanceGuid\&quot;:\&quot;2CA0CE58-B55B-4DA7-ACE1-5FC37E3D32D5\&quot;,\n  \&quot;settingsKey\&quot;:\&quot;PWD_EXPIRATION\&quot;,\n  \&quot;settingsValue\&quot;:\&quot;14\&quot;, // changed\n  \&quot;createdBy\&quot;:\&quot;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF\&quot;,\n  \&quot;createdDate\&quot;:\&quot;2020-01-28T03:38:03.200Z\&quot;,\n  \&quot;modifiedBy\&quot;:null,\n  \&quot;modifiedDate\&quot;:null,\n  \&quot;masterSettings\&quot;:{\n    \&quot;settingsGuid\&quot;:\&quot;6F170960-C5BC-4A12-B170-1CCEDCAC3DF2\&quot;,\n    \&quot;settingsKey\&quot;:\&quot;PWD_EXPIRATION\&quot;,\n    \&quot;keyDefault\&quot;:\&quot;7\&quot;,\n    \&quot;keyOptions\&quot;:null,\n    \&quot;description\&quot;:\&quot;Length in days before a user is prompted to change his or her password.\&quot;\n  }\n}, {\n  \&quot;settingsGuid\&quot;:\&quot;B2476A3D-095F-424A-9C29-4AA95E93A09E\&quot;,\n  \&quot;dataInstanceGuid\&quot;:\&quot;2CA0CE58-B55B-4DA7-ACE1-5FC37E3D32D5\&quot;,\n  \&quot;settingsKey\&quot;:\&quot;PWD_EXPIRATION_ACTIVE\&quot;,\n  \&quot;settingsValue\&quot;:\&quot;1\&quot;, // changed\n  \&quot;createdBy\&quot;:\&quot;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF\&quot;,\n  \&quot;createdDate\&quot;:\&quot;2020-01-28T03:38:03.200Z\&quot;,\n  \&quot;modifiedBy\&quot;:null,\n  \&quot;modifiedDate\&quot;:null,\n  \&quot;masterSettings\&quot;:{\n    \&quot;settingsGuid\&quot;:\&quot;B2476A3D-095F-424A-9C29-4AA95E93A09E\&quot;,\n    \&quot;settingsKey\&quot;:\&quot;PWD_EXPIRATION_ACTIVE\&quot;,\n    \&quot;keyDefault\&quot;:\&quot;0\&quot;,\n    \&quot;keyOptions\&quot;:\&quot;1|0\&quot;,\n    \&quot;description\&quot;:\&quot;Flag to turn enforcement of password expiration.  1 = On, 0 = Off\&quot;\n  }\n}]\n// save the changes above, query to verify changes, set them back to the defaults\nlet systemSettingController = new SystemSettingController(session)\nawait systemSettingController.updateSystemSettings(pwdSettings)\nlet systemSettings = await systemSettingController.listPasswordSettings();\nexpect(systemSettings.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION&#x27;).settingsValue).to.equal(&#x27;14&#x27;)\nexpect(systemSettings.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION_ACTIVE&#x27;).settingsValue).to.equal(&#x27;1&#x27;)\npwdSettings.forEach(setting =&gt; {\n  setting.settingsValue = setting.masterSettings.keyDefault\n})\nawait systemSettingController.updateSystemSettings(pwdSettings)\nsystemSettings = await systemSettingController.listPasswordSettings();\nlet pwdExpiration = systemSettings.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION&#x27;)\nlet pwdExpirationActive = systemSettings.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION_ACTIVE&#x27;)\nexpect(pwdExpiration.settingsValue).to.equal(pwdExpiration.masterSettings.keyDefault)\nexpect(pwdExpirationActive.settingsValue).to.equal(pwdExpirationActive.masterSettings.keyDefault)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;007ed77a-f2b7-4f0d-be83-e813d217296a&quot;,&quot;parentUUID&quot;:&quot;d109bf84-bc6b-4dee-a084-b6e883929003&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5671fa06-a0d1-414c-8501-b09c9e4b1afb&quot;,&quot;a288a6b6-cc34-4411-8176-15764e2cdb9c&quot;,&quot;007ed77a-f2b7-4f0d-be83-e813d217296a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:205,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f927af2f-7fd4-40fe-a3fe-05c3c806adc1&quot;,&quot;title&quot;:&quot;Biztime API Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-settings/test/integration/functions/biztimes.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/biztimes.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Biztime API Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\njwt = await testLib.getAuthToken();\nthis.timeout(10500);\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()};\nmockRes = await mocks.mockResponse();\nreq = await mocks.req(jwt);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d9a43208-c675-4162-99f7-467e3843d13a&quot;,&quot;parentUUID&quot;:&quot;f927af2f-7fd4-40fe-a3fe-05c3c806adc1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of biztimes&quot;,&quot;fullTitle&quot;:&quot;Biztime API Tests should return a list of biztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await handlers.listBiztimes(req, mockRes);\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;\nexpect(mockRes.body.length).to.be.gt(0);\nvalidateBiztime(mockRes.body[0]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4374fcb5-b7f1-4cfc-b69c-f502792054e6&quot;,&quot;parentUUID&quot;:&quot;f927af2f-7fd4-40fe-a3fe-05c3c806adc1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert a biztime&quot;,&quot;fullTitle&quot;:&quot;Biztime API Tests should insert a biztime&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await handlers.insertBiztime(\n  {...req, body: {...biztimeToInsert}},\n  mockRes);\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;\ninsertedBiztime = mockRes.body;\nvalidateBiztime(biztimeToInsert, insertedBiztime);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9f126f3f-85a1-4a1d-87c1-4c2fabf88692&quot;,&quot;parentUUID&quot;:&quot;f927af2f-7fd4-40fe-a3fe-05c3c806adc1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a biztime&quot;,&quot;fullTitle&quot;:&quot;Biztime API Tests should update a biztime&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await handlers.updateBiztime(\n  {\n    ...req,\n    params: {bizTimeGuid: insertedBiztime.bizTimeGuid},\n    body: {...biztimeToUpdate}},\n  mockRes\n  );\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;\nvalidateBiztime(biztimeToUpdate, mockRes.body);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;138f86d2-2c62-465a-a9e1-cd6a0a87ecf0&quot;,&quot;parentUUID&quot;:&quot;f927af2f-7fd4-40fe-a3fe-05c3c806adc1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4374fcb5-b7f1-4cfc-b69c-f502792054e6&quot;,&quot;9f126f3f-85a1-4a1d-87c1-4c2fabf88692&quot;,&quot;138f86d2-2c62-465a-a9e1-cd6a0a87ecf0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:37,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ac5627d9-b4f6-49ed-a956-ff26aa6652d8&quot;,&quot;title&quot;:&quot;Settings API Holiday Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-settings/test/integration/functions/holidays.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/holidays.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;insert, list, get, delete holiday&quot;,&quot;fullTitle&quot;:&quot;Settings API Holiday Tests insert, list, get, delete holiday&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = mocks.mockResponse();\nlet listHolidaysEvent = await mocks.listHolidaysEvent()\nlet insertHolidayEvent = await mocks.insertHolidayEvent();\nlet getHolidayEvent = await mocks.getHolidayEvent();\n\n// insert\nawait holidays.insert(insertHolidayEvent, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst inserted = mockRes.body;\nvalidateHoliday(insertHolidayEvent.body, inserted);\n//list\nawait holidays.list(listHolidaysEvent, mockRes);\n\t\texpect(mockRes.statusCode).to.equal(200);\nexpect(mockRes.body.length).to.be.greaterThan(0);\nexpectDefinedHoliday(mockRes.body[0]);\n// get\ngetHolidayEvent.params.holidayGuid = inserted.holidayGuid;\nawait holidays.get(getHolidayEvent, mockRes);\n\t\texpect(mockRes.statusCode).to.equal(200);\nconst got = mockRes.body;\nvalidateHoliday(inserted, got);\n// delete\nlet deleteEvent = Object.assign({}, listHolidaysEvent);\ndeleteEvent.body = [inserted.holidayGuid];\nawait holidays.remove(deleteEvent, mockRes);\n\t\texpect(mockRes.statusCode).to.equal(200);\ngetHolidayEvent.params = {\n  holidayGuid: inserted.holidayGuid\n};\nawait holidays.get(getHolidayEvent, mockRes);\nexpect(mockRes.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97f1e11f-02de-43d4-a159-5b6007a5c445&quot;,&quot;parentUUID&quot;:&quot;ac5627d9-b4f6-49ed-a956-ff26aa6652d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;97f1e11f-02de-43d4-a159-5b6007a5c445&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:28,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b1e5fa5b-a638-4efb-af5d-56f7424b2c37&quot;,&quot;title&quot;:&quot;Settings API Languages Test&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-settings/test/integration/functions/languages.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/languages.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a list of holidays&quot;,&quot;fullTitle&quot;:&quot;Settings API Languages Test should get a list of holidays&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = mocks.mockResponse();\nconst listLanguagesEvent = await mocks.listLanguagesEvent();\nawait languages.list(listLanguagesEvent, mockRes);\nexpect(mockRes.statusCode).to.eq(200);\nexpect(mockRes.body.length).to.be.gt(0);\nconst language = mockRes.body[0];\nexpect(language.languageGuid).to.exist;\nexpect(language.languageName).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a02ec9ef-e6fb-4e3d-a777-0e0f7def2322&quot;,&quot;parentUUID&quot;:&quot;b1e5fa5b-a638-4efb-af5d-56f7424b2c37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a02ec9ef-e6fb-4e3d-a777-0e0f7def2322&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d60cd423-7ab4-474b-9646-4c82e15c4fc0&quot;,&quot;title&quot;:&quot;Settings API Password Settings Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-settings/test/integration/functions/passwordSettings.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/passwordSettings.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;lists the password settings&quot;,&quot;fullTitle&quot;:&quot;Settings API Password Settings Tests lists the password settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse();\nawait passwordSettings.list(mockReq, mockRes);\n\n\t\texpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body\nexpect(result.length).to.be.greaterThan(0);\n// only system settings listed should be the ones related to passwords\nexpect(result.filter(x =&gt; x.settingsKey.startsWith(&#x27;PWD&#x27;)).length).to.equal(result.length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a32019e8-4a8d-4a38-a7de-df9cc001ffc8&quot;,&quot;parentUUID&quot;:&quot;d60cd423-7ab4-474b-9646-4c82e15c4fc0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a32019e8-4a8d-4a38-a7de-df9cc001ffc8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c131e334-e355-413c-8a0e-f8818cfa4b70&quot;,&quot;title&quot;:&quot;Settings API System Config Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-settings/test/integration/functions/systemConfig.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/systemConfig.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;lists the system config settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Config Tests lists the system config settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse();\nawait systemConfig.list(mockReq, mockRes);\n\n\t\texpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body\nexpect(result.length).to.be.greaterThan(40);\nexpect(result[0].settingsGuid).to.exist\nexpect(result[0].settingsKey).to.exist\nexpect(result[0].settingsValue).to.exist\nexpect(result[0].masterSettings.description).to.exist\nexpect(result[0].masterSettings.keyDefault).to.exist\nexpect(result[0].masterSettings.keyOptions).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d63444c3-7cfc-4ca1-ac3a-c8f53c8f84e1&quot;,&quot;parentUUID&quot;:&quot;c131e334-e355-413c-8a0e-f8818cfa4b70&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;updates system config settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Config Tests updates system config settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:111,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse();\nmockReq.body = [{\n  settingsGuid: \&quot;2B18AE62-7C26-439C-84A7-371B4A51BE26\&quot;,\n  settingsKey: \&quot;AllowGetReqInfo\&quot;,\n  settingsValue: \&quot;true\&quot;\n}]\nawait systemConfig.update(mockReq, mockRes);\n\n\t\texpect(mockRes.statusCode).to.equal(200);\nlet result = mockRes.body\nexpect(result).to.equal(&#x27;1&#x27;);\n// verify that change was made\nawait systemConfig.list(mockReq, mockRes);\nresult = mockRes.body\nlet allowGetReqInfo = result.find( x =&gt; x.settingsKey == &#x27;AllowGetReqInfo&#x27;)\nexpect(allowGetReqInfo.settingsValue).to.equal(&#x27;true&#x27;)\n// revert the change\nmockReq.body = [{\n  settingsGuid: \&quot;2B18AE62-7C26-439C-84A7-371B4A51BE26\&quot;,\n  settingsKey: \&quot;AllowGetReqInfo\&quot;,\n  settingsValue: \&quot;false\&quot;\n}]\nawait systemConfig.update(mockReq, mockRes);\nawait systemConfig.list(mockReq, mockRes);\nresult = mockRes.body\nallowGetReqInfo = result.find( x =&gt; x.settingsKey == &#x27;AllowGetReqInfo&#x27;)\nexpect(allowGetReqInfo.settingsValue).to.equal(&#x27;false&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0f3a281-bc34-4ea9-95e1-44614e009da9&quot;,&quot;parentUUID&quot;:&quot;c131e334-e355-413c-8a0e-f8818cfa4b70&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d63444c3-7cfc-4ca1-ac3a-c8f53c8f84e1&quot;,&quot;d0f3a281-bc34-4ea9-95e1-44614e009da9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:131,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;37de30b3-4ae8-4a6d-bea2-0fbb43c32d0f&quot;,&quot;title&quot;:&quot;Settings API Utilities Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-settings/test/integration/functions/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8bb85147-c872-4cee-b63c-40d214b0372b&quot;,&quot;title&quot;:&quot;locales&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-settings/test/integration/functions/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;lists locales&quot;,&quot;fullTitle&quot;:&quot;Settings API Utilities Tests locales lists locales&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\nawait utils.listLocales(mocks.req(), mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;722c99f6-452a-4b93-89ef-4a08a3fd7a96&quot;,&quot;parentUUID&quot;:&quot;8bb85147-c872-4cee-b63c-40d214b0372b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;722c99f6-452a-4b93-89ef-4a08a3fd7a96&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f0eec169-cb07-48d7-a3d8-f7211ffe8727&quot;,&quot;title&quot;:&quot;timezones&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-settings/test/integration/functions/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list timezones&quot;,&quot;fullTitle&quot;:&quot;Settings API Utilities Tests timezones should list timezones&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nawait utils.listTimezones(mocks.req(), mockRes);\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba672131-be04-466e-802f-4ea427d8d2c5&quot;,&quot;parentUUID&quot;:&quot;f0eec169-cb07-48d7-a3d8-f7211ffe8727&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ba672131-be04-466e-802f-4ea427d8d2c5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ee0e2fa6-e1a4-40f2-8e68-9101557d3e93&quot;,&quot;title&quot;:&quot;running versions&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-settings/test/integration/functions/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list running versions&quot;,&quot;fullTitle&quot;:&quot;Settings API Utilities Tests running versions should list running versions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nawait utils.listRunningVersions(mocks.req(), mockRes);\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d678f04e-61de-4499-a578-6ad92f074ba6&quot;,&quot;parentUUID&quot;:&quot;ee0e2fa6-e1a4-40f2-8e68-9101557d3e93&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d678f04e-61de-4499-a578-6ad92f074ba6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c97da4a3-0d30-482c-b873-73c7018ffb30&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b6b77252-38ce-494a-ac2d-9df91ababaf7&quot;,&quot;title&quot;:&quot;Task Dispatcher API Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Task Dispatcher API Controller Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests \&quot;before all\&quot; hook in \&quot;Task Dispatcher API Controller Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f66ef95-9c3f-464e-a5f1-9c7876d06438&quot;,&quot;parentUUID&quot;:&quot;b6b77252-38ce-494a-ac2d-9df91ababaf7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7e75864f-af14-4d73-afcf-128165042fe0&quot;,&quot;title&quot;:&quot;ProcessTaskController&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get process tasks&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskController should get process tasks&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:176,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processTaskController = new controllers.ProcessTaskController(session);\nconst updateMyProfileProcessSid = &#x27;f864cfe2-98df-4724-8db1-de2cc538d4e0&#x27;\nlet processTasks = await processTaskController.getProcessTasks(updateMyProfileProcessSid)\nexpect(processTasks).to.exist;\nexpect(processTasks.length).to.be.gt(0);\nexpect(processTasks[0].processTaskGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f1e0ac7-bbfb-4854-bef3-3ac086d00066&quot;,&quot;parentUUID&quot;:&quot;7e75864f-af14-4d73-afcf-128165042fe0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0f1e0ac7-bbfb-4854-bef3-3ac086d00066&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:176,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c6e580c0-5270-4654-8a23-8aed0aca5481&quot;,&quot;title&quot;:&quot;ProcessTaskAttributeController&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list process task attributes&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskAttributeController should list process task attributes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:36,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processTaskAttributeController = new controllers.ProcessTaskAttributeController(session);\nconst profileFormProcessTaskSid = &#x27;c0473244-f04f-4916-8ac9-a73cc538d434&#x27;\nlet includeExt = false\nlet processTaskAttributes = await processTaskAttributeController.list(profileFormProcessTaskSid, includeExt)\nexpect(processTaskAttributes).to.exist;\nexpect(processTaskAttributes.length).to.be.gt(0);\nexpect(processTaskAttributes[6].processTaskAttributeGuid).to.exist;\nexpect(processTaskAttributes[6].extendedAtt).to.not.exist;\nincludeExt = true\nlet processTaskAttributesIncExt = await processTaskAttributeController.list(profileFormProcessTaskSid, includeExt)\nexpect(processTaskAttributesIncExt).to.exist;\nexpect(processTaskAttributesIncExt.length).to.be.gt(0);\nexpect(processTaskAttributesIncExt[6].processTaskAttributeGuid).to.exist;\nexpect(processTaskAttributesIncExt[6].extendedAtt.extAttribute).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a66a5baf-f1c9-4bec-991d-206c8d71ab57&quot;,&quot;parentUUID&quot;:&quot;c6e580c0-5270-4654-8a23-8aed0aca5481&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get and update a process task attribute&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskAttributeController should get and update a process task attribute&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:45,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processTaskAttributeGuid = &#x27;7cece0ab-bda6-4b13-a8fb-3f5c467371e6&#x27;  \nlet processTaskAttributeController = new controllers.ProcessTaskAttributeController(session);\nlet processTaskAttribute =  await processTaskAttributeController.get(processTaskAttributeGuid)\n// console.log(processTaskAttribute)\nexpect(processTaskAttribute.attributeValue).to.equal(&#x27;0&#x27;)\nlet numberOfAffectedRows = await processTaskAttributeController.update({\n  processTaskAttributeGuid,\n  fields: {\n    attributeValue: &#x27;TEST&#x27;\n  }\n})\nexpect(numberOfAffectedRows).to.equal(1)\nprocessTaskAttribute =  await processTaskAttributeController.get(processTaskAttributeGuid)\nexpect(processTaskAttribute.attributeValue).to.equal(&#x27;TEST&#x27;)\n// must set it back to original value so that we don&#x27;t break anything\nnumberOfAffectedRows = await processTaskAttributeController.update({\n  processTaskAttributeGuid,\n  fields: {\n    attributeValue: &#x27;0&#x27;\n  }\n})\nexpect(numberOfAffectedRows).to.equal(1)\nprocessTaskAttribute =  await processTaskAttributeController.get(processTaskAttributeGuid)\nexpect(processTaskAttribute.attributeValue).to.equal(&#x27;0&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e5521b1-5d57-4320-b5b7-079c7623b157&quot;,&quot;parentUUID&quot;:&quot;c6e580c0-5270-4654-8a23-8aed0aca5481&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert a process task attribute&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskAttributeController should insert a process task attribute&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// pick any process task and insert a process task attribute\n// then delete it\nconst processTaskAttributeController = new controllers.ProcessTaskAttributeController(session);\n// give \&quot;Update my profile - Start task\&quot; a test process task att\nconst processTaskGuid = &#x27;27cb04ea-b19d-4327-8b3a-e82cc538d44d&#x27;\nconst attributeKey = &#x27;TEST_KEY&#x27;\nconst attributeValue = &#x27;TEST_VALUE&#x27;\nconst ordinal = 1\nconst processTaskAttribute = await processTaskAttributeController.insert({\n  processTaskGuid,\n  attributeKey,\n  attributeValue,\n  ordinal\n})\nexpect(processTaskAttribute.processTaskAttributeGuid).to.be.a.uuid()\nexpect(processTaskAttribute.processTaskGuid).to.equal(processTaskGuid)\nexpect(processTaskAttribute.attributeKey).to.equal(attributeKey)\nexpect(processTaskAttribute.attributeValue).to.equal(attributeValue)\nexpect(processTaskAttribute.ordinal).to.equal(ordinal)\n// cleanup\n// const numberOfAffectedRows = await processTaskAttributeController.delete(processTaskAttribute.processTaskAttributeGuid)\nconst numberOfAffectedRows = await processTaskAttributeController.delete(processTaskAttribute.processTaskAttributeGuid)\nexpect(numberOfAffectedRows).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ee10d5e-ccf3-4f7e-b990-a2dbaa5b7036&quot;,&quot;parentUUID&quot;:&quot;c6e580c0-5270-4654-8a23-8aed0aca5481&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get the process task attribute max ordinal value for a process task&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskAttributeController should get the process task attribute max ordinal value for a process task&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processTaskAttributeController = new controllers.ProcessTaskAttributeController(session);\n// \&quot;Update my profile - Start task\&quot; a test process task att\nlet processTaskGuid = \&quot;27cb04ea-b19d-4327-8b3a-e82cc538d44d\&quot;;\n// that process task has no atts so its max ordinal should be null\nlet maxOrdinal = await processTaskAttributeController.getMaxOrdinal(processTaskGuid);\nexpect(maxOrdinal).to.equal(null);\n// \&quot;Update my profile - User Profile\&quot; task does have atts.  seed db goes up to 12\nprocessTaskGuid = \&quot;28d88aa5-fc4c-4e16-b32d-2964c738d49b\&quot;;\nmaxOrdinal = await processTaskAttributeController.getMaxOrdinal(processTaskGuid);\nexpect(maxOrdinal).to.equal(12);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df6f7db7-63d0-48c7-ac1b-43592b08ba96&quot;,&quot;parentUUID&quot;:&quot;c6e580c0-5270-4654-8a23-8aed0aca5481&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a66a5baf-f1c9-4bec-991d-206c8d71ab57&quot;,&quot;6e5521b1-5d57-4320-b5b7-079c7623b157&quot;,&quot;7ee10d5e-ccf3-4f7e-b990-a2dbaa5b7036&quot;,&quot;df6f7db7-63d0-48c7-ac1b-43592b08ba96&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:121,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1569713a-46e8-4170-8c50-92d8a6a9795c&quot;,&quot;title&quot;:&quot;ProcessTaskMappingController&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list process task mappings&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskMappingController should list process task mappings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processTaskMappingController = new controllers.ProcessTaskMappingController(session);\nconst profileFormProcessTaskSid = &#x27;c0473244-f04f-4916-8ac9-a73cc538d434&#x27;\nlet processTaskAttributes = await processTaskMappingController.list(profileFormProcessTaskSid)\nexpect(processTaskAttributes).to.exist;\nexpect(processTaskAttributes.length).to.be.gt(0);\nexpect(processTaskAttributes[0].processTaskMappingGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;997c4e18-0782-4384-9587-5b320da6b787&quot;,&quot;parentUUID&quot;:&quot;1569713a-46e8-4170-8c50-92d8a6a9795c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;997c4e18-0782-4384-9587-5b320da6b787&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a7651607-5434-4cc1-bfae-740a86d19cf4&quot;,&quot;title&quot;:&quot;ProcessController&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update a process&#x27;s modified by and date fields&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessController should update a process&#x27;s modified by and date fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processController = new controllers.ProcessController(session);\nconst updateMyProfileProcessSid = &#x27;f864cfe2-98df-4724-8db1-de2cc538d4e0&#x27;\nconst systemUserGuid = &#x27;D8C469C3-F781-4179-A09C-6D148885FB30&#x27;\nlet process = await processController.get(updateMyProfileProcessSid)\nexpect(process).to.exist;\nexpect(process.processGuid.toLowerCase()).to.equal(updateMyProfileProcessSid);\nconst oldModifiedDate = process.modifiedDate\nconst numberOfAffectedRows = await processController.updateModifiedByAndDate(updateMyProfileProcessSid)\nexpect(numberOfAffectedRows).to.equal(1)\nprocess = await processController.get(updateMyProfileProcessSid) \nexpect(process.modifiedDate).to.be.greaterThan(oldModifiedDate)\n// for some reason when executed in a test the db record&#x27;s modifiedBy is set to \n// the systemUserGuid instead of the contact sid specified in the session (4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF)\nexpect(process.modifiedBy).to.equal(systemUserGuid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1d8eb13-fd4b-4a7c-a5bd-f9050806662d&quot;,&quot;parentUUID&quot;:&quot;a7651607-5434-4cc1-bfae-740a86d19cf4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c1d8eb13-fd4b-4a7c-a5bd-f9050806662d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;88f5e7d6-482c-4522-b133-bb9caeb4dea8&quot;,&quot;title&quot;:&quot;Task Dispatcher API Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-task-dispatcher/test/integration/db/model.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;212cfc56-5576-4b30-ad1a-78a55ebbda82&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-task-dispatcher/test/integration/db/model.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/model.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Model Tests tests \&quot;before all\&quot; hook in \&quot;tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;092f74e1-4784-4441-8d48-981e59871671&quot;,&quot;parentUUID&quot;:&quot;212cfc56-5576-4b30-ad1a-78a55ebbda82&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:60,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const vwProcessTasksModel = await sqldb.models.bindModel(\n  config.tenantOne.tenantId,\n  vwProcessTasksModels.vwProcessTasks\n);\nlet results = await vwProcessTasksModel.query();\n//console.log(results)\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91668dc4-b7ad-47c9-a52c-72cbed591bd5&quot;,&quot;parentUUID&quot;:&quot;212cfc56-5576-4b30-ad1a-78a55ebbda82&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a hash of bound models&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Model Tests tests should return a hash of bound models&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const vwProcessTasksModel = (await models.getModels(config.tenantOne.tenantId))\n  .vwProcessTasks;\nlet results = await vwProcessTasksModel.query();\n//console.log(results)\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee95af0e-b0ef-49f4-9543-4722c097b5fc&quot;,&quot;parentUUID&quot;:&quot;212cfc56-5576-4b30-ad1a-78a55ebbda82&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should bound models should be cached in memory&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Model Tests tests should bound models should be cached in memory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(models._tentantModels[config.tenantOne.tenantId]).to.exist;\nlet results = await models._tentantModels[\n  config.tenantOne.tenantId\n].vwProcessTasks.query();\n//console.log(results)\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a15ba500-5483-4385-b515-fa9db8e723d6&quot;,&quot;parentUUID&quot;:&quot;212cfc56-5576-4b30-ad1a-78a55ebbda82&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;91668dc4-b7ad-47c9-a52c-72cbed591bd5&quot;,&quot;ee95af0e-b0ef-49f4-9543-4722c097b5fc&quot;,&quot;a15ba500-5483-4385-b515-fa9db8e723d6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:116,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;26146e06-2b59-42e2-b5d4-3a83d1514d5a&quot;,&quot;title&quot;:&quot;Task Dispatcher API FTP Push Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-task-dispatcher/test/integration/functions/ftpPush.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/ftpPush.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets task file settings&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API FTP Push Tests gets task file settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;script_getfilesettings\&quot;, tasktype }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst data = mockRes.body.Data;\nexpect(data).to.include({PickDirectory: \&quot;No\&quot;});\nexpect(data).to.include({FileToFTP: \&quot;4a6c9613-bac9-4448-93c9-d9342bf5d897;96865aec-667c-4db5-8116-f1d1bae512ab\&quot;});\nexpect(data).to.include({FTPSite: \&quot;ftp\&quot;});\nexpect(data).to.include({FTPUsername: \&quot;ftp_user\&quot;});\nexpect(data).to.include({FTPPassword: \&quot;ftp_pass\&quot;});&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected {} to have property &#x27;PickDirectory&#x27;&quot;,&quot;estack&quot;:&quot;AssertionError: expected {} to have property &#x27;PickDirectory&#x27;\n    at Context.&lt;anonymous&gt; (test/integration/functions/ftpPush.test.js:20:21)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;a8f1b6c4-5d98-4b0e-94d6-dea8e9b2e605&quot;,&quot;parentUUID&quot;:&quot;26146e06-2b59-42e2-b5d4-3a83d1514d5a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets task file options&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API FTP Push Tests gets task file options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;script_getfileoptions\&quot;, tasktype }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nconst data = mockRes.body.Data[0];\nexpect(data).to.include(&#x27;4a6c9613-bac9-4448-93c9-d9342bf5d897;96865aec-667c-4db5-8116-f1d1bae512ab&#x27;);\nexpect(data).to.include(&#x27;Form : File Attachment:  (Task Output)&#x27;),\nexpect(data).to.include(&#x27;322ffece-654f-49e4-bb5c-4ae41768d5be&#x27;);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 500 to equal 200&quot;,&quot;estack&quot;:&quot;AssertionError: expected 500 to equal 200\n    at Context.&lt;anonymous&gt; (test/integration/functions/ftpPush.test.js:35:35)&quot;,&quot;diff&quot;:&quot;- 500\n+ 200\n&quot;},&quot;uuid&quot;:&quot;743e9b05-9a67-4d56-91da-66b930eac9ae&quot;,&quot;parentUUID&quot;:&quot;26146e06-2b59-42e2-b5d4-3a83d1514d5a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;a8f1b6c4-5d98-4b0e-94d6-dea8e9b2e605&quot;,&quot;743e9b05-9a67-4d56-91da-66b930eac9ae&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;770617cd-cd48-4683-994c-700a2347df12&quot;,&quot;title&quot;:&quot;Task Dispatcher API PDF Merge Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-task-dispatcher/test/integration/functions/pdfMerge.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/pdfMerge.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets task settings&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets task settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;script_gettasksettings\&quot;, tasktype }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\n// vue output\n// expect(result.length).to.be.greaterThan(1);\n// expect(result[0].attributeKey).to.exist;\n// expect(result[0].attributeValue).to.exist;\n// expect(result.find(x =&gt; x.attributeKey == &#x27;GeneratedFileName&#x27;)).to.exist\n// expect(result.find(x =&gt; x.attributeKey == &#x27;FirstPDF&#x27;)).to.exist\n// angular output\nexpect(result.Data.GeneratedFileName).to.exist;\nexpect(result.Data.FirstPDF).to.exist;\nexpect(result.Data.SecondPDF).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d02a19cd-9636-4889-8408-d91cb3fd40bb&quot;,&quot;parentUUID&quot;:&quot;770617cd-cd48-4683-994c-700a2347df12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets PDF options&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets PDF options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;script_getpdfoptions\&quot;, tasktype }\nmockReq.query = { processSid }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result.length).to.be.greaterThan(1);\n// vue output\n// expect(result[0].displayName).to.exist;\n// expect(result[0].processTaskGuid).to.exist;\n// expect(result[0].taskTypeGuid).to.exist;\n// angular output\nexpect(result[0].length).to.be.greaterThan(1);\nexpect(result[0][0]).to.equal(&#x27;ae9b4a71-5f37-4fe9-9926-a0901da0eb0e;52407ad7-bd98-4023-8d88-91ef4464cd98&#x27;);\nexpect(result[0][1]).to.equal(&#x27;second PDF Merge Form : File Attachment (Task Output)&#x27;);\nexpect(result[0][2]).to.equal(&#x27;322ffece-654f-49e4-bb5c-4ae41768d5be&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cdc10126-8130-4a12-a28b-43d7d77bcd99&quot;,&quot;parentUUID&quot;:&quot;770617cd-cd48-4683-994c-700a2347df12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;lists PDF rule options&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests lists PDF rule options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;listRuleOptions\&quot;, tasktype }\nmockReq.query = { processSid }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result).to.eql([{ Value: \&quot;GeneratedPDF\&quot;, Label: \&quot;Generated PDF\&quot;, Type: \&quot;FileAttachment\&quot;}])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ffc78399-b671-4446-b456-134762ed4d71&quot;,&quot;parentUUID&quot;:&quot;770617cd-cd48-4683-994c-700a2347df12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets PDF fields&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets PDF fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid, op: \&quot;script_getpdffields\&quot;, tasktype }\nmockReq.query = { processSid }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\n// vue output\n// expect(result.length).to.equal(1)\n// expect(result[0]).to.equal(&#x27;FILE_NAME&#x27;)\n// angular output\nexpect(result.Data.length).to.equal(1)\nexpect(result.Data[0][0]).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result.Data[0][1]).to.equal(&#x27;FILE_NAME&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e310b3c-6ee9-489f-b1db-08fb8f3a1ab8&quot;,&quot;parentUUID&quot;:&quot;770617cd-cd48-4683-994c-700a2347df12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - data source - form mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - data source - form mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Task_Input&#x27;)\nexpect(result[0].PrefillField).to.equal(&#x27;1601919933647&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Data - second PDF Merge Form - Merged PDF Filename:&#x27;)\nexpect(result[0].TaskSID).to.equal(&#x27;ae9b4a71-5f37-4fe9-9926-a0901da0eb0e&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d1666b0-17f1-4e31-a378-ec3f36255e99&quot;,&quot;parentUUID&quot;:&quot;770617cd-cd48-4683-994c-700a2347df12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - fixed value mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - fixed value mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processSid_fixedValue = &#x27;c2095ccf-896b-46a0-b5e9-8e5b7e288270&#x27; \nconst processTaskSid_fixedValue = &#x27;5f719bb1-11b8-43d9-a9fd-66e55306f4eb&#x27;\nconst mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid: processTaskSid_fixedValue, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid: processSid_fixedValue }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Fixed_Value&#x27;)\nexpect(result[0].PrefillField).to.equal(&#x27;fixValFileName&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Fixed Value - fixValFileName&#x27;)\nexpect(result[0].TaskSID).to.not.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e0462361-4bc1-4356-8b3e-74eae8209b31&quot;,&quot;parentUUID&quot;:&quot;770617cd-cd48-4683-994c-700a2347df12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - request id mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - request id mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processSid_requestId = &#x27;f9f94cfe-d4b3-4d89-9695-1b32c6cee55d&#x27; \nconst processTaskSid_requestId = &#x27;9b4f1444-7bd7-481a-8008-69a0490da139&#x27;\nconst mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid: processTaskSid_requestId, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid: processSid_requestId }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Request&#x27;)\nexpect(result[0].PrefillField).to.equal(&#x27;ID&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Request - ID&#x27;)\nexpect(result[0].TaskSID).to.not.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac0ded9f-6283-4be5-83c5-0553bbc4f5c0&quot;,&quot;parentUUID&quot;:&quot;770617cd-cd48-4683-994c-700a2347df12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - client username mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - client username mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processSid_clientUsername = &#x27;d1a7c44e-1e6e-4cdf-9d39-deac08a8b5cc&#x27; \nconst processTaskSid_clientUsername = &#x27;a79cde56-9f3a-4be4-9824-dd634eddbff3&#x27;\nconst mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid: processTaskSid_clientUsername, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid: processSid_clientUsername }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Client&#x27;)\nexpect(result[0].PrefillField).to.equal(&#x27;UserName&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Client - UserName&#x27;)\nexpect(result[0].TaskSID).to.not.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;263d6b1c-6a0b-46f2-8d7b-f156a7c60d49&quot;,&quot;parentUUID&quot;:&quot;770617cd-cd48-4683-994c-700a2347df12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - status pdfmerge mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - status pdfmerge mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processSid_statusPdfMerge = &#x27;ab3a8404-c208-4ca7-8ae6-637b16c23368&#x27; \nconst processTaskSid_statusPdfMerge = &#x27;7f4f1f42-228c-46dc-90a3-77fe15fe7412&#x27;\nconst mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid: processTaskSid_statusPdfMerge, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid: processSid_statusPdfMerge }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Task_State&#x27;)\n// expect(result[0].PrefillField).to.equal(&#x27;UserName&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Status - PDF Merge - &#x27;)\nexpect(result[0].TaskSID).to.equal(&#x27;7f4f1f42-228c-46dc-90a3-77fe15fe7412&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5c8caf0-170c-4a18-a392-a3508c9935eb&quot;,&quot;parentUUID&quot;:&quot;770617cd-cd48-4683-994c-700a2347df12&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d02a19cd-9636-4889-8408-d91cb3fd40bb&quot;,&quot;cdc10126-8130-4a12-a28b-43d7d77bcd99&quot;,&quot;ffc78399-b671-4446-b456-134762ed4d71&quot;,&quot;6e310b3c-6ee9-489f-b1db-08fb8f3a1ab8&quot;,&quot;3d1666b0-17f1-4e31-a378-ec3f36255e99&quot;,&quot;e0462361-4bc1-4356-8b3e-74eae8209b31&quot;,&quot;ac0ded9f-6283-4be5-83c5-0553bbc4f5c0&quot;,&quot;263d6b1c-6a0b-46f2-8d7b-f156a7c60d49&quot;,&quot;f5c8caf0-170c-4a18-a392-a3508c9935eb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:63,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e8b216f8-8a9e-48b1-86e8-1b3c9cf329d0&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;22e3fc06-c72a-4eca-b141-e28808e51dae&quot;,&quot;title&quot;:&quot;Tenant API Sessions Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/activeSessions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/activeSessions.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Sessions Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000); \ntestConfig = await testLib.getTestConfig();\n    \ntenant = testConfig.tenantOne.tenantId;\ngroup = \&quot;sessionServiceGroup\&quot;\ntestEventType = &#x27;extendSession&#x27;\nfullStreamName = tenant + &#x27;.stream.&#x27; + testStreamName\neventProcessedName = fullStreamName + \&quot;.\&quot; + group + \&quot;.processed\&quot;;\neventHistoryName = fullStreamName + \&quot;.history\&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;196e2bed-7f31-4df4-8c9e-dfed43bf42fa&quot;,&quot;parentUUID&quot;:&quot;22e3fc06-c72a-4eca-b141-e28808e51dae&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Sessions Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e52b37f-f615-4562-8769-e9514159f60f&quot;,&quot;parentUUID&quot;:&quot;22e3fc06-c72a-4eca-b141-e28808e51dae&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e2188887-5e32-479b-966b-d088ec12d0d3&quot;,&quot;title&quot;:&quot;Active Sessions&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/activeSessions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/activeSessions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;fb129421-dbf0-4a72-b4ca-81f7e3d89750&quot;,&quot;title&quot;:&quot;count active sessions&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/activeSessions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/activeSessions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return activeSessions&quot;,&quot;fullTitle&quot;:&quot;Tenant API Sessions Tests Active Sessions count active sessions should return activeSessions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let sessions  = await getActiveSessions(tenant);\n//console.log(sessions)\nexpect(sessions).to.exist;\nexpect(sessions).to.have.property(\&quot;activeSessions\&quot;)\nexpect(sessions).to.have.property(\&quot;activeUsers\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;333a5d78-659e-43e2-8965-f7c8ab4256bd&quot;,&quot;parentUUID&quot;:&quot;fb129421-dbf0-4a72-b4ca-81f7e3d89750&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;333a5d78-659e-43e2-8965-f7c8ab4256bd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3592ffc5-71f4-462e-82d0-5755f7fcbda7&quot;,&quot;title&quot;:&quot;Tenant API licsense stats&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/licenseStats.test.js&quot;,&quot;file&quot;:&quot;/test/integration/licenseStats.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API licsense stats \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3004,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000); \nconfig = await testLib.getTestConfig();\nlet sp = new stream.StreamPublisher(&#x27;sessions&#x27;,config.tenantOne.tenantId);\nawait sp.sendEvent(\&quot;extendSession\&quot;, {\n    token: \&quot;abcd234\&quot;,\n    user: {\n        sid:\&quot;11111\&quot;, \n        user_name: \&quot;iapprove\&quot;, \n        email: \&quot;iapprove@integrify.com\&quot;, \n        name: \&quot;System System\&quot;\n    }\n})\n    \nawait delay(3000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;299b265f-630f-40c2-a89d-cfd60eb9bb3c&quot;,&quot;parentUUID&quot;:&quot;3592ffc5-71f4-462e-82d0-5755f7fcbda7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API licsense stats \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d455d9c6-2d22-46db-a8ec-ab34e3bed1e7&quot;,&quot;parentUUID&quot;:&quot;3592ffc5-71f4-462e-82d0-5755f7fcbda7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4f7c06b5-9bae-49f1-a4f4-51866fcf33d6&quot;,&quot;title&quot;:&quot;Post all stats&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/licenseStats.test.js&quot;,&quot;file&quot;:&quot;/test/integration/licenseStats.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return ok&quot;,&quot;fullTitle&quot;:&quot;Tenant API licsense stats Post all stats should return ok&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:625,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let result = await postAllStats();\nexpect(result).to.eq(\&quot;ok\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8cb79aff-a2dc-408e-92f9-66edd0284c69&quot;,&quot;parentUUID&quot;:&quot;4f7c06b5-9bae-49f1-a4f4-51866fcf33d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8cb79aff-a2dc-408e-92f9-66edd0284c69&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:625,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6fea3fcb-d2ce-4b7e-8a5a-f2250fbab153&quot;,&quot;title&quot;:&quot;Tenant API Stream-Manager Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cd056dfb-0a0c-40ee-8f8b-a410dc0f3d36&quot;,&quot;title&quot;:&quot;listTenantStreams&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of the streams for a tenant&quot;,&quot;fullTitle&quot;:&quot;Tenant API Stream-Manager Tests listTenantStreams should return a list of the streams for a tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req();\n\t\t\tlet results = await streamMonitor.listTenantStreams(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst apps = mockRes.body;\n\t\t\tstreamName = apps[0]\n\t\t\texpect(apps).to.be.array()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95ef3827-5edf-4fc0-8053-89c74cd850be&quot;,&quot;parentUUID&quot;:&quot;cd056dfb-0a0c-40ee-8f8b-a410dc0f3d36&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;95ef3827-5edf-4fc0-8053-89c74cd850be&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e183b514-1210-4ccc-b479-7e44765c3829&quot;,&quot;title&quot;:&quot;streamInfoReqHandler&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return info for the stream&quot;,&quot;fullTitle&quot;:&quot;Tenant API Stream-Manager Tests streamInfoReqHandler should return info for the stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req();\n\t\t\treq.params.streamName = req.params.tenant + &#x27;.stream.&#x27; + testStreamName\n\t\t\tlet results = await streamMonitor.streamInfoReqHandler(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst info = mockRes.body;\n\t\t\texpect(info).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25a898d4-451f-479b-87b2-f08cea1ff76b&quot;,&quot;parentUUID&quot;:&quot;e183b514-1210-4ccc-b479-7e44765c3829&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;25a898d4-451f-479b-87b2-f08cea1ff76b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;67024157-0ada-470f-9428-968905d7e831&quot;,&quot;title&quot;:&quot;getGroupInfo&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return group info for the stream&quot;,&quot;fullTitle&quot;:&quot;Tenant API Stream-Manager Tests getGroupInfo should return group info for the stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req();\n\t\t\treq.params.streamName = req.params.tenant + &#x27;.stream.&#x27; + testStreamName\n\t\t\tlet results = await streamMonitor.getGroupInfo(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst info = mockRes.body;\n\t\t\texpect(info).to.be.array()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07852cee-ffda-4f16-adf5-60630a86903f&quot;,&quot;parentUUID&quot;:&quot;67024157-0ada-470f-9428-968905d7e831&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;07852cee-ffda-4f16-adf5-60630a86903f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cfceef72-c5ef-45bd-ad91-e842da5d7600&quot;,&quot;title&quot;:&quot;getConsumerInfo&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return consumer info for the group&quot;,&quot;fullTitle&quot;:&quot;Tenant API Stream-Manager Tests getConsumerInfo should return consumer info for the group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req();\n\t\t\treq.params.streamName = req.params.tenant + &#x27;.stream.&#x27; + testStreamName\n\t\t\treq.params.groupName = \&quot;sessionServiceGroup\&quot; \n\t\t\tlet results = await streamMonitor.getConsumerInfo(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst info = mockRes.body;\n\t\t\texpect(info).to.be.array()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dbe0b527-a2d7-4372-810a-50f0f4798cea&quot;,&quot;parentUUID&quot;:&quot;cfceef72-c5ef-45bd-ad91-e842da5d7600&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dbe0b527-a2d7-4372-810a-50f0f4798cea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a3886b09-412a-4cb4-8620-745fa7a498ca&quot;,&quot;title&quot;:&quot;Tenant API License, Apps and Settings Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d7d715af-b013-4aa6-a865-7d46640f9230&quot;,&quot;title&quot;:&quot;getTenantLicense&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a license for a tenant&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantLicense should return a license for a tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req()\n\t\t\tlet results = await getTenantLicense(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst licenseInfo = mockRes.body;\n\t\t\texpect(licenseInfo.instanceId).equal(req.oauth.tenant);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e3e8987-94fa-488c-9fdb-96003ffe1b87&quot;,&quot;parentUUID&quot;:&quot;d7d715af-b013-4aa6-a865-7d46640f9230&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6e3e8987-94fa-488c-9fdb-96003ffe1b87&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8646ddfe-7151-4999-9c48-3d25e0c4e1e9&quot;,&quot;title&quot;:&quot;getTenantApps&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return apps for a tenant&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantApps should return apps for a tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await  mocks.req()\n\t\t\tlet results = await getTenantApps(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst apps = mockRes.body;\n\t\t\texpect(apps).to.be.array()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eca423a0-865c-4e61-870b-a34ac53be2fa&quot;,&quot;parentUUID&quot;:&quot;8646ddfe-7151-4999-9c48-3d25e0c4e1e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eca423a0-865c-4e61-870b-a34ac53be2fa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b679a308-1e18-4c27-83a8-5d4b6137f74e&quot;,&quot;title&quot;:&quot;getTenantLicenseLocation&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return license location for a tenant&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantLicenseLocation should return license location for a tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await  mocks.req()\n\t\t\tlet results = await getTenantLicenseLocation(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst licenseLocation = mockRes.body;\n      expect(licenseLocation).to.satisfy(function(val) { return val === &#x27;onpremise&#x27; || val.toLowerCase().includes(&#x27;cloud&#x27;); });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef525c7f-1322-45e7-b13f-3f93e375e4d8&quot;,&quot;parentUUID&quot;:&quot;b679a308-1e18-4c27-83a8-5d4b6137f74e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ef525c7f-1322-45e7-b13f-3f93e375e4d8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;486f2f90-d719-48cb-a036-ede90b73c938&quot;,&quot;title&quot;:&quot;getTenantLoginSettings&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should login settings for a tenant based on a tenant id&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantLoginSettings should login settings for a tenant based on a tenant id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await  mocks.req()\n\t\t\treq.query = {tenant: req.config.tenantOne.tenantId}\n\t\t\tlet results = await getTenantLoginSettings(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst settings = mockRes.body;\n\t\t\texpect(settings.ID).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a828002d-5241-485b-951e-1f9a2359d301&quot;,&quot;parentUUID&quot;:&quot;486f2f90-d719-48cb-a036-ede90b73c938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should login settings for a tenant based on a host header&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantLoginSettings should login settings for a tenant based on a host header&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await  mocks.req()\n\t\t\treq.query = {hostHeader: req.config.tenantOne.hostHeader}\n\t\t\tlet results = await getTenantLoginSettings(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst settings = mockRes.body;\n\t\t\texpect(settings.ID).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2510b0ef-b8e5-4e8c-b55b-778c500680f0&quot;,&quot;parentUUID&quot;:&quot;486f2f90-d719-48cb-a036-ede90b73c938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a828002d-5241-485b-951e-1f9a2359d301&quot;,&quot;2510b0ef-b8e5-4e8c-b55b-778c500680f0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f40bb8b2-279c-4aaf-a15b-73835377dc1f&quot;,&quot;title&quot;:&quot;Tenant API Translation controller tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/translation.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c0e2669-9390-4a73-a12c-413399849464&quot;,&quot;parentUUID&quot;:&quot;f40bb8b2-279c-4aaf-a15b-73835377dc1f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await translationController.deleteLanguages(tenant, {languageName: &#x27;test&#x27;});\ndeleted = await translationController.deleteLabels(tenant, {defaultText: &#x27;label from test&#x27;});\nconsole.log(deleted);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec81f67f-bf4d-4177-85b0-94d40d549f01&quot;,&quot;parentUUID&quot;:&quot;f40bb8b2-279c-4aaf-a15b-73835377dc1f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d9735fe7-f3c1-4567-a029-e5949fc03a66&quot;,&quot;title&quot;:&quot;language crud &quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/translation.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests language crud  should create a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  language = await translationController.createLanguage(tenant, languageObj);\n_id = language._id.toString();\nexpect(_id).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;51a956e9-eaf2-464e-846b-fcdd18781b76&quot;,&quot;parentUUID&quot;:&quot;d9735fe7-f3c1-4567-a029-e5949fc03a66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list languages&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests language crud  should list languages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  languages = await translationController.listLanguages(tenant);\n         console.log(JSON.stringify(languages));\n         expect(languages.length).to.be.gt(0);  \n         let createdLanguage  = languages.find((d) =&gt; {\n             return d._id.toString() === _id;\n         })\n         expect(createdLanguage).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f320fab-6154-4c66-860a-38d2f6cde4fe&quot;,&quot;parentUUID&quot;:&quot;d9735fe7-f3c1-4567-a029-e5949fc03a66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests language crud  should get a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;language = await translationController.getLanguage(tenant,_id);\n            expect(language).to.exist         \n            expect(language._id.toString()).to.equal(_id)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef302a0d-c01e-446f-ba7d-28bef07c319b&quot;,&quot;parentUUID&quot;:&quot;d9735fe7-f3c1-4567-a029-e5949fc03a66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests language crud  should update a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;language.translationCode = &#x27;test-updated&#x27;;\n            language.modifiedBy = IntegrifySystemContactSid;\n            const updatedLanguage = await translationController.updateLanguage(tenant,language.toObject());\n            expect(updatedLanguage).to.exist         \n            expect(updatedLanguage._id.toString()).to.equal(_id)\n            expect(updatedLanguage.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c07179cf-4697-4cc9-8b2b-f238788c5de9&quot;,&quot;parentUUID&quot;:&quot;d9735fe7-f3c1-4567-a029-e5949fc03a66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests language crud  delete a a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const deleted = await translationController.deleteLanguage(tenant,_id);\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29b70270-c556-44ab-b3d5-b7a1a88e0060&quot;,&quot;parentUUID&quot;:&quot;d9735fe7-f3c1-4567-a029-e5949fc03a66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;51a956e9-eaf2-464e-846b-fcdd18781b76&quot;,&quot;6f320fab-6154-4c66-860a-38d2f6cde4fe&quot;,&quot;ef302a0d-c01e-446f-ba7d-28bef07c319b&quot;,&quot;c07179cf-4697-4cc9-8b2b-f238788c5de9&quot;,&quot;29b70270-c556-44ab-b3d5-b7a1a88e0060&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:47,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ac8e9581-3c90-4f38-b26e-c4701ba66d49&quot;,&quot;title&quot;:&quot;label crud &quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/translation.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  should create a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  label = await translationController.createLabel(tenant, labelObj);\n_id = label._id.toString();\nexpect(_id).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cde33e8c-eca2-4aa9-a4a5-27031b57a984&quot;,&quot;parentUUID&quot;:&quot;ac8e9581-3c90-4f38-b26e-c4701ba66d49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list labels&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  should list labels&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  labels = await translationController.listLabels(tenant);\n         expect(labels.length).to.be.gt(0);  \n         let createdLabel  = labels.find((d) =&gt; {\n             return d._id.toString() === _id;\n         })\n         expect(createdLabel).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c6c19ae-7295-4d9a-a09e-2c31dd3d433e&quot;,&quot;parentUUID&quot;:&quot;ac8e9581-3c90-4f38-b26e-c4701ba66d49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  should get a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;label = await translationController.getLabel(tenant,_id);\n            expect(label).to.exist         \n            expect(label._id.toString()).to.equal(_id)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d6fcbb4-0814-4b86-844a-d9ae84579d61&quot;,&quot;parentUUID&quot;:&quot;ac8e9581-3c90-4f38-b26e-c4701ba66d49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  should update a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;label.translatedText = &#x27;test-updated&#x27;;\n            label.modifiedBy = IntegrifySystemContactSid;\n            const updatedLabel = await translationController.updateLabel(tenant,label.toObject());\n            expect(updatedLabel).to.exist         \n            expect(updatedLabel._id.toString()).to.equal(_id)\n            expect(updatedLabel.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c7bae3a6-b65d-40f1-a246-ae57f349811f&quot;,&quot;parentUUID&quot;:&quot;ac8e9581-3c90-4f38-b26e-c4701ba66d49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  delete a a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const deleted = await translationController.deleteLabel(tenant,_id);\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44deadc8-8483-40a2-bf45-23857a93fd56&quot;,&quot;parentUUID&quot;:&quot;ac8e9581-3c90-4f38-b26e-c4701ba66d49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;save new labels from ui list&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  save new labels from ui list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let unsaved = [&#x27;label from test&#x27;]\nconst savedCount = await translationController.saveNewDefaultLabels(tenant, unsaved);\nexpect(savedCount).to.exist         \nexpect(savedCount).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;faa7a8c5-9478-460b-8232-c355ba182b34&quot;,&quot;parentUUID&quot;:&quot;ac8e9581-3c90-4f38-b26e-c4701ba66d49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cde33e8c-eca2-4aa9-a4a5-27031b57a984&quot;,&quot;8c6c19ae-7295-4d9a-a09e-2c31dd3d433e&quot;,&quot;1d6fcbb4-0814-4b86-844a-d9ae84579d61&quot;,&quot;c7bae3a6-b65d-40f1-a246-ae57f349811f&quot;,&quot;44deadc8-8483-40a2-bf45-23857a93fd56&quot;,&quot;faa7a8c5-9478-460b-8232-c355ba182b34&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;87860b45-9a5a-44ee-a531-edce5323e8c6&quot;,&quot;title&quot;:&quot;seed functions &quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/translation.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should seed languages&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests seed functions  should seed languages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  seeded = await translationController.seedLanguages(true) //true for isTest;\n\nexpect(seeded).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b93e0f3e-2663-4c39-a12b-33eca4e5c669&quot;,&quot;parentUUID&quot;:&quot;87860b45-9a5a-44ee-a531-edce5323e8c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should seed labels&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests seed functions  should seed labels&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  seeded = await translationController.seedLabels(true) //true for isTest;\n\nexpect(seeded).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;33801252-3aeb-43af-9e32-1ef77a2e56a9&quot;,&quot;parentUUID&quot;:&quot;87860b45-9a5a-44ee-a531-edce5323e8c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b93e0f3e-2663-4c39-a12b-33eca4e5c669&quot;,&quot;33801252-3aeb-43af-9e32-1ef77a2e56a9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9a3f2063-9ef1-48c0-bc58-e11f497e4cbf&quot;,&quot;title&quot;:&quot;Tenant API Translation handler tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/translation.handler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.handler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9912bcef-67de-4524-b578-45484ddb1ed1&quot;,&quot;parentUUID&quot;:&quot;9a3f2063-9ef1-48c0-bc58-e11f497e4cbf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await translationController.deleteLanguages(tenant, {languageName: &#x27;test&#x27;});\ndeleted = await translationController.deleteLabels(tenant, {defaultText: &#x27;label from test&#x27;});\nconsole.log(deleted);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8be4d05-325a-441a-87af-cb2b2e79209c&quot;,&quot;parentUUID&quot;:&quot;9a3f2063-9ef1-48c0-bc58-e11f497e4cbf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6b907301-d1ae-4e93-b1b9-6d626a389370&quot;,&quot;title&quot;:&quot;language crud &quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/translation.handler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.handler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  should create a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = languageObj;\nawait translationHandler.createLanguage(req, mockRes);\nlanguage = mockRes.body;\n_id = language._id.toString();\nexpect(_id).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1bd7a1f1-ec50-4d75-acbc-e28ff5bca7dd&quot;,&quot;parentUUID&quot;:&quot;6b907301-d1ae-4e93-b1b9-6d626a389370&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list languages&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  should list languages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n         const req = await mocks.req();\n         await translationHandler.listLanguages(req,mockRes);\n         const  languages = mockRes.body;\n         expect(languages.length).to.be.gt(0);  \n         let createdLanguage  = languages.find((d) =&gt; {\n             return d._id.toString() === _id;\n         })\n         expect(createdLanguage).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19dc49f6-94fa-4868-bb7f-33a76116c1ff&quot;,&quot;parentUUID&quot;:&quot;6b907301-d1ae-4e93-b1b9-6d626a389370&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list tenant languages&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  should list tenant languages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n         const req = await mocks.req();\n         req.params.tenant = tenant\n         await translationHandler.listTenantLanguages(req,mockRes);\n         const  languages = mockRes.body;\n         expect(languages.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31f7f439-4fa2-434c-a695-389a2af32568&quot;,&quot;parentUUID&quot;:&quot;6b907301-d1ae-4e93-b1b9-6d626a389370&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  should get a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            const req = await mocks.req();\n            req.params.id = _id;\n            await translationHandler.getLanguage(req,mockRes);\n            language = mockRes.body;\n            expect(language).to.exist         \n            expect(language._id.toString()).to.equal(_id)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b61a9df2-36b3-4fd2-85aa-439f036e6f3b&quot;,&quot;parentUUID&quot;:&quot;6b907301-d1ae-4e93-b1b9-6d626a389370&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  should update a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = language;\nawait translationHandler.updateLanguage(req, mockRes);\nconst updatedLanguage = mockRes.body;\nexpect(updatedLanguage).to.exist         \nexpect(updatedLanguage._id.toString()).to.equal(_id)\nexpect(updatedLanguage.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3cb9dac5-4577-47bd-a7a6-bfe603b8f1d1&quot;,&quot;parentUUID&quot;:&quot;6b907301-d1ae-4e93-b1b9-6d626a389370&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  delete a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.id = _id;\nawait translationHandler.deleteLanguage(req,mockRes);\nconst  deleted = mockRes.body;\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7cd70e4a-b02e-4305-81af-c206d68d836f&quot;,&quot;parentUUID&quot;:&quot;6b907301-d1ae-4e93-b1b9-6d626a389370&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1bd7a1f1-ec50-4d75-acbc-e28ff5bca7dd&quot;,&quot;19dc49f6-94fa-4868-bb7f-33a76116c1ff&quot;,&quot;31f7f439-4fa2-434c-a695-389a2af32568&quot;,&quot;b61a9df2-36b3-4fd2-85aa-439f036e6f3b&quot;,&quot;3cb9dac5-4577-47bd-a7a6-bfe603b8f1d1&quot;,&quot;7cd70e4a-b02e-4305-81af-c206d68d836f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3f57e260-500f-4625-852e-072e5e061d5f&quot;,&quot;title&quot;:&quot;label crud &quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-tenant/test/integration/translation.handler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.handler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  should create a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = labelObj;\nawait translationHandler.createLabel(req, mockRes);\nlabel = mockRes.body;\n_id = label._id.toString();\nexpect(_id).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d02256bb-07e4-48ea-8665-ea190841fe9d&quot;,&quot;parentUUID&quot;:&quot;3f57e260-500f-4625-852e-072e5e061d5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list labels&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  should list labels&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n         const req = await mocks.req();\n         req.query.tenant = tenant\n         await translationHandler.listLabels(req,mockRes);\n         const  labels = mockRes.body;\n         expect(labels.length).to.be.gt(0);  \n         let createdLabel  = labels.find((d) =&gt; {\n             return d._id.toString() === _id;\n         })\n         expect(createdLabel).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ae0829c-f927-47db-9490-12550a11b5b1&quot;,&quot;parentUUID&quot;:&quot;3f57e260-500f-4625-852e-072e5e061d5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  should get a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            const req = await mocks.req();\n            req.params.id = _id;\n            await translationHandler.getLabel(req,mockRes);\n            label = mockRes.body;\n            expect(label).to.exist         \n            expect(label._id.toString()).to.equal(_id)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;74b46f81-54e5-415f-8468-59731738d356&quot;,&quot;parentUUID&quot;:&quot;3f57e260-500f-4625-852e-072e5e061d5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  should update a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;label.translatedText = &#x27;test-updated&#x27;;\nlabel.modifiedBy = IntegrifySystemContactSid;\nconst mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = label;\nawait translationHandler.updateLabel(req, mockRes);\nconst updatedLabel = mockRes.body;   \nexpect(updatedLabel).to.exist         \nexpect(updatedLabel._id.toString()).to.equal(_id)\nexpect(updatedLabel.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b31d9ce-b0b5-4207-98d1-99bf79ddacd6&quot;,&quot;parentUUID&quot;:&quot;3f57e260-500f-4625-852e-072e5e061d5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete aa label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  delete aa label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.id = _id;\nawait translationHandler.deleteLabel(req,mockRes);\nconst  deleted = mockRes.body;\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef79df62-d159-4689-8fb6-14fda30f7517&quot;,&quot;parentUUID&quot;:&quot;3f57e260-500f-4625-852e-072e5e061d5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete labels&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  delete labels&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let results = await translationController.listLabels(tenant,{_id})\n            let labelIds= results.map((i) =&gt; {\n                return i._id;\n            })\n\t\t\tconst mockRes = await mocks.mockResponse();\n            let req = await mocks.req()\n            req.body = labelIds;\n            await translationHandler.deleteLabels(req,mockRes);\n\t\t\tconst  deleted = mockRes.body;\n            expect(deleted).to.exist         \n            expect(deleted.deletedCount).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5cf11dfc-c586-47b5-8169-a560fd6e467d&quot;,&quot;parentUUID&quot;:&quot;3f57e260-500f-4625-852e-072e5e061d5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;save new labels from ui list&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  save new labels from ui list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let unsaved = [&#x27;label from test&#x27;]\nconst mockRes = await mocks.mockResponse();\nlet req = await mocks.req()\nreq.body = unsaved;\nawait translationHandler.saveNewDefaultLabels(req,mockRes);\nconst result = mockRes.body;\nexpect(result).to.exist         \nexpect(result.saved).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2a0173d-c018-4246-816c-a027fe2c03c3&quot;,&quot;parentUUID&quot;:&quot;3f57e260-500f-4625-852e-072e5e061d5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d02256bb-07e4-48ea-8665-ea190841fe9d&quot;,&quot;0ae0829c-f927-47db-9490-12550a11b5b1&quot;,&quot;74b46f81-54e5-415f-8468-59731738d356&quot;,&quot;0b31d9ce-b0b5-4207-98d1-99bf79ddacd6&quot;,&quot;ef79df62-d159-4689-8fb6-14fda30f7517&quot;,&quot;5cf11dfc-c586-47b5-8169-a560fd6e467d&quot;,&quot;a2a0173d-c018-4246-816c-a027fe2c03c3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b52c88c3-62c8-459f-a882-92f54ef4954e&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5cfaab62-f272-4c65-a1d4-1d0043bf6e7c&quot;,&quot;title&quot;:&quot;api-user Group Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:447,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nsession = { tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase() }; // system level\ntenantId = config.tenantOne.tenantId;\nfor (i = 1; i &lt;= 10; i++) {\n  const groupController = new GroupController(session);\n  const result = await groupController.addGroup({ groupName: `Test Automation Group ${i}` });\n  testGroups.push(result);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1bde1d8-786b-48b7-8de7-ee4f74c8c701&quot;,&quot;parentUUID&quot;:&quot;5cfaab62-f272-4c65-a1d4-1d0043bf6e7c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:57,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// clean up our test data\nconst Group = await models.getModel(config.tenantOne.tenantId, &#x27;Group&#x27;);\nconst ContactGroup = await models.getModel(config.tenantOne.tenantId, &#x27;ContactGroup&#x27;);\nawait Promise.all(testGroups.map(async (group) =&gt; {\n  await Group.query().hardDelete(group);\n  await ContactGroup.query()\n    .where(&#x27;groupGuid&#x27;, group.groupGuid)\n    .delete();\n}));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;697f302a-2f58-46b9-a57f-a0f81345c1db&quot;,&quot;parentUUID&quot;:&quot;5cfaab62-f272-4c65-a1d4-1d0043bf6e7c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ac1a75e9-36ad-4d1a-b281-d429a7a200c0&quot;,&quot;title&quot;:&quot;get tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;retrieves a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests get tests retrieves a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Group = await models.getModel(config.tenantOne.tenantId, &#x27;Group&#x27;);\nconst groups = await Group.query().where(&#x27;group_name&#x27;, &#x27;=&#x27;, &#x27;Administrators&#x27;);\nexpect(groups.length).to.equal(1);\nadminGroupGuid = groups[0].groupGuid;\nconst groupController = new GroupController(config.tenantOne);\nconst adminGroup = await groupController.getGroup(adminGroupGuid);\nexpect(adminGroup).to.exist;\nexpect(adminGroup.groupName).to.equal(&#x27;Administrators&#x27;);\nexpect(adminGroup.groupDesc).to.equal(&#x27;System administrators&#x27;);\nexpect(adminGroup.groupSql).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3b2be4e-3c57-499f-b68f-9a1fa8c2db2b&quot;,&quot;parentUUID&quot;:&quot;ac1a75e9-36ad-4d1a-b281-d429a7a200c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retrieves all groups by default&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests get tests retrieves all groups by default&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Group = await models.getModel(config.tenantOne.tenantId, &#x27;Group&#x27;);\nconst groupController = new GroupController(config.tenantOne);\nconst response = await groupController.getGroups();\nconst groups = response.results;\nexpect(groups.length).to.be.above(10);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1a0bab6-fd68-4d70-ba82-761fb83ac8a6&quot;,&quot;parentUUID&quot;:&quot;ac1a75e9-36ad-4d1a-b281-d429a7a200c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retrieves filtered list of groups&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests get tests retrieves filtered list of groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Group = await models.getModel(config.tenantOne.tenantId, &#x27;Group&#x27;);\nconst groupController = new GroupController(config.tenantOne);\nconst response = await groupController.getGroups({ search: &#x27;Test Automation Group&#x27;, count: 4 });\nconst groups = response.results;\nexpect(groups.length).to.equal(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a48171f7-1e89-4c74-8042-e4b78e69bf5e&quot;,&quot;parentUUID&quot;:&quot;ac1a75e9-36ad-4d1a-b281-d429a7a200c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retrieves all possible members for adding to groups&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests get tests retrieves all possible members for adding to groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Group = await models.getModel(config.tenantOne.tenantId, &#x27;Group&#x27;);\nconst groupController = new GroupController(config.tenantOne);\nconst group = testGroups[9];\nconst response = await groupController.getNonMembers(group.groupGuid);\nconst results = response.results;\nexpect(results.length).to.be.equal(response.total);\n// empty group, so test a sampling of accounts that should be non-members\nexpect(results).to.include.deep({ memberGuid: \&quot;A03BDD24-A0BA-4071-9A5B-2833C865EC3D\&quot;,\n                                  memberId: 1,\n                                  memberName: \&quot;Administrators\&quot;,\n                                  memberType: \&quot;Group\&quot;\n                                })\nexpect(results).to.include.deep({ memberGuid: testGroups[8].groupGuid.toUpperCase(),\n                                  memberId: testGroups[8].groupId,\n                                  memberName: testGroups[8].groupName,\n                                  memberType: \&quot;Group\&quot;\n                                })\nexpect(results).to.include.deep({ memberGuid: &#x27;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF&#x27;,\n                                  memberId: 1,\n                                  memberName: &#x27;System System&#x27;,\n                                  memberType: &#x27;User&#x27;\n                                })\n// two system accounts that should not be returned, plus the group itself\nexpect(results).to.not.include.deep({ memberGuid: &#x27;D8C469C3-F781-4179-A09C-6D148885FB30&#x27;,\n                                               memberId: 92,\n                                               memberName: \&quot;Integrify System\&quot;,\n                                               memberType: \&quot;User\&quot;\n                                             })\nexpect(results).to.not.include.deep({ memberGuid: &#x27;64EC8FC9-B426-4376-A1A4-3AD16F0F9906&#x27;,\n                                               memberId: 96,\n                                               memberName: \&quot;Guest Account\&quot;,\n                                               memberType: \&quot;User\&quot;\n                                             })\nexpect(results).to.not.include.deep({ memberGuid: testGroups[9].groupGuid.toUpperCase(),\n                                           memberId: testGroups[9].groupId,\n                                           memberName: testGroups[9].groupName,\n                                           memberType: \&quot;Group\&quot;\n                                         })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e46c3d78-1fc9-40aa-977c-a18fcab925f0&quot;,&quot;parentUUID&quot;:&quot;ac1a75e9-36ad-4d1a-b281-d429a7a200c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c3b2be4e-3c57-499f-b68f-9a1fa8c2db2b&quot;,&quot;e1a0bab6-fd68-4d70-ba82-761fb83ac8a6&quot;,&quot;a48171f7-1e89-4c74-8042-e4b78e69bf5e&quot;,&quot;e46c3d78-1fc9-40aa-977c-a18fcab925f0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:90,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;aa4c806a-7c45-47f0-8236-508837f10f4b&quot;,&quot;title&quot;:&quot;insert tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;inserts a non-dynamic group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests inserts a non-dynamic group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;Test Group (simple)&#x27;;\nconst groupDesc = &#x27;Simple test group&#x27;;\nconst groupData = {\n  groupName,\n  groupDesc,\n};\nconst groupController = new GroupController(session);\nconst result = await groupController.addGroup(groupData);\nexpect(result.groupName).to.equal(groupName);\nexpect(result.groupDesc).to.equal(groupDesc);\nexpect(result.dynamic).to.equal(&#x27;No&#x27;); // ensure defaulting to \&quot;No\&quot; rather than null\nexpect(result.createdBy).to.equal(session.user_sid);\ntestGroups.push(result); // for cleanup at end&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18b31120-6e60-4dea-a11b-0329854f25ab&quot;,&quot;parentUUID&quot;:&quot;aa4c806a-7c45-47f0-8236-508837f10f4b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;inserts a dynamic group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests inserts a dynamic group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;Test Group (simple)&#x27;;\nconst groupDesc = &#x27;Simple test group&#x27;;\nconst groupData = {\n  groupName,\n  groupDesc,\n  dynamic: &#x27;Yes&#x27;,\n  groupSql: \&quot;first_name = &#x27;Admin&#x27;\&quot;,\n};\nconst groupController = new GroupController(session);\nconst result = await groupController.addGroup(groupData);\nexpect(result.groupName).to.equal(groupName);\nexpect(result.groupDesc).to.equal(groupDesc);\nexpect(result.createdBy).to.equal(session.user_sid);\ntestGroups.push(result); // for cleanup at end&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b5630b7-0fbb-4ef5-8862-c01c1330c7d2&quot;,&quot;parentUUID&quot;:&quot;aa4c806a-7c45-47f0-8236-508837f10f4b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects a dynamic group with bad SQL&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests rejects a dynamic group with bad SQL&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;Test Group (simple)&#x27;;\nconst groupDesc = &#x27;Simple test group&#x27;;\nconst groupData = {\n  groupName,\n  groupDesc,\n  dynamic: &#x27;Yes&#x27;,\n  groupSql: \&quot;bad_column_name = &#x27;Admin&#x27;\&quot;,\n};\nconst groupController = new GroupController(session);\nawait expect(groupController.addGroup(groupData)).to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;163e0f03-3319-4f23-afdf-ddb14412c01e&quot;,&quot;parentUUID&quot;:&quot;aa4c806a-7c45-47f0-8236-508837f10f4b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects a group with no name&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests rejects a group with no name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nawait expect(groupController.addGroup({ groupDesc: &#x27;Test Group&#x27; })).to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;087c454a-ab6c-471f-b54a-7ec469a9d179&quot;,&quot;parentUUID&quot;:&quot;aa4c806a-7c45-47f0-8236-508837f10f4b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects a dynamic group with no SQL&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests rejects a dynamic group with no SQL&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupData = {\n  groupName: &#x27;Dynamic Test Group&#x27;,\n  dynamic: &#x27;Yes&#x27;,\n};\nconst groupController = new GroupController(session);\nawait expect(groupController.addGroup(groupData)).to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22f047ee-5d9b-456a-98d2-18c270a4f86f&quot;,&quot;parentUUID&quot;:&quot;aa4c806a-7c45-47f0-8236-508837f10f4b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;18b31120-6e60-4dea-a11b-0329854f25ab&quot;,&quot;1b5630b7-0fbb-4ef5-8862-c01c1330c7d2&quot;,&quot;163e0f03-3319-4f23-afdf-ddb14412c01e&quot;,&quot;087c454a-ab6c-471f-b54a-7ec469a9d179&quot;,&quot;22f047ee-5d9b-456a-98d2-18c270a4f86f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:55,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;b73b317b-8a25-494a-82ea-aec342627f15&quot;,&quot;title&quot;:&quot;update tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests update tests updates a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[0];\nconst result = await groupController.updateGroup({\n  groupGuid: group.groupGuid,\n  groupName: &#x27;Updated Test Automation Group&#x27;,\n  dynamic: &#x27;Yes&#x27;,\n  groupSql: \&quot;first_name = &#x27;Admin&#x27;\&quot;,\n});\nexpect(result.groupName).to.equal(&#x27;Updated Test Automation Group&#x27;);\nexpect(result.dynamic).to.equal(&#x27;Yes&#x27;);\nexpect(result.groupSql).to.equal(\&quot;first_name = &#x27;Admin&#x27;\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ffd0edfc-1c66-48cb-a2f0-0c3f4fbad763&quot;,&quot;parentUUID&quot;:&quot;b73b317b-8a25-494a-82ea-aec342627f15&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects an update with no group name&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests update tests rejects an update with no group name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[0];\nawait expect(groupController\n  .updateGroup({\n    groupGuid: group.groupGuid,\n    groupName: &#x27;&#x27;,\n  }))\n  .to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d943f4fe-22e4-4a36-b3cf-de5b76da5d8b&quot;,&quot;parentUUID&quot;:&quot;b73b317b-8a25-494a-82ea-aec342627f15&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects an update for dynamic without sql&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests update tests rejects an update for dynamic without sql&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[0];\nawait expect(groupController\n  .updateGroup({\n    groupGuid: group.groupGuid,\n    groupName: &#x27;Validation test&#x27;,\n    dynamic: &#x27;Yes&#x27;,\n    groupSql: &#x27;&#x27;,\n  }))\n  .to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;096c2aa8-c6b2-4029-9866-89284d2806ff&quot;,&quot;parentUUID&quot;:&quot;b73b317b-8a25-494a-82ea-aec342627f15&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects an update for dynamic other than Yes/No&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests update tests rejects an update for dynamic other than Yes/No&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[0];\nawait expect(groupController\n  .updateGroup({\n    groupGuid: group.groupGuid,\n    groupName: &#x27;Validation test&#x27;,\n    dynamic: true,\n    groupSql: \&quot;name = &#x27;Admin&#x27;\&quot;,\n  }))\n  .to.be.rejectedWith(Error);\nawait expect(groupController\n  .updateGroup({\n    groupGuid: group.groupGuid,\n    groupName: &#x27;Validation test&#x27;,\n    dynamic: &#x27;yes&#x27;,\n    groupSql: \&quot;name = &#x27;Admin&#x27;\&quot;,\n  }))\n  .to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c3938ab-e7d7-4a04-af5e-21b18f8557cc&quot;,&quot;parentUUID&quot;:&quot;b73b317b-8a25-494a-82ea-aec342627f15&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ffd0edfc-1c66-48cb-a2f0-0c3f4fbad763&quot;,&quot;d943f4fe-22e4-4a36-b3cf-de5b76da5d8b&quot;,&quot;096c2aa8-c6b2-4029-9866-89284d2806ff&quot;,&quot;0c3938ab-e7d7-4a04-af5e-21b18f8557cc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;3a3168be-5adf-4684-901f-d158e45b20f0&quot;,&quot;title&quot;:&quot;delete tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;soft deletes a list of groups&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests delete tests soft deletes a list of groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:30,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst timeBeforeDelete = Date.now();\nconst firstGroup = testGroups[0];\nconst response = await groupController.deleteGroups(testGroups.slice(0, 5).map((group) =&gt; group.groupGuid));\nexpect(response).to.eql([1, 1, 1, 1, 1]);\nconst deletedGroup = groupController.getGroup(firstGroup.groupGuid);\nexpect(deletedGroup).to.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6443a673-f902-47bc-b67a-fb4851ebaa99&quot;,&quot;parentUUID&quot;:&quot;3a3168be-5adf-4684-901f-d158e45b20f0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6443a673-f902-47bc-b67a-fb4851ebaa99&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:30,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;b8acecbe-ae62-4b85-ae0b-0e49c6c88023&quot;,&quot;title&quot;:&quot;membership test&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;adds a user to a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test adds a user to a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[9]; // 0-4 get deleted in a previous test\nres = await groupController.getMembers(group.groupGuid);\nexpect(res.results.length).to.equal(0); // make sure group starts empty\nlet result = await groupController.addMembersToGroup({\n  groupGuid: group.groupGuid,\n  members: [{\n    memberGuid: session.user_sid,\n    memberType: &#x27;User&#x27;,\n  },\n  ],\n});\nexpect(result).to.not.be.undefined;\nres = await groupController.getMembers(group.groupGuid);\nresult = res.results;\nexpect(result.length).to.equal(1);\nexpect(result[0].memberGuid.toLowerCase()).to.equal(session.user_sid);\nexpect(result[0].groupGuid.toLowerCase()).to.equal(group.groupGuid);\nexpect(result[0].memberType).to.equal(&#x27;User&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09c07f9f-4114-4264-851b-b145dddbd9a3&quot;,&quot;parentUUID&quot;:&quot;b8acecbe-ae62-4b85-ae0b-0e49c6c88023&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;removes members from a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test removes members from a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[9];\nres = await groupController.getMembers(group.groupGuid);\nexpect(res.results.length).to.equal(1); // should have 1 member from preceding addUser test\nlet result = await groupController.removeMembersFromGroup({\n  groupGuid: group.groupGuid,\n  members: [session.user_sid],\n});\nexpect(result).to.equal(1);\nres = await groupController.getMembers(group.groupGuid);\nresult = res.results;\nexpect(result.length).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7255c788-44e3-4737-92e8-9788c7501fff&quot;,&quot;parentUUID&quot;:&quot;b8acecbe-ae62-4b85-ae0b-0e49c6c88023&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;lists members of a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test lists members of a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst usersGroupGuid = &#x27;eab8a4c9-6903-40bc-a2ee-cf254a408d6f&#x27;;\nconst res = await groupController.getMembers(usersGroupGuid);\nexpect(res.results.length).to.be.at.least(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c143c80a-3cb5-4622-afad-88cc64342743&quot;,&quot;parentUUID&quot;:&quot;b8acecbe-ae62-4b85-ae0b-0e49c6c88023&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;filters members of a group based on search string&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test filters members of a group based on search string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst usersGroupGuid = &#x27;eab8a4c9-6903-40bc-a2ee-cf254a408d6f&#x27;;\nconst res = await groupController.getMembers(usersGroupGuid, { search: &#x27;no-reply@integrify.com&#x27; });\nexpect(res.results.length).to.equal(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5c922d8-0231-437a-91b5-da680c52bd4a&quot;,&quot;parentUUID&quot;:&quot;b8acecbe-ae62-4b85-ae0b-0e49c6c88023&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits result members of a group based start/count&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits result members of a group based start/count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst usersGroupGuid = &#x27;eab8a4c9-6903-40bc-a2ee-cf254a408d6f&#x27;;\nlet res = await groupController.getMembers(usersGroupGuid);\nconst groupSize = res.results.length;\nexpect(groupSize).to.equal(res.total);\nres = await groupController.getMembers(usersGroupGuid, { count: 1 });\nexpect(res.results.length).to.equal(1);\nexpect(res.total).to.equal(groupSize);\nres = await groupController.getMembers(usersGroupGuid, { start: 1 });\nexpect(res.results.length).to.equal(groupSize - 1);\nexpect(res.total).to.equal(groupSize);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21e6186d-17ad-4b04-b182-7dbfb80fd0d1&quot;,&quot;parentUUID&quot;:&quot;b8acecbe-ae62-4b85-ae0b-0e49c6c88023&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits nonmembers to users only&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits nonmembers to users only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst adminGroupGuid = &#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;;\nconst res = await groupController.getNonMembers(adminGroupGuid, { users: &#x27;true&#x27;, groups: &#x27;false&#x27; });\nres.results.forEach((groupMember) =&gt; expect(groupMember.memberType).to.equal(&#x27;User&#x27;));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9df11c4a-e6ac-44ef-828c-4184df5f31ba&quot;,&quot;parentUUID&quot;:&quot;b8acecbe-ae62-4b85-ae0b-0e49c6c88023&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits nonmembers to groups only&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits nonmembers to groups only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst adminGroupGuid = &#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;;\nconst res = await groupController.getNonMembers(adminGroupGuid, { users: &#x27;false&#x27;, groups: &#x27;true&#x27; });\nres.results.forEach((groupMember) =&gt; expect(groupMember.memberType).to.equal(&#x27;Group&#x27;));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f1a570f-2042-4bc4-ba39-5bffc5bd85ae&quot;,&quot;parentUUID&quot;:&quot;b8acecbe-ae62-4b85-ae0b-0e49c6c88023&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retrieves groups a user belongs to&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test retrieves groups a user belongs to&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst userGuid = &#x27;4e99e0dd-b3b3-4d5d-826d-3d5ae62a16cf&#x27;;\nconst res = await groupController.getUserGroups(userGuid);\nexpect(res.results.find((result) =&gt; result.groupName == &#x27;Administrators&#x27;)).to.not.be.undefined;\nexpect(res.results.find((result) =&gt; result.groupDesc == &#x27;All users&#x27;)).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ad1ae37-3f24-4947-9082-a96de59bafd8&quot;,&quot;parentUUID&quot;:&quot;b8acecbe-ae62-4b85-ae0b-0e49c6c88023&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits resulting nonmembers based on start/count&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits resulting nonmembers based on start/count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const group = testGroups[9];\nconst groupController = new GroupController(session);\nlet res = await groupController.getNonMembers(group.groupGuid);\nconst availableSize = res.results.length;\nexpect(availableSize).to.equal(res.total);\nres = await groupController.getNonMembers(group.groupGuid, { count: 1 });\nexpect(res.results.length).to.equal(1);\nexpect(res.total).to.equal(availableSize);\nres = await groupController.getNonMembers(group.groupGuid, { start: 0, count: 5 });\nexpect(res.results.length).to.equal(5);\nexpect(res.total).to.equal(availableSize);\nres = await groupController.getNonMembers(group.groupGuid, { start: 1, count: 5 });\nexpect(res.results.length).to.equal(5);\nexpect(res.total).to.equal(availableSize);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44a89cf2-0fca-46e2-8c38-20421ec358cc&quot;,&quot;parentUUID&quot;:&quot;b8acecbe-ae62-4b85-ae0b-0e49c6c88023&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits resulting nonmembers based on search string&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits resulting nonmembers based on search string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const group = testGroups[9];\nconst groupController = new GroupController(session);\nlet res = await groupController.getNonMembers(group.groupGuid);\nconst availableSize = res.results.length;\nexpect(availableSize).to.equal(res.total);\nres = await groupController.getNonMembers(group.groupGuid, { search: &#x27;System&#x27; });\nconst { results } = res;\nexpect(results).to.eql([{\n  memberGuid: &#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;,\n  memberName: &#x27;Administrators&#x27;,\n  memberType: &#x27;Group&#x27;,\n  memberId: 1,\n},\n{\n  memberGuid: &#x27;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF&#x27;,\n  memberId: 1,\n  memberName: &#x27;System System&#x27;,\n  memberType: &#x27;User&#x27;,\n},\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85ef28a5-dc62-4dbe-8954-57bdbfecf9b6&quot;,&quot;parentUUID&quot;:&quot;b8acecbe-ae62-4b85-ae0b-0e49c6c88023&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;lists members of a dynamic group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test lists members of a dynamic group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst allUsersGroupGuid = &#x27;eab8a4c9-6903-40bc-a2ee-cf254a408d6f&#x27;;\nconst result = await groupController.getMembers(allUsersGroupGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d592d042-4164-47cd-9580-fba64425c238&quot;,&quot;parentUUID&quot;:&quot;b8acecbe-ae62-4b85-ae0b-0e49c6c88023&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;lists all members of a group containing groups&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test lists all members of a group containing groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23698cf5-7e1d-4038-8a22-ad9b0bb6c312&quot;,&quot;parentUUID&quot;:&quot;b8acecbe-ae62-4b85-ae0b-0e49c6c88023&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;09c07f9f-4114-4264-851b-b145dddbd9a3&quot;,&quot;7255c788-44e3-4737-92e8-9788c7501fff&quot;,&quot;c143c80a-3cb5-4622-afad-88cc64342743&quot;,&quot;b5c922d8-0231-437a-91b5-da680c52bd4a&quot;,&quot;21e6186d-17ad-4b04-b182-7dbfb80fd0d1&quot;,&quot;9df11c4a-e6ac-44ef-828c-4184df5f31ba&quot;,&quot;2f1a570f-2042-4bc4-ba39-5bffc5bd85ae&quot;,&quot;5ad1ae37-3f24-4947-9082-a96de59bafd8&quot;,&quot;44a89cf2-0fca-46e2-8c38-20421ec358cc&quot;,&quot;85ef28a5-dc62-4dbe-8954-57bdbfecf9b6&quot;,&quot;d592d042-4164-47cd-9580-fba64425c238&quot;,&quot;23698cf5-7e1d-4038-8a22-ad9b0bb6c312&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:177,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;db32d0e5-6511-47b3-8379-e3979c0f00f2&quot;,&quot;title&quot;:&quot;association tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;list processes associated to a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests association tests list processes associated to a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst res = await groupController.getProcessAssociations(&#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;);\nexpect(res.length).to.equal(47);\n// should not include categoryLevel by default\nexpect(res[0]).to.have.keys(&#x27;processGuid&#x27;, &#x27;processName&#x27;, &#x27;processVersion&#x27;, &#x27;taskName&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb5a6776-3850-471f-bd43-aecfa60255ff&quot;,&quot;parentUUID&quot;:&quot;db32d0e5-6511-47b3-8379-e3979c0f00f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;list processes associated to a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests association tests list processes associated to a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:66,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst res = await groupController.getProcessAssociations(&#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;, { include: [&#x27;category&#x27;] });\nexpect(res[0]).to.have.keys(&#x27;processGuid&#x27;, &#x27;processName&#x27;, &#x27;processVersion&#x27;, &#x27;taskName&#x27;, &#x27;categoryLevel&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;440bd297-aa6e-46a4-9b2a-886a429ee5c0&quot;,&quot;parentUUID&quot;:&quot;db32d0e5-6511-47b3-8379-e3979c0f00f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;list roles associated to a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests association tests list roles associated to a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst res = await groupController.getRoleAssociations(&#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;);\nexpect(res.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ff114a4-1fc2-471f-9b50-5aeb0682b060&quot;,&quot;parentUUID&quot;:&quot;db32d0e5-6511-47b3-8379-e3979c0f00f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bb5a6776-3850-471f-bd43-aecfa60255ff&quot;,&quot;440bd297-aa6e-46a4-9b2a-886a429ee5c0&quot;,&quot;2ff114a4-1fc2-471f-9b50-5aeb0682b060&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:86,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;6dee58ab-2d5a-4181-be71-4958297d871c&quot;,&quot;title&quot;:&quot;api-user User Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-user/test/db/userController.test.js&quot;,&quot;file&quot;:&quot;/test/db/userController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:964,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\ntenantId = config.tenantOne.tenantId;\nsession = {tenant: tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()};\nUser = await models.getModel(tenantId, &#x27;User&#x27;);\nMetadataValue = await models.getModel(tenantId, &#x27;MetadataValue&#x27;);\nUserAuth = await models.getModel(tenantId, &#x27;UserAuth&#x27;);\n// add user\nuserCtrl = new UserController(session);\nfor (let i=1; i&lt;=limit; i++) {\n  const user = {\n    firstName: &#x27;test first name&#x27; + i,\n    lastName: &#x27;last&#x27; + i,\n    userName: &#x27;test_username&#x27; + i,\n    email: `test${i}@test.test${i}`,\n    locale: &#x27;en-US&#x27;,\n    languageGuid: &#x27;2a803d80-de6d-4adc-a642-4e3d831f5460&#x27;, // US English\n    password: testPwd,\n    confirmPassword: testPwd,\n    title: &#x27;title&#x27; + i\n  };\n  const dbUser = await userCtrl.insertUser(user)\n  testUsers.push(dbUser);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24f1e0f9-779c-4d79-844a-8694c11c0d4a&quot;,&quot;parentUUID&quot;:&quot;6dee58ab-2d5a-4181-be71-4958297d871c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:66,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await Promise.all( testUsers.map( async (user) =&gt; {\n  return UserAuth.query().deleteById(user.contactGuid);\n}));\nawait User.query().delete().where(&#x27;firstName&#x27;, &#x27;like&#x27;, &#x27;test first%&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cabf888b-f095-40d1-96d3-b88b8fdd8e0e&quot;,&quot;parentUUID&quot;:&quot;6dee58ab-2d5a-4181-be71-4958297d871c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should retrieves users&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should retrieves users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const User = await models.getModel(tenantId, &#x27;User&#x27;);\nconst UserAuth = await models.getModel(tenantId, &#x27;UserAuth&#x27;);\nconst users = await User.query()\n  .orderBy(&#x27;createdDate&#x27;, &#x27;desc&#x27;)\n  .limit(limit);\nawait Promise.all(users.map(async user =&gt; {\n  const result = await userCtrl.getUser(user.contactGuid);\n  const {userName, managerGuid, ...userToCompare1} = result;\n  user.languageGuid = user.languageGuid.toLowerCase() // &#x27;user&#x27; from Database query has \&quot;upper case\&quot; language guid - but userToCompare1 from API should be in lower case\n  user.contactGuid = user.contactGuid.toLowerCase()\n  user.createdBy = user.createdBy.toLowerCase()\n  expect(userToCompare1).to.deep.eq(user);\n  // compare testUser to user\n  const testUser = testUsers.find(u =&gt; u.contactGuid === user.contactGuid);\n  [&#x27;firstName&#x27;, &#x27;lastName&#x27;, &#x27;email&#x27;, &#x27;locale&#x27;, &#x27;languageGuid&#x27;, &#x27;contactId&#x27;, &#x27;title&#x27;].forEach(p =&gt; {\n    expect(testUser[p]).to.eq(user[p]);\n  });\n  // check userNames\n  const userAuth = await UserAuth.query()\n    .findById(user.contactGuid);\n  expect(userAuth).to.exist;\n  expect(userAuth.userName).to.eq(testUser.userName);\n}));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc3fb6c3-d276-4290-8e93-bcc0b274b71f&quot;,&quot;parentUUID&quot;:&quot;6dee58ab-2d5a-4181-be71-4958297d871c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should search in users&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should search in users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:54,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testUser = testUsers[0];\n// search by id\nlet result = await userCtrl.getUsers({search: testUser.contactId});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.eq(1);\n// search by username\nresult = await userCtrl.getUsers({search: testUser.userName});\nexpect(result.results.length).to.be.gt(0);\nlet found = result.results.find(u =&gt; u.userName = testUser.userName);\nexpect(found).to.exist;\n// search by first &amp; last names\nresult = await userCtrl.getUsers({search: testUser.firstName.slice(0, -2)});\nexpect(result.results.length).to.be.gt(0);\nfound = result.results.find(u =&gt; u.first === testUser.first);\nexpect(found).to.exist;\nresult = await userCtrl.getUsers({search: testUser.lastName.slice(0, -1)});\nexpect(result.results.length).to.be.gt(0);\nfound = result.results.find(u =&gt; u.lastName === testUser.lastName);\nexpect(found).to.exist;\n// search by email\nresult = await userCtrl.getUsers({search: testUser.email.slice(-10)});\nexpect(result.results.length).to.be.gt(0);\nfound = result.results.find(u =&gt; u.email === testUser.email);\nexpect(found).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;824ddf66-c04c-4075-a178-f222994cd362&quot;,&quot;parentUUID&quot;:&quot;6dee58ab-2d5a-4181-be71-4958297d871c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should limit results&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should limit results&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const result = await userCtrl.getUsers({count: 4});\nexpect(result.results.length).to.eq(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;048b9b67-3cf9-42db-a526-c0f460267961&quot;,&quot;parentUUID&quot;:&quot;6dee58ab-2d5a-4181-be71-4958297d871c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should retrieve filtered users &quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should retrieve filtered users &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testUser = testUsers[0];\nconst user = await userCtrl.getUser(testUser.contactGuid);\nconst filters = [\n  {\n    field: &#x27;lastName&#x27;,\n    data: {comparison: &#x27;eq&#x27;, type: &#x27;string&#x27;, value: user.lastName,}\n  },\n  {\n    field: &#x27;firstName&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.firstName}\n  },\n  {\n    field: &#x27;userName&#x27;,\n    data: {comparison: &#x27;eq&#x27;, value: user.userName}\n  },\n  {\n    field: &#x27;email&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.email}\n  },\n  {\n    field: &#x27;title&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.title}\n  },\n  {\n    field: &#x27;constCenter&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.constCenter}\n  },\n  {\n    field: &#x27;country&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.country}\n  },\n  {\n    field: &#x27;department&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.department}\n  },\n  {\n    field: &#x27;managerName&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.managerName}\n  },\n  {\n    field: &#x27;managerGuid&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.managerGuid}\n  },\n];\nconst result = await userCtrl.getUsers({filters});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\nconst found = result.results.find(u =&gt; u.contactGuid === testUser.contactGuid);\nexpect(found).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;51117097-8cfd-402a-91c0-61d87b5f5be4&quot;,&quot;parentUUID&quot;:&quot;6dee58ab-2d5a-4181-be71-4958297d871c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a list of managers&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should get a list of managers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const exceptGuid = testUsers[0].contactGuid;\nconst managers = await userCtrl.getManagers({exceptGuid});\nmanagers.forEach(manager =&gt; {\n  expect(manager.contactGuid).to.not.eq(exceptGuid);\n});\ntestUsers.filter(u =&gt; u.contactGuid !== exceptGuid).forEach(u =&gt; {\n  const manager = managers.find(m =&gt; m.contactGuid === u.contactGuid);\n  const {contactGuid, firstName, lastName, email, title} = u;\n  const testUser = {contactGuid, firstName, lastName, email, title};\n  expect(manager).to.deep.eq(testUser);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e99fceff-3022-45d2-84dc-d0a157447a48&quot;,&quot;parentUUID&quot;:&quot;6dee58ab-2d5a-4181-be71-4958297d871c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a single user&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should get a single user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testUser = testUsers[3];\nconst user = await userCtrl.getUser(testUser.contactGuid);\nexpect(user).to.exist;\n[&#x27;contactGuid&#x27;, &#x27;contactId&#x27;, &#x27;firstName&#x27;, &#x27;lastName&#x27;, &#x27;userName&#x27;, &#x27;email&#x27;, &#x27;locale&#x27;, &#x27;languageGuid&#x27;, &#x27;title&#x27;].forEach(p =&gt; {\n  expect(user[p]).to.eq(testUser[p]);\n});\n[&#x27;middleName&#x27;, &#x27;phone&#x27;, &#x27;address1&#x27;, &#x27;address2&#x27;, &#x27;city&#x27;, &#x27;state&#x27;, &#x27;zip&#x27;, &#x27;country&#x27;,\n  &#x27;department&#x27;, &#x27;costCenter&#x27;, &#x27;division&#x27;, &#x27;managerGuid&#x27;, &#x27;cField1&#x27;, &#x27;cField2&#x27;].forEach(p =&gt; {\n  expect(!!user[p] || user[p] === null || user[p] === &#x27;&#x27;).to.eq(true);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d00b8b4-17d6-4c93-8254-5e80c501cd09&quot;,&quot;parentUUID&quot;:&quot;6dee58ab-2d5a-4181-be71-4958297d871c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update and get delegate&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should update and get delegate&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:61,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// insert delegate\nconst testDelegate = {\n  contactGuid: testUsers[3].contactGuid,\n  processes: [{id: &#x27;a6714779-4bde-4000-8361-ad37c838d440&#x27;}, {id: &#x27;3545404d-6fff-4ed5-ba9a-1100ce38d421&#x27;}, {id: &#x27;cfc36de0-a71b-451f-817a-2092c3c247ca&#x27;}],\n  startDate: &#x27;2021-01-14&#x27;,\n  startTime: &#x27;06:00&#x27;,\n  endDate: &#x27;2021-01-15&#x27;,\n  endTime: &#x27;17:35&#x27;,\n};\nawait userCtrl.updateDelegate(testUsers[3].contactGuid, testDelegate);\n// get delegate\nlet delegate = await userCtrl.getDelegate(testDelegate.contactGuid);\n[&#x27;contactGuid&#x27;, &#x27;startDate&#x27;, &#x27;startTime&#x27;, &#x27;endDate&#x27;, &#x27;endTime&#x27;].forEach(p =&gt; {\n  expect(delegate[p]).to.exist;\n  expect(delegate[p]).to.eq(testDelegate[p]);\n})\nexpect(delegate.processes).to.exist;\nexpect(delegate.processes.length).to.eq(testDelegate.processes.length);\ntestDelegate.processes.forEach(p =&gt; {\n  const process = delegate.processes.find(dp =&gt; dp.id === p.id);\n  expect(process).to.exist;\n});\n// for user without delegate\ndelegate = await userCtrl.getDelegate(testUsers[1].contactGuid);\n[&#x27;contactGuid&#x27;, &#x27;startDate&#x27;, &#x27;startTime&#x27;, &#x27;endDate&#x27;, &#x27;endTime&#x27;].forEach(p =&gt; {\n  expect(delegate[p]).to.be.null;\n});\nexpect(delegate.processes.length).to.eq(0);\n// delete delegate\nawait MetadataValue.query()\n  .where(&#x27;ownerSid&#x27;, testDelegate.contactGuid)\n  .delete();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8bc8e29d-36a9-41c9-92c1-31274def2d30&quot;,&quot;parentUUID&quot;:&quot;6dee58ab-2d5a-4181-be71-4958297d871c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;password should be hashed&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests password should be hashed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const user = await UserAuth.query()\n  .findById(testUsers[0].contactGuid);\nexpect(user.password).to.not.eq(testPwd);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;33727df1-8067-4073-85f4-ddc5e349d281&quot;,&quot;parentUUID&quot;:&quot;6dee58ab-2d5a-4181-be71-4958297d871c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;user should be active (not deleted)&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests user should be active (not deleted)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const user = await User.query()\n  .findById(testUsers[0].contactGuid);\nexpect(user.deletedDate).to.be.null;\nexpect(user.deletedBy).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb8551f3-ec97-4758-8c31-9aa95da2dd05&quot;,&quot;parentUUID&quot;:&quot;6dee58ab-2d5a-4181-be71-4958297d871c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should convert user Guids&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should convert user Guids&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testUser = {\n  contactGuid: &#x27;SomeRandomString&#x27;,\n  managerGuid: &#x27;SomeRandomString&#x27;,\n  signatureGuid: &#x27;SomeRandomString&#x27;,\n  languageGuid: &#x27;SomeRandomString&#x27;,\n  createdBy: &#x27;SomeRandomString&#x27;,\n};\nconst convertedUser1 = userCtrl.convertUserGuids(testUser);\nconst convertedUser2 = userCtrl.convertUserGuids({contactGuid: testUser.contactGuid});\n[convertedUser1, convertedUser2].forEach(u =&gt; {\n  Object.keys(u).forEach(key =&gt; {\n    expect(u[key]).to.eq(u[key].toLowerCase());\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7647b98a-8425-4d36-b8b8-e0b5c1b142c2&quot;,&quot;parentUUID&quot;:&quot;6dee58ab-2d5a-4181-be71-4958297d871c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should check if username is taken&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should check if username is taken&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const userGuid = testUsers[0].contactGuid;\nconst username = testUsers[0].userName;\nlet isTaken = await userCtrl.isUserNameTaken(username);\nexpect(isTaken).to.be.true;\nisTaken = await userCtrl.isUserNameTaken(username.toUpperCase());\nexpect(isTaken).to.be.true;\n// with un-taken username\nisTaken = await userCtrl.isUserNameTaken(&#x27;someUnusedUsernameTest&#x27;);\nexpect(isTaken).to.be.false;\n// with Guid provided\nisTaken = await userCtrl.isUserNameTaken(username, userGuid);\nexpect(isTaken).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b74ea28f-fc10-4a62-ba3a-5e4125f1f7b7&quot;,&quot;parentUUID&quot;:&quot;6dee58ab-2d5a-4181-be71-4958297d871c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update user&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should update user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:102,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const userGuid = testUsers[3].contactGuid;\nconst data = {\n  firstName: &#x27;test first updated&#x27;,\n  middleName: &#x27;up mid name&#x27;,\n  lastName: &#x27;up last name&#x27;,\n  email: &#x27;updated@email.com&#x27;,\n  title: &#x27;updatedTitle&#x27;,\n  division: &#x27;up division&#x27;,\n  department: &#x27;upd department&#x27;,\n  costCenter: &#x27;upd cost center&#x27;,\n  location: &#x27;upd loc&#x27;,\n  phone: &#x27;094-242-5654 ext 4&#x27;,\n  managerGuid: testUsers[0].contactGuid,\n  address1: &#x27;654 Some ave&#x27;,\n  address2: &#x27;apt 589&#x27;,\n  city: &#x27;New London&#x27;,\n  state: &#x27;OR&#x27;,\n  zip: &#x27;98353&#x27;,\n  country: &#x27;USM&#x27;,\n  languageGuid: testUsers[0].languageGuid,\n  timezone: &#x27;PFT-09&#x27;,\n  locale: &#x27;en-US&#x27;,\n  cField1: &#x27;upd cust field 1&#x27;,\n  cField2: &#x27;upd cust field 2&#x27;,\n  active: false,\n  userName: &#x27;updatedUserName&#x27;,\n  password: &#x27;updatedPwd&#x27;,\n  signatureGuid: &#x27;36b65bca-140d-41b9-ac8b-89b50c86e7ba&#x27;\n};\n// get current password\nlet user = await UserAuth.query()\n  .findById(testUsers[3].contactGuid);\nconst previousPwd = user.password;\n// update\nuser = await userCtrl.updateUser(userGuid, data);\nconst {contactGuid, contactId, createdBy, createdDate, deletedBy, deletedDate, modifiedBy, modifiedDate, ntId, reportsToGuid, lastUpdate, ...updatedUser} = user;\nconst {password, active, ...testData} = data;\nexpect(updatedUser).to.deep.eq(testData);\n// should be inactive/deleted\nexpect(!!deletedBy).to.be.true;\nexpect(!!deletedDate).to.be.true;\n// should change the password\nuser = await UserAuth.query()\n  .findById(testUsers[3].contactGuid);\nconst updatedPwd = user.password;\nexpect(previousPwd).to.not.eq(updatedPwd);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6db7c492-d953-452c-979c-9902865a5a63&quot;,&quot;parentUUID&quot;:&quot;6dee58ab-2d5a-4181-be71-4958297d871c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fc3fb6c3-d276-4290-8e93-bcc0b274b71f&quot;,&quot;824ddf66-c04c-4075-a178-f222994cd362&quot;,&quot;048b9b67-3cf9-42db-a526-c0f460267961&quot;,&quot;51117097-8cfd-402a-91c0-61d87b5f5be4&quot;,&quot;e99fceff-3022-45d2-84dc-d0a157447a48&quot;,&quot;7d00b8b4-17d6-4c93-8254-5e80c501cd09&quot;,&quot;8bc8e29d-36a9-41c9-92c1-31274def2d30&quot;,&quot;33727df1-8067-4073-85f4-ddc5e349d281&quot;,&quot;cb8551f3-ec97-4758-8c31-9aa95da2dd05&quot;,&quot;7647b98a-8425-4d36-b8b8-e0b5c1b142c2&quot;,&quot;b74ea28f-fc10-4a62-ba3a-5e4125f1f7b7&quot;,&quot;6db7c492-d953-452c-979c-9902865a5a63&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:295,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;31a74de5-ce1b-4b3a-b1b1-1551508dce70&quot;,&quot;title&quot;:&quot;api-user Group Handler Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-user/test/groupHandler.test.js&quot;,&quot;file&quot;:&quot;/test/groupHandler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:95,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;testConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;\nconst userCtl = new UserController({tenantId: tenant})\nrestrictedUser = await userCtl.insertUser({firstName: &#x27;groups test&#x27;,\n                                           lastName: &#x27;groups test&#x27;,\n                                           userName: &#x27;restricted user for groups permission test&#x27;,\n                                           password: &#x27;password&#x27;})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7f9de4f-9a59-4c08-a97a-ec4552777905&quot;,&quot;parentUUID&quot;:&quot;31a74de5-ce1b-4b3a-b1b1-1551508dce70&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const User = await models.getModel(tenant, &#x27;User&#x27;);\nawait User.query().hardDelete(restrictedUser)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a22b1a0e-32f9-4570-93fa-f1914c507531&quot;,&quot;parentUUID&quot;:&quot;31a74de5-ce1b-4b3a-b1b1-1551508dce70&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b244b074-20f8-4adf-b7e5-1f28595c8c83&quot;,&quot;title&quot;:&quot;crud tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-user/test/groupHandler.test.js&quot;,&quot;file&quot;:&quot;/test/groupHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests crud tests should create a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;api-user group test&#x27;\nconst mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = { groupName: groupName,\n             groupDesc: &#x27;api-user group test description&#x27; }\nconst response = await handlers.addGroup(req,mockRes);\nconst group = response.body\nexpect(response.statusCode).to.equal(200)\nexpect(group.groupGuid).to.match(/([-\\w]+)/)\nexpect(group.groupName).to.equal(groupName);\n// cleanup\nreq.body = [group.groupGuid]\nconst foo = await handlers.deleteGroups(req, mockRes)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;313d271e-1bd1-4ac1-849b-a9b3837115ef&quot;,&quot;parentUUID&quot;:&quot;b244b074-20f8-4adf-b7e5-1f28595c8c83&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;313d271e-1bd1-4ac1-849b-a9b3837115ef&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:24,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;68b8d22a-add5-4a1b-beff-2c8404cd279b&quot;,&quot;title&quot;:&quot;permission tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-user/test/groupHandler.test.js&quot;,&quot;file&quot;:&quot;/test/groupHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;admin should have manage/edit permissions per group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests permission tests admin should have manage/edit permissions per group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.oauth.user_sid = testConfig.tenantOne.adminUser.sid;\nconst response = await handlers.getGroups(req,mockRes);\nconst groups = response.body.results;\ngroups.forEach( group =&gt; {\n  expect(group.canManage).to.equal(true);\n  expect(group.canEdit).to.equal(true);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd89f41a-2ff5-44b1-8119-d00315f59c93&quot;,&quot;parentUUID&quot;:&quot;68b8d22a-add5-4a1b-beff-2c8404cd279b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not have permission to create a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests permission tests should not have permission to create a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;api-user group test&#x27;\nconst mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.oauth.user_sid = restrictedUser.contactGuid;\nreq.body = { groupName: groupName,\n             groupDesc: &#x27;api-user group test description&#x27; }\nconst response = await handlers.addGroup(req,mockRes);\nexpect(response.statusCode).to.equal(403)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24828d39-b725-4f6e-8bc1-8cfe37eec691&quot;,&quot;parentUUID&quot;:&quot;68b8d22a-add5-4a1b-beff-2c8404cd279b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not have permission to list groups members&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests permission tests should not have permission to list groups members&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupCtl = new GroupController({tenantId: tenant})\nconst group = groupCtl.getGroups({count: 1})\nconst mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.oauth.user_sid = restrictedUser.contactGuid\nreq.params.groupGuid = group.groupGuid\nconst response = await handlers.getGroups(req,mockRes);\nexpect(response.statusCode).to.equal(403)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b87f464a-0925-40a4-aa6c-7c272f9f0c1b&quot;,&quot;parentUUID&quot;:&quot;68b8d22a-add5-4a1b-beff-2c8404cd279b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not have permission to delete a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests permission tests should not have permission to delete a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupCtl = new GroupController({tenantId: tenant})\nconst group = groupCtl.getGroups({count: 1})\nconst mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.oauth.user_sid = restrictedUser.contactGuid\nreq.params.body = [ group.groupGuid ]\nconst response = await handlers.deleteGroups(req,mockRes);\nexpect(response.statusCode).to.equal(403)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6aceaf6-54e2-40e6-85ee-17d14bc8242f&quot;,&quot;parentUUID&quot;:&quot;68b8d22a-add5-4a1b-beff-2c8404cd279b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bd89f41a-2ff5-44b1-8119-d00315f59c93&quot;,&quot;24828d39-b725-4f6e-8bc1-8cfe37eec691&quot;,&quot;b87f464a-0925-40a4-aa6c-7c272f9f0c1b&quot;,&quot;b6aceaf6-54e2-40e6-85ee-17d14bc8242f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:31,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;ec183684-aa76-480d-97ce-3c070a3501da&quot;,&quot;title&quot;:&quot;api-user User Handler Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/api-user/test/userHandler.test.js&quot;,&quot;file&quot;:&quot;/test/userHandler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;testConfig = await mocks.getTestConfig();\ntenantId = testConfig.tenantOne.tenantId;\nsession = {tenant: tenantId, user_sid: testConfig.tenantOne.adminUser.sid.toLowerCase()};\nUser = await models.getModel(tenantId, &#x27;User&#x27;);\nUserAuth = await models.getModel(tenantId, &#x27;UserAuth&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03b9416e-5f58-458f-9a02-8e8a3c436516&quot;,&quot;parentUUID&quot;:&quot;ec183684-aa76-480d-97ce-3c070a3501da&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;req = await mocks.req();\nmockRes = await mocks.mockResponse();\ntestUser = (await User.query().limit(1))[0];\ntestUser.userName  = (await UserAuth.query().select(&#x27;userName&#x27;).where(&#x27;contactGuid&#x27;, testUser.contactGuid))[0].userName;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a342723d-4819-497c-9902-c10fbf66dc3f&quot;,&quot;parentUUID&quot;:&quot;ec183684-aa76-480d-97ce-3c070a3501da&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:46,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await UserAuth.query().delete().where(&#x27;userName&#x27;, &#x27;like&#x27;, &#x27;user_to_delete%&#x27;);\nawait User.query().delete().where(&#x27;firstName&#x27;, &#x27;like&#x27;, &#x27;user_to_delete%&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f06c81ad-063f-492d-91db-c429ee08d338&quot;,&quot;parentUUID&quot;:&quot;ec183684-aa76-480d-97ce-3c070a3501da&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a list of users&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should get a list of users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const response = await handlers.getUsers(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body).to.exist;\nexpect(response.body.results).to.exist;\nexpect(response.body.results.length).to.be.gt(0);\nexpect(response.body.total).to.exist;\nexpect(response.body.total).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd97f1e5-8052-44fe-b0bd-8ba91db140d6&quot;,&quot;parentUUID&quot;:&quot;ec183684-aa76-480d-97ce-3c070a3501da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a list of managers&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should return a list of managers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const response = await handlers.getManagers(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body).to.exist;\nexpect(response.body.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1f0a142-3487-468c-b1d4-0b77996959c1&quot;,&quot;parentUUID&quot;:&quot;ec183684-aa76-480d-97ce-3c070a3501da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get single user&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should get single user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;req.params.userGuid = testUser.contactGuid;\nconst response = await handlers.getUser(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body).to.exist;\nexpect(response.body.contactGuid).to.exist;\nexpect(response.body.firstName).to.exist;\nexpect(response.body.delegate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64050de6-09d2-48bc-b4ea-c4aea4883a0a&quot;,&quot;parentUUID&quot;:&quot;ec183684-aa76-480d-97ce-3c070a3501da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should check if userName is taken&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should check if userName is taken&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;req.query.userName = testUser.userName;\nreq.query.userGuid = testUser.contactGuid;\nconst response = await handlers.checkIfUserNameIsTaken(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body).to.exist;\nexpect(response.body.isTaken).to.exist;\nexpect(response.body.isTaken).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94eb2faa-56ed-4af8-baf2-508f684457a9&quot;,&quot;parentUUID&quot;:&quot;ec183684-aa76-480d-97ce-3c070a3501da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not insert user without data&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should not insert user without data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const response = await handlers.insertUser(req, mockRes);\nexpect(response.statusCode).to.eq(400);\nexpect(response.body.firstName).to.exist;\nexpect(response.body.firstName).to.deep.eq([&#x27;The firstName field is required.&#x27;]);\nexpect(response.body.lastName).to.exist;\nexpect(response.body.password).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9f5414d-062d-4e6a-ac0a-702e1a90af37&quot;,&quot;parentUUID&quot;:&quot;ec183684-aa76-480d-97ce-3c070a3501da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert user&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should insert user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:103,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;req.body = {\n  firstName: &#x27;user_to_delete&#x27;,\n  lastName: &#x27;lastName&#x27;,\n  userName: &#x27;user_to_delete&#x27; + Math.random().toString(36).substring(7), // random string\n  email: &#x27;random@test.com&#x27;,\n  locale: &#x27;en-US&#x27;,\n  timezone: &#x27;Pacific&#x27;,\n  languageGuid: testUser.languageGuid,\n  password: &#x27;randomPwd&#x27;,\n}\nconst response = await handlers.insertUser(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body).to.exist;\nexpect(response.body.contactGuid).to.exist;\nexpect(response.body.firstName).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41358801-dde6-4bf5-bf89-d943d0e13adc&quot;,&quot;parentUUID&quot;:&quot;ec183684-aa76-480d-97ce-3c070a3501da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should register a user&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should register a user&quot;,&quot;timedOut&quot;:true,&quot;duration&quot;:10001,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const userName = &#x27;register_user&#x27; + Math.random().toString(36).substring(7) // random string\nreq.body = {\n  firstName: &#x27;register_user&#x27;,\n  lastName: &#x27;lastName&#x27;,\n  userName,\n  email: &#x27;random@test.com&#x27;,\n  // locale: &#x27;en-US&#x27;,\n  timezone: &#x27;US/Central&#x27;,\n  languageGuid: testUser.languageGuid,\n  password: &#x27;randomPwd&#x27;,\n  tenant: tenantId\n}\nreq.bypassRecaptcha = true\nconst response = await handlers.registerUser(req, mockRes);\nexpect(response.statusCode).to.eq(200);\n// search by username to verify user record was created\nconst userCtrl = new UserController(session);\nconst result = await userCtrl.getUsers({search: userName});\nexpect(result.results.length).to.be.gt(0);\nlet found = result.results.find(u =&gt; u.userName = userName);\nexpect(found).to.exist;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;Error: Timeout of 10000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves. (/home/omar/Github/integrify/api-user/test/userHandler.test.js)&quot;,&quot;estack&quot;:&quot;Error: Timeout of 10000ms exceeded. For async tests and hooks, ensure \&quot;done()\&quot; is called; if returning a Promise, ensure it resolves. (/home/omar/Github/integrify/api-user/test/userHandler.test.js)\n    at listOnTimeout (internal/timers.js:554:17)\n    at processTimers (internal/timers.js:497:7)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;fc47b61a-e7de-4cac-bd55-15c96c5a4b3f&quot;,&quot;parentUUID&quot;:&quot;ec183684-aa76-480d-97ce-3c070a3501da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not update user with empty data&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should not update user with empty data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;req.body = &#x27;{}&#x27;;\nconst response = await handlers.updateUser(req, mockRes);\nexpect(response.statusCode).to.eq(400);\nexpect(response.body.firstName).to.exist;\nexpect(response.body.firstName).to.deep.eq([&#x27;The firstName field is required.&#x27;]);\nexpect(response.body.lastName).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;930ed11e-7307-4c84-95cd-47d98eaa9863&quot;,&quot;parentUUID&quot;:&quot;ec183684-aa76-480d-97ce-3c070a3501da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update user&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should update user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:60,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let userToDelete = (await UserAuth.query().where(&#x27;userName&#x27;, &#x27;like&#x27;, &#x27;user_to_delete%&#x27;).limit(1))[0];\nif (!userToDelete) {\n  req.body = {\n    firstName: &#x27;user_to_delete&#x27;,\n    lastName: &#x27;lastName&#x27;,\n    userName: &#x27;user_to_delete&#x27; + Math.random().toString(36).substring(7), // random string\n    email: &#x27;random@test.com&#x27;,\n    locale: &#x27;en-US&#x27;,\n    timezone: &#x27;Pacific&#x27;,\n    languageGuid: testUser.languageGuid,\n    password: &#x27;randomPwd&#x27;,\n  }\n  userToDelete  = (await handlers.insertUser(req, mockRes)).body;\n}\nconst data = {\n  firstName: &#x27;user_to_delete&#x27;,\n  lastName: &#x27;updated last&#x27;,\n  userName: &#x27;user_to_delete&#x27; + Math.random().toString(36).substring(7),\n  email: &#x27;random@test.updated&#x27;,\n  locale: &#x27;en-US&#x27;,\n  timezone: &#x27;Atlantic/New York&#x27;,\n  languageGuid: testUser.languageGuid,\n};\nreq.params.userGuid = userToDelete.contactGuid;\nreq.body = JSON.stringify(data);\nconst response = await handlers.updateUser(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body.contactGuid).to.exist;\nexpect(response.body.firstName).to.exist;\nexpect(response.body.firstName).to.eq(data.firstName);\nexpect(response.body.timezone).to.exist;\nexpect(response.body.timezone).to.eq(data.timezone);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3156f279-04a9-45d1-ba79-8b7099c329db&quot;,&quot;parentUUID&quot;:&quot;ec183684-aa76-480d-97ce-3c070a3501da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cd97f1e5-8052-44fe-b0bd-8ba91db140d6&quot;,&quot;f1f0a142-3487-468c-b1d4-0b77996959c1&quot;,&quot;64050de6-09d2-48bc-b4ea-c4aea4883a0a&quot;,&quot;94eb2faa-56ed-4af8-baf2-508f684457a9&quot;,&quot;b9f5414d-062d-4e6a-ac0a-702e1a90af37&quot;,&quot;41358801-dde6-4bf5-bf89-d943d0e13adc&quot;,&quot;930ed11e-7307-4c84-95cd-47d98eaa9863&quot;,&quot;3156f279-04a9-45d1-ba79-8b7099c329db&quot;],&quot;failures&quot;:[&quot;fc47b61a-e7de-4cac-bd55-15c96c5a4b3f&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10185,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;45ee12a0-6e62-4b73-9a55-1a5e6383d32b&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0c296bb3-7e13-458a-8c31-b22dd2016fbc&quot;,&quot;title&quot;:&quot;Config Processor ENV.CONFIG tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/config-processor/test/integration/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config Processor ENV.CONFIG tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\nprocess.env.TESTING = true;\n\nconfigHelper = require(\&quot;../../src/helpers/config\&quot;)\nredis = require(\&quot;integrify-libs\&quot;).redisClient\npubSubClient = redis.makeCopy();\npubSubClient.subscribe(&#x27;updateEnvConfig&#x27;)\npubSubClient.on(&#x27;message&#x27;, function(channel, message) {\n  \n  pubSubMessage = {channel, message}\n  // pubSubMessage[channel] = message;\n  \n});\n//let deletes = await redis.delAsync([&#x27;ENV.CONFIG&#x27;]);\n//console.log(deletes)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57af2f8b-fd06-4f07-915e-cc05eb5dc153&quot;,&quot;parentUUID&quot;:&quot;0c296bb3-7e13-458a-8c31-b22dd2016fbc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;354b9e44-da21-48f0-9f13-433794921b20&quot;,&quot;title&quot;:&quot;config helper&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/config-processor/test/integration/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bd8dfd8f-2560-4847-89a1-d638677c6b20&quot;,&quot;title&quot;:&quot;setConfig&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/config-processor/test/integration/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set ENV.CONFIG in redis based on a local config file&quot;,&quot;fullTitle&quot;:&quot;Config Processor ENV.CONFIG tests config helper setConfig should set ENV.CONFIG in redis based on a local config file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:328,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await configHelper.setEnvConfig()\nlet storedConfig = await redis.getAsync(&#x27;ENV.CONFIG&#x27;)\nconsole.log(\&quot;wow\&quot;,storedConfig)\nexpect(storedConfig).to.exist;\nstoredConfig = JSON.parse(storedConfig);\n//expect(storedConfig.cacheTime).to.exist;\nawait delay(300)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75084ee8-c349-4b55-bf6b-70482a05f7b4&quot;,&quot;parentUUID&quot;:&quot;bd8dfd8f-2560-4847-89a1-d638677c6b20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a message on the updateEnvConfig pub/sub channel&quot;,&quot;fullTitle&quot;:&quot;Config Processor ENV.CONFIG tests config helper setConfig should get a message on the updateEnvConfig pub/sub channel&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(pubSubMessage.channel).to.equal(&#x27;updateEnvConfig&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a129dac8-9645-4b56-89b5-8af591bfbca3&quot;,&quot;parentUUID&quot;:&quot;bd8dfd8f-2560-4847-89a1-d638677c6b20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should set ENV.CONFIG in redis based on a S3 config file&quot;,&quot;fullTitle&quot;:&quot;Config Processor ENV.CONFIG tests config helper setConfig should set ENV.CONFIG in redis based on a S3 config file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.USE_S3_FILES=\&quot;true\&quot;\nawait configHelper.setEnvConfig()\nlet storedConfig = await redis.getAsync(&#x27;ENV.CONFIG&#x27;)\nexpect(storedConfig).to.exist;\nstoredConfig = JSON.parse(storedConfig);\nexpect(storedConfig.cacheTime).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c84ba726-fa9b-41c8-af1c-e2a411713782&quot;,&quot;parentUUID&quot;:&quot;bd8dfd8f-2560-4847-89a1-d638677c6b20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;75084ee8-c349-4b55-bf6b-70482a05f7b4&quot;,&quot;a129dac8-9645-4b56-89b5-8af591bfbca3&quot;,&quot;c84ba726-fa9b-41c8-af1c-e2a411713782&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:363,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d1b40c74-cdcf-4343-b7d5-213ab90a956f&quot;,&quot;title&quot;:&quot;Config Processor Event Handler Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/config-processor/test/integration/configEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/configEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config Processor Event Handler Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5052,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.TESTING = true;\nthis.timeout(105000);\nlet deletes = await redis.delAsync([fullStreamName, eventHistoryName, eventProcessedName]);\n\nconsole.log(deletes)\nlet sp = new StreamPublisher(testStreamName,tenant);\nawait sp.sendEvent(\&quot;updateEnvConfig\&quot;, {\n    update: new Date().toISOString()\n});\nawait sp.sendEvent(\&quot;updateDataInstances\&quot;, {\n  update: new Date().toISOString()\n});\nawait sp.sendEvent(\&quot;updateLicenses\&quot;, {\n    update: new Date().toISOString()\n});\nawait sp.sendEvent(\&quot;updateLicenses\&quot;, {\n  update: new Date().toISOString(),\n  tenantId: &#x27;integrifydev&#x27;\n      });\n\n\nforkedProcessor = await configStreamConsumer.monitorStream(tenant);\nawait delay(5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d9f7c9c1-5125-49ed-8dc4-8fd70cbd77b8&quot;,&quot;parentUUID&quot;:&quot;d1b40c74-cdcf-4343-b7d5-213ab90a956f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config Processor Event Handler Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2679691b-16eb-4b99-bc80-1176fab29828&quot;,&quot;parentUUID&quot;:&quot;d1b40c74-cdcf-4343-b7d5-213ab90a956f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2fba88bf-03dc-4bf3-b15b-6120d119b234&quot;,&quot;title&quot;:&quot;config stream processor&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/config-processor/test/integration/configEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/configEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f9d20ecd-0ae8-4f99-95ed-d1a9f7575a20&quot;,&quot;title&quot;:&quot;reads from config stream&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/config-processor/test/integration/configEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/configEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should process events&quot;,&quot;fullTitle&quot;:&quot;Config Processor Event Handler Tests config stream processor reads from config stream should process events&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processedCount = await redis.zcardAsync(eventProcessedName)\n              let historyCount = await redis.zcardAsync(eventHistoryName)\n              expect(historyCount).to.equal(processedCount)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1df33789-f826-4769-bbb9-6e6da9f07e71&quot;,&quot;parentUUID&quot;:&quot;f9d20ecd-0ae8-4f99-95ed-d1a9f7575a20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1df33789-f826-4769-bbb9-6e6da9f07e71&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7ea47a8f-5ec7-4c03-b24d-1776e6e41a88&quot;,&quot;title&quot;:&quot;Config data instance tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/config-processor/test/integration/dataInstance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/dataInstance.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config data instance tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.TESTING = true;\npubSubClient.subscribe(&#x27;updateDataInstances&#x27;)\npubSubClient.on(&#x27;message&#x27;, function(channel, message) {\n  \n  pubSubMessage = {channel, message}\n  // pubSubMessage[channel] = message;\n  \n});\n  \nlet deletes = await redis.delAsync([&#x27;data_instances&#x27;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;67724d13-9b56-49cf-8232-e691fad69e06&quot;,&quot;parentUUID&quot;:&quot;7ea47a8f-5ec7-4c03-b24d-1776e6e41a88&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;331c6b1e-a847-4703-bbdf-b2507113eb43&quot;,&quot;title&quot;:&quot;dataInstasnce helper&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/config-processor/test/integration/dataInstance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/dataInstance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ada6f749-72a9-4eb1-9be0-bc11d5fd2f0e&quot;,&quot;title&quot;:&quot;updateDataInstances&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/config-processor/test/integration/dataInstance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/dataInstance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set data_instances in redis&quot;,&quot;fullTitle&quot;:&quot;Config data instance tests dataInstasnce helper updateDataInstances should set data_instances in redis&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:716,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await dataInstanceHelper.updateDataInstances();\nlet storedDataInstances = await redis.getAsync(&#x27;data_instances&#x27;)\nexpect(storedDataInstances).to.exist;\nstoredDataInstances = JSON.parse(storedDataInstances);\nexpect(Object.keys(storedDataInstances).length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71b4d9fd-e5a9-4a86-9c0f-710f1dc6b9ce&quot;,&quot;parentUUID&quot;:&quot;ada6f749-72a9-4eb1-9be0-bc11d5fd2f0e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a message on the updateDataInstances pub/sub channel&quot;,&quot;fullTitle&quot;:&quot;Config data instance tests dataInstasnce helper updateDataInstances should get a message on the updateDataInstances pub/sub channel&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:300,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await delay(300)\nexpect(pubSubMessage.channel).to.equal(&#x27;updateDataInstances&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0aada50e-4de0-493f-afd9-9d80a06e1d1a&quot;,&quot;parentUUID&quot;:&quot;ada6f749-72a9-4eb1-9be0-bc11d5fd2f0e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;71b4d9fd-e5a9-4a86-9c0f-710f1dc6b9ce&quot;,&quot;0aada50e-4de0-493f-afd9-9d80a06e1d1a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1016,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;edbb1529-72ff-4203-b08e-554af081ba8f&quot;,&quot;title&quot;:&quot;Config license tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/config-processor/test/integration/license.test.js&quot;,&quot;file&quot;:&quot;/test/integration/license.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config license tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.TESTING = true;\npubSubClient.subscribe(&#x27;updateLicenses&#x27;)\npubSubClient.on(&#x27;message&#x27;, function(channel, message) {\n  \n  pubSubMessage = {channel, message}\n  // pubSubMessage[channel] = message;\n  \n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66904119-3f5e-4fa5-a1d7-2318eb8c2fab&quot;,&quot;parentUUID&quot;:&quot;edbb1529-72ff-4203-b08e-554af081ba8f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;02cb20c3-8a07-4401-a29e-a06d94fceceb&quot;,&quot;title&quot;:&quot;license helper&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/config-processor/test/integration/license.test.js&quot;,&quot;file&quot;:&quot;/test/integration/license.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;96da5e03-db92-4186-9c8e-6ca67b4c5998&quot;,&quot;title&quot;:&quot;updateLicenses&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/config-processor/test/integration/license.test.js&quot;,&quot;file&quot;:&quot;/test/integration/license.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set licenses and x.license in redis for all dataInstances&quot;,&quot;fullTitle&quot;:&quot;Config license tests license helper updateLicenses should set licenses and x.license in redis for all dataInstances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:473,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await licenseHelper.updateLicenses()\nlet storedLicences = await redis.hgetallAsync(&#x27;licenses&#x27;)\nlicenseId = Object.keys(storedLicences)[0]\nexpect(storedLicences).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;599a5281-fa20-4ffc-828f-700bd1d3f5e0&quot;,&quot;parentUUID&quot;:&quot;96da5e03-db92-4186-9c8e-6ca67b4c5998&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a message on the updateLicenses pub/sub channel&quot;,&quot;fullTitle&quot;:&quot;Config license tests license helper updateLicenses should get a message on the updateLicenses pub/sub channel&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:301,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await delay(300)\nexpect(pubSubMessage.channel).to.equal(&#x27;updateLicenses&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bfa53010-72b5-4445-981f-9d750a568b41&quot;,&quot;parentUUID&quot;:&quot;96da5e03-db92-4186-9c8e-6ca67b4c5998&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should set license redis for all dataInstances&quot;,&quot;fullTitle&quot;:&quot;Config license tests license helper updateLicenses should set license redis for all dataInstances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:228,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await licenseHelper.updateLicenses(licenseId)\nlet storedLicences = await redis.hgetallAsync(&#x27;licenses&#x27;)\nexpect(storedLicences).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e4a70c7-78d6-40ad-8100-1ed6325d9917&quot;,&quot;parentUUID&quot;:&quot;96da5e03-db92-4186-9c8e-6ca67b4c5998&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;599a5281-fa20-4ffc-828f-700bd1d3f5e0&quot;,&quot;bfa53010-72b5-4445-981f-9d750a568b41&quot;,&quot;8e4a70c7-78d6-40ad-8100-1ed6325d9917&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1002,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e18534a7-fcfd-4856-bb09-0f3845ddb188&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;03c92215-6c3c-4472-9446-9cdd46db06e2&quot;,&quot;title&quot;:&quot;Core Service biztimes&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/biztimes.test.js&quot;,&quot;file&quot;:&quot;/test/biztimes.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service biztimes \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()\nlet test_yml = await getTestConfig();\ntest_data = test_yml.data;\nbiz = { \&quot;Active\&quot;: false, \&quot;EndHour\&quot;: 17, \&quot;EndMinute\&quot;: 0, \&quot;SID\&quot;: test_data.biz_sid, \&quot;StartHour\&quot;: 9, \&quot;StartMinute\&quot;: 15, \&quot;Weekday\&quot;: 0 }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ad1d08d-49c2-48a8-a968-fc8903b0386d&quot;,&quot;parentUUID&quot;:&quot;03c92215-6c3c-4472-9446-9cdd46db06e2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e21e955a-2dea-42f9-b568-a6467c1f2ee7&quot;,&quot;title&quot;:&quot;GET /biztimes&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/biztimes.test.js&quot;,&quot;file&quot;:&quot;/test/biztimes.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets biztimes&quot;,&quot;fullTitle&quot;:&quot;Core Service biztimes GET /biztimes gets biztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:61,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/biztimes&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n// biz = res.body.Items[0];\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8a600c5c-7aa4-4e94-b2d7-43e59c76968e&quot;,&quot;parentUUID&quot;:&quot;e21e955a-2dea-42f9-b568-a6467c1f2ee7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8a600c5c-7aa4-4e94-b2d7-43e59c76968e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:61,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;818e2f00-3b57-42dd-808c-6b9b37976bb3&quot;,&quot;title&quot;:&quot;POST /biztimes/save&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/biztimes.test.js&quot;,&quot;file&quot;:&quot;/test/biztimes.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service biztimes POST /biztimes/save \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;if (biz.EndHour &lt; 24)\n    biz.EndHour = biz.EndHour + 1\nelse\n    biz.EndHour = biz.EndHour - 23&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1a2a856-75f1-43ed-a2cb-81a333003088&quot;,&quot;parentUUID&quot;:&quot;818e2f00-3b57-42dd-808c-6b9b37976bb3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;saves biztimes&quot;,&quot;fullTitle&quot;:&quot;Core Service biztimes POST /biztimes/save saves biztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/biztimes/save&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(biz)\n//console.log(res.body)\nexpect(res.status).to.equal(200);\nexpect(res.body.EndHour).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d1136f5-a2fd-4ec6-9415-1112812b79d1&quot;,&quot;parentUUID&quot;:&quot;818e2f00-3b57-42dd-808c-6b9b37976bb3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1d1136f5-a2fd-4ec6-9415-1112812b79d1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:35,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;1de003a8-07bd-4288-ba9a-ba01f811c69e&quot;,&quot;title&quot;:&quot;Core Service category&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service category \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d67bbe8e-ad86-4dbc-a89e-2ef9bf5c90bc&quot;,&quot;parentUUID&quot;:&quot;1de003a8-07bd-4288-ba9a-ba01f811c69e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6ba5fb28-b51e-41a4-9451-d4a5eb9f8162&quot;,&quot;title&quot;:&quot;GET tree/{object_type}&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service category GET tree/{object_type} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:58,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/categories/tree/category?node=all&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            category = res.body[0]\n            coreResult = res.body;\n            //console.log(res.body)\n            expect(res.status).to.equal(200);\n            // expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca749ce0-c65f-4224-aa98-596eba1f2a6f&quot;,&quot;parentUUID&quot;:&quot;6ba5fb28-b51e-41a4-9451-d4a5eb9f8162&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ca749ce0-c65f-4224-aa98-596eba1f2a6f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:58,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;3fa45b11-7e44-4a6c-8786-e9c590596b6d&quot;,&quot;title&quot;:&quot;GET {sid}&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service category GET {sid} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/category/&#x27; + category.id)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            //console.log(res.body);\n            coreResult = res.body;\n            expect(res.status).to.equal(200);\n            expect(res.body.Name).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d01bd2b2-e243-4aa0-85db-2c9122dcea3b&quot;,&quot;parentUUID&quot;:&quot;3fa45b11-7e44-4a6c-8786-e9c590596b6d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d01bd2b2-e243-4aa0-85db-2c9122dcea3b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;29af5346-a6b8-4de1-b287-4423fd04a59b&quot;,&quot;title&quot;:&quot;POST save&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service category POST save core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/category/save&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(category_save)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.CreatedDate).to.exist;\n// expect(res.body.Name).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1227c6a8-b22e-47cd-b7e9-b83c078c38a6&quot;,&quot;parentUUID&quot;:&quot;29af5346-a6b8-4de1-b287-4423fd04a59b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1227c6a8-b22e-47cd-b7e9-b83c078c38a6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;0cb0d162-449a-4c1f-8243-e7fc104fe60d&quot;,&quot;title&quot;:&quot;GET {sid}/delete&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service category GET {sid}/delete \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//Fetch category sid to delete\n            let resp = await chai.request(newUrlBase)\n                .get(&#x27;/categories/tree/category?node=all&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            category = resp.body;\n            category.forEach(element =&gt; {\n                //console.log(element.Name);\n                if (element.Name == &#x27;Qa Auto&#x27;)\n                    cate_delete = element;\n            });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28d5785a-7e23-421f-a140-594ead5db05d&quot;,&quot;parentUUID&quot;:&quot;0cb0d162-449a-4c1f-8243-e7fc104fe60d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service category GET {sid}/delete core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/category/&#x27; + cate_delete.id + &#x27;/delete&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body).to.equal(0);\n// expect(res.body.Name).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b003a9f1-724a-4f13-8939-d844cd4f2c0d&quot;,&quot;parentUUID&quot;:&quot;0cb0d162-449a-4c1f-8243-e7fc104fe60d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b003a9f1-724a-4f13-8939-d844cd4f2c0d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;28a88925-de7b-40d6-88a0-752f7c3c54bd&quot;,&quot;title&quot;:&quot;Core Service contacts&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4dd65a16-8fc0-4038-8d41-086443ab6c1d&quot;,&quot;parentUUID&quot;:&quot;28a88925-de7b-40d6-88a0-752f7c3c54bd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d39d856f-756d-47db-b3d4-a07be84810b0&quot;,&quot;title&quot;:&quot;GET /contacts/current&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET /contacts/current core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:54,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                        .get(&#x27;/contacts/current/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n                        .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n                  coreResult = res.body;\n                  expect(res.status).to.equal(200);\n                  expect(res.body.ContactID).to.exist;\n                  currentUser_sid = res.body.SID&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3c61004-ffaa-4251-8cdd-6277079d7dc5&quot;,&quot;parentUUID&quot;:&quot;d39d856f-756d-47db-b3d4-a07be84810b0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e3c61004-ffaa-4251-8cdd-6277079d7dc5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:54,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;a95b38d8-aaf4-49dc-8d00-1512a15d84e1&quot;,&quot;title&quot;:&quot;GET detail/{contact_sid}&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET detail/{contact_sid} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                        .get(&#x27;/contacts/detail/&#x27; + currentUser_sid)\n                        .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n                  coreResult = res.body;\n                  expect(res.status).to.equal(200);\n                  expect(res.body.ContactID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2563fdd3-1ab2-4000-b4a9-e2527c13ece2&quot;,&quot;parentUUID&quot;:&quot;a95b38d8-aaf4-49dc-8d00-1512a15d84e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2563fdd3-1ab2-4000-b4a9-e2527c13ece2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;d0c312f2-956a-46fc-9e32-b93e695e7fdb&quot;,&quot;title&quot;:&quot;GET {contact_sid}/attributes&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET {contact_sid}/attributes core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contact/&#x27; + currentUser_sid + &#x27;/attributes&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//Need clarifacation on a valaid test \nexpect(res.body[0]).to.exist;\nexpect(res.body[1]).to.exist;\nexpect(res.body[2]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a338dd5-dda1-4c6c-b841-7ff2b8678450&quot;,&quot;parentUUID&quot;:&quot;d0c312f2-956a-46fc-9e32-b93e695e7fdb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4a338dd5-dda1-4c6c-b841-7ff2b8678450&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;10a92c7a-6d94-411a-b2b8-311adbe7786f&quot;,&quot;title&quot;:&quot;GET {contact_sid}/delegations&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET {contact_sid}/delegations core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contact/&#x27; + currentUser_sid + &#x27;/delegations&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\n// //console.log(res.body)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f5be9b4-274a-4aa6-8d01-edc8533891be&quot;,&quot;parentUUID&quot;:&quot;10a92c7a-6d94-411a-b2b8-311adbe7786f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7f5be9b4-274a-4aa6-8d01-edc8533891be&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;25ce6937-8238-46f3-b682-6da8cf549115&quot;,&quot;title&quot;:&quot;GET byuserid/{user_id}&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET byuserid/{user_id} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contacts/byuserid/iApprove&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\n//console.log(res.body)\nexpect(res.status).to.equal(200);\n//Need clarifacation on a valaid test \n// expect(res.body[0]).to.exist;\n// expect(res.body[1]).to.exist;\n// expect(res.body[2]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30f1816d-25b0-46e7-a006-d7d245f4eb35&quot;,&quot;parentUUID&quot;:&quot;25ce6937-8238-46f3-b682-6da8cf549115&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;30f1816d-25b0-46e7-a006-d7d245f4eb35&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;1543a020-cd2e-4cef-9071-408aa18b0e0a&quot;,&quot;title&quot;:&quot;GET /contacts/search&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET /contacts/search core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contacts/search?search=System&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n// //console.log(res.body)\ncoreResult = res.body;\n//console.log(res.body);\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;12702b3c-002d-4eb7-b521-fb4c57cc2909&quot;,&quot;parentUUID&quot;:&quot;1543a020-cd2e-4cef-9071-408aa18b0e0a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;12702b3c-002d-4eb7-b521-fb4c57cc2909&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;52097220-ee96-4ec6-9982-0b7517625657&quot;,&quot;title&quot;:&quot;GET /contact/search/quick/name&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET /contact/search/quick/name core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:54,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contacts/search/quick/name/script/?start=0&amp;count=20&amp;sort=Name&amp;dir=ASC&amp;filter=System&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n//console.log(res.body)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a1c2d7b-22bb-495b-a012-3bf1e6299488&quot;,&quot;parentUUID&quot;:&quot;52097220-ee96-4ec6-9982-0b7517625657&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0a1c2d7b-22bb-495b-a012-3bf1e6299488&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:54,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;eff53863-cf8a-4926-83f1-0958ce85eee6&quot;,&quot;title&quot;:&quot;GET /contacts/contactdetailsearch/{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET /contacts/contactdetailsearch/{page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contacts/contactdetailsearch/0/10/LAST_NAME/ASC/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n//console.log(res.body)\nexpect(res.status).to.equal(200);\ncoreResult = res.body;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2466e0f5-83c7-4f52-bd1b-a1de93aaee21&quot;,&quot;parentUUID&quot;:&quot;eff53863-cf8a-4926-83f1-0958ce85eee6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2466e0f5-83c7-4f52-bd1b-a1de93aaee21&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;6b156a61-ad1f-4fea-82c8-831363559ad3&quot;,&quot;title&quot;:&quot;POST /contacts/save | update&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts POST /contacts/save | update core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:268,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .post(&#x27;/contacts/save&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send(contact);\ninsertedSid = res.text\n//console.log(res.text)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b7b663a1-00c4-465f-9ec6-50580a02629a&quot;,&quot;parentUUID&quot;:&quot;6b156a61-ad1f-4fea-82c8-831363559ad3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;core service update&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts POST /contacts/save | update core service update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:258,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;contact.SID = insertedSid;\nlet res = await chai.request(newUrlBase)\n      .post(&#x27;/contacts/update&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send(contact);\n//console.log(res.body)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3498367c-4c67-4e41-9f9f-3a8bd81dc813&quot;,&quot;parentUUID&quot;:&quot;6b156a61-ad1f-4fea-82c8-831363559ad3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b7b663a1-00c4-465f-9ec6-50580a02629a&quot;,&quot;3498367c-4c67-4e41-9f9f-3a8bd81dc813&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:526,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;b6846c94-c862-40cd-8b60-db8d595dcc92&quot;,&quot;title&quot;:&quot;POST /contacts/replace POST&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts POST /contacts/replace POST \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;replace_user = [[\&quot;OldContactSid\&quot;, insertedSid], [\&quot;ReplacementContactSid\&quot;, insertedSid2], [\&quot;RecipientReplace\&quot;, \&quot;No\&quot;], [\&quot;OpenTaskReplace\&quot;, \&quot;No\&quot;], [\&quot;GroupReplace\&quot;, \&quot;No\&quot;], [\&quot;RoleReplace\&quot;, \&quot;No\&quot;], [\&quot;DelegationReplace\&quot;, \&quot;No\&quot;]]&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3fc7cd95-f1e6-4003-beb7-6815735db90c&quot;,&quot;parentUUID&quot;:&quot;b6846c94-c862-40cd-8b60-db8d595dcc92&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service update&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts POST /contacts/replace POST core service update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;contact.SID = insertedSid;\nlet res = await chai.request(newUrlBase)\n      .post(&#x27;/contacts/replace &#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send(replace_user);\n//console.log(res.body)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2d02ef0-fa28-4725-b982-a8d40bad4966&quot;,&quot;parentUUID&quot;:&quot;b6846c94-c862-40cd-8b60-db8d595dcc92&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a2d02ef0-fa28-4725-b982-a8d40bad4966&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;96d18d50-7af2-4624-9e27-2b63ccf94491&quot;,&quot;title&quot;:&quot;Core service dbconns&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/dbconn.test.js&quot;,&quot;file&quot;:&quot;/test/dbconn.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core service dbconns \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4cba88a3-8c1d-4be9-a170-86765b93ffc4&quot;,&quot;parentUUID&quot;:&quot;96d18d50-7af2-4624-9e27-2b63ccf94491&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all dbconns&quot;,&quot;fullTitle&quot;:&quot;Core service dbconns it should GET all dbconns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:30,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .get(&#x27;/dbconns/list/0/1000/Name/ASC/script/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20b86d8e-b94f-4cbc-b16d-3c3b2c5dc743&quot;,&quot;parentUUID&quot;:&quot;96d18d50-7af2-4624-9e27-2b63ccf94491&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should add a test dbconn&quot;,&quot;fullTitle&quot;:&quot;Core service dbconns it should add a test dbconn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:53,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .post(&#x27;/dbconns/save/script/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n  .send(testDbConn)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\nexpect(res.text).to.be.a.guid()\ntestDbConnSid = res.text\n// verify testDbConn comes back in list\nres = await chai.request(newUrlBase)\n  .get(&#x27;/dbconns/list/0/1000/Name/ASC/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst idx = res.body.Items.findIndex(item =&gt; item.SID == testDbConnSid);\nexpect(idx).to.be.greaterThan(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5393d4b6-b902-456a-bb3c-a260c4c12a0b&quot;,&quot;parentUUID&quot;:&quot;96d18d50-7af2-4624-9e27-2b63ccf94491&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should delete the test dbconn&quot;,&quot;fullTitle&quot;:&quot;Core service dbconns it should delete the test dbconn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .post(&#x27;/dbconns/delete/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n  .send([testDbConnSid])\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\nexpect(res.text).to.equal(&#x27;1&#x27;);\n// verify testDbConn does not come back in list\nres = await chai.request(newUrlBase)\n  .get(&#x27;/dbconns/list/0/1000/Name/ASC/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst idx = res.body.Items.findIndex(item =&gt; item.SID == testDbConnSid);\nexpect(idx).to.equal(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3120ac4-7a40-471a-a023-e4acf109abe1&quot;,&quot;parentUUID&quot;:&quot;96d18d50-7af2-4624-9e27-2b63ccf94491&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;20b86d8e-b94f-4cbc-b16d-3c3b2c5dc743&quot;,&quot;5393d4b6-b902-456a-bb3c-a260c4c12a0b&quot;,&quot;e3120ac4-7a40-471a-a023-e4acf109abe1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:115,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;1e629964-8d4e-458a-80fd-009413f75aad&quot;,&quot;title&quot;:&quot;Core Service groups&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service groups \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f05a5098-28a9-40a7-b7db-7d259ee4d8ab&quot;,&quot;parentUUID&quot;:&quot;1e629964-8d4e-458a-80fd-009413f75aad&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b7604c8a-c700-48e1-9421-fde668cc0be8&quot;,&quot;title&quot;:&quot;POST /group/save&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups POST /group/save core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                        .post(&#x27;/groups/save/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n                        .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n                        .send({ \&quot;Name\&quot;: \&quot;Qa Auto\&quot;, \&quot;Description\&quot;: \&quot;This is an automation\&quot;, \&quot;Dynamic\&quot;: 0 })\n                  new_groupSid = res.text;\n                  expect(res.status).to.equal(200);\n                  expect(res.text).to.exist;\n                  expect(res.text).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac679260-aedc-48bf-b8d7-b89919782141&quot;,&quot;parentUUID&quot;:&quot;b7604c8a-c700-48e1-9421-fde668cc0be8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ac679260-aedc-48bf-b8d7-b89919782141&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:38,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;367a2344-9edc-496f-99e2-7758b5b99dc0&quot;,&quot;title&quot;:&quot;POST /groups/members/{groupSid}/add&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups POST /groups/members/{groupSid}/add core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:69,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .post(&#x27;/groups/members/&#x27; + new_groupSid + &#x27;/add&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send([{ SID: system_user, ContactType: 1 }])\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe519157-7b78-4a47-a606-2c8089b392bb&quot;,&quot;parentUUID&quot;:&quot;367a2344-9edc-496f-99e2-7758b5b99dc0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fe519157-7b78-4a47-a606-2c8089b392bb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:69,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;cf9fd207-2bbb-4983-a678-e21f96322700&quot;,&quot;title&quot;:&quot;POST /groups/members/{groupSid}/remove&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups POST /groups/members/{groupSid}/remove core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .post(&#x27;/groups/members/&#x27; + new_groupSid + &#x27;/remove&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send([{ SID: system_user, ContactType: 1 }])\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0cb88f15-a656-48a6-aba5-688571ab6948&quot;,&quot;parentUUID&quot;:&quot;cf9fd207-2bbb-4983-a678-e21f96322700&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0cb88f15-a656-48a6-aba5-688571ab6948&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;37e02da1-0b18-4490-b0d3-29fa4f321028&quot;,&quot;title&quot;:&quot;GET /groups/{sid}/delete&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/{sid}/delete core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/&#x27; + new_groupSid + &#x27;/delete&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\nexpect(res.text).to.equal(&#x27;true&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be5faf1f-383f-4429-bc43-ace1e623f1c6&quot;,&quot;parentUUID&quot;:&quot;37e02da1-0b18-4490-b0d3-29fa4f321028&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;be5faf1f-383f-4429-bc43-ace1e623f1c6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;c72393e4-8e1f-49be-9bb6-e5670d412cb8&quot;,&quot;title&quot;:&quot;GET /groups/list/simple&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/list/simple core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/list/simple&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body[0]).to.be.an(&#x27;array&#x27;).that.does.include(&#x27;Administrators&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;beae5a58-8afb-4047-8915-a81483229d97&quot;,&quot;parentUUID&quot;:&quot;c72393e4-8e1f-49be-9bb6-e5670d412cb8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;beae5a58-8afb-4047-8915-a81483229d97&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;93b74f0f-86de-4a0f-8b95-10698793da26&quot;,&quot;title&quot;:&quot;GET /groups/{sid}&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/{sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/&#x27; + groupSid)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.SID).to.exist\nexpect(res.body.SID).to.be.guid\n// expect(res.).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24062422-67cf-48b6-ba61-2fdafa8e2f06&quot;,&quot;parentUUID&quot;:&quot;93b74f0f-86de-4a0f-8b95-10698793da26&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;24062422-67cf-48b6-ba61-2fdafa8e2f06&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;2a57d08d-3213-41ce-b7ba-d9297338121c&quot;,&quot;title&quot;:&quot;GET /groups/listroleassociation/{groupSid}&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/listroleassociation/{groupSid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/listroleassociation/&#x27; + groupSid)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body[0]).to.be.an(&#x27;array&#x27;).that.does.include(&#x27;System Administrators&#x27;);\n// expect(res.).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1c35a31-3ec9-4e0d-9885-a2f75fdd0e44&quot;,&quot;parentUUID&quot;:&quot;2a57d08d-3213-41ce-b7ba-d9297338121c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e1c35a31-3ec9-4e0d-9885-a2f75fdd0e44&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;26aa2f67-9f14-4764-b966-60f403b62e30&quot;,&quot;title&quot;:&quot;GET /groups/select/{contact_sid}&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/select/{contact_sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/select/&#x27; + system_user)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d3b230db-c3a0-474d-acbb-d9901b3a1eca&quot;,&quot;parentUUID&quot;:&quot;26aa2f67-9f14-4764-b966-60f403b62e30&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d3b230db-c3a0-474d-acbb-d9901b3a1eca&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;55dc02e9-e6e8-451f-a537-26acc7f0a833&quot;,&quot;title&quot;:&quot;GET /groups/nondynamic/list/simple&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/nondynamic/list/simple core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/nondynamic/list/simple&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;efd6c234-042e-4263-ab95-5d97df202e5e&quot;,&quot;parentUUID&quot;:&quot;55dc02e9-e6e8-451f-a537-26acc7f0a833&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;efd6c234-042e-4263-ab95-5d97df202e5e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;3c112253-d95f-44ec-8674-4ad9d69e1145&quot;,&quot;title&quot;:&quot;GET /groups/listmembers/{sid}&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/listmembers/{sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/listmembers/&#x27; + groupSid)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6908e26c-4b1e-4d69-9fd4-8c6b37ce90e5&quot;,&quot;parentUUID&quot;:&quot;3c112253-d95f-44ec-8674-4ad9d69e1145&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6908e26c-4b1e-4d69-9fd4-8c6b37ce90e5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;a062462a-00bf-4c39-91f4-3805f1eb1010&quot;,&quot;title&quot;:&quot;GET /groups/list/{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/list/{page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/list/0/10/Name/asc&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10df714a-26e8-47fb-af6f-793784c9a1eb&quot;,&quot;parentUUID&quot;:&quot;a062462a-00bf-4c39-91f4-3805f1eb1010&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;10df714a-26e8-47fb-af6f-793784c9a1eb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:24,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;268a95a6-4d7c-4f9f-8def-1b88f2f46220&quot;,&quot;title&quot;:&quot;GET /groups/listbypage/{sid}/{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/listbypage/{sid}/{page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/listbypage/&#x27; + groupSid + &#x27;/0/10/Name/asc&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e74bf87-7820-4874-82c5-2f308b3a84ad&quot;,&quot;parentUUID&quot;:&quot;268a95a6-4d7c-4f9f-8def-1b88f2f46220&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3e74bf87-7820-4874-82c5-2f308b3a84ad&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;1ae36867-6b00-4950-8cdf-e6980255384f&quot;,&quot;title&quot;:&quot;GET /groups/listprocessassociation/{sid}&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/listprocessassociation/{sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/listprocessassociation/&#x27; + groupSid)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;433cbba8-cc99-48e7-bd98-e43ff908a1b1&quot;,&quot;parentUUID&quot;:&quot;1ae36867-6b00-4950-8cdf-e6980255384f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;433cbba8-cc99-48e7-bd98-e43ff908a1b1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;01c7d19d-5b2d-41b5-83df-fe465cd4a39d&quot;,&quot;title&quot;:&quot;Core Service Members&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/member.test.js&quot;,&quot;file&quot;:&quot;/test/member.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service Members \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9fcb45d4-29dd-46eb-826c-1c0ee19f22ce&quot;,&quot;parentUUID&quot;:&quot;01c7d19d-5b2d-41b5-83df-fe465cd4a39d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d62fd33d-0c4f-41e9-9130-be68b96271b4&quot;,&quot;title&quot;:&quot;{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/member.test.js&quot;,&quot;file&quot;:&quot;/test/member.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Members {page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/member/0/10/Name/Asc/script/?filter=&amp;include=3&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist\n// expect(res.).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f9b5962f-3c04-41c9-adee-6dc75747e3c4&quot;,&quot;parentUUID&quot;:&quot;d62fd33d-0c4f-41e9-9130-be68b96271b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f9b5962f-3c04-41c9-adee-6dc75747e3c4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:32,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;2d11ad2f-5273-491e-b608-6766952479c9&quot;,&quot;title&quot;:&quot;Core Service myTasks&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/myTasks.test.js&quot;,&quot;file&quot;:&quot;/test/myTasks.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service myTasks \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;12c0caba-86e5-4cfb-a927-275955e7c00e&quot;,&quot;parentUUID&quot;:&quot;2d11ad2f-5273-491e-b608-6766952479c9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d34fddcf-328f-410b-be16-ad0a39e50778&quot;,&quot;title&quot;:&quot;GEt {status}/{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/myTasks.test.js&quot;,&quot;file&quot;:&quot;/test/myTasks.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service myTasks GEt {status}/{page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:99,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/myTasks/status/0/10/Name/Asc&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0df9d040-82cf-40bf-91bd-b3af67e5f6ba&quot;,&quot;parentUUID&quot;:&quot;d34fddcf-328f-410b-be16-ad0a39e50778&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0df9d040-82cf-40bf-91bd-b3af67e5f6ba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:99,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;ba7a5db1-650f-4138-a277-de887ea9d718&quot;,&quot;title&quot;:&quot;Core Service powerForm&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()\nlet test_yml = await getTestConfig();\ntest_data = test_yml.data;\n// //console.log(test_data);\nnew_role = &#x27;{ \&quot;Name\&quot;: \&quot;Qatest\&quot;, \&quot;ExtendedDescription\&quot;: \&quot;qa automated\&quot;, \&quot;OwnerSID\&quot;:&#x27; + test_data.object_sid + &#x27;, \&quot;OwnerType\&quot;: 2 }&#x27;\npowerform = {\n    CategorySID: test_data.category_sid,\n    Name: \&quot;test\&quot;,\n    PowerFormType: \&quot;0\&quot;,\n    Version: 1\n}\n// { \&quot;ID\&quot;: 9999, \&quot;Mode\&quot;: 2, \&quot;ObjectType\&quot;: 1, \&quot;RoleSID\&quot;: test_data.role_sid, \&quot;SID\&quot;: \&quot;90645d40-9de6-48b1-b689-0a610ef1d716\&quot;, \&quot;Permissions\&quot;: 0 }, { \&quot;ID\&quot;: 9999, \&quot;Mode\&quot;: 3, \&quot;ObjectType\&quot;: 1, \&quot;RoleSID\&quot;: \&quot;e513a6ec-cfea-4bcb-8b74-eebc3439c9fc\&quot;, \&quot;SID\&quot;: \&quot;4711a8f4-68be-4772-b389-0a610ef1d7fe\&quot;, \&quot;Permissions\&quot;: 0 }, { \&quot;ID\&quot;: 9999, \&quot;Mode\&quot;: 4, \&quot;ObjectType\&quot;: 1, \&quot;RoleSID\&quot;: \&quot;e513a6ec-cfea-4bcb-8b74-eebc3439c9fc\&quot;, \&quot;SID\&quot;: \&quot;b1e03457-e202-4a99-a389-0a610ef1d79d\&quot;, \&quot;Permissions\&quot;: 0 }, { \&quot;ID\&quot;: 0, \&quot;Mode\&quot;: 5, \&quot;ObjectType\&quot;: 1, \&quot;RoleSID\&quot;: \&quot;e513a6ec-cfea-4bcb-8b74-eebc3439c9fc\&quot;, \&quot;SID\&quot;: \&quot;f221751c-ba9f-4b19-9708-1f22372dffde\&quot;, \&quot;Permissions\&quot;: 1023 }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0666b183-b171-4d16-9245-c588d351c7b1&quot;,&quot;parentUUID&quot;:&quot;ba7a5db1-650f-4138-a277-de887ea9d718&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;725739a5-055c-4743-a582-2e27d03cf5c7&quot;,&quot;title&quot;:&quot;POST /Powerform/save&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm POST /Powerform/save core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/powerform/save&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(powerform)\nexpect(res.status).to.equal(200);\nsid = res.body.SID\n//console.log(sid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;784bd4e7-750a-4174-9822-317b51beb0c5&quot;,&quot;parentUUID&quot;:&quot;725739a5-055c-4743-a582-2e27d03cf5c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;784bd4e7-750a-4174-9822-317b51beb0c5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:31,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;0917a25d-6d17-4ffd-8599-c6388a802a82&quot;,&quot;title&quot;:&quot;GET /Powerform/{sid}&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm GET /Powerform/{sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/powerform/&#x27; + sid)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25aa3d09-ed21-4da5-ab95-32d9d8760ac8&quot;,&quot;parentUUID&quot;:&quot;0917a25d-6d17-4ffd-8599-c6388a802a82&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;25aa3d09-ed21-4da5-ab95-32d9d8760ac8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;ee1477ee-3679-44c1-b6f1-9a5bf88c02c7&quot;,&quot;title&quot;:&quot;GET /Powerform/{sid}/detail&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm GET /Powerform/{sid}/detail core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/powerform/&#x27; + sid + &#x27;/detail&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;307ef563-d678-4bf7-a93b-6ab8034a9818&quot;,&quot;parentUUID&quot;:&quot;ee1477ee-3679-44c1-b6f1-9a5bf88c02c7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;307ef563-d678-4bf7-a93b-6ab8034a9818&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;da268c59-e40f-4f9d-8e5e-9c2bc5bd5a27&quot;,&quot;title&quot;:&quot;GET /Powerform/{sid}/delete&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm GET /Powerform/{sid}/delete core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/powerform/&#x27; + sid + &#x27;/delete&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cfdae934-b1e1-46dc-ba4f-0c907e4c3360&quot;,&quot;parentUUID&quot;:&quot;da268c59-e40f-4f9d-8e5e-9c2bc5bd5a27&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cfdae934-b1e1-46dc-ba4f-0c907e4c3360&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;1f20089b-d5f9-4aaf-8c8a-a40b42eaece0&quot;,&quot;title&quot;:&quot;Core Service Process&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service Process \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken();\nlet test_yml = await getTestConfig();\ntest_data = test_yml.data;\nprc = { Name: new Date().toISOString(), Description: \&quot;Qa Automation\&quot;, CategorySID: test_data.category_sid }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;400fec4d-4e90-45a4-8d0a-5c1af292f920&quot;,&quot;parentUUID&quot;:&quot;1f20089b-d5f9-4aaf-8c8a-a40b42eaece0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cddedb7e-9147-4e09-aa9f-180988c04c18&quot;,&quot;title&quot;:&quot;POST /process/create|delete&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process POST /process/create|delete core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:276,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/process/create&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(prc)\np1 = res.body.SID;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6bd4caf3-2d9c-4ea9-a6f4-e92d1d3f1496&quot;,&quot;parentUUID&quot;:&quot;cddedb7e-9147-4e09-aa9f-180988c04c18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;core service | Delete&quot;,&quot;fullTitle&quot;:&quot;Core Service Process POST /process/create|delete core service | Delete&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:215,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/process/&#x27; + p1 + &#x27;/delete&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nconsole.log(res);\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7a9f16b-60c1-43f0-8bae-0d409db5507b&quot;,&quot;parentUUID&quot;:&quot;cddedb7e-9147-4e09-aa9f-180988c04c18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6bd4caf3-2d9c-4ea9-a6f4-e92d1d3f1496&quot;,&quot;d7a9f16b-60c1-43f0-8bae-0d409db5507b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:491,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;0fc7724a-b589-47ea-aeca-28a91ce8e841&quot;,&quot;title&quot;:&quot;GET /process/{sid}/copy&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /process/{sid}/copy core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4899,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/processes/&#x27; + test_data.process_sid + &#x27;/copy&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            expect(res.status).to.equal(200);\n            //delete copied process\n            let del = await chai.request(newUrlBase)\n                .get(&#x27;/process/&#x27; + res.text + &#x27;/delete&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            expect(del.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;191b5f4e-fa24-4a6c-bad1-e8e67caf65ad&quot;,&quot;parentUUID&quot;:&quot;0fc7724a-b589-47ea-aeca-28a91ce8e841&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;191b5f4e-fa24-4a6c-bad1-e8e67caf65ad&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4899,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;8028a508-cb97-4ab6-9253-5b4c37fccc8a&quot;,&quot;title&quot;:&quot;GET /processes&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:104,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5d7e5e1-ef7c-409b-bcae-08524d94eca2&quot;,&quot;parentUUID&quot;:&quot;8028a508-cb97-4ab6-9253-5b4c37fccc8a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b5d7e5e1-ef7c-409b-bcae-08524d94eca2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:104,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;0b5c5040-c88f-4570-807f-e04c6b1209f9&quot;,&quot;title&quot;:&quot;GET /processes/{SID}&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{SID} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08be242b-d377-445b-8142-f909d2fc9f4a&quot;,&quot;parentUUID&quot;:&quot;0b5c5040-c88f-4570-807f-e04c6b1209f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;08be242b-d377-445b-8142-f909d2fc9f4a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;a9198b48-1854-443f-a41b-fc23cb922ae6&quot;,&quot;title&quot;:&quot;GET /processes/{sid}/detail&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{sid}/detail core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/detail&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b4e8e76-6e63-4513-996b-9f8e5c44fa82&quot;,&quot;parentUUID&quot;:&quot;a9198b48-1854-443f-a41b-fc23cb922ae6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2b4e8e76-6e63-4513-996b-9f8e5c44fa82&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;c3da2666-3c90-4cba-a635-eaf8be9c1789&quot;,&quot;title&quot;:&quot;GET /processes/{sid}/name&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{sid}/name core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/name&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.text)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07ad4998-22b0-4660-9634-f6a60d589d4e&quot;,&quot;parentUUID&quot;:&quot;c3da2666-3c90-4cba-a635-eaf8be9c1789&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;07ad4998-22b0-4660-9634-f6a60d589d4e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;64b88025-472a-476d-ab42-ce76c1063e45&quot;,&quot;title&quot;:&quot;GET /processes/{sid}/summary&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{sid}/summary core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/summary&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.text)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d08f455-d8f6-48a4-ad2d-f764d22e7c4f&quot;,&quot;parentUUID&quot;:&quot;64b88025-472a-476d-ab42-ce76c1063e45&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0d08f455-d8f6-48a4-ad2d-f764d22e7c4f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;05bcd24a-2ec5-4303-bd0d-02f13d8b6689&quot;,&quot;title&quot;:&quot;GET /processes/{process_sid}/tasks&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{process_sid}/tasks core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/tasks&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05c20e94-c352-4abc-891a-bfdf24c3597b&quot;,&quot;parentUUID&quot;:&quot;05bcd24a-2ec5-4303-bd0d-02f13d8b6689&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;05c20e94-c352-4abc-891a-bfdf24c3597b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;10f47c3b-dc5d-4112-b72a-4bbb00ce86dd&quot;,&quot;title&quot;:&quot;GET /processes/{process_sid}/tasks/{task_sid}/rules&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{process_sid}/tasks/{task_sid}/rules core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/tasks/&#x27; + test_data.task_sid + &#x27;/rules&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aff4c94c-3793-41ae-a840-44fce22f2eb3&quot;,&quot;parentUUID&quot;:&quot;10f47c3b-dc5d-4112-b72a-4bbb00ce86dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aff4c94c-3793-41ae-a840-44fce22f2eb3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:28,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;d5f796a7-9200-4fc9-8726-8eb2339da83a&quot;,&quot;title&quot;:&quot;POST /processes/{process_sid}/tasks/{task_sid}/rules/update | reorder | delete &quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process POST /processes/{process_sid}/tasks/{task_sid}/rules/update | reorder | delete  core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/tasks/&#x27; + test_data.task_sid + &#x27;/rules/update/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(rule)\nsids.one = res.body.SID;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5d18ed0-e298-4aef-93fb-1057f87bd4b3&quot;,&quot;parentUUID&quot;:&quot;d5f796a7-9200-4fc9-8726-8eb2339da83a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;core service | reorder&quot;,&quot;fullTitle&quot;:&quot;Core Service Process POST /processes/{process_sid}/tasks/{task_sid}/rules/update | reorder | delete  core service | reorder&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let reorder = { \&quot;SID\&quot;: sids.two, \&quot;Ordinal\&quot;: 2, \&quot;ConditionType\&quot;: 1, \&quot;MatchGuid\&quot;: \&quot;\&quot;, \&quot;RecipientSID\&quot;: null, \&quot;DestinationAction\&quot;: \&quot;0\&quot; }\nlet res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/tasks/&#x27; + test_data.task_sid + &#x27;/rules/reorder/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(reorder)\n//console.log(res.body)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;681ada45-c346-4d0d-a74d-b558c7e052aa&quot;,&quot;parentUUID&quot;:&quot;d5f796a7-9200-4fc9-8726-8eb2339da83a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f5d18ed0-e298-4aef-93fb-1057f87bd4b3&quot;,&quot;681ada45-c346-4d0d-a74d-b558c7e052aa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:47,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;df906220-2d3b-4ea6-95d3-db70da8a63ab&quot;,&quot;title&quot;:&quot;Core Service processes/tasks&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()\nlet test_yml = await getTestConfig();\ntest_data = test_yml.data;\nrecipient = [{ \&quot;BaseObjectSID\&quot;: \&quot;\&quot;, \&quot;ContactType\&quot;: 2, \&quot;ReferenceObjectSID\&quot;: \&quot;\&quot;, \&quot;SID\&quot;: test_data.contact_sid }]&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63d5a73c-940d-46f2-81e0-43cb7742274e&quot;,&quot;parentUUID&quot;:&quot;df906220-2d3b-4ea6-95d3-db70da8a63ab&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5513dc82-8e71-4862-8bb9-57a2b13d6dc7&quot;,&quot;title&quot;:&quot;GET {sid}&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {sid} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.task_sid)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6c00903-9a10-40b4-930e-f21a1887d52d&quot;,&quot;parentUUID&quot;:&quot;5513dc82-8e71-4862-8bb9-57a2b13d6dc7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f6c00903-9a10-40b4-930e-f21a1887d52d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;a1c5c1c7-0656-4353-b20f-f23c6b3dff85&quot;,&quot;title&quot;:&quot;GET {task_sid}/copy&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/copy core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:269,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/processes/tasks/&#x27; + test_data.task_sid + &#x27;/copy&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            //console.log(res.body);\n            coreResult = res.body;\n            //console.log(res.body);\n            expect(res.status).to.equal(200);\n            expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2186bb6c-f3f4-4297-bc66-b80c96fc4b25&quot;,&quot;parentUUID&quot;:&quot;a1c5c1c7-0656-4353-b20f-f23c6b3dff85&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2186bb6c-f3f4-4297-bc66-b80c96fc4b25&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:269,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;9f1e744b-865b-4286-a995-30e9df5ed22a&quot;,&quot;title&quot;:&quot;GET {task_sid}/notification&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/notification core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:30,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/notification&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81b2d5ac-f643-4bd8-97d5-8b3832817fd2&quot;,&quot;parentUUID&quot;:&quot;9f1e744b-865b-4286-a995-30e9df5ed22a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;81b2d5ac-f643-4bd8-97d5-8b3832817fd2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:30,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;1957e92e-3e84-43fc-b3de-4f3cc5ae2299&quot;,&quot;title&quot;:&quot;GET {task_sid}/notification/restore&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/notification/restore core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:78,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/notification/restore&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;925e7478-9202-4ee5-90e7-32e122603913&quot;,&quot;parentUUID&quot;:&quot;1957e92e-3e84-43fc-b3de-4f3cc5ae2299&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;925e7478-9202-4ee5-90e7-32e122603913&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:78,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;03ee7ec4-8d94-4f1e-922d-9c9396353bbb&quot;,&quot;title&quot;:&quot;GET {task_sid}/notification/{enabledisable}&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/notification/{enabledisable} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/notification/enabled&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e56da828-21e7-4613-8fbb-93286773daf9&quot;,&quot;parentUUID&quot;:&quot;03ee7ec4-8d94-4f1e-922d-9c9396353bbb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e56da828-21e7-4613-8fbb-93286773daf9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:33,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;2021f45f-0159-4d1a-b666-58e16f52cdab&quot;,&quot;title&quot;:&quot;POST notification/save&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks POST notification/save core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:50,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/tasks/notification/save&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(notification)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b057a317-29ef-48bd-93d6-5dde1b2a6b1e&quot;,&quot;parentUUID&quot;:&quot;2021f45f-0159-4d1a-b666-58e16f52cdab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b057a317-29ef-48bd-93d6-5dde1b2a6b1e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:50,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;059ed435-c518-4d19-9381-429f71b521ac&quot;,&quot;title&quot;:&quot;GET {task_sid}/notification/advancedsettings&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/notification/advancedsettings core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/notification/advancesettings&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = JSON.stringify(res.body);\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e713c34-8614-47cd-b9cc-851f894f8616&quot;,&quot;parentUUID&quot;:&quot;059ed435-c518-4d19-9381-429f71b521ac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2e713c34-8614-47cd-b9cc-851f894f8616&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;1869b383-286b-4479-a77a-22a79ac241e2&quot;,&quot;title&quot;:&quot;GET {task_sid}/recipients&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/recipients core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:56,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipients/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7794ac17-a7fa-4789-9a77-4525ac8df677&quot;,&quot;parentUUID&quot;:&quot;1869b383-286b-4479-a77a-22a79ac241e2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7794ac17-a7fa-4789-9a77-4525ac8df677&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:56,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;e3f5b801-ec0c-4dec-a699-21a88c40b022&quot;,&quot;title&quot;:&quot;POST {task_sid}/recipients/add&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks POST {task_sid}/recipients/add core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:40,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipients/add&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(recipient);\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1585ea5d-e1cd-47c2-95d8-61532962c3d5&quot;,&quot;parentUUID&quot;:&quot;e3f5b801-ec0c-4dec-a699-21a88c40b022&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1585ea5d-e1cd-47c2-95d8-61532962c3d5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:40,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;c4992332-577a-40ba-b770-65b2f14c3d36&quot;,&quot;title&quot;:&quot;POST {task_sid}/recipients/remove&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks POST {task_sid}/recipients/remove core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:41,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipients/remove&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(recipient);\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1af8beb7-8f20-4de7-9588-69aefab04d40&quot;,&quot;parentUUID&quot;:&quot;c4992332-577a-40ba-b770-65b2f14c3d36&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1af8beb7-8f20-4de7-9588-69aefab04d40&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:41,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;9b7a367d-d950-4759-9955-9865b35428fa&quot;,&quot;title&quot;:&quot;GET {task_sid}/recipsettings&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/recipsettings core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipsettings/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = JSON.stringify(res.body);\nexpect(res.status).to.equal(200);\n// expect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0b806d2-7e5c-4d74-9192-4bceb772ea3f&quot;,&quot;parentUUID&quot;:&quot;9b7a367d-d950-4759-9955-9865b35428fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a0b806d2-7e5c-4d74-9192-4bceb772ea3f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;ed62cbcb-a1e9-4151-9c9b-2eb287a9d36a&quot;,&quot;title&quot;:&quot;GET task_sid}/recipients/dynamic&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET task_sid}/recipients/dynamic core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipients/dynamic/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = JSON.stringify(res.body);\nexpect(res.status).to.equal(200);\nexpect(res.body.TotalItemCnt).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5bdba8e-b21f-433d-8bda-05688062e66e&quot;,&quot;parentUUID&quot;:&quot;ed62cbcb-a1e9-4151-9c9b-2eb287a9d36a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f5bdba8e-b21f-433d-8bda-05688062e66e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;1af90830-123d-4d0b-9d46-58648ebe6cc5&quot;,&quot;title&quot;:&quot;Core Service systemmessages&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f01088a7-1790-4a0b-97c0-c2f46386a62b&quot;,&quot;parentUUID&quot;:&quot;1af90830-123d-4d0b-9d46-58648ebe6cc5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8db30d32-be57-4d9f-b0cd-7ce7ba2d33cf&quot;,&quot;title&quot;:&quot;POST /systemmessages/save&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should save a systemmessage&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages POST /systemmessages/save it should save a systemmessage&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:93,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .post(&#x27;/systemmessages/save/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send(testMsg)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\n\n// verify systemMessage is in the list\nres = await chai.request(newUrlBase)\n      .get(&#x27;/systemmessages/list/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst idx = res.body.Items.findIndex(item =&gt; item.MessageBody == testMsg.MessageBody);\nexpect(idx).to.be.greaterThan(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c94a554-d1c9-494f-a10e-2ee2b14c9e4a&quot;,&quot;parentUUID&quot;:&quot;8db30d32-be57-4d9f-b0cd-7ce7ba2d33cf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1c94a554-d1c9-494f-a10e-2ee2b14c9e4a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:93,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;9b69fefd-363b-4d25-8f52-915057121398&quot;,&quot;title&quot;:&quot;GET /systemmessages/list&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all systemmessages&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages GET /systemmessages/list it should GET all systemmessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:34,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .get(&#x27;/systemmessages/list/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n  \ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed0fc3e0-164e-4fe6-8f08-29cae27150d3&quot;,&quot;parentUUID&quot;:&quot;9b69fefd-363b-4d25-8f52-915057121398&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ed0fc3e0-164e-4fe6-8f08-29cae27150d3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:34,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;f1f670ff-414c-45ab-b946-25b14fd86bb7&quot;,&quot;title&quot;:&quot;GET /systemmessages/active/list&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET active systemmessages&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages GET /systemmessages/active/list it should GET active systemmessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .get(&#x27;/systemmessages/active/list/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n  \ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;013503ae-035c-4585-8a95-7e47138b8ab3&quot;,&quot;parentUUID&quot;:&quot;f1f670ff-414c-45ab-b946-25b14fd86bb7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;013503ae-035c-4585-8a95-7e47138b8ab3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:31,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;87fa05c6-86ef-456f-b99a-6b3241e067f8&quot;,&quot;title&quot;:&quot;/systemmessages/{sid}}&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET system message by SID&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages /systemmessages/{sid}} it should GET system message by SID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:48,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n             .get(&#x27;/systemmessages/list/script/&#x27;)\n             .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n       \n             expect(res.status).to.equal(200);\n             expect(res.body.Items).to.exist;\n             const testSystemMsgSID = res.body.Items[0].SID;\n             res = await chai.request(newUrlBase)\n             .get(`/systemmessages/${testSystemMsgSID}/script/`)\n             .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n             expect(res.status).to.equal(200);\n             expect(res.body.SID).to.equal(testSystemMsgSID);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;55166bce-90ab-4583-86cc-d90e4b4dab53&quot;,&quot;parentUUID&quot;:&quot;87fa05c6-86ef-456f-b99a-6b3241e067f8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;55166bce-90ab-4583-86cc-d90e4b4dab53&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:48,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;6774548a-e4d2-4d8f-81c3-12579bbdfd48&quot;,&quot;title&quot;:&quot;GET /systemmessages/delete&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE system message&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages GET /systemmessages/delete it should DELETE system message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:71,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/systemmessages/list/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n      \nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst testSystemMsgSID = res.body.Items[0].SID;\nres = await chai.request(newUrlBase)\n  .post(&#x27;/systemmessages/delete/script/&#x27;) \n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n  .send([testSystemMsgSID])\n        \nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\nexpect(res.text).to.equal(&#x27;1&#x27;);\n        \n// verify that system message is not in the list anymore\nres = await chai.request(newUrlBase)\n      .get(&#x27;/systemmessages/list/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst idx = res.body.Items.findIndex(item =&gt; item.SID == testSystemMsgSID);\nexpect(idx).to.equal(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2cd3ebcb-ff8d-4ecd-9236-5ce8d3d15d23&quot;,&quot;parentUUID&quot;:&quot;6774548a-e4d2-4d8f-81c3-12579bbdfd48&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2cd3ebcb-ff8d-4ecd-9236-5ce8d3d15d23&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:71,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;e45c368f-80f0-4e2b-a410-aa8abe2e2cdd&quot;,&quot;title&quot;:&quot;Core Service System Process&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/systemProcess.test.js&quot;,&quot;file&quot;:&quot;/test/systemProcess.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service System Process \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c64af315-1a91-43dc-82d4-b2906e341101&quot;,&quot;parentUUID&quot;:&quot;e45c368f-80f0-4e2b-a410-aa8abe2e2cdd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;61ce3ab6-d285-43f0-80bb-0c33ecfdca1e&quot;,&quot;title&quot;:&quot;GET S/SystemProcess/list&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/systemProcess.test.js&quot;,&quot;file&quot;:&quot;/test/systemProcess.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should save a systemmessage&quot;,&quot;fullTitle&quot;:&quot;Core Service System Process GET S/SystemProcess/list it should save a systemmessage&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:65,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/SystemProcess/list&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;598e2568-d8b1-4504-9a94-40fb32a09b9d&quot;,&quot;parentUUID&quot;:&quot;61ce3ab6-d285-43f0-80bb-0c33ecfdca1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;598e2568-d8b1-4504-9a94-40fb32a09b9d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:65,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;0fa08f3d-81c6-4e1d-9363-35947ffd4326&quot;,&quot;title&quot;:&quot;Core Service system Settings&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/systemSettings.test.js&quot;,&quot;file&quot;:&quot;/test/systemSettings.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service system Settings \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;afd2075b-a85d-4a9a-9bcc-e4c9bbe623c4&quot;,&quot;parentUUID&quot;:&quot;0fa08f3d-81c6-4e1d-9363-35947ffd4326&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;30f44350-4230-4c86-9e20-c8cdc74640bd&quot;,&quot;title&quot;:&quot;GET /systemsettings/list&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/systemSettings.test.js&quot;,&quot;file&quot;:&quot;/test/systemSettings.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service system Settings GET /systemsettings/list core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/systemsettings/list/script/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n// expect(res.body.InstanceSID).to.exist\ncoreResult = res.body;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;74bc61b4-6b5d-45a5-93a7-97e16e49b803&quot;,&quot;parentUUID&quot;:&quot;30f44350-4230-4c86-9e20-c8cdc74640bd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;74bc61b4-6b5d-45a5-93a7-97e16e49b803&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;d043c20a-e6ad-4e82-9a06-7f08ac3338f2&quot;,&quot;title&quot;:&quot;Core Service Tabs&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/tabs.test.js&quot;,&quot;file&quot;:&quot;/test/tabs.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service Tabs \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f59ddfb-d52f-46c7-9f48-93942f34532e&quot;,&quot;parentUUID&quot;:&quot;d043c20a-e6ad-4e82-9a06-7f08ac3338f2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;23da8ec2-84d1-43e0-aba6-a33cfca0bb11&quot;,&quot;title&quot;:&quot;GET {sid}&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/tabs.test.js&quot;,&quot;file&quot;:&quot;/test/tabs.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service Tabs GET {sid} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/tabs/5ffbf397-8b3a-4d06-a773-58158e39d46f/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Banner).to.exist\ncoreResult = res.body;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d17045b8-48e6-4f48-891c-fcb5aa8306ed&quot;,&quot;parentUUID&quot;:&quot;23da8ec2-84d1-43e0-aba6-a33cfca0bb11&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d17045b8-48e6-4f48-891c-fcb5aa8306ed&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;20ffd017-5bae-4ccb-bbf0-4966ff20ab44&quot;,&quot;title&quot;:&quot;GET {sid}/delete&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/tabs.test.js&quot;,&quot;file&quot;:&quot;/test/tabs.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service &quot;,&quot;fullTitle&quot;:&quot;Core Service Tabs GET {sid}/delete core-service &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/tabs/5ffbf397-8b3a-4d06-a773-58158e39d46f/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Banner).to.exist\ncoreResult = res.body;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c4bc5c3-bd0d-489b-b3fe-75472e739bff&quot;,&quot;parentUUID&quot;:&quot;20ffd017-5bae-4ccb-bbf0-4966ff20ab44&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8c4bc5c3-bd0d-489b-b3fe-75472e739bff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;ecfce97a-5f6a-49bb-9f61-6664d8bef16c&quot;,&quot;title&quot;:&quot;Core Service Utilities&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/utilities.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service Utilities \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d3c9257-c7ba-49f5-9746-c0681588715e&quot;,&quot;parentUUID&quot;:&quot;ecfce97a-5f6a-49bb-9f61-6664d8bef16c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4e80d5d4-60e8-45ad-9ea5-34aba8d27ef4&quot;,&quot;title&quot;:&quot;locale&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Utilities locale core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/Utilities/locales/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            //console.log(res.body);\n            coreResult = res.body;\n            expect(res.status).to.equal(200);\n            // expect(res.text).to.exist;\n            // expect(res.text).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3871ef97-8bd4-4e1a-8875-eeadda79568b&quot;,&quot;parentUUID&quot;:&quot;4e80d5d4-60e8-45ad-9ea5-34aba8d27ef4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3871ef97-8bd4-4e1a-8875-eeadda79568b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;6ead5f53-7e80-4d34-b6cf-9ba0fa92074e&quot;,&quot;title&quot;:&quot;GET /Utilities/timezone&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/core-service/test/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Utilities GET /Utilities/timezone core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/Utilities/timezone&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body[0]).to.be.an(&#x27;array&#x27;).that.does.include(&#x27;Etc/GMT+12&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;72e49e47-e944-4755-b6f6-71de1adc8491&quot;,&quot;parentUUID&quot;:&quot;6ead5f53-7e80-4d34-b6cf-9ba0fa92074e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;72e49e47-e944-4755-b6f6-71de1adc8491&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;1aa13d45-827c-4ac0-b18c-08fcb8e21e20&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;92fd95de-ec3e-44f5-924c-8d84d85503fe&quot;,&quot;title&quot;:&quot;Files db controller tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/files-works/test/db/file.controller.test.js&quot;,&quot;file&quot;:&quot;/test/db/file.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await testLib.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc1508b8-e7b2-487e-9e33-9115f83a3379&quot;,&quot;parentUUID&quot;:&quot;92fd95de-ec3e-44f5-924c-8d84d85503fe&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await fileController.removeFiles(tenant, {path: \&quot;/created/by/mocha/test\&quot;});\nconsole.log(deleted);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f08618e5-92ee-42c6-9d60-2d451e062c48&quot;,&quot;parentUUID&quot;:&quot;92fd95de-ec3e-44f5-924c-8d84d85503fe&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c407bf3c-7f60-465a-9407-c2ee8c07a4a3&quot;,&quot;title&quot;:&quot;file crud &quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/files-works/test/db/file.controller.test.js&quot;,&quot;file&quot;:&quot;/test/db/file.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  should create a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const file = await fileController.createFile(tenant, fileObj);\nsid = file.sid;\nexpect(sid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;519d8419-3492-4b32-85c3-61648ce77a76&quot;,&quot;parentUUID&quot;:&quot;c407bf3c-7f60-465a-9407-c2ee8c07a4a3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  should get a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;file = await fileController.getFile(tenant, sid);\nexpect(file).to.exist;\nexpect(file.sid).to.equal(sid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0caa95ae-e2fb-43d2-a7df-2a4ce9f42cad&quot;,&quot;parentUUID&quot;:&quot;c407bf3c-7f60-465a-9407-c2ee8c07a4a3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  should update a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const updatedFile = await fileController.updateFile(\n  tenant,\n  file.toObject()\n);\nexpect(updatedFile).to.exist;\nexpect(updatedFile.sid).to.equal(sid);\nexpect(updatedFile.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d945058a-f2ab-47da-b66f-ccf441616307&quot;,&quot;parentUUID&quot;:&quot;c407bf3c-7f60-465a-9407-c2ee8c07a4a3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  delete a a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const deleted = await fileController.removeFile(tenant, sid);\nexpect(deleted).to.exist;\nexpect(deleted.deletedCount).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c560c89-ccda-4b3a-8a8f-c8bbfae79020&quot;,&quot;parentUUID&quot;:&quot;c407bf3c-7f60-465a-9407-c2ee8c07a4a3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;519d8419-3492-4b32-85c3-61648ce77a76&quot;,&quot;0caa95ae-e2fb-43d2-a7df-2a4ce9f42cad&quot;,&quot;d945058a-f2ab-47da-b66f-ccf441616307&quot;,&quot;6c560c89-ccda-4b3a-8a8f-c8bbfae79020&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:39,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f9c28bc3-2d94-46e1-8fbd-b27fefee651a&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c116ea62-200f-4197-a5ce-36c1f24af9ed&quot;,&quot;title&quot;:&quot;Integrify Libs JWT Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86e7365b-a4d7-4cb6-88df-be34c9a20fa8&quot;,&quot;parentUUID&quot;:&quot;c116ea62-200f-4197-a5ce-36c1f24af9ed&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;907d29db-5362-409a-ac4d-dec1010dff65&quot;,&quot;title&quot;:&quot;getSystemToken&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a system token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests getSystemToken should return a system token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nlet token = await jwt.getSystemToken(process.env.INTEGRIFY_ENV_TOKEN, tenant)\nexpect(token).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb4a69e2-82a0-4a95-a3a5-0ab75b3dce8c&quot;,&quot;parentUUID&quot;:&quot;907d29db-5362-409a-ac4d-dec1010dff65&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bb4a69e2-82a0-4a95-a3a5-0ab75b3dce8c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;98119c58-8e8a-4ed7-bf40-f85831f46acb&quot;,&quot;title&quot;:&quot;createRefreshToken&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a refresh token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests createRefreshToken should return a refresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet exists = await redis.zrankAsync(tenant + \&quot;.refreshTokens\&quot;, refreshToken)\nexpect(refreshToken).to.exist;\nexpect(exists !== null).to.be.true&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21da7b07-c61c-4ad1-9207-330a49e852e1&quot;,&quot;parentUUID&quot;:&quot;98119c58-8e8a-4ed7-bf40-f85831f46acb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;21da7b07-c61c-4ad1-9207-330a49e852e1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;67388b94-b7e2-40f0-b7b8-dfc77465148b&quot;,&quot;title&quot;:&quot;verifyRefreshToken&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true for the non-expired token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests verifyRefreshToken should return true for the non-expired token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet exists = await jwt.verifyRefreshToken(tenant, refreshToken, options)\nexpect(exists).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cfeef52b-4dda-471b-b149-27e61ddc142f&quot;,&quot;parentUUID&quot;:&quot;67388b94-b7e2-40f0-b7b8-dfc77465148b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false for the expired token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests verifyRefreshToken should return false for the expired token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5003,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\nlet refreshToken = await jwt.createRefreshToken(tenant, options)\nawait delay(5000);\nlet exists = await jwt.verifyRefreshToken(tenant, refreshToken, options)\nexpect(exists).to.be.false\nexists = await redis.zrankAsync(tenant + \&quot;.refreshTokens\&quot;, refreshToken)\nexpect(exists === null).to.be.true&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af9bad31-4070-4e20-9a09-6beaf2fa6b56&quot;,&quot;parentUUID&quot;:&quot;67388b94-b7e2-40f0-b7b8-dfc77465148b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cfeef52b-4dda-471b-b149-27e61ddc142f&quot;,&quot;af9bad31-4070-4e20-9a09-6beaf2fa6b56&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5005,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;069bc7ba-db81-4096-84de-4e59d1b0d932&quot;,&quot;title&quot;:&quot;issueJwt&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a JWT&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests issueJwt should return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\noptions.expiresInAmount = 15\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\n//let exists = await jwt.verifyRefreshToken(tenant, refreshToken, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\noptions.expiresInAmount = 5\nexpect(token).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bee4ba3e-e818-4c95-abb3-281624b2c2b9&quot;,&quot;parentUUID&quot;:&quot;069bc7ba-db81-4096-84de-4e59d1b0d932&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bee4ba3e-e818-4c95-abb3-281624b2c2b9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6b130065-1ebb-43a9-b6c5-5c58673001b1&quot;,&quot;title&quot;:&quot;verifyJwt&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a JWT&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests verifyJwt should return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\nlet verified = jwt.verifyJwt(token, options);\nexpect(verified).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19e71c46-8d4f-4ea4-b957-9c15262b4e55&quot;,&quot;parentUUID&quot;:&quot;6b130065-1ebb-43a9-b6c5-5c58673001b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail for an expired JWT&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests verifyJwt should fail for an expired JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5007,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\nawait delay(5000);\nlet verified, error;\ntry {\n   verified = await jwt.verifyJwt(token, options)\n} catch(e) {\n    error = e;\n}\nexpect(error).to.exist\nexpect(error.name).to.equal(\&quot;TokenExpiredError\&quot;)\nexpect(verified).to.not.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64f4077a-ae82-4b66-ae5f-44744df29f8d&quot;,&quot;parentUUID&quot;:&quot;6b130065-1ebb-43a9-b6c5-5c58673001b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;19e71c46-8d4f-4ea4-b957-9c15262b4e55&quot;,&quot;64f4077a-ae82-4b66-ae5f-44744df29f8d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5009,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8b6e5961-dbb0-45b5-99a0-13b568e34e1f&quot;,&quot;title&quot;:&quot;renewJwt&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a new JWT using a valid refresh token and an expired token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests renewJwt should return a new JWT using a valid refresh token and an expired token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3009,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\noptions.expiresInAmount = 5;\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\nawait delay(3000); //let the token JWT time out\nlet error;\ntry {\n    verified = await jwt.verifyJwt(token, options)\n } catch(e) {\n     error = e;\n}\nexpect(error).to.exist\nexpect(error.name).to.equal(\&quot;TokenExpiredError\&quot;)\ntoken = await jwt.renewJwt(token,refreshToken, options)\nexpect(token).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6187b7e-1304-415d-8bf2-c7f804de8dac&quot;,&quot;parentUUID&quot;:&quot;8b6e5961-dbb0-45b5-99a0-13b568e34e1f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to return a new JWT using a invalid refresh token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests renewJwt should fail to return a new JWT using a invalid refresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5017,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\noptions.expiresInAmount = 2;\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\nawait delay(5000); //let the token JWT time out\nlet error;\ntry {\n    verified = await jwt.verifyJwt(token, options)\n } catch(e) {\n     error = e;\n}\nexpect(error).to.exist\nexpect(error.name).to.equal(\&quot;TokenExpiredError\&quot;)\ntry {\n    token = await jwt.renewJwt(token,refreshToken, options)\n} catch(e) {\n    error = e\n}\nexpect(error).to.exist\nexpect(error.name).to.equal(\&quot;TokenExpiredError\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54a4b516-80c6-4e4d-8eaf-8960cc43eb00&quot;,&quot;parentUUID&quot;:&quot;8b6e5961-dbb0-45b5-99a0-13b568e34e1f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c6187b7e-1304-415d-8bf2-c7f804de8dac&quot;,&quot;54a4b516-80c6-4e4d-8eaf-8960cc43eb00&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8026,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4899de0b-7a81-4c47-89db-67a943469e16&quot;,&quot;title&quot;:&quot;reIssueJwt&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a new JWT using a valid refresh token and an Contact&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests reIssueJwt should return a new JWT using a valid refresh token and an Contact&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\noptions.expiresInAmount = 5;\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\ntoken = await jwt.reIssueJwt(Contact,refreshToken, options)\nexpect(token).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9bbc230d-2774-4b46-a724-de4b1fa24192&quot;,&quot;parentUUID&quot;:&quot;4899de0b-7a81-4c47-89db-67a943469e16&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9bbc230d-2774-4b46-a724-de4b1fa24192&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ae51b37c-0119-41e3-9f83-e01be5d47a34&quot;,&quot;title&quot;:&quot;Integrify Libs Config Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/config/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c917681a-28b9-45c5-bdc2-c6e25cd55707&quot;,&quot;title&quot;:&quot;Config&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/config/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config/config.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Config Tests Config \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3091d67-e5a4-4e91-abf9-5b5f07f9f7e2&quot;,&quot;parentUUID&quot;:&quot;c917681a-28b9-45c5-bdc2-c6e25cd55707&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;09728fba-36a7-4ceb-ad1b-9b4b251c9818&quot;,&quot;title&quot;:&quot;get a config from redis&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/config/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should have config.mongo&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Config Tests Config get a config from redis should have config.mongo&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(config.mongo).to.exist;\n                //expect(true).to.equal(true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d18c9bb1-39d3-4f21-b012-b75904590f6c&quot;,&quot;parentUUID&quot;:&quot;09728fba-36a7-4ceb-ad1b-9b4b251c9818&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d18c9bb1-39d3-4f21-b012-b75904590f6c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ab6123c0-39e7-4f19-9a7c-70b6454a1a6e&quot;,&quot;title&quot;:&quot;log the latest git commit&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/config/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the lates git commit&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Config Tests Config log the latest git commit should return the lates git commit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let commit = Config.logRunningGitCommit(&#x27;integrify-libs&#x27;, true);\nexpect(commit).to.exist;\n//expect(true).to.equal(true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ba072fa-f4ab-48df-ade1-1556fff1b82c&quot;,&quot;parentUUID&quot;:&quot;ab6123c0-39e7-4f19-9a7c-70b6454a1a6e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4ba072fa-f4ab-48df-ade1-1556fff1b82c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a5fc9791-c035-4e09-bf37-5f842b033dc0&quot;,&quot;title&quot;:&quot;Integrify Libs Logger Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/logger/logger.test.js&quot;,&quot;file&quot;:&quot;/test/integration/logger/logger.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3645a0f9-7e10-40c5-aafa-606b9cd5b722&quot;,&quot;title&quot;:&quot;Logger&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/logger/logger.test.js&quot;,&quot;file&quot;:&quot;/test/integration/logger/logger.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Logger Tests Logger \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nconfig = config.test;\nthis.timeout(105000);\n//let deletes = await redis.delAsync([`${session.tenant}.permissions.${session.user_sid}`]);\n//cnsole.log(deletes)\n//process.env.DEBUG=\&quot;knex:query\&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16e7291a-32ae-46f1-b113-c31432e8fc9a&quot;,&quot;parentUUID&quot;:&quot;3645a0f9-7e10-40c5-aafa-606b9cd5b722&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;529b49bf-44d1-42b7-992d-57fd57a711d1&quot;,&quot;title&quot;:&quot;info&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/logger/logger.test.js&quot;,&quot;file&quot;:&quot;/test/integration/logger/logger.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should connect log a message&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Logger Tests Logger info should connect log a message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;logger.info(config.tenantOne.tenantId);\n  \nexpect(logger).to.exist;\n              \n//expect(true).to.equal(true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9796fbf9-3a64-4516-b5f3-920f6e11b540&quot;,&quot;parentUUID&quot;:&quot;529b49bf-44d1-42b7-992d-57fd57a711d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9796fbf9-3a64-4516-b5f3-920f6e11b540&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e101b01e-3721-4b41-a375-933eb65bb810&quot;,&quot;title&quot;:&quot;Integrify Libs Parse JWT Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/middleware/parseJWT.test.js&quot;,&quot;file&quot;:&quot;/test/integration/middleware/parseJWT.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Parse JWT Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);        config = await Config.getConfig()\nContact = {\n    contactSid: \&quot;1234\&quot;,\n    userName: \&quot;testuser\&quot;,\n    tenant: config.test.tenantOne.tenantId,\n    email: \&quot;test@test.com\&quot;,\n    name: \&quot;Test User\&quot;\n}\nrefreshTokenPayload = {userName: Contact.userName, contactSid: Contact.contactSid}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ade75f1c-4d65-496d-9445-4d1f1dd67cc9&quot;,&quot;parentUUID&quot;:&quot;e101b01e-3721-4b41-a375-933eb65bb810&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8799619e-61f4-466b-a291-4e1f37270ba5&quot;,&quot;title&quot;:&quot;parse token&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/middleware/parseJWT.test.js&quot;,&quot;file&quot;:&quot;/test/integration/middleware/parseJWT.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return extract data from a token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Parse JWT Tests parse token should return extract data from a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload)\n\ntoken = jsonwebtoken.sign(Contact, config.jwtSecret, {\&quot;audience\&quot;: config.test.tenantOne.tenantId});\nlet req = {headers: {authorization: \&quot;Bearer \&quot; + token}, cookies: {integrifyRefreshToken: refreshToken}}\nawait parseJWT(req, {status:200}, function(){})\nexpect(req.oauth.profile).to.exist;\nexpect(req.oauth.profile.sid).to.equal(\&quot;1234\&quot;);\nexpect(req.oauth.profile.user_name).to.equal(\&quot;testuser\&quot;);\nexpect(req.oauth.tenant).to.equal(config.test.tenantOne.tenantId)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e0971f7-e20f-4319-8e87-6b27260ab7e3&quot;,&quot;parentUUID&quot;:&quot;8799619e-61f4-466b-a291-4e1f37270ba5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2e0971f7-e20f-4319-8e87-6b27260ab7e3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000},{&quot;uuid&quot;:&quot;74b46c1f-e630-4444-8c1d-6ca02029bd1a&quot;,&quot;title&quot;:&quot;auto refresh and parse token&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/middleware/parseJWT.test.js&quot;,&quot;file&quot;:&quot;/test/integration/middleware/parseJWT.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return extract data from a token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Parse JWT Tests auto refresh and parse token should return extract data from a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20032,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let refreshToken = await jwt.createRefreshToken(Contact.tenant, refreshTokenPayload)\n\ntoken = jsonwebtoken.sign(Contact, config.jwtSecret, {\&quot;audience\&quot;: Contact.tenant, expiresIn:1});\n           \nawait delay(20000)\nlet req = {headers: {authorization: \&quot;Bearer \&quot; + token}, cookies: {integrifyRefreshToken: refreshToken}}\n          \nlet mockRes = await mocks.mockResponse();\n\nawait parseJWT(req, mockRes, function(){})\nexpect(req.oauth.profile).to.exist;\nexpect(req.oauth.profile.sid).to.equal(\&quot;1234\&quot;);\nexpect(req.oauth.profile.user_name).to.equal(\&quot;testuser\&quot;);\nexpect(req.oauth.tenant).to.equal(config.test.tenantOne.tenantId)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b496b63a-4648-4b08-b69f-7d40065fcd5b&quot;,&quot;parentUUID&quot;:&quot;74b46c1f-e630-4444-8c1d-6ca02029bd1a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b496b63a-4648-4b08-b69f-7d40065fcd5b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20032,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000},{&quot;uuid&quot;:&quot;45c55847-461d-4f72-b458-01ee4ed39379&quot;,&quot;title&quot;:&quot;use system token&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/middleware/parseJWT.test.js&quot;,&quot;file&quot;:&quot;/test/integration/middleware/parseJWT.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return extract data from a token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Parse JWT Tests use system token should return extract data from a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let req = {headers: {\&quot;integrify-system-token\&quot;: config.test.tenantOne.tenantId + \&quot; \&quot; +  process.env.INTEGRIFY_ENV_TOKEN}}\nawait parseJWT(req, {status:200}, function(){})\nexpect(req.oauth.profile).to.exist;\nexpect(req.oauth.profile.sid).to.equal(\&quot;d8c469c3-f781-4179-a09c-6d148885fb30\&quot;);\nexpect(req.oauth.profile.user_name).to.equal(\&quot;Integrify\&quot;);\nexpect(req.oauth.tenant).to.equal(config.test.tenantOne.tenantId)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5c318df-06d4-4e2e-999c-3b3c61f43fe5&quot;,&quot;parentUUID&quot;:&quot;45c55847-461d-4f72-b458-01ee4ed39379&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b5c318df-06d4-4e2e-999c-3b3c61f43fe5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000},{&quot;uuid&quot;:&quot;89010031-e521-4fdc-b661-5407c5a30f30&quot;,&quot;title&quot;:&quot;Integrify Libs Mongeese Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/mongeese/db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/mongeese/db.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e6e1b5e3-0bda-443e-be1e-50429f5ba7b0&quot;,&quot;title&quot;:&quot;Mongeese&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/mongeese/db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/mongeese/db.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Mongeese Tests Mongeese \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nconsole.log(config)\nconfig = config.test;\nthis.timeout(105000);\n//let deletes = await redis.delAsync([`${session.tenant}.permissions.${session.user_sid}`]);\n//cnsole.log(deletes)\n//process.env.DEBUG=\&quot;knex:query\&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d0bd86b-7eea-4950-9e4b-d8fd76c8cbba&quot;,&quot;parentUUID&quot;:&quot;e6e1b5e3-0bda-443e-be1e-50429f5ba7b0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b1525eb7-c486-4372-af43-507f462062e6&quot;,&quot;title&quot;:&quot;mongoConn&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/mongeese/db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/mongeese/db.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should connect to mongo based on a tenant id&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Mongeese Tests Mongeese mongoConn should connect to mongo based on a tenant id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const tenantId = await config.tenantOne.tenantId;\nvar db = await mongeese.getConn(tenantId);\n    \nexpect(db).to.exist;\nexpect(db.name).to.equal(tenantId);\nexpect(db.readyState).to.equal(2);\n//expect(true).to.equal(true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7d128b2-103a-4029-a999-e1856cb1a27e&quot;,&quot;parentUUID&quot;:&quot;b1525eb7-c486-4372-af43-507f462062e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f7d128b2-103a-4029-a999-e1856cb1a27e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5be65395-399a-49d3-a101-77bf120b1844&quot;,&quot;title&quot;:&quot;Integrify Libs Permissions Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/permissions/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/permissions/permissions.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\nlet config = await Config.getConfig();\nconfig = config.test;\nsession = {user_sid: config.tenantOne.adminUser.sid.toLowerCase(), user_name: config.tenantOne.adminUser.userName, tenant: config.tenantOne.tenantId }\nlet deletes = await redis.delAsync([`${session.tenant}.permissions.${session.user_sid}`]);\nconsole.log(deletes)\n//process.env.DEBUG=\&quot;knex:query\&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ba44cf2-33e0-4ce4-abad-9886ee1cc219&quot;,&quot;parentUUID&quot;:&quot;5be65395-399a-49d3-a101-77bf120b1844&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await redis.delAsync([`${session.tenant}.permissions.${session.user_sid}`]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44b3cb9b-ff7d-4af1-af03-86c1f754a43b&quot;,&quot;parentUUID&quot;:&quot;5be65395-399a-49d3-a101-77bf120b1844&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a9317dcf-9ce1-4f9a-8f13-a54864e6e891&quot;,&quot;title&quot;:&quot;currentUserPermssions&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/permissions/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/permissions/permissions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should cache and return the current users permssiosn based on a passed-in session&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests currentUserPermssions should cache and return the current users permssiosn based on a passed-in session&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:145,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nlet perms = await permissions.currentUserPermissions(session);\nlet cached =  await redis.getAsync([`${session.tenant}.permissions.${session.user_sid}`]);\ncached = JSON.parse(cached)\nexpect(perms).length.to.be.gt(0);\nexpect(cached.length).to.equal(perms.length)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac3c623c-6fba-4c96-b462-e1a31caec609&quot;,&quot;parentUUID&quot;:&quot;a9317dcf-9ce1-4f9a-8f13-a54864e6e891&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ac3c623c-6fba-4c96-b462-e1a31caec609&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:145,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;23729aaf-7d8d-4a9b-823e-0ec46614a923&quot;,&quot;title&quot;:&quot;isSysAdmin&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/permissions/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/permissions/permissions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should cache and return the current users permssiosn based on a passed-in session&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests isSysAdmin should cache and return the current users permssiosn based on a passed-in session&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nlet perms = await permissions.isSysAdmin(session);\nexpect(perms).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d799f19-749c-4e33-8910-3521b282caf2&quot;,&quot;parentUUID&quot;:&quot;23729aaf-7d8d-4a9b-823e-0ec46614a923&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6d799f19-749c-4e33-8910-3521b282caf2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9bb3490b-9d73-4447-a6b0-aefb28d80d62&quot;,&quot;title&quot;:&quot;hasPermissions&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/permissions/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/permissions/permissions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true for sysAdmin permissions&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return true for sysAdmin permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.sysAdmin);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    \&quot;irrelevantObjectGuid\&quot;,\n    \&quot;irrelevantCategoryGuid\&quot;, \&quot;irrelevantPublishStatus\&quot;);\nexpect(hasPerms).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ffc80c2-b7ea-439c-9cac-e18838cd7b4a&quot;,&quot;parentUUID&quot;:&quot;9bb3490b-9d73-4447-a6b0-aefb28d80d62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return true for System scoped permissions&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return true for System scoped permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.systemScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    \&quot;irrelevantObjectGuid\&quot;,\n    \&quot;irrelevantCategoryGuid\&quot;,\n    \&quot;irrelevantPublishStatus\&quot;);\nexpect(hasPerms).to.be.true;\nlet perms = await permissions.isSysAdmin(session);\nexpect(perms).to.be.undefined&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03fa9f00-f1ef-46f7-81bf-1362bbc806c9&quot;,&quot;parentUUID&quot;:&quot;9bb3490b-9d73-4447-a6b0-aefb28d80d62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return true for category scoped permissions&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return true for category scoped permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.categoryScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    \&quot;irrelevantObjectGuid\&quot;,\n    mocks.categoryScoped[0].ownerSid,\n    mocks.categoryScoped[0].publishStatus);\nexpect(hasPerms).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d7c1c52-abc7-4e47-a1f6-0dbba6715a96&quot;,&quot;parentUUID&quot;:&quot;9bb3490b-9d73-4447-a6b0-aefb28d80d62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return true for Object scoped permissions&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return true for Object scoped permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.objectScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    mocks.objectScoped[0].ownerSid,\n    \&quot;irrelevantCategoryGuid\&quot;,\n    mocks.categoryScoped[0].publishStatus);\nexpect(hasPerms).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31309fbc-e86f-4075-a85d-da9e73058c4d&quot;,&quot;parentUUID&quot;:&quot;9bb3490b-9d73-4447-a6b0-aefb28d80d62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false for Object scoped permissions with wrong publish status&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return false for Object scoped permissions with wrong publish status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.objectScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    mocks.objectScoped[0].ownerSid,\n    \&quot;irrelevantCategoryGuid\&quot;,\n    \&quot;production\&quot;);\nexpect(hasPerms).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45f4f17e-2a24-4d72-b9d9-47e77e1a453f&quot;,&quot;parentUUID&quot;:&quot;9bb3490b-9d73-4447-a6b0-aefb28d80d62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false for bogus permission type&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return false for bogus permission type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.objectScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edizt&#x27;,\n    mocks.objectScoped[0].ownerSid,\n    \&quot;irrelevantCategoryGuid\&quot;,\n    mocks.categoryScoped[0].publishStatus);\nexpect(hasPerms).to.be.false;\nhasPerms = await permissions.hasPermissions(session,\n    &#x27;holiday&#x27;,\n    &#x27;viewconfig&#x27;);\nexpect(hasPerms).to.be.false&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe22f0cf-0116-42e5-bfdd-f96c66e45329&quot;,&quot;parentUUID&quot;:&quot;9bb3490b-9d73-4447-a6b0-aefb28d80d62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9ffc80c2-b7ea-439c-9cac-e18838cd7b4a&quot;,&quot;03fa9f00-f1ef-46f7-81bf-1362bbc806c9&quot;,&quot;4d7c1c52-abc7-4e47-a1f6-0dbba6715a96&quot;,&quot;31309fbc-e86f-4075-a85d-da9e73058c4d&quot;,&quot;45f4f17e-2a24-4d72-b9d9-47e77e1a453f&quot;,&quot;fe22f0cf-0116-42e5-bfdd-f96c66e45329&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;dbfa5f9d-aba3-4a3c-9d23-d740b9378a3f&quot;,&quot;title&quot;:&quot;Integrify Libs SwaggerClient Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/serviceClient/serviceClient.test.js&quot;,&quot;file&quot;:&quot;/test/integration/serviceClient/serviceClient.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d3d2614a-e4c5-4497-9cf0-f4d2254c4f99&quot;,&quot;title&quot;:&quot;Test portalUrl&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/serviceClient/serviceClient.test.js&quot;,&quot;file&quot;:&quot;/test/integration/serviceClient/serviceClient.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs SwaggerClient Tests Test portalUrl \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//config = await Config.getConfig()\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f55cf664-766c-45b0-b21a-41405e698498&quot;,&quot;parentUUID&quot;:&quot;d3d2614a-e4c5-4497-9cf0-f4d2254c4f99&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e86d06e3-d548-4f80-b340-1ca1e742b21f&quot;,&quot;title&quot;:&quot;first check PORTAL_URL env var, then check redis&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/serviceClient/serviceClient.test.js&quot;,&quot;file&quot;:&quot;/test/integration/serviceClient/serviceClient.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should have gotten portalUrl from redis&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs SwaggerClient Tests Test portalUrl first check PORTAL_URL env var, then check redis should have gotten portalUrl from redis&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.PORTAL_URL = &#x27;&#x27;\nconst serviceClient = new ServiceClient(&#x27;constructor param no longer used&#x27;)\nconst portalUrl = await serviceClient._getPortalUrl()\nexpect(portalUrl).to.exist\nexpect(portalUrl.startsWith(&#x27;http&#x27;)).to.be.true&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7a6e58c-1d21-46a2-8c1f-18d5c47d265c&quot;,&quot;parentUUID&quot;:&quot;e86d06e3-d548-4f80-b340-1ca1e742b21f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should have gotten portalUrl from environment variable&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs SwaggerClient Tests Test portalUrl first check PORTAL_URL env var, then check redis should have gotten portalUrl from environment variable&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.PORTAL_URL = &#x27;http://env.var&#x27;\nconst serviceClient = new ServiceClient()\nconst portalUrl = await serviceClient._getPortalUrl()\nexpect(portalUrl).to.equal(&#x27;http://env.var&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d3e4dd0d-9c4c-424a-92d2-0fe4e07b2f66&quot;,&quot;parentUUID&quot;:&quot;e86d06e3-d548-4f80-b340-1ca1e742b21f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e7a6e58c-1d21-46a2-8c1f-18d5c47d265c&quot;,&quot;d3e4dd0d-9c4c-424a-92d2-0fe4e07b2f66&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;07a611d6-88f9-4da9-82a5-0e7575c42e0e&quot;,&quot;title&quot;:&quot;Integrify Libs Contact Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/sqldb/contacts.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/contacts.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e11477c1-9e9f-435d-8d33-367946d7686b&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/sqldb/contacts.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/contacts.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig();\nuser = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d2bebcd-5d45-4a4c-8b6a-997205a753cd&quot;,&quot;parentUUID&quot;:&quot;e11477c1-9e9f-435d-8d33-367946d7686b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should getContact&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should getContact&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nconst ContactModel = await model.getModel(config.test.tenantOne.tenantId, &#x27;Contact&#x27;)\n//console.dir(ContactModel)\nlet results = await ContactModel.query()\n//console.log(results)\nexpect(results.length).to.be.gt(0)\nlet sampleContactGuid = results[0].contactGuid\nlet contactController = new ContactController(config.test.tenantOne)\nconst Contact = await contactController.getContact(sampleContactGuid);\nexpect(Contact).to.exist;\nexpect(Contact.contactGuid).equal(sampleContactGuid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2897b8b2-dd9f-4641-ad66-28920d1cf1da&quot;,&quot;parentUUID&quot;:&quot;e11477c1-9e9f-435d-8d33-367946d7686b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getContactByUserName&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should getContactByUserName&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nlet sampleUserName = user.userName\nlet contactController = new ContactController(config.test.tenantOne)\nconst Contact = await contactController.getContactByUserName(sampleUserName);\nexpect(Contact).to.exist;\nexpect(Contact.userName).equal(sampleUserName)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;059d06c9-b8f7-4776-840a-19a56b8da172&quot;,&quot;parentUUID&quot;:&quot;e11477c1-9e9f-435d-8d33-367946d7686b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should searchContacts&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should searchContacts&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne)\n            let Contacts = await contactController.searchContacts({&#x27;auth.userName&#x27;: &#x27;iApprov&#x27;, firstName: &#x27;Sys&#x27;, lastName: &#x27;S&#x27;});\n            expect(Contacts[0]).to.exist;\n            expect(Contacts[0].userName).equal(&#x27;iApprove&#x27;)\n            Contacts = await contactController.searchContacts({&#x27;auth.userName&#x27;: &#x27;iApprove&#x27;});\n            let Contact = Contacts[0]\n            expect(Contact).to.exist;\n            expect(Contact.userName).equal(&#x27;iApprove&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95d00e10-0ff1-44dc-8766-d4124f150967&quot;,&quot;parentUUID&quot;:&quot;e11477c1-9e9f-435d-8d33-367946d7686b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should dbAuthContact&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should dbAuthContact&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:85,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\n            const Contact = await contactController.dbAuthContact(user.userName, user.password)\n            expect(Contact).to.exist;\n            expect(Contact.token).to.exist;\n            expect(Contact.refreshToken).to.exist;\n            expect(Contact).to.have.property(&#x27;passwordResetDate&#x27;);\n            expect(Contact.userName).equal(user.userName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;455b6da9-6388-4b6f-94dd-8637ab125d2d&quot;,&quot;parentUUID&quot;:&quot;e11477c1-9e9f-435d-8d33-367946d7686b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getGroupSids&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should getGroupSids&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:77,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\n            const Contact = await contactController.dbAuthContact(user.userName, user.password)\n            expect(Contact).to.exist;\n            let groupSids = await contactController.getGroupSids(Contact.contactSid)\n            expect(groupSids.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5602708e-3bc3-4a4b-a605-28503ca76cfe&quot;,&quot;parentUUID&quot;:&quot;e11477c1-9e9f-435d-8d33-367946d7686b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getAccountsByEmail&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should getAccountsByEmail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\nlet Contacts = await contactController.getAccountsByEmail(config.test.tenantOne.adminUser.email);\nexpect(Contacts.length).to.be.gt(0);\nContacts.forEach(contact =&gt; {\n  expect(contact).to.have.all.keys(&#x27;contactGuid&#x27;, &#x27;ntId&#x27;, &#x27;email&#x27;);\n  expect(contact.email).to.equal(config.test.tenantOne.adminUser.email);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;602f9a9b-ea73-4de8-a2a9-309d6b3c12f0&quot;,&quot;parentUUID&quot;:&quot;e11477c1-9e9f-435d-8d33-367946d7686b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should updatePassword&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should updatePassword&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:115,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\nlet Contact = await contactController.updatePassword(\n  config.test.tenantOne.adminUser.sid,\n  bcrypt.hashSync(config.test.tenantOne.adminUser.password)\n);\nexpect(Contact).to.exist\n  .and.to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00e2319b-d407-4a9c-bbd5-de9db33ebe11&quot;,&quot;parentUUID&quot;:&quot;e11477c1-9e9f-435d-8d33-367946d7686b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2897b8b2-dd9f-4641-ad66-28920d1cf1da&quot;,&quot;059d06c9-b8f7-4776-840a-19a56b8da172&quot;,&quot;95d00e10-0ff1-44dc-8766-d4124f150967&quot;,&quot;455b6da9-6388-4b6f-94dd-8637ab125d2d&quot;,&quot;5602708e-3bc3-4a4b-a605-28503ca76cfe&quot;,&quot;602f9a9b-ea73-4de8-a2a9-309d6b3c12f0&quot;,&quot;00e2319b-d407-4a9c-bbd5-de9db33ebe11&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:325,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cade2ed1-8452-4612-84fb-da9df0ecc173&quot;,&quot;title&quot;:&quot;Integrify Libs Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/sqldb/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8608ee41-0d4e-47f8-a2b1-fad89d8e1671&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/sqldb/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Controller Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig();\nuser = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21ab21a6-dd84-42eb-b501-ba2293b24c71&quot;,&quot;parentUUID&quot;:&quot;8608ee41-0d4e-47f8-a2b1-fad89d8e1671&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Controller Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(controllers.BaseController).to.exist;\nclass TestController extends controllers.BaseController {}            \nconst testController = new TestController(config.test.tenantOne)\nlet tenantDb =  await testController.getTenantDb()\n\nexpect(tenantDb).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2c9e700-58ad-4c84-b56c-f3bd8b88a994&quot;,&quot;parentUUID&quot;:&quot;8608ee41-0d4e-47f8-a2b1-fad89d8e1671&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a2c9e700-58ad-4c84-b56c-f3bd8b88a994&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a7cc7f79-ac96-4e1f-beba-df61754a6470&quot;,&quot;title&quot;:&quot;Integrify Libs Data Instance Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/sqldb/data-instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/data-instance.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig();\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dba1f2c2-4fd8-49c6-8f66-af7d04e5d1ec&quot;,&quot;parentUUID&quot;:&quot;a7cc7f79-ac96-4e1f-beba-df61754a6470&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;65321274-46e6-4d4d-a85e-26cac787fa0b&quot;,&quot;title&quot;:&quot;Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/sqldb/data-instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/data-instance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a consumer model&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Model Tests should get a consumer model&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const DataInstanceModel = await model.getConsumerModel(config.consumersConn, &#x27;DataInstance&#x27;)\nexpect(DataInstanceModel).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46dcb88a-09a7-48cc-bea2-99a9fa456577&quot;,&quot;parentUUID&quot;:&quot;65321274-46e6-4d4d-a85e-26cac787fa0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return data instances&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Model Tests should return data instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const DataInstanceModel = await model.getConsumerModel(config.consumersConn, &#x27;DataInstance&#x27;)\nexpect(DataInstanceModel).to.exist;\nlet results = await DataInstanceModel.query()\nexpect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3a58039-f5c9-4b8a-955a-e0304f2131fb&quot;,&quot;parentUUID&quot;:&quot;65321274-46e6-4d4d-a85e-26cac787fa0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return data instances with settings&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Model Tests should return data instances with settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const DataInstanceModel = await model.getConsumerModel(config.consumersConn, &#x27;DataInstance&#x27;)\nexpect(DataInstanceModel).to.exist;\nlet results = await DataInstanceModel.query().eager(&#x27;[dataInstanceSettings]&#x27;)\nconsole.dir(results)\nexpect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c146858-fd88-4797-ae85-9377d2d1d426&quot;,&quot;parentUUID&quot;:&quot;65321274-46e6-4d4d-a85e-26cac787fa0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;46dcb88a-09a7-48cc-bea2-99a9fa456577&quot;,&quot;a3a58039-f5c9-4b8a-955a-e0304f2131fb&quot;,&quot;8c146858-fd88-4797-ae85-9377d2d1d426&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:34,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3b138b22-e7c3-4c77-b08e-4b8a8fbd2c8e&quot;,&quot;title&quot;:&quot;Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/sqldb/data-instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/data-instance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list datainstances&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Controller Tests should list datainstances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let dataInstanceController = new DataInstanceController();\nlet dataInstances = await dataInstanceController.listDataInstances()\nexpect(dataInstances).to.exist;\nexpect(dataInstances.length).to.be.gt(0)\nexpect(dataInstances[0].dataInstanceSettings.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4a77777-efec-4d0f-8549-e607caef7724&quot;,&quot;parentUUID&quot;:&quot;3b138b22-e7c3-4c77-b08e-4b8a8fbd2c8e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a datainstance&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Controller Tests should get a datainstance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let dataInstanceController = new DataInstanceController();\nlet dataInstance = await dataInstanceController.getDataInstance(config.test.tenantOne.tenantId)\nexpect(dataInstance).to.exist;\nexpect(dataInstance.dataInstanceSettings.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4c597fb-4d20-40d7-9b1c-465e176dca76&quot;,&quot;parentUUID&quot;:&quot;3b138b22-e7c3-4c77-b08e-4b8a8fbd2c8e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a datainstances hash&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Controller Tests should get a datainstances hash&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let dataInstanceController = new DataInstanceController();\nlet dataInstanceHt = await dataInstanceController.GetDataInstancesHash()\nexpect(dataInstanceHt).to.exist;\nexpect(dataInstanceHt[config.test.tenantOne.tenantId]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;656eb3a9-817e-4b10-b8e4-3c16d81f2f41&quot;,&quot;parentUUID&quot;:&quot;3b138b22-e7c3-4c77-b08e-4b8a8fbd2c8e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a datainstance&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Controller Tests should update a datainstance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:54,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let settingVal = new Date().toISOString()\nlet dataInstanceController = new DataInstanceController();\nlet dataInstance = await dataInstanceController.getDataInstance(config.test.tenantOne.tenantId)\nlet settingIdx  = dataInstance.dataInstanceSettings.findIndex((s =&gt; s.settingsKey === &#x27;HelpURL&#x27;));\ndataInstance.dataInstanceSettings[settingIdx].settingsValue = settingVal\ndataInstance  = await dataInstanceController.updateDataInstance(dataInstance)\nexpect(dataInstance.dataInstanceSettings.length).to.be.gt(0)\nlet setting  = dataInstance.dataInstanceSettings.find((s =&gt; s.settingsKey === &#x27;HelpURL&#x27;));\nexpect(setting).to.exist\nexpect(setting.settingsValue).to.equal(settingVal)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5686862-24ba-4c9f-8153-6414bad51f5e&quot;,&quot;parentUUID&quot;:&quot;3b138b22-e7c3-4c77-b08e-4b8a8fbd2c8e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d4a77777-efec-4d0f-8549-e607caef7724&quot;,&quot;b4c597fb-4d20-40d7-9b1c-465e176dca76&quot;,&quot;656eb3a9-817e-4b10-b8e4-3c16d81f2f41&quot;,&quot;d5686862-24ba-4c9f-8153-6414bad51f5e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:103,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1e27331d-76ad-4886-91ea-eab984d07c59&quot;,&quot;title&quot;:&quot;Integrify Libs Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/sqldb/model.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bbee0fce-e21e-4f08-a047-3d747272e7f7&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/sqldb/model.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/model.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig();\nuser = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;307f4c7b-ab0a-4594-9a9d-8dd20d900571&quot;,&quot;parentUUID&quot;:&quot;bbee0fce-e21e-4f08-a047-3d747272e7f7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:54,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nthis.timeout(105000);\nconst ContactModel = await model.bindModel(config.test.tenantOne.tenantId, models.Contact)\n//console.dir(ContactModel)\n//ContactModel.setOptions({excludeDeleted:false})\n//let results = await ContactModel.query().where(&#x27;contactId&#x27;, &#x27;&gt;&#x27;, 0)\n//console.log(results)\nlet results;\nresults = await ContactModel.query().setOptions({excludeDeleted:false}).where(&#x27;contactId&#x27;, &#x27;&gt;&#x27;, 0)\nresults = await ContactModel.query().where(&#x27;contactId&#x27;, &#x27;&gt;&#x27;, 0)\nlet c = await ContactModel.query().findOne({userName: &#x27;iApprove&#x27;}).joinRelated(&#x27;auth&#x27;).select(&#x27;contact.*&#x27;, &#x27;contact.contactGuid as contactSid&#x27;,&#x27;auth.userName as userName&#x27;)\nconsole.log(c)\nlet patched = await c.$query().patch({middleName: \&quot;bob\&quot;})\nconsole.log(patched)\n\n\nexpect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76e9be01-01ba-4c0c-9ccc-6a080bcc5909&quot;,&quot;parentUUID&quot;:&quot;bbee0fce-e21e-4f08-a047-3d747272e7f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;76e9be01-01ba-4c0c-9ccc-6a080bcc5909&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:54,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000},{&quot;uuid&quot;:&quot;704c2da2-a3a3-4cfa-b9e9-992714491170&quot;,&quot;title&quot;:&quot;Integrify Libs Permissions Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/sqldb/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/permissions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;681f2724-2957-4f26-b2cc-241c9c122017&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/sqldb/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/permissions.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Controller Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nuser  = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8a1767b2-d1d4-444f-9421-928328103fc3&quot;,&quot;parentUUID&quot;:&quot;681f2724-2957-4f26-b2cc-241c9c122017&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should getUserPermissionsFromDb&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Controller Tests tests should getUserPermissionsFromDb&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nconst session = {tenantId: config.test.tenantOne.tenantId, user_sid: user.sid}\nlet permissionsController = new PermissionsController(session)\nlet permissions = await permissionsController.getWorkflowPermissionsFromDb(session);\nconsole.log(permissions)\nexpect(permissions[0]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d4096bd-1929-4bcb-8640-6946bc79de91&quot;,&quot;parentUUID&quot;:&quot;681f2724-2957-4f26-b2cc-241c9c122017&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6d4096bd-1929-4bcb-8640-6946bc79de91&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1ffe6720-4ef7-4c6a-a79e-d0bcdcdc315f&quot;,&quot;title&quot;:&quot;Integrify Libs Process Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/sqldb/process.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2b9b4531-7bab-4886-b1e7-b94451ef3e14&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/sqldb/process.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/process.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Process Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nuser  = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2538187-a033-4954-965e-01b0989befac&quot;,&quot;parentUUID&quot;:&quot;2b9b4531-7bab-4886-b1e7-b94451ef3e14&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a process from sql&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Process Model Tests tests should get a process from sql&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:156,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nconst ProcessModel = await model.getModel(config.test.tenantOne.tenantId, &#x27;Process&#x27;)\n\n\nlet results = await ProcessModel.query()\n//console.log(results)\nexpect(results.length).to.be.gt(0)\nlet sampleProcesstGuid = results[0].processGuid\nlet processController = new ProcessController(config.test.tenantOne)\nconst Process = await processController.getFullProcessFromSql(sampleProcesstGuid);\nexpect(Process).to.exist;\nconsole.log([Process])\nexpect(Process.processGuid).equal(sampleProcesstGuid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3e3cfb6-ca99-4392-8633-96bcb96de725&quot;,&quot;parentUUID&quot;:&quot;2b9b4531-7bab-4886-b1e7-b94451ef3e14&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should upsert a process in sql&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Process Model Tests tests should upsert a process in sql&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:639,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nconst ProcessModel = await model.getModel(config.test.tenantOne.tenantId, &#x27;Process&#x27;)\n//console.dir(ContactModel)\nlet results = await ProcessModel.query()\n//console.log(results)\nexpect(results.length).to.be.gt(0)\nlet sampleProcesstGuid = results[0].processGuid\nlet processController = new ProcessController(config.test.tenantOne)\nlet Process = await processController.getFullProcessFromSql(sampleProcesstGuid);\nexpect(Process).to.exist;\nexpect(Process.processGuid).equal(sampleProcesstGuid)\nlet newName = &#x27;Updated &#x27; + new Date().toISOString()\nclonedProcess = JSON.parse(JSON.stringify(Process));\n           \nProcess.objective = newName;\nProcess.tasks[0].internalNotes = newName;\nProcess.processCategory.ordinal = 1;\nawait processController.upsertFullProcess(Process);\nProcess = await processController.getFullProcessFromSql(sampleProcesstGuid);\nexpect(Process.objective).to.equal(newName);\nexpect(Process.tasks[0].internalNotes).to.equal(newName);\nexpect(Process.processCategory.ordinal).equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de24fd0a-f006-411f-be9e-87fcf10931d3&quot;,&quot;parentUUID&quot;:&quot;2b9b4531-7bab-4886-b1e7-b94451ef3e14&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a3e3cfb6-ca99-4392-8633-96bcb96de725&quot;,&quot;de24fd0a-f006-411f-be9e-87fcf10931d3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:795,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0ccc4d5c-69af-4f6b-85e9-3b70adc5ee67&quot;,&quot;title&quot;:&quot;Integrify Libs Tenant tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/sqldb/sqldb-db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/sqldb-db.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;64e6cc85-40f9-40fd-979d-b4c1194bb796&quot;,&quot;title&quot;:&quot;tentantSql tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/sqldb/sqldb-db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/sqldb-db.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tenant tests tentantSql tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// let configClass = await require(&#x27;../../../config&#x27;)\n            // await configClass.setConfigs();\n            // config = await configClass.getConfig();\n            config = await Config.getConfig();\n            this.timeout(100000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3da94b1-7632-4a15-817c-a3fddec0fb05&quot;,&quot;parentUUID&quot;:&quot;64e6cc85-40f9-40fd-979d-b4c1194bb796&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get the consumer Db&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tenant tests tentantSql tests should get the consumer Db&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:58,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let db = await sqlDb.getConsumersDb(config.consumersConn)\nexpect(db).to.exist;\nlet queyResults =  await db.raw(`SELECT * FROM sys.tables WHERE name = &#x27;data_instance&#x27;`)\nexpect(queyResults.length).equal(1)\n//console.log(queyResults)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7db7183a-940c-4691-a279-db7f6ef53f4e&quot;,&quot;parentUUID&quot;:&quot;64e6cc85-40f9-40fd-979d-b4c1194bb796&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;shoulld get the tenant Db&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tenant tests tentantSql tests shoulld get the tenant Db&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let db = await sqlDb.getTenantDb(config.test.tenantOne.tenantId)\nexpect(db).to.exist;\nlet queyResults =  await db.raw(`select * from contact`)\nexpect(queyResults.length).to.be.gt(0)\nqueyResults = await db.raw(\&quot;select * from contact_auth where user_name = :uname\&quot;, {uname: &#x27;iApprove&#x27;})\nexpect(queyResults.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3feda727-2011-45c1-b373-adf0f3e20526&quot;,&quot;parentUUID&quot;:&quot;64e6cc85-40f9-40fd-979d-b4c1194bb796&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7db7183a-940c-4691-a279-db7f6ef53f4e&quot;,&quot;3feda727-2011-45c1-b373-adf0f3e20526&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:62,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;79795c1a-3cba-42bb-ade7-0cd1e453c109&quot;,&quot;title&quot;:&quot;Integrify Libs StreamConsumer Load Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Load Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2587,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(1050000000);\nlet deletes = await redis.delAsync([fullStreamName, eventHistoryName, eventProcessedName, `${tenant}.activeSessions`]);\n/*\nRedis stream stuff:\nYou can scale up by running additional processors in the group. This creates a new Node process and runs a new consumer\nin the existing stream group. The consumer name for each processor will have an incremental suffix so it will be unique\nensuring that each consumer processes a unique set of events.\nWith 3 processors, it handeld a loadSize of a million events as they came in with no backlog build up in the group.\n */\nforkedProcessor = await streamConsumer.forkStreamProcessor()\nforkedProcessor2 = await streamConsumer.forkStreamProcessor()\nforkedProcessor3 = await streamConsumer.forkStreamProcessor()\nfor (let index = 0; index &lt; loadSize; index++) {\n\n    await sp.sendEvent(\&quot;extendSession\&quot;,{\n        token: \&quot;abcd234\&quot;,\n        user: {\n            sid:\&quot;11111\&quot;, \n            user_name: \&quot;iapprove\&quot;, \n            email: \&quot;iapprove@integrify.com\&quot;, \n            name: \&quot;System System\&quot;\n        }\n    })\n\n}\n       \nawait delay(1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63a57dc6-d2b1-4aaf-86be-3ff9f7e07d3a&quot;,&quot;parentUUID&quot;:&quot;79795c1a-3cba-42bb-ade7-0cd1e453c109&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Load Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;forkedProcessor.kill()\nforkedProcessor2.kill()\nforkedProcessor3.kill()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7fe1172f-ec37-45e8-9ede-bdcf4fc99605&quot;,&quot;parentUUID&quot;:&quot;79795c1a-3cba-42bb-ade7-0cd1e453c109&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;11355aa7-913d-4fa1-a19f-708ad4d11bc5&quot;,&quot;title&quot;:&quot;forkStreamProcessor&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;233c9320-932c-4933-ae8a-ef418f87dbdf&quot;,&quot;title&quot;:&quot;processed event count  = history count&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should process events&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Load Tests forkStreamProcessor processed event count  = history count should process events&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processedCount = await redis.zcardAsync(eventProcessedName)\n let historyCount = await redis.zcardAsync(eventHistoryName)\n expect(historyCount).to.equal(processedCount)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1e48c50-4aa7-45c6-8c06-3ca2a33d3ecd&quot;,&quot;parentUUID&quot;:&quot;233c9320-932c-4933-ae8a-ef418f87dbdf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f1e48c50-4aa7-45c6-8c06-3ca2a33d3ecd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f054bc46-c933-41b0-99e6-bddc8db56b5f&quot;,&quot;title&quot;:&quot;Integrify Libs StreamConsumer Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/stream/streamConsumer.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5013,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\nlet deletes = await redis.delAsync([fullStreamName, eventHistoryName, eventProcessedName, `${tenant}.activeSessions`]);\nconsole.log(deletes)\nfor (let index = 0; index &lt; 5; index++) {\n    await sp.sendEvent(\&quot;extendSession\&quot;, {activityDate: new Date(),\n        token: \&quot;abcd234\&quot;,\n        user: {\n            sid:\&quot;11111\&quot;,\n            user_name: \&quot;iapprove\&quot;,\n            email: \&quot;iapprove@integrify.com\&quot;,\n            name: \&quot;System System\&quot;\n        }\n    })\n}\nforkedProcessor = await streamConsumer.forkStreamProcessor()\nawait delay(5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39e929d9-f757-44e4-b85b-ca368eef6944&quot;,&quot;parentUUID&quot;:&quot;f054bc46-c933-41b0-99e6-bddc8db56b5f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e43602c1-c277-4f01-b4b7-7eb2ba55dbd2&quot;,&quot;parentUUID&quot;:&quot;f054bc46-c933-41b0-99e6-bddc8db56b5f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;72586c53-1652-466c-b99f-e8f3863f2d46&quot;,&quot;title&quot;:&quot;forkStreamProcessor&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/stream/streamConsumer.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f5ddf90d-6c1c-4f47-ace9-fa402ae54633&quot;,&quot;title&quot;:&quot;processed event count  = history count&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/stream/streamConsumer.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should process events&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Tests forkStreamProcessor processed event count  = history count should process events&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processedCount = await redis.zcardAsync(eventProcessedName)\n let historyCount = await redis.zcardAsync(eventHistoryName)\n expect(historyCount).to.equal(processedCount)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f963edc4-7c31-450d-a76d-43ebee659785&quot;,&quot;parentUUID&quot;:&quot;f5ddf90d-6c1c-4f47-ace9-fa402ae54633&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f963edc4-7c31-450d-a76d-43ebee659785&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;74b95da3-83f2-46bc-8206-fba79c929bf9&quot;,&quot;title&quot;:&quot;Integrify Libs Stream Publisher Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/stream/streamPublisher.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamPublisher.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4d2bd269-20aa-4671-aa75-ddc4b3ca3636&quot;,&quot;title&quot;:&quot;stream publisher&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/stream/streamPublisher.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamPublisher.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Stream Publisher Tests stream publisher \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(100000)\nprocess.env.jest = \&quot;true\&quot;;\nawait redis.delAsync([fullStreamName, eventHistoryName])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3bc7820-3996-4a67-8c75-6896c4d7ceab&quot;,&quot;parentUUID&quot;:&quot;4d2bd269-20aa-4671-aa75-ddc4b3ca3636&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should handle the constructor&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Stream Publisher Tests stream publisher should handle the constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const sp = new StreamPublisher(testStreamName, tenant);\nexpect(sp.streamName).equal(fullStreamName)\nexpect(sp.baseStreamName).equal(testStreamName)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b678ffbe-2af3-4607-8880-f91b8b1f61bc&quot;,&quot;parentUUID&quot;:&quot;4d2bd269-20aa-4671-aa75-ddc4b3ca3636&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should an sendEvent&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Stream Publisher Tests stream publisher should an sendEvent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:103,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const sp = new StreamPublisher(testStreamName, tenant,1000);\nexpect(sp.streamName).equal(fullStreamName)\n//sendEvent(eventType, data) data will get stringified\nlet id = await sp.sendEvent(testEventType, {foo:\&quot;bar\&quot;, biz:\&quot;buzz\&quot;, beep:{bop:\&quot;bam\&quot;}})   \nexpect(id).to.exist;\nexpect (id.indexOf(\&quot;-\&quot;)).to.be.gt(-1)  \nawait delay(100);\nlet id2 = await sp.sendEvent(testEventType, {foo:\&quot;bar2\&quot;, biz:\&quot;buzz2\&quot;, beep:{bop:\&quot;bam2\&quot;}})   \nexpect (Number(id2.split(\&quot;-\&quot;)[0])).to.be.gt(Number(id.split(\&quot;-\&quot;)[0]))&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19ac1b8b-e7fc-4865-ad05-f2deef11fd5b&quot;,&quot;parentUUID&quot;:&quot;4d2bd269-20aa-4671-aa75-ddc4b3ca3636&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should append to eventhistory&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Stream Publisher Tests stream publisher should append to eventhistory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const sp = new StreamPublisher(testStreamName, tenant, 1000); \n\nlet id = await sp.sendEvent(testEventType, {foo:\&quot;bar\&quot;, biz:\&quot;buzz\&quot;, beep:{bop:\&quot;bam\&quot;}}) \n           \n//console.log(historySet)\nlet historyCount = await redis.zcardAsync(eventHistoryName)\nexpect(historyCount).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1de3c8fd-f70e-442d-9a24-4cea9619ca2c&quot;,&quot;parentUUID&quot;:&quot;4d2bd269-20aa-4671-aa75-ddc4b3ca3636&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b678ffbe-2af3-4607-8880-f91b8b1f61bc&quot;,&quot;19ac1b8b-e7fc-4865-ad05-f2deef11fd5b&quot;,&quot;1de3c8fd-f70e-442d-9a24-4cea9619ca2c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:106,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4db2c09f-4c2c-4069-9b1e-3e30f54cd6af&quot;,&quot;title&quot;:&quot;Integrify Libs Tes-lib Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/test-lib/test-lib.test.js&quot;,&quot;file&quot;:&quot;/test/integration/test-lib/test-lib.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;10631a85-1177-4503-83b5-a72fa536c1ad&quot;,&quot;title&quot;:&quot;Test Config&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/test-lib/test-lib.test.js&quot;,&quot;file&quot;:&quot;/test/integration/test-lib/test-lib.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tes-lib Tests Test Config \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//config = await Config.getConfig()\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a28c61a9-3201-4fc1-9768-812bead6609a&quot;,&quot;parentUUID&quot;:&quot;10631a85-1177-4503-83b5-a72fa536c1ad&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ab43ba74-20ed-489c-a3e7-f312ffbf5c0d&quot;,&quot;title&quot;:&quot;get a test config&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/test-lib/test-lib.test.js&quot;,&quot;file&quot;:&quot;/test/integration/test-lib/test-lib.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should have config.mongo&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tes-lib Tests Test Config get a test config should have config.mongo&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testConfig = await testLib.getTestConfig();\nconsole.log(testConfig)\nexpect(testConfig).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38fa8f4c-e3a9-421d-a0b6-f624aecdb005&quot;,&quot;parentUUID&quot;:&quot;ab43ba74-20ed-489c-a3e7-f312ffbf5c0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;38fa8f4c-e3a9-421d-a0b6-f624aecdb005&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;042bd671-0858-4873-a4a1-ec1e70ba823b&quot;,&quot;title&quot;:&quot;get an auth Token &quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/integrify-libs/test/integration/test-lib/test-lib.test.js&quot;,&quot;file&quot;:&quot;/test/integration/test-lib/test-lib.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should have a auth token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tes-lib Tests Test Config get an auth Token  should have a auth token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const authToken = await testLib.getAuthToken();\nconsole.log(authToken)\nexpect(authToken).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;631c0699-e741-45a4-8e08-5fae8d215f58&quot;,&quot;parentUUID&quot;:&quot;042bd671-0858-4873-a4a1-ec1e70ba823b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;631c0699-e741-45a4-8e08-5fae8d215f58&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fecc10f2-2223-4ff0-be1c-cf866fb9244f&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;912d5071-2c9b-4155-a8a4-a43a886dab23&quot;,&quot;title&quot;:&quot;Scheduler CRUD tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Scheduler CRUD tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests \&quot;before all\&quot; hook in \&quot;Scheduler CRUD tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:130,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntry {\n    testConfig = await serverConfig.setProcessServerConfig()\n    jobCtrl = require(\&quot;../lib/scheduler/mongo/jobCtrl.js\&quot;);\n} catch(e){}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5a67d6b-b5d6-40ed-96e2-96480bdc0cc8&quot;,&quot;parentUUID&quot;:&quot;912d5071-2c9b-4155-a8a4-a43a886dab23&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ab806eef-12d1-475e-a674-a901c093c06b&quot;,&quot;title&quot;:&quot;.save&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;saves the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .save saves the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:30,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let sDate = new Date();\nlet startThis = new Date(\n    new Date().setMinutes(sDate.getMinutes() - 5)\n);\nlet endThis = new Date(\n    new Date().setMinutes(sDate.getMinutes() + 5)\n);\nlet job = {\n    dbName: config.dbName,\n    status: \&quot;Scheduled\&quot;,\n    name: config.name,\n    initData: config.initData,\n    runAs: config.runAs,\n    frequency: \&quot;Recurring\&quot;,\n    rminutes: 1,\n    state: \&quot;ended\&quot;,\n    startDate: startThis,\n    startHour: startThis.getHours(),\n    startMinute: startThis.getMinutes(),\n    startAMPM: startThis.getHours() &gt; 12 ? \&quot;PM\&quot; : \&quot;AM\&quot;,\n    endDate: endThis,\n    endHour: endThis.getHours(),\n    endMinute: endThis.getMinutes(),\n    endAMPM: endThis.getHours() &gt; 12 ? \&quot;PM\&quot; : \&quot;AM\&quot;,\n    jobType: config.jobType\n};\nreturn jobCtrl.save(job).then(saved =&gt; {\n    expect(saved).to.exist;\n    dbJob = saved;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;74fa34e4-4a54-4097-8afa-d2f8feca73b5&quot;,&quot;parentUUID&quot;:&quot;ab806eef-12d1-475e-a674-a901c093c06b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;74fa34e4-4a54-4097-8afa-d2f8feca73b5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:30,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;988c4525-80f5-4226-8787-af572d332b42&quot;,&quot;title&quot;:&quot;.upate&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .upate updates the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;dbJob.name = \&quot;pdq\&quot;;\nreturn jobCtrl.update(dbJob).then(updated =&gt; {\n    expect(updated).to.exist;\n    expect(updated.modifiedDate.getTime()).to.be.greaterThan(\n        updated.createdDate.getTime()\n    );\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99f13206-1def-454f-b278-cc53eef98275&quot;,&quot;parentUUID&quot;:&quot;988c4525-80f5-4226-8787-af572d332b42&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;99f13206-1def-454f-b278-cc53eef98275&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a9833f5c-5696-4d8c-a7ef-e7a2e1a050cf&quot;,&quot;title&quot;:&quot;.getOne&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a job by id&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .getOne should get a job by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;dbJob.name = \&quot;pdq\&quot;;\nreturn jobCtrl.getOne(config.dbName, dbJob._id).then(job =&gt; {\n    expect(job).to.exist;\n    expect(job._id.toString()).to.equal(dbJob._id.toString());\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0124866c-5600-4824-8fa3-7205df281129&quot;,&quot;parentUUID&quot;:&quot;a9833f5c-5696-4d8c-a7ef-e7a2e1a050cf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0124866c-5600-4824-8fa3-7205df281129&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;378ad4df-1fff-49a5-8504-4277cb5eaa63&quot;,&quot;title&quot;:&quot;.getAll&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get all jobs&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .getAll should get all jobs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return jobCtrl.getAll(config.dbName).then(jobs =&gt; {\n    expect(jobs).to.be.an(\&quot;array\&quot;).that.is.not.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;72c97e6b-77d8-43a0-b6e9-c3798c2b565e&quot;,&quot;parentUUID&quot;:&quot;378ad4df-1fff-49a5-8504-4277cb5eaa63&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;72c97e6b-77d8-43a0-b6e9-c3798c2b565e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ff7d21a6-c0b2-4965-aa81-38123a727d0b&quot;,&quot;title&quot;:&quot;.getAll(filter)&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get all jobs of type testToConsole&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .getAll(filter) should get all jobs of type testToConsole&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return jobCtrl.getAll(config.dbName, \&quot;testToConsole\&quot;).then(jobs =&gt; {\n    expect(jobs).to.be.an(\&quot;array\&quot;).that.is.not.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed192f55-7907-4d0e-a16b-a252062dfade&quot;,&quot;parentUUID&quot;:&quot;ff7d21a6-c0b2-4965-aa81-38123a727d0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ed192f55-7907-4d0e-a16b-a252062dfade&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4e78da26-15bb-43d6-aa44-557aee9c77b6&quot;,&quot;title&quot;:&quot;.getAll(filter-bad)&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not have any jobs of type fakeJob&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .getAll(filter-bad) should not have any jobs of type fakeJob&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return jobCtrl.getAll(config.dbName, \&quot;fakeJob\&quot;).then(jobs =&gt; {\n    expect(jobs).to.be.an(\&quot;array\&quot;).that.is.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9bdb833c-d401-41d6-886c-c3abfe033eae&quot;,&quot;parentUUID&quot;:&quot;4e78da26-15bb-43d6-aa44-557aee9c77b6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9bdb833c-d401-41d6-886c-c3abfe033eae&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;952602da-1fa9-4ea6-9385-2fa75576e9cd&quot;,&quot;title&quot;:&quot;.delete&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a job&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .delete should delete a job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return jobCtrl.delete(config.dbName, dbJob._id).then(deleted =&gt; {\n    expect(deleted).to.be.true;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;306775f2-b8f5-4783-b8af-529094d42027&quot;,&quot;parentUUID&quot;:&quot;952602da-1fa9-4ea6-9385-2fa75576e9cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;306775f2-b8f5-4783-b8af-529094d42027&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5bc42369-8109-4b9b-a739-e9a5c924ee3e&quot;,&quot;title&quot;:&quot;Scheduler OneTimeJob&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/onetime.test.js&quot;,&quot;file&quot;:&quot;/test/onetime.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Scheduler OneTimeJob\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob \&quot;before all\&quot; hook in \&quot;Scheduler OneTimeJob\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:65,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(20000);\ntestConfig = await serverConfig.setProcessServerConfig()\nscheduler = require(\&quot;../lib/scheduler/index.js\&quot;);\n//jobCtrl = require(\&quot;../lib/scheduler/mongo/jobCtrl\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f6765c7-7470-4e44-a701-8f49c93f3d0c&quot;,&quot;parentUUID&quot;:&quot;5bc42369-8109-4b9b-a739-e9a5c924ee3e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e27b3113-df48-417b-beaf-ff5121502a9c&quot;,&quot;title&quot;:&quot;#addOneTimeJob&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/onetime.test.js&quot;,&quot;file&quot;:&quot;/test/onetime.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add a job&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob #addOneTimeJob should add a job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.addJob(job);\nexpect(job._id).to.equal(j.name);\n//setTimeout(done, 2500);\n// done()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1f6b03c-59f1-43b3-88d2-c96ec9a757f0&quot;,&quot;parentUUID&quot;:&quot;e27b3113-df48-417b-beaf-ff5121502a9c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f1f6b03c-59f1-43b3-88d2-c96ec9a757f0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;05fe811f-bed0-476b-8cab-022cae46bb79&quot;,&quot;title&quot;:&quot;#listJobs&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/onetime.test.js&quot;,&quot;file&quot;:&quot;/test/onetime.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a hash with jobs&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob #listJobs should return a hash with jobs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let jobs = scheduler.listJobs();\nexpect(Object.keys(jobs).length).to.be.greaterThan(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0702c41f-551e-4849-8143-9cfc8e6cc25e&quot;,&quot;parentUUID&quot;:&quot;05fe811f-bed0-476b-8cab-022cae46bb79&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should contain job xyz&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob #listJobs should contain job xyz&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let jobs = scheduler.listJobs();\nexpect(jobs[job._id]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2f7a72b-babe-4c19-b1d8-39d6411cbeac&quot;,&quot;parentUUID&quot;:&quot;05fe811f-bed0-476b-8cab-022cae46bb79&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0702c41f-551e-4849-8143-9cfc8e6cc25e&quot;,&quot;c2f7a72b-babe-4c19-b1d8-39d6411cbeac&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;82f7cfe2-ca92-4d65-914e-8ffab02a0d23&quot;,&quot;title&quot;:&quot;#getJob&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/onetime.test.js&quot;,&quot;file&quot;:&quot;/test/onetime.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a job by id&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob #getJob should get a job by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.getJobById(job._id);\n//expect(j.nextInvocation()).to.equal(job.start);\nexpect(j.name).to.equal(job._id);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ee5178d-bef5-42d5-a108-f20af12b2762&quot;,&quot;parentUUID&quot;:&quot;82f7cfe2-ca92-4d65-914e-8ffab02a0d23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3ee5178d-bef5-42d5-a108-f20af12b2762&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3c976f73-4373-4665-a9fa-e739be995f65&quot;,&quot;title&quot;:&quot;#runJob&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/onetime.test.js&quot;,&quot;file&quot;:&quot;/test/onetime.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should run the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob #runJob should run the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15001,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.getJobById(job._id);\nlet c = await delay(15000);\nexpect(j.triggeredJobs()).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae33c1d8-d8c0-4502-a690-5112e287600f&quot;,&quot;parentUUID&quot;:&quot;3c976f73-4373-4665-a9fa-e739be995f65&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ae33c1d8-d8c0-4502-a690-5112e287600f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15001,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b711b599-7c17-440a-a9b0-3336ea75c351&quot;,&quot;title&quot;:&quot;Scheduler PubSubHandler&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/pubsub.test.js&quot;,&quot;file&quot;:&quot;/test/pubsub.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Scheduler PubSubHandler\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler PubSubHandler \&quot;before all\&quot; hook in \&quot;Scheduler PubSubHandler\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(20000);\ntestConfig = await serverConfig.setProcessServerConfig()\nscheduler = require(\&quot;../lib/scheduler/index.js\&quot;);\njobCtrl = require(\&quot;../lib/scheduler/mongo/jobCtrl\&quot;);\ndbJobWithId = await jobCtrl.save(dbJob);\nservice = require(\&quot;../scheduler.js\&quot;);\nintegrify_redis = require(\&quot;../lib/redis/integrify-redis.js\&quot;);\npubSubClient = integrify_redis.getRedisPubSubClient();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb96fd4e-d2b3-4337-bbf7-6f7302e46984&quot;,&quot;parentUUID&quot;:&quot;b711b599-7c17-440a-a9b0-3336ea75c351&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Scheduler PubSubHandler\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler PubSubHandler \&quot;after all\&quot; hook in \&quot;Scheduler PubSubHandler\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return await jobCtrl.delete(dbJob.dbName, dbJobWithId._id.toString());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb0673bf-1d6f-4957-ae25-a26caf1ffcd4&quot;,&quot;parentUUID&quot;:&quot;b711b599-7c17-440a-a9b0-3336ea75c351&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d22304d9-f978-4291-85e0-a9c08ee24e8f&quot;,&quot;title&quot;:&quot;#addJob&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/pubsub.test.js&quot;,&quot;file&quot;:&quot;/test/pubsub.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;add a new job based on a message&quot;,&quot;fullTitle&quot;:&quot;Scheduler PubSubHandler #addJob add a new job based on a message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3003,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pubSubClient.publish(\n    `schedule:add`,\n    JSON.stringify({\n        dbName: dbJobWithId.dbName,\n        jobId: dbJobWithId._id\n    }),\n    function(err, ok) {\n        setTimeout(\n            function() {\n                let j = scheduler.getJobById(dbJobWithId._id);\n                expect(j).to.exist;\n                done();\n            },\n            3000\n        );\n    }\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1478b728-06e1-45bf-918f-60125398c0ca&quot;,&quot;parentUUID&quot;:&quot;d22304d9-f978-4291-85e0-a9c08ee24e8f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1478b728-06e1-45bf-918f-60125398c0ca&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3003,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;f0ebcdd3-ea7c-420c-abcb-af2652de5ee7&quot;,&quot;title&quot;:&quot;#cancel&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/pubsub.test.js&quot;,&quot;file&quot;:&quot;/test/pubsub.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should cancel the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler PubSubHandler #cancel should cancel the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pubSubClient.publish(\n    `schedule:delete`,\n    JSON.stringify({\n        dbName: dbJobWithId.dbName,\n        jobId: dbJobWithId._id\n    }),\n    async function(err, ok) {\n        delay(500);\n        let jobs = scheduler.listJobs();\n        expect(jobs[dbJobWithId._id]).to.not.exist;\n                        }\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ad5bfdb-d667-41ce-92fc-f45c6a9e43b1&quot;,&quot;parentUUID&quot;:&quot;f0ebcdd3-ea7c-420c-abcb-af2652de5ee7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1ad5bfdb-d667-41ce-92fc-f45c6a9e43b1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;c1d081a2-9532-4f5c-9a55-a0cb2eb565f3&quot;,&quot;title&quot;:&quot;Scheduler RecurringJob&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/recur.test.js&quot;,&quot;file&quot;:&quot;/test/recur.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Scheduler RecurringJob\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler RecurringJob \&quot;before all\&quot; hook in \&quot;Scheduler RecurringJob\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(20000);\ntestConfig = await serverConfig.setProcessServerConfig()\nscheduler = require(\&quot;../lib/scheduler/index.js\&quot;);\n//jobCtrl = require(\&quot;../lib/scheduler/mongo/jobCtrl\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1689d50d-bf33-48f8-ab65-b86636d2ad17&quot;,&quot;parentUUID&quot;:&quot;c1d081a2-9532-4f5c-9a55-a0cb2eb565f3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0274359a-0aec-4140-ab71-efc20a95459a&quot;,&quot;title&quot;:&quot;#addRecurringJob&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/recur.test.js&quot;,&quot;file&quot;:&quot;/test/recur.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add a job&quot;,&quot;fullTitle&quot;:&quot;Scheduler RecurringJob #addRecurringJob should add a job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.addJob(job);5\nexpect(job.recur).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b054b6c3-5996-43f9-831c-5f42b9cbb0d9&quot;,&quot;parentUUID&quot;:&quot;0274359a-0aec-4140-ab71-efc20a95459a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b054b6c3-5996-43f9-831c-5f42b9cbb0d9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f0e16cce-786f-4706-b10d-40b8a15bc4a0&quot;,&quot;title&quot;:&quot;#listJobs&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/recur.test.js&quot;,&quot;file&quot;:&quot;/test/recur.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a hash with jobs&quot;,&quot;fullTitle&quot;:&quot;Scheduler RecurringJob #listJobs should return a hash with jobs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;jobs = scheduler.listJobs();\nexpect(Object.keys(jobs).length).to.be.greaterThan(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07bf475a-e1d0-4bd3-91b2-3f17a3248448&quot;,&quot;parentUUID&quot;:&quot;f0e16cce-786f-4706-b10d-40b8a15bc4a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should contain job xyz&quot;,&quot;fullTitle&quot;:&quot;Scheduler RecurringJob #listJobs should contain job xyz&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(jobs[job._id]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d091ebf-95b3-40f1-a64e-51c93d7aa3f7&quot;,&quot;parentUUID&quot;:&quot;f0e16cce-786f-4706-b10d-40b8a15bc4a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;07bf475a-e1d0-4bd3-91b2-3f17a3248448&quot;,&quot;8d091ebf-95b3-40f1-a64e-51c93d7aa3f7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;51eadb9a-025d-4261-a60c-f67d860f4575&quot;,&quot;title&quot;:&quot;#getJob&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/recur.test.js&quot;,&quot;file&quot;:&quot;/test/recur.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a job by id&quot;,&quot;fullTitle&quot;:&quot;Scheduler RecurringJob #getJob should get a job by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.getJobById(job._id);\n//expect(j.nextInvocation()).to.equal(job.start);\nexpect(j.name).to.equal(job._id);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;441d38b0-40c2-444e-aa16-e282ec29243e&quot;,&quot;parentUUID&quot;:&quot;51eadb9a-025d-4261-a60c-f67d860f4575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;441d38b0-40c2-444e-aa16-e282ec29243e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c097fc73-c4a1-423b-9709-42830151403b&quot;,&quot;title&quot;:&quot;Scheduler Scheduled Jobs&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Scheduler Scheduled Jobs\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs \&quot;before all\&quot; hook in \&quot;Scheduler Scheduled Jobs\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;;\n        testConfig = await serverConfig.setProcessServerConfig()\n        scheduler = require(\&quot;../lib/scheduler/index.js\&quot;);\n        jobCtrl = require(\&quot;../lib/scheduler/mongo/jobCtrl\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dfc7b174-0455-45d3-9f93-322d1d4a6fec&quot;,&quot;parentUUID&quot;:&quot;c097fc73-c4a1-423b-9709-42830151403b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2f8b8d05-9c20-46c9-9458-8dc910ddad62&quot;,&quot;title&quot;:&quot;#addJob&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add a job&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #addJob should add a job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.addJob(job);\nexpect(job._id).to.equal(j.name);\n//setTimeout(done, 2500);\n// done()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1294d32c-d9bd-47a8-97a2-e79926a18ac9&quot;,&quot;parentUUID&quot;:&quot;2f8b8d05-9c20-46c9-9458-8dc910ddad62&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1294d32c-d9bd-47a8-97a2-e79926a18ac9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;7e0e5687-19b6-45d1-863c-834e40f27e99&quot;,&quot;title&quot;:&quot;#loadAllJobsFromMongo&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;#loadAllJobsFromMongo\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #loadAllJobsFromMongo \&quot;before all\&quot; hook in \&quot;#loadAllJobsFromMongo\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// runs before all tests in this block\nreturn jobCtrl.save(dbJob).then(j =&gt; {\n    dbJobWithId = j;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;87aedff7-7bdf-496d-8ed7-43b9962739e5&quot;,&quot;parentUUID&quot;:&quot;7e0e5687-19b6-45d1-863c-834e40f27e99&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;#loadAllJobsFromMongo\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #loadAllJobsFromMongo \&quot;after all\&quot; hook in \&quot;#loadAllJobsFromMongo\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//return jobCtrl.delete(dbJob.dbName, dbJobWithId._id.toString())&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10044d7c-473d-49d2-b0b9-d85509fc72f1&quot;,&quot;parentUUID&quot;:&quot;7e0e5687-19b6-45d1-863c-834e40f27e99&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should load the jobs from mongo&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #loadAllJobsFromMongo should load the jobs from mongo&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return scheduler.loadJobsFromMongo().then(loadedJobs =&gt; {\n    expect(loadedJobs.length).to.be.greaterThan(0);\n    expect(scheduler.listJobs()[dbJobWithId.id]).to.exist;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fdecf5fb-8637-4174-8642-936dea86d317&quot;,&quot;parentUUID&quot;:&quot;7e0e5687-19b6-45d1-863c-834e40f27e99&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fdecf5fb-8637-4174-8642-936dea86d317&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;b7eaf16e-4279-404b-9f33-2cc674c82b5f&quot;,&quot;title&quot;:&quot;#listJobs&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a hash with jobs&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #listJobs should return a hash with jobs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;jobs = scheduler.listJobs();\nexpect(Object.keys(jobs).length).to.be.greaterThan(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94e35701-1a58-416e-9b28-a589554a9f22&quot;,&quot;parentUUID&quot;:&quot;b7eaf16e-4279-404b-9f33-2cc674c82b5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should contain job xyz&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #listJobs should contain job xyz&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(jobs[job._id]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8d9925b-e4e3-4d90-8b40-b3fb79d96d49&quot;,&quot;parentUUID&quot;:&quot;b7eaf16e-4279-404b-9f33-2cc674c82b5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;94e35701-1a58-416e-9b28-a589554a9f22&quot;,&quot;c8d9925b-e4e3-4d90-8b40-b3fb79d96d49&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;675cbe5b-41d9-441e-a653-ef56206028da&quot;,&quot;title&quot;:&quot;#getJob&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a job by id&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #getJob should get a job by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.getJobById(job._id);\n//expect(j.nextInvocation()).to.equal(job.start);\nexpect(j.name).to.equal(job._id);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e4d9a2f-3248-42b3-9582-a29233250821&quot;,&quot;parentUUID&quot;:&quot;675cbe5b-41d9-441e-a653-ef56206028da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0e4d9a2f-3248-42b3-9582-a29233250821&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;e4b16465-2984-48ae-9edf-a67cd1243fed&quot;,&quot;title&quot;:&quot;#reschedule&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should reschedule the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #reschedule should reschedule the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:306,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let oldStart = job.start;\n            job.start =  new Date(job.start.getTime() + 100);\n            job.end =   new Date(job.end.getTime() + 10000);\n            let rj = scheduler.rescheduleJob(job);\n            await delay(300);\n            let j = scheduler.getJobById(job._id);\n            expect(new Date(j.nextInvocation()).getTime()).to.be.greaterThan(oldStart.getTime());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e17da076-71cb-4f9b-84d7-001305db4c73&quot;,&quot;parentUUID&quot;:&quot;e4b16465-2984-48ae-9edf-a67cd1243fed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e17da076-71cb-4f9b-84d7-001305db4c73&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:306,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;0bc94538-0a74-4936-b2b1-a102dae0ecfa&quot;,&quot;title&quot;:&quot;#cancel&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should cancel the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #cancel should cancel the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let cj = scheduler.cancelJob(job._id);\nlet jobs = scheduler.listJobs();\nexpect(jobs[job._id]).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;979c3e93-4503-4312-82b3-5fba7fe3cc2d&quot;,&quot;parentUUID&quot;:&quot;0bc94538-0a74-4936-b2b1-a102dae0ecfa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;979c3e93-4503-4312-82b3-5fba7fe3cc2d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;28d4e799-76f5-4572-85a5-93a91abaa172&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;06554381-d039-4de8-bcb7-af5385d7d7f5&quot;,&quot;title&quot;:&quot;Session Processor Tests&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/session-processor/test/integration/sessionEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sessionEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Session Processor Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5040,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let testConfig = await testLib.getTestConfig();\n       \nthis.timeout(105000);\nlet deletes = await redis.delAsync([fullStreamName, eventHistoryName, eventProcessedName, `${tenant}.activeSessions`]);\nconsole.log(deletes)\nlet sp = new StreamPublisher(testStreamName,tenant);\nawait sp.sendEvent(\&quot;login\&quot;, {\n  token: \&quot;abcd234\&quot;,\n  user:  {jwt_token: &#x27;xxxxx&#x27;, tenantId: testConfig.tenantOne.tenantId, sid: testConfig.tenantOne.adminUser.sid}\n})\nfor (let index = 0; index &lt; 5; index++) {\n    await sp.sendEvent(\&quot;extendSession\&quot;, {\n        token: \&quot;abcd234\&quot;,\n        user: {\n            sid: testConfig.tenantOne.adminUser.sid,\n            user_name: \&quot;iapprove\&quot;,\n            email: \&quot;iapprove@integrify.com\&quot;,\n            name: \&quot;System System\&quot;\n        }\n    })\n}\n\nforkedProcessor = await sessionStreamConsumer.forkStreamProcessor(tenant)\nawait delay(5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf396485-8142-429a-8bcf-e0f97cddde6f&quot;,&quot;parentUUID&quot;:&quot;06554381-d039-4de8-bcb7-af5385d7d7f5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Session Processor Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a3337d9-1aa3-4845-8909-54e655cc1e4c&quot;,&quot;parentUUID&quot;:&quot;06554381-d039-4de8-bcb7-af5385d7d7f5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;172c9a6c-c465-40a7-b187-a17d00e4dd8f&quot;,&quot;title&quot;:&quot;stream processor&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/session-processor/test/integration/sessionEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sessionEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b195d6b6-aa68-46e1-aa04-258724e7a5d1&quot;,&quot;title&quot;:&quot;reads from session stream&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/session-processor/test/integration/sessionEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sessionEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should process events&quot;,&quot;fullTitle&quot;:&quot;Session Processor Tests stream processor reads from session stream should process events&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processedCount = await redis.zcardAsync(eventProcessedName)\n              let historyCount = await redis.zcardAsync(eventHistoryName)\n              expect(historyCount).to.equal(processedCount)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e8fe465-0eae-4e03-9f0d-8b41cd47b028&quot;,&quot;parentUUID&quot;:&quot;b195d6b6-aa68-46e1-aa04-258724e7a5d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5e8fe465-0eae-4e03-9f0d-8b41cd47b028&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;251b9dcc-61e1-405a-9c2c-6cd6a2cc8425&quot;,&quot;title&quot;:&quot;handles events&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/session-processor/test/integration/sessionEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sessionEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should push events into REDIS activeSession set&quot;,&quot;fullTitle&quot;:&quot;Session Processor Tests stream processor handles events should push events into REDIS activeSession set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let sessions = await redis.zrangebyscoreAsync(`${tenant}.activeSessions`, \&quot;-inf\&quot;, \&quot;+inf\&quot;);\nconsole.log(sessions)\nexpect(sessions).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1d5fdfe-4410-4efb-8a14-c6d73a1166e4&quot;,&quot;parentUUID&quot;:&quot;251b9dcc-61e1-405a-9c2c-6cd6a2cc8425&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c1d5fdfe-4410-4efb-8a14-c6d73a1166e4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;72b01f9a-6152-4281-87e1-1b6deccad8af&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bcf76d6f-85c2-4fe4-93cd-7bed2f109e9b&quot;,&quot;title&quot;:&quot;adminCategoryConfig.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;adminCategoryConfig.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=objectCatTree]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=btn_addCategory]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=dialog_addCategory]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=dialog_editCategory]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=dialog_deleteCategory]&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;962fcb43-deaa-4bec-9e4a-066949377c4c&quot;,&quot;parentUUID&quot;:&quot;bcf76d6f-85c2-4fe4-93cd-7bed2f109e9b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;962fcb43-deaa-4bec-9e4a-066949377c4c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;63b8b4a9-8fd4-44cd-a783-736ffa376c96&quot;,&quot;title&quot;:&quot;adminTreeAddObjectButton.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;adminTreeAddObjectButton.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(btn_addObject.exists()).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2fa14e65-3e5b-43ad-b149-b33396726558&quot;,&quot;parentUUID&quot;:&quot;63b8b4a9-8fd4-44cd-a783-736ffa376c96&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2fa14e65-3e5b-43ad-b149-b33396726558&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;11f4e8fc-71a2-43f9-99ca-04a1911addb5&quot;,&quot;title&quot;:&quot;adminTreePermsButton.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;adminTreePermsButton.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(btn_permsButton.exists()).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9e826a5-98fa-45b9-86d9-f88e621df387&quot;,&quot;parentUUID&quot;:&quot;11f4e8fc-71a2-43f9-99ca-04a1911addb5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b9e826a5-98fa-45b9-86d9-f88e621df387&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d90521e3-1d50-4058-a2fe-b0ff3ec878f3&quot;,&quot;title&quot;:&quot;adminTreeViewButton.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;adminTreeViewButton.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(btn_viewButton.exists()).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03800eda-2f67-499c-8ea4-50c01250fb2a&quot;,&quot;parentUUID&quot;:&quot;d90521e3-1d50-4058-a2fe-b0ff3ec878f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;03800eda-2f67-499c-8ea4-50c01250fb2a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;973c2f78-8122-4f73-b67b-af2912a3bfb6&quot;,&quot;title&quot;:&quot;AddGroupDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;AddGroupDialog.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:49,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_AddGroupDialog.default);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e23e797c-92c9-4b94-9c53-b23acfb1d654&quot;,&quot;parentUUID&quot;:&quot;973c2f78-8122-4f73-b67b-af2912a3bfb6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b690c491-aa2c-474a-8654-da8b07b9fdf0&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays group fields&quot;,&quot;fullTitle&quot;:&quot;AddGroupDialog.vue inital state displays group fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=nameField]&#x27;)).to.exist;\nexpect(wrapper.find(&#x27;[data-test=descField]&#x27;)).to.exist;\nexpect(wrapper.find(&#x27;[data-test=dynamicField]&#x27;)).to.exist;\nexpect(wrapper.find(&#x27;[data-test=sqlField]&#x27;)).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15d5cdc8-96fe-4ac8-b46e-6ff10be3512e&quot;,&quot;parentUUID&quot;:&quot;b690c491-aa2c-474a-8654-da8b07b9fdf0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;save button disabled&quot;,&quot;fullTitle&quot;:&quot;AddGroupDialog.vue inital state save button disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=saveButton]&#x27;).element.disabled).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c349ea29-15b2-4db1-9cb1-39f1278d2d1f&quot;,&quot;parentUUID&quot;:&quot;b690c491-aa2c-474a-8654-da8b07b9fdf0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;15d5cdc8-96fe-4ac8-b46e-6ff10be3512e&quot;,&quot;c349ea29-15b2-4db1-9cb1-39f1278d2d1f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;486f5a3a-f00c-4f61-8a77-c1cb89f2b8b7&quot;,&quot;title&quot;:&quot;EditGroupDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EditGroupDialog.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\ngroup = {\n  groupName: \&quot;test group\&quot;,\n  groupDesc: \&quot;test group description\&quot;,\n  dynamic: false,\n  groupSql: \&quot;first_name like &#x27;%foo%&#x27;\&quot;\n};\nwrapper = (0, _mocks.initWrapper)(_EditGroupDialog.default, {\n  propsData: {\n    group\n  },\n  data() {\n    return {\n      activeTab: 0\n    };\n  },\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b8b99fa-05ce-4f15-873d-fc9baaec60a5&quot;,&quot;parentUUID&quot;:&quot;486f5a3a-f00c-4f61-8a77-c1cb89f2b8b7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e356ba64-d718-43f8-a04f-890b18f16352&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays group fields&quot;,&quot;fullTitle&quot;:&quot;EditGroupDialog.vue inital state displays group fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=nameField]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=descField]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=dynamicField]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=sqlField]&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;333eeb7b-458a-450c-8428-8a521479573f&quot;,&quot;parentUUID&quot;:&quot;e356ba64-d718-43f8-a04f-890b18f16352&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;populates group fields&quot;,&quot;fullTitle&quot;:&quot;EditGroupDialog.vue inital state populates group fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=nameField]&#x27;).element.value).to.equal(group.groupName);\nexpect(wrapper.find(&#x27;[data-test=descField]&#x27;).element.value).to.equal(group.groupDesc);\nexpect(wrapper.find(&#x27;[data-test=sqlField]&#x27;).element.value).to.equal(group.groupSql);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d13f5e8c-82cc-4f8b-aaef-8b04e0527aae&quot;,&quot;parentUUID&quot;:&quot;e356ba64-d718-43f8-a04f-890b18f16352&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;333eeb7b-458a-450c-8428-8a521479573f&quot;,&quot;d13f5e8c-82cc-4f8b-aaef-8b04e0527aae&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c4644fb2-8207-49fc-b669-51e4d173a221&quot;,&quot;title&quot;:&quot;GroupList.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GroupList.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:41,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_GroupList.default, {\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7003e3ac-93ae-43f8-b3e7-87050e7e6014&quot;,&quot;parentUUID&quot;:&quot;c4644fb2-8207-49fc-b669-51e4d173a221&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;026ad61f-02ba-4b9a-b436-ecbb1a9d4805&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays toolbar buttons&quot;,&quot;fullTitle&quot;:&quot;GroupList.vue inital state displays toolbar buttons&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const toolbar = wrapper.find(&#x27;[data-test=buttonBar]&#x27;);\nexpect(toolbar.exists()).to.equal(true);\nconst buttons = toolbar.findAll(&#x27;button&#x27;);\nexpect(buttons.at(0).text()).to.equal(&#x27;Add Group&#x27;);\nexpect(buttons.at(1).text()).to.equal(&#x27;Delete Group&#x27;);\nexpect(buttons.at(1).props().disabled).to.equal(true);\nexpect(buttons.at(2).text()).to.equal(&#x27;Set Roles &amp; Permissions&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2a11a0d-7086-4224-97ac-0c20fd417895&quot;,&quot;parentUUID&quot;:&quot;026ad61f-02ba-4b9a-b436-ecbb1a9d4805&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays list of groups&quot;,&quot;fullTitle&quot;:&quot;GroupList.vue inital state displays list of groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const table = wrapper.find(&#x27;div.v-data-table&#x27;);\nexpect(table.exists()).to.equal(true);\nconst rows = table.findAll(&#x27;table &gt; tbody &gt; tr&#x27;);\nconst adminRow = rows.at(0).findAll(&#x27;td&#x27;);\nconst userRow = rows.at(1).findAll(&#x27;td&#x27;);\nexpect(rows.length).to.equal(2);\nexpect(adminRow.at(3).text()).to.equal(&#x27;Administrators&#x27;); // group name column\nexpect(userRow.at(3).text()).to.equal(&#x27;Users&#x27;);\nexpect(adminRow.at(5).text()).to.equal(&#x27;No&#x27;); // dynamic column\nexpect(userRow.at(5).text()).to.equal(&#x27;Yes&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d7d132c-fbd8-4ad7-8b00-af8dc90af973&quot;,&quot;parentUUID&quot;:&quot;026ad61f-02ba-4b9a-b436-ecbb1a9d4805&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a2a11a0d-7086-4224-97ac-0c20fd417895&quot;,&quot;1d7d132c-fbd8-4ad7-8b00-af8dc90af973&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;976af7e2-9804-427a-bd60-ce4d62ad41c9&quot;,&quot;title&quot;:&quot;GroupMembershipDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GroupMembershipDialog.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:71,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\ngroup = {\n  groupName: \&quot;test group\&quot;,\n  groupDesc: \&quot;test group description\&quot;,\n  dynamic: false,\n  groupSql: \&quot;first_name like &#x27;%foo%&#x27;\&quot;,\n  canManage: true,\n  canEdit: true\n};\nwrapper = (0, _mocks.initWrapper)(_GroupMembershipDialog.default, {\n  propsData: {\n    group\n  },\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be7bd24a-9508-4206-8678-25b1fe5f0767&quot;,&quot;parentUUID&quot;:&quot;976af7e2-9804-427a-bd60-ce4d62ad41c9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;725b09a9-beb5-4771-a4b6-4523ad7e95ef&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;membership tables&quot;,&quot;fullTitle&quot;:&quot;GroupMembershipDialog.vue inital state membership tables&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const nonMembersTable = wrapper.find(&#x27;[data-test=nonMembersTable]&#x27;);\nconst membersTable = wrapper.find(&#x27;[data-test=membersTable]&#x27;);\nexpect(nonMembersTable.exists()).to.equal(true);\nexpect(membersTable.exists()).to.equal(true); // Non members table\nlet rows = nonMembersTable.findAll(&#x27;table &gt; tbody &gt; tr&#x27;);\nlet firstRow = rows.at(0).findAll(&#x27;td&#x27;);\nexpect(rows.length).to.equal(3);\nexpect(firstRow.length).to.equal(5);\nexpect(firstRow.at(0).find(&#x27;div.v-simple-checkbox&#x27;).exists()).to.equal(true); //  selectable column\nexpect(firstRow.at(1).find(&#x27;button.mdi-plus-circle-outline&#x27;).exists()).to.equal(true); // button to add members\nexpect(firstRow.at(2).find(&#x27;i.mdi-account&#x27;).exists()).to.equal(true); // icon for user accoutn\nexpect(firstRow.at(3).text()).to.equal(&#x27;97&#x27;); // member id\nexpect(firstRow.at(4).text()).to.equal(&#x27;Joe User&#x27;); // member name\nexpect(rows.at(2).find(&#x27;i.mdi-account-multiple&#x27;).exists()).to.equal(true); // check a group member row renders with the group icon\n// Members table\nrows = membersTable.findAll(&#x27;table &gt; tbody &gt; tr&#x27;);\nexpect(rows.length).to.equal(2);\nfirstRow = rows.at(0).findAll(&#x27;td&#x27;);\nexpect(rows.length).to.equal(2);\nexpect(firstRow.length).to.equal(5);\nexpect(firstRow.at(0).find(&#x27;div.v-simple-checkbox&#x27;).exists()).to.equal(true); //  selectable column\nexpect(firstRow.at(1).find(&#x27;button.mdi-minus-circle-outline&#x27;).exists()).to.equal(true); // button to add members\nexpect(firstRow.at(2).find(&#x27;i.mdi-account&#x27;).exists()).to.equal(true); // icon for user accoutn\nexpect(firstRow.at(3).text()).to.equal(&#x27;98&#x27;); // member id\nexpect(firstRow.at(4).text()).to.equal(&#x27;Integrify Services&#x27;); // member name&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6173f37-1c8d-491f-af15-25549ddacfb1&quot;,&quot;parentUUID&quot;:&quot;725b09a9-beb5-4771-a4b6-4523ad7e95ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f6173f37-1c8d-491f-af15-25549ddacfb1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;30033533-193f-409a-8eda-bb052077e292&quot;,&quot;title&quot;:&quot;UserCreate.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserCreate.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:55,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserCreate.default, {\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b593ba0-7196-4e6d-885f-7c9517ca6bc2&quot;,&quot;parentUUID&quot;:&quot;30033533-193f-409a-8eda-bb052077e292&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should display all necessary fields&quot;,&quot;fullTitle&quot;:&quot;UserCreate.vue should display all necessary fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;[&#x27;firstName&#x27;, &#x27;middleName&#x27;, &#x27;lastName&#x27;, &#x27;username&#x27;, &#x27;email&#x27;, &#x27;locale&#x27;, &#x27;timezone&#x27;, &#x27;language&#x27;, &#x27;password&#x27;, &#x27;confirmPassword&#x27;].forEach(fieldName =&gt; {\n  const field = wrapper.find(`[data-test=${fieldName}Input]`);\n  expect(field.exists()).to.be.true;\n  expect(field.text()).to.be.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad6066f1-df30-49e5-8825-6929ee82b48b&quot;,&quot;parentUUID&quot;:&quot;30033533-193f-409a-8eda-bb052077e292&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should display cancel and save btns&quot;,&quot;fullTitle&quot;:&quot;UserCreate.vue should display cancel and save btns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;[{\n  key: &#x27;cancelBtn&#x27;,\n  value: &#x27;Cancel&#x27;\n}, {\n  key: &#x27;saveBtn&#x27;,\n  value: &#x27;Save&#x27;\n}].forEach(btn =&gt; {\n  const button = wrapper.find(`[data-test=${btn.key}]`);\n  expect(button.exists()).to.be.true;\n  expect(button.text()).to.eq(btn.value);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb914f47-74be-40ad-b1d1-a228e50759df&quot;,&quot;parentUUID&quot;:&quot;30033533-193f-409a-8eda-bb052077e292&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ad6066f1-df30-49e5-8825-6929ee82b48b&quot;,&quot;eb914f47-74be-40ad-b1d1-a228e50759df&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;87211196-0d1f-44ff-9bf2-9aa96ba2f69b&quot;,&quot;title&quot;:&quot;UserEdit.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// store = new Vuex.Store({modules: mockStore().modules})\nstore = new _vuex.default.Store({\n  modules: (0, _store.mockStore)({\n    state: {\n      selectedUser: _mockedData.mockedUser\n    },\n    actions: {\n      getUser: function () {\n        console.log(&#x27;--- getUser()&#x27;);\n        return { ..._mockedData.mockedUser\n        };\n      }\n    }\n  }).modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserEdit.default, {\n  store,\n  propsData: {\n    id: _mockedData.mockedUser.contactGuid\n  }\n});\nmockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca6e257d-755c-46b6-9375-c1f5ab2c89c2&quot;,&quot;parentUUID&quot;:&quot;87211196-0d1f-44ff-9bf2-9aa96ba2f69b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should always display page title&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue should always display page title&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const pageTitle = wrapper.find(&#x27;#pageTitle&#x27;);\nexpect(pageTitle.text()).to.eq(&#x27;Edit User&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07d1e368-2f27-48b7-9406-8005062ff7e5&quot;,&quot;parentUUID&quot;:&quot;87211196-0d1f-44ff-9bf2-9aa96ba2f69b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not display form if loading&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue should not display form if loading&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const form = wrapper.find(&#x27;form[data-test=userForm]&#x27;);\nexpect(form.exists()).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84bf8471-3c5f-43a0-84ee-c5b741402674&quot;,&quot;parentUUID&quot;:&quot;87211196-0d1f-44ff-9bf2-9aa96ba2f69b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should display form and btns if user information present&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue should display form and btns if user information present&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:169,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper.vm.$store.state.users.userLoading = false;\nawait wrapper.vm.$nextTick();\nconst form = wrapper.find(&#x27;form[data-test=userForm]&#x27;);\nexpect(form.exists()).to.be.true;\n[{\n  key: &#x27;cancelBtn&#x27;,\n  value: &#x27;Cancel&#x27;\n}, {\n  key: &#x27;saveBtn&#x27;,\n  value: &#x27;Save&#x27;\n}].forEach(btn =&gt; {\n  const button = wrapper.find(`[data-test=${btn.key}]`);\n  expect(button.exists()).to.be.true;\n  expect(button.text()).to.eq(btn.value);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8f5ca52-0702-401b-a6ec-a7f0ad23be5f&quot;,&quot;parentUUID&quot;:&quot;87211196-0d1f-44ff-9bf2-9aa96ba2f69b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;07d1e368-2f27-48b7-9406-8005062ff7e5&quot;,&quot;84bf8471-3c5f-43a0-84ee-c5b741402674&quot;,&quot;e8f5ca52-0702-401b-a6ec-a7f0ad23be5f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:170,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;609be231-45c7-418d-be9b-55ed226cb6d1&quot;,&quot;title&quot;:&quot;UserEdit.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)({\n    state: {\n      selectedUser: _mockedData.mockedUser\n    }\n  }).modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserEditDelegation.default, {\n  store\n});\nmockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c3809a3-3595-481b-8b46-26afb79f4d92&quot;,&quot;parentUUID&quot;:&quot;609be231-45c7-418d-be9b-55ed226cb6d1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should display all fields&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue should display all fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;[&#x27;delegate&#x27;, &#x27;processes&#x27;] // &#x27;startDate&#x27;, &#x27;startTime&#x27;, &#x27;endDate&#x27;, &#x27;endTime&#x27;\n.forEach(fieldName =&gt; {\n  const field = wrapper.find(`[data-test=${fieldName}Input]`);\n  expect(field.exists()).to.be.true;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df95b329-fa9e-40bf-9ba8-f9361cc2a433&quot;,&quot;parentUUID&quot;:&quot;609be231-45c7-418d-be9b-55ed226cb6d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;df95b329-fa9e-40bf-9ba8-f9361cc2a433&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3285fc82-b4de-402e-8c9d-4cf45a405e53&quot;,&quot;title&quot;:&quot;UserEditOrganizationalDetails.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserEditOrganizationalDetails.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserEditOrganizationalDetails.default, {\n  store\n});\nmockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd0d1b7a-1af1-49a7-bb34-d367be3609d2&quot;,&quot;parentUUID&quot;:&quot;3285fc82-b4de-402e-8c9d-4cf45a405e53&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should display all fields&quot;,&quot;fullTitle&quot;:&quot;UserEditOrganizationalDetails.vue should display all fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper.vm.$store.state.users.selectedUser = _mockedData.mockedUser;\nawait wrapper.vm.$nextTick();\n[&#x27;title&#x27;, &#x27;division&#x27;, &#x27;department&#x27;, &#x27;costCenter&#x27;, &#x27;location&#x27;, &#x27;phone&#x27;, &#x27;manager&#x27;].forEach(fieldName =&gt; {\n  const field = wrapper.find(`[data-test=${fieldName}Input]`);\n  expect(field.exists()).to.be.true;\n  if (!!field.element.value || !!_mockedData.mockedUser[fieldName]) {\n    expect(field.element.value).to.eq(_mockedData.mockedUser[fieldName]);\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d32c99b-b953-458d-935b-1edecfa524a5&quot;,&quot;parentUUID&quot;:&quot;3285fc82-b4de-402e-8c9d-4cf45a405e53&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6d32c99b-b953-458d-935b-1edecfa524a5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8a87ce3c-a7cb-4497-ae10-178d854561da&quot;,&quot;title&quot;:&quot;UserEditUserDetails.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserEditUserDetails.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:61,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserEditUserDetails.default, {\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23982a58-13b0-433f-a76d-71b310aab030&quot;,&quot;parentUUID&quot;:&quot;8a87ce3c-a7cb-4497-ae10-178d854561da&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should display card title&quot;,&quot;fullTitle&quot;:&quot;UserEditUserDetails.vue should display card title&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const title = wrapper.find(&#x27;.v-card__title&#x27;);\nexpect(title.exists()).to.be.true;\nexpect(title.text()).contains(&#x27;User Details&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e512bcc-2b7d-4b00-b11d-017ebfa4fb35&quot;,&quot;parentUUID&quot;:&quot;8a87ce3c-a7cb-4497-ae10-178d854561da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should display all fields&quot;,&quot;fullTitle&quot;:&quot;UserEditUserDetails.vue should display all fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:51,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper.vm.$store.state.users.selectedUser = _mockedData.mockedUser;\nawait wrapper.vm.$nextTick();\n[&#x27;firstName&#x27;, &#x27;middleName&#x27;, &#x27;lastName&#x27;, &#x27;contactId&#x27;, &#x27;userName&#x27;, &#x27;email&#x27;, &#x27;address1&#x27;, &#x27;address2&#x27;, &#x27;city&#x27;, &#x27;state&#x27;, &#x27;zip&#x27;, &#x27;country&#x27;, &#x27;language&#x27;, &#x27;timezone&#x27;, &#x27;locale&#x27;, &#x27;cField1&#x27;, &#x27;cField2&#x27;, &#x27;password&#x27;, &#x27;confirmPassword&#x27;].forEach(fieldName =&gt; {\n  const field = wrapper.find(`[data-test=${fieldName}Input]`);\n  expect(field.exists()).to.be.true;\n  if (!!field.element.value &amp;&amp; !!_mockedData.mockedUser[fieldName]) {\n    expect(field.element.value.toString()).to.eq(_mockedData.mockedUser[fieldName].toString());\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7073e0ad-ffd9-4ab9-8141-9ff7381ac23d&quot;,&quot;parentUUID&quot;:&quot;8a87ce3c-a7cb-4497-ae10-178d854561da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6e512bcc-2b7d-4b00-b11d-017ebfa4fb35&quot;,&quot;7073e0ad-ffd9-4ab9-8141-9ff7381ac23d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:52,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;490d83ef-08c4-46db-a397-e26af5966972&quot;,&quot;title&quot;:&quot;UserFilterDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserFilterDialog.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:40,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserFilterDialog.default, {\n  store\n});\nmockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;efab7d9b-4592-410d-b7fb-09651567d408&quot;,&quot;parentUUID&quot;:&quot;490d83ef-08c4-46db-a397-e26af5966972&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;UserFilterDialog.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const title = wrapper.find(&#x27;.v-card__title .headline&#x27;);\nexpect(title.text()).to.eq(&#x27;User Filters&#x27;);\n[&#x27;lastName&#x27;, &#x27;firstName&#x27;, &#x27;username&#x27;, &#x27;email&#x27;, &#x27;title&#x27;, &#x27;managerName&#x27;, &#x27;costCenter&#x27;, &#x27;country&#x27;, &#x27;department&#x27;].forEach(fieldName =&gt; {\n  const field = wrapper.find(`[data-test=${fieldName}Input]`);\n  expect(field.exists()).to.be.true;\n  expect(field.element.value).to.be.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e309bb45-5f54-4bf9-90f8-a288be344a3b&quot;,&quot;parentUUID&quot;:&quot;490d83ef-08c4-46db-a397-e26af5966972&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should close dialog on clicking Close btn&quot;,&quot;fullTitle&quot;:&quot;UserFilterDialog.vue should close dialog on clicking Close btn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.vm.showDialog).to.be.false;\nwrapper.vm.$store.state.users.showDialog = true;\nawait wrapper.vm.$nextTick();\nexpect(wrapper.vm.showDialog).to.be.true;\nconst closeBtn = wrapper.find(&#x27;[data-test=closeBtn]&#x27;);\nexpect(closeBtn.exists()).to.be.true;\nawait closeBtn.trigger(&#x27;click&#x27;);\nexpect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;\nexpect(mockstore.actions.getUsers).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c075639b-4ac1-4f8c-8eef-b54e72daa487&quot;,&quot;parentUUID&quot;:&quot;490d83ef-08c4-46db-a397-e26af5966972&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e309bb45-5f54-4bf9-90f8-a288be344a3b&quot;,&quot;c075639b-4ac1-4f8c-8eef-b54e72daa487&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:46,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9f87e281-40fa-4746-a3bf-c3777de2c19e&quot;,&quot;title&quot;:&quot;UserList.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserList.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:36,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserList.default, {\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e758844-fd8f-49a5-af3e-966c0eaa2f3a&quot;,&quot;parentUUID&quot;:&quot;9f87e281-40fa-4746-a3bf-c3777de2c19e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should contain pageTitle and search input&quot;,&quot;fullTitle&quot;:&quot;UserList.vue should contain pageTitle and search input&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// pageTitle\nconst pageTitle = wrapper.find(&#x27;#pageTitle&#x27;);\nexpect(pageTitle.exists()).to.be.true;\nexpect(pageTitle.text()).to.eq(&#x27;Users&#x27;); // searchInput\nconst searchInput = wrapper.get(&#x27;input#searchText&#x27;);\nexpect(searchInput.exists()).to.be.true;\nexpect(searchInput.text()).to.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9df2f32-ab3a-4d63-b889-fedf1babfd98&quot;,&quot;parentUUID&quot;:&quot;9f87e281-40fa-4746-a3bf-c3777de2c19e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should display toolbar buttons&quot;,&quot;fullTitle&quot;:&quot;UserList.vue should display toolbar buttons&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;[{\n  key: &#x27;addUserBtn&#x27;,\n  value: &#x27;Add User&#x27;\n}, {\n  key: &#x27;replaceUserBtn&#x27;,\n  value: &#x27;Replace User&#x27;\n}].forEach(btn =&gt; {\n  const button = wrapper.find(`[data-test=${btn.key}]`);\n  expect(button.exists()).to.be.true;\n  expect(button.text()).to.eq(btn.value);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;77f6e282-01c9-46f7-9312-912fd732e57a&quot;,&quot;parentUUID&quot;:&quot;9f87e281-40fa-4746-a3bf-c3777de2c19e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should display list of users&quot;,&quot;fullTitle&quot;:&quot;UserList.vue should display list of users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const table = wrapper.find(&#x27;[data-test=usersTable]&#x27;);\nexpect(table.exists()).to.be.true;\nconst header = table.find(&#x27;table &gt; thead&#x27;);\n[&#x27;Last Name&#x27;, &#x27;First Name&#x27;, &#x27;Username&#x27;, &#x27;Email&#x27;, &#x27;Created&#x27;, &#x27;Last Updated&#x27;, &#x27;Active&#x27;].forEach(colName =&gt; {\n  expect(header.text()).contains(colName);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac940554-143a-4159-b317-9c34e5abb28b&quot;,&quot;parentUUID&quot;:&quot;9f87e281-40fa-4746-a3bf-c3777de2c19e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e9df2f32-ab3a-4d63-b889-fedf1babfd98&quot;,&quot;77f6e282-01c9-46f7-9312-912fd732e57a&quot;,&quot;ac940554-143a-4159-b317-9c34e5abb28b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;92f2dc70-00c8-42e7-9242-d4db33e77264&quot;,&quot;title&quot;:&quot;users store actions&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;users store actions \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;commit = _sinon.default.spy();\nstate = { ..._users.default.state\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;60a95429-7fe3-4362-af4a-d69fa4cdd09e&quot;,&quot;parentUUID&quot;:&quot;92f2dc70-00c8-42e7-9242-d4db33e77264&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;users store actions \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;_sinon.default.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8dc37c9-8cd8-4f6e-8a55-31ee9d5ed88a&quot;,&quot;parentUUID&quot;:&quot;92f2dc70-00c8-42e7-9242-d4db33e77264&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should getUsers&quot;,&quot;fullTitle&quot;:&quot;users store actions should getUsers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await _actions.default.getUsers({\n  commit,\n  state\n}, _commonLib.default);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_LIST_LOADING&#x27;, true]);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_USERS&#x27;, [..._mockedData.mockedUsers]]);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_USERS_TOTAL&#x27;, _mockedData.mockedUsers.length]);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_LIST_LOADING&#x27;, false]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;342fcb8d-5972-4a3a-b142-195a8412077d&quot;,&quot;parentUUID&quot;:&quot;92f2dc70-00c8-42e7-9242-d4db33e77264&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getUser&quot;,&quot;fullTitle&quot;:&quot;users store actions should getUser&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const user = { ..._mockedData.mockedUser\n};\nawait _actions.default.getUser({\n  commit,\n  state\n}, {\n  userGuid: user.contactGuid,\n  $commonLib: _commonLib.default\n});\nuser.active = !user.deletedDate;\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_USER_LOADING&#x27;, true]);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_SELECTED_USER&#x27;, user]);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_USER_LOADING&#x27;, false]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c83c3118-aa92-4f77-b309-2eb0ac2fd3b5&quot;,&quot;parentUUID&quot;:&quot;92f2dc70-00c8-42e7-9242-d4db33e77264&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insertUser&quot;,&quot;fullTitle&quot;:&quot;users store actions should insertUser&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await _actions.default.insertUser({\n  commit,\n  state\n}, _commonLib.default);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_SELECTED_USER&#x27;, _mockedData.mockedUser]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a58b210c-2375-4df4-9e8c-e76bf96b6303&quot;,&quot;parentUUID&quot;:&quot;92f2dc70-00c8-42e7-9242-d4db33e77264&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should clearFiltersAndOptions&quot;,&quot;fullTitle&quot;:&quot;users store actions should clearFiltersAndOptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;_actions.default.clearFiltersAndOptions({\n  commit,\n  state\n});\n(0, _chai.expect)(commit.args).to.deep.eq([[&#x27;CLEAR_FILTERS&#x27;], [&#x27;SET_LIST_OPTIONS&#x27;]]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;550d0e42-bc68-4b62-9418-555983c04e8b&quot;,&quot;parentUUID&quot;:&quot;92f2dc70-00c8-42e7-9242-d4db33e77264&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;342fcb8d-5972-4a3a-b142-195a8412077d&quot;,&quot;c83c3118-aa92-4f77-b309-2eb0ac2fd3b5&quot;,&quot;a58b210c-2375-4df4-9e8c-e76bf96b6303&quot;,&quot;550d0e42-bc68-4b62-9418-555983c04e8b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;34dd4deb-1be7-4023-bab9-f8bebf4ab7a2&quot;,&quot;title&quot;:&quot;users store getters&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get users&quot;,&quot;fullTitle&quot;:&quot;users store getters should get users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;state.users = [..._mockedData.mockedUsers];\nconst users = _getters.default.users(state);\n(0, _chai.expect)(users).to.deep.equal(_mockedData.mockedUsers);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a48e5470-e6a6-40de-afec-8d776fabf327&quot;,&quot;parentUUID&quot;:&quot;34dd4deb-1be7-4023-bab9-f8bebf4ab7a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get filterCount&quot;,&quot;fullTitle&quot;:&quot;users store getters should get filterCount&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;(0, _chai.expect)(_getters.default.filterCount(state)).to.eq(0);\nstate.filters.lastName = &#x27;foo&#x27;;\nstate.filters.firstName = &#x27;bar&#x27;;\nstate.filters.costCenter = &#x27;costCenter&#x27;;\nstate.filters.country = &#x27;&#x27;;\nstate.filters.activeOnly = true;\n(0, _chai.expect)(_getters.default.filterCount(state)).to.eq(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f832ddd4-bf93-4426-b032-56f5e7d38d68&quot;,&quot;parentUUID&quot;:&quot;34dd4deb-1be7-4023-bab9-f8bebf4ab7a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a48e5470-e6a6-40de-afec-8d776fabf327&quot;,&quot;f832ddd4-bf93-4426-b032-56f5e7d38d68&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;17517d53-170d-4c3a-92ed-d3ad2943e9b1&quot;,&quot;title&quot;:&quot;users store mutations&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should SET_USERS&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_USERS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_USERS(state, [..._mockedData.mockedUsers]);\n(0, _chai.expect)(state.users).to.deep.eq(_mockedData.mockedUsers);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b527bcb-db7f-4fab-b0d2-4be03db3e1cb&quot;,&quot;parentUUID&quot;:&quot;17517d53-170d-4c3a-92ed-d3ad2943e9b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_USERS_TOTAL&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_USERS_TOTAL&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_USERS_TOTAL(state, _mockedData.mockedUsers.length);\n(0, _chai.expect)(state.total).to.eq(_mockedData.mockedUsers.length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c013790-0dc4-46ff-b852-37fe7b14e57a&quot;,&quot;parentUUID&quot;:&quot;17517d53-170d-4c3a-92ed-d3ad2943e9b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SEARCH&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_SEARCH&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const searchTxt = &#x27;searching for something&#x27;;\nSET_SEARCH(state, searchTxt);\n(0, _chai.expect)(state.search).to.eq(searchTxt);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5afd724b-6351-4c24-b3df-2f8351d2acbe&quot;,&quot;parentUUID&quot;:&quot;17517d53-170d-4c3a-92ed-d3ad2943e9b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_LIST_LOADING&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_LIST_LOADING&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_LIST_LOADING(state, true);\n(0, _chai.expect)(state.listLoading).to.eq(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38be4fc1-7f14-4b8c-b413-a1274ddbfcff&quot;,&quot;parentUUID&quot;:&quot;17517d53-170d-4c3a-92ed-d3ad2943e9b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should CLEAR_FILTERS&quot;,&quot;fullTitle&quot;:&quot;users store mutations should CLEAR_FILTERS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;state.filters = {\n  lastName: &#x27;test last name&#x27;,\n  firstName: &#x27;first name&#x27;,\n  userName: &#x27;fooBar&#x27;,\n  email: &#x27;foo@bar.com&#x27;,\n  title: &#x27;my title&#x27;,\n  managerName: &#x27;manager name&#x27;,\n  managerGuid: 123,\n  costCenter: &#x27;cost center&#x27;,\n  country: &#x27;USM&#x27;,\n  department: &#x27;manager of managers&#x27;,\n  activeOnly: true\n};\nCLEAR_FILTERS(state);\n(0, _chai.expect)(state.filters).to.deep.eq({\n  lastName: null,\n  firstName: null,\n  userName: null,\n  email: null,\n  title: null,\n  managerName: null,\n  managerGuid: null,\n  costCenter: null,\n  country: null,\n  department: null,\n  activeOnly: false\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a666cbbb-aefa-41eb-9383-add9e4c1fde0&quot;,&quot;parentUUID&quot;:&quot;17517d53-170d-4c3a-92ed-d3ad2943e9b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_LIST_OPTIONS&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_LIST_OPTIONS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const listOptions = {\n  sortBy: [&#x27;firstName&#x27;],\n  sortDesc: [true],\n  page: 2\n};\nSET_LIST_OPTIONS(state, listOptions);\n(0, _chai.expect)(state.listOptions).to.deep.eq(listOptions); // clear listOptions\nSET_LIST_OPTIONS(state);\n(0, _chai.expect)(state.listOptions).to.deep.eq({\n  sortBy: [],\n  sortDesc: [],\n  page: 1\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9afe18e0-735e-4670-9d06-d217c0d1669e&quot;,&quot;parentUUID&quot;:&quot;17517d53-170d-4c3a-92ed-d3ad2943e9b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SHOW_DIALOG&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_SHOW_DIALOG&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_SHOW_DIALOG(state, true);\n(0, _chai.expect)(state.showDialog).to.eq(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;372fec57-ddd5-416d-afa3-4eb71f3f31b3&quot;,&quot;parentUUID&quot;:&quot;17517d53-170d-4c3a-92ed-d3ad2943e9b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_USER_LOADING&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_USER_LOADING&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_USER_LOADING(state, false);\n(0, _chai.expect)(state.userLoading).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95a62544-8c94-4718-8bfd-8d89d47e1fbd&quot;,&quot;parentUUID&quot;:&quot;17517d53-170d-4c3a-92ed-d3ad2943e9b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_IS_CHECKING_USERNAME&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_IS_CHECKING_USERNAME&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_IS_CHECKING_USERNAME(state, true);\n(0, _chai.expect)(state.isCheckingUsername).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ddacaccc-acfc-458b-9826-9bbd2d196809&quot;,&quot;parentUUID&quot;:&quot;17517d53-170d-4c3a-92ed-d3ad2943e9b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SELECTED_USER&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_SELECTED_USER&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const user = { ..._mockedData.mockedUser,\n  password: &#x27;testPwd&#x27;,\n  confirmPassword: &#x27;testPwd&#x27;\n};\nSET_SELECTED_USER(state, user);\n(0, _chai.expect)(state.selectedUser).to.deep.eq(user); // when no user specified\nSET_SELECTED_USER(state);\n(0, _chai.expect)(state.selectedUser).to.deep.eq({\n  firstName: &#x27;&#x27;,\n  middleName: &#x27;&#x27;,\n  lastName: &#x27;&#x27;,\n  userName: &#x27;&#x27;,\n  email: &#x27;&#x27;,\n  locale: &#x27;en-US&#x27;,\n  timezone: &#x27;&#x27;,\n  languageGuid: &#x27;2a803d80-de6d-4adc-a642-4e3d831f5460&#x27;,\n  // US English\n  password: &#x27;&#x27;,\n  confirmPassword: &#x27;&#x27;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d8a7b43-512e-40d7-99da-c162ff95b1c4&quot;,&quot;parentUUID&quot;:&quot;17517d53-170d-4c3a-92ed-d3ad2943e9b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_LOCALES&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_LOCALES&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_LOCALES(state, [..._mockedData.mockedLocales]);\n(0, _chai.expect)(state.locales).to.deep.eq(_mockedData.mockedLocales);\nSET_LOCALES(state);\n(0, _chai.expect)(state.locales).to.deep.eq([]);\nSET_LOCALES(state, []);\n(0, _chai.expect)(state.locales).to.deep.eq([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f9192a8f-7bd7-4edc-8f06-d95da4aa77de&quot;,&quot;parentUUID&quot;:&quot;17517d53-170d-4c3a-92ed-d3ad2943e9b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_DELEGATION_START_DATE&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_DELEGATION_START_DATE&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const date = &#x27;2020-01-12&#x27;;\nSET_SELECTED_USER(state, { ..._mockedData.mockedUser\n});\nSET_DELEGATION_START_DATE(state, date);\n(0, _chai.expect)(state.selectedUser.delegate.startDate).to.eq(date);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca7cd000-d826-4acd-9e6e-fe3c9cecd00b&quot;,&quot;parentUUID&quot;:&quot;17517d53-170d-4c3a-92ed-d3ad2943e9b1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3b527bcb-db7f-4fab-b0d2-4be03db3e1cb&quot;,&quot;3c013790-0dc4-46ff-b852-37fe7b14e57a&quot;,&quot;5afd724b-6351-4c24-b3df-2f8351d2acbe&quot;,&quot;38be4fc1-7f14-4b8c-b413-a1274ddbfcff&quot;,&quot;a666cbbb-aefa-41eb-9383-add9e4c1fde0&quot;,&quot;9afe18e0-735e-4670-9d06-d217c0d1669e&quot;,&quot;372fec57-ddd5-416d-afa3-4eb71f3f31b3&quot;,&quot;95a62544-8c94-4718-8bfd-8d89d47e1fbd&quot;,&quot;ddacaccc-acfc-458b-9826-9bbd2d196809&quot;,&quot;6d8a7b43-512e-40d7-99da-c162ff95b1c4&quot;,&quot;f9192a8f-7bd7-4edc-8f06-d95da4aa77de&quot;,&quot;ca7cd000-d826-4acd-9e6e-fe3c9cecd00b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9af52f64-58f3-4961-8bed-ade804d91b3b&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2f76243d-548e-4b38-940f-7cc7a283ff41&quot;,&quot;title&quot;:&quot;recentlyVisited&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/libs/commonLib/tests/unit/bookmarks.spec.js&quot;,&quot;file&quot;:&quot;/tests/unit/bookmarks.spec.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;recentlyVisited\&quot;&quot;,&quot;fullTitle&quot;:&quot;recentlyVisited \&quot;before each\&quot; hook in \&quot;recentlyVisited\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const dom = new JSDOM(\&quot;&lt;html&gt;\\n       &lt;body&gt;\\n          &lt;div class=\\\&quot;v-toolbar__title hidden-sm-and-down\\\&quot;&gt;Holidays&lt;/div&gt;\\n       &lt;/body&gt;\\n     &lt;/html&gt;\&quot;);\nglobal.window = dom.window;\nglobal.document = dom.window.document;\nglobal.location = {\n  hostname: hostname\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3b4e6be-6229-4d01-b406-087fe8707c8b&quot;,&quot;parentUUID&quot;:&quot;2f76243d-548e-4b38-940f-7cc7a283ff41&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;adds to recently visted history&quot;,&quot;fullTitle&quot;:&quot;recentlyVisited adds to recently visted history&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:109,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const bookmarks = require(&#x27;./mocks/bookmarks&#x27;);\nexpect(bookmarks.recentlyVisited).to.be.empty;\nawait bookmarks.addRecentlyVisited();\nexpect(bookmarks.recentlyVisited.length).to.equal(1);\nexpect(bookmarks.recentlyVisited[0].label).to.equal(&#x27;Holidays&#x27;);\nexpect(bookmarks.recentlyVisited[0].icon).to.equal(&#x27;mdi-calendar-month&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9eee40f6-e385-4460-8d12-dd1e2676c21f&quot;,&quot;parentUUID&quot;:&quot;2f76243d-548e-4b38-940f-7cc7a283ff41&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9eee40f6-e385-4460-8d12-dd1e2676c21f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:109,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6cffa273-7455-48ed-825b-db622617f83c&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;69e178c5-d861-428b-b18a-d73877fb08d0&quot;,&quot;title&quot;:&quot;CategorySelect.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;CategorySelect.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:100,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_CategorySelect.CategorySelect, {\n  showDialog: false\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79516250-4dd5-4ce5-8ed8-cb8c97ddb283&quot;,&quot;parentUUID&quot;:&quot;69e178c5-d861-428b-b18a-d73877fb08d0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e16e533f-aaa7-4182-ac3d-771179a2a702&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;renders correctly&quot;,&quot;fullTitle&quot;:&quot;CategorySelect.vue inital state renders correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=input_categorySelect]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=dialog_categorySelect]&#x27;).exists()).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;67bb6b05-ea62-4236-88ed-0407238e6b12&quot;,&quot;parentUUID&quot;:&quot;e16e533f-aaa7-4182-ac3d-771179a2a702&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;67bb6b05-ea62-4236-88ed-0407238e6b12&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2f044adb-039e-42ff-a860-5a04f710ca42&quot;,&quot;title&quot;:&quot;CategorySelectDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;CategorySelectDialog.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:56,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_CategorySelectDialog.default, {\n  items: _mockedCategoryResponse.default\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5dbb2c76-0ad6-45d1-94ae-1b9ba15ba459&quot;,&quot;parentUUID&quot;:&quot;2f044adb-039e-42ff-a860-5a04f710ca42&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1ccd4041-21ab-4495-a17a-4435139c6628&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;renders correctly&quot;,&quot;fullTitle&quot;:&quot;CategorySelectDialog.vue inital state renders correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=objectCatTree]&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac0bbdaa-17cd-46a6-9570-ae1fbe246e40&quot;,&quot;parentUUID&quot;:&quot;1ccd4041-21ab-4495-a17a-4435139c6628&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ac0bbdaa-17cd-46a6-9570-ae1fbe246e40&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3de9ba5c-f3bb-443b-bbd0-8224faa5b0e6&quot;,&quot;title&quot;:&quot;CategoryTreeTable.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;CategoryTreeTable.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_CategoryTreeTable.CategoryTreeTable, {\n  objectType: &#x27;forms&#x27;,\n  objectData: _mockedData.mockedObjectData,\n  items: _mockedCategoryResponse.mockedCategoryResponse\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20a48ade-8a0c-4ee3-8ae0-a5f99e3fb9c2&quot;,&quot;parentUUID&quot;:&quot;3de9ba5c-f3bb-443b-bbd0-8224faa5b0e6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;74358347-36d2-4c64-811a-6a4cc8878dfb&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;renders correctly&quot;,&quot;fullTitle&quot;:&quot;CategoryTreeTable.vue inital state renders correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=objectCatTree]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=objectCatTree_permsButtonComponent]&#x27;).exists()).to.equal(false);\nexpect(wrapper.find(&#x27;[data-test=objectCatTree_datatable]&#x27;).exists()).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04ddb402-914e-4d49-ae86-72c168b57258&quot;,&quot;parentUUID&quot;:&quot;74358347-36d2-4c64-811a-6a4cc8878dfb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;04ddb402-914e-4d49-ae86-72c168b57258&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;079c474a-fb21-4a81-94c4-85034c587e5a&quot;,&quot;title&quot;:&quot;Report.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Report.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:45,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_Reports.Report);\ndocument.body.setAttribute(&#x27;data-app&#x27;, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34808658-474c-457c-a1ee-0be788f05f3b&quot;,&quot;parentUUID&quot;:&quot;079c474a-fb21-4a81-94c4-85034c587e5a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;76454131-d486-45ed-a8dd-427b2ea77441&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays toolbar buttons&quot;,&quot;fullTitle&quot;:&quot;Report.vue inital state displays toolbar buttons&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;button i.mdi-refresh&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;button i.mdi-filter-plus-outline&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;button.mdi-export&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0906220-1e96-4177-9bc5-ec17f8f14e3e&quot;,&quot;parentUUID&quot;:&quot;76454131-d486-45ed-a8dd-427b2ea77441&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays report name&quot;,&quot;fullTitle&quot;:&quot;Report.vue inital state displays report name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;.v-toolbar__title&#x27;).text()).to.equal(&#x27;Report - Update profile tasks&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14e9ee9b-4a33-48c0-8b43-8c8f28c6f13d&quot;,&quot;parentUUID&quot;:&quot;76454131-d486-45ed-a8dd-427b2ea77441&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b0906220-1e96-4177-9bc5-ec17f8f14e3e&quot;,&quot;14e9ee9b-4a33-48c0-8b43-8c8f28c6f13d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f8efa6da-6305-4fb7-a857-e3347d1fe3b6&quot;,&quot;title&quot;:&quot;ReportTable.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;ReportTable.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:65,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_Reports.ReportTable, {\n  propsData: {\n    report: _mockedData.mockedFormattedReport\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9973138d-e256-4efa-ac58-b082a9caf057&quot;,&quot;parentUUID&quot;:&quot;f8efa6da-6305-4fb7-a857-e3347d1fe3b6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;19224e85-bc7c-4027-8df1-6bc6b492ee75&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;renders column headers&quot;,&quot;fullTitle&quot;:&quot;ReportTable.vue inital state renders column headers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const headers = wrapper.findAll(&#x27;th&#x27;);\nconst expectedHeaders = [\&quot;Request Link\&quot;, \&quot;Username\&quot;, \&quot;ID For Manage Task\&quot;, \&quot;Status\&quot;, \&quot;Time from Start to Complete\&quot;, \&quot;Date Completed\&quot;, \&quot;Manager ID\&quot;, \&quot;System ID\&quot;, \&quot;Name\&quot;];\nexpectedHeaders.forEach((title, i) =&gt; expect(headers.at(i).text()).to.equal(title));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5844327c-0a89-468d-9dc7-19be04e12af1&quot;,&quot;parentUUID&quot;:&quot;19224e85-bc7c-4027-8df1-6bc6b492ee75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;renders links with the correct icons&quot;,&quot;fullTitle&quot;:&quot;ReportTable.vue inital state renders links with the correct icons&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const firstRow = wrapper.find(&#x27;tbody &gt; tr&#x27;).findAll(&#x27;td&#x27;);\nexpect(firstRow.length).to.equal(9);\nexpect(firstRow.at(0).find(&#x27;button.mdi-magnify&#x27;).exists()).to.equal(true); // Request link\nexpect(firstRow.at(1).text()).to.equal(&#x27;juser&#x27;); // Username\nexpect(firstRow.at(2).find(&#x27;.mdi-menu-open&#x27;).exists()).to.equal(true); // Manage Task menu icon\nexpect(firstRow.at(2).find(&#x27;.v-menu&#x27;).exists()).to.equal(true); // manage task menu\nexpect(firstRow.at(3).text()).to.equal(&#x27;Completed&#x27;); // status\nexpect(firstRow.at(5).text()).to.equal(&#x27;2/24/2021&#x27;); // date completed\nexpect(firstRow.at(6).text()).to.equal(&#x27;1&#x27;); // manager id\nexpect(firstRow.at(7).find(&#x27;button.mdi-magnify&#x27;).exists()).to.equal(true); // link to Task\nexpect(firstRow.at(8).text()).to.equal(&#x27;System Task - Update Profile&#x27;); // task name&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d2e9bac-e1fc-4f0a-8928-01214f4f8b90&quot;,&quot;parentUUID&quot;:&quot;19224e85-bc7c-4027-8df1-6bc6b492ee75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5844327c-0a89-468d-9dc7-19be04e12af1&quot;,&quot;1d2e9bac-e1fc-4f0a-8928-01214f4f8b90&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;298173d1-93f5-428d-815f-7c71e5b42e8c&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;commits SET_SELECTED_FOR_EDIT mutation&quot;,&quot;fullTitle&quot;:&quot;commits SET_SELECTED_FOR_EDIT mutation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(mockstore.mutations.SET_SELECTED_FOR_EDIT).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1d67c6d-f755-4436-9cba-9bca7531dfd5&quot;,&quot;parentUUID&quot;:&quot;298173d1-93f5-428d-815f-7c71e5b42e8c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;commits SET_SHOW_DIALOG mutation&quot;,&quot;fullTitle&quot;:&quot;commits SET_SHOW_DIALOG mutation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44f724e6-9767-4cdb-afe9-6f7e65fec6e0&quot;,&quot;parentUUID&quot;:&quot;298173d1-93f5-428d-815f-7c71e5b42e8c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;18c1e16e-cebe-4fc8-bb56-0406298c023a&quot;,&quot;title&quot;:&quot;PasswordSettings.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;renders correctly&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue renders correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(pwdSettingsApi.listPasswordSettings).to.have.been.called;\nexpect(pwdExpirationActiveCheckBox).to.be.exist;\nexpect(pwdExpirationActiveCheckBox.element.checked).to.equal(false);\nexpect(pwdExpirationTextBox).to.be.exist;\nexpect(pwdExpirationTextBox.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);\nexpect(pwdExpirationTextBox.element.value).to.equal(&#x27;7&#x27;);\nexpect(pwdStrengthActiveCheckBox).to.be.exist;\nexpect(pwdStrengthActiveCheckBox.element.checked).to.equal(false);\nexpect(minPwdLengthTextBox).to.be.exist;\nexpect(minPwdLengthTextBox.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);\nexpect(minPwdLengthTextBox.element.value).to.equal(&#x27;3&#x27;);\nexpect(maxPwdLengthTextBox).to.be.exist;\nexpect(maxPwdLengthTextBox.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);\nexpect(maxPwdLengthTextBox.element.value).to.equal(&#x27;10&#x27;);\nexpect(pwdStrengthExpressionTextBox).to.be.exist;\nexpect(pwdStrengthExpressionTextBox.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;); // remember \\\\ is escaped \\\nexpect(pwdStrengthExpressionTextBox.element.value).to.equal(&#x27;^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{3,10}$&#x27;);\nconst restoreButton = wrapper.find(&#x27;button#restoreDefaultPwdStrengthExpression&#x27;);\nexpect(restoreButton).to.be.exist;\nexpect(restoreButton.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);\nexpect(wrapper.find(&#x27;button#save&#x27;)).to.be.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca8d9f95-2144-4542-b925-29043c4e72a1&quot;,&quot;parentUUID&quot;:&quot;18c1e16e-cebe-4fc8-bb56-0406298c023a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3466fa10-ec30-47c7-a60d-7a42d8d8d3ec&quot;,&quot;title&quot;:&quot;checkboxes enabling textboxes&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;enables Expiration (days) textbox when Enforce Password Expiration checkbox is checked&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue checkboxes enabling textboxes enables Expiration (days) textbox when Enforce Password Expiration checkbox is checked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pwdExpirationActiveCheckBox.trigger(&#x27;click&#x27;);\nawait wrapper.vm.$nextTick();\nexpect(pwdExpirationActiveCheckBox.element.checked).to.equal(true);\nexpect(pwdExpirationTextBox.attributes(&#x27;disabled&#x27;)).to.equal(undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01db946b-c4b1-4730-afbe-2d590a0afc82&quot;,&quot;parentUUID&quot;:&quot;3466fa10-ec30-47c7-a60d-7a42d8d8d3ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;enables min/max password length and strength expression textboxes when Enforce Password Strength checkbox is checked&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue checkboxes enabling textboxes enables min/max password length and strength expression textboxes when Enforce Password Strength checkbox is checked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pwdStrengthActiveCheckBox.trigger(&#x27;click&#x27;);\nawait wrapper.vm.$nextTick();\nexpect(pwdStrengthActiveCheckBox.element.checked).to.equal(true);\nexpect(minPwdLengthTextBox.attributes(&#x27;disabled&#x27;)).to.equal(undefined);\nexpect(maxPwdLengthTextBox.attributes(&#x27;disabled&#x27;)).to.equal(undefined);\nexpect(pwdStrengthExpressionTextBox.attributes(&#x27;disabled&#x27;)).to.equal(undefined);\nconst restoreButton = wrapper.find(&#x27;button#restoreDefaultPwdStrengthExpression&#x27;);\nexpect(restoreButton.attributes(&#x27;disabled&#x27;)).to.equal(undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ebcf69b7-538e-4374-9a1b-a4350a32a66a&quot;,&quot;parentUUID&quot;:&quot;3466fa10-ec30-47c7-a60d-7a42d8d8d3ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;01db946b-c4b1-4730-afbe-2d590a0afc82&quot;,&quot;ebcf69b7-538e-4374-9a1b-a4350a32a66a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a710d5ea-b2d3-4a24-92fd-14b8350aea5f&quot;,&quot;title&quot;:&quot;password length change effects on strength regular expression&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;correctly adjusts strength expression when min pwd length changes&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue password length change effects on strength regular expression correctly adjusts strength expression when min pwd length changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pwdStrengthActiveCheckBox.trigger(&#x27;click&#x27;);\nminPwdLengthTextBox.element.value = &#x27;4&#x27;;\nminPwdLengthTextBox.trigger(&#x27;input&#x27;);\nmaxPwdLengthTextBox.element.value = &#x27;11&#x27;;\nmaxPwdLengthTextBox.trigger(&#x27;input&#x27;);\nawait wrapper.vm.$nextTick(); // remember \\\\ is escaped \\\nexpect(pwdStrengthExpressionTextBox.element.value).to.equal(&#x27;^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{4,11}$&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;11c3acc0-0836-4b95-a9bf-832fc2b693ac&quot;,&quot;parentUUID&quot;:&quot;a710d5ea-b2d3-4a24-92fd-14b8350aea5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;11c3acc0-0836-4b95-a9bf-832fc2b693ac&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2065c806-f16d-42f7-bc8f-f5baf3ff6d4b&quot;,&quot;title&quot;:&quot;restore default password strength&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;restores default password strength values when restore button is clicked&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue restore default password strength restores default password strength values when restore button is clicked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pwdStrengthActiveCheckBox.trigger(&#x27;click&#x27;);\nawait minPwdLengthTextBox.setValue(&#x27;4&#x27;);\nawait maxPwdLengthTextBox.setValue(&#x27;11&#x27;);\nawait wrapper.find(&#x27;button#restoreDefaultPwdStrengthExpression&#x27;).trigger(&#x27;click&#x27;); // remember \\\\ is escaped \\\nexpect(pwdStrengthExpressionTextBox.element.value).to.equal(&#x27;^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{3,10}$&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a10a007-7637-4699-92de-73f7b4f39808&quot;,&quot;parentUUID&quot;:&quot;2065c806-f16d-42f7-bc8f-f5baf3ff6d4b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5a10a007-7637-4699-92de-73f7b4f39808&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;80f33eea-2d3b-422f-b917-08b930f1e26e&quot;,&quot;title&quot;:&quot;save password settings&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;calls updatePasswordSettings with correct params when Save button is clicked&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue save password settings calls updatePasswordSettings with correct params when Save button is clicked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(pwdExpirationActiveCheckBox.element.checked).to.equal(true); // change some settings in ui. make sure api call has correct params when saved\npwdExpirationTextBox.setValue(&#x27;10&#x27;);\nawait minPwdLengthTextBox.setValue(&#x27;4&#x27;);\nawait maxPwdLengthTextBox.setValue(&#x27;11&#x27;);\nwrapper.find(&#x27;button#save&#x27;).trigger(&#x27;click&#x27;);\nexpect(pwdSettingsApi.updatePasswordSettings).to.have.been.called;\nconst requestBody = pwdSettingsApi.updatePasswordSettings.args[0][1].requestBody;\nexpect(requestBody).to.be.ok;\nexpect(requestBody.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION&#x27;).settingsValue).to.equal(&#x27;10&#x27;);\nexpect(requestBody.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION_ACTIVE&#x27;).settingsValue).to.equal(&#x27;1&#x27;);\nexpect(requestBody.find(x =&gt; x.settingsKey == &#x27;PWD_STRENGTH_ACTIVE&#x27;).settingsValue).to.equal(&#x27;1&#x27;);\nexpect(requestBody.find(x =&gt; x.settingsKey == &#x27;PWD_STRENGTH&#x27;).settingsValue).to.equal(&#x27;^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{4,11}$&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e1a6101-093c-40e9-b745-a9757f2e3d93&quot;,&quot;parentUUID&quot;:&quot;80f33eea-2d3b-422f-b917-08b930f1e26e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7e1a6101-093c-40e9-b745-a9757f2e3d93&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[&quot;ca8d9f95-2144-4542-b925-29043c4e72a1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;74d4821d-01b2-4ea8-84db-13f25a01a91d&quot;,&quot;title&quot;:&quot;BiztimeDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;BiztimeDialog.vue\&quot;&quot;,&quot;fullTitle&quot;:&quot;BiztimeDialog.vue \&quot;before each\&quot; hook in \&quot;BiztimeDialog.vue\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;mockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a04bfec7-9ffd-4fd4-9bc4-0b8f4356e0ea&quot;,&quot;parentUUID&quot;:&quot;74d4821d-01b2-4ea8-84db-13f25a01a91d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;BiztimeDialog.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// console.log(&#x27;-- dd:&#x27;, wrapper.vm.$store.state.biztimes.selectedForEdit);\n// headline\nconst headline = wrapper.find(&#x27;span.headline&#x27;);\nexpect(headline.exists()).to.be.true;\nexpect(headline.text()).to.eq(`Edit Business Hours for ${biztime.dayOfWeek}`); // inputs\nexpect(startTimeRef.value).to.deep.equal(biztime.startTime);\nexpect(endTimeRef.value).to.deep.equal(biztime.endTime);\nexpect(activeRef.inputValue).to.equal(biztime.active); // btns\nexpect(saveBtn.exists()).to.be.true;\nexpect(closeBtn.exists()).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f872ab48-7139-4d62-8b22-402cefbd42e6&quot;,&quot;parentUUID&quot;:&quot;74d4821d-01b2-4ea8-84db-13f25a01a91d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should save biztime&quot;,&quot;fullTitle&quot;:&quot;BiztimeDialog.vue should save biztime&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await saveBtn.trigger(&#x27;click&#x27;);\nexpect(mockstore.actions.saveBiztime).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb902fc0-bc7b-4ebc-9e3b-aa2bd598a75d&quot;,&quot;parentUUID&quot;:&quot;74d4821d-01b2-4ea8-84db-13f25a01a91d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should close dialog&quot;,&quot;fullTitle&quot;:&quot;BiztimeDialog.vue should close dialog&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await closeBtn.trigger(&#x27;click&#x27;);\nexpect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;\nexpect(mockstore.mutations.SET_SELECTED_FOR_EDIT).to.have.been.calledWith(store.state.biztimes, {});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88199be0-7625-4b21-89ad-8ba62604718e&quot;,&quot;parentUUID&quot;:&quot;74d4821d-01b2-4ea8-84db-13f25a01a91d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f872ab48-7139-4d62-8b22-402cefbd42e6&quot;,&quot;eb902fc0-bc7b-4ebc-9e3b-aa2bd598a75d&quot;,&quot;88199be0-7625-4b21-89ad-8ba62604718e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7ba94dad-b3fe-45e0-9f39-24cf21c1ca8e&quot;,&quot;title&quot;:&quot;BiztimesTable.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;BiztimesTable.vue\&quot;&quot;,&quot;fullTitle&quot;:&quot;BiztimesTable.vue \&quot;before each\&quot; hook in \&quot;BiztimesTable.vue\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;mockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1048184-647a-45d0-b7e8-3f5fc909b050&quot;,&quot;parentUUID&quot;:&quot;7ba94dad-b3fe-45e0-9f39-24cf21c1ca8e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;BiztimesTable.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// pageTitle\nexpect(pageTitle.exists()).to.be.true;\nexpect(pageTitle.text()).to.eq(&#x27;Business Hours&#x27;); // link to set permissions\nexpect(wrapper.find(&#x27;[data-test=\&quot;setPermissions\&quot;&#x27;).exists()).to.equal(true); // getBiztimes\nexpect(mockstore.actions.getBiztimes).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a046b234-6320-41be-9a25-ff588606a08b&quot;,&quot;parentUUID&quot;:&quot;7ba94dad-b3fe-45e0-9f39-24cf21c1ca8e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a046b234-6320-41be-9a25-ff588606a08b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;85eb939c-4168-41c2-be60-bfe60dee9d5e&quot;,&quot;title&quot;:&quot;HolidaysTable.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1443837e-0234-4452-8664-a0aec6aec24c&quot;,&quot;title&quot;:&quot;initial state&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;HolidaysTable.vue initial state \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_HolidaysTable.default, {\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ae680b3-1411-465f-a78b-6ad6d9b64414&quot;,&quot;parentUUID&quot;:null,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1ad59486-5688-4002-907d-d6c14b491ea5&quot;,&quot;title&quot;:&quot;Menu.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Menu.vue\&quot;&quot;,&quot;fullTitle&quot;:&quot;Menu.vue \&quot;before each\&quot; hook in \&quot;Menu.vue\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_Menu.default, {\n  store\n}); // data-app prevents warning during test: [Vuetify] Unable to locate target [data-app]\n// https://forum.vuejs.org/t/vuetify-data-app-true-and-problems-rendering-v-dialog-in-unit-tests/27495\ndocument.body.setAttribute(&#x27;data-app&#x27;, true);\nmenuButton = wrapper.find(\&quot;button#holidayMenu\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;122c258b-028c-4853-a02e-bc448efb7d32&quot;,&quot;parentUUID&quot;:&quot;1ad59486-5688-4002-907d-d6c14b491ea5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0d68b605-e333-4045-923a-045fd78c1b0c&quot;,&quot;title&quot;:&quot;initial state&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays add holiday button&quot;,&quot;fullTitle&quot;:&quot;Menu.vue initial state displays add holiday button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:52,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;menuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  expect(wrapper.find(&#x27;#addHolidayMobile&#x27;).exists()).to.equal(true);\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5efcf86d-33d2-4742-9f1f-520bf91074e7&quot;,&quot;parentUUID&quot;:&quot;0d68b605-e333-4045-923a-045fd78c1b0c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays set roles &amp; permissions button&quot;,&quot;fullTitle&quot;:&quot;Menu.vue initial state displays set roles &amp; permissions button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:41,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;menuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  expect(wrapper.find(&#x27;[data-test=\&quot;setPermissionsMobile\&quot;&#x27;).exists()).to.equal(true);\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c88d5b93-b0bc-47d6-995d-9d21a8d8fe9a&quot;,&quot;parentUUID&quot;:&quot;0d68b605-e333-4045-923a-045fd78c1b0c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays disabled delete holidays button&quot;,&quot;fullTitle&quot;:&quot;Menu.vue initial state displays disabled delete holidays button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:48,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;menuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  const deleteButton = wrapper.find(&#x27;[data-test=\&quot;deleteButtonMobile\&quot;&#x27;);\n  expect(deleteButton.exists()).to.equal(true);\n  expect(deleteButton.attributes(&#x27;disabled&#x27;)).to.not.be.undefined;\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1175bf80-75ca-4ca5-b3e2-e0aed5badfb1&quot;,&quot;parentUUID&quot;:&quot;0d68b605-e333-4045-923a-045fd78c1b0c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5efcf86d-33d2-4742-9f1f-520bf91074e7&quot;,&quot;c88d5b93-b0bc-47d6-995d-9d21a8d8fe9a&quot;,&quot;1175bf80-75ca-4ca5-b3e2-e0aed5badfb1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:141,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5a5c57c9-ad37-4e51-b90e-074c06772f36&quot;,&quot;title&quot;:&quot;Menu item clicks&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;add holiday button click&quot;,&quot;fullTitle&quot;:&quot;Menu.vue Menu item clicks add holiday button click&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:45,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;menuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  expect(wrapper.find(&#x27;#addHolidayMobile&#x27;).exists()).to.equal(true);\n  wrapper.find(&#x27;button#addHolidayMobile&#x27;).trigger(&#x27;click&#x27;);\n  it(&#x27;commits SET_SELECTED_FOR_EDIT mutation&#x27;, () =&gt; {\n    expect(mockstore.mutations.SET_SELECTED_FOR_EDIT).to.have.been.called;\n  });\n  it(&#x27;commits SET_SHOW_DIALOG mutation&#x27;, () =&gt; {\n    expect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;\n  });\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dbdc7b9f-7fc8-42c1-b7dc-2ce63bb4d0e3&quot;,&quot;parentUUID&quot;:&quot;5a5c57c9-ad37-4e51-b90e-074c06772f36&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;enables delete holidays button&quot;,&quot;fullTitle&quot;:&quot;Menu.vue Menu item clicks enables delete holidays button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:64,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const state = {\n  holidays: [{}, {}, {}],\n  selectedForDelete: [{}],\n  selectedForEdit: {},\n  showDialog: false\n};\nstore = new _vuex.default.Store({\n  modules: (0, _store.mockStore)({\n    state\n  }).modules\n});\nwrapper = (0, _mocks.initWrapper)(_Menu.default, {\n  store\n});\ndocument.body.setAttribute(&#x27;data-app&#x27;, true);\nmenuButton = wrapper.find(\&quot;button#holidayMenu\&quot;);\nmenuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  const deleteButton = wrapper.find(&#x27;[data-test=\&quot;deleteButtonMobile\&quot;&#x27;);\n  expect(deleteButton.attributes(&#x27;disabled&#x27;)).to.equal(undefined);\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ac15183-ea00-4dd5-bed5-7672708ac304&quot;,&quot;parentUUID&quot;:&quot;5a5c57c9-ad37-4e51-b90e-074c06772f36&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dbdc7b9f-7fc8-42c1-b7dc-2ce63bb4d0e3&quot;,&quot;7ac15183-ea00-4dd5-bed5-7672708ac304&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:109,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ba6e407d-c12d-4502-bf13-cd40a218bef7&quot;,&quot;title&quot;:&quot;Toolbar.vue&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;90d9fea5-7ae4-4e56-bbd9-ef2d1dff98bf&quot;,&quot;title&quot;:&quot;initial state&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;initial state\&quot;&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue initial state \&quot;before each\&quot; hook in \&quot;initial state\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_Toolbar.default, {\n  store\n});\ndeleteButton = wrapper.find(&#x27;[data-test=\&quot;deleteButton\&quot;&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1fe8ba8-8834-497f-bc9a-bfb620b4c760&quot;,&quot;parentUUID&quot;:&quot;90d9fea5-7ae4-4e56-bbd9-ef2d1dff98bf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays add holiday button&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue initial state displays add holiday button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;button#addHoliday&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa216f56-6823-4a05-acdd-0daccb8c0609&quot;,&quot;parentUUID&quot;:&quot;90d9fea5-7ae4-4e56-bbd9-ef2d1dff98bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays set roles &amp; permissions button&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue initial state displays set roles &amp; permissions button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=\&quot;setPermissions\&quot;&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26483ec9-310c-43d3-9ade-c63859aca49d&quot;,&quot;parentUUID&quot;:&quot;90d9fea5-7ae4-4e56-bbd9-ef2d1dff98bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays disabled delete holidays button&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue initial state displays disabled delete holidays button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(deleteButton.exists()).to.equal(true);\nexpect(deleteButton.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eef09f27-555d-4589-b533-657666755ab4&quot;,&quot;parentUUID&quot;:&quot;90d9fea5-7ae4-4e56-bbd9-ef2d1dff98bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aa216f56-6823-4a05-acdd-0daccb8c0609&quot;,&quot;26483ec9-310c-43d3-9ade-c63859aca49d&quot;,&quot;eef09f27-555d-4589-b533-657666755ab4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e14d323b-a0ea-4c21-9ccc-0e05d2f95818&quot;,&quot;title&quot;:&quot;add holiday button click&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;add holiday button click\&quot;&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue add holiday button click \&quot;before each\&quot; hook in \&quot;add holiday button click\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;mockstore = (0, _store.mockStore)();\nstore = new _vuex.default.Store({\n  modules: mockstore.modules\n});\nwrapper = (0, _mocks.initWrapper)(_Toolbar.default, {\n  store\n});\nwrapper.find(&#x27;button#addHoliday&#x27;).trigger(&#x27;click&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79450d57-6905-44b5-93c8-3404fd6fdaa7&quot;,&quot;parentUUID&quot;:&quot;e14d323b-a0ea-4c21-9ccc-0e05d2f95818&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;commits SET_SELECTED_FOR_EDIT mutation&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue add holiday button click commits SET_SELECTED_FOR_EDIT mutation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(mockstore.mutations.SET_SELECTED_FOR_EDIT).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a83eddbc-7f59-409a-8419-dc5ea13d064b&quot;,&quot;parentUUID&quot;:&quot;e14d323b-a0ea-4c21-9ccc-0e05d2f95818&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;commits SET_SHOW_DIALOG mutation&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue add holiday button click commits SET_SHOW_DIALOG mutation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45a6047d-d659-4cd2-840c-6edaea09d2bd&quot;,&quot;parentUUID&quot;:&quot;e14d323b-a0ea-4c21-9ccc-0e05d2f95818&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a83eddbc-7f59-409a-8419-dc5ea13d064b&quot;,&quot;45a6047d-d659-4cd2-840c-6edaea09d2bd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e9d8999e-c486-46a5-892d-b0606cca7cc0&quot;,&quot;title&quot;:&quot;holidays have been selected for deletion&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;holidays have been selected for deletion\&quot;&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue holidays have been selected for deletion \&quot;before each\&quot; hook in \&quot;holidays have been selected for deletion\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const state = {\n  holidays: [{}, {}, {}],\n  selectedForDelete: [{}],\n  selectedForEdit: {},\n  showDialog: false\n};\nmockstore = (0, _store.mockStore)({\n  state\n});\nstore = new _vuex.default.Store({\n  modules: mockstore.modules\n});\nwrapper = (0, _mocks.initWrapper)(_Toolbar.default, {\n  store\n});\ndeleteButton = wrapper.find(&#x27;[data-test=\&quot;deleteButton\&quot;&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;50ab84a6-0aac-404a-a037-27c5981aa2a8&quot;,&quot;parentUUID&quot;:&quot;e9d8999e-c486-46a5-892d-b0606cca7cc0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;enables delete holidays button&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue holidays have been selected for deletion enables delete holidays button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(deleteButton.attributes(&#x27;disabled&#x27;)).to.equal(undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46a69a15-fb68-4779-8818-4284b684f0b3&quot;,&quot;parentUUID&quot;:&quot;e9d8999e-c486-46a5-892d-b0606cca7cc0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;dispatches delete_holidays action when delete holidays button is clicked&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue holidays have been selected for deletion dispatches delete_holidays action when delete holidays button is clicked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;deleteButton.trigger(&#x27;click&#x27;);\nexpect(mockstore.actions.delete_holidays).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;619200b3-ffae-4089-b7e4-206ba46d2e27&quot;,&quot;parentUUID&quot;:&quot;e9d8999e-c486-46a5-892d-b0606cca7cc0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;46a69a15-fb68-4779-8818-4284b684f0b3&quot;,&quot;619200b3-ffae-4089-b7e4-206ba46d2e27&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3ddf0998-6fde-46ce-a856-159833e91cc8&quot;,&quot;title&quot;:&quot;biztime actions&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;biztime actions\&quot;&quot;,&quot;fullTitle&quot;:&quot;biztime actions \&quot;before each\&quot; hook in \&quot;biztime actions\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;commit = _sinon.default.spy();\nstate = {};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;328b2947-e3df-4456-b79f-894600ab60ee&quot;,&quot;parentUUID&quot;:&quot;3ddf0998-6fde-46ce-a856-159833e91cc8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;biztime actions\&quot;&quot;,&quot;fullTitle&quot;:&quot;biztime actions \&quot;after each\&quot; hook in \&quot;biztime actions\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;_sinon.default.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c600005f-dfb3-44db-b5b6-d08ec5198ac0&quot;,&quot;parentUUID&quot;:&quot;3ddf0998-6fde-46ce-a856-159833e91cc8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should getBiztimes&quot;,&quot;fullTitle&quot;:&quot;biztime actions should getBiztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await _actions.default.getBiztimes({\n  commit,\n  state\n}, _commonLib.default);\n(0, _chai.expect)(commit.args).to.deep.equal([[&#x27;SET_BIZTIMES&#x27;, [..._list.default]]]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;427c1028-24ac-40fd-b505-b9cc5cf337f4&quot;,&quot;parentUUID&quot;:&quot;3ddf0998-6fde-46ce-a856-159833e91cc8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should saveBiztime&quot;,&quot;fullTitle&quot;:&quot;biztime actions should saveBiztime&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await _actions.default.saveBiztime({\n  commit,\n  state\n}, { ..._list.default[0],\n  $commonLib: _commonLib.default\n});\n(0, _chai.expect)(commit.args).to.deep.equal([[&#x27;SET_BIZTIMES&#x27;, [..._list.default]], [&#x27;SET_SELECTED_FOR_EDIT&#x27;, {}], [&#x27;SET_SHOW_DIALOG&#x27;, false]]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45cdd796-6552-4148-92ce-a4ff4093a5cb&quot;,&quot;parentUUID&quot;:&quot;3ddf0998-6fde-46ce-a856-159833e91cc8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;427c1028-24ac-40fd-b505-b9cc5cf337f4&quot;,&quot;45cdd796-6552-4148-92ce-a4ff4093a5cb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b8bee4d7-e421-4506-a45c-c386ea6bbf11&quot;,&quot;title&quot;:&quot;biztime getters&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get biztimes&quot;,&quot;fullTitle&quot;:&quot;biztime getters should get biztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const state = {\n  biztimes: JSON.parse(JSON.stringify(_list.default))\n};\nconst biztimes = _getters.default.biztimes(state);\n(0, _chai.expect)(biztimes).not.to.deep.equal(_list.default);\nbiztimes.forEach(biztime =&gt; {\n  const startTime = {\n    hour: biztime.startHour,\n    minute: biztime.startMinute\n  };\n  const endTime = {\n    hour: biztime.endHour,\n    minute: biztime.endMinute\n  };\n  (0, _chai.expect)(biztime.startTime).to.deep.equal(startTime);\n  (0, _chai.expect)(biztime.endTime).to.deep.equal(endTime);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e1b8a2d-bb8a-4c2a-8fc5-1307141299ef&quot;,&quot;parentUUID&quot;:&quot;b8bee4d7-e421-4506-a45c-c386ea6bbf11&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2e1b8a2d-bb8a-4c2a-8fc5-1307141299ef&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cff49f8a-d5cf-4ea5-84cb-cd4292de1ae0&quot;,&quot;title&quot;:&quot;biztime mutations&quot;,&quot;fullFile&quot;:&quot;/home/omar/Github/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should SET_BIZTIMES&quot;,&quot;fullTitle&quot;:&quot;biztime mutations should SET_BIZTIMES&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_BIZTIMES(state, [..._list.default]);\n(0, _chai.expect)(state.biztimes).to.deep.equal(_list.default);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;171cad51-2bc9-4b75-a198-f80c4408a0d2&quot;,&quot;parentUUID&quot;:&quot;cff49f8a-d5cf-4ea5-84cb-cd4292de1ae0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SELECTED_FOR_EDIT&quot;,&quot;fullTitle&quot;:&quot;biztime mutations should SET_SELECTED_FOR_EDIT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_SELECTED_FOR_EDIT(state, _list.default[0]);\n(0, _chai.expect)(state.selectedForEdit).to.deep.equal(_list.default[0]);\nSET_SELECTED_FOR_EDIT(state, _list.default[3]);\n(0, _chai.expect)(state.selectedForEdit).to.deep.equal(_list.default[3]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1bbd0f6-6573-41ff-b545-87df030de5cb&quot;,&quot;parentUUID&quot;:&quot;cff49f8a-d5cf-4ea5-84cb-cd4292de1ae0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SHOW_DIALOG&quot;,&quot;fullTitle&quot;:&quot;biztime mutations should SET_SHOW_DIALOG&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_SHOW_DIALOG(state, true);\n(0, _chai.expect)(state.showDialog).to.equal(true);\nSET_SHOW_DIALOG(state, false);\n(0, _chai.expect)(state.showDialog).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c10820d-c11e-4f02-932a-55c13152afe8&quot;,&quot;parentUUID&quot;:&quot;cff49f8a-d5cf-4ea5-84cb-cd4292de1ae0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;171cad51-2bc9-4b75-a198-f80c4408a0d2&quot;,&quot;b1bbd0f6-6573-41ff-b545-87df030de5cb&quot;,&quot;1c10820d-c11e-4f02-932a-55c13152afe8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;b1d67c6d-f755-4436-9cba-9bca7531dfd5&quot;,&quot;44f724e6-9767-4cdb-afe9-6f7e65fec6e0&quot;],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;8.1.1&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;6.1.1&quot;},&quot;marge&quot;:{&quot;options&quot;:null,&quot;version&quot;:&quot;5.1.0&quot;}}}" data-config="{&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;test&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:false,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;htmlFile&quot;:&quot;/home/omar/Github/integrify/test/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>