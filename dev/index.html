<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:17,&quot;tests&quot;:373,&quot;passes&quot;:363,&quot;pending&quot;:0,&quot;failures&quot;:7,&quot;start&quot;:&quot;2021-01-08T17:54:35.190Z&quot;,&quot;end&quot;:&quot;2021-01-08T17:54:35.190Z&quot;,&quot;duration&quot;:101665,&quot;testsRegistered&quot;:373,&quot;passPercent&quot;:97.31903485254692,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:3,&quot;hasSkipped&quot;:true},&quot;results&quot;:[{&quot;uuid&quot;:&quot;e7ab6cef-12ef-4677-9e2a-26c04e8924b2&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// insert known tokens into redis (normally these are created by emailPasswordReset)\nconst mockRes = mocks.mockResponse();\nconst mockReq = await mocks.emailPasswordReset();\nawait redisClient.setexAsync(`pwReset:${accountGuid}`, 3600, securityToken);\nawait redisClient.setexAsync(`pwReset:${securityToken}`, 3600, accountGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3db598f2-76d6-4712-9b8d-84f222fe8301&quot;,&quot;parentUUID&quot;:&quot;e7ab6cef-12ef-4677-9e2a-26c04e8924b2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a new password&quot;,&quot;fullTitle&quot;:&quot;should create a new password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = mocks.createNewPassword(securityToken);\nconst mockRes = mocks.mockResponse();\nawait resetPassword.createNewPassword(mockReq, mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;\n// ensure createNewPassword cleans up redis\nexpect(await redisClient.getAsync(`pwReset:${accountGuid}`)).to.be.null;\nexpect(await redisClient.getAsync(`pwReset:${securityToken}`)).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;744c7874-288f-433e-b012-813bc94a2298&quot;,&quot;parentUUID&quot;:&quot;e7ab6cef-12ef-4677-9e2a-26c04e8924b2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;77a0c2d0-a4ab-49eb-8870-66c4df62f444&quot;,&quot;title&quot;:&quot;Auth API API Key Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/apiKey.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/apiKey.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Auth API API Key Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests \&quot;before all\&quot; hook in \&quot;Auth API API Key Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17308a29-bbc3-48f9-98a4-f754282529dc&quot;,&quot;parentUUID&quot;:&quot;77a0c2d0-a4ab-49eb-8870-66c4df62f444&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Auth API API Key Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests \&quot;after all\&quot; hook in \&quot;Auth API API Key Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await apiKey.deleteTestKeys(testConfig.tenantOne.tenantId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f68a39e7-3f3d-457b-9fa0-e64ea3c3d266&quot;,&quot;parentUUID&quot;:&quot;77a0c2d0-a4ab-49eb-8870-66c4df62f444&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1ada5105-a383-4257-98ac-c5d234cce267&quot;,&quot;title&quot;:&quot;api key crud &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/apiKey.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/apiKey.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should insert an apiKey and return a doc&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should insert an apiKey and return a doc&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:353,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = {expires: new Date(new Date().getTime() + 60000), testOnly: true, description: \&quot;this is a test\&quot;}\nawait apiKey.createApiKey(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst inserted = mockRes.body;\nkey = inserted.key;\nid = inserted._id;\nexpect(inserted).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96572353-ccf4-48c3-be53-ed4e216c89e0&quot;,&quot;parentUUID&quot;:&quot;1ada5105-a383-4257-98ac-c5d234cce267&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list an apiKeys&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should list an apiKeys&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:44,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.key = key;\nawait apiKey.listApiKeys(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst keyList = mockRes.body;\nexpect(keyList).to.exist;\nexpect(keyList.length).to.be.gt(0);\nexpect(keyList[0].hashedKey).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa295a30-fc86-475c-8b64-90f655c8d0ae&quot;,&quot;parentUUID&quot;:&quot;1ada5105-a383-4257-98ac-c5d234cce267&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should verify an apiKey&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should verify an apiKey&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.key = key;\nreq.params.tenant = testConfig.tenantOne.tenantId;\nawait apiKey.verifyApiKey(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst deleted = mockRes.body;\nexpect(deleted.message).to.equal(\&quot;api key valid\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd34c607-c83b-4dc2-a5bb-b19885e0100b&quot;,&quot;parentUUID&quot;:&quot;1ada5105-a383-4257-98ac-c5d234cce267&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should  impersonate using a valid api key and return a JWT&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should  impersonate using a valid api key and return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:69,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.key = key;\nreq.params.tenant = testConfig.tenantOne.tenantId;\nreq.params.userName = testConfig.tenantOne.adminUser.userName;\nawait apiKey.impersonate(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst impersonated = mockRes.body;\nexpect(impersonated).to.exist;\nexpect(impersonated.token).to.exist;\nexpect(impersonated.userName).to.equal(testConfig.tenantOne.adminUser.userName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd4a703b-61ca-4117-a016-8ed389edb704&quot;,&quot;parentUUID&quot;:&quot;1ada5105-a383-4257-98ac-c5d234cce267&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should  impersonate using a valid env token and return a JWT&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should  impersonate using a valid env token and return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\n\n\nreq.params.tenant = testConfig.tenantOne.tenantId;\nreq.params.userName = testConfig.tenantOne.adminUser.userName;\nawait apiKey.impersonateWithSystemApiKey(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst impersonated = mockRes.body;\nexpect(impersonated).to.exist;\nexpect(impersonated.token).to.exist;\nexpect(impersonated.userName).to.equal(testConfig.tenantOne.adminUser.userName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;429da0da-57af-408f-bd91-84876eed9d54&quot;,&quot;parentUUID&quot;:&quot;1ada5105-a383-4257-98ac-c5d234cce267&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete an apiKey and return a doc&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should delete an apiKey and return a doc&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.id = id;\nawait apiKey.deleteApiKey(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst deleted = mockRes.body;\nexpect(deleted.message).to.equal(\&quot;delete successful\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;070a9e22-646a-4a9d-a808-86802328476f&quot;,&quot;parentUUID&quot;:&quot;1ada5105-a383-4257-98ac-c5d234cce267&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;96572353-ccf4-48c3-be53-ed4e216c89e0&quot;,&quot;fa295a30-fc86-475c-8b64-90f655c8d0ae&quot;,&quot;bd34c607-c83b-4dc2-a5bb-b19885e0100b&quot;,&quot;cd4a703b-61ca-4117-a016-8ed389edb704&quot;,&quot;429da0da-57af-408f-bd91-84876eed9d54&quot;,&quot;070a9e22-646a-4a9d-a808-86802328476f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:528,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;13474cf8-54ff-42d9-8d72-f50bd6b18567&quot;,&quot;title&quot;:&quot;Auth API Auth Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Auth API Auth Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests \&quot;before all\&quot; hook in \&quot;Auth API Auth Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;284d1cd1-2ce4-4d85-bd06-1d284495b22a&quot;,&quot;parentUUID&quot;:&quot;13474cf8-54ff-42d9-8d72-f50bd6b18567&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3641db4a-0d64-433e-8cdd-784556c688ce&quot;,&quot;title&quot;:&quot;login&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a contact with a token&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests login should return a contact with a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:219,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet loginEvent = await mocks.loginEvent()\n\t\t\tlet results = await dbauth.login(loginEvent, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst contactInfo = mockRes.body;\n\t\t\texpect(contactInfo.userName).equal(loginEvent.body.username);\n\t\t\texpect(contactInfo.token).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4825a671-654a-4d1b-8f31-a90e4b91cb10&quot;,&quot;parentUUID&quot;:&quot;3641db4a-0d64-433e-8cdd-784556c688ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4825a671-654a-4d1b-8f31-a90e4b91cb10&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:219,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a5fe21ec-a2af-4fc0-b9f4-adfde5d5b91a&quot;,&quot;title&quot;:&quot;refreshJwt&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;refresh a token a user out&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests refreshJwt refresh a token a user out&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:194,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let mockRes = await mocks.mockResponse();\nlet loginEvent = await mocks.loginEvent()\nlet logoutEvent = await mocks.logoutEvent()\nawait dbauth.login(loginEvent, mockRes);\nconst contactInfo = mockRes.body;\nlogoutEvent.cookies = {\&quot;integrifyRefreshToken\&quot;: contactInfo.refreshToken };\nlogoutEvent.body = {token: contactInfo.token, refreshToken: contactInfo.refreshToken }\nawait jwtFuncs.refreshJwt(logoutEvent, await mocks.mockResponse());\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a109ba4-6094-406e-be36-825a1db557d3&quot;,&quot;parentUUID&quot;:&quot;a5fe21ec-a2af-4fc0-b9f4-adfde5d5b91a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6a109ba4-6094-406e-be36-825a1db557d3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:194,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;92307890-3fa3-49c2-81c8-e613a1f4eea6&quot;,&quot;title&quot;:&quot;isAuthenticated&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;refresh a token a user out&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests isAuthenticated refresh a token a user out&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let mockRes = await mocks.mockResponse();\n\nawait jwtFuncs.isAuthenticated({cookies: {integrifyToken: \&quot;fake\&quot;}}, mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ba429fb-6b98-41d1-ac5e-dc623b7a773d&quot;,&quot;parentUUID&quot;:&quot;92307890-3fa3-49c2-81c8-e613a1f4eea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0ba429fb-6b98-41d1-ac5e-dc623b7a773d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f7752494-6df6-4534-9f6e-6d976041a13a&quot;,&quot;title&quot;:&quot;logout&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should log a user out&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests logout should log a user out&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nlet logoutEvent = await mocks.logoutEvent()\nawait dbauth.logout(logoutEvent, mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;\nexpect(mockRes.body).to.deep.equal({message: &#x27;OK&#x27;});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;55e11f0b-9630-4cbc-91f7-fec748e6b2de&quot;,&quot;parentUUID&quot;:&quot;f7752494-6df6-4534-9f6e-6d976041a13a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;55e11f0b-9630-4cbc-91f7-fec748e6b2de&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;03831a20-6562-48eb-afdd-1f6bb0a05f60&quot;,&quot;title&quot;:&quot;Auth API Reset Password Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/resetPassword.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/resetPassword.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Auth API Reset Password Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API Reset Password Tests \&quot;before all\&quot; hook in \&quot;Auth API Reset Password Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(1050000);\nprocess.env.TESTING = true;\nresetRewired.__set__(&#x27;nodemailer&#x27;, nodemailerMock);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;389bb3d4-92de-4688-8b11-372edb73ced9&quot;,&quot;parentUUID&quot;:&quot;03831a20-6562-48eb-afdd-1f6bb0a05f60&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;680d3e67-a7df-4be2-bd76-b7724640ed3a&quot;,&quot;title&quot;:&quot;emailUsernames&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/resetPassword.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/resetPassword.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should send an email of accounts for existing email&quot;,&quot;fullTitle&quot;:&quot;Auth API Reset Password Tests emailUsernames should send an email of accounts for existing email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let config = (await Config.getConfig()).test;\n      const accountGuid = config.tenantOne.adminUser.sid;\n      const mockRes = mocks.mockResponse();\n      const mockReq = await mocks.emailUsernames();\n      await resetRewired.emailUsernames(mockReq, mockRes);\n      expect(mockRes.statusCode).equal(200);\n      expect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3539899-c36d-4280-bf2c-659d62687a61&quot;,&quot;parentUUID&quot;:&quot;680d3e67-a7df-4be2-bd76-b7724640ed3a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e3539899-c36d-4280-bf2c-659d62687a61&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;89df3c56-1a43-43f5-9740-a8384bab4acc&quot;,&quot;title&quot;:&quot;passwordReset&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/resetPassword.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/resetPassword.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;passwordReset\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API Reset Password Tests passwordReset \&quot;before all\&quot; hook in \&quot;passwordReset\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;resetRewired.__set__(&#x27;nodemailer&#x27;, nodemailerMock);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3dbd9818-2ba0-4272-9309-6b287112fc12&quot;,&quot;parentUUID&quot;:&quot;89df3c56-1a43-43f5-9740-a8384bab4acc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;emailPassworReset&quot;,&quot;fullTitle&quot;:&quot;Auth API Reset Password Tests passwordReset emailPassworReset&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let config = (await Config.getConfig()).test;\nconst accountGuid = config.tenantOne.adminUser.sid;\nconst mockRes = mocks.mockResponse();\nconst mockReq = await mocks.emailPasswordReset();\nconsole.log(\&quot;accountguid: \&quot; + accountGuid);\nawait resetRewired.emailPasswordReset(mockReq, mockRes);\n// check if security token was added to redis\nconst securityToken = await redisClient.getAsync(`pwReset:${accountGuid}`);\nconst accountEntry = await redisClient.getAsync(`pwReset:${securityToken}`);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;\nexpect(securityToken).to.exist;\nexpect(accountEntry).to.exist;\n// clean up entries leftover from calling emailPasswordReset\nawait redisClient.del(`pwReset:${accountGuid}`);\nawait redisClient.del(`pwReset:${securityToken}`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e19917d-5677-49fb-a037-0e4f94ee0cda&quot;,&quot;parentUUID&quot;:&quot;89df3c56-1a43-43f5-9740-a8384bab4acc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8e19917d-5677-49fb-a037-0e4f94ee0cda&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8904ee40-449d-4a6d-93a1-9e8ff4771091&quot;,&quot;title&quot;:&quot;Auth SAML Settings Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/samlSettings.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/samlSettings.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Auth SAML Settings Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth SAML Settings Tests \&quot;before all\&quot; hook in \&quot;Auth SAML Settings Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc2011e4-701f-450b-bd92-3657a7188d99&quot;,&quot;parentUUID&quot;:&quot;8904ee40-449d-4a6d-93a1-9e8ff4771091&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Auth SAML Settings Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth SAML Settings Tests \&quot;after all\&quot; hook in \&quot;Auth SAML Settings Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await samlSettings.deleteSamlSettingsByName(testConfig.tenantOne.tenantId, &#x27;unitTestIDP&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9f2725e-0e4b-44a1-86bc-f1c678a0dd41&quot;,&quot;parentUUID&quot;:&quot;8904ee40-449d-4a6d-93a1-9e8ff4771091&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;72732acf-88a2-4fb3-9c96-7eb11452c93d&quot;,&quot;title&quot;:&quot;SAML Settings crud &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/samlSettings.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/samlSettings.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should insert saml settings and return a doc&quot;,&quot;fullTitle&quot;:&quot;Auth SAML Settings Tests SAML Settings crud  should insert saml settings and return a doc&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\n           \nreq.body = data;\nawait samlSettings.createSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst inserted = mockRes.body;\n\nsamlId = inserted._id;\nexpect(inserted).to.exist;\nexpect(inserted.idpMetaData).to.equal(data.idpMetaData);\nexpect(inserted.idpName).to.equal(data.idpName);\nexpect(inserted.idpDescription).to.equal(data.idpDescription);\nexpect(inserted.createdByDetail).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9116f52-76ff-49c3-86b6-0edda3275d15&quot;,&quot;parentUUID&quot;:&quot;72732acf-88a2-4fb3-9c96-7eb11452c93d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get saml settings without an id&quot;,&quot;fullTitle&quot;:&quot;Auth SAML Settings Tests SAML Settings crud  should get saml settings without an id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nawait samlSettings.getSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result.idpName).to.exist;&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected undefined to exist&quot;,&quot;estack&quot;:&quot;AssertionError: expected undefined to exist\n    at Context.&lt;anonymous&gt; (test/integration/functions/samlSettings.test.js:91:38)\n    at processTicksAndRejections (internal/process/task_queues.js:93:5)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;e33e2e0a-6163-427a-8666-23e347eb386b&quot;,&quot;parentUUID&quot;:&quot;72732acf-88a2-4fb3-9c96-7eb11452c93d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get saml settings with an id&quot;,&quot;fullTitle&quot;:&quot;Auth SAML Settings Tests SAML Settings crud  should get saml settings with an id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.samlId = samlId;\nawait samlSettings.getSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result._id.toString()).to.equal(samlId.toString());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;929047ed-8879-473a-a0a3-ed2ac47de5b0&quot;,&quot;parentUUID&quot;:&quot;72732acf-88a2-4fb3-9c96-7eb11452c93d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update saml settings&quot;,&quot;fullTitle&quot;:&quot;Auth SAML Settings Tests SAML Settings crud  should update saml settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.samlId = samlId;\n\nreq.body = data;\n\nawait samlSettings.updateSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;359dbd5f-35d2-439c-8c3b-1b71a2eb76b9&quot;,&quot;parentUUID&quot;:&quot;72732acf-88a2-4fb3-9c96-7eb11452c93d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return sp metadata&quot;,&quot;fullTitle&quot;:&quot;Auth SAML Settings Tests SAML Settings crud  should return sp metadata&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:42,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.tenant = testConfig.tenantOne.tenantId;\nawait samlSettings.getMetaData(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst metadata = mockRes.body;\nexpect(metadata).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f879d3e3-e211-4dee-97f4-fb3e093fa737&quot;,&quot;parentUUID&quot;:&quot;72732acf-88a2-4fb3-9c96-7eb11452c93d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete saml settings&quot;,&quot;fullTitle&quot;:&quot;Auth SAML Settings Tests SAML Settings crud  should delete saml settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.samlId = samlId;\nawait samlSettings.deleteSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst deleted = mockRes.body;\nexpect(deleted.message).to.equal(\&quot;delete successful\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;385833cd-be51-4a34-a4a4-16e7fe189c33&quot;,&quot;parentUUID&quot;:&quot;72732acf-88a2-4fb3-9c96-7eb11452c93d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e9116f52-76ff-49c3-86b6-0edda3275d15&quot;,&quot;929047ed-8879-473a-a0a3-ed2ac47de5b0&quot;,&quot;359dbd5f-35d2-439c-8c3b-1b71a2eb76b9&quot;,&quot;f879d3e3-e211-4dee-97f4-fb3e093fa737&quot;,&quot;385833cd-be51-4a34-a4a4-16e7fe189c33&quot;],&quot;failures&quot;:[&quot;e33e2e0a-6163-427a-8666-23e347eb386b&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:118,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;744c7874-288f-433e-b012-813bc94a2298&quot;],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;68c0dec6-700d-40c7-8edb-30de6011d129&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;32771f1d-6443-41fb-8029-c524e84790df&quot;,&quot;title&quot;:&quot;Dashboard controller tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-dashboards/test/dashboard.controller.test.js&quot;,&quot;file&quot;:&quot;/test/dashboard.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d20d766c-ea19-4179-a71e-636f6d4f07eb&quot;,&quot;parentUUID&quot;:&quot;32771f1d-6443-41fb-8029-c524e84790df&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test&#x27;});\nconsole.log(deleted);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c254bd1e-1493-41b9-854a-fd41f68f12cf&quot;,&quot;parentUUID&quot;:&quot;32771f1d-6443-41fb-8029-c524e84790df&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1ed29006-77e9-40c3-b8ef-ba77e6f3e8af&quot;,&quot;title&quot;:&quot;dashboard crud &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-dashboards/test/dashboard.controller.test.js&quot;,&quot;file&quot;:&quot;/test/dashboard.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should create a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:108,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  dashboard = await dashboardController.createDashboard(tenant, dashboardObj);\nsid = dashboard.sid;\nexpect(sid).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ff69afe-bb90-4aca-afa5-df3e136f2c23&quot;,&quot;parentUUID&quot;:&quot;1ed29006-77e9-40c3-b8ef-ba77e6f3e8af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list dashboards for end users&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should list dashboards for end users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  dashboards = await dashboardController.listDashboards(tenant);\n         expect(dashboards.length).to.be.gt(0);  \n         let createdDashord  = dashboards.find((d) =&gt; {\n             return d.sid === sid;\n         })\n         expect\n         (createdDashord).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e69786f-8dfe-4356-9e60-543f41864799&quot;,&quot;parentUUID&quot;:&quot;1ed29006-77e9-40c3-b8ef-ba77e6f3e8af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should get a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;dashboard = await dashboardController.getDashboard(tenant,sid);\n            expect(dashboard).to.exist         \n            expect(dashboard.sid).to.equal(sid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48c7b62e-f7bd-44c1-84f5-95c292bca5f9&quot;,&quot;parentUUID&quot;:&quot;1ed29006-77e9-40c3-b8ef-ba77e6f3e8af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should update a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;dashboard.banner = &#x27;test-updated&#x27;;\n            const updatedDashboard = await dashboardController.updateDashboard(tenant,dashboard.toObject());\n            expect(updatedDashboard).to.exist         \n            expect(updatedDashboard.sid).to.equal(sid)\n            expect(updatedDashboard.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c606152-808a-4d11-86f8-828b48d5dd6f&quot;,&quot;parentUUID&quot;:&quot;1ed29006-77e9-40c3-b8ef-ba77e6f3e8af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  delete a a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const deleted = await dashboardController.deleteDashboard(tenant,sid);\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;628aa013-f74f-4cb9-95a2-66ca185a5019&quot;,&quot;parentUUID&quot;:&quot;1ed29006-77e9-40c3-b8ef-ba77e6f3e8af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9ff69afe-bb90-4aca-afa5-df3e136f2c23&quot;,&quot;9e69786f-8dfe-4356-9e60-543f41864799&quot;,&quot;48c7b62e-f7bd-44c1-84f5-95c292bca5f9&quot;,&quot;1c606152-808a-4d11-86f8-828b48d5dd6f&quot;,&quot;628aa013-f74f-4cb9-95a2-66ca185a5019&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:178,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7d363b79-a707-4885-bf5a-357975b2fb81&quot;,&quot;title&quot;:&quot;Dashboard route handler tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-dashboards/test/dashboard.handlers.test.js&quot;,&quot;file&quot;:&quot;/test/dashboard.handlers.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a33b965b-2b94-4e6f-8206-464d80b088ed&quot;,&quot;parentUUID&quot;:&quot;7d363b79-a707-4885-bf5a-357975b2fb81&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test&#x27;});\nconsole.log(deleted);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;edd145f5-09ad-4a1e-932f-77353f03dc07&quot;,&quot;parentUUID&quot;:&quot;7d363b79-a707-4885-bf5a-357975b2fb81&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3508b9da-c19c-46d3-be03-1c1416a0aa75&quot;,&quot;title&quot;:&quot;dashboard crud &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-dashboards/test/dashboard.handlers.test.js&quot;,&quot;file&quot;:&quot;/test/dashboard.handlers.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should create a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = dashboardObj;\nawait handlers.createDashboard(req,mockRes);\nconst dashboard = req.body;\nsid = dashboard.sid;\nexpect(sid).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b658f35-2187-462a-ba78-9bc370c89389&quot;,&quot;parentUUID&quot;:&quot;3508b9da-c19c-46d3-be03-1c1416a0aa75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list dashboards for end users&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should list dashboards for end users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nawait handlers.listDashboards(req,mockRes);\nconst  dashboards = mockRes.body;\nexpect(dashboards.length).to.be.gt(0);  \nlet createdDashord  = dashboards.find((d) =&gt; {\n    return d.sid === sid;\n})\nexpect(createdDashord).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d804d039-f65c-406a-8607-9ec1beaf629d&quot;,&quot;parentUUID&quot;:&quot;3508b9da-c19c-46d3-be03-1c1416a0aa75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list dashboards for admins&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should list dashboards for admins&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.query.admin = true;\nawait handlers.listDashboards(req,mockRes);\nconst  dashboards = mockRes.body;\nexpect(dashboards.length).to.be.gt(0);  \nlet createdDashord  = dashboards.find((d) =&gt; {\n    return d.sid === sid;\n})\nexpect(createdDashord).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9477672-55f4-4976-9944-b2ebc31a55b3&quot;,&quot;parentUUID&quot;:&quot;3508b9da-c19c-46d3-be03-1c1416a0aa75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should get a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.sid = sid;\nawait handlers.getDashboard(req,mockRes);\ndashboard = mockRes.body;\nexpect(dashboard).to.exist         \nexpect(dashboard.sid).to.equal(sid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;997e1865-cd8d-49b1-9655-08a5cfb904a3&quot;,&quot;parentUUID&quot;:&quot;3508b9da-c19c-46d3-be03-1c1416a0aa75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should update a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.sid = sid;\nreq.body = dashboard.toObject();\nawait handlers.updateDashboard(req,mockRes);\nconst updatedDashboard = mockRes.body;\nexpect(updatedDashboard).to.exist         \nexpect(updatedDashboard.sid).to.equal(sid)\nexpect(updatedDashboard.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d46dfe2-87fb-4268-82bc-beeba070c792&quot;,&quot;parentUUID&quot;:&quot;3508b9da-c19c-46d3-be03-1c1416a0aa75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should delete a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.sid = sid;\nawait handlers.deleteDashboard(req,mockRes);\nlet deleted = mockRes.body;\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57b20d01-ab19-459a-9563-76b2fb1381c6&quot;,&quot;parentUUID&quot;:&quot;3508b9da-c19c-46d3-be03-1c1416a0aa75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should delete a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = [sid];\nawait handlers.deleteDashboards(req,mockRes);\nlet deleted = mockRes.body;\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3856e30-a7c2-4f9a-a499-ee7786653c73&quot;,&quot;parentUUID&quot;:&quot;3508b9da-c19c-46d3-be03-1c1416a0aa75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9b658f35-2187-462a-ba78-9bc370c89389&quot;,&quot;d804d039-f65c-406a-8607-9ec1beaf629d&quot;,&quot;e9477672-55f4-4976-9944-b2ebc31a55b3&quot;,&quot;997e1865-cd8d-49b1-9655-08a5cfb904a3&quot;,&quot;7d46dfe2-87fb-4268-82bc-beeba070c792&quot;,&quot;57b20d01-ab19-459a-9563-76b2fb1381c6&quot;,&quot;c3856e30-a7c2-4f9a-a499-ee7786653c73&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:74,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;660fb364-fabc-48c0-87ce-a5b0107e0176&quot;,&quot;title&quot;:&quot;Legacy tab mongo tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-dashboards/test/tab.test.js&quot;,&quot;file&quot;:&quot;/test/tab.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig()\ntenant = testConfig.tenantOne.tenantId;;\ntab = await dashboardController.createTestTab(tenant)\nexpect(tab.SID).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84d3e432-80e2-49c8-b8b2-f76033b004f6&quot;,&quot;parentUUID&quot;:&quot;660fb364-fabc-48c0-87ce-a5b0107e0176&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await dashboardController.deleteTestTabs(tenant, {Title: &#x27;created-by-mocha-test&#x27;});\nconsole.log(deleted);\ndeleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test&#x27;});\nconsole.log(deleted);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84ca798b-ff0c-4827-be12-9d6a86fe2c66&quot;,&quot;parentUUID&quot;:&quot;660fb364-fabc-48c0-87ce-a5b0107e0176&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;398e4d77-7e39-4c26-952a-0ce38f588640&quot;,&quot;title&quot;:&quot;tab crud &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-dashboards/test/tab.test.js&quot;,&quot;file&quot;:&quot;/test/tab.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list legacy tabs&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should list legacy tabs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  tabs = await dashboardController.listTabs(tenant);\n expect(tabs.length).to.be.gt(0);  \n tabSid = tabs[0].SID;\n expect(tabSid).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a78bf3f-c302-425b-bfcb-3e5186204deb&quot;,&quot;parentUUID&quot;:&quot;398e4d77-7e39-4c26-952a-0ce38f588640&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a legacy tab&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should get a legacy tab&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;tab = await dashboardController.getTab(tenant,tabSid);\n            expect(tab).to.exist         \n            expect(tab.SID).to.equal(tabSid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca581c15-edd6-445e-b04d-c765c11cbb98&quot;,&quot;parentUUID&quot;:&quot;398e4d77-7e39-4c26-952a-0ce38f588640&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should convert a legacy tab&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should convert a legacy tab&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  dashboard = await dashboardController.converTabToDashboard(tab);\n            expect(dashboard).to.exist         \n            expect(dashboard.layouts).to.exist;\n            expect(dashboard.sid).to.equal(tabSid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca0a7c50-da92-4231-89bc-7d3fdabc9819&quot;,&quot;parentUUID&quot;:&quot;398e4d77-7e39-4c26-952a-0ce38f588640&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should migrate legacy tabs to dashboards&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should migrate legacy tabs to dashboards&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:128,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  success = await dashboardController.migrateTabsToDashboards(tenant);\n            expect(success).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;747e7d5e-8b83-4c36-818c-c9c588c72733&quot;,&quot;parentUUID&quot;:&quot;398e4d77-7e39-4c26-952a-0ce38f588640&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7a78bf3f-c302-425b-bfcb-3e5186204deb&quot;,&quot;ca581c15-edd6-445e-b04d-c765c11cbb98&quot;,&quot;ca0a7c50-da92-4231-89bc-7d3fdabc9819&quot;,&quot;747e7d5e-8b83-4c36-818c-c9c588c72733&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:146,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f9546ad6-b977-49f7-a2e2-84737ac1d870&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0753c6f7-9158-4d7c-a4ab-f22283d5d469&quot;,&quot;title&quot;:&quot;Files API Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-files/test/functions.test.js&quot;,&quot;file&quot;:&quot;/test/functions.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Files API Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45844a6a-2a0a-44eb-90f9-9bd4244c4a21&quot;,&quot;parentUUID&quot;:&quot;0753c6f7-9158-4d7c-a4ab-f22283d5d469&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;writes a file (non file upload)&quot;,&quot;fullTitle&quot;:&quot;Files API Tests writes a file (non file upload)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:65,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(baseUrl)\n  .post(`/api/files/${parentFolder}/${encodeURIComponent(&#x27;testDir/writeTextFile.txt&#x27;)}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\n  .set(&#x27;content-type&#x27;, &#x27;text/plain&#x27;)\n  .send(&#x27;text from writes a file (non file upload)&#x27;)\n  \nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c7cd829-21ef-4c89-b7ca-eccfaa3f38bf&quot;,&quot;parentUUID&quot;:&quot;0753c6f7-9158-4d7c-a4ab-f22283d5d469&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;checks if a file exists&quot;,&quot;fullTitle&quot;:&quot;Files API Tests checks if a file exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(baseUrl)\n  .get(`/api/files/${parentFolder}/${encodeURIComponent(&#x27;testDir/writeTextFile.txt&#x27;)}/exists`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\n   \nexpect(res.status).to.equal(200);\nexpect(res.body).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88f1748d-a87b-4828-b0c5-10206a8b6b8d&quot;,&quot;parentUUID&quot;:&quot;0753c6f7-9158-4d7c-a4ab-f22283d5d469&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uploads a file in multipart form&quot;,&quot;fullTitle&quot;:&quot;Files API Tests uploads a file in multipart form&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:44,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(baseUrl)\n  .post(`/api/files/${parentFolder}/${path}/upload`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\n  .attach(&#x27;files&#x27;, &#x27;./test/mocks/helloWorld.txt&#x27;, &#x27;helloWorld.txt&#x27;)\n  \nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16ea6ea9-3939-4ef7-a7c8-574a377f9702&quot;,&quot;parentUUID&quot;:&quot;0753c6f7-9158-4d7c-a4ab-f22283d5d469&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uploads a file in octet stream&quot;,&quot;fullTitle&quot;:&quot;Files API Tests uploads a file in octet stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(baseUrl)\n  .post(`/api/files/${parentFolder}/${filePath}/uploadStream`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\n  .set(&#x27;Content-Type&#x27;, &#x27;application/octet-stream&#x27;)\n  .attach(&#x27;files&#x27;, &#x27;./test/mocks/helloWorld.txt&#x27;, &#x27;helloWorld.txt&#x27;)\n  \nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;37d7cc0a-825e-406d-8990-5ceee4cb136e&quot;,&quot;parentUUID&quot;:&quot;0753c6f7-9158-4d7c-a4ab-f22283d5d469&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;sends the contents of a file when read call is made with attachment param = false&quot;,&quot;fullTitle&quot;:&quot;Files API Tests sends the contents of a file when read call is made with attachment param = false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(baseUrl)\n  .get(`/api/files/${parentFolder}/${filePath}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\nexpect(res).to.have.status(200);\nexpect(res).to.have.header(&#x27;content-type&#x27;, &#x27;text/plain; charset=utf-8&#x27;);\nexpect(res).to.be.text;\nexpect(res.text).to.include(&#x27;Hello World!&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f3b28520-9192-4e4c-8829-71646125e91f&quot;,&quot;parentUUID&quot;:&quot;0753c6f7-9158-4d7c-a4ab-f22283d5d469&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;sends a file as an attachment read call is made with attachment param = true&quot;,&quot;fullTitle&quot;:&quot;Files API Tests sends a file as an attachment read call is made with attachment param = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(baseUrl)\n  .get(`/api/files/${parentFolder}/${filePath}`)\n  .query({attachment: &#x27;true&#x27;})\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\nexpect(res.statusCode).to.equal(200)\nexpect(res).to.have.header(&#x27;content-disposition&#x27;, &#x27;attachment; filename=\&quot;helloWorld.txt\&quot;&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73e97f51-8fb6-426e-a2da-c6023c7ef153&quot;,&quot;parentUUID&quot;:&quot;0753c6f7-9158-4d7c-a4ab-f22283d5d469&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;downloads a file&quot;,&quot;fullTitle&quot;:&quot;Files API Tests downloads a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let downloadRes = await chai.request(baseUrl)\n  .get(`/api/files/${parentFolder}/${filePath}/download`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\n\nexpect(downloadRes).to.have.status(200);\nexpect(downloadRes).to.have.header(&#x27;content-type&#x27;, &#x27;application/octet-stream&#x27;)\nexpect(downloadRes).to.have.header(&#x27;content-disposition&#x27;, &#x27;attachment; filename=\&quot;helloWorld.txt\&quot;&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93b09181-8f0c-4cc1-b5c6-9e5a2d780b98&quot;,&quot;parentUUID&quot;:&quot;0753c6f7-9158-4d7c-a4ab-f22283d5d469&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;copies a file&quot;,&quot;fullTitle&quot;:&quot;Files API Tests copies a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let copyRes = await chai.request(baseUrl)\n  .put(`/api/files/${parentFolder}/${filePath}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\n  .send({\n    targetParentFolder: \&quot;temp\&quot;,\n    targetFilePath: \&quot;testDir/helloWorld2.txt\&quot;\n  })\nexpect(copyRes.statusCode).to.equal(200)\nexpect(copyRes.text).to.equal(&#x27;1&#x27;);\n// verify that original and copy have same contents\nlet readRes = await chai.request(baseUrl)\n  .get(`/api/files/${parentFolder}/${filePath}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\nexpect(readRes.text).to.include(&#x27;Hello World!&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ceb6cc9-4971-4430-a233-056f1862eccd&quot;,&quot;parentUUID&quot;:&quot;0753c6f7-9158-4d7c-a4ab-f22283d5d469&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;moves a file&quot;,&quot;fullTitle&quot;:&quot;Files API Tests moves a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let moveRes = await chai.request(baseUrl)\n  .patch(`/api/files/${parentFolder}/${filePath}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\n  .send({\n    targetParentFolder: \&quot;temp\&quot;,\n    targetFilePath: \&quot;testDir/helloWorld3.txt\&quot;\n  })\nexpect(moveRes.statusCode).to.equal(200)\nexpect(moveRes.text).to.equal(&#x27;1&#x27;);\n// verify that original file \&quot;helloWorld.txt\&quot; no longer exists\n\nlet readRes = await chai.request(baseUrl)\n  .get(`/api/files/${parentFolder}/${filePath}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\nexpect(readRes.statusCode).to.equal(404)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61e5db7f-3fe3-43d3-b649-8dd3d7a7e182&quot;,&quot;parentUUID&quot;:&quot;0753c6f7-9158-4d7c-a4ab-f22283d5d469&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;deletes a file&quot;,&quot;fullTitle&quot;:&quot;Files API Tests deletes a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// for some reason, this errors with s3 filestore if you run all tests in mocha explorer at the same time\n// but works correctly if you run them one by one\nlet delRes = await chai.request(baseUrl)\n  .delete(`/api/files/${parentFolder}/${encodeURIComponent(\&quot;testDir/helloWorld2.txt\&quot;)}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\nexpect(delRes.statusCode).to.equal(200)\nexpect(delRes.text).to.equal(&#x27;1&#x27;);\n// verify that file \&quot;helloWorld2.txt\&quot; no longer exists\nlet readRes = await chai.request(baseUrl)\n  .get(`/api/files/${parentFolder}/${encodeURIComponent(\&quot;testDir/helloWorld2.txt\&quot;)}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\nexpect(readRes.statusCode).to.equal(404)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;265eeda8-f90a-4894-b0dc-0e09e897d6ac&quot;,&quot;parentUUID&quot;:&quot;0753c6f7-9158-4d7c-a4ab-f22283d5d469&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4c7cd829-21ef-4c89-b7ca-eccfaa3f38bf&quot;,&quot;88f1748d-a87b-4828-b0c5-10206a8b6b8d&quot;,&quot;16ea6ea9-3939-4ef7-a7c8-574a377f9702&quot;,&quot;37d7cc0a-825e-406d-8990-5ceee4cb136e&quot;,&quot;f3b28520-9192-4e4c-8829-71646125e91f&quot;,&quot;73e97f51-8fb6-426e-a2da-c6023c7ef153&quot;,&quot;93b09181-8f0c-4cc1-b5c6-9e5a2d780b98&quot;,&quot;0ceb6cc9-4971-4430-a233-056f1862eccd&quot;,&quot;61e5db7f-3fe3-43d3-b649-8dd3d7a7e182&quot;,&quot;265eeda8-f90a-4894-b0dc-0e09e897d6ac&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:250,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;62398d02-938c-45d0-b6e9-6a2203112673&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ebc9db99-477b-4be0-9fef-d6672e73369f&quot;,&quot;title&quot;:&quot;Instance API Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()} //system level\n// session = {tenant: config.tenantOne.tenantId, user_sid: &#x27;1e660111-de6f-4318-8f51-6e59cb33d8d7&#x27;} //process level\n// session = {tenant: config.tenantOne.tenantId, user_sid:&#x27;521a92c8-e77c-4537-811b-dea6e533d800&#x27;} //category level\ntenantId = config.tenantOne.tenantId;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1777c770-f107-494f-a672-df34d3bd909f&quot;,&quot;parentUUID&quot;:&quot;ebc9db99-477b-4be0-9fef-d6672e73369f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;58fee215-9d4d-4d7d-8338-bf8fb8be2ccf&quot;,&quot;title&quot;:&quot;list tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;get a full instance&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get a full instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:548,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet instances = await Instance.query().orderBy(\&quot;createdDate\&quot;, \&quot;desc\&quot;);\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst fullInstance = await instanceController.getFullInstance(\n  sampleInstanceGuid\n);\nexpect(fullInstance).to.exist;\nexpect(fullInstance.instanceTasks.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4115b8e1-ea47-4fbf-8809-37e4b2397eb0&quot;,&quot;parentUUID&quot;:&quot;58fee215-9d4d-4d7d-8338-bf8fb8be2ccf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance recipient tasks data by instanceSid&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance recipient tasks data by instanceSid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:54,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(config.tenantOne);\nconst instanceSid = &#x27;6D4785AE-57A2-46C5-9141-DE2B134ED8EF&#x27;\nconst instanceTasks = await instanceController.getInstanceRecipientTasksData(instanceSid);\n\nexpect(instanceTasks).to.exist;\nexpect(instanceTasks.length).to.be.gt(0);\nconst maintenanceReqFormTask = instanceTasks[2]\nexpect(maintenanceReqFormTask.taskName).to.equal(&#x27;Maintenance Request Form&#x27;)\nexpect(maintenanceReqFormTask.recipientTasks.length).to.be.gt(0)\nconst recipientTask = maintenanceReqFormTask.recipientTasks[0]\nexpect(recipientTask.recipientGuid).to.equal(&#x27;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF&#x27;);\nexpect(recipientTask.taskData.length).to.be.gt(0)\nexpect(recipientTask.taskData.find(x =&gt; x.dataLabel == &#x27;Location of Problem&#x27;).dataValue).to.equal(&#x27;Inside the building&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b6f89d3-7051-47b1-88d9-49141c9c055d&quot;,&quot;parentUUID&quot;:&quot;58fee215-9d4d-4d7d-8338-bf8fb8be2ccf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my requests columns&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my requests columns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:41,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getMyRequests();\n        \nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;164caf70-6355-48f6-8635-cf065ff3451c&quot;,&quot;parentUUID&quot;:&quot;58fee215-9d4d-4d7d-8338-bf8fb8be2ccf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - filters - ID&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - filters - ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:247,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\n        \nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;processId\&quot;,\n          data: {\n            comparison: \&quot;eq\&quot;,\n            value: sampleInstance.processId,\n          },\n        },\n      ],\n      count: 5,\n    });\n        \n    expect(result.results[0].processId).to.equal(sampleInstance.processId);\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;instanceId\&quot;,\n          data: {\n            comparison: \&quot;gt\&quot;,\n            value: 500,\n          },\n        },\n      ],\n      sort: \&quot;instanceId\&quot;,\n      dir: \&quot;asc\&quot;,\n      count: 5,\n    });\n        \n    // no longer useful after starting over with an empty db\n    // result.results.length.should.equal(5); \n        \n    result.results.forEach((result) =&gt; {\n      expect(result.instanceId).to.be.gt(500);\n    });\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;instanceId\&quot;,\n          data: {\n            comparison: \&quot;lt\&quot;,\n            value: 505,\n          },\n        },\n      ],\n      sort: \&quot;instanceId\&quot;,\n      dir: \&quot;desc\&quot;,\n      count: 2,\n    });\n        \n    expect(result.results.length).to.equal(2);\n    result.results.forEach((result) =&gt; {\n      expect(result.instanceId).to.be.lt(505);\n    });\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;412294f6-f8bd-4dc0-8686-b9955465bdaf&quot;,&quot;parentUUID&quot;:&quot;58fee215-9d4d-4d7d-8338-bf8fb8be2ccf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - filters - date&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - filters - date&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:223,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\n        \nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let d = moment().day(-90);\n    let result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;range\&quot;, value: \&quot;90\&quot; },\n        },\n      ],\n      count: 1,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    if (result.results.length)\n      expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    d = moment().year(-30);\n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;range\&quot;, value: \&quot;30\&quot; },\n        },\n      ],\n      count: 1,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    if (result.results.length)\n        expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    d = moment().day(-7);\n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;range\&quot;, value: \&quot;7\&quot; },\n        },\n      ],\n      count: 1,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    // if (result.results.length)\n    //     expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    // d = moment().day(-3);\n    // result = await f.call(instanceController, {\n    //   filters: [\n    //     {\n    //       field: \&quot;StartDate\&quot;,\n    //       data: { comparison: \&quot;range\&quot;, value: \&quot;3\&quot; },\n    //     },\n    //   ],\n    //   count: 1,\n    //   dir: \&quot;asc\&quot;,\n    // });\n        \n    // if (result.results.length)\n    //     expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    // d = moment().day(-1);\n    // result = await f.call(instanceController, {\n    //   filters: [\n    //     {\n    //       field: \&quot;StartDate\&quot;,\n    //       data: { comparison: \&quot;range\&quot;, value: \&quot;1\&quot; },\n    //     },\n    //   ],\n    //   count: 1,\n    //   dir: \&quot;asc\&quot;,\n    // });\n        \n    // if (result.results.length)\n    //     expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    const startDate = moment(\&quot;2018-10-11\&quot;);\n    const endDate = moment(\&quot;2018-11-23\&quot;);\n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;gt\&quot;, value: \&quot;2018-10-11\&quot; },\n        },\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;lt\&quot;, value: \&quot;2018-11-23\&quot; },\n        },\n      ],\n      count: 1,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    if (result.results.length) {\n        expect(result.results[0].startDate).to.be.gt(startDate.toDate());\n        expect(result.results[0].startDate).to.be.lt(endDate.toDate());\n    }\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ade3c59d-fda6-4103-95b3-81c308b2d813&quot;,&quot;parentUUID&quot;:&quot;58fee215-9d4d-4d7d-8338-bf8fb8be2ccf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - filters - name&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - filters - name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:153,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;instanceName\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: \&quot;test\&quot; },\n        },\n      ],\n      count: 10,\n    });\n        \n    result.results.forEach((instance) =&gt; {\n      expect(instance.instanceName.toLowerCase()).to.contain(\&quot;test\&quot;);\n    });\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;processName\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: \&quot;test\&quot; },\n        },\n      ],\n      count: 10,\n    });\n        \n    // no longer useful after starting over with an empty db\n    // result.results.forEach((instance) =&gt; {\n    //   instance.processName.should.contain(\&quot;test\&quot;);\n    // });\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;requester\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: \&quot;system system\&quot; },\n        },\n      ],\n      count: 10,\n    });\n        \n    result.results.forEach((instance) =&gt; {\n      expect(instance.requesterGuid\n        .toLowerCase())\n        .to.equal(session.user_sid.toLowerCase());\n    });\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88991dae-b56f-4797-bb88-3200e6bae394&quot;,&quot;parentUUID&quot;:&quot;58fee215-9d4d-4d7d-8338-bf8fb8be2ccf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - filters - guid&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - filters - guid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:125,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;processGuid\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: sampleInstance.processGuid },\n        },\n      ],\n      count: 10,\n    });\n        \n    result.results.forEach((instance) =&gt; {\n      expect(instance.processName.indexOf(sampleInstance.processName)).to.be.gt(-1);\n    });\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;requesterGuid\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: session.user_sid },\n        },\n      ],\n      count: 10,\n    });\n        \n    result.results.forEach((instance) =&gt; {\n      expect(instance.requesterGuid\n        .toLowerCase())\n        .to.equal(session.user_sid);\n    });\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;445aff3d-ef7e-4016-9901-679d6fc306b2&quot;,&quot;parentUUID&quot;:&quot;58fee215-9d4d-4d7d-8338-bf8fb8be2ccf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - count&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\n        \nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, { count: 2 });\n        \n    expect(result.results).to.exist;\n    expect(result.results.length).to.equal(2);\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d9188c2-1377-4adb-8c75-9a8c2405903d&quot;,&quot;parentUUID&quot;:&quot;58fee215-9d4d-4d7d-8338-bf8fb8be2ccf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my requests params - sort, dir&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my requests params - sort, dir&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:59,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      count: 2,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    expect(result.results[0].createdDate).to.be.lt(\n      result.results[1].createdDate\n    );\n        \n    result = await f.call(instanceController, {\n      count: 2,\n      dir: \&quot;desc\&quot;,\n    });\n        \n    expect(result.results[0].createdDate).to.be.gt(\n      result.results[1].createdDate\n    );\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58ef3dd7-aaa6-4928-8b7c-5ac72569c013&quot;,&quot;parentUUID&quot;:&quot;58fee215-9d4d-4d7d-8338-bf8fb8be2ccf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my requests param - start&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my requests param - start&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:89,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      start: 0,\n      count: 2,\n      sort: \&quot;instanceId\&quot;,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    const startZeroId = result.results[0].instanceId;\n        \n    result = await f.call(instanceController, {\n      start: 1,\n      count: 2,\n      sort: \&quot;instanceId\&quot;,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    const startOneId = result.results[0].instanceId;\n        \n    expect(startZeroId).to.be.lessThan(startOneId);\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;600d0812-a3fb-4fed-9f7e-58f98b374e4a&quot;,&quot;parentUUID&quot;:&quot;58fee215-9d4d-4d7d-8338-bf8fb8be2ccf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get monitor requests&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get monitor requests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({permisionType: &#x27;monitor&#x27;});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\nexpect(firstInstance.requester).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ce0cf74-bebc-4f6b-a6ec-3e099aafb117&quot;,&quot;parentUUID&quot;:&quot;58fee215-9d4d-4d7d-8338-bf8fb8be2ccf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get monitor requests with search term against procssName, instanceName and requester&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get monitor requests with search term against procssName, instanceName and requester&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:60,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({search: sampleInstance.processName, permisionType: &#x27;monitor&#x27;});\nconsole.log(result)\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\nexpect(firstInstance.requester).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc13e239-9214-4386-a8af-4515c36ad665&quot;,&quot;parentUUID&quot;:&quot;58fee215-9d4d-4d7d-8338-bf8fb8be2ccf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get monitor requests with a numeric term against instanceId&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get monitor requests with a numeric term against instanceId&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({search: sampleInstance.instanceId, permisionType: &#x27;monitor&#x27;});\nconsole.log(result)\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\nexpect(firstInstance.requester).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3da14948-e7df-412d-a7f0-32c1552cdfb3&quot;,&quot;parentUUID&quot;:&quot;58fee215-9d4d-4d7d-8338-bf8fb8be2ccf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get manage requests&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get manage requests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({permisionType: &#x27;manage&#x27;});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\nexpect(firstInstance.requester).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eda53886-004f-4cf6-8072-84aadee8eb09&quot;,&quot;parentUUID&quot;:&quot;58fee215-9d4d-4d7d-8338-bf8fb8be2ccf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4115b8e1-ea47-4fbf-8809-37e4b2397eb0&quot;,&quot;9b6f89d3-7051-47b1-88d9-49141c9c055d&quot;,&quot;164caf70-6355-48f6-8635-cf065ff3451c&quot;,&quot;412294f6-f8bd-4dc0-8686-b9955465bdaf&quot;,&quot;ade3c59d-fda6-4103-95b3-81c308b2d813&quot;,&quot;88991dae-b56f-4797-bb88-3200e6bae394&quot;,&quot;445aff3d-ef7e-4016-9901-679d6fc306b2&quot;,&quot;6d9188c2-1377-4adb-8c75-9a8c2405903d&quot;,&quot;58ef3dd7-aaa6-4928-8b7c-5ac72569c013&quot;,&quot;600d0812-a3fb-4fed-9f7e-58f98b374e4a&quot;,&quot;3ce0cf74-bebc-4f6b-a6ec-3e099aafb117&quot;,&quot;fc13e239-9214-4386-a8af-4515c36ad665&quot;,&quot;3da14948-e7df-412d-a7f0-32c1552cdfb3&quot;,&quot;eda53886-004f-4cf6-8072-84aadee8eb09&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1707,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;db292a3d-7948-49a3-9bdd-3f973a946413&quot;,&quot;title&quot;:&quot;delete/undelete tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes a request&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests deletes a request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:168,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({permisionType: &#x27;monitor&#x27;});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\nsampleInstances = result.results;\n    \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\nsampleInstanceGuid = firstInstance.instanceGuid;\n      \nlet deleted = await instanceController.deleteInstance(sampleInstanceGuid);\n\nexpect(sampleInstanceGuid).to.equal(deleted.instanceGuid)\nexpect(deleted.deletedDate).not.be.null\nconst Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet excludeDeleted = await Instance.query().where({instanceGuid: sampleInstanceGuid})\nexpect(excludeDeleted.length).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d831bb6-1fc0-49df-a7d3-9cd2ec434766&quot;,&quot;parentUUID&quot;:&quot;db292a3d-7948-49a3-9bdd-3f973a946413&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retores a request&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests retores a request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:52,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nlet undeleted = await instanceController.restoreInstance(sampleInstanceGuid);\n//expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\nexpect(sampleInstanceGuid).to.equal(undeleted.instanceGuid)\nexpect(undeleted.deletedDate).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91b54ee9-b83c-42e6-bc69-0cf1f85e03f0&quot;,&quot;parentUUID&quot;:&quot;db292a3d-7948-49a3-9bdd-3f973a946413&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;deletes a batch of requests&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests deletes a batch of requests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:187,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst instanceGuids = sampleInstances.map((i) =&gt; {\n  return i.instanceGuid;\n})\nlet deleted = await instanceController.deleteInstances(instanceGuids);\n//expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\nexpect(deleted.length).to.equal(sampleInstances.length);\n//expect(deleted[0].instanceGuid).to.equal(sampleInstances[0].instanceGuid);\nexpect(deleted[0].deletedDate).not.to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26219396-542d-4ae1-9b96-641d26d067bb&quot;,&quot;parentUUID&quot;:&quot;db292a3d-7948-49a3-9bdd-3f973a946413&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;restores a batch of requests&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests restores a batch of requests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:158,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst instanceGuids = sampleInstances.map((i) =&gt; {\n  return i.instanceGuid;\n})\nlet deleted = await instanceController.restoreInstances(instanceGuids);\n//expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\nexpect(deleted.length).to.equal(sampleInstances.length);\nexpect(deleted[0].instanceGuid).to.equal(sampleInstances[0].instanceGuid);\nexpect(deleted[0].deletedDate).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;422427c6-8144-43cb-95c4-1774a9c38a94&quot;,&quot;parentUUID&quot;:&quot;db292a3d-7948-49a3-9bdd-3f973a946413&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;restores all&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests restores all&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:561,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nlet restored = await instanceController.restoreAllInstances();\n//expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\nexpect(restored.length).to.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6881cfc-8137-4c72-a30d-406458791705&quot;,&quot;parentUUID&quot;:&quot;db292a3d-7948-49a3-9bdd-3f973a946413&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0d831bb6-1fc0-49df-a7d3-9cd2ec434766&quot;,&quot;91b54ee9-b83c-42e6-bc69-0cf1f85e03f0&quot;,&quot;26219396-542d-4ae1-9b96-641d26d067bb&quot;,&quot;422427c6-8144-43cb-95c4-1774a9c38a94&quot;,&quot;d6881cfc-8137-4c72-a30d-406458791705&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1126,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0b3317c1-9ff0-4efa-a91d-a7141dbd333a&quot;,&quot;title&quot;:&quot;insert tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;inserts an instance data&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests insert tests inserts an instance data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceDataRow = {\n  itaskRecipientGuid: &#x27;8ad1a6f2-9f6f-4667-9750-d961044ed817&#x27;,\n  itaskGuid: &#x27;5bde578f-615f-4494-86b2-ca61044ed883&#x27;,\n  taskGuid: &#x27;6386f905-7fac-41c6-9b6b-86d53f14d61c&#x27;,\n  objectGuid: null,\n  objectType: null,\n  objectId: null,\n  dataProperty: &#x27;1491430190541&#x27;,\n  dataType: &#x27;String&#x27;,\n  dataSid: &#x27;14777392-ac81-44f0-b1f2-87d53f14d65d&#x27;,\n  dataId: null,\n  dataClientId: &#x27;1491430190541&#x27;,\n  dataLabel: &#x27;Enter Details:&#x27;,\n  dataValue: &#x27;Need a background check&#x27;,\n  META_1: &#x27;TEST_INSERT_INSTANCE_DATA&#x27;,\n  META_2: null,\n  dataHide: null,\n  instanceContactGuid: null,\n  roleGuid: null,\n  dataValueExt: null,\n  questionType: &#x27;LongText&#x27;,\n  deletedDate: new Date().toISOString() // so that it doesnt interfere with its instance\n}\nconst instanceController = new InstanceController(session)\nlet instanceDataGuid = await instanceController.insertInstanceData(instanceDataRow)\nexpect(instanceDataGuid).to.be.a.uuid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2b4e2e2-fde8-4bb5-ba5b-471295dea3d8&quot;,&quot;parentUUID&quot;:&quot;0b3317c1-9ff0-4efa-a91d-a7141dbd333a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a2b4e2e2-fde8-4bb5-ba5b-471295dea3d8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3145ca3d-4693-43ab-9712-08a861a7857f&quot;,&quot;title&quot;:&quot;update tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates an instance task recipient task state&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests update tests updates an instance task recipient task state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session)\nconst recipTaskSid = &#x27;b3fef53a-7742-46d1-9faf-be573c14d6fa&#x27;\nlet taskState = &#x27;Cancelled&#x27;\nlet updated = await instanceController.setInstanceRecipientTaskState(recipTaskSid, taskState)\nexpect(updated.taskState).to.equal(taskState)\n// change it back to Completed\ntaskState = &#x27;Completed&#x27;\nupdated = await instanceController.setInstanceRecipientTaskState(recipTaskSid, taskState)\nexpect(updated.taskState).to.equal(taskState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df718d51-8df2-4b64-aedb-08207a41c10f&quot;,&quot;parentUUID&quot;:&quot;3145ca3d-4693-43ab-9712-08a861a7857f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;df718d51-8df2-4b64-aedb-08207a41c10f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;31f680ed-1727-46a3-a502-503640e45aaa&quot;,&quot;title&quot;:&quot;Instance API Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/instanceModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;19de6e18-b70f-4e2e-b7c1-b8e92adab7da&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/instanceModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceModel.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Instance API Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dccfe12c-23a0-46ee-a985-15bdcded3b32&quot;,&quot;parentUUID&quot;:&quot;19de6e18-b70f-4e2e-b7c1-b8e92adab7da&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Instance API Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceModel = await sqldb.models.bindModel(config.tenantOne.tenantId, instanceModels.Instance)\n          \n          let results = await instanceModel.query()\n          //console.log(results)\n          expect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1865ea15-223f-4fda-b418-6e42ef829104&quot;,&quot;parentUUID&quot;:&quot;19de6e18-b70f-4e2e-b7c1-b8e92adab7da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a hash of bound models&quot;,&quot;fullTitle&quot;:&quot;Instance API Model Tests tests should return a hash of bound models&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceModel = (await models.getModels(config.tenantOne.tenantId)).Instance;\n          \n          let results = await instanceModel.query()\n          //console.log(results)\n          expect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ead43bb8-9120-40c0-8f1f-cc21b159415d&quot;,&quot;parentUUID&quot;:&quot;19de6e18-b70f-4e2e-b7c1-b8e92adab7da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should bound models should be cached in memory&quot;,&quot;fullTitle&quot;:&quot;Instance API Model Tests tests should bound models should be cached in memory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(models._tenantModels[config.tenantOne.tenantId]).to.exist\n          let results = await models._tenantModels[config.tenantOne.tenantId].Instance.query()\n          //console.log(results)\n          expect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8cd5f44-85b3-4803-a29f-3d4c57aad29a&quot;,&quot;parentUUID&quot;:&quot;19de6e18-b70f-4e2e-b7c1-b8e92adab7da&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1865ea15-223f-4fda-b418-6e42ef829104&quot;,&quot;ead43bb8-9120-40c0-8f1f-cc21b159415d&quot;,&quot;b8cd5f44-85b3-4803-a29f-3d4c57aad29a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;686957dd-3ce1-4b5c-8ed6-a4ddaafbfe2e&quot;,&quot;title&quot;:&quot;Task API Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/myTaskController.test.js&quot;,&quot;file&quot;:&quot;/test/db/myTaskController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()};\ntenantId = config.tenantOne.tenantId;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;966417bc-8eca-41b8-a66e-f1d26921d427&quot;,&quot;parentUUID&quot;:&quot;686957dd-3ce1-4b5c-8ed6-a4ddaafbfe2e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5847a5df-314c-4bf8-815e-c6d0d5673575&quot;,&quot;title&quot;:&quot;list tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/myTaskController.test.js&quot;,&quot;file&quot;:&quot;/test/db/myTaskController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set a sample task&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should set a sample task&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:202,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Task = await models.getModel(config.tenantOne.tenantId, &#x27;InstanceRecipientTask&#x27;);\nconst tasks = await Task.query()\n  .withGraphFetched(&#x27;[instanceTaskBase, taskType, instance]&#x27;)\n  .where(&#x27;recipientGuid&#x27;, session.user_sid)\n  .orderBy(&#x27;instanceRecipientTask.createdDate&#x27;, &#x27;desc&#x27;);\nexpect(tasks.length).to.be.gt(0);\nsampleTaskGuid = tasks[0].itaskRecipientGuid;\nsampleTask = tasks[0];\nsampleTask.taskName = sampleTask.instanceTaskBase.taskName;\nsampleTask.taskTypeName = sampleTask.taskType.taskTypeName;\nsampleTask.instanceId = sampleTask.instance.instanceId;\nsampleTask.instanceName = sampleTask.instance.instanceName;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc0841b5-3d19-4be1-aacc-c4198eaa205b&quot;,&quot;parentUUID&quot;:&quot;5847a5df-314c-4bf8-815e-c6d0d5673575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks columns&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks columns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:250,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst result = await taskController.getMyTasks();\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\nconst firstTask = result.results[0];\nexpect(firstTask.itaskRecipientId).to.be.ok;\nexpect(firstTask.itaskRecipientGuid).to.be.ok;\nexpect(firstTask.taskName).to.be.ok;\nexpect(firstTask.taskTypeName).to.be.ok;\nexpect(firstTask.createdDate).to.be.ok;\nexpect(firstTask.dueDate).not.to.be.undefined;\nexpect(firstTask.priority).not.to.be.undefined;\nexpect(firstTask.instanceName).to.be.ok;\nexpect(firstTask.instanceId).to.be.ok;\nexpect(firstTask.lastMilestone).to.be.ok;\nexpect(result.total).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e25ab8fe-b34a-428d-bd71-d3a892ac2d32&quot;,&quot;parentUUID&quot;:&quot;5847a5df-314c-4bf8-815e-c6d0d5673575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my open tasks only&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my open tasks only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:239,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskState&#x27;, &#x27;eq&#x27;, &#x27;Open&#x27;, 50, &#x27;asc&#x27;);\nconst result = await taskController.getMyTasks(options);\nresult.results.forEach(task =&gt; {\n  expect(task.taskState === &#x27;Initialized&#x27; || task.taskState === &#x27;Started&#x27;).to.equal(true);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95b3de55-adad-494c-a2b7-e587f21bd707&quot;,&quot;parentUUID&quot;:&quot;5847a5df-314c-4bf8-815e-c6d0d5673575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my completed tasks only&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my completed tasks only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:225,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskState&#x27;, &#x27;eq&#x27;, &#x27;Completed&#x27;, 50, &#x27;asc&#x27;);\nconst result = await taskController.getMyTasks(options);\nresult.results.forEach(task =&gt; {\n  expect(task.taskState).to.equal(&#x27;Completed&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e509d835-e35a-4306-a1cb-bf227966373a&quot;,&quot;parentUUID&quot;:&quot;5847a5df-314c-4bf8-815e-c6d0d5673575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: taskName&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: taskName&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:233,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskName&#x27;, &#x27;contains&#x27;, sampleTask.taskName);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4bc8fbd9-9970-491c-9f99-ccf32610a4a4&quot;,&quot;parentUUID&quot;:&quot;5847a5df-314c-4bf8-815e-c6d0d5673575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: taskType&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: taskType&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:234,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskType&#x27;, &#x27;contains&#x27;, sampleTask.taskTypeName);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;112155e7-41c1-4b38-8c8e-f2cc8ce64dec&quot;,&quot;parentUUID&quot;:&quot;5847a5df-314c-4bf8-815e-c6d0d5673575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: description (instanceName)&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: description (instanceName)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:232,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;instanceName&#x27;, &#x27;contains&#x27;, sampleTask.instanceName);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1c2fc75-8923-4b7e-b9cb-8ff483483221&quot;,&quot;parentUUID&quot;:&quot;5847a5df-314c-4bf8-815e-c6d0d5673575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: requestId (instanceId)&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: requestId (instanceId)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:124,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;instanceId&#x27;, &#x27;contains&#x27;, sampleTask.instanceId);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8a2faca9-b6e1-47fb-9fb6-0f831404af19&quot;,&quot;parentUUID&quot;:&quot;5847a5df-314c-4bf8-815e-c6d0d5673575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: requester&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: requester&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:238,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;requester&#x27;, &#x27;contains&#x27;, &#x27;system system&#x27;);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a91251c-9a79-4dd0-ab5d-2af42c36e3f7&quot;,&quot;parentUUID&quot;:&quot;5847a5df-314c-4bf8-815e-c6d0d5673575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: createdDate&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: createdDate&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:180,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet d = moment().day(-90);\nlet options = generateOptions(&#x27;createdDate&#x27;, &#x27;range&#x27;, &#x27;90&#x27;, 1, &#x27;asc&#x27;);\nlet result = await taskController.getMyTasks(options);\nexpect(result.results[0].createdDate).to.be.gt(d.toDate());\nd = moment().year(-7);\noptions = generateOptions(&#x27;createdDate&#x27;, &#x27;range&#x27;, &#x27;7&#x27;, 1, &#x27;asc&#x27;);\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].createdDate).to.be.gt(d.toDate());\nconst count = 100000;\nresult = await taskController.getMyTasks({count});\nconst resultsLength = result.results.length;\nconst endDate = result.results[0].createdDate;\nconst startDate = result.results[result.results.length - 1].createdDate;\noptions = {\n  filters: [\n    {\n      field: &#x27;createdDate&#x27;,\n      data: {\n        comparison: &#x27;gteq&#x27;,\n        value: startDate,\n      }\n    },\n    {\n      field: &#x27;createdDate&#x27;,\n      data: {\n        comparison: &#x27;lteq&#x27;,\n        value: endDate\n      }\n    },\n  ],\n  count,\n};\nresult = await taskController.getMyTasks(options);\nexpect(result.results.length).to.equal(resultsLength);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { Mon, 31 Aug 2020 21:39:35 GMT\n  getMonthAbbr: [Function],\n  getMonthName: [Function],\n  getLastMonthName: [Function],\n  getUTCOffset: [Function],\n  toCLFString: [Function],\n  toYMD: [Function],\n  toDBString: [Function],\n  clearTime: [Function],\n  clearUTCTime: [Function],\n  add: [Function],\n  addMilliseconds: [Function],\n  addSeconds: [Function],\n  addMinutes: [Function],\n  addHours: [Function],\n  addDays: [Function],\n  addWeeks: [Function],\n  addMonths: [Function],\n  addYears: [Function],\n  remove: [Function],\n  removeMilliseconds: [Function],\n  removeSeconds: [Function],\n  removeMinutes: [Function],\n  removeHours: [Function],\n  removeDays: [Function],\n  removeWeeks: [Function],\n  removeMonths: [Function],\n  removeYears: [Function],\n  addWeekdays: [Function],\n  setTimeToNow: [Function],\n  clone: [Function],\n  between: [Function],\n  compareTo: [Function],\n  equals: [Function],\n  equalsDay: [Function],\n  isToday: [Function],\n  isAfter: [Function],\n  isBefore: [Function],\n  isWeekend: [Function],\n  getDaysBetween: [Function],\n  getHoursBetween: [Function],\n  getMinutesBetween: [Function],\n  getSecondsBetween: [Function],\n  getMillisecondsBetween: [Function],\n  getMonthsBetween: [Function],\n  getOrdinalNumber: [Function],\n  toFormat: [Function],\n  toUTCFormat: [Function],\n  getWeekNumber: [Function],\n  getFullWeekNumber: [Function] } to be above { Mon, 05 Oct 2020 16:51:37 GMT\n  getMonthAbbr: [Function],\n  getMonthName: [Function],\n  getLastMonthName: [Function],\n  getUTCOffset: [Function],\n  toCLFString: [Function],\n  toYMD: [Function],\n  toDBString: [Function],\n  clearTime: [Function],\n  clearUTCTime: [Function],\n  add: [Function],\n  addMilliseconds: [Function],\n  addSeconds: [Function],\n  addMinutes: [Function],\n  addHours: [Function],\n  addDays: [Function],\n  addWeeks: [Function],\n  addMonths: [Function],\n  addYears: [Function],\n  remove: [Function],\n  removeMilliseconds: [Function],\n  removeSeconds: [Function],\n  removeMinutes: [Function],\n  removeHours: [Function],\n  removeDays: [Function],\n  removeWeeks: [Function],\n  removeMonths: [Function],\n  removeYears: [Function],\n  addWeekdays: [Function],\n  setTimeToNow: [Function],\n  clone: [Function],\n  between: [Function],\n  compareTo: [Function],\n  equals: [Function],\n  equalsDay: [Function],\n  isToday: [Function],\n  isAfter: [Function],\n  isBefore: [Function],\n  isWeekend: [Function],\n  getDaysBetween: [Function],\n  getHoursBetween: [Function],\n  getMinutesBetween: [Function],\n  getSecondsBetween: [Function],\n  getMillisecondsBetween: [Function],\n  getMonthsBetween: [Function],\n  getOrdinalNumber: [Function],\n  toFormat: [Function],\n  toUTCFormat: [Function],\n  getWeekNumber: [Function],\n  getFullWeekNumber: [Function] }&quot;,&quot;estack&quot;:&quot;AssertionError: expected { Mon, 31 Aug 2020 21:39:35 GMT\n  getMonthAbbr: [Function],\n  getMonthName: [Function],\n  getLastMonthName: [Function],\n  getUTCOffset: [Function],\n  toCLFString: [Function],\n  toYMD: [Function],\n  toDBString: [Function],\n  clearTime: [Function],\n  clearUTCTime: [Function],\n  add: [Function],\n  addMilliseconds: [Function],\n  addSeconds: [Function],\n  addMinutes: [Function],\n  addHours: [Function],\n  addDays: [Function],\n  addWeeks: [Function],\n  addMonths: [Function],\n  addYears: [Function],\n  remove: [Function],\n  removeMilliseconds: [Function],\n  removeSeconds: [Function],\n  removeMinutes: [Function],\n  removeHours: [Function],\n  removeDays: [Function],\n  removeWeeks: [Function],\n  removeMonths: [Function],\n  removeYears: [Function],\n  addWeekdays: [Function],\n  setTimeToNow: [Function],\n  clone: [Function],\n  between: [Function],\n  compareTo: [Function],\n  equals: [Function],\n  equalsDay: [Function],\n  isToday: [Function],\n  isAfter: [Function],\n  isBefore: [Function],\n  isWeekend: [Function],\n  getDaysBetween: [Function],\n  getHoursBetween: [Function],\n  getMinutesBetween: [Function],\n  getSecondsBetween: [Function],\n  getMillisecondsBetween: [Function],\n  getMonthsBetween: [Function],\n  getOrdinalNumber: [Function],\n  toFormat: [Function],\n  toUTCFormat: [Function],\n  getWeekNumber: [Function],\n  getFullWeekNumber: [Function] } to be above { Mon, 05 Oct 2020 16:51:37 GMT\n  getMonthAbbr: [Function],\n  getMonthName: [Function],\n  getLastMonthName: [Function],\n  getUTCOffset: [Function],\n  toCLFString: [Function],\n  toYMD: [Function],\n  toDBString: [Function],\n  clearTime: [Function],\n  clearUTCTime: [Function],\n  add: [Function],\n  addMilliseconds: [Function],\n  addSeconds: [Function],\n  addMinutes: [Function],\n  addHours: [Function],\n  addDays: [Function],\n  addWeeks: [Function],\n  addMonths: [Function],\n  addYears: [Function],\n  remove: [Function],\n  removeMilliseconds: [Function],\n  removeSeconds: [Function],\n  removeMinutes: [Function],\n  removeHours: [Function],\n  removeDays: [Function],\n  removeWeeks: [Function],\n  removeMonths: [Function],\n  removeYears: [Function],\n  addWeekdays: [Function],\n  setTimeToNow: [Function],\n  clone: [Function],\n  between: [Function],\n  compareTo: [Function],\n  equals: [Function],\n  equalsDay: [Function],\n  isToday: [Function],\n  isAfter: [Function],\n  isBefore: [Function],\n  isWeekend: [Function],\n  getDaysBetween: [Function],\n  getHoursBetween: [Function],\n  getMinutesBetween: [Function],\n  getSecondsBetween: [Function],\n  getMillisecondsBetween: [Function],\n  getMonthsBetween: [Function],\n  getOrdinalNumber: [Function],\n  toFormat: [Function],\n  toUTCFormat: [Function],\n  getWeekNumber: [Function],\n  getFullWeekNumber: [Function] }\n    at Context.&lt;anonymous&gt; (test/db/myTaskController.test.js:124:51)&quot;,&quot;diff&quot;:&quot;- [Date: 2020-08-31T21:39:35.790Z]\n+ [Date: 2020-10-05T16:51:37.516Z]\n&quot;},&quot;uuid&quot;:&quot;e78cc31a-b432-4bcb-8467-d9b6f9499e96&quot;,&quot;parentUUID&quot;:&quot;5847a5df-314c-4bf8-815e-c6d0d5673575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my task by searching&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my task by searching&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:942,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {search: sampleTask.taskName};\nlet result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);\noptions = {search: sampleTask.taskTypeName};\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);\noptions = {search: sampleTask.instanceName};\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);\noptions = {search: sampleTask.instanceId};\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91b9ee90-5118-4d56-ac13-e2aa627d98b6&quot;,&quot;parentUUID&quot;:&quot;5847a5df-314c-4bf8-815e-c6d0d5673575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. params - start&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. params - start&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:351,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {\n  start: 0,\n  count: 2,\n  sort: &#x27;itaskRecipientId&#x27;,\n  dir: &#x27;asc&#x27;\n};\nlet result = await taskController.getMyTasks(options);\nconst startZeroId = result.results[0].itaskRecipientId;\noptions.start = 1;\nresult = await taskController.getMyTasks(options);\nconst startOneId = result.results[0].itaskRecipientId;\nexpect(startZeroId).to.be.lt(startOneId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19c2ce42-654e-4f0b-b8bf-069f5144288c&quot;,&quot;parentUUID&quot;:&quot;5847a5df-314c-4bf8-815e-c6d0d5673575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. params - sort, dir&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. params - sort, dir&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:239,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {count: 2, dir: &#x27;asc&#x27;};\nlet result = await taskController.getMyTasks(options);\nexpect(result.results[0].createdDate).to.be.lt(result.results[1].createdDate);\noptions.dir = &#x27;desc&#x27;;\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].createdDate).to.be.gt(result.results[1].createdDate);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c44e237-11ad-49ba-90dc-d9f24d73003d&quot;,&quot;parentUUID&quot;:&quot;5847a5df-314c-4bf8-815e-c6d0d5673575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. params - count&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. params - count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:125,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {count: 2};\nlet result = await taskController.getMyTasks(options);\nexpect(result.results).to.exist;\nexpect(result.results.length).to.eq(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da658188-8c4c-4dbc-a839-ebdac1cbb6f6&quot;,&quot;parentUUID&quot;:&quot;5847a5df-314c-4bf8-815e-c6d0d5673575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cc0841b5-3d19-4be1-aacc-c4198eaa205b&quot;,&quot;e25ab8fe-b34a-428d-bd71-d3a892ac2d32&quot;,&quot;95b3de55-adad-494c-a2b7-e587f21bd707&quot;,&quot;e509d835-e35a-4306-a1cb-bf227966373a&quot;,&quot;4bc8fbd9-9970-491c-9f99-ccf32610a4a4&quot;,&quot;112155e7-41c1-4b38-8c8e-f2cc8ce64dec&quot;,&quot;f1c2fc75-8923-4b7e-b9cb-8ff483483221&quot;,&quot;8a2faca9-b6e1-47fb-9fb6-0f831404af19&quot;,&quot;7a91251c-9a79-4dd0-ab5d-2af42c36e3f7&quot;,&quot;91b9ee90-5118-4d56-ac13-e2aa627d98b6&quot;,&quot;19c2ce42-654e-4f0b-b8bf-069f5144288c&quot;,&quot;4c44e237-11ad-49ba-90dc-d9f24d73003d&quot;,&quot;da658188-8c4c-4dbc-a839-ebdac1cbb6f6&quot;],&quot;failures&quot;:[&quot;e78cc31a-b432-4bcb-8467-d9b6f9499e96&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3814,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ed974bf7-5eb7-4370-b015-f3f8e20759cc&quot;,&quot;title&quot;:&quot;My Task API Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/myTaskModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/myTaskModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1728d0c7-2d52-4081-9ab9-bf4f2a185930&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/myTaskModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/myTaskModel.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;My Task API Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5e58001-62e9-41aa-9f4d-48dddd0a0d77&quot;,&quot;parentUUID&quot;:&quot;1728d0c7-2d52-4081-9ab9-bf4f2a185930&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;My Task API Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskModel = await sqldb.models.bindModel(config.tenantOne.tenantId, taskModels.InstanceRecipientTask);\nconst results = await taskModel.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e9cf327-977d-4348-af50-ff14c3fbf32b&quot;,&quot;parentUUID&quot;:&quot;1728d0c7-2d52-4081-9ab9-bf4f2a185930&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a hash of bound models&quot;,&quot;fullTitle&quot;:&quot;My Task API Model Tests tests should return a hash of bound models&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskModel = (await models.getModels(config.tenantOne.tenantId)).InstanceRecipientTask;\nconst results = await taskModel.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a110cb7-536a-4203-84ed-f5c06fc35ff3&quot;,&quot;parentUUID&quot;:&quot;1728d0c7-2d52-4081-9ab9-bf4f2a185930&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should bound models cached in memory&quot;,&quot;fullTitle&quot;:&quot;My Task API Model Tests tests should bound models cached in memory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(models._tenantModels[config.tenantOne.tenantId]).to.exist;\nconst results = await models._tenantModels[config.tenantOne.tenantId].InstanceRecipientTask.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f81b133-200f-47a5-bbb6-ab16b428f962&quot;,&quot;parentUUID&quot;:&quot;1728d0c7-2d52-4081-9ab9-bf4f2a185930&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9e9cf327-977d-4348-af50-ff14c3fbf32b&quot;,&quot;6a110cb7-536a-4203-84ed-f5c06fc35ff3&quot;,&quot;7f81b133-200f-47a5-bbb6-ab16b428f962&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:29,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;58330ee3-9974-498b-bf6c-b3a2bc5ea79a&quot;,&quot;title&quot;:&quot;Instance API Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/integration/instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/instance.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\njwt = await testLib.getAuthToken()\nthis.timeout(105000); \nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()} //system level&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6c373d5-7214-4a20-88c4-0e29ca8be8a8&quot;,&quot;parentUUID&quot;:&quot;58330ee3-9974-498b-bf6c-b3a2bc5ea79a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;50a9ac93-9c8f-45cb-8f96-69a5c59f21de&quot;,&quot;title&quot;:&quot;getInstancesByPermission&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/integration/instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/instance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of instances for a user with monitor permissions&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a list of instances for a user with monitor permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;monitor\&quot;;\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();\n            sampleInstance = result.results[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;236f3a28-b205-418d-93c1-ccfa1c5569a9&quot;,&quot;parentUUID&quot;:&quot;50a9ac93-9c8f-45cb-8f96-69a5c59f21de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a list of instances for a user with manage permissions&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a list of instances for a user with manage permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;monitor\&quot;;\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();\n            sampleInstance = result.results[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;588facd8-e41a-4717-84ff-add623eea02c&quot;,&quot;parentUUID&quot;:&quot;50a9ac93-9c8f-45cb-8f96-69a5c59f21de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a list of instances started by the user calling the endpoint&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a list of instances started by the user calling the endpoint&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;mine\&quot;;\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();\n            sampleInstance = result.results[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42408f62-986b-42d4-a807-9b73e32c075a&quot;,&quot;parentUUID&quot;:&quot;50a9ac93-9c8f-45cb-8f96-69a5c59f21de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a \&quot;monitor\&quot; list of instances filtered&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a \&quot;monitor\&quot; list of instances filtered&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:53,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;monitor\&quot;;\n            req.query.filters = [\n                \n                {\&quot;field\&quot;:\&quot;instanceName\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.instanceName}},\n                {\&quot;field\&quot;:\&quot;instanceId\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;gteq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:1}},\n                {\&quot;field\&quot;:\&quot;instanceId\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;lteq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:1000000}},\n                {\&quot;field\&quot;:\&quot;processName\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.processName}},\n                {\&quot;field\&quot;:\&quot;instanceState\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.instanceState}},\n                {\&quot;field\&quot;:\&quot;lastMilestone\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.lastMilestone}},\n                {\&quot;field\&quot;:\&quot;requesterGuid\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.requesterGuid}},\n                {\&quot;field\&quot;:\&quot;requester\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.requester}},\n                {\&quot;field\&quot;:\&quot;startDate\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;gteq\&quot;,\&quot;type\&quot;:\&quot;date\&quot;,\&quot;value\&quot;:&#x27;2010-01-01&#x27;}},\n                {\&quot;field\&quot;:\&quot;startDate\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;lteq\&quot;,\&quot;type\&quot;:\&quot;date\&quot;,\&quot;value\&quot;:&#x27;2030-01-01&#x27;}}\n            ]\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6dfd215a-4ad3-4f8c-b260-e6843711c9fc&quot;,&quot;parentUUID&quot;:&quot;50a9ac93-9c8f-45cb-8f96-69a5c59f21de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a \&quot;mine\&quot; list of instances filtered&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a \&quot;mine\&quot; list of instances filtered&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:155,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;mine\&quot;;\n            req.query.filters = [\n                \n                {\&quot;field\&quot;:\&quot;instanceName\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.instanceName}},\n                {\&quot;field\&quot;:\&quot;instanceId\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;gteq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:1}},\n                {\&quot;field\&quot;:\&quot;instanceId\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;lteq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:1000000}},\n                {\&quot;field\&quot;:\&quot;processName\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.processName}},\n                {\&quot;field\&quot;:\&quot;instanceState\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.instanceState}},\n                {\&quot;field\&quot;:\&quot;lastMilestone\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.lastMilestone}},\n                {\&quot;field\&quot;:\&quot;requesterGuid\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.requesterGuid}},\n                {\&quot;field\&quot;:\&quot;requester\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.requester}}\n            ]\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;11b9afd7-7845-4be3-a4c1-f90c4d0586d3&quot;,&quot;parentUUID&quot;:&quot;50a9ac93-9c8f-45cb-8f96-69a5c59f21de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;236f3a28-b205-418d-93c1-ccfa1c5569a9&quot;,&quot;588facd8-e41a-4717-84ff-add623eea02c&quot;,&quot;42408f62-986b-42d4-a807-9b73e32c075a&quot;,&quot;6dfd215a-4ad3-4f8c-b260-e6843711c9fc&quot;,&quot;11b9afd7-7845-4be3-a4c1-f90c4d0586d3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:260,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a41328a2-c5a3-46c5-a3c2-f470b091db2d&quot;,&quot;title&quot;:&quot;deleteInstances&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/integration/instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/instance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a batch of instances&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests deleteInstances should delete a batch of instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:276,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\n            let result = await instanceController.getMyRequests()\n            let instanceGuids= result.results.map((i) =&gt; {\n                return i.instanceGuid;\n            })\n\t\t\tconst mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.body = JSON.stringify(instanceGuids);\n           \n\t\t\tawait handlers.deleteInstances(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n            expect(mockRes.body).to.exist;\n\t\t\tlet deleted = mockRes.body;\n            expect(deleted.instancesDeleted).to.exist;\n            expect(deleted.instancesDeleted).to.equal(instanceGuids.length);\n            \n            //retore them\n            \n            let restored = await instanceController.restoreInstances(instanceGuids);\n            //expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\n            expect(restored.length).to.equal(instanceGuids.length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8539db3-49d9-4b6c-ac5b-6eafaf2d2a98&quot;,&quot;parentUUID&quot;:&quot;a41328a2-c5a3-46c5-a3c2-f470b091db2d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c8539db3-49d9-4b6c-ac5b-6eafaf2d2a98&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:276,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;964aff22-6e3e-45e5-943f-a3d06b0de71e&quot;,&quot;title&quot;:&quot;MyTask API Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/integration/myTask.test.js&quot;,&quot;file&quot;:&quot;/test/integration/myTask.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;MyTask API Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\njwt = await testLib.getAuthToken();\nthis.timeout(10500);\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56e04fc4-021e-4a4c-b249-e626b7a43f65&quot;,&quot;parentUUID&quot;:&quot;964aff22-6e3e-45e5-943f-a3d06b0de71e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of my tasks&quot;,&quot;fullTitle&quot;:&quot;MyTask API Tests should return a list of my tasks&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:120,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req(jwt);\nawait handlers.getMyTasks(req, mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;\nconst result = mockRes.body;\nexpect(result.total).to.exist;\nexpect(result.total).to.be.gt(0);\nexpect(result.results).to.be.array();\nexpect(result.results.length).to.be.gt(0);\nsampleTask = result.results[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc262ebf-06a2-4c07-bca9-ced329d236f1&quot;,&quot;parentUUID&quot;:&quot;964aff22-6e3e-45e5-943f-a3d06b0de71e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return my tasks based on filters&quot;,&quot;fullTitle&quot;:&quot;MyTask API Tests should return my tasks based on filters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:280,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n    let req = await mocks.req(jwt);\n    req.query.filters = [\n      {field: &#x27;taskName&#x27;, data: {comparison: &#x27;contains&#x27;, type: &#x27;string&#x27;, value: sampleTask.taskName}},\n      {field: &#x27;taskTypeName&#x27;, data: {comparison: &#x27;contains&#x27;, type: &#x27;string&#x27;, value: sampleTask.taskTypeName}},\n      {field: &#x27;instanceName&#x27;, data: {comparison: &#x27;contains&#x27;, type: &#x27;string&#x27;, value: sampleTask.instanceName}},\n      {field: &#x27;instanceId&#x27;, data: {comparison: &#x27;contains&#x27;, type: &#x27;string&#x27;, value: sampleTask.instanceId}},\n      {field: &#x27;taskState&#x27;, data: {comparison: &#x27;contains&#x27;, type: &#x27;string&#x27;, value: sampleTask.taskState}},\n      {field: &#x27;requester&#x27;, data: {comparison: &#x27;contains&#x27;, type: &#x27;string&#x27;, value: sampleTask.requester}},\n      {field: &#x27;createdDate&#x27;, data: {comparison: &#x27;gteq&#x27;, type: &#x27;date&#x27;, value: sampleTask.createdDate}},\n      {field: &#x27;createdDate&#x27;, data: {comparison: &#x27;lteq&#x27;, type: &#x27;date&#x27;, value: sampleTask.createdDate}},\n    ];\n    await handlers.getMyTasks(req, mockRes);\n    expect(mockRes.statusCode).equal(200);\n    expect(mockRes.body).to.exist;\n    const result = mockRes.body;\n    expect(result.total).to.exist;\n    expect(result.total).to.be.gt(0);\n    expect(result.results).to.be.array();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ce22753-d6a1-4183-94fc-4d8971ec1ca8&quot;,&quot;parentUUID&quot;:&quot;964aff22-6e3e-45e5-943f-a3d06b0de71e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fc262ebf-06a2-4c07-bca9-ced329d236f1&quot;,&quot;1ce22753-d6a1-4183-94fc-4d8971ec1ca8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:400,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5c4e476b-dc5c-4548-b4b9-db030f282c4b&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d24d413d-f6b3-4c55-a7dc-1c1f4ed1f258&quot;,&quot;title&quot;:&quot;Permission/User Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-permissions/test/integration/user.test.js&quot;,&quot;file&quot;:&quot;/test/integration/user.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Permission/User Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nconst user  = config.tenantOne.adminUser;\nconst session = {tenant: config.tenantOne.tenantId, user_sid: user.sid.toLowerCase()}\nthis.timeout(105000); \nlet deletes = await redis.delAsync([`{$session.tenant}.permissions.${session.user_sid}.`]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c60a5cac-17cf-4553-abb1-9e59b426ff3c&quot;,&quot;parentUUID&quot;:&quot;d24d413d-f6b3-4c55-a7dc-1c1f4ed1f258&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Permission/User Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b14eb83-0209-4041-9fa6-d2a3d7a76959&quot;,&quot;parentUUID&quot;:&quot;d24d413d-f6b3-4c55-a7dc-1c1f4ed1f258&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f6b316dc-1371-469f-8f9c-a13961b72dd5&quot;,&quot;title&quot;:&quot;isSysAdminHandler&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-permissions/test/integration/user.test.js&quot;,&quot;file&quot;:&quot;/test/integration/user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return {isSysAdmin: true} for an admin user&quot;,&quot;fullTitle&quot;:&quot;Permission/User Tests isSysAdminHandler should return {isSysAdmin: true} for an admin user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n        let req = await mocks.req();\n        let isSysAdmin  = await userFunctions.isSysAdminHandler(req, mockRes);\n        expect(mockRes.statusCode).equal(200);\n        expect(mockRes.body).to.exist;\n        const info = mockRes.body;\n        expect(info.isSysAdmin).to.be.true&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa266b75-8296-49d0-a44a-5d02a18865da&quot;,&quot;parentUUID&quot;:&quot;f6b316dc-1371-469f-8f9c-a13961b72dd5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fa266b75-8296-49d0-a44a-5d02a18865da&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;53986655-2be2-4e51-acfb-9435f40bcecd&quot;,&quot;title&quot;:&quot;Permission/Workflow Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-permissions/test/integration/workflow.test.js&quot;,&quot;file&quot;:&quot;/test/integration/workflow.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Permission/Workflow Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig()\nuser  = config.tenantOne.adminUser;\nsession = {tenant: config.tenantOne.tenantId, user_sid: user.sid.toLowerCase()}\nthis.timeout(105000);\nlet deletes = await redis.delAsync([`{$session.tenant}.${session.user_name}.permissions`]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6253efc0-24ac-468e-b404-a9f4a7501849&quot;,&quot;parentUUID&quot;:&quot;53986655-2be2-4e51-acfb-9435f40bcecd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Permission/Workflow Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dcd6e567-45f8-4f8d-89e0-4b1845298502&quot;,&quot;parentUUID&quot;:&quot;53986655-2be2-4e51-acfb-9435f40bcecd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9748ffe4-4868-4950-a8ce-585810b9a672&quot;,&quot;title&quot;:&quot;currentUserPermissionssHandler&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-permissions/test/integration/workflow.test.js&quot;,&quot;file&quot;:&quot;/test/integration/workflow.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should cache and return permissions&quot;,&quot;fullTitle&quot;:&quot;Permission/Workflow Tests currentUserPermissionssHandler should cache and return permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n        let req = await mocks.req();\n        let isSysAdmin  = await workflow.currentUserPermissionsHandler(req, mockRes);\n        expect(mockRes.statusCode).equal(200);\n        expect(mockRes.body).to.exist;\n        const info = mockRes.body;\n        expect(info.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5ed759f-cf75-425f-970e-587848dd2b31&quot;,&quot;parentUUID&quot;:&quot;9748ffe4-4868-4950-a8ce-585810b9a672&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e5ed759f-cf75-425f-970e-587848dd2b31&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bf98123e-11df-48eb-91da-c087b3d1ff42&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e86497b9-cfa7-4f6d-81aa-81d761fb3630&quot;,&quot;title&quot;:&quot;Settings API Holiday Controller tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/db/holidays.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/holidays.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Settings API Holiday Controller tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nsession = {tenantId: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()}\ntenantId = config.tenantOne.tenantId;\noauth = {\n  instance_name: config.tenantOne.tenantId,\n  user_sid: config.tenantOne.adminUser.sid\n}\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9cdf5b80-188d-4b90-8c0d-e33d0a238500&quot;,&quot;parentUUID&quot;:&quot;e86497b9-cfa7-4f6d-81aa-81d761fb3630&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should insert, select, delete and list holidays&quot;,&quot;fullTitle&quot;:&quot;Settings API Holiday Controller tests should insert, select, delete and list holidays&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:427,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let holiday = {\n  holidayName: \&quot;O Day\&quot;,\n  startDate: \&quot;2019-10-10T00:00:00.000Z\&quot;,\n  endDate: \&quot;2019-10-11T00:00:00.000Z\&quot;,\n  country: \&quot;USA\&quot;\n};\nlet holidayController = new HolidayController(oauth);\n// insert\nconst inserted = await holidayController.insertHoliday(holiday);\nvalidateHoliday(holiday, inserted);\n// select\nlet gotOne = await holidayController.getHoliday(inserted.holidayGuid);\nvalidateHoliday(holiday, gotOne);\n// update\nholiday.holidayGuid = inserted.holidayGuid;\nholiday.holidayName = \&quot;Easter Monday\&quot;;\nholiday.country = \&quot;Papa New Guinea\&quot;;\nawait holidayController.updateHoliday(holiday);\ngotOne = await holidayController.getHoliday(inserted.holidayGuid);\nvalidateHoliday(holiday, gotOne);\n//list\nconst holidays = await holidayController.listHolidays();\nexpect(holidays.length).to.be.gt(0);\nholiday = holidays[0];\nexpect(holiday.holidayGuid).to.exist;\nexpect(holiday.holidayName).to.exist;\nexpect(holiday.startDate).to.exist;\nexpect(holiday.endDate).to.exist;\nexpect(holiday.country).to.exist;\n// delete\nconst holidayGuids = [inserted.holidayGuid];\nawait holidayController.deleteHolidays(holidayGuids);\ngotOne = await holidayController.getHoliday(inserted.holidayGuid);\nexpect(gotOne).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db59b469-1f2a-45e9-9870-ab7be252389d&quot;,&quot;parentUUID&quot;:&quot;e86497b9-cfa7-4f6d-81aa-81d761fb3630&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;db59b469-1f2a-45e9-9870-ab7be252389d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:427,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cc16a18c-a85e-4be5-9061-0ae904467316&quot;,&quot;title&quot;:&quot;Settings API System Setting Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/db/systemsetting.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/systemsetting.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()} \nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24f80338-baa1-4dd7-ab39-320b8ad074b4&quot;,&quot;parentUUID&quot;:&quot;cc16a18c-a85e-4be5-9061-0ae904467316&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1f997058-d1ce-491a-b415-a2b1756bf023&quot;,&quot;title&quot;:&quot;Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/db/systemsetting.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/systemsetting.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a system setting model&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Model Tests should get a system setting model&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const SystemSettingsModel = await model.getConsumerModel(\n  config.ConsumersConn1,\n  \&quot;SystemSettings\&quot;\n);\nexpect(SystemSettingsModel).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;976963e9-59e1-45a6-9b16-89e34765e876&quot;,&quot;parentUUID&quot;:&quot;1f997058-d1ce-491a-b415-a2b1756bf023&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return system settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Model Tests should return system settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const SystemSettingsModel = await model.getConsumerModel(\n  config.ConsumersConn1,\n  \&quot;SystemSettings\&quot;\n);\nlet results = await SystemSettingsModel.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8656f648-bd3e-44aa-a536-2f07c32da0c8&quot;,&quot;parentUUID&quot;:&quot;1f997058-d1ce-491a-b415-a2b1756bf023&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;976963e9-59e1-45a6-9b16-89e34765e876&quot;,&quot;8656f648-bd3e-44aa-a536-2f07c32da0c8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:36,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ae0670d6-9eea-4d3c-9c3a-8c760458f933&quot;,&quot;title&quot;:&quot;Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/db/systemsetting.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/systemsetting.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list system settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Controller Tests should list system settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:82,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let systemSettingController = new SystemSettingController(session);\nlet systemSettings = await systemSettingController.listSystemSettings();\nexpect(systemSettings).to.exist;\nexpect(systemSettings.length).to.be.gt(0);\nexpect(systemSettings[0].masterSettings.settingsGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;094b5328-98bc-40cd-be6c-b8fe8669d9ff&quot;,&quot;parentUUID&quot;:&quot;ae0670d6-9eea-4d3c-9c3a-8c760458f933&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list password settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Controller Tests should list password settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:39,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let systemSettingController = new SystemSettingController(session);\nlet systemSettings = await systemSettingController.listPasswordSettings();\nexpect(systemSettings).to.exist;\nexpect(systemSettings.length).to.be.gt(0);\n// only system settings listed should be the ones related to passwords   \nexpect(systemSettings.filter(x =&gt; x.settingsKey.startsWith(&#x27;PWD&#x27;)).length).to.equal(systemSettings.length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;937cbe6a-a756-46c6-8178-b20b8b94bf33&quot;,&quot;parentUUID&quot;:&quot;ae0670d6-9eea-4d3c-9c3a-8c760458f933&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update system settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Controller Tests should update system settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:270,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let pwdSettings = [{\n  \&quot;settingsGuid\&quot;:\&quot;6F170960-C5BC-4A12-B170-1CCEDCAC3DF2\&quot;,\n  \&quot;dataInstanceGuid\&quot;:\&quot;2CA0CE58-B55B-4DA7-ACE1-5FC37E3D32D5\&quot;,\n  \&quot;settingsKey\&quot;:\&quot;PWD_EXPIRATION\&quot;,\n  \&quot;settingsValue\&quot;:\&quot;14\&quot;, // changed\n  \&quot;createdBy\&quot;:\&quot;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF\&quot;,\n  \&quot;createdDate\&quot;:\&quot;2020-01-28T03:38:03.200Z\&quot;,\n  \&quot;modifiedBy\&quot;:null,\n  \&quot;modifiedDate\&quot;:null,\n  \&quot;masterSettings\&quot;:{\n    \&quot;settingsGuid\&quot;:\&quot;6F170960-C5BC-4A12-B170-1CCEDCAC3DF2\&quot;,\n    \&quot;settingsKey\&quot;:\&quot;PWD_EXPIRATION\&quot;,\n    \&quot;keyDefault\&quot;:\&quot;7\&quot;,\n    \&quot;keyOptions\&quot;:null,\n    \&quot;description\&quot;:\&quot;Length in days before a user is prompted to change his or her password.\&quot;\n  }\n}, {\n  \&quot;settingsGuid\&quot;:\&quot;B2476A3D-095F-424A-9C29-4AA95E93A09E\&quot;,\n  \&quot;dataInstanceGuid\&quot;:\&quot;2CA0CE58-B55B-4DA7-ACE1-5FC37E3D32D5\&quot;,\n  \&quot;settingsKey\&quot;:\&quot;PWD_EXPIRATION_ACTIVE\&quot;,\n  \&quot;settingsValue\&quot;:\&quot;1\&quot;, // changed\n  \&quot;createdBy\&quot;:\&quot;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF\&quot;,\n  \&quot;createdDate\&quot;:\&quot;2020-01-28T03:38:03.200Z\&quot;,\n  \&quot;modifiedBy\&quot;:null,\n  \&quot;modifiedDate\&quot;:null,\n  \&quot;masterSettings\&quot;:{\n    \&quot;settingsGuid\&quot;:\&quot;B2476A3D-095F-424A-9C29-4AA95E93A09E\&quot;,\n    \&quot;settingsKey\&quot;:\&quot;PWD_EXPIRATION_ACTIVE\&quot;,\n    \&quot;keyDefault\&quot;:\&quot;0\&quot;,\n    \&quot;keyOptions\&quot;:\&quot;1|0\&quot;,\n    \&quot;description\&quot;:\&quot;Flag to turn enforcement of password expiration.  1 = On, 0 = Off\&quot;\n  }\n}]\n// save the changes above, query to verify changes, set them back to the defaults\nlet systemSettingController = new SystemSettingController(session)\nawait systemSettingController.updateSystemSettings(pwdSettings)\nlet systemSettings = await systemSettingController.listPasswordSettings();\nexpect(systemSettings.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION&#x27;).settingsValue).to.equal(&#x27;14&#x27;)\nexpect(systemSettings.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION_ACTIVE&#x27;).settingsValue).to.equal(&#x27;1&#x27;)\npwdSettings.forEach(setting =&gt; {\n  setting.settingsValue = setting.masterSettings.keyDefault\n})\nawait systemSettingController.updateSystemSettings(pwdSettings)\nsystemSettings = await systemSettingController.listPasswordSettings();\nlet pwdExpiration = systemSettings.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION&#x27;)\nlet pwdExpirationActive = systemSettings.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION_ACTIVE&#x27;)\nexpect(pwdExpiration.settingsValue).to.equal(pwdExpiration.masterSettings.keyDefault)\nexpect(pwdExpirationActive.settingsValue).to.equal(pwdExpirationActive.masterSettings.keyDefault)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78edf67c-b3b9-43db-bdf4-647e4e72a477&quot;,&quot;parentUUID&quot;:&quot;ae0670d6-9eea-4d3c-9c3a-8c760458f933&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;094b5328-98bc-40cd-be6c-b8fe8669d9ff&quot;,&quot;937cbe6a-a756-46c6-8178-b20b8b94bf33&quot;,&quot;78edf67c-b3b9-43db-bdf4-647e4e72a477&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:391,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;62fd9a48-1de0-4f7a-a7b0-1e1850fc8398&quot;,&quot;title&quot;:&quot;Biztime API Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/functions/biztimes.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/biztimes.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Biztime API Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\njwt = await testLib.getAuthToken();\nthis.timeout(10500);\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()};\nmockRes = await mocks.mockResponse();\nreq = await mocks.req(jwt);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44ec05f8-f642-4d5e-907f-a5b983247e8d&quot;,&quot;parentUUID&quot;:&quot;62fd9a48-1de0-4f7a-a7b0-1e1850fc8398&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of biztimes&quot;,&quot;fullTitle&quot;:&quot;Biztime API Tests should return a list of biztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await handlers.listBiztimes(req, mockRes);\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;\nexpect(mockRes.body.length).to.be.gt(0);\nvalidateBiztime(mockRes.body[0]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c684cc0-26a7-438f-b535-35c7616d7d25&quot;,&quot;parentUUID&quot;:&quot;62fd9a48-1de0-4f7a-a7b0-1e1850fc8398&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert a biztime&quot;,&quot;fullTitle&quot;:&quot;Biztime API Tests should insert a biztime&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await handlers.insertBiztime(\n  {...req, body: {...biztimeToInsert}},\n  mockRes);\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;\ninsertedBiztime = mockRes.body;\nvalidateBiztime(biztimeToInsert, insertedBiztime);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4dc3205d-b89a-4df1-96a5-8a2019fed9cf&quot;,&quot;parentUUID&quot;:&quot;62fd9a48-1de0-4f7a-a7b0-1e1850fc8398&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a biztime&quot;,&quot;fullTitle&quot;:&quot;Biztime API Tests should update a biztime&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await handlers.updateBiztime(\n  {\n    ...req,\n    params: {bizTimeGuid: insertedBiztime.bizTimeGuid},\n    body: {...biztimeToUpdate}},\n  mockRes\n  );\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;\nvalidateBiztime(biztimeToUpdate, mockRes.body);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;567e89f2-d667-4b7c-b45a-05db912c9550&quot;,&quot;parentUUID&quot;:&quot;62fd9a48-1de0-4f7a-a7b0-1e1850fc8398&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1c684cc0-26a7-438f-b535-35c7616d7d25&quot;,&quot;4dc3205d-b89a-4df1-96a5-8a2019fed9cf&quot;,&quot;567e89f2-d667-4b7c-b45a-05db912c9550&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:57,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b0de2718-f346-4186-a23a-5f197e09197a&quot;,&quot;title&quot;:&quot;Settings API Holiday Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/functions/holidays.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/holidays.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;insert, list, get, delete holiday&quot;,&quot;fullTitle&quot;:&quot;Settings API Holiday Tests insert, list, get, delete holiday&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:39,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = mocks.mockResponse();\nlet listHolidaysEvent = await mocks.listHolidaysEvent()\nlet insertHolidayEvent = await mocks.insertHolidayEvent();\nlet getHolidayEvent = await mocks.getHolidayEvent();\n\n// insert\nawait holidays.insert(insertHolidayEvent, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst inserted = mockRes.body;\nvalidateHoliday(insertHolidayEvent.body, inserted);\n//list\nawait holidays.list(listHolidaysEvent, mockRes);\n\t\texpect(mockRes.statusCode).to.equal(200);\nexpect(mockRes.body.length).to.be.greaterThan(0);\nexpectDefinedHoliday(mockRes.body[0]);\n// get\ngetHolidayEvent.params.holidayGuid = inserted.holidayGuid;\nawait holidays.get(getHolidayEvent, mockRes);\n\t\texpect(mockRes.statusCode).to.equal(200);\nconst got = mockRes.body;\nvalidateHoliday(inserted, got);\n// delete\nlet deleteEvent = Object.assign({}, listHolidaysEvent);\ndeleteEvent.body = [inserted.holidayGuid];\nawait holidays.remove(deleteEvent, mockRes);\n\t\texpect(mockRes.statusCode).to.equal(200);\ngetHolidayEvent.params = {\n  holidayGuid: inserted.holidayGuid\n};\nawait holidays.get(getHolidayEvent, mockRes);\nexpect(mockRes.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa9b35ac-1def-4f27-8e27-2dccef0ebab3&quot;,&quot;parentUUID&quot;:&quot;b0de2718-f346-4186-a23a-5f197e09197a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fa9b35ac-1def-4f27-8e27-2dccef0ebab3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:39,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;663357e8-ad8b-457f-a254-8c126e8b1694&quot;,&quot;title&quot;:&quot;Settings API Password Settings Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/functions/passwordSettings.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/passwordSettings.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;lists the password settings&quot;,&quot;fullTitle&quot;:&quot;Settings API Password Settings Tests lists the password settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse();\nawait passwordSettings.list(mockReq, mockRes);\n\n\t\texpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body\nexpect(result.length).to.be.greaterThan(0);\n// only system settings listed should be the ones related to passwords\nexpect(result.filter(x =&gt; x.settingsKey.startsWith(&#x27;PWD&#x27;)).length).to.equal(result.length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39a6c596-5f37-43d8-aa3c-8ab414c801e8&quot;,&quot;parentUUID&quot;:&quot;663357e8-ad8b-457f-a254-8c126e8b1694&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;39a6c596-5f37-43d8-aa3c-8ab414c801e8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:33,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3137e777-a6cd-434a-a20b-b8e95312c570&quot;,&quot;title&quot;:&quot;Settings API System Config Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/functions/systemConfig.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/systemConfig.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;lists the system config settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Config Tests lists the system config settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:37,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse();\nawait systemConfig.list(mockReq, mockRes);\n\n\t\texpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body\nexpect(result.length).to.be.greaterThan(40);\nexpect(result[0].settingsGuid).to.exist\nexpect(result[0].settingsKey).to.exist\nexpect(result[0].settingsValue).to.exist\nexpect(result[0].masterSettings.description).to.exist\nexpect(result[0].masterSettings.keyDefault).to.exist\nexpect(result[0].masterSettings.keyOptions).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa44d2ac-54eb-4f81-9977-8ce89a369c84&quot;,&quot;parentUUID&quot;:&quot;3137e777-a6cd-434a-a20b-b8e95312c570&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;updates system config settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Config Tests updates system config settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:338,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse();\nmockReq.body = [{\n  settingsGuid: \&quot;2B18AE62-7C26-439C-84A7-371B4A51BE26\&quot;,\n  settingsKey: \&quot;AllowGetReqInfo\&quot;,\n  settingsValue: \&quot;true\&quot;\n}]\nawait systemConfig.update(mockReq, mockRes);\n\n\t\texpect(mockRes.statusCode).to.equal(200);\nlet result = mockRes.body\nexpect(result).to.equal(&#x27;1&#x27;);\n// verify that change was made\nawait systemConfig.list(mockReq, mockRes);\nresult = mockRes.body\nlet allowGetReqInfo = result.find( x =&gt; x.settingsKey == &#x27;AllowGetReqInfo&#x27;)\nexpect(allowGetReqInfo.settingsValue).to.equal(&#x27;true&#x27;)\n// revert the change\nmockReq.body = [{\n  settingsGuid: \&quot;2B18AE62-7C26-439C-84A7-371B4A51BE26\&quot;,\n  settingsKey: \&quot;AllowGetReqInfo\&quot;,\n  settingsValue: \&quot;false\&quot;\n}]\nawait systemConfig.update(mockReq, mockRes);\nawait systemConfig.list(mockReq, mockRes);\nresult = mockRes.body\nallowGetReqInfo = result.find( x =&gt; x.settingsKey == &#x27;AllowGetReqInfo&#x27;)\nexpect(allowGetReqInfo.settingsValue).to.equal(&#x27;false&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b46b577f-910c-4300-8aed-2dfb45a90e0d&quot;,&quot;parentUUID&quot;:&quot;3137e777-a6cd-434a-a20b-b8e95312c570&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fa44d2ac-54eb-4f81-9977-8ce89a369c84&quot;,&quot;b46b577f-910c-4300-8aed-2dfb45a90e0d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:375,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1a9de95d-a5bb-43f3-883c-52edf31ed042&quot;,&quot;title&quot;:&quot;Settings API Utilities Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/functions/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;074326e4-2f1d-4928-b00a-475a025b8072&quot;,&quot;title&quot;:&quot;locales&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/functions/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;lists locales&quot;,&quot;fullTitle&quot;:&quot;Settings API Utilities Tests locales lists locales&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\nawait utils.listLocales(mocks.req(), mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f49532f5-a319-4df4-8fa1-325138666cf8&quot;,&quot;parentUUID&quot;:&quot;074326e4-2f1d-4928-b00a-475a025b8072&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f49532f5-a319-4df4-8fa1-325138666cf8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2904c34d-6823-4dde-8052-057557571b02&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;da430af7-b977-4729-858e-8c67e610dc51&quot;,&quot;title&quot;:&quot;Task API Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task/test/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()};\ntenantId = config.tenantOne.tenantId;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92b61837-32a3-42d1-82f2-f0be163aa637&quot;,&quot;parentUUID&quot;:&quot;da430af7-b977-4729-858e-8c67e610dc51&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c254f5c6-95d9-46fd-be91-bed5b3187b23&quot;,&quot;title&quot;:&quot;list tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task/test/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set a sample task&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should set a sample task&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:874,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Task = await models.getModel(config.tenantOne.tenantId, &#x27;InstanceRecipientTask&#x27;);\nconst tasks = await Task.query()\n  .withGraphFetched(&#x27;[instanceTaskBase, taskType, instance]&#x27;)\n  .where(&#x27;recipientGuid&#x27;, session.user_sid)\n  .orderBy(&#x27;instanceRecipientTask.createdDate&#x27;, &#x27;desc&#x27;);\nexpect(tasks.length).to.be.gt(0);\nsampleTaskGuid = tasks[0].itaskRecipientGuid;\nsampleTask = tasks[0];\nsampleTask.taskName = sampleTask.instanceTaskBase.taskName;\nsampleTask.taskTypeName = sampleTask.taskType.taskTypeName;\nsampleTask.instanceId = sampleTask.instance.instanceId;\nsampleTask.instanceName = sampleTask.instance.instanceName;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3d733d0-8869-4e51-bc5d-e256a9ecc086&quot;,&quot;parentUUID&quot;:&quot;c254f5c6-95d9-46fd-be91-bed5b3187b23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks columns&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks columns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:203,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst result = await taskController.getMyTasks();\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\nconst firstTask = result.results[0];\nexpect(firstTask.itaskRecipientId).to.be.ok;\nexpect(firstTask.itaskRecipientGuid).to.be.ok;\nexpect(firstTask.taskName).to.be.ok;\nexpect(firstTask.taskTypeName).to.be.ok;\nexpect(firstTask.createdDate).to.be.ok;\nexpect(firstTask.dueDate).not.to.be.undefined;\nexpect(firstTask.priority).not.to.be.undefined;\nexpect(firstTask.instanceName).to.be.ok;\nexpect(firstTask.instanceId).to.be.ok;\nexpect(firstTask.lastMilestone).to.be.ok;\nexpect(result.total).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e26ede2b-f1be-41af-b148-1419fa1bac67&quot;,&quot;parentUUID&quot;:&quot;c254f5c6-95d9-46fd-be91-bed5b3187b23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my open tasks only&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my open tasks only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:151,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskState&#x27;, &#x27;eq&#x27;, &#x27;Open&#x27;, 50, &#x27;asc&#x27;);\nconst result = await taskController.getMyTasks(options);\nresult.results.forEach(task =&gt; {\n  expect(task.taskState === &#x27;Initialized&#x27; || task.taskState === &#x27;Started&#x27;).to.equal(true);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83cbb5ea-eee5-4a70-bb7f-890f6718f155&quot;,&quot;parentUUID&quot;:&quot;c254f5c6-95d9-46fd-be91-bed5b3187b23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my completed tasks only&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my completed tasks only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:161,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskState&#x27;, &#x27;eq&#x27;, &#x27;Completed&#x27;, 50, &#x27;asc&#x27;);\nconst result = await taskController.getMyTasks(options);\nresult.results.forEach(task =&gt; {\n  expect(task.taskState).to.equal(&#x27;Completed&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3fcd98c-2c16-4763-bb81-33b60ac76d5f&quot;,&quot;parentUUID&quot;:&quot;c254f5c6-95d9-46fd-be91-bed5b3187b23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: taskName&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: taskName&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:166,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskName&#x27;, &#x27;contains&#x27;, sampleTask.taskName);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4aea2292-1351-499f-b245-94d6e00ee184&quot;,&quot;parentUUID&quot;:&quot;c254f5c6-95d9-46fd-be91-bed5b3187b23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: taskType&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: taskType&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:141,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskType&#x27;, &#x27;contains&#x27;, sampleTask.taskTypeName);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d14d44e3-0378-4412-bd6c-4a11ac04d1b8&quot;,&quot;parentUUID&quot;:&quot;c254f5c6-95d9-46fd-be91-bed5b3187b23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: description (instanceName)&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: description (instanceName)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:149,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;instanceName&#x27;, &#x27;contains&#x27;, sampleTask.instanceName);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f338b14-fa19-4f1e-a9a1-2fcf16306aed&quot;,&quot;parentUUID&quot;:&quot;c254f5c6-95d9-46fd-be91-bed5b3187b23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: requestId (instanceId)&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: requestId (instanceId)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:152,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;instanceId&#x27;, &#x27;contains&#x27;, sampleTask.instanceId);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5fb9cc39-4c8a-424d-97bf-c92d687a0c0a&quot;,&quot;parentUUID&quot;:&quot;c254f5c6-95d9-46fd-be91-bed5b3187b23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: requester&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: requester&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:167,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;requester&#x27;, &#x27;contains&#x27;, &#x27;system system&#x27;);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b56e207-e51b-450d-ba15-4fa72e9c4022&quot;,&quot;parentUUID&quot;:&quot;c254f5c6-95d9-46fd-be91-bed5b3187b23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: createdDate&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: createdDate&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:139,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet d = moment().day(-90);\nlet options = generateOptions(&#x27;createdDate&#x27;, &#x27;range&#x27;, &#x27;90&#x27;, 1, &#x27;asc&#x27;);\nlet result = await taskController.getMyTasks(options);\nexpect(result.results[0].createdDate).to.be.gt(d.toDate());\nd = moment().year(-7);\noptions = generateOptions(&#x27;createdDate&#x27;, &#x27;range&#x27;, &#x27;7&#x27;, 1, &#x27;asc&#x27;);\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].createdDate).to.be.gt(d.toDate());\nconst count = 100000;\nresult = await taskController.getMyTasks({count});\nconst resultsLength = result.results.length;\nconst endDate = result.results[0].createdDate;\nconst startDate = result.results[result.results.length - 1].createdDate;\noptions = {\n  filters: [\n    {\n      field: &#x27;createdDate&#x27;,\n      data: {\n        comparison: &#x27;gteq&#x27;,\n        value: startDate,\n      }\n    },\n    {\n      field: &#x27;createdDate&#x27;,\n      data: {\n        comparison: &#x27;lteq&#x27;,\n        value: endDate\n      }\n    },\n  ],\n  count,\n};\nresult = await taskController.getMyTasks(options);\nexpect(result.results.length).to.equal(resultsLength);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected { Mon, 31 Aug 2020 21:39:35 GMT\n  getMonthAbbr: [Function],\n  getMonthName: [Function],\n  getLastMonthName: [Function],\n  getUTCOffset: [Function],\n  toCLFString: [Function],\n  toYMD: [Function],\n  toDBString: [Function],\n  clearTime: [Function],\n  clearUTCTime: [Function],\n  add: [Function],\n  addMilliseconds: [Function],\n  addSeconds: [Function],\n  addMinutes: [Function],\n  addHours: [Function],\n  addDays: [Function],\n  addWeeks: [Function],\n  addMonths: [Function],\n  addYears: [Function],\n  remove: [Function],\n  removeMilliseconds: [Function],\n  removeSeconds: [Function],\n  removeMinutes: [Function],\n  removeHours: [Function],\n  removeDays: [Function],\n  removeWeeks: [Function],\n  removeMonths: [Function],\n  removeYears: [Function],\n  addWeekdays: [Function],\n  setTimeToNow: [Function],\n  clone: [Function],\n  between: [Function],\n  compareTo: [Function],\n  equals: [Function],\n  equalsDay: [Function],\n  isToday: [Function],\n  isAfter: [Function],\n  isBefore: [Function],\n  isWeekend: [Function],\n  getDaysBetween: [Function],\n  getHoursBetween: [Function],\n  getMinutesBetween: [Function],\n  getSecondsBetween: [Function],\n  getMillisecondsBetween: [Function],\n  getMonthsBetween: [Function],\n  getOrdinalNumber: [Function],\n  toFormat: [Function],\n  toUTCFormat: [Function],\n  getWeekNumber: [Function],\n  getFullWeekNumber: [Function] } to be above { Mon, 05 Oct 2020 16:51:54 GMT\n  getMonthAbbr: [Function],\n  getMonthName: [Function],\n  getLastMonthName: [Function],\n  getUTCOffset: [Function],\n  toCLFString: [Function],\n  toYMD: [Function],\n  toDBString: [Function],\n  clearTime: [Function],\n  clearUTCTime: [Function],\n  add: [Function],\n  addMilliseconds: [Function],\n  addSeconds: [Function],\n  addMinutes: [Function],\n  addHours: [Function],\n  addDays: [Function],\n  addWeeks: [Function],\n  addMonths: [Function],\n  addYears: [Function],\n  remove: [Function],\n  removeMilliseconds: [Function],\n  removeSeconds: [Function],\n  removeMinutes: [Function],\n  removeHours: [Function],\n  removeDays: [Function],\n  removeWeeks: [Function],\n  removeMonths: [Function],\n  removeYears: [Function],\n  addWeekdays: [Function],\n  setTimeToNow: [Function],\n  clone: [Function],\n  between: [Function],\n  compareTo: [Function],\n  equals: [Function],\n  equalsDay: [Function],\n  isToday: [Function],\n  isAfter: [Function],\n  isBefore: [Function],\n  isWeekend: [Function],\n  getDaysBetween: [Function],\n  getHoursBetween: [Function],\n  getMinutesBetween: [Function],\n  getSecondsBetween: [Function],\n  getMillisecondsBetween: [Function],\n  getMonthsBetween: [Function],\n  getOrdinalNumber: [Function],\n  toFormat: [Function],\n  toUTCFormat: [Function],\n  getWeekNumber: [Function],\n  getFullWeekNumber: [Function] }&quot;,&quot;estack&quot;:&quot;AssertionError: expected { Mon, 31 Aug 2020 21:39:35 GMT\n  getMonthAbbr: [Function],\n  getMonthName: [Function],\n  getLastMonthName: [Function],\n  getUTCOffset: [Function],\n  toCLFString: [Function],\n  toYMD: [Function],\n  toDBString: [Function],\n  clearTime: [Function],\n  clearUTCTime: [Function],\n  add: [Function],\n  addMilliseconds: [Function],\n  addSeconds: [Function],\n  addMinutes: [Function],\n  addHours: [Function],\n  addDays: [Function],\n  addWeeks: [Function],\n  addMonths: [Function],\n  addYears: [Function],\n  remove: [Function],\n  removeMilliseconds: [Function],\n  removeSeconds: [Function],\n  removeMinutes: [Function],\n  removeHours: [Function],\n  removeDays: [Function],\n  removeWeeks: [Function],\n  removeMonths: [Function],\n  removeYears: [Function],\n  addWeekdays: [Function],\n  setTimeToNow: [Function],\n  clone: [Function],\n  between: [Function],\n  compareTo: [Function],\n  equals: [Function],\n  equalsDay: [Function],\n  isToday: [Function],\n  isAfter: [Function],\n  isBefore: [Function],\n  isWeekend: [Function],\n  getDaysBetween: [Function],\n  getHoursBetween: [Function],\n  getMinutesBetween: [Function],\n  getSecondsBetween: [Function],\n  getMillisecondsBetween: [Function],\n  getMonthsBetween: [Function],\n  getOrdinalNumber: [Function],\n  toFormat: [Function],\n  toUTCFormat: [Function],\n  getWeekNumber: [Function],\n  getFullWeekNumber: [Function] } to be above { Mon, 05 Oct 2020 16:51:54 GMT\n  getMonthAbbr: [Function],\n  getMonthName: [Function],\n  getLastMonthName: [Function],\n  getUTCOffset: [Function],\n  toCLFString: [Function],\n  toYMD: [Function],\n  toDBString: [Function],\n  clearTime: [Function],\n  clearUTCTime: [Function],\n  add: [Function],\n  addMilliseconds: [Function],\n  addSeconds: [Function],\n  addMinutes: [Function],\n  addHours: [Function],\n  addDays: [Function],\n  addWeeks: [Function],\n  addMonths: [Function],\n  addYears: [Function],\n  remove: [Function],\n  removeMilliseconds: [Function],\n  removeSeconds: [Function],\n  removeMinutes: [Function],\n  removeHours: [Function],\n  removeDays: [Function],\n  removeWeeks: [Function],\n  removeMonths: [Function],\n  removeYears: [Function],\n  addWeekdays: [Function],\n  setTimeToNow: [Function],\n  clone: [Function],\n  between: [Function],\n  compareTo: [Function],\n  equals: [Function],\n  equalsDay: [Function],\n  isToday: [Function],\n  isAfter: [Function],\n  isBefore: [Function],\n  isWeekend: [Function],\n  getDaysBetween: [Function],\n  getHoursBetween: [Function],\n  getMinutesBetween: [Function],\n  getSecondsBetween: [Function],\n  getMillisecondsBetween: [Function],\n  getMonthsBetween: [Function],\n  getOrdinalNumber: [Function],\n  toFormat: [Function],\n  toUTCFormat: [Function],\n  getWeekNumber: [Function],\n  getFullWeekNumber: [Function] }\n    at Context.&lt;anonymous&gt; (test/db/controller.test.js:124:51)&quot;,&quot;diff&quot;:&quot;- [Date: 2020-08-31T21:39:35.790Z]\n+ [Date: 2020-10-05T16:51:54.719Z]\n&quot;},&quot;uuid&quot;:&quot;1551e755-eb5b-46c8-ac38-1205a4c79048&quot;,&quot;parentUUID&quot;:&quot;c254f5c6-95d9-46fd-be91-bed5b3187b23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my task by searching&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my task by searching&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:566,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {search: sampleTask.taskName};\nlet result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);\noptions = {search: sampleTask.taskTypeName};\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);\noptions = {search: sampleTask.instanceName};\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);\noptions = {search: sampleTask.instanceId};\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7c937ec-b2db-40e7-95dd-c5d16e244024&quot;,&quot;parentUUID&quot;:&quot;c254f5c6-95d9-46fd-be91-bed5b3187b23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. params - start&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. params - start&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:274,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {\n  start: 0,\n  count: 2,\n  sort: &#x27;itaskRecipientId&#x27;,\n  dir: &#x27;asc&#x27;\n};\nlet result = await taskController.getMyTasks(options);\nconst startZeroId = result.results[0].itaskRecipientId;\noptions.start = 1;\nresult = await taskController.getMyTasks(options);\nconst startOneId = result.results[0].itaskRecipientId;\nexpect(startZeroId).to.be.lt(startOneId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb92bb38-51e0-409f-9613-a03cdb403348&quot;,&quot;parentUUID&quot;:&quot;c254f5c6-95d9-46fd-be91-bed5b3187b23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. params - sort, dir&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. params - sort, dir&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:291,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {count: 2, dir: &#x27;asc&#x27;};\nlet result = await taskController.getMyTasks(options);\nexpect(result.results[0].createdDate).to.be.lt(result.results[1].createdDate);\noptions.dir = &#x27;desc&#x27;;\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].createdDate).to.be.gt(result.results[1].createdDate);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;968628e8-6cb2-4a8f-b8b8-d608779eb1d1&quot;,&quot;parentUUID&quot;:&quot;c254f5c6-95d9-46fd-be91-bed5b3187b23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. params - count&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. params - count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:142,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {count: 2};\nlet result = await taskController.getMyTasks(options);\nexpect(result.results).to.exist;\nexpect(result.results.length).to.eq(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a3567d7-187d-480e-a7d3-06e1dd0298e0&quot;,&quot;parentUUID&quot;:&quot;c254f5c6-95d9-46fd-be91-bed5b3187b23&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e3d733d0-8869-4e51-bc5d-e256a9ecc086&quot;,&quot;e26ede2b-f1be-41af-b148-1419fa1bac67&quot;,&quot;83cbb5ea-eee5-4a70-bb7f-890f6718f155&quot;,&quot;c3fcd98c-2c16-4763-bb81-33b60ac76d5f&quot;,&quot;4aea2292-1351-499f-b245-94d6e00ee184&quot;,&quot;d14d44e3-0378-4412-bd6c-4a11ac04d1b8&quot;,&quot;6f338b14-fa19-4f1e-a9a1-2fcf16306aed&quot;,&quot;5fb9cc39-4c8a-424d-97bf-c92d687a0c0a&quot;,&quot;0b56e207-e51b-450d-ba15-4fa72e9c4022&quot;,&quot;f7c937ec-b2db-40e7-95dd-c5d16e244024&quot;,&quot;eb92bb38-51e0-409f-9613-a03cdb403348&quot;,&quot;968628e8-6cb2-4a8f-b8b8-d608779eb1d1&quot;,&quot;1a3567d7-187d-480e-a7d3-06e1dd0298e0&quot;],&quot;failures&quot;:[&quot;1551e755-eb5b-46c8-ac38-1205a4c79048&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3576,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0f282717-6102-4a47-920e-7c012f418206&quot;,&quot;title&quot;:&quot;Task API Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task/test/db/model.test.js&quot;,&quot;file&quot;:&quot;/test/db/model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;53ac2b52-8c00-4a58-b460-8a9368420cef&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task/test/db/model.test.js&quot;,&quot;file&quot;:&quot;/test/db/model.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Task API Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68e4af6a-89e3-4708-8fa6-87e0b630f378&quot;,&quot;parentUUID&quot;:&quot;53ac2b52-8c00-4a58-b460-8a9368420cef&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Task API Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:34,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskModel = await sqldb.models.bindModel(config.tenantOne.tenantId, taskModels.InstanceRecipientTask);\nconst results = await taskModel.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;984533bd-4351-4ee7-a2e6-074d7adb64cc&quot;,&quot;parentUUID&quot;:&quot;53ac2b52-8c00-4a58-b460-8a9368420cef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a hash of bound models&quot;,&quot;fullTitle&quot;:&quot;Task API Model Tests tests should return a hash of bound models&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskModel = (await models.getModels(config.tenantOne.tenantId)).InstanceRecipientTask;\nconst results = await taskModel.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14342a4c-5f4d-4030-9014-4d0c324047cc&quot;,&quot;parentUUID&quot;:&quot;53ac2b52-8c00-4a58-b460-8a9368420cef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should bound models cached in memory&quot;,&quot;fullTitle&quot;:&quot;Task API Model Tests tests should bound models cached in memory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(models._tenantModels[config.tenantOne.tenantId]).to.exist;\nconst results = await models._tenantModels[config.tenantOne.tenantId].InstanceRecipientTask.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;116443fe-3b48-4f2c-b794-a4197ad8799a&quot;,&quot;parentUUID&quot;:&quot;53ac2b52-8c00-4a58-b460-8a9368420cef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;984533bd-4351-4ee7-a2e6-074d7adb64cc&quot;,&quot;14342a4c-5f4d-4030-9014-4d0c324047cc&quot;,&quot;116443fe-3b48-4f2c-b794-a4197ad8799a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:82,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b6a34f94-38b5-43d2-8b40-bcc07d2c3129&quot;,&quot;title&quot;:&quot;Task API Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task/test/integration/task.test.js&quot;,&quot;file&quot;:&quot;/test/integration/task.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Task API Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\njwt = await testLib.getAuthToken();\nthis.timeout(10500);\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94a7dceb-d4eb-4705-b5d3-0e0930cbc36f&quot;,&quot;parentUUID&quot;:&quot;b6a34f94-38b5-43d2-8b40-bcc07d2c3129&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of my tasks&quot;,&quot;fullTitle&quot;:&quot;Task API Tests should return a list of my tasks&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:144,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req(jwt);\nawait handlers.getMyTasks(req, mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;\nconst result = mockRes.body;\nexpect(result.total).to.exist;\nexpect(result.total).to.be.gt(0);\nexpect(result.results).to.be.array();\nexpect(result.results.length).to.be.gt(0);\nsampleTask = result.results[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;353375e0-8747-4348-87e5-254dec770bb9&quot;,&quot;parentUUID&quot;:&quot;b6a34f94-38b5-43d2-8b40-bcc07d2c3129&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return my tasks based on filters&quot;,&quot;fullTitle&quot;:&quot;Task API Tests should return my tasks based on filters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:397,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n    let req = await mocks.req(jwt);\n    req.query.filters = [\n      {field: &#x27;taskName&#x27;, data: {comparison: &#x27;contains&#x27;, type: &#x27;string&#x27;, value: sampleTask.taskName}},\n      {field: &#x27;taskTypeName&#x27;, data: {comparison: &#x27;contains&#x27;, type: &#x27;string&#x27;, value: sampleTask.taskTypeName}},\n      {field: &#x27;instanceName&#x27;, data: {comparison: &#x27;contains&#x27;, type: &#x27;string&#x27;, value: sampleTask.instanceName}},\n      {field: &#x27;instanceId&#x27;, data: {comparison: &#x27;contains&#x27;, type: &#x27;string&#x27;, value: sampleTask.instanceId}},\n      {field: &#x27;taskState&#x27;, data: {comparison: &#x27;contains&#x27;, type: &#x27;string&#x27;, value: sampleTask.taskState}},\n      {field: &#x27;requester&#x27;, data: {comparison: &#x27;contains&#x27;, type: &#x27;string&#x27;, value: sampleTask.requester}},\n      {field: &#x27;createdDate&#x27;, data: {comparison: &#x27;gteq&#x27;, type: &#x27;date&#x27;, value: sampleTask.createdDate}},\n      {field: &#x27;createdDate&#x27;, data: {comparison: &#x27;lteq&#x27;, type: &#x27;date&#x27;, value: sampleTask.createdDate}},\n    ];\n    await handlers.getMyTasks(req, mockRes);\n    expect(mockRes.statusCode).equal(200);\n    expect(mockRes.body).to.exist;\n    const result = mockRes.body;\n    expect(result.total).to.exist;\n    expect(result.total).to.be.gt(0);\n    expect(result.results).to.be.array();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e596784c-b6c2-4a09-b803-532909b38a2e&quot;,&quot;parentUUID&quot;:&quot;b6a34f94-38b5-43d2-8b40-bcc07d2c3129&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;353375e0-8747-4348-87e5-254dec770bb9&quot;,&quot;e596784c-b6c2-4a09-b803-532909b38a2e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:541,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bf9455f0-0d11-4b32-9e90-e3da1bd38fbc&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1c8a8c46-72e1-4e22-922f-1bf323bf6aa1&quot;,&quot;title&quot;:&quot;Task Dispatcher API Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Task Dispatcher API Controller Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests \&quot;before all\&quot; hook in \&quot;Task Dispatcher API Controller Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d7a9760-e378-46f7-b95b-5cc8190140c6&quot;,&quot;parentUUID&quot;:&quot;1c8a8c46-72e1-4e22-922f-1bf323bf6aa1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3d6f36fd-05b2-4cf2-9a73-c1ac65a9f366&quot;,&quot;title&quot;:&quot;ProcessTaskController&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get process tasks&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskController should get process tasks&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:701,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processTaskController = new controllers.ProcessTaskController(session);\nconst updateMyProfileProcessSid = &#x27;f864cfe2-98df-4724-8db1-de2cc538d4e0&#x27;\nlet processTasks = await processTaskController.getProcessTasks(updateMyProfileProcessSid)\nexpect(processTasks).to.exist;\nexpect(processTasks.length).to.be.gt(0);\nexpect(processTasks[0].processTaskGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6759b39-8a90-4ab7-bc47-510c6dfb74c1&quot;,&quot;parentUUID&quot;:&quot;3d6f36fd-05b2-4cf2-9a73-c1ac65a9f366&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d6759b39-8a90-4ab7-bc47-510c6dfb74c1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:701,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;822bddaf-75ee-4478-b614-146d8264be1d&quot;,&quot;title&quot;:&quot;ProcessTaskAttributeController&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list process task attributes&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskAttributeController should list process task attributes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:86,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processTaskAttributeController = new controllers.ProcessTaskAttributeController(session);\nconst profileFormProcessTaskSid = &#x27;c0473244-f04f-4916-8ac9-a73cc538d434&#x27;\nlet includeExt = false\nlet processTaskAttributes = await processTaskAttributeController.list(profileFormProcessTaskSid, includeExt)\nexpect(processTaskAttributes).to.exist;\nexpect(processTaskAttributes.length).to.be.gt(0);\nexpect(processTaskAttributes[6].processTaskAttributeGuid).to.exist;\nexpect(processTaskAttributes[6].extendedAtt).to.not.exist;\nincludeExt = true\nlet processTaskAttributesIncExt = await processTaskAttributeController.list(profileFormProcessTaskSid, includeExt)\nexpect(processTaskAttributesIncExt).to.exist;\nexpect(processTaskAttributesIncExt.length).to.be.gt(0);\nexpect(processTaskAttributesIncExt[6].processTaskAttributeGuid).to.exist;\nexpect(processTaskAttributesIncExt[6].extendedAtt.extAttribute).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0fc1d972-3393-4193-aecb-ec70c6ba6a77&quot;,&quot;parentUUID&quot;:&quot;822bddaf-75ee-4478-b614-146d8264be1d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get and update a process task attribute&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskAttributeController should get and update a process task attribute&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:150,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processTaskAttributeGuid = &#x27;7cece0ab-bda6-4b13-a8fb-3f5c467371e6&#x27;  \nlet processTaskAttributeController = new controllers.ProcessTaskAttributeController(session);\nlet processTaskAttribute =  await processTaskAttributeController.get(processTaskAttributeGuid)\n// console.log(processTaskAttribute)\nexpect(processTaskAttribute.attributeValue).to.equal(&#x27;0&#x27;)\nlet numberOfAffectedRows = await processTaskAttributeController.update({\n  processTaskAttributeGuid,\n  fields: {\n    attributeValue: &#x27;TEST&#x27;\n  }\n})\nexpect(numberOfAffectedRows).to.equal(1)\nprocessTaskAttribute =  await processTaskAttributeController.get(processTaskAttributeGuid)\nexpect(processTaskAttribute.attributeValue).to.equal(&#x27;TEST&#x27;)\n// must set it back to original value so that we don&#x27;t break anything\nnumberOfAffectedRows = await processTaskAttributeController.update({\n  processTaskAttributeGuid,\n  fields: {\n    attributeValue: &#x27;0&#x27;\n  }\n})\nexpect(numberOfAffectedRows).to.equal(1)\nprocessTaskAttribute =  await processTaskAttributeController.get(processTaskAttributeGuid)\nexpect(processTaskAttribute.attributeValue).to.equal(&#x27;0&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d09b931-14ac-4fe3-bc87-2a5493c1f761&quot;,&quot;parentUUID&quot;:&quot;822bddaf-75ee-4478-b614-146d8264be1d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert a process task attribute&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskAttributeController should insert a process task attribute&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// pick any process task and insert a process task attribute\n// then delete it\nconst processTaskAttributeController = new controllers.ProcessTaskAttributeController(session);\n// give \&quot;Update my profile - Start task\&quot; a test process task att\nconst processTaskGuid = &#x27;27cb04ea-b19d-4327-8b3a-e82cc538d44d&#x27;\nconst attributeKey = &#x27;TEST_KEY&#x27;\nconst attributeValue = &#x27;TEST_VALUE&#x27;\nconst ordinal = 1\nconst processTaskAttribute = await processTaskAttributeController.insert({\n  processTaskGuid,\n  attributeKey,\n  attributeValue,\n  ordinal\n})\nexpect(processTaskAttribute.processTaskAttributeGuid).to.be.a.uuid()\nexpect(processTaskAttribute.processTaskGuid).to.equal(processTaskGuid)\nexpect(processTaskAttribute.attributeKey).to.equal(attributeKey)\nexpect(processTaskAttribute.attributeValue).to.equal(attributeValue)\nexpect(processTaskAttribute.ordinal).to.equal(ordinal)\n// cleanup\n// const numberOfAffectedRows = await processTaskAttributeController.delete(processTaskAttribute.processTaskAttributeGuid)\nconst numberOfAffectedRows = await processTaskAttributeController.delete(processTaskAttribute.processTaskAttributeGuid)\nexpect(numberOfAffectedRows).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0538c379-3880-4d43-a93a-bd96ab8d31a7&quot;,&quot;parentUUID&quot;:&quot;822bddaf-75ee-4478-b614-146d8264be1d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get the process task attribute max ordinal value for a process task&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskAttributeController should get the process task attribute max ordinal value for a process task&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processTaskAttributeController = new controllers.ProcessTaskAttributeController(session);\n// \&quot;Update my profile - Start task\&quot; a test process task att\nlet processTaskGuid = \&quot;27cb04ea-b19d-4327-8b3a-e82cc538d44d\&quot;;\n// that process task has no atts so its max ordinal should be null\nlet maxOrdinal = await processTaskAttributeController.getMaxOrdinal(processTaskGuid);\nexpect(maxOrdinal).to.equal(null);\n// \&quot;Update my profile - User Profile\&quot; task does have atts.  seed db goes up to 12\nprocessTaskGuid = \&quot;28d88aa5-fc4c-4e16-b32d-2964c738d49b\&quot;;\nmaxOrdinal = await processTaskAttributeController.getMaxOrdinal(processTaskGuid);\nexpect(maxOrdinal).to.equal(12);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc510fc5-35af-4410-96a9-5f39717b9f60&quot;,&quot;parentUUID&quot;:&quot;822bddaf-75ee-4478-b614-146d8264be1d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0fc1d972-3393-4193-aecb-ec70c6ba6a77&quot;,&quot;0d09b931-14ac-4fe3-bc87-2a5493c1f761&quot;,&quot;0538c379-3880-4d43-a93a-bd96ab8d31a7&quot;,&quot;cc510fc5-35af-4410-96a9-5f39717b9f60&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:296,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;70a85a05-5c72-4fa9-b044-b0cd2a51efb8&quot;,&quot;title&quot;:&quot;ProcessTaskMappingController&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list process task mappings&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskMappingController should list process task mappings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processTaskMappingController = new controllers.ProcessTaskMappingController(session);\nconst profileFormProcessTaskSid = &#x27;c0473244-f04f-4916-8ac9-a73cc538d434&#x27;\nlet processTaskAttributes = await processTaskMappingController.list(profileFormProcessTaskSid)\nexpect(processTaskAttributes).to.exist;\nexpect(processTaskAttributes.length).to.be.gt(0);\nexpect(processTaskAttributes[0].processTaskMappingGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea0b01a6-165c-45c4-a82f-77dc421fbafc&quot;,&quot;parentUUID&quot;:&quot;70a85a05-5c72-4fa9-b044-b0cd2a51efb8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ea0b01a6-165c-45c4-a82f-77dc421fbafc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;58f247ee-d756-40b9-816e-e96f288a797c&quot;,&quot;title&quot;:&quot;ProcessController&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update a process&#x27;s modified by and date fields&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessController should update a process&#x27;s modified by and date fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:39,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processController = new controllers.ProcessController(session);\nconst updateMyProfileProcessSid = &#x27;f864cfe2-98df-4724-8db1-de2cc538d4e0&#x27;\nconst systemUserGuid = &#x27;D8C469C3-F781-4179-A09C-6D148885FB30&#x27;\nlet process = await processController.get(updateMyProfileProcessSid)\nexpect(process).to.exist;\nexpect(process.processGuid.toLowerCase()).to.equal(updateMyProfileProcessSid);\nconst oldModifiedDate = process.modifiedDate\nconst numberOfAffectedRows = await processController.updateModifiedByAndDate(updateMyProfileProcessSid)\nexpect(numberOfAffectedRows).to.equal(1)\nprocess = await processController.get(updateMyProfileProcessSid) \nexpect(process.modifiedDate).to.be.greaterThan(oldModifiedDate)\n// for some reason when executed in a test the db record&#x27;s modifiedBy is set to \n// the systemUserGuid instead of the contact sid specified in the session (4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF)\nexpect(process.modifiedBy).to.equal(systemUserGuid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f36ecd88-bca9-4771-9482-80a87b43ed99&quot;,&quot;parentUUID&quot;:&quot;58f247ee-d756-40b9-816e-e96f288a797c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f36ecd88-bca9-4771-9482-80a87b43ed99&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:39,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c33532b8-d999-45c0-96da-c90c73e29e6e&quot;,&quot;title&quot;:&quot;Task Dispatcher API Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task-dispatcher/test/integration/db/model.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3b447b00-b841-440e-bc2a-1601a52bef74&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task-dispatcher/test/integration/db/model.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/model.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Model Tests tests \&quot;before all\&quot; hook in \&quot;tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;892106fb-f2c6-4b21-b458-3c69d2169083&quot;,&quot;parentUUID&quot;:&quot;3b447b00-b841-440e-bc2a-1601a52bef74&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:203,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const vwProcessTasksModel = await sqldb.models.bindModel(\n  config.tenantOne.tenantId,\n  vwProcessTasksModels.vwProcessTasks\n);\nlet results = await vwProcessTasksModel.query();\n//console.log(results)\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e48b3aae-1868-4357-9a93-af9be9e5a897&quot;,&quot;parentUUID&quot;:&quot;3b447b00-b841-440e-bc2a-1601a52bef74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a hash of bound models&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Model Tests tests should return a hash of bound models&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:80,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const vwProcessTasksModel = (await models.getModels(config.tenantOne.tenantId))\n  .vwProcessTasks;\nlet results = await vwProcessTasksModel.query();\n//console.log(results)\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91be0988-fd9c-4c5b-bcf1-526430603979&quot;,&quot;parentUUID&quot;:&quot;3b447b00-b841-440e-bc2a-1601a52bef74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should bound models should be cached in memory&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Model Tests tests should bound models should be cached in memory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:66,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(models._tentantModels[config.tenantOne.tenantId]).to.exist;\nlet results = await models._tentantModels[\n  config.tenantOne.tenantId\n].vwProcessTasks.query();\n//console.log(results)\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;216408c7-5c93-4d27-a076-e9167ac7fea5&quot;,&quot;parentUUID&quot;:&quot;3b447b00-b841-440e-bc2a-1601a52bef74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e48b3aae-1868-4357-9a93-af9be9e5a897&quot;,&quot;91be0988-fd9c-4c5b-bcf1-526430603979&quot;,&quot;216408c7-5c93-4d27-a076-e9167ac7fea5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:349,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1e5d60d6-c2d4-495b-affa-bdfe96c1eba1&quot;,&quot;title&quot;:&quot;Task Dispatcher API PDF Merge Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task-dispatcher/test/integration/functions/pdfMerge.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/pdfMerge.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets task settings&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets task settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;script_gettasksettings\&quot;, tasktype }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\n// vue output\n// expect(result.length).to.be.greaterThan(1);\n// expect(result[0].attributeKey).to.exist;\n// expect(result[0].attributeValue).to.exist;\n// expect(result.find(x =&gt; x.attributeKey == &#x27;GeneratedFileName&#x27;)).to.exist\n// expect(result.find(x =&gt; x.attributeKey == &#x27;FirstPDF&#x27;)).to.exist\n// angular output\nexpect(result.Data.GeneratedFileName).to.exist;\nexpect(result.Data.FirstPDF).to.exist;\nexpect(result.Data.SecondPDF).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a122fbe7-f393-4561-8932-d8d7afbc4801&quot;,&quot;parentUUID&quot;:&quot;1e5d60d6-c2d4-495b-affa-bdfe96c1eba1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets PDF options&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets PDF options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:41,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;script_getpdfoptions\&quot;, tasktype }\nmockReq.query = { processSid }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result.length).to.be.greaterThan(1);\n// vue output\n// expect(result[0].displayName).to.exist;\n// expect(result[0].processTaskGuid).to.exist;\n// expect(result[0].taskTypeGuid).to.exist;\n// angular output\nexpect(result[0].length).to.be.greaterThan(1);\nexpect(result[0][0]).to.equal(&#x27;ae9b4a71-5f37-4fe9-9926-a0901da0eb0e;52407ad7-bd98-4023-8d88-91ef4464cd98&#x27;);\nexpect(result[0][1]).to.equal(&#x27;second PDF Merge Form : File Attachment (Task Output)&#x27;);\nexpect(result[0][2]).to.equal(&#x27;322ffece-654f-49e4-bb5c-4ae41768d5be&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;90f4954b-c862-4014-b8cb-d5265af743b3&quot;,&quot;parentUUID&quot;:&quot;1e5d60d6-c2d4-495b-affa-bdfe96c1eba1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets PDF fields&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets PDF fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid, op: \&quot;script_getpdffields\&quot;, tasktype }\nmockReq.query = { processSid }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\n// vue output\n// expect(result.length).to.equal(1)\n// expect(result[0]).to.equal(&#x27;FILE_NAME&#x27;)\n// angular output\nexpect(result.Data.length).to.equal(1)\nexpect(result.Data[0][0]).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result.Data[0][1]).to.equal(&#x27;FILE_NAME&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1ecbb8c-82ec-4c48-a46c-c5c06cd28f06&quot;,&quot;parentUUID&quot;:&quot;1e5d60d6-c2d4-495b-affa-bdfe96c1eba1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - data source - form mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - data source - form mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:34,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Task_Input&#x27;)\nexpect(result[0].PrefillField).to.equal(&#x27;1601919933647&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Data - second PDF Merge Form - Merged PDF Filename:&#x27;)\nexpect(result[0].TaskSID).to.equal(&#x27;ae9b4a71-5f37-4fe9-9926-a0901da0eb0e&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e05c57e-d57b-4150-99b3-ff39aa50e5c4&quot;,&quot;parentUUID&quot;:&quot;1e5d60d6-c2d4-495b-affa-bdfe96c1eba1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - fixed value mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - fixed value mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processSid_fixedValue = &#x27;c2095ccf-896b-46a0-b5e9-8e5b7e288270&#x27; \nconst processTaskSid_fixedValue = &#x27;5f719bb1-11b8-43d9-a9fd-66e55306f4eb&#x27;\nconst mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid: processTaskSid_fixedValue, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid: processSid_fixedValue }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Fixed_Value&#x27;)\nexpect(result[0].PrefillField).to.equal(&#x27;fixValFileName&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Fixed Value - fixValFileName&#x27;)\nexpect(result[0].TaskSID).to.not.exist&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 0 to equal 1&quot;,&quot;estack&quot;:&quot;AssertionError: expected 0 to equal 1\n    at Context.&lt;anonymous&gt; (test/integration/functions/pdfMerge.test.js:117:30)&quot;,&quot;diff&quot;:&quot;- 0\n+ 1\n&quot;},&quot;uuid&quot;:&quot;475dbc2b-7da5-4853-87e6-45f7dbce82ca&quot;,&quot;parentUUID&quot;:&quot;1e5d60d6-c2d4-495b-affa-bdfe96c1eba1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - request id mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - request id mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processSid_requestId = &#x27;f9f94cfe-d4b3-4d89-9695-1b32c6cee55d&#x27; \nconst processTaskSid_requestId = &#x27;9b4f1444-7bd7-481a-8008-69a0490da139&#x27;\nconst mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid: processTaskSid_requestId, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid: processSid_requestId }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Request&#x27;)\nexpect(result[0].PrefillField).to.equal(&#x27;ID&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Request - ID&#x27;)\nexpect(result[0].TaskSID).to.not.exist&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 0 to equal 1&quot;,&quot;estack&quot;:&quot;AssertionError: expected 0 to equal 1\n    at Context.&lt;anonymous&gt; (test/integration/functions/pdfMerge.test.js:140:30)&quot;,&quot;diff&quot;:&quot;- 0\n+ 1\n&quot;},&quot;uuid&quot;:&quot;ada735a8-6412-4a8b-a269-3fa6040d813e&quot;,&quot;parentUUID&quot;:&quot;1e5d60d6-c2d4-495b-affa-bdfe96c1eba1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - client username mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - client username mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processSid_clientUsername = &#x27;d1a7c44e-1e6e-4cdf-9d39-deac08a8b5cc&#x27; \nconst processTaskSid_clientUsername = &#x27;a79cde56-9f3a-4be4-9824-dd634eddbff3&#x27;\nconst mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid: processTaskSid_clientUsername, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid: processSid_clientUsername }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Client&#x27;)\nexpect(result[0].PrefillField).to.equal(&#x27;UserName&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Client - UserName&#x27;)\nexpect(result[0].TaskSID).to.not.exist&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 0 to equal 1&quot;,&quot;estack&quot;:&quot;AssertionError: expected 0 to equal 1\n    at Context.&lt;anonymous&gt; (test/integration/functions/pdfMerge.test.js:163:30)&quot;,&quot;diff&quot;:&quot;- 0\n+ 1\n&quot;},&quot;uuid&quot;:&quot;8c7fbe20-96f7-478f-9dd4-4cdfa4d175e0&quot;,&quot;parentUUID&quot;:&quot;1e5d60d6-c2d4-495b-affa-bdfe96c1eba1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - status pdfmerge mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - status pdfmerge mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processSid_statusPdfMerge = &#x27;ab3a8404-c208-4ca7-8ae6-637b16c23368&#x27; \nconst processTaskSid_statusPdfMerge = &#x27;7f4f1f42-228c-46dc-90a3-77fe15fe7412&#x27;\nconst mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid: processTaskSid_statusPdfMerge, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid: processSid_statusPdfMerge }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Task_State&#x27;)\n// expect(result[0].PrefillField).to.equal(&#x27;UserName&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Status - PDF Merge - &#x27;)\nexpect(result[0].TaskSID).to.equal(&#x27;7f4f1f42-228c-46dc-90a3-77fe15fe7412&#x27;)&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 0 to equal 1&quot;,&quot;estack&quot;:&quot;AssertionError: expected 0 to equal 1\n    at Context.&lt;anonymous&gt; (test/integration/functions/pdfMerge.test.js:186:30)&quot;,&quot;diff&quot;:&quot;- 0\n+ 1\n&quot;},&quot;uuid&quot;:&quot;9d735081-e0fa-4877-9f0f-cdcb60d24547&quot;,&quot;parentUUID&quot;:&quot;1e5d60d6-c2d4-495b-affa-bdfe96c1eba1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a122fbe7-f393-4561-8932-d8d7afbc4801&quot;,&quot;90f4954b-c862-4014-b8cb-d5265af743b3&quot;,&quot;b1ecbb8c-82ec-4c48-a46c-c5c06cd28f06&quot;,&quot;4e05c57e-d57b-4150-99b3-ff39aa50e5c4&quot;],&quot;failures&quot;:[&quot;475dbc2b-7da5-4853-87e6-45f7dbce82ca&quot;,&quot;ada735a8-6412-4a8b-a269-3fa6040d813e&quot;,&quot;8c7fbe20-96f7-478f-9dd4-4cdfa4d175e0&quot;,&quot;9d735081-e0fa-4877-9f0f-cdcb60d24547&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:187,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a5ee9f78-cce2-49f3-8b55-be41bf60a8fb&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2c94f8d2-e4b5-4aad-b069-af0fd5a85856&quot;,&quot;title&quot;:&quot;Tenant API Sessions Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/activeSessions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/activeSessions.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Sessions Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000); \ntestConfig = await testLib.getTestConfig();\n    \ntenant = testConfig.tenantOne.tenantId;\ngroup = \&quot;sessionServiceGroup\&quot;\ntestEventType = &#x27;extendSession&#x27;\nfullStreamName = tenant + &#x27;.stream.&#x27; + testStreamName\neventProcessedName = fullStreamName + \&quot;.\&quot; + group + \&quot;.processed\&quot;;\neventHistoryName = fullStreamName + \&quot;.history\&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;148eac9c-96d2-4b15-bd59-a53bd48ca6b9&quot;,&quot;parentUUID&quot;:&quot;2c94f8d2-e4b5-4aad-b069-af0fd5a85856&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Sessions Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ae928b7-9ffc-476f-84af-1b715a18120b&quot;,&quot;parentUUID&quot;:&quot;2c94f8d2-e4b5-4aad-b069-af0fd5a85856&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;215e9b61-f547-486f-b0a8-b6fe28250bbe&quot;,&quot;title&quot;:&quot;Active Sessions&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/activeSessions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/activeSessions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ca41004a-b382-44dc-8899-c1e072b84d6d&quot;,&quot;title&quot;:&quot;count active sessions&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/activeSessions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/activeSessions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return activeSessions&quot;,&quot;fullTitle&quot;:&quot;Tenant API Sessions Tests Active Sessions count active sessions should return activeSessions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let sessions  = await getActiveSessions(tenant);\n//console.log(sessions)\nexpect(sessions).to.exist;\nexpect(sessions).to.have.property(\&quot;activeSessions\&quot;)\nexpect(sessions).to.have.property(\&quot;activeUsers\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;350613f7-2514-47ba-8d6f-01b0b158d3d1&quot;,&quot;parentUUID&quot;:&quot;ca41004a-b382-44dc-8899-c1e072b84d6d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;350613f7-2514-47ba-8d6f-01b0b158d3d1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;992b63fb-f40e-4410-a80f-ef6fed5f01ee&quot;,&quot;title&quot;:&quot;Tenant API licsense stats&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/licenseStats.test.js&quot;,&quot;file&quot;:&quot;/test/integration/licenseStats.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API licsense stats \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3007,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000); \nconfig = await testLib.getTestConfig();\nlet sp = new stream.StreamPublisher(&#x27;sessions&#x27;,config.tenantOne.tenantId);\nawait sp.sendEvent(\&quot;extendSession\&quot;, {\n    token: \&quot;abcd234\&quot;,\n    user: {\n        sid:\&quot;11111\&quot;, \n        user_name: \&quot;iapprove\&quot;, \n        email: \&quot;iapprove@integrify.com\&quot;, \n        name: \&quot;System System\&quot;\n    }\n})\n    \nawait delay(3000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;49a82223-6b85-402f-9867-426fd971e0b7&quot;,&quot;parentUUID&quot;:&quot;992b63fb-f40e-4410-a80f-ef6fed5f01ee&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API licsense stats \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e06ca32-93ee-4858-8bee-8a5760eb4454&quot;,&quot;parentUUID&quot;:&quot;992b63fb-f40e-4410-a80f-ef6fed5f01ee&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2277f272-78f7-43da-a380-8351aca7f9a6&quot;,&quot;title&quot;:&quot;Post all stats&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/licenseStats.test.js&quot;,&quot;file&quot;:&quot;/test/integration/licenseStats.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return ok&quot;,&quot;fullTitle&quot;:&quot;Tenant API licsense stats Post all stats should return ok&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:570,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let result = await postAllStats();\nexpect(result).to.eq(\&quot;ok\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1da78b1e-d86e-447d-949b-6331ed0bc1a5&quot;,&quot;parentUUID&quot;:&quot;2277f272-78f7-43da-a380-8351aca7f9a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1da78b1e-d86e-447d-949b-6331ed0bc1a5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:570,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f6a77a60-041c-48f9-9e72-fdc1975a5a10&quot;,&quot;title&quot;:&quot;Tenant API Stream-Manager Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f0a61fa0-3849-48c9-adf8-a2abca934e46&quot;,&quot;title&quot;:&quot;listTenantStreams&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of the streams for a tenant&quot;,&quot;fullTitle&quot;:&quot;Tenant API Stream-Manager Tests listTenantStreams should return a list of the streams for a tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req();\n\t\t\tlet results = await streamMonitor.listTenantStreams(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst apps = mockRes.body;\n\t\t\tstreamName = apps[0]\n\t\t\texpect(apps).to.be.array()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;509e7ddc-633f-4c26-8084-87617ea420fb&quot;,&quot;parentUUID&quot;:&quot;f0a61fa0-3849-48c9-adf8-a2abca934e46&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;509e7ddc-633f-4c26-8084-87617ea420fb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7ce4aec9-744e-4f5a-a8c4-e2c866a20e2a&quot;,&quot;title&quot;:&quot;streamInfoReqHandler&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return info for the stream&quot;,&quot;fullTitle&quot;:&quot;Tenant API Stream-Manager Tests streamInfoReqHandler should return info for the stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req();\n\t\t\treq.params.streamName = req.params.tenant + &#x27;.stream.&#x27; + testStreamName\n\t\t\tlet results = await streamMonitor.streamInfoReqHandler(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst info = mockRes.body;\n\t\t\texpect(info).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4640397-bd84-421f-9d51-69fff8d2acda&quot;,&quot;parentUUID&quot;:&quot;7ce4aec9-744e-4f5a-a8c4-e2c866a20e2a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f4640397-bd84-421f-9d51-69fff8d2acda&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ece52e69-4fde-4441-ae2c-67d3cbe8298d&quot;,&quot;title&quot;:&quot;getGroupInfo&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return group info for the stream&quot;,&quot;fullTitle&quot;:&quot;Tenant API Stream-Manager Tests getGroupInfo should return group info for the stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req();\n\t\t\treq.params.streamName = req.params.tenant + &#x27;.stream.&#x27; + testStreamName\n\t\t\tlet results = await streamMonitor.getGroupInfo(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst info = mockRes.body;\n\t\t\texpect(info).to.be.array()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dadbac91-94f1-4ce4-b69f-9b698424c509&quot;,&quot;parentUUID&quot;:&quot;ece52e69-4fde-4441-ae2c-67d3cbe8298d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dadbac91-94f1-4ce4-b69f-9b698424c509&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;81e6f26e-d14f-412f-a14f-48baebf7a12e&quot;,&quot;title&quot;:&quot;getConsumerInfo&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return consumer info for the group&quot;,&quot;fullTitle&quot;:&quot;Tenant API Stream-Manager Tests getConsumerInfo should return consumer info for the group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req();\n\t\t\treq.params.streamName = req.params.tenant + &#x27;.stream.&#x27; + testStreamName\n\t\t\treq.params.groupName = \&quot;sessionServiceGroup\&quot; \n\t\t\tlet results = await streamMonitor.getConsumerInfo(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst info = mockRes.body;\n\t\t\texpect(info).to.be.array()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d69488b4-097f-4919-bd7b-d6784d114d88&quot;,&quot;parentUUID&quot;:&quot;81e6f26e-d14f-412f-a14f-48baebf7a12e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d69488b4-097f-4919-bd7b-d6784d114d88&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;91b7e020-3cda-42e1-9361-23940abb34df&quot;,&quot;title&quot;:&quot;Tenant API License, Apps and Settings Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6d91a625-b40c-40f8-8a09-9595adf2f764&quot;,&quot;title&quot;:&quot;getTenantLicense&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a license for a tenant&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantLicense should return a license for a tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req()\n\t\t\tlet results = await getTenantLicense(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst licenseInfo = mockRes.body;\n\t\t\texpect(licenseInfo.instanceId).equal(req.oauth.tenant);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46883999-1311-4787-956f-766f92f9e64e&quot;,&quot;parentUUID&quot;:&quot;6d91a625-b40c-40f8-8a09-9595adf2f764&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;46883999-1311-4787-956f-766f92f9e64e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;81cb8ac3-fbd8-4f9e-8a45-a6568ae6fd07&quot;,&quot;title&quot;:&quot;getTenantApps&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return apps for a tenant&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantApps should return apps for a tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await  mocks.req()\n\t\t\tlet results = await getTenantApps(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst apps = mockRes.body;\n\t\t\texpect(apps).to.be.array()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;757c836d-2fe3-4bb4-8d17-375f3ab8203a&quot;,&quot;parentUUID&quot;:&quot;81cb8ac3-fbd8-4f9e-8a45-a6568ae6fd07&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;757c836d-2fe3-4bb4-8d17-375f3ab8203a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4e5e3d03-ad86-4acc-add9-c3d3bc822543&quot;,&quot;title&quot;:&quot;getTenantLicenseLocation&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return license location for a tenant&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantLicenseLocation should return license location for a tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await  mocks.req()\n\t\t\tlet results = await getTenantLicenseLocation(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst licenseLocation = mockRes.body;\n      expect(licenseLocation).to.satisfy(function(val) { return val === &#x27;onpremise&#x27; || val.toLowerCase().includes(&#x27;cloud&#x27;); });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9aeb0b7a-482a-4415-a406-12cabbf19c8e&quot;,&quot;parentUUID&quot;:&quot;4e5e3d03-ad86-4acc-add9-c3d3bc822543&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9aeb0b7a-482a-4415-a406-12cabbf19c8e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;76f805a0-eb5b-4882-bcdb-02ce1526474a&quot;,&quot;title&quot;:&quot;getTenantLoginSettings&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should login settings for a tenant based on a tenant id&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantLoginSettings should login settings for a tenant based on a tenant id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await  mocks.req()\n\t\t\treq.query = {tenant: req.config.tenantOne.tenantId}\n\t\t\tlet results = await getTenantLoginSettings(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst settings = mockRes.body;\n\t\t\texpect(settings.ID).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29669629-a850-40f3-b127-47e84485f693&quot;,&quot;parentUUID&quot;:&quot;76f805a0-eb5b-4882-bcdb-02ce1526474a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should login settings for a tenant based on a host header&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantLoginSettings should login settings for a tenant based on a host header&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await  mocks.req()\n\t\t\treq.query = {hostHeader: req.config.tenantOne.hostHeader}\n\t\t\tlet results = await getTenantLoginSettings(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst settings = mockRes.body;\n\t\t\texpect(settings.ID).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e284b25-1e4c-4f08-8e28-7a1f9d5f0b22&quot;,&quot;parentUUID&quot;:&quot;76f805a0-eb5b-4882-bcdb-02ce1526474a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;29669629-a850-40f3-b127-47e84485f693&quot;,&quot;6e284b25-1e4c-4f08-8e28-7a1f9d5f0b22&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3714bd12-3112-4235-abd5-d87ef3923862&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;655f795c-b649-4e4a-8830-32cefd80ca09&quot;,&quot;title&quot;:&quot;api-user Group Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:609,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()} //system level\ntenantId = config.tenantOne.tenantId;\nfor (i = 1; i&lt;=10; i++) {\n  const groupController = new GroupController(session);\n  const result = await groupController.addGroup({ groupName: `Test Automation Group ${i}` });\n  testGroups.push(result)\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4813c70a-8473-457b-be5c-8aa55c14eeaf&quot;,&quot;parentUUID&quot;:&quot;655f795c-b649-4e4a-8830-32cefd80ca09&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:82,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// clean up our test data\nconst Group = await models.getModel(config.tenantOne.tenantId, \&quot;Group\&quot;);\nconst ContactGroup = await models.getModel(config.tenantOne.tenantId, \&quot;ContactGroup\&quot;);\nawait Promise.all( testGroups.map( async (group) =&gt; {\n  await Group.query().hardDelete(group)\n  await ContactGroup.query()\n    .where(&#x27;groupGuid&#x27;, group.groupGuid)\n    .delete()\n}))&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6375909d-9143-47ba-a4a2-adc8e191ae48&quot;,&quot;parentUUID&quot;:&quot;655f795c-b649-4e4a-8830-32cefd80ca09&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2e1b3a75-dcf8-4617-acb7-48dd5aa351e0&quot;,&quot;title&quot;:&quot;get tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;retrieves a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests get tests retrieves a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Group = await models.getModel(config.tenantOne.tenantId, \&quot;Group\&quot;);\nlet groups = await Group.query().where(&#x27;group_name&#x27;, &#x27;=&#x27;, &#x27;Administrators&#x27;)\nexpect(groups.length).to.equal(1);\nadminGroupGuid = groups[0].groupGuid;\nconst groupController = new GroupController(config.tenantOne);\nconst adminGroup = await groupController.getGroup(adminGroupGuid);\nexpect(adminGroup).to.exist;\nexpect(adminGroup.groupName).to.equal(&#x27;Administrators&#x27;);\nexpect(adminGroup.groupDesc).to.equal(&#x27;System administrators&#x27;);\n// expect(adminGroup.groupSql).to.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84913500-0934-4b48-8136-fde064ec3182&quot;,&quot;parentUUID&quot;:&quot;2e1b3a75-dcf8-4617-acb7-48dd5aa351e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retrieves filtered list of groups&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests get tests retrieves filtered list of groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Group = await models.getModel(config.tenantOne.tenantId, \&quot;Group\&quot;);\nconst groupController = new GroupController(config.tenantOne);\nconst response = await groupController.getGroups({search: &#x27;Test Automation Group&#x27;, count: 4});\nconst groups = response.results;\nexpect(groups.length).to.equal(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d3b199b0-9f10-4608-baad-988ced78a0a6&quot;,&quot;parentUUID&quot;:&quot;2e1b3a75-dcf8-4617-acb7-48dd5aa351e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retrieves all possible members for adding to groups&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests get tests retrieves all possible members for adding to groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Group = await models.getModel(config.tenantOne.tenantId, \&quot;Group\&quot;);\nconst groupController = new GroupController(config.tenantOne);\nconst response = await groupController.getAvailableMembers({});\nexpect(response.results.length).to.be.equal(response.total)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7762e623-02cd-47e6-94ca-30bf28577979&quot;,&quot;parentUUID&quot;:&quot;2e1b3a75-dcf8-4617-acb7-48dd5aa351e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;84913500-0934-4b48-8136-fde064ec3182&quot;,&quot;d3b199b0-9f10-4608-baad-988ced78a0a6&quot;,&quot;7762e623-02cd-47e6-94ca-30bf28577979&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:72,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1948540b-064b-4d5a-a01e-443ec2b83aab&quot;,&quot;title&quot;:&quot;insert tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;inserts a non-dynamic group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests inserts a non-dynamic group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;Test Group (simple)&#x27;;\nconst groupDesc = &#x27;Simple test group&#x27;;\nconst groupData = {\n  groupName: groupName,\n  groupDesc: groupDesc,\n}\nconst groupController = new GroupController(session);\nconst result = await groupController.addGroup(groupData);\nexpect(result.groupName).to.equal(groupName);\nexpect(result.groupDesc).to.equal(groupDesc);\nexpect(result.dynamic).to.equal(&#x27;No&#x27;); // ensure defaulting to \&quot;No\&quot; rather than null\nexpect(result.createdBy).to.equal(session.user_sid)\ntestGroups.push(result); // for cleanup at end&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b047ecd5-0afe-4ce1-8853-e0babb01ff61&quot;,&quot;parentUUID&quot;:&quot;1948540b-064b-4d5a-a01e-443ec2b83aab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;inserts a dynamic group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests inserts a dynamic group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;Test Group (simple)&#x27;;\nconst groupDesc = &#x27;Simple test group&#x27;;\nconst groupData = {\n  groupName: groupName,\n  groupDesc: groupDesc,\n  dynamic: \&quot;Yes\&quot;,\n  groupSql: \&quot;name = &#x27;Admin&#x27;\&quot;\n}\nconst groupController = new GroupController(session);\nconst result = await groupController.addGroup(groupData);\nexpect(result.groupName).to.equal(groupName);\nexpect(result.groupDesc).to.equal(groupDesc);\nexpect(result.createdBy).to.equal(session.user_sid)\ntestGroups.push(result); // for cleanup at end&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;933e8956-e01b-41a5-8cdc-6a9fb82aed5d&quot;,&quot;parentUUID&quot;:&quot;1948540b-064b-4d5a-a01e-443ec2b83aab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects a group with no name&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests rejects a group with no name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nawait expect(groupController.addGroup({groupDesc: &#x27;Test Group&#x27;})).to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56328755-e712-48c2-8fba-6f0bf5696269&quot;,&quot;parentUUID&quot;:&quot;1948540b-064b-4d5a-a01e-443ec2b83aab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects a dynamic group with no SQL&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests rejects a dynamic group with no SQL&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupData = {\n  groupName: &#x27;Dynamic Test Group&#x27;,\n  dynamic: &#x27;Yes&#x27; }\nconst groupController = new GroupController(session);\nawait expect(groupController.addGroup(groupData)).to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b612abe1-e806-4d6f-bc3c-1895d09936ed&quot;,&quot;parentUUID&quot;:&quot;1948540b-064b-4d5a-a01e-443ec2b83aab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b047ecd5-0afe-4ce1-8853-e0babb01ff61&quot;,&quot;933e8956-e01b-41a5-8cdc-6a9fb82aed5d&quot;,&quot;56328755-e712-48c2-8fba-6f0bf5696269&quot;,&quot;b612abe1-e806-4d6f-bc3c-1895d09936ed&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:50,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f6f4194f-1c92-4e2e-b040-2eb60ae837d2&quot;,&quot;title&quot;:&quot;update tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests update tests updates a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session)\nconst group = testGroups[0];\nconst result = await groupController.updateGroup({ groupGuid: group.groupGuid,\n                                                   groupName: &#x27;Updated Test Automation Group&#x27;,\n                                                   dynamic: &#x27;Yes&#x27;,\n                                                   groupSql: \&quot;name = &#x27;Admin&#x27;\&quot; });\nexpect(result).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f5c2069-7fbb-4057-83c2-d1f14130eda2&quot;,&quot;parentUUID&quot;:&quot;f6f4194f-1c92-4e2e-b040-2eb60ae837d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects an update with no group name&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests update tests rejects an update with no group name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session)\nconst group = testGroups[0];\nawait expect(groupController\n             .updateGroup({ groupGuid: group.groupGuid,\n                            groupName: &#x27;&#x27; }))\n  .to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d10bec2-09f7-401a-b756-9605a09e1736&quot;,&quot;parentUUID&quot;:&quot;f6f4194f-1c92-4e2e-b040-2eb60ae837d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects an update for dynamic without sql&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests update tests rejects an update for dynamic without sql&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session)\nconst group = testGroups[0];\nawait expect(groupController\n             .updateGroup({ groupGuid: group.groupGuid,\n                            groupName: &#x27;Validation test&#x27;,\n                            dynamic: &#x27;Yes&#x27;,\n                            groupSql: &#x27;&#x27; }))\n  .to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;52082746-8a18-4b23-af82-ec658967de26&quot;,&quot;parentUUID&quot;:&quot;f6f4194f-1c92-4e2e-b040-2eb60ae837d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects an update for dynamic other than Yes/No&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests update tests rejects an update for dynamic other than Yes/No&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session)\nconst group = testGroups[0];\nawait expect(groupController\n             .updateGroup({ groupGuid: group.groupGuid,\n                            groupName: &#x27;Validation test&#x27;,\n                            dynamic: true,\n                            groupSql: \&quot;name = &#x27;Admin&#x27;\&quot; }))\n  .to.be.rejectedWith(Error);\nawait expect(groupController\n             .updateGroup({ groupGuid: group.groupGuid,\n                            groupName: &#x27;Validation test&#x27;,\n                            dynamic: &#x27;yes&#x27;,\n                            groupSql: \&quot;name = &#x27;Admin&#x27;\&quot; }))\n  .to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db65777c-bc61-44a2-8051-8fbe68edb9a8&quot;,&quot;parentUUID&quot;:&quot;f6f4194f-1c92-4e2e-b040-2eb60ae837d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4f5c2069-7fbb-4057-83c2-d1f14130eda2&quot;,&quot;1d10bec2-09f7-401a-b756-9605a09e1736&quot;,&quot;52082746-8a18-4b23-af82-ec658967de26&quot;,&quot;db65777c-bc61-44a2-8051-8fbe68edb9a8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6d17d366-03ac-41a1-a978-df31c058cbe1&quot;,&quot;title&quot;:&quot;delete tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;soft deletes a list of groups&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests delete tests soft deletes a list of groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:56,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst timeBeforeDelete = Date.now();\nconst firstGroup = testGroups[0];\nconst response = await groupController.deleteGroups(testGroups.slice(0,5).map(group =&gt; group.groupGuid));\nexpect(response).to.eql([1,1,1,1,1]);\nlet deletedGroup = groupController.getGroup(firstGroup.groupGuid);\nexpect(deletedGroup).to.be.empty&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e005588-fbaa-4395-a68a-0a0df4afd8d4&quot;,&quot;parentUUID&quot;:&quot;6d17d366-03ac-41a1-a978-df31c058cbe1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7e005588-fbaa-4395-a68a-0a0df4afd8d4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:56,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;880c9efc-40a4-4801-abbb-df5b738f7f20&quot;,&quot;title&quot;:&quot;membership test&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;adds a user to a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test adds a user to a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:37,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[9]; //0-4 get deleted in a previous test\nlet result = await groupController.addMember({groupGuid: group.groupGuid,\n                                              memberGuid: session.user_sid,\n                                              memberType: &#x27;User&#x27;})\nexpect(result.memberGuid).to.equal(session.user_sid)\nexpect(result.groupGuid).to.equal(group.groupGuid)\nres = await groupController.getMembers(group.groupGuid)\nresult = res[\&quot;results\&quot;]\nexpect(result.length).to.equal(1)\nexpect(result[0].memberGuid.toLowerCase()).to.equal(session.user_sid)\nexpect(result[0].groupGuid.toLowerCase()).to.equal(group.groupGuid)\nexpect(result[0].memberType).to.equal(&#x27;User&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0e22d6d-2aab-402d-b57e-5f10412d28a1&quot;,&quot;parentUUID&quot;:&quot;880c9efc-40a4-4801-abbb-df5b738f7f20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;lists members of a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test lists members of a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst usersGroupGuid = &#x27;eab8a4c9-6903-40bc-a2ee-cf254a408d6f&#x27;\nconst res = await groupController.getMembers(usersGroupGuid);\nexpect(res.results.length).to.be.at.least(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a9d0841-9a4a-4bb7-9a85-4497391b072d&quot;,&quot;parentUUID&quot;:&quot;880c9efc-40a4-4801-abbb-df5b738f7f20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;filters members of a group based on search string&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test filters members of a group based on search string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst usersGroupGuid = &#x27;eab8a4c9-6903-40bc-a2ee-cf254a408d6f&#x27;\nlet res = await groupController.getMembers(usersGroupGuid, {search: &#x27;no-reply@integrify.com&#x27;});\nexpect(res.results.length).to.equal(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2498c306-52d7-4b15-b9c6-251c8dd3292b&quot;,&quot;parentUUID&quot;:&quot;880c9efc-40a4-4801-abbb-df5b738f7f20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits result members of a group based start/count&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits result members of a group based start/count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:40,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst usersGroupGuid = &#x27;eab8a4c9-6903-40bc-a2ee-cf254a408d6f&#x27;\nlet res = await groupController.getMembers(usersGroupGuid);\nconst groupSize = res.results.length\nexpect(groupSize).to.equal(res.total)\nres = await groupController.getMembers(usersGroupGuid, {count: 1});\nexpect(res.results.length).to.equal(1);\nexpect(res.total).to.equal(groupSize);\nres = await groupController.getMembers(usersGroupGuid, {start: 1});\nexpect(res.results.length).to.equal(groupSize - 1);\nexpect(res.total).to.equal(groupSize);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81ca5ffa-c0d9-48e1-9c1c-ee7a82d52927&quot;,&quot;parentUUID&quot;:&quot;880c9efc-40a4-4801-abbb-df5b738f7f20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits available members to users only&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits available members to users only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst res = await groupController.getAvailableMembers({users: &#x27;true&#x27;, groups: &#x27;false&#x27;});\nres.results.forEach(groupMember =&gt; expect(groupMember.memberType).to.equal(&#x27;User&#x27;))&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13476aac-125c-44ad-9c77-b12ad59e67ad&quot;,&quot;parentUUID&quot;:&quot;880c9efc-40a4-4801-abbb-df5b738f7f20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits available members to groups only&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits available members to groups only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nlet res = await groupController.getAvailableMembers({users: &#x27;false&#x27;, groups: &#x27;true&#x27;});\nres.results.forEach(groupMember =&gt; expect(groupMember.memberType).to.equal(&#x27;Group&#x27;))&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1cf28d6-ba74-478f-918f-eaac7cac3fc3&quot;,&quot;parentUUID&quot;:&quot;880c9efc-40a4-4801-abbb-df5b738f7f20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits resulting available members based on start/count&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits resulting available members based on start/count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:64,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nlet res = await groupController.getAvailableMembers({});\nconst availableSize = res.results.length\nexpect(availableSize).to.equal(res.total)\nres = await groupController.getAvailableMembers({count: 1});\nexpect(res.results.length).to.equal(1);\nexpect(res.total).to.equal(availableSize);\nres = await groupController.getAvailableMembers({start: 0, count: 5});\nexpect(res.results.length).to.equal(5);\nexpect(res.total).to.equal(availableSize);\nres = await groupController.getAvailableMembers({start: 1, count: 5});\nexpect(res.results.length).to.equal(5);\nexpect(res.total).to.equal(availableSize);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fc017d9-c29a-401f-acc9-d0591b3ae1e1&quot;,&quot;parentUUID&quot;:&quot;880c9efc-40a4-4801-abbb-df5b738f7f20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits resulting available members based on search string&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits resulting available members based on search string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:41,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nlet res = await groupController.getAvailableMembers({});\nconst availableSize = res.results.length\nexpect(availableSize).to.equal(res.total)\nres = await groupController.getAvailableMembers({search: &#x27;System&#x27;});\nconst results = res.results\nexpect(results.length).to.equal(3);\nexpect(results).to.eql([{ memberGuid: \&quot;A03BDD24-A0BA-4071-9A5B-2833C865EC3D\&quot;,\n                          memberName: \&quot;Administrators\&quot;,\n                          memberType: \&quot;Group\&quot;\n                        },\n                        {\n                          memberGuid: \&quot;D8C469C3-F781-4179-A09C-6D148885FB30\&quot;,\n                          memberName: \&quot;Integrify System\&quot;,\n                          memberType: \&quot;User\&quot;\n                        },\n                        {\n                          memberGuid: \&quot;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF\&quot;,\n                          memberName: \&quot;System System\&quot;,\n                          memberType: \&quot;User\&quot;\n                        },\n                       ])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6942288-a920-4509-8e2d-c6e6db58665b&quot;,&quot;parentUUID&quot;:&quot;880c9efc-40a4-4801-abbb-df5b738f7f20&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a0e22d6d-2aab-402d-b57e-5f10412d28a1&quot;,&quot;2a9d0841-9a4a-4bb7-9a85-4497391b072d&quot;,&quot;2498c306-52d7-4b15-b9c6-251c8dd3292b&quot;,&quot;81ca5ffa-c0d9-48e1-9c1c-ee7a82d52927&quot;,&quot;13476aac-125c-44ad-9c77-b12ad59e67ad&quot;,&quot;d1cf28d6-ba74-478f-918f-eaac7cac3fc3&quot;,&quot;8fc017d9-c29a-401f-acc9-d0591b3ae1e1&quot;,&quot;c6942288-a920-4509-8e2d-c6e6db58665b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:241,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a34fc1d3-fff5-40fd-87cf-808425307235&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bc750460-f9e9-4f06-97d8-0efde815698a&quot;,&quot;title&quot;:&quot;Config Processor ENV.CONFIG tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config Processor ENV.CONFIG tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:52,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\nprocess.env.TESTING = true;\n\nconfigHelper = require(\&quot;../../src/helpers/config\&quot;)\nredis = require(\&quot;integrify-libs\&quot;).redisClient\npubSubClient = redis.makeCopy();\npubSubClient.subscribe(&#x27;updateEnvConfig&#x27;)\npubSubClient.on(&#x27;message&#x27;, function(channel, message) {\n  \n  pubSubMessage = {channel, message}\n  // pubSubMessage[channel] = message;\n  \n});\n//let deletes = await redis.delAsync([&#x27;ENV.CONFIG&#x27;]);\n//console.log(deletes)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bf7cb87f-0c33-4a0c-807e-1e611f648977&quot;,&quot;parentUUID&quot;:&quot;bc750460-f9e9-4f06-97d8-0efde815698a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ea46e231-1884-47c6-b14d-3d0fcfcbad1a&quot;,&quot;title&quot;:&quot;config helper&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;51020d4d-bab5-408a-9347-b0a318a71456&quot;,&quot;title&quot;:&quot;setConfig&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set ENV.CONFIG in redis based on a local config file&quot;,&quot;fullTitle&quot;:&quot;Config Processor ENV.CONFIG tests config helper setConfig should set ENV.CONFIG in redis based on a local config file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:352,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await configHelper.setEnvConfig()\nlet storedConfig = await redis.getAsync(&#x27;ENV.CONFIG&#x27;)\nconsole.log(\&quot;wow\&quot;,storedConfig)\nexpect(storedConfig).to.exist;\nstoredConfig = JSON.parse(storedConfig);\n//expect(storedConfig.cacheTime).to.exist;\nawait delay(300)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c47a03eb-35f3-4614-bf20-3d4f45010e41&quot;,&quot;parentUUID&quot;:&quot;51020d4d-bab5-408a-9347-b0a318a71456&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a message on the updateEnvConfig pub/sub channel&quot;,&quot;fullTitle&quot;:&quot;Config Processor ENV.CONFIG tests config helper setConfig should get a message on the updateEnvConfig pub/sub channel&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(pubSubMessage.channel).to.equal(&#x27;updateEnvConfig&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;190ec823-9b38-4f18-b315-a3f09ee4603b&quot;,&quot;parentUUID&quot;:&quot;51020d4d-bab5-408a-9347-b0a318a71456&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should set ENV.CONFIG in redis based on a S3 config file&quot;,&quot;fullTitle&quot;:&quot;Config Processor ENV.CONFIG tests config helper setConfig should set ENV.CONFIG in redis based on a S3 config file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.USE_S3_FILES=\&quot;true\&quot;\nawait configHelper.setEnvConfig()\nlet storedConfig = await redis.getAsync(&#x27;ENV.CONFIG&#x27;)\nexpect(storedConfig).to.exist;\nstoredConfig = JSON.parse(storedConfig);\nexpect(storedConfig.cacheTime).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a414562d-42dd-47f9-b173-90d3d58c1d0f&quot;,&quot;parentUUID&quot;:&quot;51020d4d-bab5-408a-9347-b0a318a71456&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c47a03eb-35f3-4614-bf20-3d4f45010e41&quot;,&quot;190ec823-9b38-4f18-b315-a3f09ee4603b&quot;,&quot;a414562d-42dd-47f9-b173-90d3d58c1d0f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:382,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;97d5aa1b-8896-4879-ab6f-57ade2e274d1&quot;,&quot;title&quot;:&quot;Config Processor Event Handler Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/configEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/configEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config Processor Event Handler Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5151,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.TESTING = true;\nthis.timeout(105000);\nlet deletes = await redis.delAsync([fullStreamName, eventHistoryName, eventProcessedName]);\n\nconsole.log(deletes)\nlet sp = new StreamPublisher(testStreamName,tenant);\nawait sp.sendEvent(\&quot;updateEnvConfig\&quot;, {\n    update: new Date().toISOString()\n});\nawait sp.sendEvent(\&quot;updateDataInstances\&quot;, {\n  update: new Date().toISOString()\n});\nawait sp.sendEvent(\&quot;updateLicenses\&quot;, {\n    update: new Date().toISOString()\n});\nawait sp.sendEvent(\&quot;updateLicenses\&quot;, {\n  update: new Date().toISOString(),\n  tenantId: &#x27;integrifydev&#x27;\n      });\n\n\nforkedProcessor = await configStreamConsumer.monitorStream(tenant);\nawait delay(5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d32e4339-d12f-4ab7-996f-2e204e7f664b&quot;,&quot;parentUUID&quot;:&quot;97d5aa1b-8896-4879-ab6f-57ade2e274d1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config Processor Event Handler Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1eeb6671-2baa-4003-a778-ade4d9e24a42&quot;,&quot;parentUUID&quot;:&quot;97d5aa1b-8896-4879-ab6f-57ade2e274d1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;fb335d33-193e-410f-b6b8-a5cf2da41e19&quot;,&quot;title&quot;:&quot;config stream processor&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/configEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/configEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8c7be248-904b-457a-b160-d144fc427fea&quot;,&quot;title&quot;:&quot;reads from config stream&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/configEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/configEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should process events&quot;,&quot;fullTitle&quot;:&quot;Config Processor Event Handler Tests config stream processor reads from config stream should process events&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processedCount = await redis.zcardAsync(eventProcessedName)\n              let historyCount = await redis.zcardAsync(eventHistoryName)\n              expect(historyCount).to.equal(processedCount)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;740fc132-1835-48a7-8ca9-bbb3ba368462&quot;,&quot;parentUUID&quot;:&quot;8c7be248-904b-457a-b160-d144fc427fea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;740fc132-1835-48a7-8ca9-bbb3ba368462&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fcb0c457-01dd-44e1-ac45-3baf1237c4c3&quot;,&quot;title&quot;:&quot;Config data instance tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/dataInstance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/dataInstance.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config data instance tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.TESTING = true;\npubSubClient.subscribe(&#x27;updateDataInstances&#x27;)\npubSubClient.on(&#x27;message&#x27;, function(channel, message) {\n  \n  pubSubMessage = {channel, message}\n  // pubSubMessage[channel] = message;\n  \n});\n  \nlet deletes = await redis.delAsync([&#x27;data_instances&#x27;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;557d7cec-c43f-4698-9568-b0cf6cbcb9a2&quot;,&quot;parentUUID&quot;:&quot;fcb0c457-01dd-44e1-ac45-3baf1237c4c3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3c6811e7-6413-431c-adb2-a709905c283c&quot;,&quot;title&quot;:&quot;dataInstasnce helper&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/dataInstance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/dataInstance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3be3b42f-6a78-4652-822f-9caf4688599a&quot;,&quot;title&quot;:&quot;updateDataInstances&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/dataInstance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/dataInstance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set data_instances in redis&quot;,&quot;fullTitle&quot;:&quot;Config data instance tests dataInstasnce helper updateDataInstances should set data_instances in redis&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:592,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await dataInstanceHelper.updateDataInstances();\nlet storedDataInstances = await redis.getAsync(&#x27;data_instances&#x27;)\nexpect(storedDataInstances).to.exist;\nstoredDataInstances = JSON.parse(storedDataInstances);\nexpect(Object.keys(storedDataInstances).length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a42b32a0-45e9-49af-b1d5-190dfbd84ac8&quot;,&quot;parentUUID&quot;:&quot;3be3b42f-6a78-4652-822f-9caf4688599a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a message on the updateDataInstances pub/sub channel&quot;,&quot;fullTitle&quot;:&quot;Config data instance tests dataInstasnce helper updateDataInstances should get a message on the updateDataInstances pub/sub channel&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:302,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await delay(300)\nexpect(pubSubMessage.channel).to.equal(&#x27;updateDataInstances&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e3b22da-085f-4481-bc88-580c2e37bf58&quot;,&quot;parentUUID&quot;:&quot;3be3b42f-6a78-4652-822f-9caf4688599a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a42b32a0-45e9-49af-b1d5-190dfbd84ac8&quot;,&quot;5e3b22da-085f-4481-bc88-580c2e37bf58&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:894,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ffc77c3e-158f-4295-a300-b133d130d0d7&quot;,&quot;title&quot;:&quot;Config license tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/license.test.js&quot;,&quot;file&quot;:&quot;/test/integration/license.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config license tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.TESTING = true;\npubSubClient.subscribe(&#x27;updateLicenses&#x27;)\npubSubClient.on(&#x27;message&#x27;, function(channel, message) {\n  \n  pubSubMessage = {channel, message}\n  // pubSubMessage[channel] = message;\n  \n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;288242a6-2ec9-4e2d-8b45-ccc679193d02&quot;,&quot;parentUUID&quot;:&quot;ffc77c3e-158f-4295-a300-b133d130d0d7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;306f7a02-c3b9-4f66-b272-3aeaa19f2f73&quot;,&quot;title&quot;:&quot;license helper&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/license.test.js&quot;,&quot;file&quot;:&quot;/test/integration/license.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bcee22a0-5b8e-4f1d-89ab-86fa0667c4dd&quot;,&quot;title&quot;:&quot;updateLicenses&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/license.test.js&quot;,&quot;file&quot;:&quot;/test/integration/license.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set licenses and x.license in redis for all dataInstances&quot;,&quot;fullTitle&quot;:&quot;Config license tests license helper updateLicenses should set licenses and x.license in redis for all dataInstances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:565,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await licenseHelper.updateLicenses()\nlet storedLicences = await redis.hgetallAsync(&#x27;licenses&#x27;)\nexpect(storedLicences).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aabd3908-b14c-41ac-82c8-ca48bb61adf0&quot;,&quot;parentUUID&quot;:&quot;bcee22a0-5b8e-4f1d-89ab-86fa0667c4dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a message on the updateLicenses pub/sub channel&quot;,&quot;fullTitle&quot;:&quot;Config license tests license helper updateLicenses should get a message on the updateLicenses pub/sub channel&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:301,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await delay(300)\nexpect(pubSubMessage.channel).to.equal(&#x27;updateLicenses&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a787387-2dae-4059-b6d6-8a95db0c119d&quot;,&quot;parentUUID&quot;:&quot;bcee22a0-5b8e-4f1d-89ab-86fa0667c4dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should set license redis for all dataInstances&quot;,&quot;fullTitle&quot;:&quot;Config license tests license helper updateLicenses should set license redis for all dataInstances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:206,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await licenseHelper.updateLicenses(&#x27;integrifydev&#x27;)\nlet storedLicences = await redis.hgetallAsync(&#x27;licenses&#x27;)\nexpect(storedLicences).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;338b3745-c25d-44d4-8e06-30a33708d96a&quot;,&quot;parentUUID&quot;:&quot;bcee22a0-5b8e-4f1d-89ab-86fa0667c4dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aabd3908-b14c-41ac-82c8-ca48bb61adf0&quot;,&quot;7a787387-2dae-4059-b6d6-8a95db0c119d&quot;,&quot;338b3745-c25d-44d4-8e06-30a33708d96a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1072,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bbffb6ab-d363-4314-acf2-c179f4e34115&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2ff10c8e-a007-45c6-9956-2d6f1fdcaaa8&quot;,&quot;title&quot;:&quot;Core Service biztimes&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/biztimes.test.js&quot;,&quot;file&quot;:&quot;/test/biztimes.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service biztimes \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:36,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()\nlet test_yml = await getTestConfig();\ntest_data = test_yml.data;\nbiz = { \&quot;Active\&quot;: false, \&quot;EndHour\&quot;: 17, \&quot;EndMinute\&quot;: 0, \&quot;SID\&quot;: test_data.biz_sid, \&quot;StartHour\&quot;: 9, \&quot;StartMinute\&quot;: 15, \&quot;Weekday\&quot;: 0 }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a51f2c09-07d3-4fa0-95d4-0c10c8a3f1f5&quot;,&quot;parentUUID&quot;:&quot;2ff10c8e-a007-45c6-9956-2d6f1fdcaaa8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;39f16527-a44b-421a-8338-bccc77cb4544&quot;,&quot;title&quot;:&quot;GET /biztimes&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/biztimes.test.js&quot;,&quot;file&quot;:&quot;/test/biztimes.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets biztimes&quot;,&quot;fullTitle&quot;:&quot;Core Service biztimes GET /biztimes gets biztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:243,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/biztimes&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n// biz = res.body.Items[0];\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e08c5760-d934-416e-a068-0e9e5d012bb0&quot;,&quot;parentUUID&quot;:&quot;39f16527-a44b-421a-8338-bccc77cb4544&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e08c5760-d934-416e-a068-0e9e5d012bb0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:243,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;71676dd6-51c8-4ff0-bec2-18a35fe834dd&quot;,&quot;title&quot;:&quot;POST /biztimes/save&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/biztimes.test.js&quot;,&quot;file&quot;:&quot;/test/biztimes.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service biztimes POST /biztimes/save \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;if (biz.EndHour &lt; 24)\n    biz.EndHour = biz.EndHour + 1\nelse\n    biz.EndHour = biz.EndHour - 23&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fec11fb-aab4-49a9-8d0f-f433dfbfab69&quot;,&quot;parentUUID&quot;:&quot;71676dd6-51c8-4ff0-bec2-18a35fe834dd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;saves biztimes&quot;,&quot;fullTitle&quot;:&quot;Core Service biztimes POST /biztimes/save saves biztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:84,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/biztimes/save&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(biz)\n//console.log(res.body)\nexpect(res.status).to.equal(200);\nexpect(res.body.EndHour).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8954cda-8712-4c4e-bdf5-de8ba1a5905b&quot;,&quot;parentUUID&quot;:&quot;71676dd6-51c8-4ff0-bec2-18a35fe834dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b8954cda-8712-4c4e-bdf5-de8ba1a5905b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:84,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;5a7e5467-7c9c-4caf-8257-760b00db2add&quot;,&quot;title&quot;:&quot;Core Service category&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service category \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03fd85e3-4767-418c-985c-b0364c44209b&quot;,&quot;parentUUID&quot;:&quot;5a7e5467-7c9c-4caf-8257-760b00db2add&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;82b97b47-f929-47c3-9c5d-7c879c83bc24&quot;,&quot;title&quot;:&quot;GET tree/{object_type}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service category GET tree/{object_type} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:57,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/categories/tree/category?node=all&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            category = res.body[0]\n            coreResult = res.body;\n            //console.log(res.body)\n            expect(res.status).to.equal(200);\n            // expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb99fcdd-a346-4a6b-ae52-cf01a5b80585&quot;,&quot;parentUUID&quot;:&quot;82b97b47-f929-47c3-9c5d-7c879c83bc24&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bb99fcdd-a346-4a6b-ae52-cf01a5b80585&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:57,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;2e5f2ba5-c9cd-4386-abe7-39e01480d0d5&quot;,&quot;title&quot;:&quot;GET {sid}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service category GET {sid} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:45,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/category/&#x27; + category.id)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            //console.log(res.body);\n            coreResult = res.body;\n            expect(res.status).to.equal(200);\n            expect(res.body.Name).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2478b0ba-7c4c-423e-8f5c-4571f98f80bb&quot;,&quot;parentUUID&quot;:&quot;2e5f2ba5-c9cd-4386-abe7-39e01480d0d5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2478b0ba-7c4c-423e-8f5c-4571f98f80bb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:45,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;f00dee37-5ee1-4ef2-9f5b-45f461caf983&quot;,&quot;title&quot;:&quot;POST save&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service category POST save core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:52,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/category/save&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(category_save)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.CreatedDate).to.exist;\n// expect(res.body.Name).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;65aa6f23-45ff-4c61-9a6e-8237722d6bef&quot;,&quot;parentUUID&quot;:&quot;f00dee37-5ee1-4ef2-9f5b-45f461caf983&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;65aa6f23-45ff-4c61-9a6e-8237722d6bef&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:52,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;0217cbdb-0fc4-4b1b-b690-022c806db053&quot;,&quot;title&quot;:&quot;GET {sid}/delete&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service category GET {sid}/delete \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:40,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//Fetch category sid to delete\n            let resp = await chai.request(newUrlBase)\n                .get(&#x27;/categories/tree/category?node=all&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            category = resp.body;\n            category.forEach(element =&gt; {\n                //console.log(element.Name);\n                if (element.Name == &#x27;Qa Auto&#x27;)\n                    cate_delete = element;\n            });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;263c0824-ccb8-479c-8c36-b305070ab4cc&quot;,&quot;parentUUID&quot;:&quot;0217cbdb-0fc4-4b1b-b690-022c806db053&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service category GET {sid}/delete core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:49,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/category/&#x27; + cate_delete.id + &#x27;/delete&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body).to.equal(0);\n// expect(res.body.Name).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f28b2e02-dee8-4c6d-be3d-2dc0d8260ad3&quot;,&quot;parentUUID&quot;:&quot;0217cbdb-0fc4-4b1b-b690-022c806db053&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f28b2e02-dee8-4c6d-be3d-2dc0d8260ad3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:49,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;8b245c1d-959f-425a-8e7b-c10fef390fb7&quot;,&quot;title&quot;:&quot;Core Service contacts&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e8ab3af-f321-49f9-be7a-41c1bdaeff4c&quot;,&quot;parentUUID&quot;:&quot;8b245c1d-959f-425a-8e7b-c10fef390fb7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9f2b3a28-2f5b-469c-8f07-c45e58ae9e0b&quot;,&quot;title&quot;:&quot;GET /contacts/current&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET /contacts/current core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                        .get(&#x27;/contacts/current/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n                        .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n                  coreResult = res.body;\n                  expect(res.status).to.equal(200);\n                  expect(res.body.ContactID).to.exist;\n                  currentUser_sid = res.body.SID&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01c0a203-9292-4742-9b54-e6c2776b9b17&quot;,&quot;parentUUID&quot;:&quot;9f2b3a28-2f5b-469c-8f07-c45e58ae9e0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;01c0a203-9292-4742-9b54-e6c2776b9b17&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;0b64a151-bc4b-47b6-b0e0-fbd09633a2d4&quot;,&quot;title&quot;:&quot;GET detail/{contact_sid}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET detail/{contact_sid} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:37,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                        .get(&#x27;/contacts/detail/&#x27; + currentUser_sid)\n                        .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n                  coreResult = res.body;\n                  expect(res.status).to.equal(200);\n                  expect(res.body.ContactID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;facaa055-bb53-476f-b148-d3860f170b0c&quot;,&quot;parentUUID&quot;:&quot;0b64a151-bc4b-47b6-b0e0-fbd09633a2d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;facaa055-bb53-476f-b148-d3860f170b0c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:37,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;e66fb7e7-f9ab-4eef-b3d3-638d8c85b71d&quot;,&quot;title&quot;:&quot;GET {contact_sid}/attributes&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET {contact_sid}/attributes core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contact/&#x27; + currentUser_sid + &#x27;/attributes&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//Need clarifacation on a valaid test \nexpect(res.body[0]).to.exist;\nexpect(res.body[1]).to.exist;\nexpect(res.body[2]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;793af2d6-95f1-497b-878c-43a3a9504468&quot;,&quot;parentUUID&quot;:&quot;e66fb7e7-f9ab-4eef-b3d3-638d8c85b71d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;793af2d6-95f1-497b-878c-43a3a9504468&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;d8cf6195-8ae6-4b8f-bd9a-204a8950188b&quot;,&quot;title&quot;:&quot;GET {contact_sid}/delegations&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET {contact_sid}/delegations core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:34,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contact/&#x27; + currentUser_sid + &#x27;/delegations&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\n// //console.log(res.body)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f3dc365-2cb6-48a5-a653-e318733125b7&quot;,&quot;parentUUID&quot;:&quot;d8cf6195-8ae6-4b8f-bd9a-204a8950188b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8f3dc365-2cb6-48a5-a653-e318733125b7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:34,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;2a0766d2-cc16-4b75-80ff-4a584cbbf256&quot;,&quot;title&quot;:&quot;GET byuserid/{user_id}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET byuserid/{user_id} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contacts/byuserid/iApprove&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\n//console.log(res.body)\nexpect(res.status).to.equal(200);\n//Need clarifacation on a valaid test \n// expect(res.body[0]).to.exist;\n// expect(res.body[1]).to.exist;\n// expect(res.body[2]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d61f407-b667-463e-aa9d-14556de91cd8&quot;,&quot;parentUUID&quot;:&quot;2a0766d2-cc16-4b75-80ff-4a584cbbf256&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8d61f407-b667-463e-aa9d-14556de91cd8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:26,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;c546bc50-d783-4817-9d8a-6379a419e4aa&quot;,&quot;title&quot;:&quot;GET /contacts/search&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET /contacts/search core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contacts/search?search=System&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n// //console.log(res.body)\ncoreResult = res.body;\n//console.log(res.body);\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;74807c2c-5551-4eaf-81ef-6fc5636f0f85&quot;,&quot;parentUUID&quot;:&quot;c546bc50-d783-4817-9d8a-6379a419e4aa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;74807c2c-5551-4eaf-81ef-6fc5636f0f85&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:28,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;60db2345-706d-4a5a-b346-992c6ab841e2&quot;,&quot;title&quot;:&quot;GET /contact/search/quick/name&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET /contact/search/quick/name core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:34,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contacts/search/quick/name/script/?start=0&amp;count=20&amp;sort=Name&amp;dir=ASC&amp;filter=System&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n//console.log(res.body)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e8979ed-2358-4c3d-8e06-07b20ad9cb57&quot;,&quot;parentUUID&quot;:&quot;60db2345-706d-4a5a-b346-992c6ab841e2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1e8979ed-2358-4c3d-8e06-07b20ad9cb57&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:34,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;ee576c88-03af-47de-a9a7-21098536ffc1&quot;,&quot;title&quot;:&quot;GET /contacts/contactdetailsearch/{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET /contacts/contactdetailsearch/{page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:63,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contacts/contactdetailsearch/0/10/LAST_NAME/ASC/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n//console.log(res.body)\nexpect(res.status).to.equal(200);\ncoreResult = res.body;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7218cb5a-9d7b-4085-8dcd-df4c40e834b1&quot;,&quot;parentUUID&quot;:&quot;ee576c88-03af-47de-a9a7-21098536ffc1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7218cb5a-9d7b-4085-8dcd-df4c40e834b1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:63,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;13a4f8cc-40cf-45c2-92e7-389e24c56ab7&quot;,&quot;title&quot;:&quot;POST /contacts/save | update&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts POST /contacts/save | update core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:801,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .post(&#x27;/contacts/save&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send(contact);\ninsertedSid = res.text\n//console.log(res.text)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46aeb066-1b11-48ff-a988-59909a8cca5e&quot;,&quot;parentUUID&quot;:&quot;13a4f8cc-40cf-45c2-92e7-389e24c56ab7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;core service update&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts POST /contacts/save | update core service update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:733,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;contact.SID = insertedSid;\nlet res = await chai.request(newUrlBase)\n      .post(&#x27;/contacts/update&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send(contact);\n//console.log(res.body)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84eea9bf-a00d-4ccf-9471-6861ad3757de&quot;,&quot;parentUUID&quot;:&quot;13a4f8cc-40cf-45c2-92e7-389e24c56ab7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;46aeb066-1b11-48ff-a988-59909a8cca5e&quot;,&quot;84eea9bf-a00d-4ccf-9471-6861ad3757de&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1534,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;ba8aeeee-0e44-4ab1-b2a1-a787605e8955&quot;,&quot;title&quot;:&quot;POST /contacts/replace POST&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts POST /contacts/replace POST \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;replace_user = [[\&quot;OldContactSid\&quot;, insertedSid], [\&quot;ReplacementContactSid\&quot;, insertedSid2], [\&quot;RecipientReplace\&quot;, \&quot;No\&quot;], [\&quot;OpenTaskReplace\&quot;, \&quot;No\&quot;], [\&quot;GroupReplace\&quot;, \&quot;No\&quot;], [\&quot;RoleReplace\&quot;, \&quot;No\&quot;], [\&quot;DelegationReplace\&quot;, \&quot;No\&quot;]]&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8eb1e03e-38f0-40ae-8372-92b7e261ec0b&quot;,&quot;parentUUID&quot;:&quot;ba8aeeee-0e44-4ab1-b2a1-a787605e8955&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service update&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts POST /contacts/replace POST core service update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;contact.SID = insertedSid;\nlet res = await chai.request(newUrlBase)\n      .post(&#x27;/contacts/replace &#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send(replace_user);\n//console.log(res.body)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2279a73-d733-4ffd-9554-2ca73635bf1d&quot;,&quot;parentUUID&quot;:&quot;ba8aeeee-0e44-4ab1-b2a1-a787605e8955&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c2279a73-d733-4ffd-9554-2ca73635bf1d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;1e452fd0-2655-4aa7-b531-62360566b30f&quot;,&quot;title&quot;:&quot;Core service dbconns&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/dbconn.test.js&quot;,&quot;file&quot;:&quot;/test/dbconn.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core service dbconns \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ba96544-3944-467b-924d-20b537a9bec4&quot;,&quot;parentUUID&quot;:&quot;1e452fd0-2655-4aa7-b531-62360566b30f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all dbconns&quot;,&quot;fullTitle&quot;:&quot;Core service dbconns it should GET all dbconns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:39,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .get(&#x27;/dbconns/list/0/1000/Name/ASC/script/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;000fcd64-56f0-4b80-9a65-b128180e1ea7&quot;,&quot;parentUUID&quot;:&quot;1e452fd0-2655-4aa7-b531-62360566b30f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should add a test dbconn&quot;,&quot;fullTitle&quot;:&quot;Core service dbconns it should add a test dbconn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:62,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .post(&#x27;/dbconns/save/script/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n  .send(testDbConn)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\nexpect(res.text).to.be.a.guid()\ntestDbConnSid = res.text\n// verify testDbConn comes back in list\nres = await chai.request(newUrlBase)\n  .get(&#x27;/dbconns/list/0/1000/Name/ASC/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst idx = res.body.Items.findIndex(item =&gt; item.SID == testDbConnSid);\nexpect(idx).to.be.greaterThan(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61ded79b-e192-4a93-9b2b-90408f9d894f&quot;,&quot;parentUUID&quot;:&quot;1e452fd0-2655-4aa7-b531-62360566b30f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should delete the test dbconn&quot;,&quot;fullTitle&quot;:&quot;Core service dbconns it should delete the test dbconn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .post(&#x27;/dbconns/delete/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n  .send([testDbConnSid])\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\nexpect(res.text).to.equal(&#x27;1&#x27;);\n// verify testDbConn does not come back in list\nres = await chai.request(newUrlBase)\n  .get(&#x27;/dbconns/list/0/1000/Name/ASC/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst idx = res.body.Items.findIndex(item =&gt; item.SID == testDbConnSid);\nexpect(idx).to.equal(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d8e9e6f-4c11-4484-a449-03ef52bf247d&quot;,&quot;parentUUID&quot;:&quot;1e452fd0-2655-4aa7-b531-62360566b30f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;000fcd64-56f0-4b80-9a65-b128180e1ea7&quot;,&quot;61ded79b-e192-4a93-9b2b-90408f9d894f&quot;,&quot;8d8e9e6f-4c11-4484-a449-03ef52bf247d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:133,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;75e69eba-2603-471d-941f-8343ff14a8aa&quot;,&quot;title&quot;:&quot;Core Service groups&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service groups \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;417e66ea-61de-4bb9-b339-48ab28b06537&quot;,&quot;parentUUID&quot;:&quot;75e69eba-2603-471d-941f-8343ff14a8aa&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ab8f6051-3303-45ea-b6f4-b8ee3ef3d270&quot;,&quot;title&quot;:&quot;POST /group/save&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups POST /group/save core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:40,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                        .post(&#x27;/groups/save/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n                        .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n                        .send({ \&quot;Name\&quot;: \&quot;Qa Auto\&quot;, \&quot;Description\&quot;: \&quot;This is an automation\&quot;, \&quot;Dynamic\&quot;: 0 })\n                  new_groupSid = res.text;\n                  expect(res.status).to.equal(200);\n                  expect(res.text).to.exist;\n                  expect(res.text).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a17ec47-061d-41b8-862a-3d0b9692bf88&quot;,&quot;parentUUID&quot;:&quot;ab8f6051-3303-45ea-b6f4-b8ee3ef3d270&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0a17ec47-061d-41b8-862a-3d0b9692bf88&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:40,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;20296833-6b41-4c4f-a8bd-28051450490e&quot;,&quot;title&quot;:&quot;POST /groups/members/{groupSid}/add&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups POST /groups/members/{groupSid}/add core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:79,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .post(&#x27;/groups/members/&#x27; + new_groupSid + &#x27;/add&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send([{ SID: system_user, ContactType: 1 }])\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26f173df-182c-4e53-91db-41d4375aed39&quot;,&quot;parentUUID&quot;:&quot;20296833-6b41-4c4f-a8bd-28051450490e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;26f173df-182c-4e53-91db-41d4375aed39&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:79,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;af49d542-d876-4b3c-baac-e49aea72f6ef&quot;,&quot;title&quot;:&quot;POST /groups/members/{groupSid}/remove&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups POST /groups/members/{groupSid}/remove core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .post(&#x27;/groups/members/&#x27; + new_groupSid + &#x27;/remove&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send([{ SID: system_user, ContactType: 1 }])\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d474241-6c7b-4e9c-a50f-b4c0664d08b0&quot;,&quot;parentUUID&quot;:&quot;af49d542-d876-4b3c-baac-e49aea72f6ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0d474241-6c7b-4e9c-a50f-b4c0664d08b0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:26,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;73b8d4ed-d5c3-4623-99e3-716ccf09394e&quot;,&quot;title&quot;:&quot;GET /groups​/{sid}​/delete&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups​/{sid}​/delete core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/&#x27; + new_groupSid + &#x27;/delete&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\nexpect(res.text).to.equal(&#x27;true&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47adc4ce-8fa5-4e40-8404-0133a8684f98&quot;,&quot;parentUUID&quot;:&quot;73b8d4ed-d5c3-4623-99e3-716ccf09394e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;47adc4ce-8fa5-4e40-8404-0133a8684f98&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;ccacf843-63e7-4b8d-9ddf-977026ee165f&quot;,&quot;title&quot;:&quot;GET /groups/list/simple&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/list/simple core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/list/simple&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body[0]).to.be.an(&#x27;array&#x27;).that.does.include(&#x27;Administrators&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a6b377b-b87e-491f-bbee-75cf1e3354c4&quot;,&quot;parentUUID&quot;:&quot;ccacf843-63e7-4b8d-9ddf-977026ee165f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3a6b377b-b87e-491f-bbee-75cf1e3354c4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;d097e005-7275-4740-87ba-191f05c28704&quot;,&quot;title&quot;:&quot;GET /groups/{sid}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/{sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/&#x27; + groupSid)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.SID).to.exist\nexpect(res.body.SID).to.be.guid\n// expect(res.).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;350357b0-707b-411d-a2a0-ae4147cb4abe&quot;,&quot;parentUUID&quot;:&quot;d097e005-7275-4740-87ba-191f05c28704&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;350357b0-707b-411d-a2a0-ae4147cb4abe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;771c63a4-916f-4e35-9097-e03b29d0aef1&quot;,&quot;title&quot;:&quot;GET /groups/listroleassociation/{groupSid}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/listroleassociation/{groupSid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/listroleassociation/&#x27; + groupSid)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body[0]).to.be.an(&#x27;array&#x27;).that.does.include(&#x27;System Administrators&#x27;);\n// expect(res.).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24b93e3e-d032-4f4e-a3e9-582f12b292ff&quot;,&quot;parentUUID&quot;:&quot;771c63a4-916f-4e35-9097-e03b29d0aef1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;24b93e3e-d032-4f4e-a3e9-582f12b292ff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:31,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;4045cd6f-0650-4e28-a376-c0d09854d0ea&quot;,&quot;title&quot;:&quot;GET /groups/select/{contact_sid}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/select/{contact_sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/select/&#x27; + system_user)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc5470d1-5611-46f0-849f-859a184807ef&quot;,&quot;parentUUID&quot;:&quot;4045cd6f-0650-4e28-a376-c0d09854d0ea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dc5470d1-5611-46f0-849f-859a184807ef&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;27fb6038-04d6-4487-9cd7-534b89d3a3ca&quot;,&quot;title&quot;:&quot;GET /groups​/nondynamic​/list​/simple&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups​/nondynamic​/list​/simple core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/nondynamic/list/simple&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69cb13de-5c95-4240-9e4f-3f68a96998ca&quot;,&quot;parentUUID&quot;:&quot;27fb6038-04d6-4487-9cd7-534b89d3a3ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;69cb13de-5c95-4240-9e4f-3f68a96998ca&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;b2d5bb09-f89a-4a46-8d88-5eed04e997ef&quot;,&quot;title&quot;:&quot;​GET /groups​/listmembers​/{sid}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups ​GET /groups​/listmembers​/{sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/listmembers/&#x27; + groupSid)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29cbf7d2-fae3-481d-b01b-7a00dc4699db&quot;,&quot;parentUUID&quot;:&quot;b2d5bb09-f89a-4a46-8d88-5eed04e997ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;29cbf7d2-fae3-481d-b01b-7a00dc4699db&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;067197f4-253b-47ac-a1eb-77083deacf96&quot;,&quot;title&quot;:&quot;​GET /groups​/list​/{page}​/{count}​/{sort}​/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups ​GET /groups​/list​/{page}​/{count}​/{sort}​/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:30,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/list/0/10/Name/asc&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8adae1f0-1698-49d5-9964-b6c55a2ffc81&quot;,&quot;parentUUID&quot;:&quot;067197f4-253b-47ac-a1eb-77083deacf96&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8adae1f0-1698-49d5-9964-b6c55a2ffc81&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:30,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;17cdd958-27fb-40a5-b7a0-1eba4f44a400&quot;,&quot;title&quot;:&quot;GET /groups/listbypage/{sid}/{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/listbypage/{sid}/{page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/listbypage/&#x27; + groupSid + &#x27;/0/10/Name/asc&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f0ad38a-be9a-475f-a8c8-e82e19713669&quot;,&quot;parentUUID&quot;:&quot;17cdd958-27fb-40a5-b7a0-1eba4f44a400&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7f0ad38a-be9a-475f-a8c8-e82e19713669&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:32,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;8b0f9f4e-45a3-46be-93b7-812a3843124c&quot;,&quot;title&quot;:&quot;GET /groups/listprocessassociation/{sid}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/listprocessassociation/{sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/listprocessassociation/&#x27; + groupSid)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;929a068e-7b2f-4d17-8bea-bf9563133610&quot;,&quot;parentUUID&quot;:&quot;8b0f9f4e-45a3-46be-93b7-812a3843124c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;929a068e-7b2f-4d17-8bea-bf9563133610&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;a93c8749-bd68-4500-8a00-7f4ffeb051e3&quot;,&quot;title&quot;:&quot;Core Service Members&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/member.test.js&quot;,&quot;file&quot;:&quot;/test/member.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service Members \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83a5b62a-4ed6-4a08-a345-cbfb1cdc65f4&quot;,&quot;parentUUID&quot;:&quot;a93c8749-bd68-4500-8a00-7f4ffeb051e3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b5d3aed1-df42-48b8-82e5-e6630b45b776&quot;,&quot;title&quot;:&quot;{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/member.test.js&quot;,&quot;file&quot;:&quot;/test/member.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Members {page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:42,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/member/0/10/Name/Asc/script/?filter=&amp;include=3&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist\n// expect(res.).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18a1cf36-d190-4f66-ab70-a48645cfb08a&quot;,&quot;parentUUID&quot;:&quot;b5d3aed1-df42-48b8-82e5-e6630b45b776&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;18a1cf36-d190-4f66-ab70-a48645cfb08a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:42,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;b45ae991-e8b7-4740-b0da-5a63eb5723d2&quot;,&quot;title&quot;:&quot;Core Service myTasks&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/myTasks.test.js&quot;,&quot;file&quot;:&quot;/test/myTasks.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service myTasks \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13998c7c-176e-49c9-84a6-ae8b7a2f2024&quot;,&quot;parentUUID&quot;:&quot;b45ae991-e8b7-4740-b0da-5a63eb5723d2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;17570815-1fe3-406f-8976-a6e33bc43070&quot;,&quot;title&quot;:&quot;GEt {status}/{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/myTasks.test.js&quot;,&quot;file&quot;:&quot;/test/myTasks.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service myTasks GEt {status}/{page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:158,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/myTasks/status/0/10/Name/Asc&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8a6479ee-1c0a-42bd-a357-4af44e76f8c5&quot;,&quot;parentUUID&quot;:&quot;17570815-1fe3-406f-8976-a6e33bc43070&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8a6479ee-1c0a-42bd-a357-4af44e76f8c5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:158,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;7e428f1d-d731-4059-a7b8-c42c51fa1d7c&quot;,&quot;title&quot;:&quot;Core Service powerForm&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()\nlet test_yml = await getTestConfig();\ntest_data = test_yml.data;\n// //console.log(test_data);\nnew_role = &#x27;{ \&quot;Name\&quot;: \&quot;Qatest\&quot;, \&quot;ExtendedDescription\&quot;: \&quot;qa automated\&quot;, \&quot;OwnerSID\&quot;:&#x27; + test_data.object_sid + &#x27;, \&quot;OwnerType\&quot;: 2 }&#x27;\npowerform = {\n    CategorySID: test_data.category_sid,\n    Name: \&quot;test\&quot;,\n    PowerFormType: \&quot;0\&quot;,\n    Version: 1\n}\n// { \&quot;ID\&quot;: 9999, \&quot;Mode\&quot;: 2, \&quot;ObjectType\&quot;: 1, \&quot;RoleSID\&quot;: test_data.role_sid, \&quot;SID\&quot;: \&quot;90645d40-9de6-48b1-b689-0a610ef1d716\&quot;, \&quot;Permissions\&quot;: 0 }, { \&quot;ID\&quot;: 9999, \&quot;Mode\&quot;: 3, \&quot;ObjectType\&quot;: 1, \&quot;RoleSID\&quot;: \&quot;e513a6ec-cfea-4bcb-8b74-eebc3439c9fc\&quot;, \&quot;SID\&quot;: \&quot;4711a8f4-68be-4772-b389-0a610ef1d7fe\&quot;, \&quot;Permissions\&quot;: 0 }, { \&quot;ID\&quot;: 9999, \&quot;Mode\&quot;: 4, \&quot;ObjectType\&quot;: 1, \&quot;RoleSID\&quot;: \&quot;e513a6ec-cfea-4bcb-8b74-eebc3439c9fc\&quot;, \&quot;SID\&quot;: \&quot;b1e03457-e202-4a99-a389-0a610ef1d79d\&quot;, \&quot;Permissions\&quot;: 0 }, { \&quot;ID\&quot;: 0, \&quot;Mode\&quot;: 5, \&quot;ObjectType\&quot;: 1, \&quot;RoleSID\&quot;: \&quot;e513a6ec-cfea-4bcb-8b74-eebc3439c9fc\&quot;, \&quot;SID\&quot;: \&quot;f221751c-ba9f-4b19-9708-1f22372dffde\&quot;, \&quot;Permissions\&quot;: 1023 }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ccff18b-003c-41ba-9bc3-acc9ba185c70&quot;,&quot;parentUUID&quot;:&quot;7e428f1d-d731-4059-a7b8-c42c51fa1d7c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;64f8ded6-11d6-4edf-87de-7b349a0b7a49&quot;,&quot;title&quot;:&quot;POST /Powerform/save&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm POST /Powerform/save core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:60,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/powerform/save&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(powerform)\nexpect(res.status).to.equal(200);\nsid = res.body.SID\n//console.log(sid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;619aa7c1-b0cf-45e5-a9e6-22acecb40ee7&quot;,&quot;parentUUID&quot;:&quot;64f8ded6-11d6-4edf-87de-7b349a0b7a49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;619aa7c1-b0cf-45e5-a9e6-22acecb40ee7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:60,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;91ce4515-04c5-4bc1-a6e1-1b435b06ee74&quot;,&quot;title&quot;:&quot;GET /Powerform/{sid}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm GET /Powerform/{sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/powerform/&#x27; + sid)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ec29e1b-0af5-4734-9762-03d444220ded&quot;,&quot;parentUUID&quot;:&quot;91ce4515-04c5-4bc1-a6e1-1b435b06ee74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0ec29e1b-0af5-4734-9762-03d444220ded&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;e08ed1bd-fa41-468f-a631-2bad8ef68bc9&quot;,&quot;title&quot;:&quot;GET /Powerform/{sid}/detail&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm GET /Powerform/{sid}/detail core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/powerform/&#x27; + sid + &#x27;/detail&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e54d558d-94cf-4b08-9a6b-20f8c2ef1058&quot;,&quot;parentUUID&quot;:&quot;e08ed1bd-fa41-468f-a631-2bad8ef68bc9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e54d558d-94cf-4b08-9a6b-20f8c2ef1058&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;760eb5e7-8090-4790-8fb3-84ba2e745386&quot;,&quot;title&quot;:&quot;GET /Powerform/{sid}/delete&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm GET /Powerform/{sid}/delete core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/powerform/&#x27; + sid + &#x27;/delete&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af31fcf6-b64b-4945-afda-f9f7125bac58&quot;,&quot;parentUUID&quot;:&quot;760eb5e7-8090-4790-8fb3-84ba2e745386&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;af31fcf6-b64b-4945-afda-f9f7125bac58&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;279ce6d3-6087-4db4-8485-4cd418010eaa&quot;,&quot;title&quot;:&quot;Core Service Process&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service Process \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken();\nlet test_yml = await getTestConfig();\ntest_data = test_yml.data;\nprc = { Name: new Date().toISOString(), Description: \&quot;Qa Automation\&quot;, CategorySID: test_data.category_sid }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;74bea471-a3b9-4b3e-b3b8-c6018f18f123&quot;,&quot;parentUUID&quot;:&quot;279ce6d3-6087-4db4-8485-4cd418010eaa&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c9c4383a-354e-4ebf-822c-edaffa531723&quot;,&quot;title&quot;:&quot;POST /process​/create|delete&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process POST /process​/create|delete core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:226,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/process/create&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(prc)\np1 = res.body.SID;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f1a2912-4a3f-48a9-88af-7d870cdbf896&quot;,&quot;parentUUID&quot;:&quot;c9c4383a-354e-4ebf-822c-edaffa531723&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;core service | Delete&quot;,&quot;fullTitle&quot;:&quot;Core Service Process POST /process​/create|delete core service | Delete&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:383,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/process/&#x27; + p1 + &#x27;/delete&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nconsole.log(res);\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81eaf89e-153d-4fbb-a316-99136ac36da9&quot;,&quot;parentUUID&quot;:&quot;c9c4383a-354e-4ebf-822c-edaffa531723&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3f1a2912-4a3f-48a9-88af-7d870cdbf896&quot;,&quot;81eaf89e-153d-4fbb-a316-99136ac36da9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:609,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;ee1250b0-8321-40bb-b841-5d25e3ab7186&quot;,&quot;title&quot;:&quot;GET /process/{sid}/copy&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /process/{sid}/copy core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1771,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/processes/&#x27; + test_data.process_sid + &#x27;/copy&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            expect(res.status).to.equal(200);\n            //delete copied process\n            let del = await chai.request(newUrlBase)\n                .get(&#x27;/process/&#x27; + res.text + &#x27;/delete&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            expect(del.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bda1612a-75cb-4391-904d-2d003449a1eb&quot;,&quot;parentUUID&quot;:&quot;ee1250b0-8321-40bb-b841-5d25e3ab7186&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bda1612a-75cb-4391-904d-2d003449a1eb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1771,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;79609f89-38c2-4999-8975-fdcd87b6a081&quot;,&quot;title&quot;:&quot;GET /processes&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:109,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9bf581ff-97db-444a-a71b-a39ebfc983c0&quot;,&quot;parentUUID&quot;:&quot;79609f89-38c2-4999-8975-fdcd87b6a081&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9bf581ff-97db-444a-a71b-a39ebfc983c0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:109,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;40bd8692-af94-46ab-82c9-1ff97f86c1f1&quot;,&quot;title&quot;:&quot;GET /processes/{SID}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{SID} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;62283d85-375c-4de6-aaf2-4bfbdeabe0dd&quot;,&quot;parentUUID&quot;:&quot;40bd8692-af94-46ab-82c9-1ff97f86c1f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;62283d85-375c-4de6-aaf2-4bfbdeabe0dd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:32,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;5533f388-f223-4f0f-9b9f-9816df7b68d5&quot;,&quot;title&quot;:&quot;GET /processes/{sid}/detail&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{sid}/detail core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:42,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/detail&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5306b680-b663-482b-9fc8-76ed1a5d9165&quot;,&quot;parentUUID&quot;:&quot;5533f388-f223-4f0f-9b9f-9816df7b68d5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5306b680-b663-482b-9fc8-76ed1a5d9165&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:42,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;3c0f6b03-47df-45a2-b2cd-017dd5a84eb3&quot;,&quot;title&quot;:&quot;GET /processes/{sid}/name&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{sid}/name core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/name&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.text)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0a58ef9-e8fe-4f32-93b5-2d9a1d745f41&quot;,&quot;parentUUID&quot;:&quot;3c0f6b03-47df-45a2-b2cd-017dd5a84eb3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d0a58ef9-e8fe-4f32-93b5-2d9a1d745f41&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;6f9db904-d7c0-482a-bb77-74eb3a046b74&quot;,&quot;title&quot;:&quot;GET ​/processes​/{sid}​/summary&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET ​/processes​/{sid}​/summary core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/summary&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.text)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;081d331b-781c-431f-816c-5569919f235d&quot;,&quot;parentUUID&quot;:&quot;6f9db904-d7c0-482a-bb77-74eb3a046b74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;081d331b-781c-431f-816c-5569919f235d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;3048da80-a86d-4fee-9327-4d9bff49432b&quot;,&quot;title&quot;:&quot;​GET /processes​/{process_sid}​/tasks&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process ​GET /processes​/{process_sid}​/tasks core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/tasks&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7dc15f37-84db-4244-8dd1-6668ce292066&quot;,&quot;parentUUID&quot;:&quot;3048da80-a86d-4fee-9327-4d9bff49432b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7dc15f37-84db-4244-8dd1-6668ce292066&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:28,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;9dbd52dc-2b63-4366-b29a-c02aae47d6b2&quot;,&quot;title&quot;:&quot;GET /processes/{process_sid}/tasks/{task_sid}/rules&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{process_sid}/tasks/{task_sid}/rules core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:87,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/tasks/&#x27; + test_data.task_sid + &#x27;/rules&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5f5107f-43ac-40a1-8ab2-7e1cff98d2b0&quot;,&quot;parentUUID&quot;:&quot;9dbd52dc-2b63-4366-b29a-c02aae47d6b2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a5f5107f-43ac-40a1-8ab2-7e1cff98d2b0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:87,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;23046cf0-aaaf-48f2-8ad8-a831285cd1ef&quot;,&quot;title&quot;:&quot;POST /processes/{process_sid}/tasks/{task_sid}/rules/update | reorder | delete &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process POST /processes/{process_sid}/tasks/{task_sid}/rules/update | reorder | delete  core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:60,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/tasks/&#x27; + test_data.task_sid + &#x27;/rules/update/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(rule)\nsids.one = res.body.SID;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09c756a8-1d3f-4e02-a0ac-7a5e61ec4626&quot;,&quot;parentUUID&quot;:&quot;23046cf0-aaaf-48f2-8ad8-a831285cd1ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;core service | reorder&quot;,&quot;fullTitle&quot;:&quot;Core Service Process POST /processes/{process_sid}/tasks/{task_sid}/rules/update | reorder | delete  core service | reorder&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let reorder = { \&quot;SID\&quot;: sids.two, \&quot;Ordinal\&quot;: 2, \&quot;ConditionType\&quot;: 1, \&quot;MatchGuid\&quot;: \&quot;\&quot;, \&quot;RecipientSID\&quot;: null, \&quot;DestinationAction\&quot;: \&quot;0\&quot; }\nlet res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/tasks/&#x27; + test_data.task_sid + &#x27;/rules/reorder/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(reorder)\n//console.log(res.body)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a837e90c-928e-4a37-a1b2-39cc7f7d83a0&quot;,&quot;parentUUID&quot;:&quot;23046cf0-aaaf-48f2-8ad8-a831285cd1ef&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;09c756a8-1d3f-4e02-a0ac-7a5e61ec4626&quot;,&quot;a837e90c-928e-4a37-a1b2-39cc7f7d83a0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:95,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;70868ecb-2f1c-41ed-bb71-8f65b42b4694&quot;,&quot;title&quot;:&quot;Core Service processes/tasks&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()\nlet test_yml = await getTestConfig();\ntest_data = test_yml.data;\nrecipient = [{ \&quot;BaseObjectSID\&quot;: \&quot;\&quot;, \&quot;ContactType\&quot;: 2, \&quot;ReferenceObjectSID\&quot;: \&quot;\&quot;, \&quot;SID\&quot;: test_data.contact_sid }]&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb8bfea6-c31f-49d8-a352-15b82d3cd52b&quot;,&quot;parentUUID&quot;:&quot;70868ecb-2f1c-41ed-bb71-8f65b42b4694&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f7e3008c-121b-450d-9868-dac85914eae3&quot;,&quot;title&quot;:&quot;GET {sid}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {sid} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:66,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.task_sid)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c54bccf-1cf2-4c4e-91f4-5fd4b44eb401&quot;,&quot;parentUUID&quot;:&quot;f7e3008c-121b-450d-9868-dac85914eae3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3c54bccf-1cf2-4c4e-91f4-5fd4b44eb401&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:66,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;3e62a8a7-3674-42a9-b157-e0d7c4dc4885&quot;,&quot;title&quot;:&quot;GET {task_sid}/copy&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/copy core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:117,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/processes/tasks/&#x27; + test_data.task_sid + &#x27;/copy&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            //console.log(res.body);\n            coreResult = res.body;\n            //console.log(res.body);\n            expect(res.status).to.equal(200);\n            expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d96770a2-97a9-43d3-91a3-88e6cebbbfb7&quot;,&quot;parentUUID&quot;:&quot;3e62a8a7-3674-42a9-b157-e0d7c4dc4885&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d96770a2-97a9-43d3-91a3-88e6cebbbfb7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:117,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;9f3f7272-b682-4aaf-9300-c170f42ef81e&quot;,&quot;title&quot;:&quot;GET {task_sid}/notification&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/notification core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/notification&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;019fc0d1-deef-4559-ab0f-05242052759a&quot;,&quot;parentUUID&quot;:&quot;9f3f7272-b682-4aaf-9300-c170f42ef81e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;019fc0d1-deef-4559-ab0f-05242052759a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;0d9356ea-0a5c-48e0-8f00-0026b83be5f2&quot;,&quot;title&quot;:&quot;GET {task_sid}/notification/restore&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/notification/restore core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:54,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/notification/restore&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9dbecefe-9cc1-48bb-9a9a-9b0883df84b6&quot;,&quot;parentUUID&quot;:&quot;0d9356ea-0a5c-48e0-8f00-0026b83be5f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9dbecefe-9cc1-48bb-9a9a-9b0883df84b6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:54,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;0ec86e87-861e-40cb-9a68-d5e0f5f47142&quot;,&quot;title&quot;:&quot;GET {task_sid}/notification/{enabledisable}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/notification/{enabledisable} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/notification/enabled&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a22e3e2e-35ee-4c44-b383-4137ebfda712&quot;,&quot;parentUUID&quot;:&quot;0ec86e87-861e-40cb-9a68-d5e0f5f47142&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a22e3e2e-35ee-4c44-b383-4137ebfda712&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;a55380e4-efba-480b-854e-515359bb18e9&quot;,&quot;title&quot;:&quot;POST notification/save&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks POST notification/save core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/tasks/notification/save&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(notification)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5901b730-7d2c-4758-86dd-0231c282828c&quot;,&quot;parentUUID&quot;:&quot;a55380e4-efba-480b-854e-515359bb18e9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5901b730-7d2c-4758-86dd-0231c282828c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;9a73971d-c5cb-4629-9ce3-f201e33ff379&quot;,&quot;title&quot;:&quot;GET {task_sid}/notification/advancedsettings&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/notification/advancedsettings core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/notification/advancesettings&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = JSON.stringify(res.body);\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ca2682e-24f4-4444-90e8-70d4cc08e235&quot;,&quot;parentUUID&quot;:&quot;9a73971d-c5cb-4629-9ce3-f201e33ff379&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6ca2682e-24f4-4444-90e8-70d4cc08e235&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;cb48d2e2-3a44-4f4e-a903-65f277bee65a&quot;,&quot;title&quot;:&quot;GET {task_sid}/recipients&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/recipients core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:82,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipients/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7036853b-f5f3-4668-b3fb-1592b59b280b&quot;,&quot;parentUUID&quot;:&quot;cb48d2e2-3a44-4f4e-a903-65f277bee65a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7036853b-f5f3-4668-b3fb-1592b59b280b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:82,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;f7b8b35e-83f4-43c3-8d10-89f6a795d04f&quot;,&quot;title&quot;:&quot;POST {task_sid}/recipients/add&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks POST {task_sid}/recipients/add core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipients/add&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(recipient);\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8aa9190b-df32-4a67-ab32-610d765c32ad&quot;,&quot;parentUUID&quot;:&quot;f7b8b35e-83f4-43c3-8d10-89f6a795d04f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8aa9190b-df32-4a67-ab32-610d765c32ad&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:38,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;529ef173-a9f8-425c-b232-064f2b4f8ca8&quot;,&quot;title&quot;:&quot;POST {task_sid}/recipients/remove&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks POST {task_sid}/recipients/remove core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:34,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipients/remove&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(recipient);\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9d094b1-a37a-4020-b72b-b8dc4abdbdc0&quot;,&quot;parentUUID&quot;:&quot;529ef173-a9f8-425c-b232-064f2b4f8ca8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c9d094b1-a37a-4020-b72b-b8dc4abdbdc0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:34,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;13bc906b-06cb-4a26-ab79-ec08757fe521&quot;,&quot;title&quot;:&quot;GET {task_sid}/recipsettings&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/recipsettings core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipsettings/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = JSON.stringify(res.body);\nexpect(res.status).to.equal(200);\n// expect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54b23b15-dfc8-4099-910c-a5e504050156&quot;,&quot;parentUUID&quot;:&quot;13bc906b-06cb-4a26-ab79-ec08757fe521&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;54b23b15-dfc8-4099-910c-a5e504050156&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;1a69b51d-14b0-4b47-bf96-85aa7fdfe6a3&quot;,&quot;title&quot;:&quot;GET task_sid}/recipients/dynamic&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET task_sid}/recipients/dynamic core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipients/dynamic/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = JSON.stringify(res.body);\nexpect(res.status).to.equal(200);\nexpect(res.body.TotalItemCnt).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b71c636-8bd6-430b-8e63-05d89ced9ec5&quot;,&quot;parentUUID&quot;:&quot;1a69b51d-14b0-4b47-bf96-85aa7fdfe6a3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6b71c636-8bd6-430b-8e63-05d89ced9ec5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:26,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;294dbc7b-5581-499b-a59d-3ce2a4d170bd&quot;,&quot;title&quot;:&quot;Core Service systemmessages&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d69ba4a-7263-48e5-9213-679ac7df8b45&quot;,&quot;parentUUID&quot;:&quot;294dbc7b-5581-499b-a59d-3ce2a4d170bd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5e778259-716c-4759-a7bb-23857167b1fd&quot;,&quot;title&quot;:&quot;POST /systemmessages/save&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should save a systemmessage&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages POST /systemmessages/save it should save a systemmessage&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:69,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .post(&#x27;/systemmessages/save/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send(testMsg)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\n\n// verify systemMessage is in the list\nres = await chai.request(newUrlBase)\n      .get(&#x27;/systemmessages/list/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst idx = res.body.Items.findIndex(item =&gt; item.MessageBody == testMsg.MessageBody);\nexpect(idx).to.be.greaterThan(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9884db3-5e11-4b0a-9db4-a3baa77af272&quot;,&quot;parentUUID&quot;:&quot;5e778259-716c-4759-a7bb-23857167b1fd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e9884db3-5e11-4b0a-9db4-a3baa77af272&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:69,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;b3da789a-2fed-4c3c-9c9e-856e09818052&quot;,&quot;title&quot;:&quot;GET /systemmessages/list&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all systemmessages&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages GET /systemmessages/list it should GET all systemmessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .get(&#x27;/systemmessages/list/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n  \ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ebea5ba2-ffb0-4851-b3d3-2c2e8da24be2&quot;,&quot;parentUUID&quot;:&quot;b3da789a-2fed-4c3c-9c9e-856e09818052&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ebea5ba2-ffb0-4851-b3d3-2c2e8da24be2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;9787ee14-37f5-496c-a47a-0fc5993d44b7&quot;,&quot;title&quot;:&quot;GET /systemmessages/active/list&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET active systemmessages&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages GET /systemmessages/active/list it should GET active systemmessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .get(&#x27;/systemmessages/active/list/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n  \ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea2f59e9-a908-429a-8122-42d5721e091e&quot;,&quot;parentUUID&quot;:&quot;9787ee14-37f5-496c-a47a-0fc5993d44b7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ea2f59e9-a908-429a-8122-42d5721e091e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;cca7fad3-3880-48ae-b74d-450292b1d596&quot;,&quot;title&quot;:&quot;/systemmessages/{sid}}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET system message by SID&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages /systemmessages/{sid}} it should GET system message by SID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:42,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n             .get(&#x27;/systemmessages/list/script/&#x27;)\n             .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n       \n             expect(res.status).to.equal(200);\n             expect(res.body.Items).to.exist;\n             const testSystemMsgSID = res.body.Items[0].SID;\n             res = await chai.request(newUrlBase)\n             .get(`/systemmessages/${testSystemMsgSID}/script/`)\n             .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n             expect(res.status).to.equal(200);\n             expect(res.body.SID).to.equal(testSystemMsgSID);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6bb10964-55b0-4802-8d01-ca2763b7e417&quot;,&quot;parentUUID&quot;:&quot;cca7fad3-3880-48ae-b74d-450292b1d596&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6bb10964-55b0-4802-8d01-ca2763b7e417&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:42,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;1a5f7ccf-ed07-4235-b35a-ccd61b2dd106&quot;,&quot;title&quot;:&quot;GET /systemmessages/delete&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE system message&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages GET /systemmessages/delete it should DELETE system message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:45,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/systemmessages/list/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n      \nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst testSystemMsgSID = res.body.Items[0].SID;\nres = await chai.request(newUrlBase)\n  .post(&#x27;/systemmessages/delete/script/&#x27;) \n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n  .send([testSystemMsgSID])\n        \nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\nexpect(res.text).to.equal(&#x27;1&#x27;);\n        \n// verify that system message is not in the list anymore\nres = await chai.request(newUrlBase)\n      .get(&#x27;/systemmessages/list/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst idx = res.body.Items.findIndex(item =&gt; item.SID == testSystemMsgSID);\nexpect(idx).to.equal(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c546e4e2-ffb2-456e-850e-8d5daeff840c&quot;,&quot;parentUUID&quot;:&quot;1a5f7ccf-ed07-4235-b35a-ccd61b2dd106&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c546e4e2-ffb2-456e-850e-8d5daeff840c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:45,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;b12f0368-6b81-4365-9668-297894bb2f03&quot;,&quot;title&quot;:&quot;Core Service System Process&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/systemProcess.test.js&quot;,&quot;file&quot;:&quot;/test/systemProcess.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service System Process \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de1c337e-dc59-4e1d-84c3-6b448df87ee5&quot;,&quot;parentUUID&quot;:&quot;b12f0368-6b81-4365-9668-297894bb2f03&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cf601d61-b91e-4a48-841b-173a9a3aac7d&quot;,&quot;title&quot;:&quot;GET S/SystemProcess/list&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/systemProcess.test.js&quot;,&quot;file&quot;:&quot;/test/systemProcess.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should save a systemmessage&quot;,&quot;fullTitle&quot;:&quot;Core Service System Process GET S/SystemProcess/list it should save a systemmessage&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/SystemProcess/list&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd9371e7-235e-4a05-88e3-0fb5c29c4c24&quot;,&quot;parentUUID&quot;:&quot;cf601d61-b91e-4a48-841b-173a9a3aac7d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bd9371e7-235e-4a05-88e3-0fb5c29c4c24&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;10fc621d-80c4-4316-b395-8566518743be&quot;,&quot;title&quot;:&quot;Core Service system Settings&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/systemSettings.test.js&quot;,&quot;file&quot;:&quot;/test/systemSettings.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service system Settings \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61514f8b-0cad-40f8-983a-da07c127fd25&quot;,&quot;parentUUID&quot;:&quot;10fc621d-80c4-4316-b395-8566518743be&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0f2fcfbc-6eed-4a30-8a1d-da35c846370d&quot;,&quot;title&quot;:&quot;GET /systemsettings/list&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/systemSettings.test.js&quot;,&quot;file&quot;:&quot;/test/systemSettings.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service system Settings GET /systemsettings/list core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:55,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/systemsettings/list/script/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n// expect(res.body.InstanceSID).to.exist\ncoreResult = res.body;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c86744f-8b36-41d2-998b-042e988b89bb&quot;,&quot;parentUUID&quot;:&quot;0f2fcfbc-6eed-4a30-8a1d-da35c846370d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4c86744f-8b36-41d2-998b-042e988b89bb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:55,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;91be39ef-e30c-43c4-a133-79823582402d&quot;,&quot;title&quot;:&quot;Core Service Tabs&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/tabs.test.js&quot;,&quot;file&quot;:&quot;/test/tabs.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service Tabs \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7891cfc7-9f81-4312-bb97-5fc904400ce2&quot;,&quot;parentUUID&quot;:&quot;91be39ef-e30c-43c4-a133-79823582402d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2c47235b-3e35-4bdd-9c40-de0b9c32853c&quot;,&quot;title&quot;:&quot;GET {sid}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/tabs.test.js&quot;,&quot;file&quot;:&quot;/test/tabs.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service Tabs GET {sid} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/tabs/5ffbf397-8b3a-4d06-a773-58158e39d46f/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Banner).to.exist\ncoreResult = res.body;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ace52aec-79e6-4fb9-88fd-112a2b91c419&quot;,&quot;parentUUID&quot;:&quot;2c47235b-3e35-4bdd-9c40-de0b9c32853c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ace52aec-79e6-4fb9-88fd-112a2b91c419&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;3870a059-4f9f-4a65-ae6c-0fc2dba5f99a&quot;,&quot;title&quot;:&quot;GET {sid}/delete&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/tabs.test.js&quot;,&quot;file&quot;:&quot;/test/tabs.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service &quot;,&quot;fullTitle&quot;:&quot;Core Service Tabs GET {sid}/delete core-service &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/tabs/5ffbf397-8b3a-4d06-a773-58158e39d46f/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Banner).to.exist\ncoreResult = res.body;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e9e0c3e-b655-4299-8902-93a705250be4&quot;,&quot;parentUUID&quot;:&quot;3870a059-4f9f-4a65-ae6c-0fc2dba5f99a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8e9e0c3e-b655-4299-8902-93a705250be4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;096766af-9e09-4238-b8ce-aa348c07e3f3&quot;,&quot;title&quot;:&quot;Core Service Utilities&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/utilities.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service Utilities \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;52ffb75a-d1ad-4c98-9c5e-07394a2fae7b&quot;,&quot;parentUUID&quot;:&quot;096766af-9e09-4238-b8ce-aa348c07e3f3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ba685d12-b138-48f5-a081-868648c9a666&quot;,&quot;title&quot;:&quot;locale&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Utilities locale core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/Utilities/locales/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            //console.log(res.body);\n            coreResult = res.body;\n            expect(res.status).to.equal(200);\n            // expect(res.text).to.exist;\n            // expect(res.text).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61269138-1432-4c02-91a9-2d5d776ed2bf&quot;,&quot;parentUUID&quot;:&quot;ba685d12-b138-48f5-a081-868648c9a666&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;61269138-1432-4c02-91a9-2d5d776ed2bf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;cb8d3ac4-4a41-403d-9084-5ef4c671f32c&quot;,&quot;title&quot;:&quot;GET /Utilities/timezone&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Utilities GET /Utilities/timezone core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/Utilities/timezone&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body[0]).to.be.an(&#x27;array&#x27;).that.does.include(&#x27;Etc/GMT+12&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1abdc87-0830-4631-888f-e3ef86ccdfc7&quot;,&quot;parentUUID&quot;:&quot;cb8d3ac4-4a41-403d-9084-5ef4c671f32c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e1abdc87-0830-4631-888f-e3ef86ccdfc7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;f70c56e1-f421-447a-92a5-a1f4d333027a&quot;,&quot;title&quot;:&quot;GET /Utilities/languages&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Utilities GET /Utilities/languages core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/Utilities/languages/script/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body[0].indexOf(&#x27;US English&#x27;)).not.to.equal(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9cada19-5fff-4b9d-ab4b-4ab8eeeb14e6&quot;,&quot;parentUUID&quot;:&quot;f70c56e1-f421-447a-92a5-a1f4d333027a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e9cada19-5fff-4b9d-ab4b-4ab8eeeb14e6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;cf9e9d05-8e2e-4fd1-a61d-ac7890391216&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a56a03a3-949f-408d-8aa4-54c18a3a6407&quot;,&quot;title&quot;:&quot;Integrify Libs JWT Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a24fcc15-baef-4e53-bd1a-31280d9056bf&quot;,&quot;parentUUID&quot;:&quot;a56a03a3-949f-408d-8aa4-54c18a3a6407&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;97ce6467-7333-4430-a21b-c23857fe0d61&quot;,&quot;title&quot;:&quot;getSystemToken&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a system token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests getSystemToken should return a system token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nlet token = await jwt.getSystemToken(process.env.INTEGRIFY_ENV_TOKEN, tenant)\nexpect(token).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dfd22ab2-41d4-42b3-bf21-fa3638d189ff&quot;,&quot;parentUUID&quot;:&quot;97ce6467-7333-4430-a21b-c23857fe0d61&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dfd22ab2-41d4-42b3-bf21-fa3638d189ff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d065e24b-911b-48bf-aeb8-6009441cca75&quot;,&quot;title&quot;:&quot;createRefreshToken&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a refresh token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests createRefreshToken should return a refresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet exists = await redis.zrankAsync(tenant + \&quot;.refreshTokens\&quot;, refreshToken)\nexpect(refreshToken).to.exist;\nexpect(exists !== null).to.be.true&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10ffb34c-95d7-4ec0-bc1a-7882712a6f16&quot;,&quot;parentUUID&quot;:&quot;d065e24b-911b-48bf-aeb8-6009441cca75&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;10ffb34c-95d7-4ec0-bc1a-7882712a6f16&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f93de52e-1d42-4da7-b6f3-ec473fe40781&quot;,&quot;title&quot;:&quot;verifyRefreshToken&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true for the non-expired token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests verifyRefreshToken should return true for the non-expired token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet exists = await jwt.verifyRefreshToken(tenant, refreshToken, options)\nexpect(exists).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b48809f-939f-484f-bf10-92b639a8958c&quot;,&quot;parentUUID&quot;:&quot;f93de52e-1d42-4da7-b6f3-ec473fe40781&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false for the expired token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests verifyRefreshToken should return false for the expired token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5005,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\nlet refreshToken = await jwt.createRefreshToken(tenant, options)\nawait delay(5000);\nlet exists = await jwt.verifyRefreshToken(tenant, refreshToken, options)\nexpect(exists).to.be.false\nexists = await redis.zrankAsync(tenant + \&quot;.refreshTokens\&quot;, refreshToken)\nexpect(exists === null).to.be.true&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00cc87ff-fa11-44b4-85b0-aa5b5f7508ab&quot;,&quot;parentUUID&quot;:&quot;f93de52e-1d42-4da7-b6f3-ec473fe40781&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4b48809f-939f-484f-bf10-92b639a8958c&quot;,&quot;00cc87ff-fa11-44b4-85b0-aa5b5f7508ab&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5008,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;99b388d9-0ea4-4dc0-960f-16b9f222e696&quot;,&quot;title&quot;:&quot;issueJwt&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a JWT&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests issueJwt should return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\noptions.expiresInAmount = 15\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\n//let exists = await jwt.verifyRefreshToken(tenant, refreshToken, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\noptions.expiresInAmount = 5\nexpect(token).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e878761b-497d-45c9-9f30-f9cc2d5b591c&quot;,&quot;parentUUID&quot;:&quot;99b388d9-0ea4-4dc0-960f-16b9f222e696&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e878761b-497d-45c9-9f30-f9cc2d5b591c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ff451791-4f90-4ff1-9b50-ca293806a51d&quot;,&quot;title&quot;:&quot;verifyJwt&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a JWT&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests verifyJwt should return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\nlet verified = jwt.verifyJwt(token, options);\nexpect(verified).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a59624b-ca14-4420-95d6-b16b732af855&quot;,&quot;parentUUID&quot;:&quot;ff451791-4f90-4ff1-9b50-ca293806a51d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail for an expired JWT&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests verifyJwt should fail for an expired JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5006,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\nawait delay(5000);\nlet verified, error;\ntry {\n   verified = await jwt.verifyJwt(token, options)\n} catch(e) {\n    error = e;\n}\nexpect(error).to.exist\nexpect(error.name).to.equal(\&quot;TokenExpiredError\&quot;)\nexpect(verified).to.not.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;743e15f1-5d6d-42f7-acf9-ef70e0e8a98c&quot;,&quot;parentUUID&quot;:&quot;ff451791-4f90-4ff1-9b50-ca293806a51d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5a59624b-ca14-4420-95d6-b16b732af855&quot;,&quot;743e15f1-5d6d-42f7-acf9-ef70e0e8a98c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5010,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ce7f1b22-c5bf-4035-a651-e577ccfd3d83&quot;,&quot;title&quot;:&quot;renewJwt&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a new JWT using a valid refresh token and an expired token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests renewJwt should return a new JWT using a valid refresh token and an expired token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3010,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\noptions.expiresInAmount = 5;\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\nawait delay(3000); //let the token JWT time out\nlet error;\ntry {\n    verified = await jwt.verifyJwt(token, options)\n } catch(e) {\n     error = e;\n}\nexpect(error).to.exist\nexpect(error.name).to.equal(\&quot;TokenExpiredError\&quot;)\ntoken = await jwt.renewJwt(token,refreshToken, options)\nexpect(token).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f815eca9-fb24-43be-b7ed-e374705837d9&quot;,&quot;parentUUID&quot;:&quot;ce7f1b22-c5bf-4035-a651-e577ccfd3d83&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to return a new JWT using a invalid refresh token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests renewJwt should fail to return a new JWT using a invalid refresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5009,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\noptions.expiresInAmount = 2;\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\nawait delay(5000); //let the token JWT time out\nlet error;\ntry {\n    verified = await jwt.verifyJwt(token, options)\n } catch(e) {\n     error = e;\n}\nexpect(error).to.exist\nexpect(error.name).to.equal(\&quot;TokenExpiredError\&quot;)\ntry {\n    token = await jwt.renewJwt(token,refreshToken, options)\n} catch(e) {\n    error = e\n}\nexpect(error).to.exist\nexpect(error.name).to.equal(\&quot;TokenExpiredError\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27271abf-f0cf-4661-9db4-a87bd3c4b0da&quot;,&quot;parentUUID&quot;:&quot;ce7f1b22-c5bf-4035-a651-e577ccfd3d83&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f815eca9-fb24-43be-b7ed-e374705837d9&quot;,&quot;27271abf-f0cf-4661-9db4-a87bd3c4b0da&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8019,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6723a6dc-a761-49f7-a49e-1083df086156&quot;,&quot;title&quot;:&quot;reIssueJwt&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a new JWT using a valid refresh token and an Contact&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests reIssueJwt should return a new JWT using a valid refresh token and an Contact&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\noptions.expiresInAmount = 5;\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\ntoken = await jwt.reIssueJwt(Contact,refreshToken, options)\nexpect(token).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2f7c4ce-9b43-477c-964c-0b7902e3eeb2&quot;,&quot;parentUUID&quot;:&quot;6723a6dc-a761-49f7-a49e-1083df086156&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c2f7c4ce-9b43-477c-964c-0b7902e3eeb2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ce32e621-bb8e-41a0-b3c2-4498e54a3b83&quot;,&quot;title&quot;:&quot;Integrify Libs Config Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/config/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9bdc4789-8527-4bc3-8701-7448080b244b&quot;,&quot;title&quot;:&quot;Config&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/config/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config/config.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Config Tests Config \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df5b87cf-c18f-4973-8e5c-fd4147b7c800&quot;,&quot;parentUUID&quot;:&quot;9bdc4789-8527-4bc3-8701-7448080b244b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;618af8fd-7ffe-4ade-8212-0dab332a486a&quot;,&quot;title&quot;:&quot;get a config from redis&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/config/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should have config.mongo&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Config Tests Config get a config from redis should have config.mongo&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(config.mongo).to.exist;\n                //expect(true).to.equal(true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c3afeba-918c-4ecf-8b6e-599afe5ffdbb&quot;,&quot;parentUUID&quot;:&quot;618af8fd-7ffe-4ade-8212-0dab332a486a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5c3afeba-918c-4ecf-8b6e-599afe5ffdbb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d8f564d9-be92-4edc-92f5-4059d6076619&quot;,&quot;title&quot;:&quot;Integrify Libs Logger Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/logger/logger.test.js&quot;,&quot;file&quot;:&quot;/test/integration/logger/logger.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;65e57620-b746-471b-ad87-086f3ce87efb&quot;,&quot;title&quot;:&quot;Logger&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/logger/logger.test.js&quot;,&quot;file&quot;:&quot;/test/integration/logger/logger.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Logger Tests Logger \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nconfig = config.test;\nthis.timeout(105000);\n//let deletes = await redis.delAsync([`${session.tenant}.permissions.${session.user_sid}`]);\n//cnsole.log(deletes)\n//process.env.DEBUG=\&quot;knex:query\&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89d41766-f8ff-462a-8367-bb8e322878fe&quot;,&quot;parentUUID&quot;:&quot;65e57620-b746-471b-ad87-086f3ce87efb&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;06198524-ed0f-4848-b5e1-f680d39f6fbe&quot;,&quot;title&quot;:&quot;info&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/logger/logger.test.js&quot;,&quot;file&quot;:&quot;/test/integration/logger/logger.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should connect log a message&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Logger Tests Logger info should connect log a message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;logger.info(config.tenantOne.tenantId);\n  \nexpect(logger).to.exist;\n              \n//expect(true).to.equal(true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;963c8673-b63c-4c88-af41-31e809b47178&quot;,&quot;parentUUID&quot;:&quot;06198524-ed0f-4848-b5e1-f680d39f6fbe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;963c8673-b63c-4c88-af41-31e809b47178&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;90cb4fe9-0e2b-4981-a937-7fddfec5bf2e&quot;,&quot;title&quot;:&quot;Integrify Libs Parse JWT Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/middleware/parseJWT.test.js&quot;,&quot;file&quot;:&quot;/test/integration/middleware/parseJWT.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Parse JWT Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);        config = await Config.getConfig()\nContact = {\n    contactSid: \&quot;1234\&quot;,\n    userName: \&quot;testuser\&quot;,\n    tenant: config.test.tenantOne.tenantId,\n    email: \&quot;test@test.com\&quot;,\n    name: \&quot;Test User\&quot;\n}\nrefreshTokenPayload = {userName: Contact.userName, contactSid: Contact.contactSid}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79dfc8a9-c364-4902-8ea5-9685efc3e4df&quot;,&quot;parentUUID&quot;:&quot;90cb4fe9-0e2b-4981-a937-7fddfec5bf2e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3ad73aeb-9ac4-4787-96b5-c85c32359aed&quot;,&quot;title&quot;:&quot;parse token&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/middleware/parseJWT.test.js&quot;,&quot;file&quot;:&quot;/test/integration/middleware/parseJWT.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return extract data from a token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Parse JWT Tests parse token should return extract data from a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload)\n\ntoken = jsonwebtoken.sign(Contact, config.jwtSecret, {\&quot;audience\&quot;: config.test.tenantOne.tenantId});\nlet req = {headers: {authorization: \&quot;Bearer \&quot; + token}, cookies: {integrifyRefreshToken: refreshToken}}\nawait parseJWT(req, {status:200}, function(){})\nexpect(req.oauth.profile).to.exist;\nexpect(req.oauth.profile.sid).to.equal(\&quot;1234\&quot;);\nexpect(req.oauth.profile.user_name).to.equal(\&quot;testuser\&quot;);\nexpect(req.oauth.tenant).to.equal(config.test.tenantOne.tenantId)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c608dd84-fae4-4d56-849f-bf7aba1d93ba&quot;,&quot;parentUUID&quot;:&quot;3ad73aeb-9ac4-4787-96b5-c85c32359aed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c608dd84-fae4-4d56-849f-bf7aba1d93ba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000},{&quot;uuid&quot;:&quot;cc4e27c3-f506-4617-b72b-e9acff41a5df&quot;,&quot;title&quot;:&quot;auto refresh and parse token&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/middleware/parseJWT.test.js&quot;,&quot;file&quot;:&quot;/test/integration/middleware/parseJWT.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return extract data from a token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Parse JWT Tests auto refresh and parse token should return extract data from a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20025,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let refreshToken = await jwt.createRefreshToken(Contact.tenant, refreshTokenPayload)\n\ntoken = jsonwebtoken.sign(Contact, config.jwtSecret, {\&quot;audience\&quot;: Contact.tenant, expiresIn:1});\n           \nawait delay(20000)\nlet req = {headers: {authorization: \&quot;Bearer \&quot; + token}, cookies: {integrifyRefreshToken: refreshToken}}\n          \nlet mockRes = await mocks.mockResponse();\n\nawait parseJWT(req, mockRes, function(){})\nexpect(req.oauth.profile).to.exist;\nexpect(req.oauth.profile.sid).to.equal(\&quot;1234\&quot;);\nexpect(req.oauth.profile.user_name).to.equal(\&quot;testuser\&quot;);\nexpect(req.oauth.tenant).to.equal(config.test.tenantOne.tenantId)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d76bb15-68ce-4314-8313-9af34459baf1&quot;,&quot;parentUUID&quot;:&quot;cc4e27c3-f506-4617-b72b-e9acff41a5df&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0d76bb15-68ce-4314-8313-9af34459baf1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20025,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000},{&quot;uuid&quot;:&quot;a9022893-5cdc-4f3e-b873-8454abdb27f2&quot;,&quot;title&quot;:&quot;use system token&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/middleware/parseJWT.test.js&quot;,&quot;file&quot;:&quot;/test/integration/middleware/parseJWT.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return extract data from a token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Parse JWT Tests use system token should return extract data from a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let req = {headers: {\&quot;integrify-system-token\&quot;: config.test.tenantOne.tenantId + \&quot; \&quot; +  process.env.INTEGRIFY_ENV_TOKEN}}\nawait parseJWT(req, {status:200}, function(){})\nexpect(req.oauth.profile).to.exist;\nexpect(req.oauth.profile.sid).to.equal(\&quot;d8c469c3-f781-4179-a09c-6d148885fb30\&quot;);\nexpect(req.oauth.profile.user_name).to.equal(\&quot;Integrify\&quot;);\nexpect(req.oauth.tenant).to.equal(config.test.tenantOne.tenantId)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25ddc8fb-1db6-4a69-908b-da0f1bac9eec&quot;,&quot;parentUUID&quot;:&quot;a9022893-5cdc-4f3e-b873-8454abdb27f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;25ddc8fb-1db6-4a69-908b-da0f1bac9eec&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000},{&quot;uuid&quot;:&quot;c5f805e9-3ae3-42f1-93a6-818eac0b4456&quot;,&quot;title&quot;:&quot;Integrify Libs Mongeese Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/mongeese/db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/mongeese/db.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c5241a7f-0e35-4e9e-96b9-8be03babe2ef&quot;,&quot;title&quot;:&quot;Mongeese&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/mongeese/db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/mongeese/db.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Mongeese Tests Mongeese \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nconsole.log(config)\nconfig = config.test;\nthis.timeout(105000);\n//let deletes = await redis.delAsync([`${session.tenant}.permissions.${session.user_sid}`]);\n//cnsole.log(deletes)\n//process.env.DEBUG=\&quot;knex:query\&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8531fb94-5e5a-458f-8972-4dee0aad53dc&quot;,&quot;parentUUID&quot;:&quot;c5241a7f-0e35-4e9e-96b9-8be03babe2ef&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;209497d5-a4ef-4732-8610-08c47b1c6d2f&quot;,&quot;title&quot;:&quot;mongoConn&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/mongeese/db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/mongeese/db.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should connect to mongo based on a tenant id&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Mongeese Tests Mongeese mongoConn should connect to mongo based on a tenant id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const tenantId = await config.tenantOne.tenantId;\nvar db = await mongeese.getConn(tenantId);\n    \nexpect(db).to.exist;\nexpect(db.name).to.equal(tenantId);\nexpect(db.readyState).to.equal(2);\n//expect(true).to.equal(true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71ab8797-a4d2-4f7e-ad17-4ed9d947d07c&quot;,&quot;parentUUID&quot;:&quot;209497d5-a4ef-4732-8610-08c47b1c6d2f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;71ab8797-a4d2-4f7e-ad17-4ed9d947d07c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;87cce40b-4144-413b-934c-8893e6fa04c7&quot;,&quot;title&quot;:&quot;Integrify Libs Permissions Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/permissions/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/permissions/permissions.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\nlet config = await Config.getConfig();\nconfig = config.test;\nsession = {user_sid: config.tenantOne.adminUser.sid.toLowerCase(), user_name: config.tenantOne.adminUser.userName, tenant: config.tenantOne.tenantId }\nlet deletes = await redis.delAsync([`${session.tenant}.permissions.${session.user_sid}`]);\nconsole.log(deletes)\n//process.env.DEBUG=\&quot;knex:query\&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2faa4334-ab66-4492-b844-0f5f343e2f00&quot;,&quot;parentUUID&quot;:&quot;87cce40b-4144-413b-934c-8893e6fa04c7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await redis.delAsync([`${session.tenant}.permissions.${session.user_sid}`]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed397c5e-0923-45dc-92cc-34022e3e66aa&quot;,&quot;parentUUID&quot;:&quot;87cce40b-4144-413b-934c-8893e6fa04c7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cd127df1-a960-43ad-a2cb-f99cb22bd60b&quot;,&quot;title&quot;:&quot;currentUserPermssions&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/permissions/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/permissions/permissions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should cache and return the current users permssiosn based on a passed-in session&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests currentUserPermssions should cache and return the current users permssiosn based on a passed-in session&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:636,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nlet perms = await permissions.currentUserPermissions(session);\nlet cached =  await redis.getAsync([`${session.tenant}.permissions.${session.user_sid}`]);\ncached = JSON.parse(cached)\nexpect(perms).length.to.be.gt(0);\nexpect(cached.length).to.equal(perms.length)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93385b45-64c6-4c75-beb0-c8d48fe0e957&quot;,&quot;parentUUID&quot;:&quot;cd127df1-a960-43ad-a2cb-f99cb22bd60b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;93385b45-64c6-4c75-beb0-c8d48fe0e957&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:636,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6b4e2557-bbe3-4c7b-b7fe-23668afd43ae&quot;,&quot;title&quot;:&quot;isSysAdmin&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/permissions/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/permissions/permissions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should cache and return the current users permssiosn based on a passed-in session&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests isSysAdmin should cache and return the current users permssiosn based on a passed-in session&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nlet perms = await permissions.isSysAdmin(session);\nexpect(perms).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9fa3b2c2-3326-4e8f-8cb5-e8db9e8d9499&quot;,&quot;parentUUID&quot;:&quot;6b4e2557-bbe3-4c7b-b7fe-23668afd43ae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9fa3b2c2-3326-4e8f-8cb5-e8db9e8d9499&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;245cb070-bfb8-4bcf-ab82-3e77701ac66e&quot;,&quot;title&quot;:&quot;hasPermissions&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/permissions/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/permissions/permissions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true for sysAdmin permissions&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return true for sysAdmin permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.sysAdmin);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    \&quot;irrelevantObjectGuid\&quot;,\n    \&quot;irrelevantCategoryGuid\&quot;, \&quot;irrelevantPublishStatus\&quot;);\nexpect(hasPerms).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;55b72972-7691-455e-9cfe-4d5405793d01&quot;,&quot;parentUUID&quot;:&quot;245cb070-bfb8-4bcf-ab82-3e77701ac66e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return true for System scoped permissions&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return true for System scoped permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.systemScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    \&quot;irrelevantObjectGuid\&quot;,\n    \&quot;irrelevantCategoryGuid\&quot;,\n    \&quot;irrelevantPublishStatus\&quot;);\nexpect(hasPerms).to.be.true;\nlet perms = await permissions.isSysAdmin(session);\nexpect(perms).to.be.undefined&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e9c4e50-7de9-410f-9716-786ba546c509&quot;,&quot;parentUUID&quot;:&quot;245cb070-bfb8-4bcf-ab82-3e77701ac66e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return true for category scoped permissions&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return true for category scoped permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.categoryScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    \&quot;irrelevantObjectGuid\&quot;,\n    mocks.categoryScoped[0].ownerSid,\n    mocks.categoryScoped[0].publishStatus);\nexpect(hasPerms).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00a2eb75-7cdc-4ff4-8f29-567deff65352&quot;,&quot;parentUUID&quot;:&quot;245cb070-bfb8-4bcf-ab82-3e77701ac66e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return true for Object scoped permissions&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return true for Object scoped permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.objectScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    mocks.objectScoped[0].ownerSid,\n    \&quot;irrelevantCategoryGuid\&quot;,\n    mocks.categoryScoped[0].publishStatus);\nexpect(hasPerms).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;222ea8de-6b7c-4781-8de7-0917850138ec&quot;,&quot;parentUUID&quot;:&quot;245cb070-bfb8-4bcf-ab82-3e77701ac66e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false for Object scoped permissions with wrong publish status&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return false for Object scoped permissions with wrong publish status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.objectScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    mocks.objectScoped[0].ownerSid,\n    \&quot;irrelevantCategoryGuid\&quot;,\n    \&quot;production\&quot;);\nexpect(hasPerms).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9128dcad-b67c-408d-9895-aa77555d0593&quot;,&quot;parentUUID&quot;:&quot;245cb070-bfb8-4bcf-ab82-3e77701ac66e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false for bogus permission type&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return false for bogus permission type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.objectScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edizt&#x27;,\n    mocks.objectScoped[0].ownerSid,\n    \&quot;irrelevantCategoryGuid\&quot;,\n    mocks.categoryScoped[0].publishStatus);\nexpect(hasPerms).to.be.false;\nhasPerms = await permissions.hasPermissions(session,\n    &#x27;holiday&#x27;,\n    &#x27;viewconfig&#x27;);\nexpect(hasPerms).to.be.false&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7e95472-66e1-4501-8b90-bedd500ba599&quot;,&quot;parentUUID&quot;:&quot;245cb070-bfb8-4bcf-ab82-3e77701ac66e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;55b72972-7691-455e-9cfe-4d5405793d01&quot;,&quot;0e9c4e50-7de9-410f-9716-786ba546c509&quot;,&quot;00a2eb75-7cdc-4ff4-8f29-567deff65352&quot;,&quot;222ea8de-6b7c-4781-8de7-0917850138ec&quot;,&quot;9128dcad-b67c-408d-9895-aa77555d0593&quot;,&quot;f7e95472-66e1-4501-8b90-bedd500ba599&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;08019e03-05d8-4b3e-bbdb-97a643fcf6d5&quot;,&quot;title&quot;:&quot;Integrify Libs Contact Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/contacts.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/contacts.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bdcf493d-77db-47ca-8e58-d3d9932ce656&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/contacts.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/contacts.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig();\nuser = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2fdce66b-6989-4714-bf99-687fdc6dea79&quot;,&quot;parentUUID&quot;:&quot;bdcf493d-77db-47ca-8e58-d3d9932ce656&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should getContact&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should getContact&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:70,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nconst ContactModel = await model.getModel(config.test.tenantOne.tenantId, &#x27;Contact&#x27;)\n//console.dir(ContactModel)\nlet results = await ContactModel.query()\n//console.log(results)\nexpect(results.length).to.be.gt(0)\nlet sampleContactGuid = results[0].contactGuid\nlet contactController = new ContactController(config.test.tenantOne)\nconst Contact = await contactController.getContact(sampleContactGuid);\nexpect(Contact).to.exist;\nexpect(Contact.contactGuid).equal(sampleContactGuid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4487469b-e0c8-403e-835d-3528493aaf9b&quot;,&quot;parentUUID&quot;:&quot;bdcf493d-77db-47ca-8e58-d3d9932ce656&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getContactByUserName&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should getContactByUserName&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nlet sampleUserName = user.userName\nlet contactController = new ContactController(config.test.tenantOne)\nconst Contact = await contactController.getContactByUserName(sampleUserName);\nexpect(Contact).to.exist;\nexpect(Contact.userName).equal(sampleUserName)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;189f30d3-c96a-42c7-9a2e-235ddcc8b7b1&quot;,&quot;parentUUID&quot;:&quot;bdcf493d-77db-47ca-8e58-d3d9932ce656&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should searchContacts&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should searchContacts&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne)\n            let Contacts = await contactController.searchContacts({&#x27;auth.userName&#x27;: &#x27;iApprov&#x27;, firstName: &#x27;Sys&#x27;, lastName: &#x27;S&#x27;});\n            expect(Contacts[0]).to.exist;\n            expect(Contacts[0].userName).equal(&#x27;iApprove&#x27;)\n            Contacts = await contactController.searchContacts({&#x27;auth.userName&#x27;: &#x27;iApprove&#x27;});\n            let Contact = Contacts[0]\n            expect(Contact).to.exist;\n            expect(Contact.userName).equal(&#x27;iApprove&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;231c100b-07fc-4bb6-ae1a-040ba046a881&quot;,&quot;parentUUID&quot;:&quot;bdcf493d-77db-47ca-8e58-d3d9932ce656&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should dbAuthContact&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should dbAuthContact&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:233,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\n            const Contact = await contactController.dbAuthContact(user.userName, user.password)\n            expect(Contact).to.exist;\n            expect(Contact.token).to.exist;\n            expect(Contact.refreshToken).to.exist;\n            expect(Contact.userName).equal(user.userName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7578699b-d3d1-4ee6-b1f6-bd30b4c7db2c&quot;,&quot;parentUUID&quot;:&quot;bdcf493d-77db-47ca-8e58-d3d9932ce656&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getGroupSids&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should getGroupSids&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:161,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\n            const Contact = await contactController.dbAuthContact(user.userName, user.password)\n            expect(Contact).to.exist;\n            let groupSids = await contactController.getGroupSids(Contact.contactSid)\n            expect(groupSids.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7fc11197-e546-41fb-b60c-0cd3274839b8&quot;,&quot;parentUUID&quot;:&quot;bdcf493d-77db-47ca-8e58-d3d9932ce656&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getAccountsByEmail&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should getAccountsByEmail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\nlet Contacts = await contactController.getAccountsByEmail(config.test.tenantOne.adminUser.email);\nexpect(Contacts.length).to.be.gt(0);\nContacts.forEach(contact =&gt; {\n  expect(contact).to.have.all.keys(&#x27;contactGuid&#x27;, &#x27;ntId&#x27;, &#x27;email&#x27;);\n  expect(contact.email).to.equal(config.test.tenantOne.adminUser.email);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1b7c69b-846b-4ce8-93d7-6fc95be9f90e&quot;,&quot;parentUUID&quot;:&quot;bdcf493d-77db-47ca-8e58-d3d9932ce656&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should updatePassword&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should updatePassword&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:204,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\nlet Contact = await contactController.updatePassword(\n  config.test.tenantOne.adminUser.sid,\n  bcrypt.hashSync(config.test.tenantOne.adminUser.password)\n);\nexpect(Contact).to.exist\n  .and.to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c24c0984-649d-4948-b778-0c59197fc1ea&quot;,&quot;parentUUID&quot;:&quot;bdcf493d-77db-47ca-8e58-d3d9932ce656&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4487469b-e0c8-403e-835d-3528493aaf9b&quot;,&quot;189f30d3-c96a-42c7-9a2e-235ddcc8b7b1&quot;,&quot;231c100b-07fc-4bb6-ae1a-040ba046a881&quot;,&quot;7578699b-d3d1-4ee6-b1f6-bd30b4c7db2c&quot;,&quot;7fc11197-e546-41fb-b60c-0cd3274839b8&quot;,&quot;c1b7c69b-846b-4ce8-93d7-6fc95be9f90e&quot;,&quot;c24c0984-649d-4948-b778-0c59197fc1ea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:720,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c404cc0f-8a24-4026-8eed-627dd88a10b5&quot;,&quot;title&quot;:&quot;Integrify Libs Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7ea3088e-8d3e-4b3b-9b00-feb9c9d27d0b&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Controller Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig();\nuser = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;62e4446f-60a3-4a17-b393-afcf88a2ec2c&quot;,&quot;parentUUID&quot;:&quot;7ea3088e-8d3e-4b3b-9b00-feb9c9d27d0b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Controller Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(controllers.BaseController).to.exist;\nclass TestController extends controllers.BaseController {}            \nconst testController = new TestController(config.test.tenantOne)\nlet tenantDb =  await testController.getTenantDb()\n\nexpect(tenantDb).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9436741a-6d21-4ce2-a224-4699c3817c96&quot;,&quot;parentUUID&quot;:&quot;7ea3088e-8d3e-4b3b-9b00-feb9c9d27d0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9436741a-6d21-4ce2-a224-4699c3817c96&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;446165f2-b305-4b91-9746-50bece0d0309&quot;,&quot;title&quot;:&quot;Integrify Libs Data Instance Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/data-instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/data-instance.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig();\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e41ff47-aa04-41ea-88a2-06ffdd3dc161&quot;,&quot;parentUUID&quot;:&quot;446165f2-b305-4b91-9746-50bece0d0309&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;77256f4a-a743-46f4-be6a-f2db0f9c65a3&quot;,&quot;title&quot;:&quot;Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/data-instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/data-instance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a consumer model&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Model Tests should get a consumer model&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const DataInstanceModel = await model.getConsumerModel(config.consumersConn, &#x27;DataInstance&#x27;)\nexpect(DataInstanceModel).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3482dd03-c5cd-4817-8362-4dcb751f21eb&quot;,&quot;parentUUID&quot;:&quot;77256f4a-a743-46f4-be6a-f2db0f9c65a3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return data instances&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Model Tests should return data instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const DataInstanceModel = await model.getConsumerModel(config.consumersConn, &#x27;DataInstance&#x27;)\nexpect(DataInstanceModel).to.exist;\nlet results = await DataInstanceModel.query()\nexpect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1dccd5c-8a36-4796-9631-c1496e48b758&quot;,&quot;parentUUID&quot;:&quot;77256f4a-a743-46f4-be6a-f2db0f9c65a3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return data instances with settings&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Model Tests should return data instances with settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:36,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const DataInstanceModel = await model.getConsumerModel(config.consumersConn, &#x27;DataInstance&#x27;)\nexpect(DataInstanceModel).to.exist;\nlet results = await DataInstanceModel.query().eager(&#x27;[dataInstanceSettings]&#x27;)\nconsole.dir(results)\nexpect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08a8ebf7-cf3f-4de2-8e24-d23dde99f731&quot;,&quot;parentUUID&quot;:&quot;77256f4a-a743-46f4-be6a-f2db0f9c65a3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3482dd03-c5cd-4817-8362-4dcb751f21eb&quot;,&quot;c1dccd5c-8a36-4796-9631-c1496e48b758&quot;,&quot;08a8ebf7-cf3f-4de2-8e24-d23dde99f731&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:63,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e77d2d85-fde0-434f-bb0a-2b088b162ed1&quot;,&quot;title&quot;:&quot;Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/data-instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/data-instance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list datainstances&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Controller Tests should list datainstances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:44,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let dataInstanceController = new DataInstanceController();\nlet dataInstances = await dataInstanceController.listDataInstances()\nexpect(dataInstances).to.exist;\nexpect(dataInstances.length).to.be.gt(0)\nexpect(dataInstances[0].dataInstanceSettings.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97c0c1ec-2ad2-4596-949a-2e955629c87d&quot;,&quot;parentUUID&quot;:&quot;e77d2d85-fde0-434f-bb0a-2b088b162ed1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a datainstance&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Controller Tests should get a datainstance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let dataInstanceController = new DataInstanceController();\nlet dataInstance = await dataInstanceController.getDataInstance(config.test.tenantOne.tenantId)\nexpect(dataInstance).to.exist;\nexpect(dataInstance.dataInstanceSettings.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84030faa-76ca-4271-85fc-1b3a46af81ff&quot;,&quot;parentUUID&quot;:&quot;e77d2d85-fde0-434f-bb0a-2b088b162ed1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a datainstances hash&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Controller Tests should get a datainstances hash&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:36,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let dataInstanceController = new DataInstanceController();\nlet dataInstanceHt = await dataInstanceController.GetDataInstancesHash()\nexpect(dataInstanceHt).to.exist;\nexpect(dataInstanceHt[config.test.tenantOne.tenantId]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e861cad2-9f45-4143-bf84-7361e7f8a18c&quot;,&quot;parentUUID&quot;:&quot;e77d2d85-fde0-434f-bb0a-2b088b162ed1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a datainstance&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Controller Tests should update a datainstance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:109,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let settingVal = new Date().toISOString()\nlet dataInstanceController = new DataInstanceController();\nlet dataInstance = await dataInstanceController.getDataInstance(config.test.tenantOne.tenantId)\nlet settingIdx  = dataInstance.dataInstanceSettings.findIndex((s =&gt; s.settingsKey === &#x27;HelpURL&#x27;));\ndataInstance.dataInstanceSettings[settingIdx].settingsValue = settingVal\ndataInstance  = await dataInstanceController.updateDataInstance(dataInstance)\nexpect(dataInstance.dataInstanceSettings.length).to.be.gt(0)\nlet setting  = dataInstance.dataInstanceSettings.find((s =&gt; s.settingsKey === &#x27;HelpURL&#x27;));\nexpect(setting).to.exist\nexpect(setting.settingsValue).to.equal(settingVal)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e088bf85-8fe1-413c-ab7b-ef73f173f3a1&quot;,&quot;parentUUID&quot;:&quot;e77d2d85-fde0-434f-bb0a-2b088b162ed1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;97c0c1ec-2ad2-4596-949a-2e955629c87d&quot;,&quot;84030faa-76ca-4271-85fc-1b3a46af81ff&quot;,&quot;e861cad2-9f45-4143-bf84-7361e7f8a18c&quot;,&quot;e088bf85-8fe1-413c-ab7b-ef73f173f3a1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:217,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d1f4c26d-d5c8-44ae-bb14-6ce725b6c31e&quot;,&quot;title&quot;:&quot;Integrify Libs Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/model.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;eb579fe3-0a85-4181-9f9a-d48381561117&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/model.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/model.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig();\nuser = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63bea3d8-0e16-482d-8ab2-a85d1f9ae8a9&quot;,&quot;parentUUID&quot;:&quot;eb579fe3-0a85-4181-9f9a-d48381561117&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nthis.timeout(105000);\nconst ContactModel = await model.bindModel(config.test.tenantOne.tenantId, models.Contact)\n//console.dir(ContactModel)\n//ContactModel.setOptions({excludeDeleted:false})\n//let results = await ContactModel.query().where(&#x27;contactId&#x27;, &#x27;&gt;&#x27;, 0)\n//console.log(results)\nlet results;\nresults = await ContactModel.query().setOptions({excludeDeleted:false}).where(&#x27;contactId&#x27;, &#x27;&gt;&#x27;, 0)\nresults = await ContactModel.query().where(&#x27;contactId&#x27;, &#x27;&gt;&#x27;, 0)\nlet c = await ContactModel.query().findOne({userName: &#x27;iApprove&#x27;}).joinRelated(&#x27;auth&#x27;).select(&#x27;contact.*&#x27;, &#x27;contact.contactGuid as contactSid&#x27;,&#x27;auth.userName as userName&#x27;)\nconsole.log(c)\nlet patched = await c.$query().patch({middleName: \&quot;bob\&quot;})\nconsole.log(patched)\n\n\nexpect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e75460d6-626d-4f87-b532-99ec3456f616&quot;,&quot;parentUUID&quot;:&quot;eb579fe3-0a85-4181-9f9a-d48381561117&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e75460d6-626d-4f87-b532-99ec3456f616&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:38,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000},{&quot;uuid&quot;:&quot;32ba694d-9049-44f4-9ffb-3b4f6e0dfb0e&quot;,&quot;title&quot;:&quot;Integrify Libs Permissions Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/permissions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bebf03ca-0f15-4347-82f8-ccf9541b1c05&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/permissions.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Controller Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nuser  = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c5824b8-b89d-4028-acc1-b86bb0c6849c&quot;,&quot;parentUUID&quot;:&quot;bebf03ca-0f15-4347-82f8-ccf9541b1c05&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should getUserPermissionsFromDb&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Controller Tests tests should getUserPermissionsFromDb&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nconst session = {tenantId: config.test.tenantOne.tenantId, user_sid: user.sid}\nlet permissionsController = new PermissionsController(session)\nlet permissions = await permissionsController.getWorkflowPermissionsFromDb(session);\nconsole.log(permissions)\nexpect(permissions[0]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc7936be-474b-4367-a54d-018f77c995d6&quot;,&quot;parentUUID&quot;:&quot;bebf03ca-0f15-4347-82f8-ccf9541b1c05&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cc7936be-474b-4367-a54d-018f77c995d6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;00e5f45f-4ac9-4b8c-9867-b85342ab8749&quot;,&quot;title&quot;:&quot;Integrify Libs Process Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/process.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e5a107d8-b1b5-4864-901c-198cb6315523&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/process.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/process.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Process Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nuser  = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f507a68f-e272-47fd-ab3e-cad63117280d&quot;,&quot;parentUUID&quot;:&quot;e5a107d8-b1b5-4864-901c-198cb6315523&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a process from sql&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Process Model Tests tests should get a process from sql&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:154,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nconst ProcessModel = await model.getModel(config.test.tenantOne.tenantId, &#x27;Process&#x27;)\n\n\nlet results = await ProcessModel.query()\n//console.log(results)\nexpect(results.length).to.be.gt(0)\nlet sampleProcesstGuid = results[0].processGuid\nlet processController = new ProcessController(config.test.tenantOne)\nconst Process = await processController.getFullProcessFromSql(sampleProcesstGuid);\nexpect(Process).to.exist;\nconsole.log([Process])\nexpect(Process.processGuid).equal(sampleProcesstGuid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce2b785e-beff-46a0-9ef9-6773ff35cf51&quot;,&quot;parentUUID&quot;:&quot;e5a107d8-b1b5-4864-901c-198cb6315523&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should upsert a process in sql&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Process Model Tests tests should upsert a process in sql&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:544,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nconst ProcessModel = await model.getModel(config.test.tenantOne.tenantId, &#x27;Process&#x27;)\n//console.dir(ContactModel)\nlet results = await ProcessModel.query()\n//console.log(results)\nexpect(results.length).to.be.gt(0)\nlet sampleProcesstGuid = results[0].processGuid\nlet processController = new ProcessController(config.test.tenantOne)\nlet Process = await processController.getFullProcessFromSql(sampleProcesstGuid);\nexpect(Process).to.exist;\nexpect(Process.processGuid).equal(sampleProcesstGuid)\nlet newName = &#x27;Updated &#x27; + new Date().toISOString()\nclonedProcess = JSON.parse(JSON.stringify(Process));\n           \nProcess.objective = newName;\nProcess.tasks[0].internalNotes = newName;\nProcess.processCategory.ordinal = 1;\nawait processController.upsertFullProcess(Process);\nProcess = await processController.getFullProcessFromSql(sampleProcesstGuid);\nexpect(Process.objective).to.equal(newName);\nexpect(Process.tasks[0].internalNotes).to.equal(newName);\nexpect(Process.processCategory.ordinal).equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64a52d76-84c3-4340-9d99-e341c2937989&quot;,&quot;parentUUID&quot;:&quot;e5a107d8-b1b5-4864-901c-198cb6315523&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ce2b785e-beff-46a0-9ef9-6773ff35cf51&quot;,&quot;64a52d76-84c3-4340-9d99-e341c2937989&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:698,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e29a5bc1-20d7-46e0-8bc9-c903874d4e12&quot;,&quot;title&quot;:&quot;Integrify Libs Tenant tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/sqldb-db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/sqldb-db.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e10f8304-6ef9-40c2-b248-db905dc64edf&quot;,&quot;title&quot;:&quot;tentantSql tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/sqldb-db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/sqldb-db.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tenant tests tentantSql tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// let configClass = await require(&#x27;../../../config&#x27;)\n            // await configClass.setConfigs();\n            // config = await configClass.getConfig();\n            config = await Config.getConfig();\n            this.timeout(100000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a8bed81a-9ebb-476a-b7a8-34af46e2de69&quot;,&quot;parentUUID&quot;:&quot;e10f8304-6ef9-40c2-b248-db905dc64edf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get the consumer Db&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tenant tests tentantSql tests should get the consumer Db&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:144,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let db = await sqlDb.getConsumersDb(config.consumersConn)\nexpect(db).to.exist;\nlet queyResults =  await db.raw(`SELECT * FROM sys.tables WHERE name = &#x27;data_instance&#x27;`)\nexpect(queyResults.length).equal(1)\n//console.log(queyResults)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;51694e44-722f-4775-8a55-9957c7d45180&quot;,&quot;parentUUID&quot;:&quot;e10f8304-6ef9-40c2-b248-db905dc64edf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;shoulld get the tenant Db&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tenant tests tentantSql tests shoulld get the tenant Db&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let db = await sqlDb.getTenantDb(config.test.tenantOne.tenantId)\nexpect(db).to.exist;\nlet queyResults =  await db.raw(`select * from contact`)\nexpect(queyResults.length).to.be.gt(0)\nqueyResults = await db.raw(\&quot;select * from contact_auth where user_name = :uname\&quot;, {uname: &#x27;iApprove&#x27;})\nexpect(queyResults.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96d0e8f7-1a29-4f2a-a2ad-ee437daac616&quot;,&quot;parentUUID&quot;:&quot;e10f8304-6ef9-40c2-b248-db905dc64edf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;51694e44-722f-4775-8a55-9957c7d45180&quot;,&quot;96d0e8f7-1a29-4f2a-a2ad-ee437daac616&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:161,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;28593bdc-b435-4405-bc56-47f96c606bbb&quot;,&quot;title&quot;:&quot;Integrify Libs StreamConsumer Load Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Load Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6840,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(1050000000);\nlet deletes = await redis.delAsync([fullStreamName, eventHistoryName, eventProcessedName, `${tenant}.activeSessions`]);\n/*\nRedis stream stuff:\nYou can scale up by running additional processors in the group. This creates a new Node process and runs a new consumer\nin the existing stream group. The consumer name for each processor will have an incremental suffix so it will be unique\nensuring that each consumer processes a unique set of events.\nWith 3 processors, it handeld a loadSize of a million events as they came in with no backlog build up in the group.\n */\nforkedProcessor = await streamConsumer.forkStreamProcessor()\nforkedProcessor2 = await streamConsumer.forkStreamProcessor()\nforkedProcessor3 = await streamConsumer.forkStreamProcessor()\nfor (let index = 0; index &lt; loadSize; index++) {\n\n    await sp.sendEvent(\&quot;extendSession\&quot;,{\n        token: \&quot;abcd234\&quot;,\n        user: {\n            sid:\&quot;11111\&quot;, \n            user_name: \&quot;iapprove\&quot;, \n            email: \&quot;iapprove@integrify.com\&quot;, \n            name: \&quot;System System\&quot;\n        }\n    })\n\n}\n       \nawait delay(1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b5f028e-42fd-4c35-b94c-4db9a81c6837&quot;,&quot;parentUUID&quot;:&quot;28593bdc-b435-4405-bc56-47f96c606bbb&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Load Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;forkedProcessor.kill()\nforkedProcessor2.kill()\nforkedProcessor3.kill()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f727e666-5a97-4e95-a5ec-0b63a129ed65&quot;,&quot;parentUUID&quot;:&quot;28593bdc-b435-4405-bc56-47f96c606bbb&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;94dd6fbb-88e9-4757-88f5-c462b1c44014&quot;,&quot;title&quot;:&quot;forkStreamProcessor&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c705dee8-e16b-45d4-91b2-1ea835f53866&quot;,&quot;title&quot;:&quot;processed event count  = history count&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should process events&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Load Tests forkStreamProcessor processed event count  = history count should process events&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processedCount = await redis.zcardAsync(eventProcessedName)\n let historyCount = await redis.zcardAsync(eventHistoryName)\n expect(historyCount).to.equal(processedCount)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e075a4cd-d391-4fca-96e6-20bc1a8fc7fa&quot;,&quot;parentUUID&quot;:&quot;c705dee8-e16b-45d4-91b2-1ea835f53866&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e075a4cd-d391-4fca-96e6-20bc1a8fc7fa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;97de36bd-59a2-4dd5-98b5-4c0dabcdd18f&quot;,&quot;title&quot;:&quot;Integrify Libs StreamConsumer Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/stream/streamConsumer.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5022,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\nlet deletes = await redis.delAsync([fullStreamName, eventHistoryName, eventProcessedName, `${tenant}.activeSessions`]);\nconsole.log(deletes)\nfor (let index = 0; index &lt; 5; index++) {\n    await sp.sendEvent(\&quot;extendSession\&quot;, {activityDate: new Date(),\n        token: \&quot;abcd234\&quot;,\n        user: {\n            sid:\&quot;11111\&quot;,\n            user_name: \&quot;iapprove\&quot;,\n            email: \&quot;iapprove@integrify.com\&quot;,\n            name: \&quot;System System\&quot;\n        }\n    })\n}\nforkedProcessor = await streamConsumer.forkStreamProcessor()\nawait delay(5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b0d48f6-5ca9-4c06-918f-dd8496ff149a&quot;,&quot;parentUUID&quot;:&quot;97de36bd-59a2-4dd5-98b5-4c0dabcdd18f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d5f1089-378e-4113-992f-c9179cc2a4c5&quot;,&quot;parentUUID&quot;:&quot;97de36bd-59a2-4dd5-98b5-4c0dabcdd18f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;805d0040-0188-4756-a870-0ced314d89b8&quot;,&quot;title&quot;:&quot;forkStreamProcessor&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/stream/streamConsumer.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;041759b2-b4f6-4dc3-9ced-727f8eac5bdb&quot;,&quot;title&quot;:&quot;processed event count  = history count&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/stream/streamConsumer.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should process events&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Tests forkStreamProcessor processed event count  = history count should process events&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processedCount = await redis.zcardAsync(eventProcessedName)\n let historyCount = await redis.zcardAsync(eventHistoryName)\n expect(historyCount).to.equal(processedCount)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20a69ee8-f21c-4723-b84f-1bd9b2f44661&quot;,&quot;parentUUID&quot;:&quot;041759b2-b4f6-4dc3-9ced-727f8eac5bdb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;20a69ee8-f21c-4723-b84f-1bd9b2f44661&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9e6eb70f-9b69-44ff-84b2-df7192016294&quot;,&quot;title&quot;:&quot;Integrify Libs Stream Publisher Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/stream/streamPublisher.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamPublisher.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;fbd59e27-eacb-4432-93f1-ed0ceba3d8c4&quot;,&quot;title&quot;:&quot;stream publisher&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/stream/streamPublisher.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamPublisher.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Stream Publisher Tests stream publisher \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(100000)\nprocess.env.jest = \&quot;true\&quot;;\nawait redis.delAsync([fullStreamName, eventHistoryName])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28cbd2b2-37ff-449c-ada8-68db191a8214&quot;,&quot;parentUUID&quot;:&quot;fbd59e27-eacb-4432-93f1-ed0ceba3d8c4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should handle the constructor&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Stream Publisher Tests stream publisher should handle the constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const sp = new StreamPublisher(testStreamName, tenant);\nexpect(sp.streamName).equal(fullStreamName)\nexpect(sp.baseStreamName).equal(testStreamName)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1cba1746-c690-4ab6-b18f-632f7abf735b&quot;,&quot;parentUUID&quot;:&quot;fbd59e27-eacb-4432-93f1-ed0ceba3d8c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should an sendEvent&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Stream Publisher Tests stream publisher should an sendEvent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:103,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const sp = new StreamPublisher(testStreamName, tenant,1000);\nexpect(sp.streamName).equal(fullStreamName)\n//sendEvent(eventType, data) data will get stringified\nlet id = await sp.sendEvent(testEventType, {foo:\&quot;bar\&quot;, biz:\&quot;buzz\&quot;, beep:{bop:\&quot;bam\&quot;}})   \nexpect(id).to.exist;\nexpect (id.indexOf(\&quot;-\&quot;)).to.be.gt(-1)  \nawait delay(100);\nlet id2 = await sp.sendEvent(testEventType, {foo:\&quot;bar2\&quot;, biz:\&quot;buzz2\&quot;, beep:{bop:\&quot;bam2\&quot;}})   \nexpect (Number(id2.split(\&quot;-\&quot;)[0])).to.be.gt(Number(id.split(\&quot;-\&quot;)[0]))&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc429cf7-a229-429d-9f1d-59e2ff6f17fa&quot;,&quot;parentUUID&quot;:&quot;fbd59e27-eacb-4432-93f1-ed0ceba3d8c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should append to eventhistory&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Stream Publisher Tests stream publisher should append to eventhistory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const sp = new StreamPublisher(testStreamName, tenant, 1000); \n\nlet id = await sp.sendEvent(testEventType, {foo:\&quot;bar\&quot;, biz:\&quot;buzz\&quot;, beep:{bop:\&quot;bam\&quot;}}) \n           \n//console.log(historySet)\nlet historyCount = await redis.zcardAsync(eventHistoryName)\nexpect(historyCount).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f8a8c47-dd5b-4edc-98dc-08c46d1729f5&quot;,&quot;parentUUID&quot;:&quot;fbd59e27-eacb-4432-93f1-ed0ceba3d8c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1cba1746-c690-4ab6-b18f-632f7abf735b&quot;,&quot;cc429cf7-a229-429d-9f1d-59e2ff6f17fa&quot;,&quot;2f8a8c47-dd5b-4edc-98dc-08c46d1729f5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:104,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2496e247-0cd1-4bbd-a04c-3ce67670768f&quot;,&quot;title&quot;:&quot;Integrify Libs Tes-lib Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/test-lib/test-lib.test.js&quot;,&quot;file&quot;:&quot;/test/integration/test-lib/test-lib.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bd7fe542-4155-4afc-af04-a85afa7f45b5&quot;,&quot;title&quot;:&quot;Test Config&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/test-lib/test-lib.test.js&quot;,&quot;file&quot;:&quot;/test/integration/test-lib/test-lib.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tes-lib Tests Test Config \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//config = await Config.getConfig()\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b3c324c-5ec8-4938-a872-40ae9e64c364&quot;,&quot;parentUUID&quot;:&quot;bd7fe542-4155-4afc-af04-a85afa7f45b5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;66ad365b-efa9-41ae-9b45-b23bde52ccb0&quot;,&quot;title&quot;:&quot;get a test config&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/test-lib/test-lib.test.js&quot;,&quot;file&quot;:&quot;/test/integration/test-lib/test-lib.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should have config.mongo&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tes-lib Tests Test Config get a test config should have config.mongo&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testConfig = await testLib.getTestConfig();\nconsole.log(testConfig)\nexpect(testConfig).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2a261b1-57d5-4b50-95f7-562a054cadec&quot;,&quot;parentUUID&quot;:&quot;66ad365b-efa9-41ae-9b45-b23bde52ccb0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a2a261b1-57d5-4b50-95f7-562a054cadec&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;12655490-91a0-4425-a262-2d507f6f0c2b&quot;,&quot;title&quot;:&quot;get an auth Token &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/test-lib/test-lib.test.js&quot;,&quot;file&quot;:&quot;/test/integration/test-lib/test-lib.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should have a auth token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tes-lib Tests Test Config get an auth Token  should have a auth token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const authToken = await testLib.getAuthToken();\nconsole.log(authToken)\nexpect(authToken).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43611d8b-fa9e-431e-9032-716cee2a8de3&quot;,&quot;parentUUID&quot;:&quot;12655490-91a0-4425-a262-2d507f6f0c2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;43611d8b-fa9e-431e-9032-716cee2a8de3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e2d36313-c921-49f9-b462-bca68a29067c&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f63dc8e8-6085-4fbf-942f-8d2e974043c8&quot;,&quot;title&quot;:&quot;Scheduler CRUD tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Scheduler CRUD tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests \&quot;before all\&quot; hook in \&quot;Scheduler CRUD tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await serverConfig.setProcessServerConfig()\njobCtrl = require(\&quot;../lib/scheduler/mongo/jobCtrl.js\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a5e224f-c626-4d28-a780-e00be115e1b4&quot;,&quot;parentUUID&quot;:&quot;f63dc8e8-6085-4fbf-942f-8d2e974043c8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cb46b475-07ad-4de8-b6c0-0a80cf298486&quot;,&quot;title&quot;:&quot;.save&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;saves the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .save saves the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:86,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let sDate = new Date();\nlet startThis = new Date(\n    new Date().setMinutes(sDate.getMinutes() - 5)\n);\nlet endThis = new Date(\n    new Date().setMinutes(sDate.getMinutes() + 5)\n);\nlet job = {\n    dbName: config.dbName,\n    status: \&quot;Scheduled\&quot;,\n    name: config.name,\n    initData: config.initData,\n    runAs: config.runAs,\n    frequency: \&quot;Recurring\&quot;,\n    rminutes: 1,\n    state: \&quot;ended\&quot;,\n    startDate: startThis,\n    startHour: startThis.getHours(),\n    startMinute: startThis.getMinutes(),\n    startAMPM: startThis.getHours() &gt; 12 ? \&quot;PM\&quot; : \&quot;AM\&quot;,\n    endDate: endThis,\n    endHour: endThis.getHours(),\n    endMinute: endThis.getMinutes(),\n    endAMPM: endThis.getHours() &gt; 12 ? \&quot;PM\&quot; : \&quot;AM\&quot;,\n    jobType: config.jobType\n};\nreturn jobCtrl.save(job).then(saved =&gt; {\n    expect(saved).to.exist;\n    dbJob = saved;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7421663b-e445-4eae-9e6b-7676c9f529aa&quot;,&quot;parentUUID&quot;:&quot;cb46b475-07ad-4de8-b6c0-0a80cf298486&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7421663b-e445-4eae-9e6b-7676c9f529aa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:86,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;018a4e9c-27ff-4eb5-8f26-81b7fc7ec1a9&quot;,&quot;title&quot;:&quot;.upate&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .upate updates the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;dbJob.name = \&quot;pdq\&quot;;\nreturn jobCtrl.update(dbJob).then(updated =&gt; {\n    expect(updated).to.exist;\n    expect(updated.modifiedDate.getTime()).to.be.greaterThan(\n        updated.createdDate.getTime()\n    );\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c10cde3-484d-41a6-baf8-9fe9cbb573d0&quot;,&quot;parentUUID&quot;:&quot;018a4e9c-27ff-4eb5-8f26-81b7fc7ec1a9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5c10cde3-484d-41a6-baf8-9fe9cbb573d0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:31,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f0979f74-f20f-4db6-b83f-839adcbd1cc6&quot;,&quot;title&quot;:&quot;.getOne&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a job by id&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .getOne should get a job by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;dbJob.name = \&quot;pdq\&quot;;\nreturn jobCtrl.getOne(config.dbName, dbJob._id).then(job =&gt; {\n    expect(job).to.exist;\n    expect(job._id.toString()).to.equal(dbJob._id.toString());\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fe1a9aa-71e0-47b7-ba83-2e383d182296&quot;,&quot;parentUUID&quot;:&quot;f0979f74-f20f-4db6-b83f-839adcbd1cc6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8fe1a9aa-71e0-47b7-ba83-2e383d182296&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f1e7ee9b-374a-46a9-a26f-d2b31b2db97a&quot;,&quot;title&quot;:&quot;.getAll&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get all jobs&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .getAll should get all jobs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return jobCtrl.getAll(config.dbName).then(jobs =&gt; {\n    expect(jobs).to.be.an(\&quot;array\&quot;).that.is.not.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;77e2ebae-a450-4db2-8abf-43690c55c813&quot;,&quot;parentUUID&quot;:&quot;f1e7ee9b-374a-46a9-a26f-d2b31b2db97a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;77e2ebae-a450-4db2-8abf-43690c55c813&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d52154d1-3837-4e6c-9973-26b4f9dbed02&quot;,&quot;title&quot;:&quot;.getAll(filter)&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get all jobs of type testToConsole&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .getAll(filter) should get all jobs of type testToConsole&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return jobCtrl.getAll(config.dbName, \&quot;testToConsole\&quot;).then(jobs =&gt; {\n    expect(jobs).to.be.an(\&quot;array\&quot;).that.is.not.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e48cdad4-e2b7-434e-be5e-a78d27f06584&quot;,&quot;parentUUID&quot;:&quot;d52154d1-3837-4e6c-9973-26b4f9dbed02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e48cdad4-e2b7-434e-be5e-a78d27f06584&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a43618f5-7020-4bea-82e2-e67dc9d7558c&quot;,&quot;title&quot;:&quot;.getAll(filter-bad)&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not have any jobs of type fakeJob&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .getAll(filter-bad) should not have any jobs of type fakeJob&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return jobCtrl.getAll(config.dbName, \&quot;fakeJob\&quot;).then(jobs =&gt; {\n    expect(jobs).to.be.an(\&quot;array\&quot;).that.is.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c648701-168b-4de8-980f-99b36a272273&quot;,&quot;parentUUID&quot;:&quot;a43618f5-7020-4bea-82e2-e67dc9d7558c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0c648701-168b-4de8-980f-99b36a272273&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bf4176fd-69a3-4205-b114-ed6daf1fbfbb&quot;,&quot;title&quot;:&quot;.delete&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a job&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .delete should delete a job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return jobCtrl.delete(config.dbName, dbJob._id).then(deleted =&gt; {\n    expect(deleted).to.be.true;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15b3b4fd-36f4-4a3e-a4c4-a448e4017e5b&quot;,&quot;parentUUID&quot;:&quot;bf4176fd-69a3-4205-b114-ed6daf1fbfbb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;15b3b4fd-36f4-4a3e-a4c4-a448e4017e5b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a67d8d39-95cd-43c0-828d-c3e8f92f526b&quot;,&quot;title&quot;:&quot;Scheduler OneTimeJob&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/onetime.test.js&quot;,&quot;file&quot;:&quot;/test/onetime.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Scheduler OneTimeJob\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob \&quot;before all\&quot; hook in \&quot;Scheduler OneTimeJob\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:137,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(20000);\ntestConfig = await serverConfig.setProcessServerConfig()\nscheduler = require(\&quot;../lib/scheduler/index.js\&quot;);\n//jobCtrl = require(\&quot;../lib/scheduler/mongo/jobCtrl\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cfc49190-abb2-4f18-ac30-2fa429e770c4&quot;,&quot;parentUUID&quot;:&quot;a67d8d39-95cd-43c0-828d-c3e8f92f526b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0d483216-9cb9-4695-9d1b-068d8cc6b8c2&quot;,&quot;title&quot;:&quot;#addOneTimeJob&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/onetime.test.js&quot;,&quot;file&quot;:&quot;/test/onetime.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add a job&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob #addOneTimeJob should add a job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.addJob(job);\nexpect(job._id).to.equal(j.name);\n//setTimeout(done, 2500);\n// done()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20a0bc10-ffcb-4d9d-8160-1fe7af0cfc69&quot;,&quot;parentUUID&quot;:&quot;0d483216-9cb9-4695-9d1b-068d8cc6b8c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;20a0bc10-ffcb-4d9d-8160-1fe7af0cfc69&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ba5c2881-456d-48e4-b00d-bb168b43e081&quot;,&quot;title&quot;:&quot;#listJobs&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/onetime.test.js&quot;,&quot;file&quot;:&quot;/test/onetime.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a hash with jobs&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob #listJobs should return a hash with jobs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let jobs = scheduler.listJobs();\nexpect(Object.keys(jobs).length).to.be.greaterThan(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85e8035e-5e62-45c0-8a9c-29001063d1d5&quot;,&quot;parentUUID&quot;:&quot;ba5c2881-456d-48e4-b00d-bb168b43e081&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should contain job xyz&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob #listJobs should contain job xyz&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let jobs = scheduler.listJobs();\nexpect(jobs[job._id]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8e21410-54de-4ed8-b657-214bcfb350ce&quot;,&quot;parentUUID&quot;:&quot;ba5c2881-456d-48e4-b00d-bb168b43e081&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;85e8035e-5e62-45c0-8a9c-29001063d1d5&quot;,&quot;e8e21410-54de-4ed8-b657-214bcfb350ce&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a6ea002d-b058-45d3-87d5-6011a721e024&quot;,&quot;title&quot;:&quot;#getJob&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/onetime.test.js&quot;,&quot;file&quot;:&quot;/test/onetime.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a job by id&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob #getJob should get a job by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.getJobById(job._id);\n//expect(j.nextInvocation()).to.equal(job.start);\nexpect(j.name).to.equal(job._id);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f933d1cc-d2b3-4911-92f9-0fef73ceccc2&quot;,&quot;parentUUID&quot;:&quot;a6ea002d-b058-45d3-87d5-6011a721e024&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f933d1cc-d2b3-4911-92f9-0fef73ceccc2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;916844c9-7794-4a9d-9c69-3905b75e2529&quot;,&quot;title&quot;:&quot;#runJob&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/onetime.test.js&quot;,&quot;file&quot;:&quot;/test/onetime.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should run the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob #runJob should run the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15001,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.getJobById(job._id);\nlet c = await delay(15000);\nexpect(j.triggeredJobs()).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b43f3cb-c751-4346-8f4a-7e7a8f4bda22&quot;,&quot;parentUUID&quot;:&quot;916844c9-7794-4a9d-9c69-3905b75e2529&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5b43f3cb-c751-4346-8f4a-7e7a8f4bda22&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15001,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;296717c0-e643-4389-90fe-2cdec7022f8f&quot;,&quot;title&quot;:&quot;Scheduler PubSubHandler&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/pubsub.test.js&quot;,&quot;file&quot;:&quot;/test/pubsub.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Scheduler PubSubHandler\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler PubSubHandler \&quot;before all\&quot; hook in \&quot;Scheduler PubSubHandler\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(20000);\ntestConfig = await serverConfig.setProcessServerConfig()\nscheduler = require(\&quot;../lib/scheduler/index.js\&quot;);\njobCtrl = require(\&quot;../lib/scheduler/mongo/jobCtrl\&quot;);\ndbJobWithId = await jobCtrl.save(dbJob);\nservice = require(\&quot;../scheduler.js\&quot;);\nintegrify_redis = require(\&quot;../lib/redis/integrify-redis.js\&quot;);\npubSubClient = integrify_redis.getRedisPubSubClient();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;953c546a-8410-4e6f-88b3-ef9ac891fb88&quot;,&quot;parentUUID&quot;:&quot;296717c0-e643-4389-90fe-2cdec7022f8f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Scheduler PubSubHandler\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler PubSubHandler \&quot;after all\&quot; hook in \&quot;Scheduler PubSubHandler\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return await jobCtrl.delete(dbJob.dbName, dbJobWithId._id.toString());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fda4bf35-3140-495f-bad2-c5cc578e18e2&quot;,&quot;parentUUID&quot;:&quot;296717c0-e643-4389-90fe-2cdec7022f8f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5e13b6e3-a479-4c68-909d-bfe2f43cf48b&quot;,&quot;title&quot;:&quot;#addJob&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/pubsub.test.js&quot;,&quot;file&quot;:&quot;/test/pubsub.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;add a new job based on a message&quot;,&quot;fullTitle&quot;:&quot;Scheduler PubSubHandler #addJob add a new job based on a message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3007,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pubSubClient.publish(\n    `schedule:add`,\n    JSON.stringify({\n        dbName: dbJobWithId.dbName,\n        jobId: dbJobWithId._id\n    }),\n    function(err, ok) {\n        setTimeout(\n            function() {\n                let j = scheduler.getJobById(dbJobWithId._id);\n                expect(j).to.exist;\n                done();\n            },\n            3000\n        );\n    }\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b3e7d20-1f8a-45f9-87a9-879e364a2176&quot;,&quot;parentUUID&quot;:&quot;5e13b6e3-a479-4c68-909d-bfe2f43cf48b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9b3e7d20-1f8a-45f9-87a9-879e364a2176&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3007,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;6710b6d0-e57c-4918-9ad8-25f249e85f3a&quot;,&quot;title&quot;:&quot;#cancel&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/pubsub.test.js&quot;,&quot;file&quot;:&quot;/test/pubsub.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should cancel the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler PubSubHandler #cancel should cancel the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pubSubClient.publish(\n    `schedule:delete`,\n    JSON.stringify({\n        dbName: dbJobWithId.dbName,\n        jobId: dbJobWithId._id\n    }),\n    async function(err, ok) {\n        delay(500);\n        let jobs = scheduler.listJobs();\n        expect(jobs[dbJobWithId._id]).to.not.exist;\n                        }\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af4f7258-2f34-4005-8e51-648387950246&quot;,&quot;parentUUID&quot;:&quot;6710b6d0-e57c-4918-9ad8-25f249e85f3a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;af4f7258-2f34-4005-8e51-648387950246&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;a16ceab1-6a1d-4ed8-88c2-960081e027c2&quot;,&quot;title&quot;:&quot;Scheduler RecurringJob&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/recur.test.js&quot;,&quot;file&quot;:&quot;/test/recur.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Scheduler RecurringJob\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler RecurringJob \&quot;before all\&quot; hook in \&quot;Scheduler RecurringJob\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(20000);\ntestConfig = await serverConfig.setProcessServerConfig()\nscheduler = require(\&quot;../lib/scheduler/index.js\&quot;);\n//jobCtrl = require(\&quot;../lib/scheduler/mongo/jobCtrl\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2011322-2141-4895-b43a-65d6716f77e4&quot;,&quot;parentUUID&quot;:&quot;a16ceab1-6a1d-4ed8-88c2-960081e027c2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;07477000-666b-41f9-9ca4-8deaa478e62b&quot;,&quot;title&quot;:&quot;#addRecurringJob&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/recur.test.js&quot;,&quot;file&quot;:&quot;/test/recur.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add a job&quot;,&quot;fullTitle&quot;:&quot;Scheduler RecurringJob #addRecurringJob should add a job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.addJob(job);5\nexpect(job.recur).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24120da6-2d8c-4f39-bd4a-074370a53f16&quot;,&quot;parentUUID&quot;:&quot;07477000-666b-41f9-9ca4-8deaa478e62b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;24120da6-2d8c-4f39-bd4a-074370a53f16&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;94e0bad2-76f8-45e0-8cd3-54cfb2b0f284&quot;,&quot;title&quot;:&quot;#listJobs&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/recur.test.js&quot;,&quot;file&quot;:&quot;/test/recur.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a hash with jobs&quot;,&quot;fullTitle&quot;:&quot;Scheduler RecurringJob #listJobs should return a hash with jobs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;jobs = scheduler.listJobs();\nexpect(Object.keys(jobs).length).to.be.greaterThan(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e90f0e40-1944-4b3e-9620-4ed866448967&quot;,&quot;parentUUID&quot;:&quot;94e0bad2-76f8-45e0-8cd3-54cfb2b0f284&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should contain job xyz&quot;,&quot;fullTitle&quot;:&quot;Scheduler RecurringJob #listJobs should contain job xyz&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(jobs[job._id]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7deed10f-9cdf-44b1-9420-baeed3fcfbd4&quot;,&quot;parentUUID&quot;:&quot;94e0bad2-76f8-45e0-8cd3-54cfb2b0f284&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e90f0e40-1944-4b3e-9620-4ed866448967&quot;,&quot;7deed10f-9cdf-44b1-9420-baeed3fcfbd4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bfbb976d-ee75-4ab6-8386-7b82bc8c8719&quot;,&quot;title&quot;:&quot;#getJob&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/recur.test.js&quot;,&quot;file&quot;:&quot;/test/recur.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a job by id&quot;,&quot;fullTitle&quot;:&quot;Scheduler RecurringJob #getJob should get a job by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.getJobById(job._id);\n//expect(j.nextInvocation()).to.equal(job.start);\nexpect(j.name).to.equal(job._id);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89e37eb8-e7ca-43de-9261-2e8ee1999bc7&quot;,&quot;parentUUID&quot;:&quot;bfbb976d-ee75-4ab6-8386-7b82bc8c8719&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;89e37eb8-e7ca-43de-9261-2e8ee1999bc7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;21654395-71b8-4ff8-8dea-526159a94c84&quot;,&quot;title&quot;:&quot;#runJob&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/recur.test.js&quot;,&quot;file&quot;:&quot;/test/recur.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should run the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler RecurringJob #runJob should run the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15004,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.getJobById(job._id);\nlet c = await delay(15000);\nexpect(j.triggeredJobs()).to.be.greaterThan(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af4c7b82-5d1e-4e98-81af-2168ed8a7951&quot;,&quot;parentUUID&quot;:&quot;21654395-71b8-4ff8-8dea-526159a94c84&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;af4c7b82-5d1e-4e98-81af-2168ed8a7951&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15004,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;dc407c4d-516a-40cc-9129-5f0a6da0bb58&quot;,&quot;title&quot;:&quot;Scheduler Scheduled Jobs&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Scheduler Scheduled Jobs\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs \&quot;before all\&quot; hook in \&quot;Scheduler Scheduled Jobs\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;;\n        testConfig = await serverConfig.setProcessServerConfig()\n        scheduler = require(\&quot;../lib/scheduler/index.js\&quot;);\n        jobCtrl = require(\&quot;../lib/scheduler/mongo/jobCtrl\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a52afd83-fd57-4156-af96-363a30573747&quot;,&quot;parentUUID&quot;:&quot;dc407c4d-516a-40cc-9129-5f0a6da0bb58&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;fa777cf2-f2f8-4eb3-a24c-397a071edb69&quot;,&quot;title&quot;:&quot;#addJob&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add a job&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #addJob should add a job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.addJob(job);\nexpect(job._id).to.equal(j.name);\n//setTimeout(done, 2500);\n// done()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5770bf2-fe50-4720-9cc0-7de4ab432f7a&quot;,&quot;parentUUID&quot;:&quot;fa777cf2-f2f8-4eb3-a24c-397a071edb69&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f5770bf2-fe50-4720-9cc0-7de4ab432f7a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;008ff2fd-2abe-4c79-8557-0f3a4fc30be1&quot;,&quot;title&quot;:&quot;#loadAllJobsFromMongo&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;#loadAllJobsFromMongo\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #loadAllJobsFromMongo \&quot;before all\&quot; hook in \&quot;#loadAllJobsFromMongo\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// runs before all tests in this block\nreturn jobCtrl.save(dbJob).then(j =&gt; {\n    dbJobWithId = j;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b605121-d5fa-494c-a5f6-3e5441f248b9&quot;,&quot;parentUUID&quot;:&quot;008ff2fd-2abe-4c79-8557-0f3a4fc30be1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;#loadAllJobsFromMongo\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #loadAllJobsFromMongo \&quot;after all\&quot; hook in \&quot;#loadAllJobsFromMongo\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//return jobCtrl.delete(dbJob.dbName, dbJobWithId._id.toString())&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8dfebdd-a988-4bfd-a4d0-cec0416a274e&quot;,&quot;parentUUID&quot;:&quot;008ff2fd-2abe-4c79-8557-0f3a4fc30be1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should load the jobs from mongo&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #loadAllJobsFromMongo should load the jobs from mongo&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return scheduler.loadJobsFromMongo().then(loadedJobs =&gt; {\n    expect(loadedJobs.length).to.be.greaterThan(0);\n    expect(scheduler.listJobs()[dbJobWithId.id]).to.exist;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff56ac9c-18b5-425c-91fd-d4b9ed1ba1c7&quot;,&quot;parentUUID&quot;:&quot;008ff2fd-2abe-4c79-8557-0f3a4fc30be1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ff56ac9c-18b5-425c-91fd-d4b9ed1ba1c7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;5068589f-f9ec-43a7-889b-87c8c44343f3&quot;,&quot;title&quot;:&quot;#listJobs&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a hash with jobs&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #listJobs should return a hash with jobs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;jobs = scheduler.listJobs();\nexpect(Object.keys(jobs).length).to.be.greaterThan(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;55361ef3-c2ed-49d1-b97e-f71d992c8eb7&quot;,&quot;parentUUID&quot;:&quot;5068589f-f9ec-43a7-889b-87c8c44343f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should contain job xyz&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #listJobs should contain job xyz&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(jobs[job._id]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0916cfe-6d7c-4685-9817-15cd01592b83&quot;,&quot;parentUUID&quot;:&quot;5068589f-f9ec-43a7-889b-87c8c44343f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;55361ef3-c2ed-49d1-b97e-f71d992c8eb7&quot;,&quot;f0916cfe-6d7c-4685-9817-15cd01592b83&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;6d10045f-99f6-488f-96a7-c224c97df87c&quot;,&quot;title&quot;:&quot;#getJob&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a job by id&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #getJob should get a job by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.getJobById(job._id);\n//expect(j.nextInvocation()).to.equal(job.start);\nexpect(j.name).to.equal(job._id);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4381f1d0-55ab-4b08-8bcb-9ce36751eb07&quot;,&quot;parentUUID&quot;:&quot;6d10045f-99f6-488f-96a7-c224c97df87c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4381f1d0-55ab-4b08-8bcb-9ce36751eb07&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;ad9b1b5b-0b29-4b5c-9f61-ce5b66afb613&quot;,&quot;title&quot;:&quot;#reschedule&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should reschedule the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #reschedule should reschedule the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let oldStart = job.start;\n            job.start =  new Date(job.start.getTime() + 100);\n            job.end =   new Date(job.end.getTime() + 10000);\n            let rj = scheduler.rescheduleJob(job);\n            expect(new Date(rj.nextInvocation()).getTime()).to.be.greaterThan(oldStart.getTime());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ed52f94-bfe1-4ec2-9c3e-f88c3cb356ca&quot;,&quot;parentUUID&quot;:&quot;ad9b1b5b-0b29-4b5c-9f61-ce5b66afb613&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7ed52f94-bfe1-4ec2-9c3e-f88c3cb356ca&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;19a79213-c186-4cb8-b911-bb2f5f940bcc&quot;,&quot;title&quot;:&quot;#cancel&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should cancel the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #cancel should cancel the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let cj = scheduler.cancelJob(job._id);\nlet jobs = scheduler.listJobs();\nexpect(jobs[job._id]).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e68276c-d863-4fc4-bd79-c7f54aaef654&quot;,&quot;parentUUID&quot;:&quot;19a79213-c186-4cb8-b911-bb2f5f940bcc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5e68276c-d863-4fc4-bd79-c7f54aaef654&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b198daf6-4f3d-48fa-ad19-d94ee21c77cd&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;51806488-302d-45f0-8cc4-4ff7830c46fc&quot;,&quot;title&quot;:&quot;Session Processor Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/session-processor/test/integration/sessionEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sessionEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Session Processor Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5111,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let testConfig = await testLib.getTestConfig();\n       \nthis.timeout(105000);\nlet deletes = await redis.delAsync([fullStreamName, eventHistoryName, eventProcessedName, `${tenant}.activeSessions`]);\nconsole.log(deletes)\nlet sp = new StreamPublisher(testStreamName,tenant);\nawait sp.sendEvent(\&quot;login\&quot;, {\n  token: \&quot;abcd234\&quot;,\n  user:  {jwt_token: &#x27;xxxxx&#x27;, tenantId: testConfig.tenantOne.tenantId, sid: testConfig.tenantOne.adminUser.sid}\n})\nfor (let index = 0; index &lt; 5; index++) {\n    await sp.sendEvent(\&quot;extendSession\&quot;, {\n        token: \&quot;abcd234\&quot;,\n        user: {\n            sid: testConfig.tenantOne.adminUser.sid,\n            user_name: \&quot;iapprove\&quot;,\n            email: \&quot;iapprove@integrify.com\&quot;,\n            name: \&quot;System System\&quot;\n        }\n    })\n}\n\nforkedProcessor = await sessionStreamConsumer.forkStreamProcessor(tenant)\nawait delay(5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd99ce54-dc6b-4998-89be-45f1064f228c&quot;,&quot;parentUUID&quot;:&quot;51806488-302d-45f0-8cc4-4ff7830c46fc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Session Processor Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;836eab00-887b-4f14-87e2-0c1d24b2985d&quot;,&quot;parentUUID&quot;:&quot;51806488-302d-45f0-8cc4-4ff7830c46fc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e2ee585e-8726-42d8-878a-5923bf2062bb&quot;,&quot;title&quot;:&quot;stream processor&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/session-processor/test/integration/sessionEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sessionEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a324d79e-d2c1-4547-abc2-1b27d44b7e4a&quot;,&quot;title&quot;:&quot;reads from session stream&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/session-processor/test/integration/sessionEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sessionEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should process events&quot;,&quot;fullTitle&quot;:&quot;Session Processor Tests stream processor reads from session stream should process events&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processedCount = await redis.zcardAsync(eventProcessedName)\n              let historyCount = await redis.zcardAsync(eventHistoryName)\n              expect(historyCount).to.equal(processedCount)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de5fc7aa-1df9-4066-b5b7-88a20745b61b&quot;,&quot;parentUUID&quot;:&quot;a324d79e-d2c1-4547-abc2-1b27d44b7e4a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;de5fc7aa-1df9-4066-b5b7-88a20745b61b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;411de186-1332-4361-8384-952ad9240412&quot;,&quot;title&quot;:&quot;handles events&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/session-processor/test/integration/sessionEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sessionEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should push events into REDIS activeSession set&quot;,&quot;fullTitle&quot;:&quot;Session Processor Tests stream processor handles events should push events into REDIS activeSession set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let sessions = await redis.zrangebyscoreAsync(`${tenant}.activeSessions`, \&quot;-inf\&quot;, \&quot;+inf\&quot;);\nconsole.log(sessions)\nexpect(sessions).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f1d8bee-0c66-4a1f-91b6-e81e3ef091ff&quot;,&quot;parentUUID&quot;:&quot;411de186-1332-4361-8384-952ad9240412&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3f1d8bee-0c66-4a1f-91b6-e81e3ef091ff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6a9a016b-2283-43d6-8c36-03aaddb9b6de&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;edb688e9-381f-4772-8d6d-ae19d0ea4ba6&quot;,&quot;title&quot;:&quot;recentlyVisited&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/libs/commonLib/tests/unit/bookmarks.spec.js&quot;,&quot;file&quot;:&quot;/tests/unit/bookmarks.spec.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;recentlyVisited\&quot;&quot;,&quot;fullTitle&quot;:&quot;recentlyVisited \&quot;before each\&quot; hook in \&quot;recentlyVisited\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:37,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const dom = new JSDOM(\&quot;&lt;html&gt;\\n       &lt;body&gt;\\n          &lt;div class=\\\&quot;v-toolbar__title hidden-sm-and-down\\\&quot;&gt;Holidays&lt;/div&gt;\\n       &lt;/body&gt;\\n     &lt;/html&gt;\&quot;);\nglobal.window = dom.window;\nglobal.document = dom.window.document;\nglobal.location = {\n  hostname: hostname\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe949245-7ab2-4611-857e-ad38cec72dcf&quot;,&quot;parentUUID&quot;:&quot;edb688e9-381f-4772-8d6d-ae19d0ea4ba6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;adds to recently visted history&quot;,&quot;fullTitle&quot;:&quot;recentlyVisited adds to recently visted history&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:362,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const bookmarks = require(&#x27;./mocks/bookmarks&#x27;);\nexpect(bookmarks.recentlyVisited).to.be.empty;\nawait bookmarks.addRecentlyVisited();\nexpect(bookmarks.recentlyVisited.length).to.equal(1);\nexpect(bookmarks.recentlyVisited[0].label).to.equal(&#x27;Holidays&#x27;);\nexpect(bookmarks.recentlyVisited[0].icon).to.equal(&#x27;mdi-calendar-month&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89b8e12b-5578-4b3c-8e93-30460272f8bc&quot;,&quot;parentUUID&quot;:&quot;edb688e9-381f-4772-8d6d-ae19d0ea4ba6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;89b8e12b-5578-4b3c-8e93-30460272f8bc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:362,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2a308104-0db4-4cfe-a4ac-5fd045a74c14&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;commits SET_SELECTED_FOR_EDIT mutation&quot;,&quot;fullTitle&quot;:&quot;commits SET_SELECTED_FOR_EDIT mutation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(mockstore.mutations.SET_SELECTED_FOR_EDIT).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29b5d372-3383-4850-a002-c37e0f829ea0&quot;,&quot;parentUUID&quot;:&quot;2a308104-0db4-4cfe-a4ac-5fd045a74c14&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;commits SET_SHOW_DIALOG mutation&quot;,&quot;fullTitle&quot;:&quot;commits SET_SHOW_DIALOG mutation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f517018b-c72f-4b62-82f0-18a46030df03&quot;,&quot;parentUUID&quot;:&quot;2a308104-0db4-4cfe-a4ac-5fd045a74c14&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1063c10f-9454-4ad9-96ac-d56d6edd62c3&quot;,&quot;title&quot;:&quot;PasswordSettings.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;renders correctly&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue renders correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(pwdSettingsApi.listPasswordSettings).to.have.been.called;\nexpect(pwdExpirationActiveCheckBox).to.be.exist;\nexpect(pwdExpirationActiveCheckBox.element.checked).to.equal(false);\nexpect(pwdExpirationTextBox).to.be.exist;\nexpect(pwdExpirationTextBox.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);\nexpect(pwdExpirationTextBox.element.value).to.equal(&#x27;7&#x27;);\nexpect(pwdStrengthActiveCheckBox).to.be.exist;\nexpect(pwdStrengthActiveCheckBox.element.checked).to.equal(false);\nexpect(minPwdLengthTextBox).to.be.exist;\nexpect(minPwdLengthTextBox.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);\nexpect(minPwdLengthTextBox.element.value).to.equal(&#x27;3&#x27;);\nexpect(maxPwdLengthTextBox).to.be.exist;\nexpect(maxPwdLengthTextBox.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);\nexpect(maxPwdLengthTextBox.element.value).to.equal(&#x27;10&#x27;);\nexpect(pwdStrengthExpressionTextBox).to.be.exist;\nexpect(pwdStrengthExpressionTextBox.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;); // remember \\\\ is escaped \\\nexpect(pwdStrengthExpressionTextBox.element.value).to.equal(&#x27;^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{3,10}$&#x27;);\nconst restoreButton = wrapper.find(&#x27;button#restoreDefaultPwdStrengthExpression&#x27;);\nexpect(restoreButton).to.be.exist;\nexpect(restoreButton.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);\nexpect(wrapper.find(&#x27;button#save&#x27;)).to.be.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;662a2c9f-95e2-4572-b4eb-8f6368fecdeb&quot;,&quot;parentUUID&quot;:&quot;1063c10f-9454-4ad9-96ac-d56d6edd62c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5c1319d3-6d32-4cf1-b565-705691888b0a&quot;,&quot;title&quot;:&quot;checkboxes enabling textboxes&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;enables Expiration (days) textbox when Enforce Password Expiration checkbox is checked&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue checkboxes enabling textboxes enables Expiration (days) textbox when Enforce Password Expiration checkbox is checked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pwdExpirationActiveCheckBox.trigger(&#x27;click&#x27;);\nawait wrapper.vm.$nextTick();\nexpect(pwdExpirationActiveCheckBox.element.checked).to.equal(true);\nexpect(pwdExpirationTextBox.attributes(&#x27;disabled&#x27;)).to.equal(undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7492fd4-b9ca-420c-bdeb-a2425155ad93&quot;,&quot;parentUUID&quot;:&quot;5c1319d3-6d32-4cf1-b565-705691888b0a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;enables min/max password length and strength expression textboxes when Enforce Password Strength checkbox is checked&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue checkboxes enabling textboxes enables min/max password length and strength expression textboxes when Enforce Password Strength checkbox is checked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pwdStrengthActiveCheckBox.trigger(&#x27;click&#x27;);\nawait wrapper.vm.$nextTick();\nexpect(pwdStrengthActiveCheckBox.element.checked).to.equal(true);\nexpect(minPwdLengthTextBox.attributes(&#x27;disabled&#x27;)).to.equal(undefined);\nexpect(maxPwdLengthTextBox.attributes(&#x27;disabled&#x27;)).to.equal(undefined);\nexpect(pwdStrengthExpressionTextBox.attributes(&#x27;disabled&#x27;)).to.equal(undefined);\nconst restoreButton = wrapper.find(&#x27;button#restoreDefaultPwdStrengthExpression&#x27;);\nexpect(restoreButton.attributes(&#x27;disabled&#x27;)).to.equal(undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ec502bb-e8a7-42be-bdc0-11171c4a38c4&quot;,&quot;parentUUID&quot;:&quot;5c1319d3-6d32-4cf1-b565-705691888b0a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f7492fd4-b9ca-420c-bdeb-a2425155ad93&quot;,&quot;9ec502bb-e8a7-42be-bdc0-11171c4a38c4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:46,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;525381dd-8995-48a1-ba6d-044d9b8bfe2c&quot;,&quot;title&quot;:&quot;password length change effects on strength regular expression&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;correctly adjusts strength expression when min pwd length changes&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue password length change effects on strength regular expression correctly adjusts strength expression when min pwd length changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pwdStrengthActiveCheckBox.trigger(&#x27;click&#x27;);\nminPwdLengthTextBox.element.value = &#x27;4&#x27;;\nminPwdLengthTextBox.trigger(&#x27;input&#x27;);\nmaxPwdLengthTextBox.element.value = &#x27;11&#x27;;\nmaxPwdLengthTextBox.trigger(&#x27;input&#x27;);\nawait wrapper.vm.$nextTick(); // remember \\\\ is escaped \\\nexpect(pwdStrengthExpressionTextBox.element.value).to.equal(&#x27;^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{4,11}$&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9720d1c4-f9e2-49a0-b0cc-5c25a186407f&quot;,&quot;parentUUID&quot;:&quot;525381dd-8995-48a1-ba6d-044d9b8bfe2c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9720d1c4-f9e2-49a0-b0cc-5c25a186407f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2552802c-2f92-4b1a-a02b-c3e6d87baf5b&quot;,&quot;title&quot;:&quot;restore default password strength&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;restores default password strength values when restore button is clicked&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue restore default password strength restores default password strength values when restore button is clicked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:30,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pwdStrengthActiveCheckBox.trigger(&#x27;click&#x27;);\nawait minPwdLengthTextBox.setValue(&#x27;4&#x27;);\nawait maxPwdLengthTextBox.setValue(&#x27;11&#x27;);\nawait wrapper.find(&#x27;button#restoreDefaultPwdStrengthExpression&#x27;).trigger(&#x27;click&#x27;); // remember \\\\ is escaped \\\nexpect(pwdStrengthExpressionTextBox.element.value).to.equal(&#x27;^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{3,10}$&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1a652df-ad64-482e-b653-09db7f958db8&quot;,&quot;parentUUID&quot;:&quot;2552802c-2f92-4b1a-a02b-c3e6d87baf5b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c1a652df-ad64-482e-b653-09db7f958db8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:30,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0150bee9-7906-4463-ae1d-c5d008483809&quot;,&quot;title&quot;:&quot;save password settings&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;calls updatePasswordSettings with correct params when Save button is clicked&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue save password settings calls updatePasswordSettings with correct params when Save button is clicked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(pwdExpirationActiveCheckBox.element.checked).to.equal(true); // change some settings in ui. make sure api call has correct params when saved\npwdExpirationTextBox.setValue(&#x27;10&#x27;);\nawait minPwdLengthTextBox.setValue(&#x27;4&#x27;);\nawait maxPwdLengthTextBox.setValue(&#x27;11&#x27;);\nwrapper.find(&#x27;button#save&#x27;).trigger(&#x27;click&#x27;);\nexpect(pwdSettingsApi.updatePasswordSettings).to.have.been.called;\nconst requestBody = pwdSettingsApi.updatePasswordSettings.args[0][1].requestBody;\nexpect(requestBody).to.be.ok;\nexpect(requestBody.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION&#x27;).settingsValue).to.equal(&#x27;10&#x27;);\nexpect(requestBody.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION_ACTIVE&#x27;).settingsValue).to.equal(&#x27;1&#x27;);\nexpect(requestBody.find(x =&gt; x.settingsKey == &#x27;PWD_STRENGTH_ACTIVE&#x27;).settingsValue).to.equal(&#x27;1&#x27;);\nexpect(requestBody.find(x =&gt; x.settingsKey == &#x27;PWD_STRENGTH&#x27;).settingsValue).to.equal(&#x27;^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{4,11}$&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1fbd7ad-b466-445b-9a55-bff2e9b713d3&quot;,&quot;parentUUID&quot;:&quot;0150bee9-7906-4463-ae1d-c5d008483809&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c1fbd7ad-b466-445b-9a55-bff2e9b713d3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:31,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[&quot;662a2c9f-95e2-4572-b4eb-8f6368fecdeb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a4b82d55-e642-40bf-a885-461c7a4ebf76&quot;,&quot;title&quot;:&quot;BiztimeDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;BiztimeDialog.vue\&quot;&quot;,&quot;fullTitle&quot;:&quot;BiztimeDialog.vue \&quot;before each\&quot; hook in \&quot;BiztimeDialog.vue\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;mockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e6cd51d-5f2f-43c9-b85e-67ad5e99ef52&quot;,&quot;parentUUID&quot;:&quot;a4b82d55-e642-40bf-a885-461c7a4ebf76&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;BiztimeDialog.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// console.log(&#x27;-- dd:&#x27;, wrapper.vm.$store.state.biztimes.selectedForEdit);\n// headline\nconst headline = wrapper.find(&#x27;span.headline&#x27;);\nexpect(headline.exists()).to.be.true;\nexpect(headline.text()).to.eq(`Edit Business Hours for ${biztime.dayOfWeek}`); // inputs\nexpect(startTimeRef.value).to.deep.equal(biztime.startTime);\nexpect(endTimeRef.value).to.deep.equal(biztime.endTime);\nexpect(activeRef.inputValue).to.equal(biztime.active); // btns\nexpect(saveBtn.exists()).to.be.true;\nexpect(closeBtn.exists()).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ff75a65-552d-48c2-a210-67347b3e3177&quot;,&quot;parentUUID&quot;:&quot;a4b82d55-e642-40bf-a885-461c7a4ebf76&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should save biztime&quot;,&quot;fullTitle&quot;:&quot;BiztimeDialog.vue should save biztime&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await saveBtn.trigger(&#x27;click&#x27;);\nexpect(mockstore.actions.saveBiztime).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1fea170-51ec-4d22-8c8f-98c62cfe5684&quot;,&quot;parentUUID&quot;:&quot;a4b82d55-e642-40bf-a885-461c7a4ebf76&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should close dialog&quot;,&quot;fullTitle&quot;:&quot;BiztimeDialog.vue should close dialog&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await closeBtn.trigger(&#x27;click&#x27;);\nexpect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;\nexpect(mockstore.mutations.SET_SELECTED_FOR_EDIT).to.have.been.calledWith(store.state.biztimes, {});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9acfe22-e6d2-45b3-8562-3bfb387780a3&quot;,&quot;parentUUID&quot;:&quot;a4b82d55-e642-40bf-a885-461c7a4ebf76&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6ff75a65-552d-48c2-a210-67347b3e3177&quot;,&quot;f1fea170-51ec-4d22-8c8f-98c62cfe5684&quot;,&quot;a9acfe22-e6d2-45b3-8562-3bfb387780a3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;85daad44-80b9-4922-a20b-26e1e0b77240&quot;,&quot;title&quot;:&quot;BiztimesTable.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;BiztimesTable.vue\&quot;&quot;,&quot;fullTitle&quot;:&quot;BiztimesTable.vue \&quot;before each\&quot; hook in \&quot;BiztimesTable.vue\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;mockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;553ded3d-5120-44e1-af81-01692148f044&quot;,&quot;parentUUID&quot;:&quot;85daad44-80b9-4922-a20b-26e1e0b77240&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;BiztimesTable.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// pageTitle\nexpect(pageTitle.exists()).to.be.true;\nexpect(pageTitle.text()).to.eq(&#x27;Business Hours&#x27;); // link to set permissions\nexpect(wrapper.find(&#x27;[data-test=\&quot;setPermissions\&quot;&#x27;).exists()).to.equal(true); // getBiztimes\nexpect(mockstore.actions.getBiztimes).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eacbcc59-80cc-494a-b28a-2a9fbd607d6f&quot;,&quot;parentUUID&quot;:&quot;85daad44-80b9-4922-a20b-26e1e0b77240&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eacbcc59-80cc-494a-b28a-2a9fbd607d6f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8f369f51-13b3-4615-854e-430c9a3ab40d&quot;,&quot;title&quot;:&quot;HolidaysTable.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;51ec1dde-27da-45d5-9a13-b8ae5cd75630&quot;,&quot;title&quot;:&quot;initial state&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;HolidaysTable.vue initial state \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_HolidaysTable.default, {\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5054dcc7-7b32-4338-8c9e-13cd642b2879&quot;,&quot;parentUUID&quot;:null,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4fbee845-85f8-40d4-b5bd-7c8d0aea25bf&quot;,&quot;title&quot;:&quot;Menu.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Menu.vue\&quot;&quot;,&quot;fullTitle&quot;:&quot;Menu.vue \&quot;before each\&quot; hook in \&quot;Menu.vue\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_Menu.default, {\n  store\n}); // data-app prevents warning during test: [Vuetify] Unable to locate target [data-app]\n// https://forum.vuejs.org/t/vuetify-data-app-true-and-problems-rendering-v-dialog-in-unit-tests/27495\ndocument.body.setAttribute(&#x27;data-app&#x27;, true);\nmenuButton = wrapper.find(\&quot;button#holidayMenu\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59c1d768-75e4-4283-86d8-528ef1a788b4&quot;,&quot;parentUUID&quot;:&quot;4fbee845-85f8-40d4-b5bd-7c8d0aea25bf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a68e6784-9ed9-4bdb-965c-dff7bef5a190&quot;,&quot;title&quot;:&quot;initial state&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays add holiday button&quot;,&quot;fullTitle&quot;:&quot;Menu.vue initial state displays add holiday button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:81,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;menuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  expect(wrapper.find(&#x27;#addHolidayMobile&#x27;).exists()).to.equal(true);\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b4025cc-814c-4953-9fb1-5d74ec790408&quot;,&quot;parentUUID&quot;:&quot;a68e6784-9ed9-4bdb-965c-dff7bef5a190&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays set roles &amp; permissions button&quot;,&quot;fullTitle&quot;:&quot;Menu.vue initial state displays set roles &amp; permissions button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:62,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;menuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  expect(wrapper.find(&#x27;[data-test=\&quot;setPermissionsMobile\&quot;&#x27;).exists()).to.equal(true);\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5299548-adc3-4c4b-9046-329c7ebdfcf3&quot;,&quot;parentUUID&quot;:&quot;a68e6784-9ed9-4bdb-965c-dff7bef5a190&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays disabled delete holidays button&quot;,&quot;fullTitle&quot;:&quot;Menu.vue initial state displays disabled delete holidays button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:58,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;menuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  const deleteButton = wrapper.find(&#x27;[data-test=\&quot;deleteButtonMobile\&quot;&#x27;);\n  expect(deleteButton.exists()).to.equal(true);\n  expect(deleteButton.attributes(&#x27;disabled&#x27;)).to.not.be.undefined;\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2aa6aa2c-53c6-4583-97f0-619d64cb0302&quot;,&quot;parentUUID&quot;:&quot;a68e6784-9ed9-4bdb-965c-dff7bef5a190&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8b4025cc-814c-4953-9fb1-5d74ec790408&quot;,&quot;c5299548-adc3-4c4b-9046-329c7ebdfcf3&quot;,&quot;2aa6aa2c-53c6-4583-97f0-619d64cb0302&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:201,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;27f8f45f-8750-4a53-9ee9-a09b9c8c7842&quot;,&quot;title&quot;:&quot;Menu item clicks&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;add holiday button click&quot;,&quot;fullTitle&quot;:&quot;Menu.vue Menu item clicks add holiday button click&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:66,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;menuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  expect(wrapper.find(&#x27;#addHolidayMobile&#x27;).exists()).to.equal(true);\n  wrapper.find(&#x27;button#addHolidayMobile&#x27;).trigger(&#x27;click&#x27;);\n  it(&#x27;commits SET_SELECTED_FOR_EDIT mutation&#x27;, () =&gt; {\n    expect(mockstore.mutations.SET_SELECTED_FOR_EDIT).to.have.been.called;\n  });\n  it(&#x27;commits SET_SHOW_DIALOG mutation&#x27;, () =&gt; {\n    expect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;\n  });\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b5bf409-2faa-471b-bd43-90e38a5e9263&quot;,&quot;parentUUID&quot;:&quot;27f8f45f-8750-4a53-9ee9-a09b9c8c7842&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;enables delete holidays button&quot;,&quot;fullTitle&quot;:&quot;Menu.vue Menu item clicks enables delete holidays button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:98,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const state = {\n  holidays: [{}, {}, {}],\n  selectedForDelete: [{}],\n  selectedForEdit: {},\n  showDialog: false\n};\nstore = new _vuex.default.Store({\n  modules: (0, _store.mockStore)({\n    state\n  }).modules\n});\nwrapper = (0, _mocks.initWrapper)(_Menu.default, {\n  store\n});\ndocument.body.setAttribute(&#x27;data-app&#x27;, true);\nmenuButton = wrapper.find(\&quot;button#holidayMenu\&quot;);\nmenuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  const deleteButton = wrapper.find(&#x27;[data-test=\&quot;deleteButtonMobile\&quot;&#x27;);\n  expect(deleteButton.attributes(&#x27;disabled&#x27;)).to.equal(undefined);\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7cbc8fa9-9f3c-4ea6-897d-84e70a4d27ba&quot;,&quot;parentUUID&quot;:&quot;27f8f45f-8750-4a53-9ee9-a09b9c8c7842&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0b5bf409-2faa-471b-bd43-90e38a5e9263&quot;,&quot;7cbc8fa9-9f3c-4ea6-897d-84e70a4d27ba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:164,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;45a5961a-5e85-485c-8224-3c77c8ce3fe9&quot;,&quot;title&quot;:&quot;Toolbar.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;93bbe32b-c1c5-4e88-9a24-bc122429aa25&quot;,&quot;title&quot;:&quot;initial state&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;initial state\&quot;&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue initial state \&quot;before each\&quot; hook in \&quot;initial state\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_Toolbar.default, {\n  store\n});\ndeleteButton = wrapper.find(&#x27;[data-test=\&quot;deleteButton\&quot;&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b58213d4-d3f0-4b78-a955-a1bd099db69a&quot;,&quot;parentUUID&quot;:&quot;93bbe32b-c1c5-4e88-9a24-bc122429aa25&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays add holiday button&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue initial state displays add holiday button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;button#addHoliday&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6eaeba93-fb5d-4f6b-ad81-e419a93ef438&quot;,&quot;parentUUID&quot;:&quot;93bbe32b-c1c5-4e88-9a24-bc122429aa25&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays set roles &amp; permissions button&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue initial state displays set roles &amp; permissions button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=\&quot;setPermissions\&quot;&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07a0f976-34f7-4a7d-8501-d6ad89eedee0&quot;,&quot;parentUUID&quot;:&quot;93bbe32b-c1c5-4e88-9a24-bc122429aa25&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays disabled delete holidays button&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue initial state displays disabled delete holidays button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(deleteButton.exists()).to.equal(true);\nexpect(deleteButton.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e09343d-1dd5-4422-a5d1-6fb062d6ce5b&quot;,&quot;parentUUID&quot;:&quot;93bbe32b-c1c5-4e88-9a24-bc122429aa25&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6eaeba93-fb5d-4f6b-ad81-e419a93ef438&quot;,&quot;07a0f976-34f7-4a7d-8501-d6ad89eedee0&quot;,&quot;5e09343d-1dd5-4422-a5d1-6fb062d6ce5b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ea4e6943-3418-46bd-9f28-27552e48f1a0&quot;,&quot;title&quot;:&quot;add holiday button click&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;add holiday button click\&quot;&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue add holiday button click \&quot;before each\&quot; hook in \&quot;add holiday button click\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;mockstore = (0, _store.mockStore)();\nstore = new _vuex.default.Store({\n  modules: mockstore.modules\n});\nwrapper = (0, _mocks.initWrapper)(_Toolbar.default, {\n  store\n});\nwrapper.find(&#x27;button#addHoliday&#x27;).trigger(&#x27;click&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd2d79c9-2e99-4e10-ba80-223d31763b96&quot;,&quot;parentUUID&quot;:&quot;ea4e6943-3418-46bd-9f28-27552e48f1a0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;commits SET_SELECTED_FOR_EDIT mutation&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue add holiday button click commits SET_SELECTED_FOR_EDIT mutation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(mockstore.mutations.SET_SELECTED_FOR_EDIT).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6acc9af-64f4-4c12-9742-d2382cac4b22&quot;,&quot;parentUUID&quot;:&quot;ea4e6943-3418-46bd-9f28-27552e48f1a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;commits SET_SHOW_DIALOG mutation&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue add holiday button click commits SET_SHOW_DIALOG mutation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f814f3e3-fa8c-4c58-8e84-62a95f1c6d2c&quot;,&quot;parentUUID&quot;:&quot;ea4e6943-3418-46bd-9f28-27552e48f1a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a6acc9af-64f4-4c12-9742-d2382cac4b22&quot;,&quot;f814f3e3-fa8c-4c58-8e84-62a95f1c6d2c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fb3989b0-e6ad-4c4b-a17a-4a3dd420841a&quot;,&quot;title&quot;:&quot;holidays have been selected for deletion&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;holidays have been selected for deletion\&quot;&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue holidays have been selected for deletion \&quot;before each\&quot; hook in \&quot;holidays have been selected for deletion\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const state = {\n  holidays: [{}, {}, {}],\n  selectedForDelete: [{}],\n  selectedForEdit: {},\n  showDialog: false\n};\nmockstore = (0, _store.mockStore)({\n  state\n});\nstore = new _vuex.default.Store({\n  modules: mockstore.modules\n});\nwrapper = (0, _mocks.initWrapper)(_Toolbar.default, {\n  store\n});\ndeleteButton = wrapper.find(&#x27;[data-test=\&quot;deleteButton\&quot;&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07842de0-3988-4c64-addf-da562c76e372&quot;,&quot;parentUUID&quot;:&quot;fb3989b0-e6ad-4c4b-a17a-4a3dd420841a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;enables delete holidays button&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue holidays have been selected for deletion enables delete holidays button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(deleteButton.attributes(&#x27;disabled&#x27;)).to.equal(undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3857d511-0b8b-4f01-9053-8360f6fc8bf9&quot;,&quot;parentUUID&quot;:&quot;fb3989b0-e6ad-4c4b-a17a-4a3dd420841a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;dispatches delete_holidays action when delete holidays button is clicked&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue holidays have been selected for deletion dispatches delete_holidays action when delete holidays button is clicked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;deleteButton.trigger(&#x27;click&#x27;);\nexpect(mockstore.actions.delete_holidays).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58087377-3282-40fa-b1ae-42cd221eed8a&quot;,&quot;parentUUID&quot;:&quot;fb3989b0-e6ad-4c4b-a17a-4a3dd420841a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3857d511-0b8b-4f01-9053-8360f6fc8bf9&quot;,&quot;58087377-3282-40fa-b1ae-42cd221eed8a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;23af2b98-50ea-4b29-bc2f-e849af94a271&quot;,&quot;title&quot;:&quot;biztime actions&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;biztime actions\&quot;&quot;,&quot;fullTitle&quot;:&quot;biztime actions \&quot;before each\&quot; hook in \&quot;biztime actions\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;commit = _sinon.default.spy();\nstate = {};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8098fda0-7c3a-4bc0-ac98-1bcf9038c564&quot;,&quot;parentUUID&quot;:&quot;23af2b98-50ea-4b29-bc2f-e849af94a271&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;biztime actions\&quot;&quot;,&quot;fullTitle&quot;:&quot;biztime actions \&quot;after each\&quot; hook in \&quot;biztime actions\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;_sinon.default.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63217eca-a5f1-4325-ba66-deef86555a06&quot;,&quot;parentUUID&quot;:&quot;23af2b98-50ea-4b29-bc2f-e849af94a271&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should getBiztimes&quot;,&quot;fullTitle&quot;:&quot;biztime actions should getBiztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await _actions.default.getBiztimes({\n  commit,\n  state\n}, _commonLib.default);\n(0, _chai.expect)(commit.args).to.deep.equal([[&#x27;SET_BIZTIMES&#x27;, [..._list.default]]]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61346a68-d915-4a49-8354-ff51abe1844c&quot;,&quot;parentUUID&quot;:&quot;23af2b98-50ea-4b29-bc2f-e849af94a271&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should saveBiztime&quot;,&quot;fullTitle&quot;:&quot;biztime actions should saveBiztime&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await _actions.default.saveBiztime({\n  commit,\n  state\n}, { ..._list.default[0],\n  $commonLib: _commonLib.default\n});\n(0, _chai.expect)(commit.args).to.deep.equal([[&#x27;SET_BIZTIMES&#x27;, [..._list.default]], [&#x27;SET_SELECTED_FOR_EDIT&#x27;, {}], [&#x27;SET_SHOW_DIALOG&#x27;, false]]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6714330b-ec84-482f-9eab-eb2af07d2919&quot;,&quot;parentUUID&quot;:&quot;23af2b98-50ea-4b29-bc2f-e849af94a271&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;61346a68-d915-4a49-8354-ff51abe1844c&quot;,&quot;6714330b-ec84-482f-9eab-eb2af07d2919&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e75317a4-43af-44dd-9071-82fa4b52013e&quot;,&quot;title&quot;:&quot;biztime getters&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get biztimes&quot;,&quot;fullTitle&quot;:&quot;biztime getters should get biztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const state = {\n  biztimes: JSON.parse(JSON.stringify(_list.default))\n};\nconst biztimes = _getters.default.biztimes(state);\n(0, _chai.expect)(biztimes).not.to.deep.equal(_list.default);\nbiztimes.forEach(biztime =&gt; {\n  const startTime = {\n    hour: biztime.startHour,\n    minute: biztime.startMinute\n  };\n  const endTime = {\n    hour: biztime.endHour,\n    minute: biztime.endMinute\n  };\n  (0, _chai.expect)(biztime.startTime).to.deep.equal(startTime);\n  (0, _chai.expect)(biztime.endTime).to.deep.equal(endTime);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c0f48e7-51a4-472d-b7cc-926b9de1cfa7&quot;,&quot;parentUUID&quot;:&quot;e75317a4-43af-44dd-9071-82fa4b52013e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8c0f48e7-51a4-472d-b7cc-926b9de1cfa7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3db2a6b7-d72d-4049-92e9-02be3247de96&quot;,&quot;title&quot;:&quot;biztime mutations&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should SET_BIZTIMES&quot;,&quot;fullTitle&quot;:&quot;biztime mutations should SET_BIZTIMES&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_BIZTIMES(state, [..._list.default]);\n(0, _chai.expect)(state.biztimes).to.deep.equal(_list.default);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a37c7ecd-7f9a-4c6b-bdb2-b46c76bb6bfe&quot;,&quot;parentUUID&quot;:&quot;3db2a6b7-d72d-4049-92e9-02be3247de96&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SELECTED_FOR_EDIT&quot;,&quot;fullTitle&quot;:&quot;biztime mutations should SET_SELECTED_FOR_EDIT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_SELECTED_FOR_EDIT(state, _list.default[0]);\n(0, _chai.expect)(state.selectedForEdit).to.deep.equal(_list.default[0]);\nSET_SELECTED_FOR_EDIT(state, _list.default[3]);\n(0, _chai.expect)(state.selectedForEdit).to.deep.equal(_list.default[3]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c85c99db-ea1d-444d-9454-1fa522807214&quot;,&quot;parentUUID&quot;:&quot;3db2a6b7-d72d-4049-92e9-02be3247de96&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SHOW_DIALOG&quot;,&quot;fullTitle&quot;:&quot;biztime mutations should SET_SHOW_DIALOG&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_SHOW_DIALOG(state, true);\n(0, _chai.expect)(state.showDialog).to.equal(true);\nSET_SHOW_DIALOG(state, false);\n(0, _chai.expect)(state.showDialog).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;65e79176-86cb-47f7-98d4-3767cffa7e3f&quot;,&quot;parentUUID&quot;:&quot;3db2a6b7-d72d-4049-92e9-02be3247de96&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a37c7ecd-7f9a-4c6b-bdb2-b46c76bb6bfe&quot;,&quot;c85c99db-ea1d-444d-9454-1fa522807214&quot;,&quot;65e79176-86cb-47f7-98d4-3767cffa7e3f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;29b5d372-3383-4850-a002-c37e0f829ea0&quot;,&quot;f517018b-c72f-4b62-82f0-18a46030df03&quot;],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;8.1.1&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;6.1.1&quot;},&quot;marge&quot;:{&quot;options&quot;:null,&quot;version&quot;:&quot;5.1.0&quot;}}}" data-config="{&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;test&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:false,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;htmlFile&quot;:&quot;/home/rich/integrify/1_PLUS/test/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>