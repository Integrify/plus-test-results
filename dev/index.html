<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:17,&quot;tests&quot;:469,&quot;passes&quot;:464,&quot;pending&quot;:0,&quot;failures&quot;:2,&quot;start&quot;:&quot;2021-03-26T21:58:45.904Z&quot;,&quot;end&quot;:&quot;2021-03-26T21:58:45.904Z&quot;,&quot;duration&quot;:83647,&quot;testsRegistered&quot;:469,&quot;passPercent&quot;:98.93390191897655,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:3,&quot;hasSkipped&quot;:true},&quot;results&quot;:[{&quot;uuid&quot;:&quot;8205dea7-03f7-4330-906a-0140a91bb17f&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// insert known tokens into redis (normally these are created by emailPasswordReset)\nconst mockRes = mocks.mockResponse();\nconst mockReq = await mocks.emailPasswordReset();\nawait redisClient.setexAsync(`pwReset:${accountGuid}`, 3600, securityToken);\nawait redisClient.setexAsync(`pwReset:${securityToken}`, 3600, accountGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f887c2c9-7f53-41cf-86e8-65c25ef7d664&quot;,&quot;parentUUID&quot;:&quot;8205dea7-03f7-4330-906a-0140a91bb17f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a new password&quot;,&quot;fullTitle&quot;:&quot;should create a new password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = mocks.createNewPassword(securityToken);\nconst mockRes = mocks.mockResponse();\nawait resetPassword.createNewPassword(mockReq, mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;\n// ensure createNewPassword cleans up redis\nexpect(await redisClient.getAsync(`pwReset:${accountGuid}`)).to.be.null;\nexpect(await redisClient.getAsync(`pwReset:${securityToken}`)).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4730b9f1-aef0-4b1c-8544-8d1d8e363c64&quot;,&quot;parentUUID&quot;:&quot;8205dea7-03f7-4330-906a-0140a91bb17f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;017d390d-1a85-422d-8f30-60e6e06157cd&quot;,&quot;title&quot;:&quot;Auth API API Key Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-auth/test/integration/functions/apiKey.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/apiKey.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Auth API API Key Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests \&quot;before all\&quot; hook in \&quot;Auth API API Key Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41195c33-6449-4ce5-8765-8a7af6c85a9a&quot;,&quot;parentUUID&quot;:&quot;017d390d-1a85-422d-8f30-60e6e06157cd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Auth API API Key Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests \&quot;after all\&quot; hook in \&quot;Auth API API Key Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await apiKey.deleteTestKeys(testConfig.tenantOne.tenantId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7404ea30-c96c-497e-825b-e4d6a303fcb8&quot;,&quot;parentUUID&quot;:&quot;017d390d-1a85-422d-8f30-60e6e06157cd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b6bf87b3-4148-473e-9f1e-ce742950f4d2&quot;,&quot;title&quot;:&quot;api key crud &quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-auth/test/integration/functions/apiKey.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/apiKey.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should insert an apiKey and return a doc&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should insert an apiKey and return a doc&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:41,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = {expires: new Date(new Date().getTime() + 60000), testOnly: true, description: \&quot;this is a test\&quot;}\nawait apiKey.createApiKey(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst inserted = mockRes.body;\nkey = inserted.key;\nid = inserted._id;\nexpect(inserted).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0927b7d-7776-41c7-bb48-294a041a8341&quot;,&quot;parentUUID&quot;:&quot;b6bf87b3-4148-473e-9f1e-ce742950f4d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list an apiKeys&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should list an apiKeys&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.key = key;\nawait apiKey.listApiKeys(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst keyList = mockRes.body;\nexpect(keyList).to.exist;\nexpect(keyList.length).to.be.gt(0);\nexpect(keyList[0].hashedKey).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;767460df-738a-42a7-81db-5d8fa57994e6&quot;,&quot;parentUUID&quot;:&quot;b6bf87b3-4148-473e-9f1e-ce742950f4d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should verify an apiKey&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should verify an apiKey&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.key = key;\nreq.params.tenant = testConfig.tenantOne.tenantId;\nawait apiKey.verifyApiKey(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst deleted = mockRes.body;\nexpect(deleted.message).to.equal(\&quot;api key valid\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b2ae6dd-d275-4947-9dee-f7280947aac3&quot;,&quot;parentUUID&quot;:&quot;b6bf87b3-4148-473e-9f1e-ce742950f4d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should  impersonate using a valid api key and return a JWT&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should  impersonate using a valid api key and return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:223,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.key = key;\nreq.params.tenant = testConfig.tenantOne.tenantId;\nreq.params.userName = testConfig.tenantOne.adminUser.userName;\nawait apiKey.impersonate(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst impersonated = mockRes.body;\nexpect(impersonated).to.exist;\nexpect(impersonated.token).to.exist;\nexpect(impersonated.userName).to.equal(testConfig.tenantOne.adminUser.userName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8567203d-d4ef-41eb-b5cc-eccfd423a914&quot;,&quot;parentUUID&quot;:&quot;b6bf87b3-4148-473e-9f1e-ce742950f4d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should  impersonate using a valid env token and return a JWT&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should  impersonate using a valid env token and return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\n\n\nreq.params.tenant = testConfig.tenantOne.tenantId;\nreq.params.userName = testConfig.tenantOne.adminUser.userName;\nawait apiKey.impersonateWithSystemApiKey(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst impersonated = mockRes.body;\nexpect(impersonated).to.exist;\nexpect(impersonated.token).to.exist;\nexpect(impersonated.userName).to.equal(testConfig.tenantOne.adminUser.userName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2a82f08-7047-443f-93d2-336c4c497ab3&quot;,&quot;parentUUID&quot;:&quot;b6bf87b3-4148-473e-9f1e-ce742950f4d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete an apiKey and return a doc&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should delete an apiKey and return a doc&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.id = id;\nawait apiKey.deleteApiKey(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst deleted = mockRes.body;\nexpect(deleted.message).to.equal(\&quot;delete successful\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca4c4fa3-8897-430d-bf2b-9c6b10d7620e&quot;,&quot;parentUUID&quot;:&quot;b6bf87b3-4148-473e-9f1e-ce742950f4d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f0927b7d-7776-41c7-bb48-294a041a8341&quot;,&quot;767460df-738a-42a7-81db-5d8fa57994e6&quot;,&quot;2b2ae6dd-d275-4947-9dee-f7280947aac3&quot;,&quot;8567203d-d4ef-41eb-b5cc-eccfd423a914&quot;,&quot;f2a82f08-7047-443f-93d2-336c4c497ab3&quot;,&quot;ca4c4fa3-8897-430d-bf2b-9c6b10d7620e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:305,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2db1f807-68d4-4635-adcf-43bab9bd7316&quot;,&quot;title&quot;:&quot;Auth API Auth Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Auth API Auth Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests \&quot;before all\&quot; hook in \&quot;Auth API Auth Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1deaebe9-5d70-41a2-8ef7-4e7710b6fc58&quot;,&quot;parentUUID&quot;:&quot;2db1f807-68d4-4635-adcf-43bab9bd7316&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;33f86f42-c97e-4cdb-a98d-d23c11144667&quot;,&quot;title&quot;:&quot;getGuestToken&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return guest auth token&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests getGuestToken should return guest auth token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:41,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet getGuestTokenEvent = await mocks.getGuestTokenEvent()\n\t\t\tlet results = await dbauth.getGuestToken(getGuestTokenEvent, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n      expect(mockRes.body.length).to.be.greaterThan(1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8bb1ccf0-df44-448c-b8e2-6859972c55f1&quot;,&quot;parentUUID&quot;:&quot;33f86f42-c97e-4cdb-a98d-d23c11144667&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8bb1ccf0-df44-448c-b8e2-6859972c55f1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:41,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;48f5370c-2890-438a-8a78-2a9412e91301&quot;,&quot;title&quot;:&quot;login&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a contact with a token&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests login should return a contact with a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:117,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet loginEvent = await mocks.loginEvent()\n\t\t\tlet results = await dbauth.login(loginEvent, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst contactInfo = mockRes.body;\n\t\t\texpect(contactInfo.userName).equal(loginEvent.body.username);\n\t\t\texpect(contactInfo.token).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04538138-c6ab-4d09-8b26-cee7fbbeead2&quot;,&quot;parentUUID&quot;:&quot;48f5370c-2890-438a-8a78-2a9412e91301&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;04538138-c6ab-4d09-8b26-cee7fbbeead2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:117,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ee2d0ff8-f15b-4a78-8b2a-a58ec593e56d&quot;,&quot;title&quot;:&quot;refreshJwt&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;refresh a token a user out&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests refreshJwt refresh a token a user out&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:97,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let mockRes = await mocks.mockResponse();\nlet loginEvent = await mocks.loginEvent()\nlet logoutEvent = await mocks.logoutEvent()\nawait dbauth.login(loginEvent, mockRes);\nconst contactInfo = mockRes.body;\nlogoutEvent.cookies = {\&quot;integrifyRefreshToken\&quot;: contactInfo.refreshToken };\nlogoutEvent.body = {token: contactInfo.token, refreshToken: contactInfo.refreshToken }\nawait jwtFuncs.refreshJwt(logoutEvent, await mocks.mockResponse());\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10229dc7-c314-465c-8aa3-36f3764fdc86&quot;,&quot;parentUUID&quot;:&quot;ee2d0ff8-f15b-4a78-8b2a-a58ec593e56d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;10229dc7-c314-465c-8aa3-36f3764fdc86&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:97,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;266df156-b6e9-4fc4-be2a-62624ae717d4&quot;,&quot;title&quot;:&quot;isAuthenticated&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;refresh a token a user out&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests isAuthenticated refresh a token a user out&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let mockRes = await mocks.mockResponse();\n\nawait jwtFuncs.isAuthenticated({cookies: {integrifyToken: \&quot;fake\&quot;}}, mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;392be01c-041e-480b-bbf9-812a90a4a7d2&quot;,&quot;parentUUID&quot;:&quot;266df156-b6e9-4fc4-be2a-62624ae717d4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;392be01c-041e-480b-bbf9-812a90a4a7d2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;039c15e4-afb7-431e-99fa-ebbf1a48662d&quot;,&quot;title&quot;:&quot;logout&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should log a user out&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests logout should log a user out&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nlet logoutEvent = await mocks.logoutEvent()\nawait dbauth.logout(logoutEvent, mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;\nexpect(mockRes.body).to.deep.equal({message: &#x27;OK&#x27;});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88f98c4a-4f95-4029-981d-2a2e4e4881f9&quot;,&quot;parentUUID&quot;:&quot;039c15e4-afb7-431e-99fa-ebbf1a48662d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;88f98c4a-4f95-4029-981d-2a2e4e4881f9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b680e68e-e206-4aab-ba83-f5ccb2f10699&quot;,&quot;title&quot;:&quot;Auth API Reset Password Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-auth/test/integration/functions/resetPassword.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/resetPassword.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Auth API Reset Password Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API Reset Password Tests \&quot;before all\&quot; hook in \&quot;Auth API Reset Password Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(1050000);\nprocess.env.TESTING = true;\nresetRewired.__set__(&#x27;nodemailer&#x27;, nodemailerMock);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c554431d-cf13-4a7c-b463-cbeee9b0f909&quot;,&quot;parentUUID&quot;:&quot;b680e68e-e206-4aab-ba83-f5ccb2f10699&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;aa436849-df74-4a73-bd7e-3e8de0528ebe&quot;,&quot;title&quot;:&quot;emailUsernames&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-auth/test/integration/functions/resetPassword.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/resetPassword.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should send an email of accounts for existing email&quot;,&quot;fullTitle&quot;:&quot;Auth API Reset Password Tests emailUsernames should send an email of accounts for existing email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let config = (await Config.getConfig()).test;\n      const accountGuid = config.tenantOne.adminUser.sid.toLowerCase();\n      const mockRes = mocks.mockResponse();\n      const mockReq = await mocks.emailUsernames();\n      await resetRewired.emailUsernames(mockReq, mockRes);\n      expect(mockRes.statusCode).equal(200);\n      expect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c7f0a2e9-d691-49ce-8464-5cb94622c4e2&quot;,&quot;parentUUID&quot;:&quot;aa436849-df74-4a73-bd7e-3e8de0528ebe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c7f0a2e9-d691-49ce-8464-5cb94622c4e2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e16877b1-e4f2-4a6f-b327-cf38d73000b4&quot;,&quot;title&quot;:&quot;passwordReset&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-auth/test/integration/functions/resetPassword.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/resetPassword.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;passwordReset\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API Reset Password Tests passwordReset \&quot;before all\&quot; hook in \&quot;passwordReset\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;resetRewired.__set__(&#x27;nodemailer&#x27;, nodemailerMock);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69252577-2b0f-42be-9d73-c7574e6f7051&quot;,&quot;parentUUID&quot;:&quot;e16877b1-e4f2-4a6f-b327-cf38d73000b4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;emailPassworReset&quot;,&quot;fullTitle&quot;:&quot;Auth API Reset Password Tests passwordReset emailPassworReset&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let config = (await Config.getConfig()).test;\nconst accountGuid = config.tenantOne.adminUser.sid.toLowerCase();\nconst mockRes = mocks.mockResponse();\nconst mockReq = await mocks.emailPasswordReset();\nawait resetRewired.emailPasswordReset(mockReq, mockRes);\n// check if security token was added to redis\nconst securityToken = await redisClient.getAsync(`pwReset:${accountGuid}`);\nconst accountEntry = await redisClient.getAsync(`pwReset:${securityToken}`);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;\nexpect(securityToken).to.exist;\nexpect(accountEntry).to.exist;\n// clean up entries leftover from calling emailPasswordReset\nawait redisClient.del(`pwReset:${accountGuid}`);\nawait redisClient.del(`pwReset:${securityToken}`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;308316ec-bcaa-4063-a085-c94c2cd7af27&quot;,&quot;parentUUID&quot;:&quot;e16877b1-e4f2-4a6f-b327-cf38d73000b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;308316ec-bcaa-4063-a085-c94c2cd7af27&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7e9779a8-b62e-4857-af7d-cfda847e5ec8&quot;,&quot;title&quot;:&quot;Auth API SAML Settings Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-auth/test/integration/functions/samlSettings.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/samlSettings.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Auth API SAML Settings Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests \&quot;before all\&quot; hook in \&quot;Auth API SAML Settings Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d467fce-6c26-4f3a-9d1e-c8389d5ab759&quot;,&quot;parentUUID&quot;:&quot;7e9779a8-b62e-4857-af7d-cfda847e5ec8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Auth API SAML Settings Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests \&quot;after all\&quot; hook in \&quot;Auth API SAML Settings Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await samlSettings.deleteSamlSettingsByName(testConfig.tenantOne.tenantId, &#x27;unitTestIDP&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b449e111-c219-4652-84bf-ea9b791e4a96&quot;,&quot;parentUUID&quot;:&quot;7e9779a8-b62e-4857-af7d-cfda847e5ec8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;47af5148-86b0-4957-a2d0-47ee0e9a279b&quot;,&quot;title&quot;:&quot;SAML Settings crud &quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-auth/test/integration/functions/samlSettings.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/samlSettings.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should insert saml settings and return a doc&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should insert saml settings and return a doc&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\n           \nreq.body = data;\nawait samlSettings.createSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst inserted = mockRes.body;\n\nsamlId = inserted._id;\nexpect(inserted).to.exist;\nexpect(inserted.idpMetaData).to.equal(data.idpMetaData);\nexpect(inserted.idpName).to.equal(data.idpName);\nexpect(inserted.idpDescription).to.equal(data.idpDescription);\nexpect(inserted.createdByDetail).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a210302f-8782-4222-9d08-3968432febf9&quot;,&quot;parentUUID&quot;:&quot;47af5148-86b0-4957-a2d0-47ee0e9a279b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get saml settings without an id&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should get saml settings without an id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nawait samlSettings.getSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result.createdByDetail).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2dd0b0c1-16fc-4da9-9084-42c7e0615062&quot;,&quot;parentUUID&quot;:&quot;47af5148-86b0-4957-a2d0-47ee0e9a279b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get saml settings with an id&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should get saml settings with an id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.samlId = samlId.toString();\nawait samlSettings.getSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result._id.toString()).to.equal(samlId.toString());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7cadf6e0-aacd-4da1-807c-4ab25479e670&quot;,&quot;parentUUID&quot;:&quot;47af5148-86b0-4957-a2d0-47ee0e9a279b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update saml settings&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should update saml settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.samlId = samlId;\n\nreq.body = data;\n\nawait samlSettings.updateSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;996327b2-dc4a-497a-b6d0-d770b3b9e792&quot;,&quot;parentUUID&quot;:&quot;47af5148-86b0-4957-a2d0-47ee0e9a279b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return sp metadata&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should return sp metadata&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.tenant = testConfig.tenantOne.tenantId;\nawait samlSettings.getMetaData(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst metadata = mockRes.body;\nexpect(metadata).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f8e50c7e-e500-4283-93d9-c30b1e9eb3fa&quot;,&quot;parentUUID&quot;:&quot;47af5148-86b0-4957-a2d0-47ee0e9a279b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete saml settings&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should delete saml settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.samlId = samlId;\nawait samlSettings.deleteSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst deleted = mockRes.body;\nexpect(deleted.message).to.equal(\&quot;delete successful\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee0c73e5-877a-4d32-976b-27efc469dfa0&quot;,&quot;parentUUID&quot;:&quot;47af5148-86b0-4957-a2d0-47ee0e9a279b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a210302f-8782-4222-9d08-3968432febf9&quot;,&quot;2dd0b0c1-16fc-4da9-9084-42c7e0615062&quot;,&quot;7cadf6e0-aacd-4da1-807c-4ab25479e670&quot;,&quot;996327b2-dc4a-497a-b6d0-d770b3b9e792&quot;,&quot;f8e50c7e-e500-4283-93d9-c30b1e9eb3fa&quot;,&quot;ee0c73e5-877a-4d32-976b-27efc469dfa0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:57,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;4730b9f1-aef0-4b1c-8544-8d1d8e363c64&quot;],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3fba017c-652e-4656-8503-0fbadec45f22&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3c0a0557-4d36-492f-96a7-21f890f4f95c&quot;,&quot;title&quot;:&quot;Dashboard controller tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-dashboards/test/dashboard.controller.test.js&quot;,&quot;file&quot;:&quot;/test/dashboard.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e7d09a2-e24f-496c-acd3-0a0814597134&quot;,&quot;parentUUID&quot;:&quot;3c0a0557-4d36-492f-96a7-21f890f4f95c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test&#x27;});\ndeleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test-copy&#x27;});\nconsole.log(deleted);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8e0c93e-6ec3-48ca-a83e-2ad31ec183ef&quot;,&quot;parentUUID&quot;:&quot;3c0a0557-4d36-492f-96a7-21f890f4f95c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;368c0588-26bd-419c-8654-b2528ad15954&quot;,&quot;title&quot;:&quot;dashboard crud &quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-dashboards/test/dashboard.controller.test.js&quot;,&quot;file&quot;:&quot;/test/dashboard.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should create a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:46,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  dashboard = await dashboardController.createDashboard(tenant, dashboardObj);\nsid = dashboard.sid;\nexpect(sid).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c7048bac-d547-4742-8653-a672bc22ea2b&quot;,&quot;parentUUID&quot;:&quot;368c0588-26bd-419c-8654-b2528ad15954&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list dashboards for end users&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should list dashboards for end users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  dashboards = await dashboardController.listDashboards(tenant);\n         expect(dashboards.length).to.be.gt(0);  \n         let createdDashord  = dashboards.find((d) =&gt; {\n             return d.sid === sid;\n         })\n         expect\n         (createdDashord).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;acd5e8cf-dec9-417c-96b2-0560ff018629&quot;,&quot;parentUUID&quot;:&quot;368c0588-26bd-419c-8654-b2528ad15954&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should get a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;dashboard = await dashboardController.getDashboard(tenant,sid);\n            expect(dashboard).to.exist         \n            expect(dashboard.sid).to.equal(sid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e027c684-7c21-4f78-b2d0-2a352f33c37d&quot;,&quot;parentUUID&quot;:&quot;368c0588-26bd-419c-8654-b2528ad15954&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should update a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;dashboard.banner = &#x27;test-updated&#x27;;\n            const updatedDashboard = await dashboardController.updateDashboard(tenant,dashboard.toObject());\n            expect(updatedDashboard).to.exist         \n            expect(updatedDashboard.sid).to.equal(sid)\n            expect(updatedDashboard.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3460b28b-0748-4a7c-b5c4-9e7ba9fef965&quot;,&quot;parentUUID&quot;:&quot;368c0588-26bd-419c-8654-b2528ad15954&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should copy a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should copy a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const copiedDashboard = await dashboardController.copyDashboard(tenant, sid);\n            expect(copiedDashboard).to.exist         \n            expect(copiedDashboard.sid).to.not.equal(sid)\n            expect(copiedDashboard._id).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c37b9484-9c04-445c-bb8d-ea47b7ed96e3&quot;,&quot;parentUUID&quot;:&quot;368c0588-26bd-419c-8654-b2528ad15954&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  delete a a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const deleted = await dashboardController.deleteDashboard(tenant,sid);\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c59796e-bd28-423b-a1aa-3979e9b42661&quot;,&quot;parentUUID&quot;:&quot;368c0588-26bd-419c-8654-b2528ad15954&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c7048bac-d547-4742-8653-a672bc22ea2b&quot;,&quot;acd5e8cf-dec9-417c-96b2-0560ff018629&quot;,&quot;e027c684-7c21-4f78-b2d0-2a352f33c37d&quot;,&quot;3460b28b-0748-4a7c-b5c4-9e7ba9fef965&quot;,&quot;c37b9484-9c04-445c-bb8d-ea47b7ed96e3&quot;,&quot;9c59796e-bd28-423b-a1aa-3979e9b42661&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:76,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b57ead01-9ac0-4a49-9e94-3c7c81bd786b&quot;,&quot;title&quot;:&quot;Dashboard route handler tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-dashboards/test/dashboard.handlers.test.js&quot;,&quot;file&quot;:&quot;/test/dashboard.handlers.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\n\ntestConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;\nsession = (await mocks.req()).oauth;\nperms  = await permissions.currentUserPermissions(session)\nlet permissionsWithRun = perms.concat([\n    {\n        \&quot;objectType\&quot;: \&quot;tab\&quot;,\n        \&quot;ownerSid\&quot;: \&quot;bb6cb26b-d179-4763-b2cb-69d107dfd1d8\&quot;,\n        \&quot;ownerType\&quot;: \&quot;system\&quot;,\n        \&quot;permissions\&quot;: enums.permissionTypes.run,\n        \&quot;roleName\&quot;: \&quot;system administrators\&quot;,\n        \&quot;roleGuid\&quot;: \&quot;a48ea7cf-f1ba-4ca9-bf17-2c97d49336cd\&quot;\n      }\n])\nawait permissions.cachePerms(session, permissionsWithRun);\nconsole.log(permissionsWithRun)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8bb6b88-2fd3-4898-8438-d4f2a8cb29e8&quot;,&quot;parentUUID&quot;:&quot;b57ead01-9ac0-4a49-9e94-3c7c81bd786b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test&#x27;});\ndeleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test-copy&#x27;});\nconsole.log(deleted);\nawait permissions.cachePerms(session, perms);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9350e3c9-f346-44d1-8754-f7ad29d0f586&quot;,&quot;parentUUID&quot;:&quot;b57ead01-9ac0-4a49-9e94-3c7c81bd786b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5df2f786-2720-4ca5-8029-dc1668db36ce&quot;,&quot;title&quot;:&quot;dashboard crud &quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-dashboards/test/dashboard.handlers.test.js&quot;,&quot;file&quot;:&quot;/test/dashboard.handlers.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should create a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = dashboardObj;\nawait handlers.createDashboard(req,mockRes);\nconst dashboard = req.body;\nsid = dashboard.sid;\nexpect(sid).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;35325d00-934c-4040-8288-5a271b4ce3c8&quot;,&quot;parentUUID&quot;:&quot;5df2f786-2720-4ca5-8029-dc1668db36ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list dashboards for end users&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should list dashboards for end users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nawait handlers.listDashboards(req,mockRes);\nconst  dashboards = mockRes.body;\nexpect(dashboards.length).to.be.gt(0);  \nlet createdDashboard  = dashboards.find((d) =&gt; {\n    return d.sid === sid;\n})\nexpect(createdDashboard).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c57d25e0-d3e0-4815-8ea3-bd3d02660f64&quot;,&quot;parentUUID&quot;:&quot;5df2f786-2720-4ca5-8029-dc1668db36ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list dashboards for admins&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should list dashboards for admins&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.query.admin = true;\nawait handlers.listDashboards(req,mockRes);\nconst  dashboards = mockRes.body;\nexpect(dashboards.length).to.be.gt(0);  \nlet createdDashboard  = dashboards.find((d) =&gt; {\n    return d.sid === sid;\n})\nexpect(createdDashboard).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0d0ad45-bbee-4ec6-bbaf-74c05096de36&quot;,&quot;parentUUID&quot;:&quot;5df2f786-2720-4ca5-8029-dc1668db36ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should get a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.sid = sid;\nawait handlers.getDashboard(req,mockRes);\ndashboard = mockRes.body;\nexpect(dashboard).to.exist         \nexpect(dashboard.sid).to.equal(sid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff21ab27-d028-476f-a57b-25e590c71e45&quot;,&quot;parentUUID&quot;:&quot;5df2f786-2720-4ca5-8029-dc1668db36ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should update a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.sid = sid;\nreq.body = dashboard.toObject();\nawait handlers.updateDashboard(req,mockRes);\nconst updatedDashboard = mockRes.body;\nexpect(updatedDashboard).to.exist         \nexpect(updatedDashboard.sid).to.equal(sid)\nexpect(updatedDashboard.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63597743-77c4-4cfb-902e-bac18bd4c019&quot;,&quot;parentUUID&quot;:&quot;5df2f786-2720-4ca5-8029-dc1668db36ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should copy a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should copy a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.sid = sid;\nreq.body = dashboard.toObject();\nawait handlers.copyDashboard(req,mockRes);\nconst copiedDashboard = mockRes.body;\nexpect(copiedDashboard).to.exist         \nexpect(copiedDashboard.sid).to.not.equal(sid)\nexpect(copiedDashboard._id).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83f2795d-dafe-4667-a401-306b7196ec3a&quot;,&quot;parentUUID&quot;:&quot;5df2f786-2720-4ca5-8029-dc1668db36ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should delete a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.sid = sid;\nawait handlers.deleteDashboard(req,mockRes);\nlet deleted = mockRes.body;\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2161a961-ddda-43c8-b5fb-172c871172b8&quot;,&quot;parentUUID&quot;:&quot;5df2f786-2720-4ca5-8029-dc1668db36ce&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;35325d00-934c-4040-8288-5a271b4ce3c8&quot;,&quot;c57d25e0-d3e0-4815-8ea3-bd3d02660f64&quot;,&quot;f0d0ad45-bbee-4ec6-bbaf-74c05096de36&quot;,&quot;ff21ab27-d028-476f-a57b-25e590c71e45&quot;,&quot;63597743-77c4-4cfb-902e-bac18bd4c019&quot;,&quot;83f2795d-dafe-4667-a401-306b7196ec3a&quot;,&quot;2161a961-ddda-43c8-b5fb-172c871172b8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:35,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7bf07999-1c14-4f4c-82b7-a3b183042064&quot;,&quot;title&quot;:&quot;Legacy tab mongo tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-dashboards/test/tab.test.js&quot;,&quot;file&quot;:&quot;/test/tab.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig()\ntenant = testConfig.tenantOne.tenantId;;\ntab = await dashboardController.createTestTab(tenant)\nexpect(tab.SID).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d5947d2-3dcb-4572-bcef-c5da79587d2d&quot;,&quot;parentUUID&quot;:&quot;7bf07999-1c14-4f4c-82b7-a3b183042064&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await dashboardController.deleteTabs(tenant, {Title: &#x27;created-by-mocha-test&#x27;});\ndeleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test&#x27;});\ndeleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test-migrated&#x27;});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;70a6973b-29d9-4bfa-bd23-a77b19c19bf7&quot;,&quot;parentUUID&quot;:&quot;7bf07999-1c14-4f4c-82b7-a3b183042064&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c830f389-52bf-46ce-9953-17f0429b5ba5&quot;,&quot;title&quot;:&quot;tab crud &quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-dashboards/test/tab.test.js&quot;,&quot;file&quot;:&quot;/test/tab.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a legacy tab&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should create a legacy tab&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  tab = await dashboardController.createTestTab(tenant);\n\n tabSid = tab.SID;\n expect(tabSid).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4aefb2f-6df7-481e-8101-ff8c6f39583c&quot;,&quot;parentUUID&quot;:&quot;c830f389-52bf-46ce-9953-17f0429b5ba5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list legacy tabs&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should list legacy tabs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  tabs = await dashboardController.listTabs(tenant);\n expect(tabs.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3fa1ad81-6053-4151-902d-e69f1a670684&quot;,&quot;parentUUID&quot;:&quot;c830f389-52bf-46ce-9953-17f0429b5ba5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a legacy tab&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should get a legacy tab&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;tab = await dashboardController.getTab(tenant,tabSid);\n            expect(tab).to.exist         \n            expect(tab.SID).to.equal(tabSid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98a3e89d-44d2-492a-b507-baeebe32caa6&quot;,&quot;parentUUID&quot;:&quot;c830f389-52bf-46ce-9953-17f0429b5ba5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a tab using a dashboard object&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should update a tab using a dashboard object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const dashboardObject = {\n    sid: tab.SID,\n    title: tab.Title,\n    ordinal: 5000,\n}\nconst dashboardMask = await dashboardController.updateTabFromDashboardObject(tenant,dashboardObject);\nexpect(dashboardObject.modifiedDate).to.exist\ntab = await dashboardController.getTab(tenant,tab.SID);\nexpect(tab).to.exist         \nexpect(tab.SID).to.equal(tabSid)\nexpect(tab.Ordinal).to.equal(dashboardObject.ordinal)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7adedd6f-9e0c-433d-b9c6-473ad87a9c84&quot;,&quot;parentUUID&quot;:&quot;c830f389-52bf-46ce-9953-17f0429b5ba5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should convert a legacy tab&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should convert a legacy tab&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  dashboard = await dashboardController.converTabToDashboard(tab);\n            expect(dashboard).to.exist         \n            expect(dashboard.layouts).to.exist;\n            expect(dashboard.legacySid).to.equal(tabSid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0740b33c-38be-4abe-bb52-feeed15a0f0a&quot;,&quot;parentUUID&quot;:&quot;c830f389-52bf-46ce-9953-17f0429b5ba5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should migrate legacy tab to dashboard&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should migrate legacy tab to dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  success = await dashboardController.migrateTabToDashboard(tenant, tabSid);\n            expect(success.sid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b173e53-46fa-4ce4-9658-aa542f1f9236&quot;,&quot;parentUUID&quot;:&quot;c830f389-52bf-46ce-9953-17f0429b5ba5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f4aefb2f-6df7-481e-8101-ff8c6f39583c&quot;,&quot;3fa1ad81-6053-4151-902d-e69f1a670684&quot;,&quot;98a3e89d-44d2-492a-b507-baeebe32caa6&quot;,&quot;7adedd6f-9e0c-433d-b9c6-473ad87a9c84&quot;,&quot;0740b33c-38be-4abe-bb52-feeed15a0f0a&quot;,&quot;4b173e53-46fa-4ce4-9658-aa542f1f9236&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:26,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a6b19b8d-8022-429e-845c-4b0f7463a079&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0a270498-a34c-4902-b9f2-903304a89b14&quot;,&quot;title&quot;:&quot;Files db controller tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-files/test/db/file.controller.test.js&quot;,&quot;file&quot;:&quot;/test/db/file.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Files db controller tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests \&quot;before all\&quot; hook in \&quot;Files db controller tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await testLib.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;318613bc-1648-4c51-9f95-5cbaf5b07db7&quot;,&quot;parentUUID&quot;:&quot;0a270498-a34c-4902-b9f2-903304a89b14&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Files db controller tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests \&quot;after all\&quot; hook in \&quot;Files db controller tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await fileController.removeFiles(tenant, {path: \&quot;/created/by/mocha/test\&quot;});\nconsole.log(deleted);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8a4e7959-07b0-45af-a32e-de6b3cde0df4&quot;,&quot;parentUUID&quot;:&quot;0a270498-a34c-4902-b9f2-903304a89b14&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c00d08a4-5c33-4dc2-9cf8-17c1d5792836&quot;,&quot;title&quot;:&quot;file crud &quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-files/test/db/file.controller.test.js&quot;,&quot;file&quot;:&quot;/test/db/file.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  should create a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const file = await fileController.createFile(tenant, fileObj);\nsid = file.sid;\nexpect(sid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;368acf8b-720c-479d-98aa-68d0b3a65af2&quot;,&quot;parentUUID&quot;:&quot;c00d08a4-5c33-4dc2-9cf8-17c1d5792836&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  should get a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;file = await fileController.getFile(tenant, sid);\nexpect(file).to.exist;\nexpect(file.sid).to.equal(sid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ecab3b3a-ca4c-4e60-87f8-37d13c16b337&quot;,&quot;parentUUID&quot;:&quot;c00d08a4-5c33-4dc2-9cf8-17c1d5792836&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should find a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  should find a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;file = await fileController.findFile(tenant, {filePath: \&quot;/created/by/mocha/test\&quot;});\nexpect(file).to.exist;\nexpect(file.sid).to.equal(sid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8bf5294-cabc-4599-92cf-abc9b8ec32cf&quot;,&quot;parentUUID&quot;:&quot;c00d08a4-5c33-4dc2-9cf8-17c1d5792836&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  should update a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const updatedFile = await fileController.updateFile(\n  tenant,\n  file.toObject()\n);\nexpect(updatedFile).to.exist;\nexpect(updatedFile.sid).to.equal(sid);\nexpect(updatedFile.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;060ab437-fc40-478e-a925-24ea11581caf&quot;,&quot;parentUUID&quot;:&quot;c00d08a4-5c33-4dc2-9cf8-17c1d5792836&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  delete a a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const deleted = await fileController.removeFile(tenant, fileObj);\nexpect(deleted).to.exist;\nexpect(deleted.deletedCount).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1943552-f9b1-4d03-a1d5-969026b57164&quot;,&quot;parentUUID&quot;:&quot;c00d08a4-5c33-4dc2-9cf8-17c1d5792836&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;368acf8b-720c-479d-98aa-68d0b3a65af2&quot;,&quot;ecab3b3a-ca4c-4e60-87f8-37d13c16b337&quot;,&quot;c8bf5294-cabc-4599-92cf-abc9b8ec32cf&quot;,&quot;060ab437-fc40-478e-a925-24ea11581caf&quot;,&quot;b1943552-f9b1-4d03-a1d5-969026b57164&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:53,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9f4ae711-3099-460b-b6f1-25caf5b45ed8&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b7033aa8-932d-474d-9e91-2332dae93e15&quot;,&quot;title&quot;:&quot;Instance API Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()} //system level\n// session = {tenant: config.tenantOne.tenantId, user_sid: &#x27;1e660111-de6f-4318-8f51-6e59cb33d8d7&#x27;} //process level\n// session = {tenant: config.tenantOne.tenantId, user_sid:&#x27;521a92c8-e77c-4537-811b-dea6e533d800&#x27;} //category level\ntenantId = config.tenantOne.tenantId;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;419a67a7-531e-43be-aaa7-111bf1b5626a&quot;,&quot;parentUUID&quot;:&quot;b7033aa8-932d-474d-9e91-2332dae93e15&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;812e641b-a911-4b34-856f-1ad63ca86dc3&quot;,&quot;title&quot;:&quot;list tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;get a full instance&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get a full instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:319,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet instances = await Instance.query().orderBy(\&quot;createdDate\&quot;, \&quot;desc\&quot;);\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst fullInstance = await instanceController.getFullInstance(\n  sampleInstanceGuid\n);\nexpect(fullInstance).to.exist;\nexpect(fullInstance.instanceTasks.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63389935-06b8-499c-a7bb-857bc9722870&quot;,&quot;parentUUID&quot;:&quot;812e641b-a911-4b34-856f-1ad63ca86dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet instances = await Instance.query().orderBy(\&quot;createdDate\&quot;, \&quot;desc\&quot;);\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst instance = await instanceController.getInstance(sampleInstanceGuid)\nexpect(instance).to.exist;\nexpect(instance.instanceGuid).to.equal(sampleInstanceGuid)\nexpect(instance.instanceId).to.be.gt(0)\nexpect(instance.requester).to.not.exist;\nexpect(instance.client).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a688a8ef-545a-449e-b4b1-5983e10047d0&quot;,&quot;parentUUID&quot;:&quot;812e641b-a911-4b34-856f-1ad63ca86dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance with requester&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance with requester&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet instances = await Instance.query().orderBy(\&quot;createdDate\&quot;, \&quot;desc\&quot;);\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst instance = await instanceController.getInstance(sampleInstanceGuid, {requester: true})\nexpect(instance).to.exist;\nexpect(instance.instanceGuid).to.equal(sampleInstanceGuid)\nexpect(instance.instanceId).to.be.gt(0)\nexpect(instance.requester).to.exist;\nexpect(instance.requester.contactGuid).to.exist;\nexpect(instance.client).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a233f010-103f-41ad-87b5-12db6879304b&quot;,&quot;parentUUID&quot;:&quot;812e641b-a911-4b34-856f-1ad63ca86dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance with client&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance with client&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet instances = await Instance.query().orderBy(\&quot;createdDate\&quot;, \&quot;desc\&quot;);\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst instance = await instanceController.getInstance(sampleInstanceGuid, {client: true})\nexpect(instance).to.exist;\nexpect(instance.instanceGuid).to.equal(sampleInstanceGuid)\nexpect(instance.instanceId).to.be.gt(0)\nexpect(instance.requester).to.not.exist;\nexpect(instance.client).to.exist;\nexpect(instance.client.contactGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b513a988-1f67-4ff4-b8a0-03f65c14e458&quot;,&quot;parentUUID&quot;:&quot;812e641b-a911-4b34-856f-1ad63ca86dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance with client manager&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance with client manager&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\n// get instances for Joe User, who reports to System System\nlet instances = await Instance.query().where(\&quot;clientGuid\&quot;, &#x27;92a73dad-d953-4c59-9c5e-5d037791d411&#x27;);\n\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst instance = await instanceController.getInstance(sampleInstanceGuid, {clientManager: true})\nexpect(instance).to.exist;\nexpect(instance.instanceGuid).to.equal(sampleInstanceGuid)\nexpect(instance.instanceId).to.be.gt(0)\nexpect(instance.requester).to.not.exist;\nexpect(instance.client).to.exist;\nexpect(instance.client.contactGuid).to.exist;\nexpect(instance.client.manager).to.exist;\nexpect(instance.client.manager.contactGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1776bbc8-a409-49e8-8d13-2c159f479c0d&quot;,&quot;parentUUID&quot;:&quot;812e641b-a911-4b34-856f-1ad63ca86dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance process&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance process&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet instances = await Instance.query().orderBy(\&quot;createdDate\&quot;, \&quot;desc\&quot;);\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst instanceProcess = await instanceController.getInstanceProcess(sampleInstanceGuid)\nexpect(instanceProcess).to.exist;\nexpect(instanceProcess.instanceGuid).to.equal(sampleInstanceGuid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0bd5fe3a-edf1-4842-a008-534ef2d936dc&quot;,&quot;parentUUID&quot;:&quot;812e641b-a911-4b34-856f-1ad63ca86dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance recipient tasks data by instanceSid&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance recipient tasks data by instanceSid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(config.tenantOne);\nconst instanceSid = &#x27;6D4785AE-57A2-46C5-9141-DE2B134ED8EF&#x27;\nconst instanceTasks = await instanceController.getInstanceRecipientTasksData(instanceSid);\n\nexpect(instanceTasks).to.exist;\nexpect(instanceTasks.length).to.be.gt(0);\nconst maintenanceReqFormTask = instanceTasks[2]\nexpect(maintenanceReqFormTask.taskName).to.equal(&#x27;Maintenance Request Form&#x27;)\nexpect(maintenanceReqFormTask.recipientTasks.length).to.be.gt(0)\nconst recipientTask = maintenanceReqFormTask.recipientTasks[0]\nexpect(recipientTask.recipientGuid).to.equal(&#x27;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF&#x27;);\nexpect(recipientTask.taskData.length).to.be.gt(0)\nexpect(recipientTask.taskData.find(x =&gt; x.dataLabel == &#x27;Location of Problem&#x27;).dataValue).to.equal(&#x27;Inside the building&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e2e36491-0102-47dd-bd8a-297064b26ba2&quot;,&quot;parentUUID&quot;:&quot;812e641b-a911-4b34-856f-1ad63ca86dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my requests columns&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my requests columns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getMyRequests();\n        \nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;efda8596-af96-496a-a948-ecac77026e0d&quot;,&quot;parentUUID&quot;:&quot;812e641b-a911-4b34-856f-1ad63ca86dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - filters - ID&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - filters - ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:30,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\n        \nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;processId\&quot;,\n          data: {\n            comparison: \&quot;eq\&quot;,\n            value: sampleInstance.processId,\n          },\n        },\n      ],\n      count: 5,\n    });\n        \n    expect(result.results[0].processId).to.equal(sampleInstance.processId);\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;instanceId\&quot;,\n          data: {\n            comparison: \&quot;gt\&quot;,\n            value: 500,\n          },\n        },\n      ],\n      sort: \&quot;instanceId\&quot;,\n      dir: \&quot;asc\&quot;,\n      count: 5,\n    });\n        \n    // no longer useful after starting over with an empty db\n    // result.results.length.should.equal(5); \n        \n    result.results.forEach((result) =&gt; {\n      expect(result.instanceId).to.be.gt(500);\n    });\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;instanceId\&quot;,\n          data: {\n            comparison: \&quot;lt\&quot;,\n            value: 505,\n          },\n        },\n      ],\n      sort: \&quot;instanceId\&quot;,\n      dir: \&quot;desc\&quot;,\n      count: 2,\n    });\n        \n    expect(result.results.length).to.equal(2);\n    result.results.forEach((result) =&gt; {\n      expect(result.instanceId).to.be.lt(505);\n    });\n  })\n);&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;TypeError: Cannot read property &#x27;processId&#x27; of undefined&quot;,&quot;estack&quot;:&quot;TypeError: Cannot read property &#x27;processId&#x27; of undefined\n    at /home/will/code/integrify/api-instance/test/db/instanceController.test.js:187:42\n    at async Promise.all (index 0)\n    at async Context.&lt;anonymous&gt; (test/db/instanceController.test.js:172:13)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;39e4cf3c-67e8-40d2-94f9-c2135a399518&quot;,&quot;parentUUID&quot;:&quot;812e641b-a911-4b34-856f-1ad63ca86dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - filters - date&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - filters - date&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:122,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\n        \nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let d = moment().day(-90);\n    let result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;range\&quot;, value: \&quot;90\&quot; },\n        },\n      ],\n      count: 1,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    if (result.results.length)\n      expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    d = moment().year(-30);\n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;range\&quot;, value: \&quot;30\&quot; },\n        },\n      ],\n      count: 1,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    if (result.results.length)\n        expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    d = moment().day(-7);\n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;range\&quot;, value: \&quot;7\&quot; },\n        },\n      ],\n      count: 1,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    // if (result.results.length)\n    //     expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    // d = moment().day(-3);\n    // result = await f.call(instanceController, {\n    //   filters: [\n    //     {\n    //       field: \&quot;StartDate\&quot;,\n    //       data: { comparison: \&quot;range\&quot;, value: \&quot;3\&quot; },\n    //     },\n    //   ],\n    //   count: 1,\n    //   dir: \&quot;asc\&quot;,\n    // });\n        \n    // if (result.results.length)\n    //     expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    // d = moment().day(-1);\n    // result = await f.call(instanceController, {\n    //   filters: [\n    //     {\n    //       field: \&quot;StartDate\&quot;,\n    //       data: { comparison: \&quot;range\&quot;, value: \&quot;1\&quot; },\n    //     },\n    //   ],\n    //   count: 1,\n    //   dir: \&quot;asc\&quot;,\n    // });\n        \n    // if (result.results.length)\n    //     expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    const startDate = moment(\&quot;2018-10-11\&quot;);\n    const endDate = moment(\&quot;2018-11-23\&quot;);\n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;gt\&quot;, value: \&quot;2018-10-11\&quot; },\n        },\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;lt\&quot;, value: \&quot;2018-11-23\&quot; },\n        },\n      ],\n      count: 1,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    if (result.results.length) {\n        expect(result.results[0].startDate).to.be.gt(startDate.toDate());\n        expect(result.results[0].startDate).to.be.lt(endDate.toDate());\n    }\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ea97cd7-a8ac-4be3-995c-fc9b98574265&quot;,&quot;parentUUID&quot;:&quot;812e641b-a911-4b34-856f-1ad63ca86dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - filters - name&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - filters - name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:96,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;instanceName\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: \&quot;test\&quot; },\n        },\n      ],\n      count: 10,\n    });\n        \n    result.results.forEach((instance) =&gt; {\n      expect(instance.instanceName.toLowerCase()).to.contain(\&quot;test\&quot;);\n    });\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;processName\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: \&quot;test\&quot; },\n        },\n      ],\n      count: 10,\n    });\n        \n    // no longer useful after starting over with an empty db\n    // result.results.forEach((instance) =&gt; {\n    //   instance.processName.should.contain(\&quot;test\&quot;);\n    // });\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;requester\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: \&quot;system system\&quot; },\n        },\n      ],\n      count: 10,\n    });\n        \n    result.results.forEach((instance) =&gt; {\n      expect(instance.requesterGuid\n        .toLowerCase())\n        .to.equal(session.user_sid.toLowerCase());\n    });\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9991b8bb-902f-4b74-bc36-be7a809724d8&quot;,&quot;parentUUID&quot;:&quot;812e641b-a911-4b34-856f-1ad63ca86dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - filters - guid&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - filters - guid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:66,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;processGuid\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: sampleInstance.processGuid },\n        },\n      ],\n      count: 10,\n    });\n        \n    result.results.forEach((instance) =&gt; {\n      expect(instance.processName.indexOf(sampleInstance.processName)).to.be.gt(-1);\n    });\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;requesterGuid\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: session.user_sid },\n        },\n      ],\n      count: 10,\n    });\n        \n    result.results.forEach((instance) =&gt; {\n      expect(instance.requesterGuid\n        .toLowerCase())\n        .to.equal(session.user_sid);\n    });\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de62fc45-2a4f-4a7a-ad85-563da55c493c&quot;,&quot;parentUUID&quot;:&quot;812e641b-a911-4b34-856f-1ad63ca86dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - count&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\n        \nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, { count: 2 });\n        \n    expect(result.results).to.exist;\n    expect(result.results.length).to.equal(2);\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae5685a3-eeaa-4f6b-ba04-bd8e199e28b6&quot;,&quot;parentUUID&quot;:&quot;812e641b-a911-4b34-856f-1ad63ca86dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my requests params - sort, dir&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my requests params - sort, dir&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      count: 2,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    expect(result.results[0].createdDate).to.be.lt(\n      result.results[1].createdDate\n    );\n        \n    result = await f.call(instanceController, {\n      count: 2,\n      dir: \&quot;desc\&quot;,\n    });\n        \n    expect(result.results[0].createdDate).to.be.gt(\n      result.results[1].createdDate\n    );\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09308265-1c90-4c43-a47d-5fc7702361f2&quot;,&quot;parentUUID&quot;:&quot;812e641b-a911-4b34-856f-1ad63ca86dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my requests param - start&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my requests param - start&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      start: 0,\n      count: 2,\n      sort: \&quot;instanceId\&quot;,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    const startZeroId = result.results[0].instanceId;\n        \n    result = await f.call(instanceController, {\n      start: 1,\n      count: 2,\n      sort: \&quot;instanceId\&quot;,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    const startOneId = result.results[0].instanceId;\n        \n    expect(startZeroId).to.be.lessThan(startOneId);\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;87677186-21c6-4d04-86e2-27726cbdc3c0&quot;,&quot;parentUUID&quot;:&quot;812e641b-a911-4b34-856f-1ad63ca86dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get monitor requests&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get monitor requests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({permisionType: &#x27;monitor&#x27;});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\nexpect(firstInstance.requester).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42cb1537-dd49-46e8-88f4-730b438c186c&quot;,&quot;parentUUID&quot;:&quot;812e641b-a911-4b34-856f-1ad63ca86dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get monitor requests with search term against procssName, instanceName and requester&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get monitor requests with search term against procssName, instanceName and requester&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({search: sampleInstance.processName, permisionType: &#x27;monitor&#x27;});\nconsole.log(result)\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\nexpect(firstInstance.requester).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;537fd36f-fa9f-4c5e-a340-1c2db1ba17e7&quot;,&quot;parentUUID&quot;:&quot;812e641b-a911-4b34-856f-1ad63ca86dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get monitor requests with a numeric term against instanceId&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get monitor requests with a numeric term against instanceId&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({search: sampleInstance.instanceId, permisionType: &#x27;monitor&#x27;});\nconsole.log(result)\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\nexpect(firstInstance.requester).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3720e8f4-4e02-495b-9d0d-bd6882009983&quot;,&quot;parentUUID&quot;:&quot;812e641b-a911-4b34-856f-1ad63ca86dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get manage requests&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get manage requests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({permisionType: &#x27;manage&#x27;});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\nexpect(firstInstance.requester).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed3e844e-8895-4b3c-a373-08bde1c03ebf&quot;,&quot;parentUUID&quot;:&quot;812e641b-a911-4b34-856f-1ad63ca86dc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;63389935-06b8-499c-a7bb-857bc9722870&quot;,&quot;a688a8ef-545a-449e-b4b1-5983e10047d0&quot;,&quot;a233f010-103f-41ad-87b5-12db6879304b&quot;,&quot;b513a988-1f67-4ff4-b8a0-03f65c14e458&quot;,&quot;1776bbc8-a409-49e8-8d13-2c159f479c0d&quot;,&quot;0bd5fe3a-edf1-4842-a008-534ef2d936dc&quot;,&quot;e2e36491-0102-47dd-bd8a-297064b26ba2&quot;,&quot;efda8596-af96-496a-a948-ecac77026e0d&quot;,&quot;5ea97cd7-a8ac-4be3-995c-fc9b98574265&quot;,&quot;9991b8bb-902f-4b74-bc36-be7a809724d8&quot;,&quot;de62fc45-2a4f-4a7a-ad85-563da55c493c&quot;,&quot;ae5685a3-eeaa-4f6b-ba04-bd8e199e28b6&quot;,&quot;09308265-1c90-4c43-a47d-5fc7702361f2&quot;,&quot;87677186-21c6-4d04-86e2-27726cbdc3c0&quot;,&quot;42cb1537-dd49-46e8-88f4-730b438c186c&quot;,&quot;537fd36f-fa9f-4c5e-a340-1c2db1ba17e7&quot;,&quot;3720e8f4-4e02-495b-9d0d-bd6882009983&quot;,&quot;ed3e844e-8895-4b3c-a373-08bde1c03ebf&quot;],&quot;failures&quot;:[&quot;39e4cf3c-67e8-40d2-94f9-c2135a399518&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:921,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;3ec3f0f7-6027-4b82-b51a-8273ba223b97&quot;,&quot;title&quot;:&quot;delete/undelete tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes a request&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests deletes a request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:83,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({permisionType: &#x27;monitor&#x27;});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\nsampleInstances = result.results;\n    \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\nsampleInstanceGuid = firstInstance.instanceGuid;\n      \nlet deleted = await instanceController.deleteInstance(sampleInstanceGuid);\n\nexpect(sampleInstanceGuid).to.equal(deleted.instanceGuid)\nexpect(deleted.deletedDate).not.be.null\nconst Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet excludeDeleted = await Instance.query().where({instanceGuid: sampleInstanceGuid})\nexpect(excludeDeleted.length).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;12997a8d-2082-4265-a00b-e468550a16e9&quot;,&quot;parentUUID&quot;:&quot;3ec3f0f7-6027-4b82-b51a-8273ba223b97&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retores a request&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests retores a request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:41,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nlet undeleted = await instanceController.restoreInstance(sampleInstanceGuid);\n//expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\nexpect(sampleInstanceGuid).to.equal(undeleted.instanceGuid)\nexpect(undeleted.deletedDate).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29f3ff43-c146-4015-8947-17a10519747a&quot;,&quot;parentUUID&quot;:&quot;3ec3f0f7-6027-4b82-b51a-8273ba223b97&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;deletes a batch of requests&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests deletes a batch of requests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:222,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst instanceGuids = sampleInstances.map((i) =&gt; {\n  return i.instanceGuid;\n})\nlet deleted = await instanceController.deleteInstances(instanceGuids);\n//expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\nexpect(deleted.length).to.equal(sampleInstances.length);\n//expect(deleted[0].instanceGuid).to.equal(sampleInstances[0].instanceGuid);\nexpect(deleted[0].deletedDate).not.to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d01fc9b-6016-41ad-9339-29f402c49d4f&quot;,&quot;parentUUID&quot;:&quot;3ec3f0f7-6027-4b82-b51a-8273ba223b97&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;restores a batch of requests&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests restores a batch of requests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:185,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst instanceGuids = sampleInstances.map((i) =&gt; {\n  return i.instanceGuid;\n})\nlet deleted = await instanceController.restoreInstances(instanceGuids);\n//expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\nexpect(deleted.length).to.equal(sampleInstances.length);\nexpect(deleted[0].instanceGuid).to.equal(sampleInstances[0].instanceGuid);\nexpect(deleted[0].deletedDate).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af043de1-6c16-4bc0-849f-6973830f77f1&quot;,&quot;parentUUID&quot;:&quot;3ec3f0f7-6027-4b82-b51a-8273ba223b97&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;restores all&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests restores all&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:757,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nlet restored = await instanceController.restoreAllInstances();\n//expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\nexpect(restored.length).to.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;995c45f2-8665-489c-bda9-1b9959a5a741&quot;,&quot;parentUUID&quot;:&quot;3ec3f0f7-6027-4b82-b51a-8273ba223b97&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;12997a8d-2082-4265-a00b-e468550a16e9&quot;,&quot;29f3ff43-c146-4015-8947-17a10519747a&quot;,&quot;1d01fc9b-6016-41ad-9339-29f402c49d4f&quot;,&quot;af043de1-6c16-4bc0-849f-6973830f77f1&quot;,&quot;995c45f2-8665-489c-bda9-1b9959a5a741&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1288,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;cd6498ab-13a4-45f3-b5db-c80a539f502e&quot;,&quot;title&quot;:&quot;insert tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;inserts an instance data&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests insert tests inserts an instance data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceDataRow = {\n  itaskRecipientGuid: &#x27;8ad1a6f2-9f6f-4667-9750-d961044ed817&#x27;,\n  itaskGuid: &#x27;5bde578f-615f-4494-86b2-ca61044ed883&#x27;,\n  taskGuid: &#x27;6386f905-7fac-41c6-9b6b-86d53f14d61c&#x27;,\n  objectGuid: null,\n  objectType: null,\n  objectId: null,\n  dataProperty: &#x27;1491430190541&#x27;,\n  dataType: &#x27;String&#x27;,\n  dataSid: &#x27;14777392-ac81-44f0-b1f2-87d53f14d65d&#x27;,\n  dataId: null,\n  dataClientId: &#x27;1491430190541&#x27;,\n  dataLabel: &#x27;Enter Details:&#x27;,\n  dataValue: &#x27;Need a background check&#x27;,\n  META_1: &#x27;TEST_INSERT_INSTANCE_DATA&#x27;,\n  META_2: null,\n  dataHide: null,\n  instanceContactGuid: null,\n  roleGuid: null,\n  dataValueExt: null,\n  questionType: &#x27;LongText&#x27;,\n  deletedDate: new Date().toISOString() // so that it doesnt interfere with its instance\n}\nconst instanceController = new InstanceController(session)\nlet instanceDataGuid = await instanceController.insertInstanceData(instanceDataRow)\nexpect(instanceDataGuid).to.be.a.uuid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3be4517-2652-4d68-a1c5-e56d38e6df6b&quot;,&quot;parentUUID&quot;:&quot;cd6498ab-13a4-45f3-b5db-c80a539f502e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a3be4517-2652-4d68-a1c5-e56d38e6df6b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;30f34551-1003-4a5c-8992-6467d4bb7b83&quot;,&quot;title&quot;:&quot;update tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates an instance task recipient task state&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests update tests updates an instance task recipient task state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session)\nconst recipTaskSid = &#x27;b3fef53a-7742-46d1-9faf-be573c14d6fa&#x27;\nlet taskState = &#x27;Cancelled&#x27;\nlet updated = await instanceController.setInstanceRecipientTaskState(recipTaskSid, taskState)\nexpect(updated.taskState).to.equal(taskState)\n// change it back to Completed\ntaskState = &#x27;Completed&#x27;\nupdated = await instanceController.setInstanceRecipientTaskState(recipTaskSid, taskState)\nexpect(updated.taskState).to.equal(taskState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f02e2132-7e19-46fd-b15e-40d082718d80&quot;,&quot;parentUUID&quot;:&quot;30f34551-1003-4a5c-8992-6467d4bb7b83&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f02e2132-7e19-46fd-b15e-40d082718d80&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;42c15a6c-c390-46be-bc13-82bad321a224&quot;,&quot;title&quot;:&quot;Instance API Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-instance/test/db/instanceModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e27912c2-ad38-4ed4-9eac-7d226c926c25&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-instance/test/db/instanceModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceModel.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Instance API Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e2c5bd13-ab6c-4262-b62e-c4fd71e6514d&quot;,&quot;parentUUID&quot;:&quot;e27912c2-ad38-4ed4-9eac-7d226c926c25&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Instance API Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceModel = await sqldb.models.bindModel(config.tenantOne.tenantId, instanceModels.Instance)\n          \n          let results = await instanceModel.query()\n          //console.log(results)\n          expect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f109bbb-9de6-4e84-833b-1b704d037c22&quot;,&quot;parentUUID&quot;:&quot;e27912c2-ad38-4ed4-9eac-7d226c926c25&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a hash of bound models&quot;,&quot;fullTitle&quot;:&quot;Instance API Model Tests tests should return a hash of bound models&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceModel = (await models.getModels(config.tenantOne.tenantId)).Instance;\n          \n          let results = await instanceModel.query()\n          //console.log(results)\n          expect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d396088-070d-458c-b735-88414f0e6fe4&quot;,&quot;parentUUID&quot;:&quot;e27912c2-ad38-4ed4-9eac-7d226c926c25&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should bound models should be cached in memory&quot;,&quot;fullTitle&quot;:&quot;Instance API Model Tests tests should bound models should be cached in memory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(models._tenantModels[config.tenantOne.tenantId]).to.exist\n          let results = await models._tenantModels[config.tenantOne.tenantId].Instance.query()\n          //console.log(results)\n          expect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26283b5f-a62f-4cc9-b963-65387bf20315&quot;,&quot;parentUUID&quot;:&quot;e27912c2-ad38-4ed4-9eac-7d226c926c25&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3f109bbb-9de6-4e84-833b-1b704d037c22&quot;,&quot;9d396088-070d-458c-b735-88414f0e6fe4&quot;,&quot;26283b5f-a62f-4cc9-b963-65387bf20315&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;95653125-2f35-4201-b577-5cdaa0c55f6b&quot;,&quot;title&quot;:&quot;Task API Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-instance/test/db/myTaskController.test.js&quot;,&quot;file&quot;:&quot;/test/db/myTaskController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()};\ntenantId = config.tenantOne.tenantId;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d3dc3c7-4307-4a31-9dfb-07c4052e552b&quot;,&quot;parentUUID&quot;:&quot;95653125-2f35-4201-b577-5cdaa0c55f6b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a4c04a53-d135-486b-ae00-0c1680f4f303&quot;,&quot;title&quot;:&quot;list tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-instance/test/db/myTaskController.test.js&quot;,&quot;file&quot;:&quot;/test/db/myTaskController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set a sample task&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should set a sample task&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:163,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Task = await models.getModel(config.tenantOne.tenantId, &#x27;InstanceRecipientTask&#x27;);\nconst tasks = await Task.query()\n  .withGraphFetched(&#x27;[instanceTaskBase, taskType, instance]&#x27;)\n  .where(&#x27;recipientGuid&#x27;, session.user_sid)\n  .orderBy(&#x27;instanceRecipientTask.createdDate&#x27;, &#x27;desc&#x27;);\nexpect(tasks.length).to.be.gt(0);\nsampleTaskGuid = tasks[0].itaskRecipientGuid;\nsampleTask = tasks[0];\nsampleTask.taskName = sampleTask.instanceTaskBase.taskName;\nsampleTask.taskTypeName = sampleTask.taskType.taskTypeName;\nsampleTask.instanceId = sampleTask.instance.instanceId;\nsampleTask.instanceName = sampleTask.instance.instanceName;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bdc9cf43-3c3c-4fe0-89f0-07cea44c64a7&quot;,&quot;parentUUID&quot;:&quot;a4c04a53-d135-486b-ae00-0c1680f4f303&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks columns&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks columns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:176,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst result = await taskController.getMyTasks();\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\nconst firstTask = result.results[0];\nexpect(firstTask.itaskRecipientId).to.be.ok;\nexpect(firstTask.itaskRecipientGuid).to.be.ok;\nexpect(firstTask.taskName).to.be.ok;\nexpect(firstTask.taskTypeName).to.be.ok;\nexpect(firstTask.createdDate).to.be.ok;\nexpect(firstTask.dueDate).not.to.be.undefined;\nexpect(firstTask.priority).not.to.be.undefined;\nexpect(firstTask.instanceName).to.be.ok;\nexpect(firstTask.instanceId).to.be.ok;\nexpect(firstTask.lastMilestone).to.be.ok;\nexpect(result.total).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03bee32e-aae2-4db2-9152-bc0e0fd9542c&quot;,&quot;parentUUID&quot;:&quot;a4c04a53-d135-486b-ae00-0c1680f4f303&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my open tasks only&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my open tasks only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:172,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskState&#x27;, &#x27;eq&#x27;, &#x27;Open&#x27;, 50, &#x27;asc&#x27;);\nconst result = await taskController.getMyTasks(options);\nresult.results.forEach(task =&gt; {\n  expect(task.taskState === &#x27;Initialized&#x27; || task.taskState === &#x27;Started&#x27;).to.equal(true);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18f3b964-62ef-4500-88e8-c5d4dec8a3a6&quot;,&quot;parentUUID&quot;:&quot;a4c04a53-d135-486b-ae00-0c1680f4f303&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my completed tasks only&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my completed tasks only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:174,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskState&#x27;, &#x27;eq&#x27;, &#x27;Completed&#x27;, 50, &#x27;asc&#x27;);\nconst result = await taskController.getMyTasks(options);\nresult.results.forEach(task =&gt; {\n  expect(task.taskState).to.equal(&#x27;Completed&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19222e21-fc94-4e54-86c9-ffcc1bbad0d4&quot;,&quot;parentUUID&quot;:&quot;a4c04a53-d135-486b-ae00-0c1680f4f303&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: taskName&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: taskName&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:162,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskName&#x27;, &#x27;contains&#x27;, sampleTask.taskName);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18c30253-834b-4b51-978a-1f53b82efe92&quot;,&quot;parentUUID&quot;:&quot;a4c04a53-d135-486b-ae00-0c1680f4f303&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: taskType&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: taskType&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:166,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskType&#x27;, &#x27;contains&#x27;, sampleTask.taskTypeName);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85843eb1-b59e-4362-898e-736f6811bc1b&quot;,&quot;parentUUID&quot;:&quot;a4c04a53-d135-486b-ae00-0c1680f4f303&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: description (instanceName)&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: description (instanceName)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:187,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;instanceName&#x27;, &#x27;contains&#x27;, sampleTask.instanceName);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9cc4ed07-47d8-4395-b375-737af4128b3f&quot;,&quot;parentUUID&quot;:&quot;a4c04a53-d135-486b-ae00-0c1680f4f303&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: requestId (instanceId)&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: requestId (instanceId)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:108,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;instanceId&#x27;, &#x27;contains&#x27;, sampleTask.instanceId);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2196eb8f-d7b1-4b47-9eff-f8d4d36aeae3&quot;,&quot;parentUUID&quot;:&quot;a4c04a53-d135-486b-ae00-0c1680f4f303&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: requester&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: requester&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:232,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;requester&#x27;, &#x27;contains&#x27;, &#x27;system system&#x27;);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b039b321-b147-4b20-a195-97122b6f6824&quot;,&quot;parentUUID&quot;:&quot;a4c04a53-d135-486b-ae00-0c1680f4f303&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my task by searching&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my task by searching&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:671,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {search: sampleTask.taskName};\nlet result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);\noptions = {search: sampleTask.taskTypeName};\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);\noptions = {search: sampleTask.instanceName};\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);\noptions = {search: sampleTask.instanceId};\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c95eb5a-3a22-486d-a2ac-59c078339589&quot;,&quot;parentUUID&quot;:&quot;a4c04a53-d135-486b-ae00-0c1680f4f303&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. params - start&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. params - start&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:321,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {\n  start: 0,\n  count: 2,\n  sort: &#x27;itaskRecipientId&#x27;,\n  dir: &#x27;asc&#x27;\n};\nlet result = await taskController.getMyTasks(options);\nconst startZeroId = result.results[0].itaskRecipientId;\noptions.start = 1;\nresult = await taskController.getMyTasks(options);\nconst startOneId = result.results[0].itaskRecipientId;\nexpect(startZeroId).to.be.lt(startOneId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40ac05fc-75b2-4a40-b4ef-5c3592e18d69&quot;,&quot;parentUUID&quot;:&quot;a4c04a53-d135-486b-ae00-0c1680f4f303&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. params - sort, dir&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. params - sort, dir&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {count: 2, dir: &#x27;asc&#x27;};\nlet result = await taskController.getMyTasks(options);\nexpect(result.results[0].createdDate).to.be.lt(result.results[1].createdDate);\noptions.dir = &#x27;desc&#x27;;\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].createdDate).to.be.gt(result.results[1].createdDate);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a35e4b2f-f5cf-472f-b26c-fee5f0544166&quot;,&quot;parentUUID&quot;:&quot;a4c04a53-d135-486b-ae00-0c1680f4f303&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. params - count&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. params - count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:135,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {count: 2};\nlet result = await taskController.getMyTasks(options);\nexpect(result.results).to.exist;\nexpect(result.results.length).to.eq(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98109743-82d7-4734-afa7-3c3f75933818&quot;,&quot;parentUUID&quot;:&quot;a4c04a53-d135-486b-ae00-0c1680f4f303&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bdc9cf43-3c3c-4fe0-89f0-07cea44c64a7&quot;,&quot;03bee32e-aae2-4db2-9152-bc0e0fd9542c&quot;,&quot;18f3b964-62ef-4500-88e8-c5d4dec8a3a6&quot;,&quot;19222e21-fc94-4e54-86c9-ffcc1bbad0d4&quot;,&quot;18c30253-834b-4b51-978a-1f53b82efe92&quot;,&quot;85843eb1-b59e-4362-898e-736f6811bc1b&quot;,&quot;9cc4ed07-47d8-4395-b375-737af4128b3f&quot;,&quot;2196eb8f-d7b1-4b47-9eff-f8d4d36aeae3&quot;,&quot;b039b321-b147-4b20-a195-97122b6f6824&quot;,&quot;7c95eb5a-3a22-486d-a2ac-59c078339589&quot;,&quot;40ac05fc-75b2-4a40-b4ef-5c3592e18d69&quot;,&quot;a35e4b2f-f5cf-472f-b26c-fee5f0544166&quot;,&quot;98109743-82d7-4734-afa7-3c3f75933818&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2974,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;a233e00e-1512-4d76-993d-b724c80f43e6&quot;,&quot;title&quot;:&quot;My Task API Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-instance/test/db/myTaskModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/myTaskModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;909cedab-e797-4ada-9c32-fd0e460ba98c&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-instance/test/db/myTaskModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/myTaskModel.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;My Task API Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3fd2433a-6921-4913-a386-2142b4e5128b&quot;,&quot;parentUUID&quot;:&quot;909cedab-e797-4ada-9c32-fd0e460ba98c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;My Task API Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskModel = await sqldb.models.bindModel(config.tenantOne.tenantId, taskModels.InstanceRecipientTask);\nconst results = await taskModel.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8c05d53-c338-4eba-a994-2abc65197c2b&quot;,&quot;parentUUID&quot;:&quot;909cedab-e797-4ada-9c32-fd0e460ba98c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a hash of bound models&quot;,&quot;fullTitle&quot;:&quot;My Task API Model Tests tests should return a hash of bound models&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskModel = (await models.getModels(config.tenantOne.tenantId)).InstanceRecipientTask;\nconst results = await taskModel.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d752d70e-6919-4c0a-9672-329b887e6386&quot;,&quot;parentUUID&quot;:&quot;909cedab-e797-4ada-9c32-fd0e460ba98c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should bound models cached in memory&quot;,&quot;fullTitle&quot;:&quot;My Task API Model Tests tests should bound models cached in memory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(models._tenantModels[config.tenantOne.tenantId]).to.exist;\nconst results = await models._tenantModels[config.tenantOne.tenantId].InstanceRecipientTask.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6755d0df-aa2e-4e9d-ba2e-b57929531cf0&quot;,&quot;parentUUID&quot;:&quot;909cedab-e797-4ada-9c32-fd0e460ba98c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c8c05d53-c338-4eba-a994-2abc65197c2b&quot;,&quot;d752d70e-6919-4c0a-9672-329b887e6386&quot;,&quot;6755d0df-aa2e-4e9d-ba2e-b57929531cf0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:37,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;dd0994c4-7f61-4aae-bbf8-83d7f4f95f7c&quot;,&quot;title&quot;:&quot;Instance API Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-instance/test/integration/instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/instance.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\njwt = await testLib.getAuthToken()\nthis.timeout(105000); \nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()} //system level&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8fe4159-63d9-46fd-bdf5-045e980b522d&quot;,&quot;parentUUID&quot;:&quot;dd0994c4-7f61-4aae-bbf8-83d7f4f95f7c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;637db6fe-86a7-4ce6-b5d2-5cc831d2272b&quot;,&quot;title&quot;:&quot;getInstancesByPermission&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-instance/test/integration/instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/instance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of instances for a user with monitor permissions&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a list of instances for a user with monitor permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;monitor\&quot;;\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();\n            sampleInstance = result.results[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e1ce82f-04ea-4787-9dab-c25f8f98bdde&quot;,&quot;parentUUID&quot;:&quot;637db6fe-86a7-4ce6-b5d2-5cc831d2272b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a list of instances for a user with manage permissions&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a list of instances for a user with manage permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;monitor\&quot;;\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();\n            sampleInstance = result.results[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ebd9aa2-c82b-4711-9034-6f846fca112e&quot;,&quot;parentUUID&quot;:&quot;637db6fe-86a7-4ce6-b5d2-5cc831d2272b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a list of instances started by the user calling the endpoint&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a list of instances started by the user calling the endpoint&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;mine\&quot;;\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();\n            sampleInstance = result.results[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7a199bf-0740-4f31-9b74-8a8659d14b35&quot;,&quot;parentUUID&quot;:&quot;637db6fe-86a7-4ce6-b5d2-5cc831d2272b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a \&quot;monitor\&quot; list of instances filtered&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a \&quot;monitor\&quot; list of instances filtered&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:131,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;monitor\&quot;;\n            req.query.filters = [\n                \n                {\&quot;field\&quot;:\&quot;instanceName\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.instanceName}},\n                {\&quot;field\&quot;:\&quot;instanceId\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;gteq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:1}},\n                {\&quot;field\&quot;:\&quot;instanceId\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;lteq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:1000000}},\n                {\&quot;field\&quot;:\&quot;processName\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.processName}},\n                {\&quot;field\&quot;:\&quot;instanceState\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.instanceState}},\n                {\&quot;field\&quot;:\&quot;lastMilestone\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.lastMilestone}},\n                {\&quot;field\&quot;:\&quot;requesterGuid\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.requesterGuid}},\n                {\&quot;field\&quot;:\&quot;requester\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.requester}},\n                {\&quot;field\&quot;:\&quot;startDate\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;gteq\&quot;,\&quot;type\&quot;:\&quot;date\&quot;,\&quot;value\&quot;:&#x27;2010-01-01&#x27;}},\n                {\&quot;field\&quot;:\&quot;startDate\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;lteq\&quot;,\&quot;type\&quot;:\&quot;date\&quot;,\&quot;value\&quot;:&#x27;2030-01-01&#x27;}}\n            ]\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7783bf06-3ba6-4aba-a51e-ffb0584f49ea&quot;,&quot;parentUUID&quot;:&quot;637db6fe-86a7-4ce6-b5d2-5cc831d2272b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a \&quot;mine\&quot; list of instances filtered&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a \&quot;mine\&quot; list of instances filtered&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:164,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;mine\&quot;;\n            req.query.filters = [\n                \n                {\&quot;field\&quot;:\&quot;instanceName\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.instanceName}},\n                {\&quot;field\&quot;:\&quot;instanceId\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;gteq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:1}},\n                {\&quot;field\&quot;:\&quot;instanceId\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;lteq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:1000000}},\n                {\&quot;field\&quot;:\&quot;processName\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.processName}},\n                {\&quot;field\&quot;:\&quot;instanceState\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.instanceState}},\n                {\&quot;field\&quot;:\&quot;lastMilestone\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.lastMilestone}},\n                {\&quot;field\&quot;:\&quot;requesterGuid\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.requesterGuid}},\n                {\&quot;field\&quot;:\&quot;requester\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.requester}}\n            ]\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2b0a818-2798-4e49-bf09-bb88aec9c505&quot;,&quot;parentUUID&quot;:&quot;637db6fe-86a7-4ce6-b5d2-5cc831d2272b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7e1ce82f-04ea-4787-9dab-c25f8f98bdde&quot;,&quot;3ebd9aa2-c82b-4711-9034-6f846fca112e&quot;,&quot;f7a199bf-0740-4f31-9b74-8a8659d14b35&quot;,&quot;7783bf06-3ba6-4aba-a51e-ffb0584f49ea&quot;,&quot;c2b0a818-2798-4e49-bf09-bb88aec9c505&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:319,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;86bcc127-7f9d-4298-aeac-f6d2fb376fee&quot;,&quot;title&quot;:&quot;deleteInstances&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-instance/test/integration/instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/instance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a batch of instances&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests deleteInstances should delete a batch of instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:926,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\n            let result = await instanceController.getMyRequests()\n            let instanceGuids= result.results.map((i) =&gt; {\n                return i.instanceGuid;\n            })\n\t\t\tconst mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.body = JSON.stringify(instanceGuids);\n           \n\t\t\tawait handlers.deleteInstances(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n            expect(mockRes.body).to.exist;\n\t\t\tlet deleted = mockRes.body;\n            expect(deleted.instancesDeleted).to.exist;\n            expect(deleted.instancesDeleted).to.equal(instanceGuids.length);\n            \n            //retore them\n            \n            let restored = await instanceController.restoreInstances(instanceGuids);\n            //expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\n            expect(restored.length).to.equal(instanceGuids.length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aaad9715-cae5-4f25-8370-e636b433fd1e&quot;,&quot;parentUUID&quot;:&quot;86bcc127-7f9d-4298-aeac-f6d2fb376fee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aaad9715-cae5-4f25-8370-e636b433fd1e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:926,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;32fada6a-b88c-4452-a7fb-7c1af5228214&quot;,&quot;title&quot;:&quot;MyTask API Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-instance/test/integration/myTask.test.js&quot;,&quot;file&quot;:&quot;/test/integration/myTask.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;MyTask API Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\njwt = await testLib.getAuthToken();\nthis.timeout(10500);\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18e06b68-0579-4497-8527-f533a2d7e281&quot;,&quot;parentUUID&quot;:&quot;32fada6a-b88c-4452-a7fb-7c1af5228214&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of my tasks&quot;,&quot;fullTitle&quot;:&quot;MyTask API Tests should return a list of my tasks&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:115,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req(jwt);\nawait handlers.getMyTasks(req, mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;\nconst result = mockRes.body;\nexpect(result.total).to.exist;\nexpect(result.total).to.be.gt(0);\nexpect(result.results).to.be.array();\nexpect(result.results.length).to.be.gt(0);\nsampleTask = result.results[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f57ebbcb-2c6e-4d06-9195-92ea4620d144&quot;,&quot;parentUUID&quot;:&quot;32fada6a-b88c-4452-a7fb-7c1af5228214&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f57ebbcb-2c6e-4d06-9195-92ea4620d144&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:115,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;662eabdf-d7ab-4036-8419-69a33d42a67e&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6a2e8d1b-fdcf-4140-b3e5-4d1479eb1bba&quot;,&quot;title&quot;:&quot;Settings API Holiday Controller tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-settings/test/integration/db/holidays.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/holidays.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Settings API Holiday Controller tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nsession = {tenantId: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()}\ntenantId = config.tenantOne.tenantId;\noauth = {\n  instance_name: config.tenantOne.tenantId,\n  user_sid: config.tenantOne.adminUser.sid\n}\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff307f0a-0817-493a-8351-b1556246bd7f&quot;,&quot;parentUUID&quot;:&quot;6a2e8d1b-fdcf-4140-b3e5-4d1479eb1bba&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should insert, select, delete and list holidays&quot;,&quot;fullTitle&quot;:&quot;Settings API Holiday Controller tests should insert, select, delete and list holidays&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:270,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let holiday = {\n  holidayName: \&quot;O Day\&quot;,\n  startDate: \&quot;2019-10-10T00:00:00.000Z\&quot;,\n  endDate: \&quot;2019-10-11T00:00:00.000Z\&quot;,\n  country: \&quot;USA\&quot;\n};\nlet holidayController = new HolidayController(oauth);\n// insert\nconst inserted = await holidayController.insertHoliday(holiday);\nvalidateHoliday(holiday, inserted);\n// select\nlet gotOne = await holidayController.getHoliday(inserted.holidayGuid);\nvalidateHoliday(holiday, gotOne);\n// update\nholiday.holidayGuid = inserted.holidayGuid;\nholiday.holidayName = \&quot;Easter Monday\&quot;;\nholiday.country = \&quot;Papa New Guinea\&quot;;\nawait holidayController.updateHoliday(holiday);\ngotOne = await holidayController.getHoliday(inserted.holidayGuid);\nvalidateHoliday(holiday, gotOne);\n//list\nconst holidays = await holidayController.listHolidays();\nexpect(holidays.length).to.be.gt(0);\nholiday = holidays[0];\nexpect(holiday.holidayGuid).to.exist;\nexpect(holiday.holidayName).to.exist;\nexpect(holiday.startDate).to.exist;\nexpect(holiday.endDate).to.exist;\nexpect(holiday.country).to.exist;\n// delete\nconst holidayGuids = [inserted.holidayGuid];\nawait holidayController.deleteHolidays(holidayGuids);\ngotOne = await holidayController.getHoliday(inserted.holidayGuid);\nexpect(gotOne).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fba7225-c84b-4c87-8a09-59e4ddfc1c8c&quot;,&quot;parentUUID&quot;:&quot;6a2e8d1b-fdcf-4140-b3e5-4d1479eb1bba&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8fba7225-c84b-4c87-8a09-59e4ddfc1c8c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:270,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;773cb58b-1516-4de9-b73d-7c2d04147f29&quot;,&quot;title&quot;:&quot;Settings API Language Controller test&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-settings/test/integration/db/languages.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/languages.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Settings API Language Controller test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\noauth = {\n  instance_name: config.tenantOne.tenantId,\n  user_sid: config.tenantOne.adminUser.sid\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe69455e-a50d-44b8-b2b5-a74b6752ce53&quot;,&quot;parentUUID&quot;:&quot;773cb58b-1516-4de9-b73d-7c2d04147f29&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a list of languages&quot;,&quot;fullTitle&quot;:&quot;Settings API Language Controller test should get a list of languages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const languageCtrl = new LanguageController(oauth);\nconst languages = await languageCtrl.listLanguages();\nexpect(languages.length).to.be.gt(0);\nconst language = languages[0];\nexpect(language.languageGuid).to.exist;\nexpect(language.languageName).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;234bd525-e014-4f6d-be97-b0b499a4e024&quot;,&quot;parentUUID&quot;:&quot;773cb58b-1516-4de9-b73d-7c2d04147f29&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;234bd525-e014-4f6d-be97-b0b499a4e024&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d647f072-e9c8-4c36-b0e3-3b7f0cf9dbb2&quot;,&quot;title&quot;:&quot;Settings API System Setting Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-settings/test/integration/db/systemsetting.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/systemsetting.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()} \nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d2845d2e-9215-497a-bd00-aaa320c699ef&quot;,&quot;parentUUID&quot;:&quot;d647f072-e9c8-4c36-b0e3-3b7f0cf9dbb2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;306f88d7-d516-4208-9f3c-3a6722bedb5a&quot;,&quot;title&quot;:&quot;Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-settings/test/integration/db/systemsetting.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/systemsetting.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a system setting model&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Model Tests should get a system setting model&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const SystemSettingsModel = await model.getConsumerModel(\n  config.ConsumersConn1,\n  \&quot;SystemSettings\&quot;\n);\nexpect(SystemSettingsModel).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48126a88-ad5d-4c52-b648-e9553ef2dbdd&quot;,&quot;parentUUID&quot;:&quot;306f88d7-d516-4208-9f3c-3a6722bedb5a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return system settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Model Tests should return system settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const SystemSettingsModel = await model.getConsumerModel(\n  config.ConsumersConn1,\n  \&quot;SystemSettings\&quot;\n);\nlet results = await SystemSettingsModel.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;409e0fbb-58c7-40bf-bf3b-2542fae02067&quot;,&quot;parentUUID&quot;:&quot;306f88d7-d516-4208-9f3c-3a6722bedb5a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;48126a88-ad5d-4c52-b648-e9553ef2dbdd&quot;,&quot;409e0fbb-58c7-40bf-bf3b-2542fae02067&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f9015bec-9e07-4f67-b9da-681a118a5426&quot;,&quot;title&quot;:&quot;Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-settings/test/integration/db/systemsetting.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/systemsetting.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list system settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Controller Tests should list system settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:36,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let systemSettingController = new SystemSettingController(session);\nlet systemSettings = await systemSettingController.listSystemSettings();\nexpect(systemSettings).to.exist;\nexpect(systemSettings.length).to.be.gt(0);\nexpect(systemSettings[0].masterSettings.settingsGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f953e572-1eb6-42be-9761-e65fdd392b94&quot;,&quot;parentUUID&quot;:&quot;f9015bec-9e07-4f67-b9da-681a118a5426&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list password settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Controller Tests should list password settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let systemSettingController = new SystemSettingController(session);\nlet systemSettings = await systemSettingController.listPasswordSettings();\nexpect(systemSettings).to.exist;\nexpect(systemSettings.length).to.be.gt(0);\n// only system settings listed should be the ones related to passwords   \nexpect(systemSettings.filter(x =&gt; x.settingsKey.startsWith(&#x27;PWD&#x27;)).length).to.equal(systemSettings.length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;236f7b43-3027-4624-bed0-cf2e3e30af6a&quot;,&quot;parentUUID&quot;:&quot;f9015bec-9e07-4f67-b9da-681a118a5426&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update system settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Controller Tests should update system settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:154,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let pwdSettings = [{\n  \&quot;settingsGuid\&quot;:\&quot;6F170960-C5BC-4A12-B170-1CCEDCAC3DF2\&quot;,\n  \&quot;dataInstanceGuid\&quot;:\&quot;2CA0CE58-B55B-4DA7-ACE1-5FC37E3D32D5\&quot;,\n  \&quot;settingsKey\&quot;:\&quot;PWD_EXPIRATION\&quot;,\n  \&quot;settingsValue\&quot;:\&quot;14\&quot;, // changed\n  \&quot;createdBy\&quot;:\&quot;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF\&quot;,\n  \&quot;createdDate\&quot;:\&quot;2020-01-28T03:38:03.200Z\&quot;,\n  \&quot;modifiedBy\&quot;:null,\n  \&quot;modifiedDate\&quot;:null,\n  \&quot;masterSettings\&quot;:{\n    \&quot;settingsGuid\&quot;:\&quot;6F170960-C5BC-4A12-B170-1CCEDCAC3DF2\&quot;,\n    \&quot;settingsKey\&quot;:\&quot;PWD_EXPIRATION\&quot;,\n    \&quot;keyDefault\&quot;:\&quot;7\&quot;,\n    \&quot;keyOptions\&quot;:null,\n    \&quot;description\&quot;:\&quot;Length in days before a user is prompted to change his or her password.\&quot;\n  }\n}, {\n  \&quot;settingsGuid\&quot;:\&quot;B2476A3D-095F-424A-9C29-4AA95E93A09E\&quot;,\n  \&quot;dataInstanceGuid\&quot;:\&quot;2CA0CE58-B55B-4DA7-ACE1-5FC37E3D32D5\&quot;,\n  \&quot;settingsKey\&quot;:\&quot;PWD_EXPIRATION_ACTIVE\&quot;,\n  \&quot;settingsValue\&quot;:\&quot;1\&quot;, // changed\n  \&quot;createdBy\&quot;:\&quot;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF\&quot;,\n  \&quot;createdDate\&quot;:\&quot;2020-01-28T03:38:03.200Z\&quot;,\n  \&quot;modifiedBy\&quot;:null,\n  \&quot;modifiedDate\&quot;:null,\n  \&quot;masterSettings\&quot;:{\n    \&quot;settingsGuid\&quot;:\&quot;B2476A3D-095F-424A-9C29-4AA95E93A09E\&quot;,\n    \&quot;settingsKey\&quot;:\&quot;PWD_EXPIRATION_ACTIVE\&quot;,\n    \&quot;keyDefault\&quot;:\&quot;0\&quot;,\n    \&quot;keyOptions\&quot;:\&quot;1|0\&quot;,\n    \&quot;description\&quot;:\&quot;Flag to turn enforcement of password expiration.  1 = On, 0 = Off\&quot;\n  }\n}]\n// save the changes above, query to verify changes, set them back to the defaults\nlet systemSettingController = new SystemSettingController(session)\nawait systemSettingController.updateSystemSettings(pwdSettings)\nlet systemSettings = await systemSettingController.listPasswordSettings();\nexpect(systemSettings.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION&#x27;).settingsValue).to.equal(&#x27;14&#x27;)\nexpect(systemSettings.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION_ACTIVE&#x27;).settingsValue).to.equal(&#x27;1&#x27;)\npwdSettings.forEach(setting =&gt; {\n  setting.settingsValue = setting.masterSettings.keyDefault\n})\nawait systemSettingController.updateSystemSettings(pwdSettings)\nsystemSettings = await systemSettingController.listPasswordSettings();\nlet pwdExpiration = systemSettings.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION&#x27;)\nlet pwdExpirationActive = systemSettings.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION_ACTIVE&#x27;)\nexpect(pwdExpiration.settingsValue).to.equal(pwdExpiration.masterSettings.keyDefault)\nexpect(pwdExpirationActive.settingsValue).to.equal(pwdExpirationActive.masterSettings.keyDefault)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66aed3c9-ec00-4153-b8ce-b22fe5f00af8&quot;,&quot;parentUUID&quot;:&quot;f9015bec-9e07-4f67-b9da-681a118a5426&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f953e572-1eb6-42be-9761-e65fdd392b94&quot;,&quot;236f7b43-3027-4624-bed0-cf2e3e30af6a&quot;,&quot;66aed3c9-ec00-4153-b8ce-b22fe5f00af8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:211,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e475278b-2296-4269-9952-44d1565f40e5&quot;,&quot;title&quot;:&quot;Biztime API Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-settings/test/integration/functions/biztimes.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/biztimes.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Biztime API Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\njwt = await testLib.getAuthToken();\nthis.timeout(10500);\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()};\nmockRes = await mocks.mockResponse();\nreq = await mocks.req(jwt);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a15a0a29-d74c-4187-a0fb-74573ca83959&quot;,&quot;parentUUID&quot;:&quot;e475278b-2296-4269-9952-44d1565f40e5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of biztimes&quot;,&quot;fullTitle&quot;:&quot;Biztime API Tests should return a list of biztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await handlers.listBiztimes(req, mockRes);\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;\nexpect(mockRes.body.length).to.be.gt(0);\nvalidateBiztime(mockRes.body[0]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;455f40f3-04f6-4e0d-82f4-ab612f331b30&quot;,&quot;parentUUID&quot;:&quot;e475278b-2296-4269-9952-44d1565f40e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert a biztime&quot;,&quot;fullTitle&quot;:&quot;Biztime API Tests should insert a biztime&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await handlers.insertBiztime(\n  {...req, body: {...biztimeToInsert}},\n  mockRes);\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;\ninsertedBiztime = mockRes.body;\nvalidateBiztime(biztimeToInsert, insertedBiztime);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d6c722b-1694-4b00-802e-d24b8364e84b&quot;,&quot;parentUUID&quot;:&quot;e475278b-2296-4269-9952-44d1565f40e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a biztime&quot;,&quot;fullTitle&quot;:&quot;Biztime API Tests should update a biztime&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await handlers.updateBiztime(\n  {\n    ...req,\n    params: {bizTimeGuid: insertedBiztime.bizTimeGuid},\n    body: {...biztimeToUpdate}},\n  mockRes\n  );\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;\nvalidateBiztime(biztimeToUpdate, mockRes.body);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07bc80f1-7d28-4019-b466-ad5d5f2342ec&quot;,&quot;parentUUID&quot;:&quot;e475278b-2296-4269-9952-44d1565f40e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;455f40f3-04f6-4e0d-82f4-ab612f331b30&quot;,&quot;2d6c722b-1694-4b00-802e-d24b8364e84b&quot;,&quot;07bc80f1-7d28-4019-b466-ad5d5f2342ec&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:36,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f26f99f0-29d8-47d0-8896-a942fb34dd33&quot;,&quot;title&quot;:&quot;Settings API Holiday Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-settings/test/integration/functions/holidays.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/holidays.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;insert, list, get, delete holiday&quot;,&quot;fullTitle&quot;:&quot;Settings API Holiday Tests insert, list, get, delete holiday&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = mocks.mockResponse();\nlet listHolidaysEvent = await mocks.listHolidaysEvent()\nlet insertHolidayEvent = await mocks.insertHolidayEvent();\nlet getHolidayEvent = await mocks.getHolidayEvent();\n\n// insert\nawait holidays.insert(insertHolidayEvent, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst inserted = mockRes.body;\nvalidateHoliday(insertHolidayEvent.body, inserted);\n//list\nawait holidays.list(listHolidaysEvent, mockRes);\n\t\texpect(mockRes.statusCode).to.equal(200);\nexpect(mockRes.body.length).to.be.greaterThan(0);\nexpectDefinedHoliday(mockRes.body[0]);\n// get\ngetHolidayEvent.params.holidayGuid = inserted.holidayGuid;\nawait holidays.get(getHolidayEvent, mockRes);\n\t\texpect(mockRes.statusCode).to.equal(200);\nconst got = mockRes.body;\nvalidateHoliday(inserted, got);\n// delete\nlet deleteEvent = Object.assign({}, listHolidaysEvent);\ndeleteEvent.body = [inserted.holidayGuid];\nawait holidays.remove(deleteEvent, mockRes);\n\t\texpect(mockRes.statusCode).to.equal(200);\ngetHolidayEvent.params = {\n  holidayGuid: inserted.holidayGuid\n};\nawait holidays.get(getHolidayEvent, mockRes);\nexpect(mockRes.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f93b5a7-5131-481d-8ede-cd4f3adfc231&quot;,&quot;parentUUID&quot;:&quot;f26f99f0-29d8-47d0-8896-a942fb34dd33&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1f93b5a7-5131-481d-8ede-cd4f3adfc231&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:33,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1944385e-5431-4b6e-a479-b40d15482b6f&quot;,&quot;title&quot;:&quot;Settings API Languages Test&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-settings/test/integration/functions/languages.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/languages.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a list of holidays&quot;,&quot;fullTitle&quot;:&quot;Settings API Languages Test should get a list of holidays&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = mocks.mockResponse();\nconst listLanguagesEvent = await mocks.listLanguagesEvent();\nawait languages.list(listLanguagesEvent, mockRes);\nexpect(mockRes.statusCode).to.eq(200);\nexpect(mockRes.body.length).to.be.gt(0);\nconst language = mockRes.body[0];\nexpect(language.languageGuid).to.exist;\nexpect(language.languageName).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf3318f0-4703-4d61-a6c0-84b768fd6b85&quot;,&quot;parentUUID&quot;:&quot;1944385e-5431-4b6e-a479-b40d15482b6f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cf3318f0-4703-4d61-a6c0-84b768fd6b85&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;72755be1-f6a0-4ab0-a878-6e48bfb3bd47&quot;,&quot;title&quot;:&quot;Settings API Password Settings Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-settings/test/integration/functions/passwordSettings.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/passwordSettings.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;lists the password settings&quot;,&quot;fullTitle&quot;:&quot;Settings API Password Settings Tests lists the password settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse();\nawait passwordSettings.list(mockReq, mockRes);\n\n\t\texpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body\nexpect(result.length).to.be.greaterThan(0);\n// only system settings listed should be the ones related to passwords\nexpect(result.filter(x =&gt; x.settingsKey.startsWith(&#x27;PWD&#x27;)).length).to.equal(result.length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d2702dfe-0ebd-4af8-971e-c641d48a09ef&quot;,&quot;parentUUID&quot;:&quot;72755be1-f6a0-4ab0-a878-6e48bfb3bd47&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d2702dfe-0ebd-4af8-971e-c641d48a09ef&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fac2f5f8-edc2-4d44-947f-015d3dba91f1&quot;,&quot;title&quot;:&quot;Settings API System Config Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-settings/test/integration/functions/systemConfig.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/systemConfig.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;lists the system config settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Config Tests lists the system config settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse();\nawait systemConfig.list(mockReq, mockRes);\n\n\t\texpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body\nexpect(result.length).to.be.greaterThan(40);\nexpect(result[0].settingsGuid).to.exist\nexpect(result[0].settingsKey).to.exist\nexpect(result[0].settingsValue).to.exist\nexpect(result[0].masterSettings.description).to.exist\nexpect(result[0].masterSettings.keyDefault).to.exist\nexpect(result[0].masterSettings.keyOptions).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fba4b4a6-836b-4a1e-ae46-e839db4bc3dd&quot;,&quot;parentUUID&quot;:&quot;fac2f5f8-edc2-4d44-947f-015d3dba91f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;updates system config settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Config Tests updates system config settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:144,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse();\nmockReq.body = [{\n  settingsGuid: \&quot;2B18AE62-7C26-439C-84A7-371B4A51BE26\&quot;,\n  settingsKey: \&quot;AllowGetReqInfo\&quot;,\n  settingsValue: \&quot;true\&quot;\n}]\nawait systemConfig.update(mockReq, mockRes);\n\n\t\texpect(mockRes.statusCode).to.equal(200);\nlet result = mockRes.body\nexpect(result).to.equal(&#x27;1&#x27;);\n// verify that change was made\nawait systemConfig.list(mockReq, mockRes);\nresult = mockRes.body\nlet allowGetReqInfo = result.find( x =&gt; x.settingsKey == &#x27;AllowGetReqInfo&#x27;)\nexpect(allowGetReqInfo.settingsValue).to.equal(&#x27;true&#x27;)\n// revert the change\nmockReq.body = [{\n  settingsGuid: \&quot;2B18AE62-7C26-439C-84A7-371B4A51BE26\&quot;,\n  settingsKey: \&quot;AllowGetReqInfo\&quot;,\n  settingsValue: \&quot;false\&quot;\n}]\nawait systemConfig.update(mockReq, mockRes);\nawait systemConfig.list(mockReq, mockRes);\nresult = mockRes.body\nallowGetReqInfo = result.find( x =&gt; x.settingsKey == &#x27;AllowGetReqInfo&#x27;)\nexpect(allowGetReqInfo.settingsValue).to.equal(&#x27;false&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61d2b934-8100-4da5-9c17-8c176aea0f6c&quot;,&quot;parentUUID&quot;:&quot;fac2f5f8-edc2-4d44-947f-015d3dba91f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fba4b4a6-836b-4a1e-ae46-e839db4bc3dd&quot;,&quot;61d2b934-8100-4da5-9c17-8c176aea0f6c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:164,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d45d3fe1-531f-4ca6-a9a7-ec824f4b7cf4&quot;,&quot;title&quot;:&quot;Settings API Utilities Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-settings/test/integration/functions/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;09b6b41c-3637-4367-b5cf-88c34ea89fd7&quot;,&quot;title&quot;:&quot;locales&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-settings/test/integration/functions/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;lists locales&quot;,&quot;fullTitle&quot;:&quot;Settings API Utilities Tests locales lists locales&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\nawait utils.listLocales(mocks.req(), mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f73a12e-39a2-44ed-9508-a49a6912fb1f&quot;,&quot;parentUUID&quot;:&quot;09b6b41c-3637-4367-b5cf-88c34ea89fd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0f73a12e-39a2-44ed-9508-a49a6912fb1f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1dd1c67f-8866-4629-b0ba-80de812c4820&quot;,&quot;title&quot;:&quot;timezones&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-settings/test/integration/functions/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list timezones&quot;,&quot;fullTitle&quot;:&quot;Settings API Utilities Tests timezones should list timezones&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nawait utils.listTimezones(mocks.req(), mockRes);\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;851edc6c-0cd2-493e-971d-2cae6a8e38f4&quot;,&quot;parentUUID&quot;:&quot;1dd1c67f-8866-4629-b0ba-80de812c4820&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;851edc6c-0cd2-493e-971d-2cae6a8e38f4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;725a8ff0-f93d-4df1-b5a0-e56244506752&quot;,&quot;title&quot;:&quot;running versions&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-settings/test/integration/functions/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list running versions&quot;,&quot;fullTitle&quot;:&quot;Settings API Utilities Tests running versions should list running versions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nawait utils.listRunningVersions(mocks.req(), mockRes);\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a43cb1e-eb30-40ee-890e-f4d791909ef5&quot;,&quot;parentUUID&quot;:&quot;725a8ff0-f93d-4df1-b5a0-e56244506752&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1a43cb1e-eb30-40ee-890e-f4d791909ef5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;988bfab9-5057-4bca-bb38-011e9e97e58c&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3636d835-9aac-4267-b09c-1bfbd515048a&quot;,&quot;title&quot;:&quot;Task Dispatcher API Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Task Dispatcher API Controller Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests \&quot;before all\&quot; hook in \&quot;Task Dispatcher API Controller Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a8ba7959-c439-4dd0-a893-a953f7e3397f&quot;,&quot;parentUUID&quot;:&quot;3636d835-9aac-4267-b09c-1bfbd515048a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;80a4521b-981a-4837-939b-cef1495559af&quot;,&quot;title&quot;:&quot;ProcessTaskController&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get process tasks&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskController should get process tasks&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:153,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processTaskController = new controllers.ProcessTaskController(session);\nconst updateMyProfileProcessSid = &#x27;f864cfe2-98df-4724-8db1-de2cc538d4e0&#x27;\nlet processTasks = await processTaskController.getProcessTasks(updateMyProfileProcessSid)\nexpect(processTasks).to.exist;\nexpect(processTasks.length).to.be.gt(0);\nexpect(processTasks[0].processTaskGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;941ea1c7-ab2b-493b-98f5-d6e7fc172da7&quot;,&quot;parentUUID&quot;:&quot;80a4521b-981a-4837-939b-cef1495559af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;941ea1c7-ab2b-493b-98f5-d6e7fc172da7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:153,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;403eb43d-1f24-4121-bd6b-a70903a0e026&quot;,&quot;title&quot;:&quot;ProcessTaskAttributeController&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list process task attributes&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskAttributeController should list process task attributes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processTaskAttributeController = new controllers.ProcessTaskAttributeController(session);\nconst profileFormProcessTaskSid = &#x27;c0473244-f04f-4916-8ac9-a73cc538d434&#x27;\nlet includeExt = false\nlet processTaskAttributes = await processTaskAttributeController.list(profileFormProcessTaskSid, includeExt)\nexpect(processTaskAttributes).to.exist;\nexpect(processTaskAttributes.length).to.be.gt(0);\nexpect(processTaskAttributes[6].processTaskAttributeGuid).to.exist;\nexpect(processTaskAttributes[6].extendedAtt).to.not.exist;\nincludeExt = true\nlet processTaskAttributesIncExt = await processTaskAttributeController.list(profileFormProcessTaskSid, includeExt)\nexpect(processTaskAttributesIncExt).to.exist;\nexpect(processTaskAttributesIncExt.length).to.be.gt(0);\nexpect(processTaskAttributesIncExt[6].processTaskAttributeGuid).to.exist;\nexpect(processTaskAttributesIncExt[6].extendedAtt.extAttribute).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7219b71e-ba0c-446a-9804-018afc7d1388&quot;,&quot;parentUUID&quot;:&quot;403eb43d-1f24-4121-bd6b-a70903a0e026&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get and update a process task attribute&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskAttributeController should get and update a process task attribute&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:42,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processTaskAttributeGuid = &#x27;7cece0ab-bda6-4b13-a8fb-3f5c467371e6&#x27;  \nlet processTaskAttributeController = new controllers.ProcessTaskAttributeController(session);\nlet processTaskAttribute =  await processTaskAttributeController.get(processTaskAttributeGuid)\n// console.log(processTaskAttribute)\nexpect(processTaskAttribute.attributeValue).to.equal(&#x27;0&#x27;)\nlet numberOfAffectedRows = await processTaskAttributeController.update({\n  processTaskAttributeGuid,\n  fields: {\n    attributeValue: &#x27;TEST&#x27;\n  }\n})\nexpect(numberOfAffectedRows).to.equal(1)\nprocessTaskAttribute =  await processTaskAttributeController.get(processTaskAttributeGuid)\nexpect(processTaskAttribute.attributeValue).to.equal(&#x27;TEST&#x27;)\n// must set it back to original value so that we don&#x27;t break anything\nnumberOfAffectedRows = await processTaskAttributeController.update({\n  processTaskAttributeGuid,\n  fields: {\n    attributeValue: &#x27;0&#x27;\n  }\n})\nexpect(numberOfAffectedRows).to.equal(1)\nprocessTaskAttribute =  await processTaskAttributeController.get(processTaskAttributeGuid)\nexpect(processTaskAttribute.attributeValue).to.equal(&#x27;0&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3210b14-9620-425a-8496-b6aa912c604e&quot;,&quot;parentUUID&quot;:&quot;403eb43d-1f24-4121-bd6b-a70903a0e026&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert a process task attribute&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskAttributeController should insert a process task attribute&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// pick any process task and insert a process task attribute\n// then delete it\nconst processTaskAttributeController = new controllers.ProcessTaskAttributeController(session);\n// give \&quot;Update my profile - Start task\&quot; a test process task att\nconst processTaskGuid = &#x27;27cb04ea-b19d-4327-8b3a-e82cc538d44d&#x27;\nconst attributeKey = &#x27;TEST_KEY&#x27;\nconst attributeValue = &#x27;TEST_VALUE&#x27;\nconst ordinal = 1\nconst processTaskAttribute = await processTaskAttributeController.insert({\n  processTaskGuid,\n  attributeKey,\n  attributeValue,\n  ordinal\n})\nexpect(processTaskAttribute.processTaskAttributeGuid).to.be.a.uuid()\nexpect(processTaskAttribute.processTaskGuid).to.equal(processTaskGuid)\nexpect(processTaskAttribute.attributeKey).to.equal(attributeKey)\nexpect(processTaskAttribute.attributeValue).to.equal(attributeValue)\nexpect(processTaskAttribute.ordinal).to.equal(ordinal)\n// cleanup\n// const numberOfAffectedRows = await processTaskAttributeController.delete(processTaskAttribute.processTaskAttributeGuid)\nconst numberOfAffectedRows = await processTaskAttributeController.delete(processTaskAttribute.processTaskAttributeGuid)\nexpect(numberOfAffectedRows).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6caa463a-db0f-4683-9c65-52896a6c5243&quot;,&quot;parentUUID&quot;:&quot;403eb43d-1f24-4121-bd6b-a70903a0e026&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get the process task attribute max ordinal value for a process task&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskAttributeController should get the process task attribute max ordinal value for a process task&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processTaskAttributeController = new controllers.ProcessTaskAttributeController(session);\n// \&quot;Update my profile - Start task\&quot; a test process task att\nlet processTaskGuid = \&quot;27cb04ea-b19d-4327-8b3a-e82cc538d44d\&quot;;\n// that process task has no atts so its max ordinal should be null\nlet maxOrdinal = await processTaskAttributeController.getMaxOrdinal(processTaskGuid);\nexpect(maxOrdinal).to.equal(null);\n// \&quot;Update my profile - User Profile\&quot; task does have atts.  seed db goes up to 12\nprocessTaskGuid = \&quot;28d88aa5-fc4c-4e16-b32d-2964c738d49b\&quot;;\nmaxOrdinal = await processTaskAttributeController.getMaxOrdinal(processTaskGuid);\nexpect(maxOrdinal).to.equal(12);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21196603-7899-45fd-9335-7e9cee6ab7d7&quot;,&quot;parentUUID&quot;:&quot;403eb43d-1f24-4121-bd6b-a70903a0e026&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7219b71e-ba0c-446a-9804-018afc7d1388&quot;,&quot;b3210b14-9620-425a-8496-b6aa912c604e&quot;,&quot;6caa463a-db0f-4683-9c65-52896a6c5243&quot;,&quot;21196603-7899-45fd-9335-7e9cee6ab7d7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:93,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8301e031-56db-4a53-adc7-f562ad3b3635&quot;,&quot;title&quot;:&quot;ProcessTaskMappingController&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list process task mappings&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskMappingController should list process task mappings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processTaskMappingController = new controllers.ProcessTaskMappingController(session);\nconst profileFormProcessTaskSid = &#x27;c0473244-f04f-4916-8ac9-a73cc538d434&#x27;\nlet processTaskAttributes = await processTaskMappingController.list(profileFormProcessTaskSid)\nexpect(processTaskAttributes).to.exist;\nexpect(processTaskAttributes.length).to.be.gt(0);\nexpect(processTaskAttributes[0].processTaskMappingGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6563f0bc-4273-45ec-aa7d-913b3269433d&quot;,&quot;parentUUID&quot;:&quot;8301e031-56db-4a53-adc7-f562ad3b3635&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6563f0bc-4273-45ec-aa7d-913b3269433d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e89af857-9b7e-46ab-b642-eb47d43f19dd&quot;,&quot;title&quot;:&quot;ProcessController&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update a process&#x27;s modified by and date fields&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessController should update a process&#x27;s modified by and date fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processController = new controllers.ProcessController(session);\nconst updateMyProfileProcessSid = &#x27;f864cfe2-98df-4724-8db1-de2cc538d4e0&#x27;\nconst systemUserGuid = &#x27;D8C469C3-F781-4179-A09C-6D148885FB30&#x27;\nlet process = await processController.get(updateMyProfileProcessSid)\nexpect(process).to.exist;\nexpect(process.processGuid.toLowerCase()).to.equal(updateMyProfileProcessSid);\nconst oldModifiedDate = process.modifiedDate\nconst numberOfAffectedRows = await processController.updateModifiedByAndDate(updateMyProfileProcessSid)\nexpect(numberOfAffectedRows).to.equal(1)\nprocess = await processController.get(updateMyProfileProcessSid) \nexpect(process.modifiedDate).to.be.greaterThan(oldModifiedDate)\n// for some reason when executed in a test the db record&#x27;s modifiedBy is set to \n// the systemUserGuid instead of the contact sid specified in the session (4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF)\nexpect(process.modifiedBy).to.equal(systemUserGuid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5bfbefd7-910a-4ef7-ab55-17f2ee7cf353&quot;,&quot;parentUUID&quot;:&quot;e89af857-9b7e-46ab-b642-eb47d43f19dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5bfbefd7-910a-4ef7-ab55-17f2ee7cf353&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;17fbabe7-0f8a-44f8-b335-b55d0d8669ad&quot;,&quot;title&quot;:&quot;Task Dispatcher API Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-task-dispatcher/test/integration/db/model.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;069003b1-4b15-4fb9-9a57-c90f0c681cc6&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-task-dispatcher/test/integration/db/model.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/model.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Model Tests tests \&quot;before all\&quot; hook in \&quot;tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9eea56c-b098-4682-bc48-d700174bd159&quot;,&quot;parentUUID&quot;:&quot;069003b1-4b15-4fb9-9a57-c90f0c681cc6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:54,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const vwProcessTasksModel = await sqldb.models.bindModel(\n  config.tenantOne.tenantId,\n  vwProcessTasksModels.vwProcessTasks\n);\nlet results = await vwProcessTasksModel.query();\n//console.log(results)\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd5bc76d-4113-4fa4-861b-0dc602a430ef&quot;,&quot;parentUUID&quot;:&quot;069003b1-4b15-4fb9-9a57-c90f0c681cc6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a hash of bound models&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Model Tests tests should return a hash of bound models&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const vwProcessTasksModel = (await models.getModels(config.tenantOne.tenantId))\n  .vwProcessTasks;\nlet results = await vwProcessTasksModel.query();\n//console.log(results)\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;507aaa22-4962-4311-9e83-c56150c33b25&quot;,&quot;parentUUID&quot;:&quot;069003b1-4b15-4fb9-9a57-c90f0c681cc6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should bound models should be cached in memory&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Model Tests tests should bound models should be cached in memory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(models._tentantModels[config.tenantOne.tenantId]).to.exist;\nlet results = await models._tentantModels[\n  config.tenantOne.tenantId\n].vwProcessTasks.query();\n//console.log(results)\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c1ae2fe-d767-45fd-b9d3-260a34d457eb&quot;,&quot;parentUUID&quot;:&quot;069003b1-4b15-4fb9-9a57-c90f0c681cc6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cd5bc76d-4113-4fa4-861b-0dc602a430ef&quot;,&quot;507aaa22-4962-4311-9e83-c56150c33b25&quot;,&quot;4c1ae2fe-d767-45fd-b9d3-260a34d457eb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:107,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bebd854e-651f-4d76-a3fd-50a206d24c66&quot;,&quot;title&quot;:&quot;Task Dispatcher API PDF Merge Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-task-dispatcher/test/integration/functions/pdfMerge.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/pdfMerge.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets task settings&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets task settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;script_gettasksettings\&quot;, tasktype }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\n// vue output\n// expect(result.length).to.be.greaterThan(1);\n// expect(result[0].attributeKey).to.exist;\n// expect(result[0].attributeValue).to.exist;\n// expect(result.find(x =&gt; x.attributeKey == &#x27;GeneratedFileName&#x27;)).to.exist\n// expect(result.find(x =&gt; x.attributeKey == &#x27;FirstPDF&#x27;)).to.exist\n// angular output\nexpect(result.Data.GeneratedFileName).to.exist;\nexpect(result.Data.FirstPDF).to.exist;\nexpect(result.Data.SecondPDF).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;846331e2-8de5-4e6e-a2d8-8a431d2a5d63&quot;,&quot;parentUUID&quot;:&quot;bebd854e-651f-4d76-a3fd-50a206d24c66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets PDF options&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets PDF options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;script_getpdfoptions\&quot;, tasktype }\nmockReq.query = { processSid }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result.length).to.be.greaterThan(1);\n// vue output\n// expect(result[0].displayName).to.exist;\n// expect(result[0].processTaskGuid).to.exist;\n// expect(result[0].taskTypeGuid).to.exist;\n// angular output\nexpect(result[0].length).to.be.greaterThan(1);\nexpect(result[0][0]).to.equal(&#x27;ae9b4a71-5f37-4fe9-9926-a0901da0eb0e;52407ad7-bd98-4023-8d88-91ef4464cd98&#x27;);\nexpect(result[0][1]).to.equal(&#x27;second PDF Merge Form : File Attachment (Task Output)&#x27;);\nexpect(result[0][2]).to.equal(&#x27;322ffece-654f-49e4-bb5c-4ae41768d5be&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c75023b0-14b3-4949-a383-f4f9120c69e7&quot;,&quot;parentUUID&quot;:&quot;bebd854e-651f-4d76-a3fd-50a206d24c66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;lists PDF rule options&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests lists PDF rule options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;listRuleOptions\&quot;, tasktype }\nmockReq.query = { processSid }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result).to.eql([{ Value: \&quot;GeneratedPDF\&quot;, Label: \&quot;Generated PDF\&quot;, Type: \&quot;FileAttachment\&quot;}])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb944928-e34f-4b73-8478-603dfa11912a&quot;,&quot;parentUUID&quot;:&quot;bebd854e-651f-4d76-a3fd-50a206d24c66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets PDF fields&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets PDF fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid, op: \&quot;script_getpdffields\&quot;, tasktype }\nmockReq.query = { processSid }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\n// vue output\n// expect(result.length).to.equal(1)\n// expect(result[0]).to.equal(&#x27;FILE_NAME&#x27;)\n// angular output\nexpect(result.Data.length).to.equal(1)\nexpect(result.Data[0][0]).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result.Data[0][1]).to.equal(&#x27;FILE_NAME&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db79d7b6-e5e2-4601-9814-133d30107124&quot;,&quot;parentUUID&quot;:&quot;bebd854e-651f-4d76-a3fd-50a206d24c66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - data source - form mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - data source - form mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Task_Input&#x27;)\nexpect(result[0].PrefillField).to.equal(&#x27;1601919933647&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Data - second PDF Merge Form - Merged PDF Filename:&#x27;)\nexpect(result[0].TaskSID).to.equal(&#x27;ae9b4a71-5f37-4fe9-9926-a0901da0eb0e&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8cf4b3b2-6473-492e-bdf7-95bae709e86b&quot;,&quot;parentUUID&quot;:&quot;bebd854e-651f-4d76-a3fd-50a206d24c66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - fixed value mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - fixed value mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processSid_fixedValue = &#x27;c2095ccf-896b-46a0-b5e9-8e5b7e288270&#x27; \nconst processTaskSid_fixedValue = &#x27;5f719bb1-11b8-43d9-a9fd-66e55306f4eb&#x27;\nconst mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid: processTaskSid_fixedValue, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid: processSid_fixedValue }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Fixed_Value&#x27;)\nexpect(result[0].PrefillField).to.equal(&#x27;fixValFileName&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Fixed Value - fixValFileName&#x27;)\nexpect(result[0].TaskSID).to.not.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97207024-d72e-49e0-9701-0e570b0b0487&quot;,&quot;parentUUID&quot;:&quot;bebd854e-651f-4d76-a3fd-50a206d24c66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - request id mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - request id mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processSid_requestId = &#x27;f9f94cfe-d4b3-4d89-9695-1b32c6cee55d&#x27; \nconst processTaskSid_requestId = &#x27;9b4f1444-7bd7-481a-8008-69a0490da139&#x27;\nconst mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid: processTaskSid_requestId, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid: processSid_requestId }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Request&#x27;)\nexpect(result[0].PrefillField).to.equal(&#x27;ID&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Request - ID&#x27;)\nexpect(result[0].TaskSID).to.not.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe186e74-8e6b-4fe7-bfcb-a83fb5a2d281&quot;,&quot;parentUUID&quot;:&quot;bebd854e-651f-4d76-a3fd-50a206d24c66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - client username mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - client username mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processSid_clientUsername = &#x27;d1a7c44e-1e6e-4cdf-9d39-deac08a8b5cc&#x27; \nconst processTaskSid_clientUsername = &#x27;a79cde56-9f3a-4be4-9824-dd634eddbff3&#x27;\nconst mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid: processTaskSid_clientUsername, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid: processSid_clientUsername }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Client&#x27;)\nexpect(result[0].PrefillField).to.equal(&#x27;UserName&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Client - UserName&#x27;)\nexpect(result[0].TaskSID).to.not.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;acd73cdb-ef6b-4697-acab-e2a944baef83&quot;,&quot;parentUUID&quot;:&quot;bebd854e-651f-4d76-a3fd-50a206d24c66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - status pdfmerge mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - status pdfmerge mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processSid_statusPdfMerge = &#x27;ab3a8404-c208-4ca7-8ae6-637b16c23368&#x27; \nconst processTaskSid_statusPdfMerge = &#x27;7f4f1f42-228c-46dc-90a3-77fe15fe7412&#x27;\nconst mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid: processTaskSid_statusPdfMerge, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid: processSid_statusPdfMerge }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Task_State&#x27;)\n// expect(result[0].PrefillField).to.equal(&#x27;UserName&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Status - PDF Merge - &#x27;)\nexpect(result[0].TaskSID).to.equal(&#x27;7f4f1f42-228c-46dc-90a3-77fe15fe7412&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a045c01a-6e0f-4a00-9ab1-810905bfa794&quot;,&quot;parentUUID&quot;:&quot;bebd854e-651f-4d76-a3fd-50a206d24c66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;846331e2-8de5-4e6e-a2d8-8a431d2a5d63&quot;,&quot;c75023b0-14b3-4949-a383-f4f9120c69e7&quot;,&quot;bb944928-e34f-4b73-8478-603dfa11912a&quot;,&quot;db79d7b6-e5e2-4601-9814-133d30107124&quot;,&quot;8cf4b3b2-6473-492e-bdf7-95bae709e86b&quot;,&quot;97207024-d72e-49e0-9701-0e570b0b0487&quot;,&quot;fe186e74-8e6b-4fe7-bfcb-a83fb5a2d281&quot;,&quot;acd73cdb-ef6b-4697-acab-e2a944baef83&quot;,&quot;a045c01a-6e0f-4a00-9ab1-810905bfa794&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:77,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;359acc70-c594-411b-b574-6267f55c6bd5&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c24bca3d-fa01-4b35-aed1-918306da7a7a&quot;,&quot;title&quot;:&quot;Tenant API Sessions Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/activeSessions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/activeSessions.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Sessions Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000); \ntestConfig = await testLib.getTestConfig();\n    \ntenant = testConfig.tenantOne.tenantId;\ngroup = \&quot;sessionServiceGroup\&quot;\ntestEventType = &#x27;extendSession&#x27;\nfullStreamName = tenant + &#x27;.stream.&#x27; + testStreamName\neventProcessedName = fullStreamName + \&quot;.\&quot; + group + \&quot;.processed\&quot;;\neventHistoryName = fullStreamName + \&quot;.history\&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b40b83b-7c1e-4a77-b5c7-f723738e03bc&quot;,&quot;parentUUID&quot;:&quot;c24bca3d-fa01-4b35-aed1-918306da7a7a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Sessions Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63c3709c-9ea6-485a-92bd-773693f09750&quot;,&quot;parentUUID&quot;:&quot;c24bca3d-fa01-4b35-aed1-918306da7a7a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e600df66-4ad1-455e-bed0-c675d3f4afc3&quot;,&quot;title&quot;:&quot;Active Sessions&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/activeSessions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/activeSessions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2d8c8571-ab16-46e9-a448-22e5ede2d488&quot;,&quot;title&quot;:&quot;count active sessions&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/activeSessions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/activeSessions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return activeSessions&quot;,&quot;fullTitle&quot;:&quot;Tenant API Sessions Tests Active Sessions count active sessions should return activeSessions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let sessions  = await getActiveSessions(tenant);\n//console.log(sessions)\nexpect(sessions).to.exist;\nexpect(sessions).to.have.property(\&quot;activeSessions\&quot;)\nexpect(sessions).to.have.property(\&quot;activeUsers\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e5035a0-8e52-431e-a9dd-8b6d1f15dff6&quot;,&quot;parentUUID&quot;:&quot;2d8c8571-ab16-46e9-a448-22e5ede2d488&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7e5035a0-8e52-431e-a9dd-8b6d1f15dff6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bcf511ff-16ad-45f2-8477-a15a67456662&quot;,&quot;title&quot;:&quot;Tenant API licsense stats&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/licenseStats.test.js&quot;,&quot;file&quot;:&quot;/test/integration/licenseStats.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API licsense stats \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3005,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000); \nconfig = await testLib.getTestConfig();\nlet sp = new stream.StreamPublisher(&#x27;sessions&#x27;,config.tenantOne.tenantId);\nawait sp.sendEvent(\&quot;extendSession\&quot;, {\n    token: \&quot;abcd234\&quot;,\n    user: {\n        sid:\&quot;11111\&quot;, \n        user_name: \&quot;iapprove\&quot;, \n        email: \&quot;iapprove@integrify.com\&quot;, \n        name: \&quot;System System\&quot;\n    }\n})\n    \nawait delay(3000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7f93fda-7bb5-46fb-9ed0-c90debf39f36&quot;,&quot;parentUUID&quot;:&quot;bcf511ff-16ad-45f2-8477-a15a67456662&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API licsense stats \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0500e230-e38e-4667-9495-db2b8a519f94&quot;,&quot;parentUUID&quot;:&quot;bcf511ff-16ad-45f2-8477-a15a67456662&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b8146034-8a45-4897-ad7b-dda602f27bfb&quot;,&quot;title&quot;:&quot;Post all stats&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/licenseStats.test.js&quot;,&quot;file&quot;:&quot;/test/integration/licenseStats.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return ok&quot;,&quot;fullTitle&quot;:&quot;Tenant API licsense stats Post all stats should return ok&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:613,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let result = await postAllStats();\nexpect(result).to.eq(\&quot;ok\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d4edd9a-7e00-426e-9f94-b22b434893c7&quot;,&quot;parentUUID&quot;:&quot;b8146034-8a45-4897-ad7b-dda602f27bfb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3d4edd9a-7e00-426e-9f94-b22b434893c7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:613,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;63c6e622-05e1-449f-89b7-d30bdbd32d89&quot;,&quot;title&quot;:&quot;Tenant API Stream-Manager Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;82415374-f273-4c68-9c58-fa7d8a95c528&quot;,&quot;title&quot;:&quot;listTenantStreams&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of the streams for a tenant&quot;,&quot;fullTitle&quot;:&quot;Tenant API Stream-Manager Tests listTenantStreams should return a list of the streams for a tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req();\n\t\t\tlet results = await streamMonitor.listTenantStreams(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst apps = mockRes.body;\n\t\t\tstreamName = apps[0]\n\t\t\texpect(apps).to.be.array()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1da0c0c6-4439-4823-984f-f6ec623b4d8b&quot;,&quot;parentUUID&quot;:&quot;82415374-f273-4c68-9c58-fa7d8a95c528&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1da0c0c6-4439-4823-984f-f6ec623b4d8b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7a1fb02c-62ca-463c-8615-a8e46601c276&quot;,&quot;title&quot;:&quot;streamInfoReqHandler&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return info for the stream&quot;,&quot;fullTitle&quot;:&quot;Tenant API Stream-Manager Tests streamInfoReqHandler should return info for the stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req();\n\t\t\treq.params.streamName = req.params.tenant + &#x27;.stream.&#x27; + testStreamName\n\t\t\tlet results = await streamMonitor.streamInfoReqHandler(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst info = mockRes.body;\n\t\t\texpect(info).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b965828-93eb-4500-8f0e-f34985103034&quot;,&quot;parentUUID&quot;:&quot;7a1fb02c-62ca-463c-8615-a8e46601c276&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2b965828-93eb-4500-8f0e-f34985103034&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;aa1f3f25-4907-4b0c-9ffa-248245f57256&quot;,&quot;title&quot;:&quot;getGroupInfo&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return group info for the stream&quot;,&quot;fullTitle&quot;:&quot;Tenant API Stream-Manager Tests getGroupInfo should return group info for the stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req();\n\t\t\treq.params.streamName = req.params.tenant + &#x27;.stream.&#x27; + testStreamName\n\t\t\tlet results = await streamMonitor.getGroupInfo(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst info = mockRes.body;\n\t\t\texpect(info).to.be.array()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e68f4432-fd6e-4f35-863d-1d63f0ec89fb&quot;,&quot;parentUUID&quot;:&quot;aa1f3f25-4907-4b0c-9ffa-248245f57256&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e68f4432-fd6e-4f35-863d-1d63f0ec89fb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;56a60bec-aba9-492f-a78c-88259c16b575&quot;,&quot;title&quot;:&quot;getConsumerInfo&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return consumer info for the group&quot;,&quot;fullTitle&quot;:&quot;Tenant API Stream-Manager Tests getConsumerInfo should return consumer info for the group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req();\n\t\t\treq.params.streamName = req.params.tenant + &#x27;.stream.&#x27; + testStreamName\n\t\t\treq.params.groupName = \&quot;sessionServiceGroup\&quot; \n\t\t\tlet results = await streamMonitor.getConsumerInfo(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst info = mockRes.body;\n\t\t\texpect(info).to.be.array()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;563bec82-ef6e-4a6c-a242-c4fa318ec1be&quot;,&quot;parentUUID&quot;:&quot;56a60bec-aba9-492f-a78c-88259c16b575&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;563bec82-ef6e-4a6c-a242-c4fa318ec1be&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;be6c1e99-df4e-4d0d-be57-472ac88c9bfc&quot;,&quot;title&quot;:&quot;Tenant API License, Apps and Settings Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;01c764f7-b390-407d-8ed9-9fa6873c0f8c&quot;,&quot;title&quot;:&quot;getTenantLicense&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a license for a tenant&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantLicense should return a license for a tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req()\n\t\t\tlet results = await getTenantLicense(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst licenseInfo = mockRes.body;\n\t\t\texpect(licenseInfo.instanceId).equal(req.oauth.tenant);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f79a53a-c775-48e7-8c63-495ffb10c0d5&quot;,&quot;parentUUID&quot;:&quot;01c764f7-b390-407d-8ed9-9fa6873c0f8c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0f79a53a-c775-48e7-8c63-495ffb10c0d5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a265a428-e75e-44fc-b30a-925c0459bc41&quot;,&quot;title&quot;:&quot;getTenantApps&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return apps for a tenant&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantApps should return apps for a tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await  mocks.req()\n\t\t\tlet results = await getTenantApps(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst apps = mockRes.body;\n\t\t\texpect(apps).to.be.array()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76a7f7c5-f2e2-44bf-8a06-1331747f1c0f&quot;,&quot;parentUUID&quot;:&quot;a265a428-e75e-44fc-b30a-925c0459bc41&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;76a7f7c5-f2e2-44bf-8a06-1331747f1c0f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b6ea5bfe-9616-497f-86b9-a4440b1f50d5&quot;,&quot;title&quot;:&quot;getTenantLicenseLocation&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return license location for a tenant&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantLicenseLocation should return license location for a tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await  mocks.req()\n\t\t\tlet results = await getTenantLicenseLocation(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst licenseLocation = mockRes.body;\n      expect(licenseLocation).to.satisfy(function(val) { return val === &#x27;onpremise&#x27; || val.toLowerCase().includes(&#x27;cloud&#x27;); });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc43b885-353f-4ed2-9034-9ff36f5704d8&quot;,&quot;parentUUID&quot;:&quot;b6ea5bfe-9616-497f-86b9-a4440b1f50d5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bc43b885-353f-4ed2-9034-9ff36f5704d8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d1c927bf-904f-4d98-a783-7da6540cb516&quot;,&quot;title&quot;:&quot;getTenantLoginSettings&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should login settings for a tenant based on a tenant id&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantLoginSettings should login settings for a tenant based on a tenant id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await  mocks.req()\n\t\t\treq.query = {tenant: req.config.tenantOne.tenantId}\n\t\t\tlet results = await getTenantLoginSettings(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst settings = mockRes.body;\n\t\t\texpect(settings.ID).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9f9def30-22e6-4615-8dc8-a05245842681&quot;,&quot;parentUUID&quot;:&quot;d1c927bf-904f-4d98-a783-7da6540cb516&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should login settings for a tenant based on a host header&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantLoginSettings should login settings for a tenant based on a host header&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await  mocks.req()\n\t\t\treq.query = {hostHeader: req.config.tenantOne.hostHeader}\n\t\t\tlet results = await getTenantLoginSettings(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst settings = mockRes.body;\n\t\t\texpect(settings.ID).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb312087-3bee-4d79-93ad-fa96625d89e1&quot;,&quot;parentUUID&quot;:&quot;d1c927bf-904f-4d98-a783-7da6540cb516&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9f9def30-22e6-4615-8dc8-a05245842681&quot;,&quot;bb312087-3bee-4d79-93ad-fa96625d89e1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;728d407a-435a-4e70-8914-46e382bf8d4b&quot;,&quot;title&quot;:&quot;Tenant API Translation controller tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/translation.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c783d3c7-84f4-45d9-9094-9dbd9b97efe0&quot;,&quot;parentUUID&quot;:&quot;728d407a-435a-4e70-8914-46e382bf8d4b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await translationController.deleteLanguages(tenant, {languageName: &#x27;test&#x27;});\ndeleted = await translationController.deleteLabels(tenant, {defaultText: &#x27;label from test&#x27;});\nconsole.log(deleted);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54342aeb-0f4e-42f0-949c-bf43c56456a1&quot;,&quot;parentUUID&quot;:&quot;728d407a-435a-4e70-8914-46e382bf8d4b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;62e2492c-b5d5-4f60-a00d-088e4fcffbb7&quot;,&quot;title&quot;:&quot;language crud &quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/translation.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests language crud  should create a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  language = await translationController.createLanguage(tenant, languageObj);\n_id = language._id.toString();\nexpect(_id).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;217efb68-5b1f-4648-b341-0484288ed0e7&quot;,&quot;parentUUID&quot;:&quot;62e2492c-b5d5-4f60-a00d-088e4fcffbb7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list languages&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests language crud  should list languages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  languages = await translationController.listLanguages(tenant);\n         console.log(JSON.stringify(languages));\n         expect(languages.length).to.be.gt(0);  \n         let createdLanguage  = languages.find((d) =&gt; {\n             return d._id.toString() === _id;\n         })\n         expect(createdLanguage).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;33d60828-fa19-4eab-a152-f666a54a2ecb&quot;,&quot;parentUUID&quot;:&quot;62e2492c-b5d5-4f60-a00d-088e4fcffbb7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests language crud  should get a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;language = await translationController.getLanguage(tenant,_id);\n            expect(language).to.exist         \n            expect(language._id.toString()).to.equal(_id)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5af092de-fb9d-4672-93f7-9667cb889d84&quot;,&quot;parentUUID&quot;:&quot;62e2492c-b5d5-4f60-a00d-088e4fcffbb7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests language crud  should update a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;language.translationCode = &#x27;test-updated&#x27;;\n            language.modifiedBy = IntegrifySystemContactSid;\n            const updatedLanguage = await translationController.updateLanguage(tenant,language.toObject());\n            expect(updatedLanguage).to.exist         \n            expect(updatedLanguage._id.toString()).to.equal(_id)\n            expect(updatedLanguage.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a78c1f3-39fb-47df-91b2-24c38b05ef7c&quot;,&quot;parentUUID&quot;:&quot;62e2492c-b5d5-4f60-a00d-088e4fcffbb7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests language crud  delete a a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const deleted = await translationController.deleteLanguage(tenant,_id);\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;950b8dad-1955-4789-86d0-040d65867137&quot;,&quot;parentUUID&quot;:&quot;62e2492c-b5d5-4f60-a00d-088e4fcffbb7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;217efb68-5b1f-4648-b341-0484288ed0e7&quot;,&quot;33d60828-fa19-4eab-a152-f666a54a2ecb&quot;,&quot;5af092de-fb9d-4672-93f7-9667cb889d84&quot;,&quot;6a78c1f3-39fb-47df-91b2-24c38b05ef7c&quot;,&quot;950b8dad-1955-4789-86d0-040d65867137&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:50,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9339cc23-df10-4963-903f-2e8d791a4b79&quot;,&quot;title&quot;:&quot;label crud &quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/translation.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  should create a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  label = await translationController.createLabel(tenant, labelObj);\n_id = label._id.toString();\nexpect(_id).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a9f4697-3401-4b4e-88d1-7d727a7b014e&quot;,&quot;parentUUID&quot;:&quot;9339cc23-df10-4963-903f-2e8d791a4b79&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list labels&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  should list labels&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  labels = await translationController.listLabels(tenant);\n         expect(labels.length).to.be.gt(0);  \n         let createdLabel  = labels.find((d) =&gt; {\n             return d._id.toString() === _id;\n         })\n         expect(createdLabel).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;38973181-4173-4548-91e0-fe421a7d0f47&quot;,&quot;parentUUID&quot;:&quot;9339cc23-df10-4963-903f-2e8d791a4b79&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  should get a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;label = await translationController.getLabel(tenant,_id);\n            expect(label).to.exist         \n            expect(label._id.toString()).to.equal(_id)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8b141c64-5119-4315-a150-b3e8a8860e24&quot;,&quot;parentUUID&quot;:&quot;9339cc23-df10-4963-903f-2e8d791a4b79&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  should update a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;label.translatedText = &#x27;test-updated&#x27;;\n            label.modifiedBy = IntegrifySystemContactSid;\n            const updatedLabel = await translationController.updateLabel(tenant,label.toObject());\n            expect(updatedLabel).to.exist         \n            expect(updatedLabel._id.toString()).to.equal(_id)\n            expect(updatedLabel.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d116fea2-2351-429e-8dd7-71b21fc7dce0&quot;,&quot;parentUUID&quot;:&quot;9339cc23-df10-4963-903f-2e8d791a4b79&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  delete a a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const deleted = await translationController.deleteLabel(tenant,_id);\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66f65501-0242-4337-bb9e-f95a59d314d8&quot;,&quot;parentUUID&quot;:&quot;9339cc23-df10-4963-903f-2e8d791a4b79&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;save new labels from ui list&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  save new labels from ui list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let unsaved = [&#x27;label from test&#x27;]\nconst savedCount = await translationController.saveNewDefaultLabels(tenant, unsaved);\nexpect(savedCount).to.exist         \nexpect(savedCount).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;199be30b-e89c-4192-9da7-44238ecc2fbe&quot;,&quot;parentUUID&quot;:&quot;9339cc23-df10-4963-903f-2e8d791a4b79&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4a9f4697-3401-4b4e-88d1-7d727a7b014e&quot;,&quot;38973181-4173-4548-91e0-fe421a7d0f47&quot;,&quot;8b141c64-5119-4315-a150-b3e8a8860e24&quot;,&quot;d116fea2-2351-429e-8dd7-71b21fc7dce0&quot;,&quot;66f65501-0242-4337-bb9e-f95a59d314d8&quot;,&quot;199be30b-e89c-4192-9da7-44238ecc2fbe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;46edbb79-bbd7-413c-831e-065dbdad798e&quot;,&quot;title&quot;:&quot;seed functions &quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/translation.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should seed languages&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests seed functions  should seed languages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  seeded = await translationController.seedLanguages(true) //true for isTest;\n\nexpect(seeded).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;68642553-254e-45d9-b5a7-73db2bb42ad3&quot;,&quot;parentUUID&quot;:&quot;46edbb79-bbd7-413c-831e-065dbdad798e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should seed labels&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests seed functions  should seed labels&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  seeded = await translationController.seedLabels(true) //true for isTest;\n\nexpect(seeded).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17cf6f76-9f47-4054-9cb5-c5c5f0d19314&quot;,&quot;parentUUID&quot;:&quot;46edbb79-bbd7-413c-831e-065dbdad798e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;68642553-254e-45d9-b5a7-73db2bb42ad3&quot;,&quot;17cf6f76-9f47-4054-9cb5-c5c5f0d19314&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d5d1057b-614d-402e-a7f0-cbea816747ca&quot;,&quot;title&quot;:&quot;Tenant API Translation handler tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/translation.handler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.handler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f3f254f-2c33-48c2-9c63-ad89f32d4355&quot;,&quot;parentUUID&quot;:&quot;d5d1057b-614d-402e-a7f0-cbea816747ca&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await translationController.deleteLanguages(tenant, {languageName: &#x27;test&#x27;});\ndeleted = await translationController.deleteLabels(tenant, {defaultText: &#x27;label from test&#x27;});\nconsole.log(deleted);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1ca15b4-9b66-4fb1-bc8f-3d35f788e728&quot;,&quot;parentUUID&quot;:&quot;d5d1057b-614d-402e-a7f0-cbea816747ca&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8c095705-945b-4feb-9cc4-41af36dd6ecd&quot;,&quot;title&quot;:&quot;language crud &quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/translation.handler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.handler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  should create a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = languageObj;\nawait translationHandler.createLanguage(req, mockRes);\nlanguage = mockRes.body;\n_id = language._id.toString();\nexpect(_id).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cfa56dad-09ba-4845-bcc6-fecfe3a81814&quot;,&quot;parentUUID&quot;:&quot;8c095705-945b-4feb-9cc4-41af36dd6ecd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list languages&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  should list languages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n         const req = await mocks.req();\n         await translationHandler.listLanguages(req,mockRes);\n         const  languages = mockRes.body;\n         expect(languages.length).to.be.gt(0);  \n         let createdLanguage  = languages.find((d) =&gt; {\n             return d._id.toString() === _id;\n         })\n         expect(createdLanguage).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7f0e501-1904-4b03-bf13-74e88ebf75cc&quot;,&quot;parentUUID&quot;:&quot;8c095705-945b-4feb-9cc4-41af36dd6ecd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list tenant languages&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  should list tenant languages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n         const req = await mocks.req();\n         req.params.tenant = tenant\n         await translationHandler.listTenantLanguages(req,mockRes);\n         const  languages = mockRes.body;\n         expect(languages.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a55cd2c-bc4f-44f1-9ffb-89d06ac9ac3e&quot;,&quot;parentUUID&quot;:&quot;8c095705-945b-4feb-9cc4-41af36dd6ecd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  should get a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            const req = await mocks.req();\n            req.params.id = _id;\n            await translationHandler.getLanguage(req,mockRes);\n            language = mockRes.body;\n            expect(language).to.exist         \n            expect(language._id.toString()).to.equal(_id)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6503418-516e-4408-b00a-b84c29861b49&quot;,&quot;parentUUID&quot;:&quot;8c095705-945b-4feb-9cc4-41af36dd6ecd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  should update a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = language;\nawait translationHandler.updateLanguage(req, mockRes);\nconst updatedLanguage = mockRes.body;\nexpect(updatedLanguage).to.exist         \nexpect(updatedLanguage._id.toString()).to.equal(_id)\nexpect(updatedLanguage.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;144471c9-8779-4a1a-93ec-17ff2960801f&quot;,&quot;parentUUID&quot;:&quot;8c095705-945b-4feb-9cc4-41af36dd6ecd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  delete a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.id = _id;\nawait translationHandler.deleteLanguage(req,mockRes);\nconst  deleted = mockRes.body;\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79100fa2-e047-4c14-bfbe-aaebae6581be&quot;,&quot;parentUUID&quot;:&quot;8c095705-945b-4feb-9cc4-41af36dd6ecd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cfa56dad-09ba-4845-bcc6-fecfe3a81814&quot;,&quot;e7f0e501-1904-4b03-bf13-74e88ebf75cc&quot;,&quot;9a55cd2c-bc4f-44f1-9ffb-89d06ac9ac3e&quot;,&quot;f6503418-516e-4408-b00a-b84c29861b49&quot;,&quot;144471c9-8779-4a1a-93ec-17ff2960801f&quot;,&quot;79100fa2-e047-4c14-bfbe-aaebae6581be&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f392415b-8ccb-40df-835c-4fbedcfb0ba9&quot;,&quot;title&quot;:&quot;label crud &quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-tenant/test/integration/translation.handler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.handler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  should create a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = labelObj;\nawait translationHandler.createLabel(req, mockRes);\nlabel = mockRes.body;\n_id = label._id.toString();\nexpect(_id).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;32a434be-bde6-4ed7-aa4e-eba15874ba79&quot;,&quot;parentUUID&quot;:&quot;f392415b-8ccb-40df-835c-4fbedcfb0ba9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list labels&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  should list labels&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n         const req = await mocks.req();\n         req.query.tenant = tenant\n         await translationHandler.listLabels(req,mockRes);\n         const  labels = mockRes.body;\n         expect(labels.length).to.be.gt(0);  \n         let createdLabel  = labels.find((d) =&gt; {\n             return d._id.toString() === _id;\n         })\n         expect(createdLabel).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66b6bad6-3ef5-41aa-ad83-6a2ec5c03189&quot;,&quot;parentUUID&quot;:&quot;f392415b-8ccb-40df-835c-4fbedcfb0ba9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  should get a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            const req = await mocks.req();\n            req.params.id = _id;\n            await translationHandler.getLabel(req,mockRes);\n            label = mockRes.body;\n            expect(label).to.exist         \n            expect(label._id.toString()).to.equal(_id)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db3772b8-3b88-4d28-9ff2-41de440fcc0a&quot;,&quot;parentUUID&quot;:&quot;f392415b-8ccb-40df-835c-4fbedcfb0ba9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  should update a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;label.translatedText = &#x27;test-updated&#x27;;\nlabel.modifiedBy = IntegrifySystemContactSid;\nconst mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = label;\nawait translationHandler.updateLabel(req, mockRes);\nconst updatedLabel = mockRes.body;   \nexpect(updatedLabel).to.exist         \nexpect(updatedLabel._id.toString()).to.equal(_id)\nexpect(updatedLabel.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03d0e6e4-d606-4058-82d0-05a8cf3fcd50&quot;,&quot;parentUUID&quot;:&quot;f392415b-8ccb-40df-835c-4fbedcfb0ba9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete aa label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  delete aa label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.id = _id;\nawait translationHandler.deleteLabel(req,mockRes);\nconst  deleted = mockRes.body;\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae67bf8b-8b67-49c7-8e51-751e1aeb456a&quot;,&quot;parentUUID&quot;:&quot;f392415b-8ccb-40df-835c-4fbedcfb0ba9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete labels&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  delete labels&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let results = await translationController.listLabels(tenant,{_id})\n            let labelIds= results.map((i) =&gt; {\n                return i._id;\n            })\n\t\t\tconst mockRes = await mocks.mockResponse();\n            let req = await mocks.req()\n            req.body = labelIds;\n            await translationHandler.deleteLabels(req,mockRes);\n\t\t\tconst  deleted = mockRes.body;\n            expect(deleted).to.exist         \n            expect(deleted.deletedCount).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2cd772fc-58c5-4160-ae74-5a87cbabc762&quot;,&quot;parentUUID&quot;:&quot;f392415b-8ccb-40df-835c-4fbedcfb0ba9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;save new labels from ui list&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  save new labels from ui list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let unsaved = [&#x27;label from test&#x27;]\nconst mockRes = await mocks.mockResponse();\nlet req = await mocks.req()\nreq.body = unsaved;\nawait translationHandler.saveNewDefaultLabels(req,mockRes);\nconst result = mockRes.body;\nexpect(result).to.exist         \nexpect(result.saved).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;275a10bd-e6aa-45ca-83be-3903c7a8523e&quot;,&quot;parentUUID&quot;:&quot;f392415b-8ccb-40df-835c-4fbedcfb0ba9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;32a434be-bde6-4ed7-aa4e-eba15874ba79&quot;,&quot;66b6bad6-3ef5-41aa-ad83-6a2ec5c03189&quot;,&quot;db3772b8-3b88-4d28-9ff2-41de440fcc0a&quot;,&quot;03d0e6e4-d606-4058-82d0-05a8cf3fcd50&quot;,&quot;ae67bf8b-8b67-49c7-8e51-751e1aeb456a&quot;,&quot;2cd772fc-58c5-4160-ae74-5a87cbabc762&quot;,&quot;275a10bd-e6aa-45ca-83be-3903c7a8523e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;88a28032-a927-48e8-a470-26cbfcb55f76&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cddab0be-dbe9-49cf-80bf-fa9ed2eeb5f2&quot;,&quot;title&quot;:&quot;api-user Group Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:473,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nsession = { tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase() }; // system level\ntenantId = config.tenantOne.tenantId;\nfor (i = 1; i &lt;= 10; i++) {\n  const groupController = new GroupController(session);\n  const result = await groupController.addGroup({ groupName: `Test Automation Group ${i}` });\n  testGroups.push(result);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4ba4d69-2227-4133-8a50-c0894013ecde&quot;,&quot;parentUUID&quot;:&quot;cddab0be-dbe9-49cf-80bf-fa9ed2eeb5f2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:75,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// clean up our test data\nconst Group = await models.getModel(config.tenantOne.tenantId, &#x27;Group&#x27;);\nconst ContactGroup = await models.getModel(config.tenantOne.tenantId, &#x27;ContactGroup&#x27;);\nawait Promise.all(testGroups.map(async (group) =&gt; {\n  await Group.query().hardDelete(group);\n  await ContactGroup.query()\n    .where(&#x27;groupGuid&#x27;, group.groupGuid)\n    .delete();\n}));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66211423-dbf8-4301-bcdf-6440c974d311&quot;,&quot;parentUUID&quot;:&quot;cddab0be-dbe9-49cf-80bf-fa9ed2eeb5f2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7e3ac1a2-85aa-4ced-8316-cfac4195d0ff&quot;,&quot;title&quot;:&quot;get tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;retrieves a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests get tests retrieves a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Group = await models.getModel(config.tenantOne.tenantId, &#x27;Group&#x27;);\nconst groups = await Group.query().where(&#x27;group_name&#x27;, &#x27;=&#x27;, &#x27;Administrators&#x27;);\nexpect(groups.length).to.equal(1);\nadminGroupGuid = groups[0].groupGuid;\nconst groupController = new GroupController(config.tenantOne);\nconst adminGroup = await groupController.getGroup(adminGroupGuid);\nexpect(adminGroup).to.exist;\nexpect(adminGroup.groupName).to.equal(&#x27;Administrators&#x27;);\nexpect(adminGroup.groupDesc).to.equal(&#x27;System administrators&#x27;);\nexpect(adminGroup.groupSql).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b235108-0da8-4723-bb47-78e6207a92bf&quot;,&quot;parentUUID&quot;:&quot;7e3ac1a2-85aa-4ced-8316-cfac4195d0ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retrieves all groups by default&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests get tests retrieves all groups by default&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Group = await models.getModel(config.tenantOne.tenantId, &#x27;Group&#x27;);\nconst groupController = new GroupController(config.tenantOne);\nconst response = await groupController.getGroups();\nconst groups = response.results;\nexpect(groups.length).to.be.above(10);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eca2669f-0e30-41fc-a7a8-303746c62609&quot;,&quot;parentUUID&quot;:&quot;7e3ac1a2-85aa-4ced-8316-cfac4195d0ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retrieves filtered list of groups&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests get tests retrieves filtered list of groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Group = await models.getModel(config.tenantOne.tenantId, &#x27;Group&#x27;);\nconst groupController = new GroupController(config.tenantOne);\nconst response = await groupController.getGroups({ search: &#x27;Test Automation Group&#x27;, count: 4 });\nconst groups = response.results;\nexpect(groups.length).to.equal(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c755ec4e-b18d-4471-99fc-19467fd0eede&quot;,&quot;parentUUID&quot;:&quot;7e3ac1a2-85aa-4ced-8316-cfac4195d0ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retrieves all possible members for adding to groups&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests get tests retrieves all possible members for adding to groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Group = await models.getModel(config.tenantOne.tenantId, &#x27;Group&#x27;);\nconst groupController = new GroupController(config.tenantOne);\nconst group = testGroups[9];\nconst response = await groupController.getNonMembers(group.groupGuid);\nconst results = response.results;\nexpect(results.length).to.be.equal(response.total);\n// empty group, so test a sampling of accounts that should be non-members\nexpect(results).to.include.deep({ memberGuid: \&quot;A03BDD24-A0BA-4071-9A5B-2833C865EC3D\&quot;,\n                                  memberId: 1,\n                                  memberName: \&quot;Administrators\&quot;,\n                                  memberType: \&quot;Group\&quot;\n                                })\nexpect(results).to.include.deep({ memberGuid: testGroups[8].groupGuid.toUpperCase(),\n                                  memberId: testGroups[8].groupId,\n                                  memberName: testGroups[8].groupName,\n                                  memberType: \&quot;Group\&quot;\n                                })\nexpect(results).to.include.deep({ memberGuid: &#x27;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF&#x27;,\n                                  memberId: 1,\n                                  memberName: &#x27;System System&#x27;,\n                                  memberType: &#x27;User&#x27;\n                                })\n// two system accounts that should not be returned, plus the group itself\nexpect(results).to.not.include.deep({ memberGuid: &#x27;D8C469C3-F781-4179-A09C-6D148885FB30&#x27;,\n                                               memberId: 92,\n                                               memberName: \&quot;Integrify System\&quot;,\n                                               memberType: \&quot;User\&quot;\n                                             })\nexpect(results).to.not.include.deep({ memberGuid: &#x27;64EC8FC9-B426-4376-A1A4-3AD16F0F9906&#x27;,\n                                               memberId: 96,\n                                               memberName: \&quot;Guest Account\&quot;,\n                                               memberType: \&quot;User\&quot;\n                                             })\nexpect(results).to.not.include.deep({ memberGuid: testGroups[9].groupGuid.toUpperCase(),\n                                           memberId: testGroups[9].groupId,\n                                           memberName: testGroups[9].groupName,\n                                           memberType: \&quot;Group\&quot;\n                                         })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b54e0f8-fab0-427d-a174-f39e204f3f26&quot;,&quot;parentUUID&quot;:&quot;7e3ac1a2-85aa-4ced-8316-cfac4195d0ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7b235108-0da8-4723-bb47-78e6207a92bf&quot;,&quot;eca2669f-0e30-41fc-a7a8-303746c62609&quot;,&quot;c755ec4e-b18d-4471-99fc-19467fd0eede&quot;,&quot;2b54e0f8-fab0-427d-a174-f39e204f3f26&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:79,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;f3501729-1f59-4ed2-9b54-f5e2e6049f6e&quot;,&quot;title&quot;:&quot;insert tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;inserts a non-dynamic group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests inserts a non-dynamic group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;Test Group (simple)&#x27;;\nconst groupDesc = &#x27;Simple test group&#x27;;\nconst groupData = {\n  groupName,\n  groupDesc,\n};\nconst groupController = new GroupController(session);\nconst result = await groupController.addGroup(groupData);\nexpect(result.groupName).to.equal(groupName);\nexpect(result.groupDesc).to.equal(groupDesc);\nexpect(result.dynamic).to.equal(&#x27;No&#x27;); // ensure defaulting to \&quot;No\&quot; rather than null\nexpect(result.createdBy).to.equal(session.user_sid);\ntestGroups.push(result); // for cleanup at end&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58678488-d7f3-4869-adf4-5d0a1a0dda64&quot;,&quot;parentUUID&quot;:&quot;f3501729-1f59-4ed2-9b54-f5e2e6049f6e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;inserts a dynamic group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests inserts a dynamic group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:40,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;Test Group (simple)&#x27;;\nconst groupDesc = &#x27;Simple test group&#x27;;\nconst groupData = {\n  groupName,\n  groupDesc,\n  dynamic: &#x27;Yes&#x27;,\n  groupSql: \&quot;first_name = &#x27;Admin&#x27;\&quot;,\n};\nconst groupController = new GroupController(session);\nconst result = await groupController.addGroup(groupData);\nexpect(result.groupName).to.equal(groupName);\nexpect(result.groupDesc).to.equal(groupDesc);\nexpect(result.createdBy).to.equal(session.user_sid);\ntestGroups.push(result); // for cleanup at end&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;65b151bf-f5df-4c16-aae5-7141eaedddb9&quot;,&quot;parentUUID&quot;:&quot;f3501729-1f59-4ed2-9b54-f5e2e6049f6e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects a dynamic group with bad SQL&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests rejects a dynamic group with bad SQL&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;Test Group (simple)&#x27;;\nconst groupDesc = &#x27;Simple test group&#x27;;\nconst groupData = {\n  groupName,\n  groupDesc,\n  dynamic: &#x27;Yes&#x27;,\n  groupSql: \&quot;bad_column_name = &#x27;Admin&#x27;\&quot;,\n};\nconst groupController = new GroupController(session);\nawait expect(groupController.addGroup(groupData)).to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f21e03cb-e6b2-4a3e-a38a-521e5f2ad272&quot;,&quot;parentUUID&quot;:&quot;f3501729-1f59-4ed2-9b54-f5e2e6049f6e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects a group with no name&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests rejects a group with no name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nawait expect(groupController.addGroup({ groupDesc: &#x27;Test Group&#x27; })).to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39e2867d-bf48-466f-b2dc-2ffd8c194593&quot;,&quot;parentUUID&quot;:&quot;f3501729-1f59-4ed2-9b54-f5e2e6049f6e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects a dynamic group with no SQL&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests rejects a dynamic group with no SQL&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupData = {\n  groupName: &#x27;Dynamic Test Group&#x27;,\n  dynamic: &#x27;Yes&#x27;,\n};\nconst groupController = new GroupController(session);\nawait expect(groupController.addGroup(groupData)).to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2bdfbae4-7646-4c64-b0a7-a30cd125eb8d&quot;,&quot;parentUUID&quot;:&quot;f3501729-1f59-4ed2-9b54-f5e2e6049f6e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;58678488-d7f3-4869-adf4-5d0a1a0dda64&quot;,&quot;65b151bf-f5df-4c16-aae5-7141eaedddb9&quot;,&quot;f21e03cb-e6b2-4a3e-a38a-521e5f2ad272&quot;,&quot;39e2867d-bf48-466f-b2dc-2ffd8c194593&quot;,&quot;2bdfbae4-7646-4c64-b0a7-a30cd125eb8d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:98,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;0bbf16b4-0cce-4c98-bdd6-e7be6fd0e04e&quot;,&quot;title&quot;:&quot;update tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests update tests updates a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[0];\nconst result = await groupController.updateGroup({\n  groupGuid: group.groupGuid,\n  groupName: &#x27;Updated Test Automation Group&#x27;,\n  dynamic: &#x27;Yes&#x27;,\n  groupSql: \&quot;first_name = &#x27;Admin&#x27;\&quot;,\n});\nexpect(result.groupName).to.equal(&#x27;Updated Test Automation Group&#x27;);\nexpect(result.dynamic).to.equal(&#x27;Yes&#x27;);\nexpect(result.groupSql).to.equal(\&quot;first_name = &#x27;Admin&#x27;\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;254d21da-0b01-48c5-83b2-c258c17d24d8&quot;,&quot;parentUUID&quot;:&quot;0bbf16b4-0cce-4c98-bdd6-e7be6fd0e04e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects an update with no group name&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests update tests rejects an update with no group name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[0];\nawait expect(groupController\n  .updateGroup({\n    groupGuid: group.groupGuid,\n    groupName: &#x27;&#x27;,\n  }))\n  .to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb31e2b9-2c53-457b-b56f-b7a159bf2cb7&quot;,&quot;parentUUID&quot;:&quot;0bbf16b4-0cce-4c98-bdd6-e7be6fd0e04e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects an update for dynamic without sql&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests update tests rejects an update for dynamic without sql&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[0];\nawait expect(groupController\n  .updateGroup({\n    groupGuid: group.groupGuid,\n    groupName: &#x27;Validation test&#x27;,\n    dynamic: &#x27;Yes&#x27;,\n    groupSql: &#x27;&#x27;,\n  }))\n  .to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5cc94c6d-b821-4d91-8577-18391406f965&quot;,&quot;parentUUID&quot;:&quot;0bbf16b4-0cce-4c98-bdd6-e7be6fd0e04e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects an update for dynamic other than Yes/No&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests update tests rejects an update for dynamic other than Yes/No&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[0];\nawait expect(groupController\n  .updateGroup({\n    groupGuid: group.groupGuid,\n    groupName: &#x27;Validation test&#x27;,\n    dynamic: true,\n    groupSql: \&quot;name = &#x27;Admin&#x27;\&quot;,\n  }))\n  .to.be.rejectedWith(Error);\nawait expect(groupController\n  .updateGroup({\n    groupGuid: group.groupGuid,\n    groupName: &#x27;Validation test&#x27;,\n    dynamic: &#x27;yes&#x27;,\n    groupSql: \&quot;name = &#x27;Admin&#x27;\&quot;,\n  }))\n  .to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7cde155-6673-4021-b602-31b64b0fa170&quot;,&quot;parentUUID&quot;:&quot;0bbf16b4-0cce-4c98-bdd6-e7be6fd0e04e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;254d21da-0b01-48c5-83b2-c258c17d24d8&quot;,&quot;eb31e2b9-2c53-457b-b56f-b7a159bf2cb7&quot;,&quot;5cc94c6d-b821-4d91-8577-18391406f965&quot;,&quot;d7cde155-6673-4021-b602-31b64b0fa170&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;978ff00d-593e-4c60-8e50-6bba1aec0da2&quot;,&quot;title&quot;:&quot;delete tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;soft deletes a list of groups&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests delete tests soft deletes a list of groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:37,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst timeBeforeDelete = Date.now();\nconst firstGroup = testGroups[0];\nconst response = await groupController.deleteGroups(testGroups.slice(0, 5).map((group) =&gt; group.groupGuid));\nexpect(response).to.eql([1, 1, 1, 1, 1]);\nconst deletedGroup = groupController.getGroup(firstGroup.groupGuid);\nexpect(deletedGroup).to.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cfd32f1e-263c-43bc-b27f-259de6841b17&quot;,&quot;parentUUID&quot;:&quot;978ff00d-593e-4c60-8e50-6bba1aec0da2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cfd32f1e-263c-43bc-b27f-259de6841b17&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:37,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;76bcc26c-81c8-49f6-a571-3e3a260ec195&quot;,&quot;title&quot;:&quot;membership test&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;adds a user to a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test adds a user to a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:77,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[9]; // 0-4 get deleted in a previous test\nres = await groupController.getMembers(group.groupGuid);\nexpect(res.results.length).to.equal(0); // make sure group starts empty\nlet result = await groupController.addMembersToGroup({\n  groupGuid: group.groupGuid,\n  members: [{\n    memberGuid: session.user_sid,\n    memberType: &#x27;User&#x27;,\n  },\n  ],\n});\nexpect(result).to.not.be.undefined;\nres = await groupController.getMembers(group.groupGuid);\nresult = res.results;\nexpect(result.length).to.equal(1);\nexpect(result[0].memberGuid.toLowerCase()).to.equal(session.user_sid);\nexpect(result[0].groupGuid.toLowerCase()).to.equal(group.groupGuid);\nexpect(result[0].memberType).to.equal(&#x27;User&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a49bfda-655f-4260-9ce7-898a5796e7f2&quot;,&quot;parentUUID&quot;:&quot;76bcc26c-81c8-49f6-a571-3e3a260ec195&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;removes members from a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test removes members from a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[9];\nres = await groupController.getMembers(group.groupGuid);\nexpect(res.results.length).to.equal(1); // should have 1 member from preceding addUser test\nlet result = await groupController.removeMembersFromGroup({\n  groupGuid: group.groupGuid,\n  members: [session.user_sid],\n});\nexpect(result).to.equal(1);\nres = await groupController.getMembers(group.groupGuid);\nresult = res.results;\nexpect(result.length).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2d1efb6-1af1-475e-9d0d-a6ce5d663ed8&quot;,&quot;parentUUID&quot;:&quot;76bcc26c-81c8-49f6-a571-3e3a260ec195&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;lists members of a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test lists members of a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst usersGroupGuid = &#x27;eab8a4c9-6903-40bc-a2ee-cf254a408d6f&#x27;;\nconst res = await groupController.getMembers(usersGroupGuid);\nexpect(res.results.length).to.be.at.least(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2cf5e9f-f634-4cec-bd96-8c5b0dd37683&quot;,&quot;parentUUID&quot;:&quot;76bcc26c-81c8-49f6-a571-3e3a260ec195&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;filters members of a group based on search string&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test filters members of a group based on search string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst usersGroupGuid = &#x27;eab8a4c9-6903-40bc-a2ee-cf254a408d6f&#x27;;\nconst res = await groupController.getMembers(usersGroupGuid, { search: &#x27;no-reply@integrify.com&#x27; });\nexpect(res.results.length).to.equal(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c259552-3cfa-494c-ab91-96ac6587be92&quot;,&quot;parentUUID&quot;:&quot;76bcc26c-81c8-49f6-a571-3e3a260ec195&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits result members of a group based start/count&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits result members of a group based start/count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst usersGroupGuid = &#x27;eab8a4c9-6903-40bc-a2ee-cf254a408d6f&#x27;;\nlet res = await groupController.getMembers(usersGroupGuid);\nconst groupSize = res.results.length;\nexpect(groupSize).to.equal(res.total);\nres = await groupController.getMembers(usersGroupGuid, { count: 1 });\nexpect(res.results.length).to.equal(1);\nexpect(res.total).to.equal(groupSize);\nres = await groupController.getMembers(usersGroupGuid, { start: 1 });\nexpect(res.results.length).to.equal(groupSize - 1);\nexpect(res.total).to.equal(groupSize);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;602bacf4-9f46-4f59-a09b-25d68a1487f3&quot;,&quot;parentUUID&quot;:&quot;76bcc26c-81c8-49f6-a571-3e3a260ec195&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits nonmembers to users only&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits nonmembers to users only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst adminGroupGuid = &#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;;\nconst res = await groupController.getNonMembers(adminGroupGuid, { users: &#x27;true&#x27;, groups: &#x27;false&#x27; });\nres.results.forEach((groupMember) =&gt; expect(groupMember.memberType).to.equal(&#x27;User&#x27;));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9f017d83-6d77-4030-a316-243b45218718&quot;,&quot;parentUUID&quot;:&quot;76bcc26c-81c8-49f6-a571-3e3a260ec195&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits nonmembers to groups only&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits nonmembers to groups only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst adminGroupGuid = &#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;;\nconst res = await groupController.getNonMembers(adminGroupGuid, { users: &#x27;false&#x27;, groups: &#x27;true&#x27; });\nres.results.forEach((groupMember) =&gt; expect(groupMember.memberType).to.equal(&#x27;Group&#x27;));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be64713a-56fd-4bc6-a9c4-cfa8e56d676b&quot;,&quot;parentUUID&quot;:&quot;76bcc26c-81c8-49f6-a571-3e3a260ec195&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retrieves groups a user belongs to&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test retrieves groups a user belongs to&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst userGuid = &#x27;4e99e0dd-b3b3-4d5d-826d-3d5ae62a16cf&#x27;;\nconst res = await groupController.getUserGroups(userGuid);\nexpect(res.results.find((result) =&gt; result.groupName == &#x27;Administrators&#x27;)).to.not.be.undefined;\nexpect(res.results.find((result) =&gt; result.groupDesc == &#x27;All users&#x27;)).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4305f52e-9193-4f0c-8505-5a73600ab2ab&quot;,&quot;parentUUID&quot;:&quot;76bcc26c-81c8-49f6-a571-3e3a260ec195&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits resulting nonmembers based on start/count&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits resulting nonmembers based on start/count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const group = testGroups[9];\nconst groupController = new GroupController(session);\nlet res = await groupController.getNonMembers(group.groupGuid);\nconst availableSize = res.results.length;\nexpect(availableSize).to.equal(res.total);\nres = await groupController.getNonMembers(group.groupGuid, { count: 1 });\nexpect(res.results.length).to.equal(1);\nexpect(res.total).to.equal(availableSize);\nres = await groupController.getNonMembers(group.groupGuid, { start: 0, count: 5 });\nexpect(res.results.length).to.equal(5);\nexpect(res.total).to.equal(availableSize);\nres = await groupController.getNonMembers(group.groupGuid, { start: 1, count: 5 });\nexpect(res.results.length).to.equal(5);\nexpect(res.total).to.equal(availableSize);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d757dc0-bd94-49ba-8d84-d83bfc7cc9a9&quot;,&quot;parentUUID&quot;:&quot;76bcc26c-81c8-49f6-a571-3e3a260ec195&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits resulting nonmembers based on search string&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits resulting nonmembers based on search string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const group = testGroups[9];\nconst groupController = new GroupController(session);\nlet res = await groupController.getNonMembers(group.groupGuid);\nconst availableSize = res.results.length;\nexpect(availableSize).to.equal(res.total);\nres = await groupController.getNonMembers(group.groupGuid, { search: &#x27;System&#x27; });\nconst { results } = res;\nexpect(results).to.eql([{\n  memberGuid: &#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;,\n  memberName: &#x27;Administrators&#x27;,\n  memberType: &#x27;Group&#x27;,\n  memberId: 1,\n},\n{\n  memberGuid: &#x27;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF&#x27;,\n  memberId: 1,\n  memberName: &#x27;System System&#x27;,\n  memberType: &#x27;User&#x27;,\n},\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2dcd90fc-8b40-499c-86c7-52c03d95dd69&quot;,&quot;parentUUID&quot;:&quot;76bcc26c-81c8-49f6-a571-3e3a260ec195&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;lists members of a dynamic group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test lists members of a dynamic group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst allUsersGroupGuid = &#x27;eab8a4c9-6903-40bc-a2ee-cf254a408d6f&#x27;;\nconst result = await groupController.getMembers(allUsersGroupGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d510126-335b-4a13-87c1-9a9d5dc0acce&quot;,&quot;parentUUID&quot;:&quot;76bcc26c-81c8-49f6-a571-3e3a260ec195&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;lists all members of a group containing groups&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test lists all members of a group containing groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;adcb257a-5cf7-4c8e-a434-8de956d030b3&quot;,&quot;parentUUID&quot;:&quot;76bcc26c-81c8-49f6-a571-3e3a260ec195&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0a49bfda-655f-4260-9ce7-898a5796e7f2&quot;,&quot;c2d1efb6-1af1-475e-9d0d-a6ce5d663ed8&quot;,&quot;c2cf5e9f-f634-4cec-bd96-8c5b0dd37683&quot;,&quot;8c259552-3cfa-494c-ab91-96ac6587be92&quot;,&quot;602bacf4-9f46-4f59-a09b-25d68a1487f3&quot;,&quot;9f017d83-6d77-4030-a316-243b45218718&quot;,&quot;be64713a-56fd-4bc6-a9c4-cfa8e56d676b&quot;,&quot;4305f52e-9193-4f0c-8505-5a73600ab2ab&quot;,&quot;2d757dc0-bd94-49ba-8d84-d83bfc7cc9a9&quot;,&quot;2dcd90fc-8b40-499c-86c7-52c03d95dd69&quot;,&quot;1d510126-335b-4a13-87c1-9a9d5dc0acce&quot;,&quot;adcb257a-5cf7-4c8e-a434-8de956d030b3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:238,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;f6edc1f1-57f6-4716-b0d6-4f65a5437b7b&quot;,&quot;title&quot;:&quot;association tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;list processes associated to a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests association tests list processes associated to a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst res = await groupController.getProcessAssociations(&#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;);\nexpect(res.length).to.equal(47);\n// should not include categoryLevel by default\nexpect(res[0]).to.have.keys(&#x27;processGuid&#x27;, &#x27;processName&#x27;, &#x27;processVersion&#x27;, &#x27;taskName&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c710624e-2b1d-4901-b91f-2fc3133f25f3&quot;,&quot;parentUUID&quot;:&quot;f6edc1f1-57f6-4716-b0d6-4f65a5437b7b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;list processes associated to a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests association tests list processes associated to a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:60,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst res = await groupController.getProcessAssociations(&#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;, { include: [&#x27;category&#x27;] });\nexpect(res[0]).to.have.keys(&#x27;processGuid&#x27;, &#x27;processName&#x27;, &#x27;processVersion&#x27;, &#x27;taskName&#x27;, &#x27;categoryLevel&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b42c8eea-0cbc-4758-8d16-1051ceb6b8dd&quot;,&quot;parentUUID&quot;:&quot;f6edc1f1-57f6-4716-b0d6-4f65a5437b7b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;list roles associated to a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests association tests list roles associated to a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst res = await groupController.getRoleAssociations(&#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;);\nexpect(res.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac029ab4-dcc5-4072-8322-f60ab2d4ef64&quot;,&quot;parentUUID&quot;:&quot;f6edc1f1-57f6-4716-b0d6-4f65a5437b7b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c710624e-2b1d-4901-b91f-2fc3133f25f3&quot;,&quot;b42c8eea-0cbc-4758-8d16-1051ceb6b8dd&quot;,&quot;ac029ab4-dcc5-4072-8322-f60ab2d4ef64&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:80,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;56fa9401-a58c-48a7-b69e-9fba77eea467&quot;,&quot;title&quot;:&quot;api-user User Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-user/test/db/userController.test.js&quot;,&quot;file&quot;:&quot;/test/db/userController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1041,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\ntenantId = config.tenantOne.tenantId;\nsession = {tenant: tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()};\nUser = await models.getModel(tenantId, &#x27;User&#x27;);\nMetadataValue = await models.getModel(tenantId, &#x27;MetadataValue&#x27;);\nUserAuth = await models.getModel(tenantId, &#x27;UserAuth&#x27;);\n// add user\nuserCtrl = new UserController(session);\nfor (let i=1; i&lt;=limit; i++) {\n  const user = {\n    firstName: &#x27;test first name&#x27; + i,\n    lastName: &#x27;last&#x27; + i,\n    userName: &#x27;test_username&#x27; + i,\n    email: `test${i}@test.test${i}`,\n    locale: &#x27;en-US&#x27;,\n    languageGuid: &#x27;2a803d80-de6d-4adc-a642-4e3d831f5460&#x27;, // US English\n    password: testPwd,\n    confirmPassword: testPwd,\n    title: &#x27;title&#x27; + i\n  };\n  const dbUser = await userCtrl.insertUser(user)\n  testUsers.push(dbUser);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fce2795b-571e-4067-9536-d6c4f48e06bf&quot;,&quot;parentUUID&quot;:&quot;56fa9401-a58c-48a7-b69e-9fba77eea467&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:62,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await Promise.all( testUsers.map( async (user) =&gt; {\n  return UserAuth.query().deleteById(user.contactGuid);\n}));\nawait User.query().delete().where(&#x27;firstName&#x27;, &#x27;like&#x27;, &#x27;test first%&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57a2c452-218a-44af-81b1-e92068a41a33&quot;,&quot;parentUUID&quot;:&quot;56fa9401-a58c-48a7-b69e-9fba77eea467&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should retrieves users&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should retrieves users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:34,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const User = await models.getModel(tenantId, &#x27;User&#x27;);\nconst UserAuth = await models.getModel(tenantId, &#x27;UserAuth&#x27;);\nconst users = await User.query()\n  .orderBy(&#x27;createdDate&#x27;, &#x27;desc&#x27;)\n  .limit(limit);\nawait Promise.all(users.map(async user =&gt; {\n  const result = await userCtrl.getUser(user.contactGuid);\n  const {userName, managerGuid, ...userToCompare1} = result;\n  user.languageGuid = user.languageGuid.toLowerCase() // &#x27;user&#x27; from Database query has \&quot;upper case\&quot; language guid - but userToCompare1 from API should be in lower case\n  user.contactGuid = user.contactGuid.toLowerCase()\n  user.createdBy = user.createdBy.toLowerCase()\n  expect(userToCompare1).to.deep.eq(user);\n  // compare testUser to user\n  const testUser = testUsers.find(u =&gt; u.contactGuid === user.contactGuid);\n  [&#x27;firstName&#x27;, &#x27;lastName&#x27;, &#x27;email&#x27;, &#x27;locale&#x27;, &#x27;languageGuid&#x27;, &#x27;contactId&#x27;, &#x27;title&#x27;].forEach(p =&gt; {\n    expect(testUser[p]).to.eq(user[p]);\n  });\n  // check userNames\n  const userAuth = await UserAuth.query()\n    .findById(user.contactGuid);\n  expect(userAuth).to.exist;\n  expect(userAuth.userName).to.eq(testUser.userName);\n}));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05ffd64b-1917-4f27-ad66-8fcda270179a&quot;,&quot;parentUUID&quot;:&quot;56fa9401-a58c-48a7-b69e-9fba77eea467&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should search in users&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should search in users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:55,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testUser = testUsers[0];\n// search by id\nlet result = await userCtrl.getUsers({search: testUser.contactId});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.eq(1);\n// search by username\nresult = await userCtrl.getUsers({search: testUser.userName});\nexpect(result.results.length).to.be.gt(0);\nlet found = result.results.find(u =&gt; u.userName = testUser.userName);\nexpect(found).to.exist;\n// search by first &amp; last names\nresult = await userCtrl.getUsers({search: testUser.firstName.slice(0, -2)});\nexpect(result.results.length).to.be.gt(0);\nfound = result.results.find(u =&gt; u.first === testUser.first);\nexpect(found).to.exist;\nresult = await userCtrl.getUsers({search: testUser.lastName.slice(0, -1)});\nexpect(result.results.length).to.be.gt(0);\nfound = result.results.find(u =&gt; u.lastName === testUser.lastName);\nexpect(found).to.exist;\n// search by email\nresult = await userCtrl.getUsers({search: testUser.email.slice(-10)});\nexpect(result.results.length).to.be.gt(0);\nfound = result.results.find(u =&gt; u.email === testUser.email);\nexpect(found).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c84dcf20-08ec-457a-87dd-31765c7d8b25&quot;,&quot;parentUUID&quot;:&quot;56fa9401-a58c-48a7-b69e-9fba77eea467&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should limit results&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should limit results&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const result = await userCtrl.getUsers({count: 4});\nexpect(result.results.length).to.eq(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7eaae9f-7a1b-464c-ab1b-90174c758de0&quot;,&quot;parentUUID&quot;:&quot;56fa9401-a58c-48a7-b69e-9fba77eea467&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should retrieve filtered users &quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should retrieve filtered users &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testUser = testUsers[0];\nconst user = await userCtrl.getUser(testUser.contactGuid);\nconst filters = [\n  {\n    field: &#x27;lastName&#x27;,\n    data: {comparison: &#x27;eq&#x27;, type: &#x27;string&#x27;, value: user.lastName,}\n  },\n  {\n    field: &#x27;firstName&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.firstName}\n  },\n  {\n    field: &#x27;userName&#x27;,\n    data: {comparison: &#x27;eq&#x27;, value: user.userName}\n  },\n  {\n    field: &#x27;email&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.email}\n  },\n  {\n    field: &#x27;title&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.title}\n  },\n  {\n    field: &#x27;constCenter&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.constCenter}\n  },\n  {\n    field: &#x27;country&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.country}\n  },\n  {\n    field: &#x27;department&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.department}\n  },\n  {\n    field: &#x27;managerName&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.managerName}\n  },\n  {\n    field: &#x27;managerGuid&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.managerGuid}\n  },\n];\nconst result = await userCtrl.getUsers({filters});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\nconst found = result.results.find(u =&gt; u.contactGuid === testUser.contactGuid);\nexpect(found).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5867059-caa6-499b-b0b4-6598a600fcd1&quot;,&quot;parentUUID&quot;:&quot;56fa9401-a58c-48a7-b69e-9fba77eea467&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a list of managers&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should get a list of managers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const exceptGuid = testUsers[0].contactGuid;\nconst managers = await userCtrl.getManagers({exceptGuid});\nmanagers.forEach(manager =&gt; {\n  expect(manager.contactGuid).to.not.eq(exceptGuid);\n});\ntestUsers.filter(u =&gt; u.contactGuid !== exceptGuid).forEach(u =&gt; {\n  const manager = managers.find(m =&gt; m.contactGuid === u.contactGuid);\n  const {contactGuid, firstName, lastName, email, title} = u;\n  const testUser = {contactGuid, firstName, lastName, email, title};\n  expect(manager).to.deep.eq(testUser);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd19bea5-8714-4c2e-92be-f2bf31b29502&quot;,&quot;parentUUID&quot;:&quot;56fa9401-a58c-48a7-b69e-9fba77eea467&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a single user&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should get a single user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testUser = testUsers[3];\nconst user = await userCtrl.getUser(testUser.contactGuid);\nexpect(user).to.exist;\n[&#x27;contactGuid&#x27;, &#x27;contactId&#x27;, &#x27;firstName&#x27;, &#x27;lastName&#x27;, &#x27;userName&#x27;, &#x27;email&#x27;, &#x27;locale&#x27;, &#x27;languageGuid&#x27;, &#x27;title&#x27;].forEach(p =&gt; {\n  expect(user[p]).to.eq(testUser[p]);\n});\n[&#x27;middleName&#x27;, &#x27;phone&#x27;, &#x27;address1&#x27;, &#x27;address2&#x27;, &#x27;city&#x27;, &#x27;state&#x27;, &#x27;zip&#x27;, &#x27;country&#x27;,\n  &#x27;department&#x27;, &#x27;costCenter&#x27;, &#x27;division&#x27;, &#x27;managerGuid&#x27;, &#x27;cField1&#x27;, &#x27;cField2&#x27;].forEach(p =&gt; {\n  expect(!!user[p] || user[p] === null || user[p] === &#x27;&#x27;).to.eq(true);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b976ca53-dd47-4989-b26f-eed561a99396&quot;,&quot;parentUUID&quot;:&quot;56fa9401-a58c-48a7-b69e-9fba77eea467&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update and get delegate&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should update and get delegate&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:497,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// insert delegate\nconst testDelegate = {\n  contactGuid: testUsers[3].contactGuid,\n  processes: [{id: &#x27;a6714779-4bde-4000-8361-ad37c838d440&#x27;}, {id: &#x27;3545404d-6fff-4ed5-ba9a-1100ce38d421&#x27;}, {id: &#x27;cfc36de0-a71b-451f-817a-2092c3c247ca&#x27;}],\n  startDate: &#x27;2021-01-14&#x27;,\n  startTime: &#x27;06:00&#x27;,\n  endDate: &#x27;2021-01-15&#x27;,\n  endTime: &#x27;17:35&#x27;,\n};\nawait userCtrl.updateDelegate(testUsers[3].contactGuid, testDelegate);\n// get delegate\nlet delegate = await userCtrl.getDelegate(testDelegate.contactGuid);\n[&#x27;contactGuid&#x27;, &#x27;startDate&#x27;, &#x27;startTime&#x27;, &#x27;endDate&#x27;, &#x27;endTime&#x27;].forEach(p =&gt; {\n  expect(delegate[p]).to.exist;\n  expect(delegate[p]).to.eq(testDelegate[p]);\n})\nexpect(delegate.processes).to.exist;\nexpect(delegate.processes.length).to.eq(testDelegate.processes.length);\ntestDelegate.processes.forEach(p =&gt; {\n  const process = delegate.processes.find(dp =&gt; dp.id === p.id);\n  expect(process).to.exist;\n});\n// for user without delegate\ndelegate = await userCtrl.getDelegate(testUsers[1].contactGuid);\n[&#x27;contactGuid&#x27;, &#x27;startDate&#x27;, &#x27;startTime&#x27;, &#x27;endDate&#x27;, &#x27;endTime&#x27;].forEach(p =&gt; {\n  expect(delegate[p]).to.be.null;\n});\nexpect(delegate.processes.length).to.eq(0);\n// delete delegate\nawait MetadataValue.query()\n  .where(&#x27;ownerSid&#x27;, testDelegate.contactGuid)\n  .delete();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e494570b-855b-427a-9ed0-78a61428e2ca&quot;,&quot;parentUUID&quot;:&quot;56fa9401-a58c-48a7-b69e-9fba77eea467&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;password should be hashed&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests password should be hashed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const user = await UserAuth.query()\n  .findById(testUsers[0].contactGuid);\nexpect(user.password).to.not.eq(testPwd);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53ecf092-0dd3-4e59-85bc-0e0f64101a27&quot;,&quot;parentUUID&quot;:&quot;56fa9401-a58c-48a7-b69e-9fba77eea467&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;user should be active (not deleted)&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests user should be active (not deleted)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const user = await User.query()\n  .findById(testUsers[0].contactGuid);\nexpect(user.deletedDate).to.be.null;\nexpect(user.deletedBy).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3dbbf630-c4db-45ac-b837-858a04f0bb5b&quot;,&quot;parentUUID&quot;:&quot;56fa9401-a58c-48a7-b69e-9fba77eea467&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should convert user Guids&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should convert user Guids&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testUser = {\n  contactGuid: &#x27;SomeRandomString&#x27;,\n  managerGuid: &#x27;SomeRandomString&#x27;,\n  signatureGuid: &#x27;SomeRandomString&#x27;,\n  languageGuid: &#x27;SomeRandomString&#x27;,\n  createdBy: &#x27;SomeRandomString&#x27;,\n};\nconst convertedUser1 = userCtrl.convertUserGuids(testUser);\nconst convertedUser2 = userCtrl.convertUserGuids({contactGuid: testUser.contactGuid});\n[convertedUser1, convertedUser2].forEach(u =&gt; {\n  Object.keys(u).forEach(key =&gt; {\n    expect(u[key]).to.eq(u[key].toLowerCase());\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6e7680e-033e-4c2c-957d-c8e0a73cf5f9&quot;,&quot;parentUUID&quot;:&quot;56fa9401-a58c-48a7-b69e-9fba77eea467&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should check if username is taken&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should check if username is taken&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const userGuid = testUsers[0].contactGuid;\nconst username = testUsers[0].userName;\nlet isTaken = await userCtrl.isUserNameTaken(username);\nexpect(isTaken).to.be.true;\nisTaken = await userCtrl.isUserNameTaken(username.toUpperCase());\nexpect(isTaken).to.be.true;\n// with un-taken username\nisTaken = await userCtrl.isUserNameTaken(&#x27;someUnusedUsernameTest&#x27;);\nexpect(isTaken).to.be.false;\n// with Guid provided\nisTaken = await userCtrl.isUserNameTaken(username, userGuid);\nexpect(isTaken).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc4931b3-b5be-4c36-ab5f-875eb315dffc&quot;,&quot;parentUUID&quot;:&quot;56fa9401-a58c-48a7-b69e-9fba77eea467&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update user&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should update user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:99,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const userGuid = testUsers[3].contactGuid;\nconst data = {\n  firstName: &#x27;test first updated&#x27;,\n  middleName: &#x27;up mid name&#x27;,\n  lastName: &#x27;up last name&#x27;,\n  email: &#x27;updated@email.com&#x27;,\n  title: &#x27;updatedTitle&#x27;,\n  division: &#x27;up division&#x27;,\n  department: &#x27;upd department&#x27;,\n  costCenter: &#x27;upd cost center&#x27;,\n  location: &#x27;upd loc&#x27;,\n  phone: &#x27;094-242-5654 ext 4&#x27;,\n  managerGuid: testUsers[0].contactGuid,\n  address1: &#x27;654 Some ave&#x27;,\n  address2: &#x27;apt 589&#x27;,\n  city: &#x27;New London&#x27;,\n  state: &#x27;OR&#x27;,\n  zip: &#x27;98353&#x27;,\n  country: &#x27;USM&#x27;,\n  languageGuid: testUsers[0].languageGuid,\n  timezone: &#x27;PFT-09&#x27;,\n  locale: &#x27;en-US&#x27;,\n  cField1: &#x27;upd cust field 1&#x27;,\n  cField2: &#x27;upd cust field 2&#x27;,\n  active: false,\n  userName: &#x27;updatedUserName&#x27;,\n  password: &#x27;updatedPwd&#x27;,\n  signatureGuid: &#x27;36b65bca-140d-41b9-ac8b-89b50c86e7ba&#x27;\n};\n// get current password\nlet user = await UserAuth.query()\n  .findById(testUsers[3].contactGuid);\nconst previousPwd = user.password;\n// update\nuser = await userCtrl.updateUser(userGuid, data);\nconst {contactGuid, contactId, createdBy, createdDate, deletedBy, deletedDate, modifiedBy, modifiedDate, ntId, reportsToGuid, lastUpdate, ...updatedUser} = user;\nconst {password, active, ...testData} = data;\nexpect(updatedUser).to.deep.eq(testData);\n// should be inactive/deleted\nexpect(!!deletedBy).to.be.true;\nexpect(!!deletedDate).to.be.true;\n// should change the password\nuser = await UserAuth.query()\n  .findById(testUsers[3].contactGuid);\nconst updatedPwd = user.password;\nexpect(previousPwd).to.not.eq(updatedPwd);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;896816f9-5d44-4bd9-9e1c-069c1e2e9d99&quot;,&quot;parentUUID&quot;:&quot;56fa9401-a58c-48a7-b69e-9fba77eea467&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;05ffd64b-1917-4f27-ad66-8fcda270179a&quot;,&quot;c84dcf20-08ec-457a-87dd-31765c7d8b25&quot;,&quot;a7eaae9f-7a1b-464c-ab1b-90174c758de0&quot;,&quot;e5867059-caa6-499b-b0b4-6598a600fcd1&quot;,&quot;dd19bea5-8714-4c2e-92be-f2bf31b29502&quot;,&quot;b976ca53-dd47-4989-b26f-eed561a99396&quot;,&quot;e494570b-855b-427a-9ed0-78a61428e2ca&quot;,&quot;53ecf092-0dd3-4e59-85bc-0e0f64101a27&quot;,&quot;3dbbf630-c4db-45ac-b837-858a04f0bb5b&quot;,&quot;a6e7680e-033e-4c2c-957d-c8e0a73cf5f9&quot;,&quot;bc4931b3-b5be-4c36-ab5f-875eb315dffc&quot;,&quot;896816f9-5d44-4bd9-9e1c-069c1e2e9d99&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:730,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;fc69ca8d-f750-4436-b18a-dd30af13fde6&quot;,&quot;title&quot;:&quot;api-user Group Handler Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-user/test/groupHandler.test.js&quot;,&quot;file&quot;:&quot;/test/groupHandler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:98,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;testConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;\nconst userCtl = new UserController({tenantId: tenant})\nrestrictedUser = await userCtl.insertUser({firstName: &#x27;groups test&#x27;,\n                                           lastName: &#x27;groups test&#x27;,\n                                           userName: &#x27;restricted user for groups permission test&#x27;,\n                                           password: &#x27;password&#x27;})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c510add-f9c4-462a-80db-08397cc8d8fb&quot;,&quot;parentUUID&quot;:&quot;fc69ca8d-f750-4436-b18a-dd30af13fde6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:30,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const User = await models.getModel(tenant, &#x27;User&#x27;);\nawait User.query().hardDelete(restrictedUser)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4681fdde-58c7-4f4e-800e-f70ab03ed8d6&quot;,&quot;parentUUID&quot;:&quot;fc69ca8d-f750-4436-b18a-dd30af13fde6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c43729c9-6aef-421d-a228-9339b16a7c52&quot;,&quot;title&quot;:&quot;crud tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-user/test/groupHandler.test.js&quot;,&quot;file&quot;:&quot;/test/groupHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests crud tests should create a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:36,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;api-user group test&#x27;\nconst mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = { groupName: groupName,\n             groupDesc: &#x27;api-user group test description&#x27; }\nconst response = await handlers.addGroup(req,mockRes);\nconst group = response.body\nexpect(response.statusCode).to.equal(200)\nexpect(group.groupGuid).to.match(/([-\\w]+)/)\nexpect(group.groupName).to.equal(groupName);\n// cleanup\nreq.body = [group.groupGuid]\nconst foo = await handlers.deleteGroups(req, mockRes)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c03c271a-a6d8-4bdf-ab14-e42cdcb1d0c3&quot;,&quot;parentUUID&quot;:&quot;c43729c9-6aef-421d-a228-9339b16a7c52&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c03c271a-a6d8-4bdf-ab14-e42cdcb1d0c3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:36,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;975dd8be-fa5c-414b-94b1-e11c0546ecf1&quot;,&quot;title&quot;:&quot;permission tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-user/test/groupHandler.test.js&quot;,&quot;file&quot;:&quot;/test/groupHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;admin should have manage/edit permissions per group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests permission tests admin should have manage/edit permissions per group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.oauth.user_sid = testConfig.tenantOne.adminUser.sid;\nconst response = await handlers.getGroups(req,mockRes);\nconst groups = response.body.results;\ngroups.forEach( group =&gt; {\n  expect(group.canManage).to.equal(true);\n  expect(group.canEdit).to.equal(true);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;beb15a67-99e8-4192-b183-74326e65a268&quot;,&quot;parentUUID&quot;:&quot;975dd8be-fa5c-414b-94b1-e11c0546ecf1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not have permission to create a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests permission tests should not have permission to create a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;api-user group test&#x27;\nconst mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.oauth.user_sid = restrictedUser.contactGuid;\nreq.body = { groupName: groupName,\n             groupDesc: &#x27;api-user group test description&#x27; }\nconst response = await handlers.addGroup(req,mockRes);\nexpect(response.statusCode).to.equal(403)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;87c05bbd-43a0-45e7-8ae1-aa1419d84886&quot;,&quot;parentUUID&quot;:&quot;975dd8be-fa5c-414b-94b1-e11c0546ecf1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not have permission to list groups members&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests permission tests should not have permission to list groups members&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupCtl = new GroupController({tenantId: tenant})\nconst group = groupCtl.getGroups({count: 1})\nconst mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.oauth.user_sid = restrictedUser.contactGuid\nreq.params.groupGuid = group.groupGuid\nconst response = await handlers.getGroups(req,mockRes);\nexpect(response.statusCode).to.equal(403)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3c009ea-197a-4d46-8d44-2abbf82aa4cc&quot;,&quot;parentUUID&quot;:&quot;975dd8be-fa5c-414b-94b1-e11c0546ecf1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not have permission to delete a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests permission tests should not have permission to delete a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupCtl = new GroupController({tenantId: tenant})\nconst group = groupCtl.getGroups({count: 1})\nconst mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.oauth.user_sid = restrictedUser.contactGuid\nreq.params.body = [ group.groupGuid ]\nconst response = await handlers.deleteGroups(req,mockRes);\nexpect(response.statusCode).to.equal(403)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a10d3e9-6b1d-45ea-9165-a28b432773fa&quot;,&quot;parentUUID&quot;:&quot;975dd8be-fa5c-414b-94b1-e11c0546ecf1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;beb15a67-99e8-4192-b183-74326e65a268&quot;,&quot;87c05bbd-43a0-45e7-8ae1-aa1419d84886&quot;,&quot;a3c009ea-197a-4d46-8d44-2abbf82aa4cc&quot;,&quot;2a10d3e9-6b1d-45ea-9165-a28b432773fa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:47,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;249b0543-7a9a-48ba-b9e6-274811c672e3&quot;,&quot;title&quot;:&quot;api-user User Handler Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/api-user/test/userHandler.test.js&quot;,&quot;file&quot;:&quot;/test/userHandler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;testConfig = await mocks.getTestConfig();\ntenantId = testConfig.tenantOne.tenantId;\nsession = {tenant: tenantId, user_sid: testConfig.tenantOne.adminUser.sid.toLowerCase()};\nUser = await models.getModel(tenantId, &#x27;User&#x27;);\nUserAuth = await models.getModel(tenantId, &#x27;UserAuth&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96794926-187f-4a74-8829-0c9871a22db8&quot;,&quot;parentUUID&quot;:&quot;249b0543-7a9a-48ba-b9e6-274811c672e3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;req = await mocks.req();\nmockRes = await mocks.mockResponse();\ntestUser = (await User.query().limit(1))[0];\ntestUser.userName  = (await UserAuth.query().select(&#x27;userName&#x27;).where(&#x27;contactGuid&#x27;, testUser.contactGuid))[0].userName;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;caef64e8-a743-41c8-8d43-2d3f2443fc68&quot;,&quot;parentUUID&quot;:&quot;249b0543-7a9a-48ba-b9e6-274811c672e3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:45,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await UserAuth.query().delete().where(&#x27;userName&#x27;, &#x27;like&#x27;, &#x27;user_to_delete%&#x27;);\nawait User.query().delete().where(&#x27;firstName&#x27;, &#x27;like&#x27;, &#x27;user_to_delete%&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ba40572-5fab-47e0-9d82-895c4e55c7fe&quot;,&quot;parentUUID&quot;:&quot;249b0543-7a9a-48ba-b9e6-274811c672e3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a list of users&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should get a list of users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const response = await handlers.getUsers(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body).to.exist;\nexpect(response.body.results).to.exist;\nexpect(response.body.results.length).to.be.gt(0);\nexpect(response.body.total).to.exist;\nexpect(response.body.total).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf6a508c-e7b6-4eae-8633-4eccbb8a5b25&quot;,&quot;parentUUID&quot;:&quot;249b0543-7a9a-48ba-b9e6-274811c672e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a list of managers&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should return a list of managers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const response = await handlers.getManagers(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body).to.exist;\nexpect(response.body.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1a29a10-3da2-4154-a3ea-328878e5e591&quot;,&quot;parentUUID&quot;:&quot;249b0543-7a9a-48ba-b9e6-274811c672e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get single user&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should get single user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;req.params.userGuid = testUser.contactGuid;\nconst response = await handlers.getUser(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body).to.exist;\nexpect(response.body.contactGuid).to.exist;\nexpect(response.body.firstName).to.exist;\nexpect(response.body.delegate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b38a27f5-833b-493c-8618-97f1c537c043&quot;,&quot;parentUUID&quot;:&quot;249b0543-7a9a-48ba-b9e6-274811c672e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should check if userName is taken&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should check if userName is taken&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;req.query.userName = testUser.userName;\nreq.query.userGuid = testUser.contactGuid;\nconst response = await handlers.checkIfUserNameIsTaken(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body).to.exist;\nexpect(response.body.isTaken).to.exist;\nexpect(response.body.isTaken).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7a34e6f-f140-487c-b498-c578214c257b&quot;,&quot;parentUUID&quot;:&quot;249b0543-7a9a-48ba-b9e6-274811c672e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not insert user without data&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should not insert user without data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const response = await handlers.insertUser(req, mockRes);\nexpect(response.statusCode).to.eq(400);\nexpect(response.body.firstName).to.exist;\nexpect(response.body.firstName).to.deep.eq([&#x27;The firstName field is required.&#x27;]);\nexpect(response.body.lastName).to.exist;\nexpect(response.body.password).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3ed4e73-c5a9-4033-a6db-8649b0d29730&quot;,&quot;parentUUID&quot;:&quot;249b0543-7a9a-48ba-b9e6-274811c672e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert user&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should insert user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:108,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;req.body = {\n  firstName: &#x27;user_to_delete&#x27;,\n  lastName: &#x27;lastName&#x27;,\n  userName: &#x27;user_to_delete&#x27; + Math.random().toString(36).substring(7), // random string\n  email: &#x27;random@test.com&#x27;,\n  locale: &#x27;en-US&#x27;,\n  timezone: &#x27;Pacific&#x27;,\n  languageGuid: testUser.languageGuid,\n  password: &#x27;randomPwd&#x27;,\n}\nconst response = await handlers.insertUser(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body).to.exist;\nexpect(response.body.contactGuid).to.exist;\nexpect(response.body.firstName).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0dc4f6b9-5508-4e8f-bcad-1a6846d35b31&quot;,&quot;parentUUID&quot;:&quot;249b0543-7a9a-48ba-b9e6-274811c672e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should register a user&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should register a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5638,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const userName = &#x27;register_user&#x27; + Math.random().toString(36).substring(7) // random string\nreq.body = {\n  firstName: &#x27;register_user&#x27;,\n  lastName: &#x27;lastName&#x27;,\n  userName,\n  email: &#x27;random@test.com&#x27;,\n  // locale: &#x27;en-US&#x27;,\n  timezone: &#x27;US/Central&#x27;,\n  languageGuid: testUser.languageGuid,\n  password: &#x27;randomPwd&#x27;,\n  tenant: tenantId\n}\nreq.bypassRecaptcha = true\nconst response = await handlers.registerUser(req, mockRes);\nexpect(response.statusCode).to.eq(200);\n// search by username to verify user record was created\nconst userCtrl = new UserController(session);\nconst result = await userCtrl.getUsers({search: userName});\nexpect(result.results.length).to.be.gt(0);\nlet found = result.results.find(u =&gt; u.userName = userName);\nexpect(found).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c1b8a33-4871-444b-87fb-1d36b5527f3c&quot;,&quot;parentUUID&quot;:&quot;249b0543-7a9a-48ba-b9e6-274811c672e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not update user with empty data&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should not update user with empty data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;req.body = &#x27;{}&#x27;;\nconst response = await handlers.updateUser(req, mockRes);\nexpect(response.statusCode).to.eq(400);\nexpect(response.body.firstName).to.exist;\nexpect(response.body.firstName).to.deep.eq([&#x27;The firstName field is required.&#x27;]);\nexpect(response.body.lastName).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e70fecc-e74e-4569-9d0c-77728454809c&quot;,&quot;parentUUID&quot;:&quot;249b0543-7a9a-48ba-b9e6-274811c672e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update user&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should update user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let userToDelete = (await UserAuth.query().where(&#x27;userName&#x27;, &#x27;like&#x27;, &#x27;user_to_delete%&#x27;).limit(1))[0];\nif (!userToDelete) {\n  req.body = {\n    firstName: &#x27;user_to_delete&#x27;,\n    lastName: &#x27;lastName&#x27;,\n    userName: &#x27;user_to_delete&#x27; + Math.random().toString(36).substring(7), // random string\n    email: &#x27;random@test.com&#x27;,\n    locale: &#x27;en-US&#x27;,\n    timezone: &#x27;Pacific&#x27;,\n    languageGuid: testUser.languageGuid,\n    password: &#x27;randomPwd&#x27;,\n  }\n  userToDelete  = (await handlers.insertUser(req, mockRes)).body;\n}\nconst data = {\n  firstName: &#x27;user_to_delete&#x27;,\n  lastName: &#x27;updated last&#x27;,\n  userName: &#x27;user_to_delete&#x27; + Math.random().toString(36).substring(7),\n  email: &#x27;random@test.updated&#x27;,\n  locale: &#x27;en-US&#x27;,\n  timezone: &#x27;Atlantic/New York&#x27;,\n  languageGuid: testUser.languageGuid,\n};\nreq.params.userGuid = userToDelete.contactGuid;\nreq.body = JSON.stringify(data);\nconst response = await handlers.updateUser(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body.contactGuid).to.exist;\nexpect(response.body.firstName).to.exist;\nexpect(response.body.firstName).to.eq(data.firstName);\nexpect(response.body.timezone).to.exist;\nexpect(response.body.timezone).to.eq(data.timezone);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc88e4db-5413-4a59-846a-b02a3ebca650&quot;,&quot;parentUUID&quot;:&quot;249b0543-7a9a-48ba-b9e6-274811c672e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cf6a508c-e7b6-4eae-8633-4eccbb8a5b25&quot;,&quot;a1a29a10-3da2-4154-a3ea-328878e5e591&quot;,&quot;b38a27f5-833b-493c-8618-97f1c537c043&quot;,&quot;d7a34e6f-f140-487c-b498-c578214c257b&quot;,&quot;e3ed4e73-c5a9-4033-a6db-8649b0d29730&quot;,&quot;0dc4f6b9-5508-4e8f-bcad-1a6846d35b31&quot;,&quot;9c1b8a33-4871-444b-87fb-1d36b5527f3c&quot;,&quot;6e70fecc-e74e-4569-9d0c-77728454809c&quot;,&quot;fc88e4db-5413-4a59-846a-b02a3ebca650&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5808,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;bfc8cc1d-1dcc-4fdc-a1f2-771c5e3672af&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d6bfbee2-2e5e-4450-8492-706711731b46&quot;,&quot;title&quot;:&quot;Config Processor ENV.CONFIG tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/config-processor/test/integration/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config Processor ENV.CONFIG tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:36,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\nprocess.env.TESTING = true;\n\nconfigHelper = require(\&quot;../../src/helpers/config\&quot;)\nredis = require(\&quot;integrify-libs\&quot;).redisClient\npubSubClient = redis.makeCopy();\npubSubClient.subscribe(&#x27;updateEnvConfig&#x27;)\npubSubClient.on(&#x27;message&#x27;, function(channel, message) {\n  \n  pubSubMessage = {channel, message}\n  // pubSubMessage[channel] = message;\n  \n});\n//let deletes = await redis.delAsync([&#x27;ENV.CONFIG&#x27;]);\n//console.log(deletes)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c41cc11-7cb1-4fe2-abd5-640d706e4bdb&quot;,&quot;parentUUID&quot;:&quot;d6bfbee2-2e5e-4450-8492-706711731b46&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;454aea69-835a-4703-bc46-70fa6180ea1a&quot;,&quot;title&quot;:&quot;config helper&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/config-processor/test/integration/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;fa691279-c0dd-4ef8-bbd9-2c44ed8c87c2&quot;,&quot;title&quot;:&quot;setConfig&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/config-processor/test/integration/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set ENV.CONFIG in redis based on a local config file&quot;,&quot;fullTitle&quot;:&quot;Config Processor ENV.CONFIG tests config helper setConfig should set ENV.CONFIG in redis based on a local config file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:331,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await configHelper.setEnvConfig()\nlet storedConfig = await redis.getAsync(&#x27;ENV.CONFIG&#x27;)\nconsole.log(\&quot;wow\&quot;,storedConfig)\nexpect(storedConfig).to.exist;\nstoredConfig = JSON.parse(storedConfig);\n//expect(storedConfig.cacheTime).to.exist;\nawait delay(300)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0ad0bde-7078-4f7e-8d4c-f69d5c2b7c17&quot;,&quot;parentUUID&quot;:&quot;fa691279-c0dd-4ef8-bbd9-2c44ed8c87c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a message on the updateEnvConfig pub/sub channel&quot;,&quot;fullTitle&quot;:&quot;Config Processor ENV.CONFIG tests config helper setConfig should get a message on the updateEnvConfig pub/sub channel&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(pubSubMessage.channel).to.equal(&#x27;updateEnvConfig&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9de33112-b96c-4291-8099-ff1144d8f927&quot;,&quot;parentUUID&quot;:&quot;fa691279-c0dd-4ef8-bbd9-2c44ed8c87c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should set ENV.CONFIG in redis based on a S3 config file&quot;,&quot;fullTitle&quot;:&quot;Config Processor ENV.CONFIG tests config helper setConfig should set ENV.CONFIG in redis based on a S3 config file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.USE_S3_FILES=\&quot;true\&quot;\nawait configHelper.setEnvConfig()\nlet storedConfig = await redis.getAsync(&#x27;ENV.CONFIG&#x27;)\nexpect(storedConfig).to.exist;\nstoredConfig = JSON.parse(storedConfig);\nexpect(storedConfig.cacheTime).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6af710e-b74b-43fd-8658-4776b1079724&quot;,&quot;parentUUID&quot;:&quot;fa691279-c0dd-4ef8-bbd9-2c44ed8c87c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f0ad0bde-7078-4f7e-8d4c-f69d5c2b7c17&quot;,&quot;9de33112-b96c-4291-8099-ff1144d8f927&quot;,&quot;a6af710e-b74b-43fd-8658-4776b1079724&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:341,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f4f59b6c-db17-402c-9c82-f39b36f43c48&quot;,&quot;title&quot;:&quot;Config Processor Event Handler Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/config-processor/test/integration/configEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/configEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config Processor Event Handler Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5030,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.TESTING = true;\nthis.timeout(105000);\nlet deletes = await redis.delAsync([fullStreamName, eventHistoryName, eventProcessedName]);\n\nconsole.log(deletes)\nlet sp = new StreamPublisher(testStreamName,tenant);\nawait sp.sendEvent(\&quot;updateEnvConfig\&quot;, {\n    update: new Date().toISOString()\n});\nawait sp.sendEvent(\&quot;updateDataInstances\&quot;, {\n  update: new Date().toISOString()\n});\nawait sp.sendEvent(\&quot;updateLicenses\&quot;, {\n    update: new Date().toISOString()\n});\nawait sp.sendEvent(\&quot;updateLicenses\&quot;, {\n  update: new Date().toISOString(),\n  tenantId: &#x27;integrifydev&#x27;\n      });\n\n\nforkedProcessor = await configStreamConsumer.monitorStream(tenant);\nawait delay(5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e659259b-d990-4b63-9487-aefc3a2e4e22&quot;,&quot;parentUUID&quot;:&quot;f4f59b6c-db17-402c-9c82-f39b36f43c48&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config Processor Event Handler Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a51677e2-6343-47f6-b30a-eac4c1f2cce9&quot;,&quot;parentUUID&quot;:&quot;f4f59b6c-db17-402c-9c82-f39b36f43c48&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d094c9ce-485b-42c2-be99-9f398b5fd54f&quot;,&quot;title&quot;:&quot;config stream processor&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/config-processor/test/integration/configEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/configEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7b42c742-e459-4e98-b6ab-89cb72408fe7&quot;,&quot;title&quot;:&quot;reads from config stream&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/config-processor/test/integration/configEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/configEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should process events&quot;,&quot;fullTitle&quot;:&quot;Config Processor Event Handler Tests config stream processor reads from config stream should process events&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processedCount = await redis.zcardAsync(eventProcessedName)\n              let historyCount = await redis.zcardAsync(eventHistoryName)\n              expect(historyCount).to.equal(processedCount)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;079cfaa5-e9e6-4526-8cbd-cd7b0daaa7f4&quot;,&quot;parentUUID&quot;:&quot;7b42c742-e459-4e98-b6ab-89cb72408fe7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;079cfaa5-e9e6-4526-8cbd-cd7b0daaa7f4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;55c55c5e-5d49-4776-b42d-90c8a003621e&quot;,&quot;title&quot;:&quot;Config data instance tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/config-processor/test/integration/dataInstance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/dataInstance.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config data instance tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.TESTING = true;\npubSubClient.subscribe(&#x27;updateDataInstances&#x27;)\npubSubClient.on(&#x27;message&#x27;, function(channel, message) {\n  \n  pubSubMessage = {channel, message}\n  // pubSubMessage[channel] = message;\n  \n});\n  \nlet deletes = await redis.delAsync([&#x27;data_instances&#x27;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81b85684-b51b-436a-a2b8-9bffd359c0c9&quot;,&quot;parentUUID&quot;:&quot;55c55c5e-5d49-4776-b42d-90c8a003621e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;71a36855-94f5-4ab4-a318-cd9eeeae3cee&quot;,&quot;title&quot;:&quot;dataInstasnce helper&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/config-processor/test/integration/dataInstance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/dataInstance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d44dc206-b6b5-46c7-97ff-b83253a77cc6&quot;,&quot;title&quot;:&quot;updateDataInstances&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/config-processor/test/integration/dataInstance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/dataInstance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set data_instances in redis&quot;,&quot;fullTitle&quot;:&quot;Config data instance tests dataInstasnce helper updateDataInstances should set data_instances in redis&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:685,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await dataInstanceHelper.updateDataInstances();\nlet storedDataInstances = await redis.getAsync(&#x27;data_instances&#x27;)\nexpect(storedDataInstances).to.exist;\nstoredDataInstances = JSON.parse(storedDataInstances);\nexpect(Object.keys(storedDataInstances).length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5e18a32-568d-498a-a442-f88b8c58292c&quot;,&quot;parentUUID&quot;:&quot;d44dc206-b6b5-46c7-97ff-b83253a77cc6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a message on the updateDataInstances pub/sub channel&quot;,&quot;fullTitle&quot;:&quot;Config data instance tests dataInstasnce helper updateDataInstances should get a message on the updateDataInstances pub/sub channel&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:300,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await delay(300)\nexpect(pubSubMessage.channel).to.equal(&#x27;updateDataInstances&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;683b48b9-c568-4e59-b7c6-79802a1d2977&quot;,&quot;parentUUID&quot;:&quot;d44dc206-b6b5-46c7-97ff-b83253a77cc6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b5e18a32-568d-498a-a442-f88b8c58292c&quot;,&quot;683b48b9-c568-4e59-b7c6-79802a1d2977&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:985,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c67739a5-a894-4b12-a58b-83a295c902c1&quot;,&quot;title&quot;:&quot;Config license tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/config-processor/test/integration/license.test.js&quot;,&quot;file&quot;:&quot;/test/integration/license.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config license tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.TESTING = true;\npubSubClient.subscribe(&#x27;updateLicenses&#x27;)\npubSubClient.on(&#x27;message&#x27;, function(channel, message) {\n  \n  pubSubMessage = {channel, message}\n  // pubSubMessage[channel] = message;\n  \n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0fcf02d0-ea60-4ef4-a14e-a81db46c95bb&quot;,&quot;parentUUID&quot;:&quot;c67739a5-a894-4b12-a58b-83a295c902c1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0514e473-ae6c-402d-b9dc-c5dd145bc56d&quot;,&quot;title&quot;:&quot;license helper&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/config-processor/test/integration/license.test.js&quot;,&quot;file&quot;:&quot;/test/integration/license.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;673f9c10-f6f5-4b84-8e0e-3440610b05d0&quot;,&quot;title&quot;:&quot;updateLicenses&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/config-processor/test/integration/license.test.js&quot;,&quot;file&quot;:&quot;/test/integration/license.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set licenses and x.license in redis for all dataInstances&quot;,&quot;fullTitle&quot;:&quot;Config license tests license helper updateLicenses should set licenses and x.license in redis for all dataInstances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:415,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await licenseHelper.updateLicenses()\nlet storedLicences = await redis.hgetallAsync(&#x27;licenses&#x27;)\nlicenseId = Object.keys(storedLicences)[0]\nexpect(storedLicences).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc7df38a-67d1-4797-8385-d1040b2f4769&quot;,&quot;parentUUID&quot;:&quot;673f9c10-f6f5-4b84-8e0e-3440610b05d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a message on the updateLicenses pub/sub channel&quot;,&quot;fullTitle&quot;:&quot;Config license tests license helper updateLicenses should get a message on the updateLicenses pub/sub channel&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:301,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await delay(300)\nexpect(pubSubMessage.channel).to.equal(&#x27;updateLicenses&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d00c1d61-52be-4d3a-b9ef-f38bc46c16a0&quot;,&quot;parentUUID&quot;:&quot;673f9c10-f6f5-4b84-8e0e-3440610b05d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should set license redis for all dataInstances&quot;,&quot;fullTitle&quot;:&quot;Config license tests license helper updateLicenses should set license redis for all dataInstances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:239,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await licenseHelper.updateLicenses(licenseId)\nlet storedLicences = await redis.hgetallAsync(&#x27;licenses&#x27;)\nexpect(storedLicences).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bf3e8c6c-687d-4f7d-99ec-053806dfe6b4&quot;,&quot;parentUUID&quot;:&quot;673f9c10-f6f5-4b84-8e0e-3440610b05d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bc7df38a-67d1-4797-8385-d1040b2f4769&quot;,&quot;d00c1d61-52be-4d3a-b9ef-f38bc46c16a0&quot;,&quot;bf3e8c6c-687d-4f7d-99ec-053806dfe6b4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:955,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4fd1fa29-cbc3-4627-a724-93dba3ed18e2&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;513855ca-5646-4405-aaac-c86ee54ba99e&quot;,&quot;title&quot;:&quot;Core Service biztimes&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/biztimes.test.js&quot;,&quot;file&quot;:&quot;/test/biztimes.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service biztimes \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()\nlet test_yml = await getTestConfig();\ntest_data = test_yml.data;\nbiz = { \&quot;Active\&quot;: false, \&quot;EndHour\&quot;: 17, \&quot;EndMinute\&quot;: 0, \&quot;SID\&quot;: test_data.biz_sid, \&quot;StartHour\&quot;: 9, \&quot;StartMinute\&quot;: 15, \&quot;Weekday\&quot;: 0 }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15023cd2-b1b4-4226-9f01-80a4daf8f7db&quot;,&quot;parentUUID&quot;:&quot;513855ca-5646-4405-aaac-c86ee54ba99e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c2e174db-a4d7-4bc4-9cab-02bbaa5cbd06&quot;,&quot;title&quot;:&quot;GET /biztimes&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/biztimes.test.js&quot;,&quot;file&quot;:&quot;/test/biztimes.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets biztimes&quot;,&quot;fullTitle&quot;:&quot;Core Service biztimes GET /biztimes gets biztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/biztimes&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n// biz = res.body.Items[0];\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc75ba5f-562b-495d-83fa-ba182d62772a&quot;,&quot;parentUUID&quot;:&quot;c2e174db-a4d7-4bc4-9cab-02bbaa5cbd06&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cc75ba5f-562b-495d-83fa-ba182d62772a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:35,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;b5365a55-097c-49c8-aca4-26626c9135dd&quot;,&quot;title&quot;:&quot;POST /biztimes/save&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/biztimes.test.js&quot;,&quot;file&quot;:&quot;/test/biztimes.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service biztimes POST /biztimes/save \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;if (biz.EndHour &lt; 24)\n    biz.EndHour = biz.EndHour + 1\nelse\n    biz.EndHour = biz.EndHour - 23&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e90ae58c-aa3d-4bb8-8b63-ac5b6f397cf1&quot;,&quot;parentUUID&quot;:&quot;b5365a55-097c-49c8-aca4-26626c9135dd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;saves biztimes&quot;,&quot;fullTitle&quot;:&quot;Core Service biztimes POST /biztimes/save saves biztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:49,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/biztimes/save&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(biz)\n//console.log(res.body)\nexpect(res.status).to.equal(200);\nexpect(res.body.EndHour).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8861d0be-5a30-4e5c-aca6-6e0a16511bbf&quot;,&quot;parentUUID&quot;:&quot;b5365a55-097c-49c8-aca4-26626c9135dd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8861d0be-5a30-4e5c-aca6-6e0a16511bbf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:49,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;6d9b7faa-1da8-4cc6-b85e-b7df4b349e64&quot;,&quot;title&quot;:&quot;Core Service category&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service category \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a7e9fba-8cc9-40b8-b01e-ba2506de9b54&quot;,&quot;parentUUID&quot;:&quot;6d9b7faa-1da8-4cc6-b85e-b7df4b349e64&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c27fb304-9007-4356-b4f8-ef292dcfa289&quot;,&quot;title&quot;:&quot;GET tree/{object_type}&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service category GET tree/{object_type} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:54,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/categories/tree/category?node=all&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            category = res.body[0]\n            coreResult = res.body;\n            //console.log(res.body)\n            expect(res.status).to.equal(200);\n            // expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;87cf3d1b-4e05-43b3-b8c8-d67f4adb6495&quot;,&quot;parentUUID&quot;:&quot;c27fb304-9007-4356-b4f8-ef292dcfa289&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;87cf3d1b-4e05-43b3-b8c8-d67f4adb6495&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:54,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;66d5e0af-091d-47f8-83b5-6c40e248aadc&quot;,&quot;title&quot;:&quot;GET {sid}&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service category GET {sid} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/category/&#x27; + category.id)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            //console.log(res.body);\n            coreResult = res.body;\n            expect(res.status).to.equal(200);\n            expect(res.body.Name).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b8b63d3-cce2-486d-9e54-fa4a6fcb27f9&quot;,&quot;parentUUID&quot;:&quot;66d5e0af-091d-47f8-83b5-6c40e248aadc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6b8b63d3-cce2-486d-9e54-fa4a6fcb27f9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;fa98eeba-9d50-47de-b0ef-b0f0ee747b03&quot;,&quot;title&quot;:&quot;POST save&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service category POST save core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/category/save&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(category_save)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.CreatedDate).to.exist;\n// expect(res.body.Name).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14027f5f-8ff0-4799-b677-4775844b11b3&quot;,&quot;parentUUID&quot;:&quot;fa98eeba-9d50-47de-b0ef-b0f0ee747b03&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;14027f5f-8ff0-4799-b677-4775844b11b3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;81cea772-7b27-4514-b9ef-615a2d911fc8&quot;,&quot;title&quot;:&quot;GET {sid}/delete&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service category GET {sid}/delete \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//Fetch category sid to delete\n            let resp = await chai.request(newUrlBase)\n                .get(&#x27;/categories/tree/category?node=all&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            category = resp.body;\n            category.forEach(element =&gt; {\n                //console.log(element.Name);\n                if (element.Name == &#x27;Qa Auto&#x27;)\n                    cate_delete = element;\n            });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;411f418e-f198-4466-b5a4-c38a4725c38f&quot;,&quot;parentUUID&quot;:&quot;81cea772-7b27-4514-b9ef-615a2d911fc8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service category GET {sid}/delete core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/category/&#x27; + cate_delete.id + &#x27;/delete&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body).to.equal(0);\n// expect(res.body.Name).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;399ca736-e9a6-417a-9bb7-daf098a0ce49&quot;,&quot;parentUUID&quot;:&quot;81cea772-7b27-4514-b9ef-615a2d911fc8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;399ca736-e9a6-417a-9bb7-daf098a0ce49&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;16841acb-e65a-4401-a0d1-dccce6cd6e9d&quot;,&quot;title&quot;:&quot;Core Service contacts&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ce88156-314b-4a7d-9b1c-7720ea30316d&quot;,&quot;parentUUID&quot;:&quot;16841acb-e65a-4401-a0d1-dccce6cd6e9d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bc6a7649-92bc-406d-88d7-87930a165c71&quot;,&quot;title&quot;:&quot;GET /contacts/current&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET /contacts/current core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                        .get(&#x27;/contacts/current/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n                        .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n                  coreResult = res.body;\n                  expect(res.status).to.equal(200);\n                  expect(res.body.ContactID).to.exist;\n                  currentUser_sid = res.body.SID&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b401dfed-1c17-487f-908e-c866924203a8&quot;,&quot;parentUUID&quot;:&quot;bc6a7649-92bc-406d-88d7-87930a165c71&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b401dfed-1c17-487f-908e-c866924203a8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;1e646cb2-7d14-4517-bd6b-7f2018d662fa&quot;,&quot;title&quot;:&quot;GET detail/{contact_sid}&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET detail/{contact_sid} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                        .get(&#x27;/contacts/detail/&#x27; + currentUser_sid)\n                        .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n                  coreResult = res.body;\n                  expect(res.status).to.equal(200);\n                  expect(res.body.ContactID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3140ac68-687a-4ab4-8294-760ba6650135&quot;,&quot;parentUUID&quot;:&quot;1e646cb2-7d14-4517-bd6b-7f2018d662fa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3140ac68-687a-4ab4-8294-760ba6650135&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;c307e69e-6b75-41e1-96d5-67280a7b8e02&quot;,&quot;title&quot;:&quot;GET {contact_sid}/attributes&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET {contact_sid}/attributes core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contact/&#x27; + currentUser_sid + &#x27;/attributes&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//Need clarifacation on a valaid test \nexpect(res.body[0]).to.exist;\nexpect(res.body[1]).to.exist;\nexpect(res.body[2]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e47f7e9a-2c59-4332-b74f-629b34cc3a45&quot;,&quot;parentUUID&quot;:&quot;c307e69e-6b75-41e1-96d5-67280a7b8e02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e47f7e9a-2c59-4332-b74f-629b34cc3a45&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;66fcaa55-92e9-4540-9dd3-34f2eb571a51&quot;,&quot;title&quot;:&quot;GET {contact_sid}/delegations&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET {contact_sid}/delegations core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contact/&#x27; + currentUser_sid + &#x27;/delegations&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\n// //console.log(res.body)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f857d283-48e3-4534-8a17-c756ffb30848&quot;,&quot;parentUUID&quot;:&quot;66fcaa55-92e9-4540-9dd3-34f2eb571a51&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f857d283-48e3-4534-8a17-c756ffb30848&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;1bd870d9-2535-4f9b-8bdc-027abbe326b0&quot;,&quot;title&quot;:&quot;GET byuserid/{user_id}&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET byuserid/{user_id} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contacts/byuserid/iApprove&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\n//console.log(res.body)\nexpect(res.status).to.equal(200);\n//Need clarifacation on a valaid test \n// expect(res.body[0]).to.exist;\n// expect(res.body[1]).to.exist;\n// expect(res.body[2]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a4969f7-9ace-4cf3-a116-bf565b999055&quot;,&quot;parentUUID&quot;:&quot;1bd870d9-2535-4f9b-8bdc-027abbe326b0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1a4969f7-9ace-4cf3-a116-bf565b999055&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;4f34570e-5bee-45c0-aefd-9cb9eb62a7b8&quot;,&quot;title&quot;:&quot;GET /contacts/search&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET /contacts/search core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contacts/search?search=System&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n// //console.log(res.body)\ncoreResult = res.body;\n//console.log(res.body);\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81d3bef1-3ee5-46d1-a161-67648de2e06a&quot;,&quot;parentUUID&quot;:&quot;4f34570e-5bee-45c0-aefd-9cb9eb62a7b8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;81d3bef1-3ee5-46d1-a161-67648de2e06a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;536d146d-0d09-450c-bf49-270ef949f427&quot;,&quot;title&quot;:&quot;GET /contact/search/quick/name&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET /contact/search/quick/name core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contacts/search/quick/name/script/?start=0&amp;count=20&amp;sort=Name&amp;dir=ASC&amp;filter=System&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n//console.log(res.body)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f13032a-2e7d-4e64-85f2-bcbdbae142ac&quot;,&quot;parentUUID&quot;:&quot;536d146d-0d09-450c-bf49-270ef949f427&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1f13032a-2e7d-4e64-85f2-bcbdbae142ac&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;301e8e7c-e8ae-4fb1-be79-0e7e6eaca06f&quot;,&quot;title&quot;:&quot;GET /contacts/contactdetailsearch/{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET /contacts/contactdetailsearch/{page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contacts/contactdetailsearch/0/10/LAST_NAME/ASC/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n//console.log(res.body)\nexpect(res.status).to.equal(200);\ncoreResult = res.body;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a90b1bb-5c80-4e32-aba8-c719699fa766&quot;,&quot;parentUUID&quot;:&quot;301e8e7c-e8ae-4fb1-be79-0e7e6eaca06f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4a90b1bb-5c80-4e32-aba8-c719699fa766&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:27,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;a109bb01-963f-42e4-8c69-02734858b720&quot;,&quot;title&quot;:&quot;POST /contacts/save | update&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts POST /contacts/save | update core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:273,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .post(&#x27;/contacts/save&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send(contact);\ninsertedSid = res.text\n//console.log(res.text)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;646cc6ba-9edf-470d-9d4d-4e3fb0e5c94a&quot;,&quot;parentUUID&quot;:&quot;a109bb01-963f-42e4-8c69-02734858b720&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;core service update&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts POST /contacts/save | update core service update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:292,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;contact.SID = insertedSid;\nlet res = await chai.request(newUrlBase)\n      .post(&#x27;/contacts/update&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send(contact);\n//console.log(res.body)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fcd39177-7867-4a1a-8985-ed7c7da17cfc&quot;,&quot;parentUUID&quot;:&quot;a109bb01-963f-42e4-8c69-02734858b720&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;646cc6ba-9edf-470d-9d4d-4e3fb0e5c94a&quot;,&quot;fcd39177-7867-4a1a-8985-ed7c7da17cfc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:565,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;52641f11-e748-400c-9be0-17beb35129f6&quot;,&quot;title&quot;:&quot;POST /contacts/replace POST&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts POST /contacts/replace POST \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;replace_user = [[\&quot;OldContactSid\&quot;, insertedSid], [\&quot;ReplacementContactSid\&quot;, insertedSid2], [\&quot;RecipientReplace\&quot;, \&quot;No\&quot;], [\&quot;OpenTaskReplace\&quot;, \&quot;No\&quot;], [\&quot;GroupReplace\&quot;, \&quot;No\&quot;], [\&quot;RoleReplace\&quot;, \&quot;No\&quot;], [\&quot;DelegationReplace\&quot;, \&quot;No\&quot;]]&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7429f3b-0f73-4b3f-aec0-c3752c8df7b5&quot;,&quot;parentUUID&quot;:&quot;52641f11-e748-400c-9be0-17beb35129f6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service update&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts POST /contacts/replace POST core service update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;contact.SID = insertedSid;\nlet res = await chai.request(newUrlBase)\n      .post(&#x27;/contacts/replace &#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send(replace_user);\n//console.log(res.body)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f26aaff-e876-48c0-9fde-2760b89c1ae7&quot;,&quot;parentUUID&quot;:&quot;52641f11-e748-400c-9be0-17beb35129f6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8f26aaff-e876-48c0-9fde-2760b89c1ae7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;c79d27ac-e7c4-4cc7-9b78-6ec39a219bc9&quot;,&quot;title&quot;:&quot;Core service dbconns&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/dbconn.test.js&quot;,&quot;file&quot;:&quot;/test/dbconn.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core service dbconns \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9dc109cb-2146-4c43-856a-b13f83d389f7&quot;,&quot;parentUUID&quot;:&quot;c79d27ac-e7c4-4cc7-9b78-6ec39a219bc9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all dbconns&quot;,&quot;fullTitle&quot;:&quot;Core service dbconns it should GET all dbconns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .get(&#x27;/dbconns/list/0/1000/Name/ASC/script/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2eed2e8d-d7e7-4092-a8be-e26423a2cd17&quot;,&quot;parentUUID&quot;:&quot;c79d27ac-e7c4-4cc7-9b78-6ec39a219bc9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should add a test dbconn&quot;,&quot;fullTitle&quot;:&quot;Core service dbconns it should add a test dbconn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .post(&#x27;/dbconns/save/script/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n  .send(testDbConn)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\nexpect(res.text).to.be.a.guid()\ntestDbConnSid = res.text\n// verify testDbConn comes back in list\nres = await chai.request(newUrlBase)\n  .get(&#x27;/dbconns/list/0/1000/Name/ASC/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst idx = res.body.Items.findIndex(item =&gt; item.SID == testDbConnSid);\nexpect(idx).to.be.greaterThan(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ada9a7a-333f-4051-bfd0-4ac04a99fdc8&quot;,&quot;parentUUID&quot;:&quot;c79d27ac-e7c4-4cc7-9b78-6ec39a219bc9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should delete the test dbconn&quot;,&quot;fullTitle&quot;:&quot;Core service dbconns it should delete the test dbconn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .post(&#x27;/dbconns/delete/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n  .send([testDbConnSid])\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\nexpect(res.text).to.equal(&#x27;1&#x27;);\n// verify testDbConn does not come back in list\nres = await chai.request(newUrlBase)\n  .get(&#x27;/dbconns/list/0/1000/Name/ASC/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst idx = res.body.Items.findIndex(item =&gt; item.SID == testDbConnSid);\nexpect(idx).to.equal(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8455fc80-d7bf-404b-b0d6-9d07d37f9cfe&quot;,&quot;parentUUID&quot;:&quot;c79d27ac-e7c4-4cc7-9b78-6ec39a219bc9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2eed2e8d-d7e7-4092-a8be-e26423a2cd17&quot;,&quot;2ada9a7a-333f-4051-bfd0-4ac04a99fdc8&quot;,&quot;8455fc80-d7bf-404b-b0d6-9d07d37f9cfe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:73,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;cf39d7ed-ec80-42da-be09-bdec9b818877&quot;,&quot;title&quot;:&quot;Core Service groups&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service groups \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d010c9a6-d9e4-4ccd-b469-83085b73a5f6&quot;,&quot;parentUUID&quot;:&quot;cf39d7ed-ec80-42da-be09-bdec9b818877&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;577ffdef-2366-49fd-a2d4-3322ac084224&quot;,&quot;title&quot;:&quot;POST /group/save&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups POST /group/save core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                        .post(&#x27;/groups/save/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n                        .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n                        .send({ \&quot;Name\&quot;: \&quot;Qa Auto\&quot;, \&quot;Description\&quot;: \&quot;This is an automation\&quot;, \&quot;Dynamic\&quot;: 0 })\n                  new_groupSid = res.text;\n                  expect(res.status).to.equal(200);\n                  expect(res.text).to.exist;\n                  expect(res.text).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;875c1a3e-d6e8-491c-97d4-9cb4a58f231c&quot;,&quot;parentUUID&quot;:&quot;577ffdef-2366-49fd-a2d4-3322ac084224&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;875c1a3e-d6e8-491c-97d4-9cb4a58f231c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;0b51e46f-2501-4375-9045-2bc7a64daf46&quot;,&quot;title&quot;:&quot;POST /groups/members/{groupSid}/add&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups POST /groups/members/{groupSid}/add core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:77,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .post(&#x27;/groups/members/&#x27; + new_groupSid + &#x27;/add&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send([{ SID: system_user, ContactType: 1 }])\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b7b9b186-ebb6-4799-9298-0eb0af4f6e4b&quot;,&quot;parentUUID&quot;:&quot;0b51e46f-2501-4375-9045-2bc7a64daf46&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b7b9b186-ebb6-4799-9298-0eb0af4f6e4b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:77,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;0c046fef-6c5a-42e3-9937-8fafad716f9f&quot;,&quot;title&quot;:&quot;POST /groups/members/{groupSid}/remove&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups POST /groups/members/{groupSid}/remove core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .post(&#x27;/groups/members/&#x27; + new_groupSid + &#x27;/remove&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send([{ SID: system_user, ContactType: 1 }])\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3fd23ee3-5288-4805-a3fd-3cf78cb8b2d0&quot;,&quot;parentUUID&quot;:&quot;0c046fef-6c5a-42e3-9937-8fafad716f9f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3fd23ee3-5288-4805-a3fd-3cf78cb8b2d0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;ee6b24a4-0c15-4790-baf2-ef6170afd39d&quot;,&quot;title&quot;:&quot;GET /groups/{sid}/delete&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/{sid}/delete core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/&#x27; + new_groupSid + &#x27;/delete&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\nexpect(res.text).to.equal(&#x27;true&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25990a5e-6c96-49b9-927b-065d36534f3f&quot;,&quot;parentUUID&quot;:&quot;ee6b24a4-0c15-4790-baf2-ef6170afd39d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;25990a5e-6c96-49b9-927b-065d36534f3f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;b00d637c-e7af-4b5a-8b70-c8ce41b7657a&quot;,&quot;title&quot;:&quot;GET /groups/list/simple&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/list/simple core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/list/simple&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body[0]).to.be.an(&#x27;array&#x27;).that.does.include(&#x27;Administrators&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1041d30-8d1f-4f8e-bf08-7286a7b16b8a&quot;,&quot;parentUUID&quot;:&quot;b00d637c-e7af-4b5a-8b70-c8ce41b7657a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b1041d30-8d1f-4f8e-bf08-7286a7b16b8a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;9e62fdda-24d0-44bf-95e0-3a2977570658&quot;,&quot;title&quot;:&quot;GET /groups/{sid}&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/{sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/&#x27; + groupSid)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.SID).to.exist\nexpect(res.body.SID).to.be.guid\n// expect(res.).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a750a5d8-cec8-45de-a635-b16c620cb4d1&quot;,&quot;parentUUID&quot;:&quot;9e62fdda-24d0-44bf-95e0-3a2977570658&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a750a5d8-cec8-45de-a635-b16c620cb4d1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;92407915-b0b0-421b-939f-f958b83bd292&quot;,&quot;title&quot;:&quot;GET /groups/listroleassociation/{groupSid}&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/listroleassociation/{groupSid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/listroleassociation/&#x27; + groupSid)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body[0]).to.be.an(&#x27;array&#x27;).that.does.include(&#x27;System Administrators&#x27;);\n// expect(res.).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8e31355-96a1-4bf7-8a4f-58faf3e83bca&quot;,&quot;parentUUID&quot;:&quot;92407915-b0b0-421b-939f-f958b83bd292&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c8e31355-96a1-4bf7-8a4f-58faf3e83bca&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;cc36eb37-6fc9-4825-b41b-2da9d73b5bf8&quot;,&quot;title&quot;:&quot;GET /groups/select/{contact_sid}&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/select/{contact_sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/select/&#x27; + system_user)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30b2d4e4-1360-42eb-8ac3-2b491dd8b67e&quot;,&quot;parentUUID&quot;:&quot;cc36eb37-6fc9-4825-b41b-2da9d73b5bf8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;30b2d4e4-1360-42eb-8ac3-2b491dd8b67e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;a42040b9-58a5-489f-874f-ad16c30ed860&quot;,&quot;title&quot;:&quot;GET /groups/nondynamic/list/simple&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/nondynamic/list/simple core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/nondynamic/list/simple&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79323629-7d64-48a2-8df8-2b156f9c88f3&quot;,&quot;parentUUID&quot;:&quot;a42040b9-58a5-489f-874f-ad16c30ed860&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;79323629-7d64-48a2-8df8-2b156f9c88f3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;2bc0a8ff-2c5d-457c-8953-d4c800d49c0b&quot;,&quot;title&quot;:&quot;GET /groups/listmembers/{sid}&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/listmembers/{sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/listmembers/&#x27; + groupSid)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef3374b5-6caa-4f52-8b20-53682db11c43&quot;,&quot;parentUUID&quot;:&quot;2bc0a8ff-2c5d-457c-8953-d4c800d49c0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ef3374b5-6caa-4f52-8b20-53682db11c43&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;db173edd-57f9-4f64-ad0f-d3529dd0dd54&quot;,&quot;title&quot;:&quot;GET /groups/list/{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/list/{page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/list/0/10/Name/asc&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5e25e66-9246-435d-8546-851d6935e1fd&quot;,&quot;parentUUID&quot;:&quot;db173edd-57f9-4f64-ad0f-d3529dd0dd54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d5e25e66-9246-435d-8546-851d6935e1fd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;1809b834-4b28-4352-a0d5-3ab217d55edc&quot;,&quot;title&quot;:&quot;GET /groups/listbypage/{sid}/{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/listbypage/{sid}/{page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/listbypage/&#x27; + groupSid + &#x27;/0/10/Name/asc&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83321202-2199-4d0f-bb3d-c8f3376e46a6&quot;,&quot;parentUUID&quot;:&quot;1809b834-4b28-4352-a0d5-3ab217d55edc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;83321202-2199-4d0f-bb3d-c8f3376e46a6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;c2c21ce7-067d-45de-8a9d-ab390ae17538&quot;,&quot;title&quot;:&quot;GET /groups/listprocessassociation/{sid}&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/listprocessassociation/{sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/listprocessassociation/&#x27; + groupSid)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;116e043b-9463-4daa-a976-9061a22c2cc4&quot;,&quot;parentUUID&quot;:&quot;c2c21ce7-067d-45de-8a9d-ab390ae17538&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;116e043b-9463-4daa-a976-9061a22c2cc4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;b6278682-889b-4970-a699-1788d4af60cd&quot;,&quot;title&quot;:&quot;Core Service Members&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/member.test.js&quot;,&quot;file&quot;:&quot;/test/member.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service Members \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f8eac3d6-d5f1-4099-8ed0-751b32f8e5fb&quot;,&quot;parentUUID&quot;:&quot;b6278682-889b-4970-a699-1788d4af60cd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2272db69-f4f4-4da2-86d3-977ac142c039&quot;,&quot;title&quot;:&quot;{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/member.test.js&quot;,&quot;file&quot;:&quot;/test/member.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Members {page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/member/0/10/Name/Asc/script/?filter=&amp;include=3&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist\n// expect(res.).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2bb4956d-bdc1-4b6d-a010-1013fc8a8855&quot;,&quot;parentUUID&quot;:&quot;2272db69-f4f4-4da2-86d3-977ac142c039&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2bb4956d-bdc1-4b6d-a010-1013fc8a8855&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;4138077f-30fe-4055-87c3-43b8d54aed05&quot;,&quot;title&quot;:&quot;Core Service myTasks&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/myTasks.test.js&quot;,&quot;file&quot;:&quot;/test/myTasks.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service myTasks \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a77f843-8670-4da4-9441-544e1c8a4815&quot;,&quot;parentUUID&quot;:&quot;4138077f-30fe-4055-87c3-43b8d54aed05&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3ca2a8e9-f227-4e59-9ca3-f7f6b3cef071&quot;,&quot;title&quot;:&quot;GEt {status}/{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/myTasks.test.js&quot;,&quot;file&quot;:&quot;/test/myTasks.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service myTasks GEt {status}/{page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:73,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/myTasks/status/0/10/Name/Asc&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9605d984-2e51-478f-b189-c7fe160df4b6&quot;,&quot;parentUUID&quot;:&quot;3ca2a8e9-f227-4e59-9ca3-f7f6b3cef071&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9605d984-2e51-478f-b189-c7fe160df4b6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:73,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;34fcf389-fdff-42f2-ab24-665ad11391f7&quot;,&quot;title&quot;:&quot;Core Service powerForm&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()\nlet test_yml = await getTestConfig();\ntest_data = test_yml.data;\n// //console.log(test_data);\nnew_role = &#x27;{ \&quot;Name\&quot;: \&quot;Qatest\&quot;, \&quot;ExtendedDescription\&quot;: \&quot;qa automated\&quot;, \&quot;OwnerSID\&quot;:&#x27; + test_data.object_sid + &#x27;, \&quot;OwnerType\&quot;: 2 }&#x27;\npowerform = {\n    CategorySID: test_data.category_sid,\n    Name: \&quot;test\&quot;,\n    PowerFormType: \&quot;0\&quot;,\n    Version: 1\n}\n// { \&quot;ID\&quot;: 9999, \&quot;Mode\&quot;: 2, \&quot;ObjectType\&quot;: 1, \&quot;RoleSID\&quot;: test_data.role_sid, \&quot;SID\&quot;: \&quot;90645d40-9de6-48b1-b689-0a610ef1d716\&quot;, \&quot;Permissions\&quot;: 0 }, { \&quot;ID\&quot;: 9999, \&quot;Mode\&quot;: 3, \&quot;ObjectType\&quot;: 1, \&quot;RoleSID\&quot;: \&quot;e513a6ec-cfea-4bcb-8b74-eebc3439c9fc\&quot;, \&quot;SID\&quot;: \&quot;4711a8f4-68be-4772-b389-0a610ef1d7fe\&quot;, \&quot;Permissions\&quot;: 0 }, { \&quot;ID\&quot;: 9999, \&quot;Mode\&quot;: 4, \&quot;ObjectType\&quot;: 1, \&quot;RoleSID\&quot;: \&quot;e513a6ec-cfea-4bcb-8b74-eebc3439c9fc\&quot;, \&quot;SID\&quot;: \&quot;b1e03457-e202-4a99-a389-0a610ef1d79d\&quot;, \&quot;Permissions\&quot;: 0 }, { \&quot;ID\&quot;: 0, \&quot;Mode\&quot;: 5, \&quot;ObjectType\&quot;: 1, \&quot;RoleSID\&quot;: \&quot;e513a6ec-cfea-4bcb-8b74-eebc3439c9fc\&quot;, \&quot;SID\&quot;: \&quot;f221751c-ba9f-4b19-9708-1f22372dffde\&quot;, \&quot;Permissions\&quot;: 1023 }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4dda2b6-48ef-43bd-a29e-fa5d820abd68&quot;,&quot;parentUUID&quot;:&quot;34fcf389-fdff-42f2-ab24-665ad11391f7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;872dde30-8d76-4533-98ad-37addb1b3440&quot;,&quot;title&quot;:&quot;POST /Powerform/save&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm POST /Powerform/save core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:36,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/powerform/save&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(powerform)\nexpect(res.status).to.equal(200);\nsid = res.body.SID\n//console.log(sid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47ec1b60-dbe3-4b22-b2ef-701b48a2a1b3&quot;,&quot;parentUUID&quot;:&quot;872dde30-8d76-4533-98ad-37addb1b3440&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;47ec1b60-dbe3-4b22-b2ef-701b48a2a1b3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:36,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;b56d4716-462d-4417-82ae-c1f5cb29f400&quot;,&quot;title&quot;:&quot;GET /Powerform/{sid}&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm GET /Powerform/{sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/powerform/&#x27; + sid)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ed27ae5-271b-4f42-9fce-6a67fd6a0a84&quot;,&quot;parentUUID&quot;:&quot;b56d4716-462d-4417-82ae-c1f5cb29f400&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3ed27ae5-271b-4f42-9fce-6a67fd6a0a84&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;e6d4b710-cade-4821-b385-26f4ddf2a9db&quot;,&quot;title&quot;:&quot;GET /Powerform/{sid}/detail&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm GET /Powerform/{sid}/detail core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/powerform/&#x27; + sid + &#x27;/detail&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;77c10651-5f1d-4dd7-bb00-104d846e917f&quot;,&quot;parentUUID&quot;:&quot;e6d4b710-cade-4821-b385-26f4ddf2a9db&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;77c10651-5f1d-4dd7-bb00-104d846e917f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;884ab4a3-e448-49d8-85bc-e661a040ba1b&quot;,&quot;title&quot;:&quot;GET /Powerform/{sid}/delete&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm GET /Powerform/{sid}/delete core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/powerform/&#x27; + sid + &#x27;/delete&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f45ca268-c3dc-46ab-8bd0-27bd297150c8&quot;,&quot;parentUUID&quot;:&quot;884ab4a3-e448-49d8-85bc-e661a040ba1b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f45ca268-c3dc-46ab-8bd0-27bd297150c8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;3007de38-1c66-4194-81a1-018d3d5dfaf4&quot;,&quot;title&quot;:&quot;Core Service Process&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service Process \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken();\nlet test_yml = await getTestConfig();\ntest_data = test_yml.data;\nprc = { Name: new Date().toISOString(), Description: \&quot;Qa Automation\&quot;, CategorySID: test_data.category_sid }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eac54dc4-6ac5-4708-a4e0-2e45d08a51a2&quot;,&quot;parentUUID&quot;:&quot;3007de38-1c66-4194-81a1-018d3d5dfaf4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5bedebb4-c847-49cd-9666-e5f322c978a1&quot;,&quot;title&quot;:&quot;POST /process/create|delete&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process POST /process/create|delete core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:159,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/process/create&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(prc)\np1 = res.body.SID;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1f39b20-a144-4c6a-8905-4e3928ce75f0&quot;,&quot;parentUUID&quot;:&quot;5bedebb4-c847-49cd-9666-e5f322c978a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;core service | Delete&quot;,&quot;fullTitle&quot;:&quot;Core Service Process POST /process/create|delete core service | Delete&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:145,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/process/&#x27; + p1 + &#x27;/delete&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nconsole.log(res);\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;230e9d79-0476-43a3-b0b3-ca000ab2b82f&quot;,&quot;parentUUID&quot;:&quot;5bedebb4-c847-49cd-9666-e5f322c978a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d1f39b20-a144-4c6a-8905-4e3928ce75f0&quot;,&quot;230e9d79-0476-43a3-b0b3-ca000ab2b82f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:304,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;38c32d8b-202f-40ce-acd1-3069940efb43&quot;,&quot;title&quot;:&quot;GET /process/{sid}/copy&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /process/{sid}/copy core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3115,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/processes/&#x27; + test_data.process_sid + &#x27;/copy&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            expect(res.status).to.equal(200);\n            //delete copied process\n            let del = await chai.request(newUrlBase)\n                .get(&#x27;/process/&#x27; + res.text + &#x27;/delete&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            expect(del.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7ef449e-364f-4651-9cdf-3b92a15da5d6&quot;,&quot;parentUUID&quot;:&quot;38c32d8b-202f-40ce-acd1-3069940efb43&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d7ef449e-364f-4651-9cdf-3b92a15da5d6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3115,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;a261ab82-8122-4213-a2aa-a7d5b634c52c&quot;,&quot;title&quot;:&quot;GET /processes&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:66,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d4f3982-67d6-43b0-870c-a2c17951959d&quot;,&quot;parentUUID&quot;:&quot;a261ab82-8122-4213-a2aa-a7d5b634c52c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0d4f3982-67d6-43b0-870c-a2c17951959d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:66,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;dcd3e6a1-e6a6-44aa-a950-745eede43bcc&quot;,&quot;title&quot;:&quot;GET /processes/{SID}&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{SID} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf2ddddf-c040-49b1-9c88-bb1dc470ac81&quot;,&quot;parentUUID&quot;:&quot;dcd3e6a1-e6a6-44aa-a950-745eede43bcc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cf2ddddf-c040-49b1-9c88-bb1dc470ac81&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;0eae97dc-da7a-4559-9be9-3789fe9be12c&quot;,&quot;title&quot;:&quot;GET /processes/{sid}/detail&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{sid}/detail core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/detail&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e14b7dca-7dab-499f-b2da-1ace55b63358&quot;,&quot;parentUUID&quot;:&quot;0eae97dc-da7a-4559-9be9-3789fe9be12c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e14b7dca-7dab-499f-b2da-1ace55b63358&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;5d9246d9-ec7d-4ea0-9c1c-f59551ca1f63&quot;,&quot;title&quot;:&quot;GET /processes/{sid}/name&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{sid}/name core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/name&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.text)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1627b1d-61dc-4252-b530-505cf18f29c6&quot;,&quot;parentUUID&quot;:&quot;5d9246d9-ec7d-4ea0-9c1c-f59551ca1f63&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e1627b1d-61dc-4252-b530-505cf18f29c6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;2d68f63b-7416-4f88-8335-21c953ac3d45&quot;,&quot;title&quot;:&quot;GET /processes/{sid}/summary&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{sid}/summary core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/summary&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.text)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3302e68f-d878-44db-a4bb-58d96519d5f4&quot;,&quot;parentUUID&quot;:&quot;2d68f63b-7416-4f88-8335-21c953ac3d45&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3302e68f-d878-44db-a4bb-58d96519d5f4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;2bc4e63b-d919-43cb-8ea3-acc1bfe41bf8&quot;,&quot;title&quot;:&quot;GET /processes/{process_sid}/tasks&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{process_sid}/tasks core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/tasks&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76028dac-787a-4d85-84a8-c246f112891c&quot;,&quot;parentUUID&quot;:&quot;2bc4e63b-d919-43cb-8ea3-acc1bfe41bf8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;76028dac-787a-4d85-84a8-c246f112891c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;7f0a543f-0f4f-4d6c-b0c7-c8cb041be868&quot;,&quot;title&quot;:&quot;GET /processes/{process_sid}/tasks/{task_sid}/rules&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{process_sid}/tasks/{task_sid}/rules core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/tasks/&#x27; + test_data.task_sid + &#x27;/rules&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b2dae7a-c8a0-4dce-9abf-c585b5d30d2b&quot;,&quot;parentUUID&quot;:&quot;7f0a543f-0f4f-4d6c-b0c7-c8cb041be868&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4b2dae7a-c8a0-4dce-9abf-c585b5d30d2b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:27,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;e8ab7778-48d1-414b-884d-5e5c4a09147a&quot;,&quot;title&quot;:&quot;POST /processes/{process_sid}/tasks/{task_sid}/rules/update | reorder | delete &quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process POST /processes/{process_sid}/tasks/{task_sid}/rules/update | reorder | delete  core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/tasks/&#x27; + test_data.task_sid + &#x27;/rules/update/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(rule)\nsids.one = res.body.SID;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;47fee832-28c9-43c7-a991-b4664b98f30d&quot;,&quot;parentUUID&quot;:&quot;e8ab7778-48d1-414b-884d-5e5c4a09147a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;core service | reorder&quot;,&quot;fullTitle&quot;:&quot;Core Service Process POST /processes/{process_sid}/tasks/{task_sid}/rules/update | reorder | delete  core service | reorder&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let reorder = { \&quot;SID\&quot;: sids.two, \&quot;Ordinal\&quot;: 2, \&quot;ConditionType\&quot;: 1, \&quot;MatchGuid\&quot;: \&quot;\&quot;, \&quot;RecipientSID\&quot;: null, \&quot;DestinationAction\&quot;: \&quot;0\&quot; }\nlet res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/tasks/&#x27; + test_data.task_sid + &#x27;/rules/reorder/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(reorder)\n//console.log(res.body)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4c67e3b-a598-48d5-ba8e-ca4f3731daab&quot;,&quot;parentUUID&quot;:&quot;e8ab7778-48d1-414b-884d-5e5c4a09147a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;47fee832-28c9-43c7-a991-b4664b98f30d&quot;,&quot;a4c67e3b-a598-48d5-ba8e-ca4f3731daab&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:43,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;f7eb0e4f-06df-49d4-94e8-e0584e83bb54&quot;,&quot;title&quot;:&quot;Core Service processes/tasks&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()\nlet test_yml = await getTestConfig();\ntest_data = test_yml.data;\nrecipient = [{ \&quot;BaseObjectSID\&quot;: \&quot;\&quot;, \&quot;ContactType\&quot;: 2, \&quot;ReferenceObjectSID\&quot;: \&quot;\&quot;, \&quot;SID\&quot;: test_data.contact_sid }]&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;502c9c80-7e57-43ad-860e-1eff70a2a0fd&quot;,&quot;parentUUID&quot;:&quot;f7eb0e4f-06df-49d4-94e8-e0584e83bb54&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e7396688-3361-40ec-9791-a9af2095fe5d&quot;,&quot;title&quot;:&quot;GET {sid}&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {sid} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.task_sid)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f098ac5-a6c9-4472-93db-a0510fac6752&quot;,&quot;parentUUID&quot;:&quot;e7396688-3361-40ec-9791-a9af2095fe5d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0f098ac5-a6c9-4472-93db-a0510fac6752&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;78cc4f7f-0fe2-4fb7-b9c5-6d8d3b21d826&quot;,&quot;title&quot;:&quot;GET {task_sid}/copy&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/copy core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:239,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/processes/tasks/&#x27; + test_data.task_sid + &#x27;/copy&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            //console.log(res.body);\n            coreResult = res.body;\n            //console.log(res.body);\n            expect(res.status).to.equal(200);\n            expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9eb44164-0bc8-441e-bb82-ecdb37f673d2&quot;,&quot;parentUUID&quot;:&quot;78cc4f7f-0fe2-4fb7-b9c5-6d8d3b21d826&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9eb44164-0bc8-441e-bb82-ecdb37f673d2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:239,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;d936b6c1-6478-4d79-828f-4ecaf36fd47e&quot;,&quot;title&quot;:&quot;GET {task_sid}/notification&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/notification core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/notification&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63721e44-eac2-4023-a5aa-0651a2a6dd2c&quot;,&quot;parentUUID&quot;:&quot;d936b6c1-6478-4d79-828f-4ecaf36fd47e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;63721e44-eac2-4023-a5aa-0651a2a6dd2c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:26,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;7fe54aef-fb70-4110-acf9-f57541ba5090&quot;,&quot;title&quot;:&quot;GET {task_sid}/notification/restore&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/notification/restore core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:69,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/notification/restore&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ab1af7e-a6f4-4a19-ab28-c2da295a879d&quot;,&quot;parentUUID&quot;:&quot;7fe54aef-fb70-4110-acf9-f57541ba5090&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0ab1af7e-a6f4-4a19-ab28-c2da295a879d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:69,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;ef46e3ad-1e59-4267-979f-3b1528dd8073&quot;,&quot;title&quot;:&quot;GET {task_sid}/notification/{enabledisable}&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/notification/{enabledisable} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:30,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/notification/enabled&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc4d7470-4c06-490d-a9b4-931b31bdc652&quot;,&quot;parentUUID&quot;:&quot;ef46e3ad-1e59-4267-979f-3b1528dd8073&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bc4d7470-4c06-490d-a9b4-931b31bdc652&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:30,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;b39a1964-bbb2-4ccd-bba1-24139c1f1867&quot;,&quot;title&quot;:&quot;POST notification/save&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks POST notification/save core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:46,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/tasks/notification/save&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(notification)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26dbc6b0-0051-41d7-bc5a-671a59b3b7e3&quot;,&quot;parentUUID&quot;:&quot;b39a1964-bbb2-4ccd-bba1-24139c1f1867&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;26dbc6b0-0051-41d7-bc5a-671a59b3b7e3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:46,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;61bf88b5-6887-482e-b886-82f97625bb46&quot;,&quot;title&quot;:&quot;GET {task_sid}/notification/advancedsettings&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/notification/advancedsettings core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/notification/advancesettings&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = JSON.stringify(res.body);\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7db34e94-3dcc-455f-9ec4-52718dab2581&quot;,&quot;parentUUID&quot;:&quot;61bf88b5-6887-482e-b886-82f97625bb46&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7db34e94-3dcc-455f-9ec4-52718dab2581&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;a1879ccf-b18f-46ef-87b0-9addd8917c1f&quot;,&quot;title&quot;:&quot;GET {task_sid}/recipients&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/recipients core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:48,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipients/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c35fb88-a92d-4ab0-9e89-ac596075933a&quot;,&quot;parentUUID&quot;:&quot;a1879ccf-b18f-46ef-87b0-9addd8917c1f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3c35fb88-a92d-4ab0-9e89-ac596075933a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:48,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;a131fa73-8fc3-4efe-b2ba-ca9891e3c2dc&quot;,&quot;title&quot;:&quot;POST {task_sid}/recipients/add&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks POST {task_sid}/recipients/add core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:34,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipients/add&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(recipient);\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41dcd7a3-0062-4f22-ab66-e3e15a171068&quot;,&quot;parentUUID&quot;:&quot;a131fa73-8fc3-4efe-b2ba-ca9891e3c2dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;41dcd7a3-0062-4f22-ab66-e3e15a171068&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:34,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;275ee593-463d-49b1-abda-e0b6c645672d&quot;,&quot;title&quot;:&quot;POST {task_sid}/recipients/remove&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks POST {task_sid}/recipients/remove core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipients/remove&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(recipient);\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b906ee5a-28f3-4b31-b62f-bd5dbcb6318f&quot;,&quot;parentUUID&quot;:&quot;275ee593-463d-49b1-abda-e0b6c645672d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b906ee5a-28f3-4b31-b62f-bd5dbcb6318f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:32,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;03a3ced9-c2bf-4409-8fe3-fb1a8e6ea916&quot;,&quot;title&quot;:&quot;GET {task_sid}/recipsettings&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/recipsettings core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipsettings/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = JSON.stringify(res.body);\nexpect(res.status).to.equal(200);\n// expect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;874b4ace-8ca4-41ca-a568-ca464b2fd906&quot;,&quot;parentUUID&quot;:&quot;03a3ced9-c2bf-4409-8fe3-fb1a8e6ea916&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;874b4ace-8ca4-41ca-a568-ca464b2fd906&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;f7d24e6b-1488-47bf-a672-7699e0922cf0&quot;,&quot;title&quot;:&quot;GET task_sid}/recipients/dynamic&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET task_sid}/recipients/dynamic core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipients/dynamic/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = JSON.stringify(res.body);\nexpect(res.status).to.equal(200);\nexpect(res.body.TotalItemCnt).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;773987e9-1dc0-4bd5-842f-a41fbe16115e&quot;,&quot;parentUUID&quot;:&quot;f7d24e6b-1488-47bf-a672-7699e0922cf0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;773987e9-1dc0-4bd5-842f-a41fbe16115e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:33,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;ddb1871e-feae-426c-beb7-fff8a44c59b2&quot;,&quot;title&quot;:&quot;Core Service systemmessages&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ab1e25e-2d2a-4299-b49b-6cffb15a5f51&quot;,&quot;parentUUID&quot;:&quot;ddb1871e-feae-426c-beb7-fff8a44c59b2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;06fd58c7-8052-401c-a1bd-54d2512803d6&quot;,&quot;title&quot;:&quot;POST /systemmessages/save&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should save a systemmessage&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages POST /systemmessages/save it should save a systemmessage&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:78,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .post(&#x27;/systemmessages/save/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send(testMsg)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\n\n// verify systemMessage is in the list\nres = await chai.request(newUrlBase)\n      .get(&#x27;/systemmessages/list/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst idx = res.body.Items.findIndex(item =&gt; item.MessageBody == testMsg.MessageBody);\nexpect(idx).to.be.greaterThan(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;099578ff-f326-4ba6-aa75-226693560016&quot;,&quot;parentUUID&quot;:&quot;06fd58c7-8052-401c-a1bd-54d2512803d6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;099578ff-f326-4ba6-aa75-226693560016&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:78,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;cc63b2b9-face-4180-9588-7120ec70053c&quot;,&quot;title&quot;:&quot;GET /systemmessages/list&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all systemmessages&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages GET /systemmessages/list it should GET all systemmessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .get(&#x27;/systemmessages/list/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n  \ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;962dd11b-b38a-4ba5-a178-6d4c606a9c39&quot;,&quot;parentUUID&quot;:&quot;cc63b2b9-face-4180-9588-7120ec70053c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;962dd11b-b38a-4ba5-a178-6d4c606a9c39&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;390d8a2c-3f1f-43a7-a0d5-466554cd4b66&quot;,&quot;title&quot;:&quot;GET /systemmessages/active/list&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET active systemmessages&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages GET /systemmessages/active/list it should GET active systemmessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .get(&#x27;/systemmessages/active/list/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n  \ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;37dee102-6ecf-4c39-9360-89cdfa2d6176&quot;,&quot;parentUUID&quot;:&quot;390d8a2c-3f1f-43a7-a0d5-466554cd4b66&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;37dee102-6ecf-4c39-9360-89cdfa2d6176&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;20f37931-df64-49ea-ae2a-cb253d941cdc&quot;,&quot;title&quot;:&quot;/systemmessages/{sid}}&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET system message by SID&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages /systemmessages/{sid}} it should GET system message by SID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:57,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n             .get(&#x27;/systemmessages/list/script/&#x27;)\n             .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n       \n             expect(res.status).to.equal(200);\n             expect(res.body.Items).to.exist;\n             const testSystemMsgSID = res.body.Items[0].SID;\n             res = await chai.request(newUrlBase)\n             .get(`/systemmessages/${testSystemMsgSID}/script/`)\n             .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n             expect(res.status).to.equal(200);\n             expect(res.body.SID).to.equal(testSystemMsgSID);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99308a4a-a2d8-4f06-b4d4-589d8fe952a9&quot;,&quot;parentUUID&quot;:&quot;20f37931-df64-49ea-ae2a-cb253d941cdc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;99308a4a-a2d8-4f06-b4d4-589d8fe952a9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:57,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;24d04eba-2f50-4bd4-8081-a5edfb6ac42f&quot;,&quot;title&quot;:&quot;GET /systemmessages/delete&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE system message&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages GET /systemmessages/delete it should DELETE system message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:66,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/systemmessages/list/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n      \nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst testSystemMsgSID = res.body.Items[0].SID;\nres = await chai.request(newUrlBase)\n  .post(&#x27;/systemmessages/delete/script/&#x27;) \n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n  .send([testSystemMsgSID])\n        \nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\nexpect(res.text).to.equal(&#x27;1&#x27;);\n        \n// verify that system message is not in the list anymore\nres = await chai.request(newUrlBase)\n      .get(&#x27;/systemmessages/list/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst idx = res.body.Items.findIndex(item =&gt; item.SID == testSystemMsgSID);\nexpect(idx).to.equal(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6891fdb4-dd3b-4129-8532-d92ad422af93&quot;,&quot;parentUUID&quot;:&quot;24d04eba-2f50-4bd4-8081-a5edfb6ac42f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6891fdb4-dd3b-4129-8532-d92ad422af93&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:66,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;4b345ffa-7065-4783-8103-e4d77101c4c1&quot;,&quot;title&quot;:&quot;Core Service System Process&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/systemProcess.test.js&quot;,&quot;file&quot;:&quot;/test/systemProcess.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service System Process \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2bf1bc34-f048-4fa3-9c24-35213e2358ea&quot;,&quot;parentUUID&quot;:&quot;4b345ffa-7065-4783-8103-e4d77101c4c1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;12a85041-d4d5-4708-9477-17514fda5da9&quot;,&quot;title&quot;:&quot;GET S/SystemProcess/list&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/systemProcess.test.js&quot;,&quot;file&quot;:&quot;/test/systemProcess.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should save a systemmessage&quot;,&quot;fullTitle&quot;:&quot;Core Service System Process GET S/SystemProcess/list it should save a systemmessage&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:59,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/SystemProcess/list&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3353d2dc-e4f6-4af7-8c92-693eee73d900&quot;,&quot;parentUUID&quot;:&quot;12a85041-d4d5-4708-9477-17514fda5da9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3353d2dc-e4f6-4af7-8c92-693eee73d900&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:59,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;65f30a97-f60f-4ff8-8acf-2c0780272502&quot;,&quot;title&quot;:&quot;Core Service system Settings&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/systemSettings.test.js&quot;,&quot;file&quot;:&quot;/test/systemSettings.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service system Settings \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9dd84752-74cd-48fb-a103-65ee81179136&quot;,&quot;parentUUID&quot;:&quot;65f30a97-f60f-4ff8-8acf-2c0780272502&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5a974858-2d53-43b7-9d62-8dad37518c39&quot;,&quot;title&quot;:&quot;GET /systemsettings/list&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/systemSettings.test.js&quot;,&quot;file&quot;:&quot;/test/systemSettings.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service system Settings GET /systemsettings/list core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/systemsettings/list/script/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n// expect(res.body.InstanceSID).to.exist\ncoreResult = res.body;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;21ac1ab4-65ad-4392-bfa6-55da4cd4feaf&quot;,&quot;parentUUID&quot;:&quot;5a974858-2d53-43b7-9d62-8dad37518c39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;21ac1ab4-65ad-4392-bfa6-55da4cd4feaf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:29,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;36d82b6e-54e5-40ae-b84f-0f9269e3926e&quot;,&quot;title&quot;:&quot;Core Service Tabs&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/tabs.test.js&quot;,&quot;file&quot;:&quot;/test/tabs.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service Tabs \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c01b6fdc-4042-4007-b5c5-829a922bdf36&quot;,&quot;parentUUID&quot;:&quot;36d82b6e-54e5-40ae-b84f-0f9269e3926e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;799d50a6-0a5e-4b2d-9146-bf0b47f65166&quot;,&quot;title&quot;:&quot;GET {sid}&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/tabs.test.js&quot;,&quot;file&quot;:&quot;/test/tabs.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service Tabs GET {sid} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:61,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/tabs/5ffbf397-8b3a-4d06-a773-58158e39d46f/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Banner).to.exist\ncoreResult = res.body;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;32e949f9-4c09-4445-93e8-b3832c4c9e1a&quot;,&quot;parentUUID&quot;:&quot;799d50a6-0a5e-4b2d-9146-bf0b47f65166&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;32e949f9-4c09-4445-93e8-b3832c4c9e1a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:61,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;7265340f-d76f-4aa7-ae35-87ab61475daa&quot;,&quot;title&quot;:&quot;GET {sid}/delete&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/tabs.test.js&quot;,&quot;file&quot;:&quot;/test/tabs.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service &quot;,&quot;fullTitle&quot;:&quot;Core Service Tabs GET {sid}/delete core-service &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/tabs/5ffbf397-8b3a-4d06-a773-58158e39d46f/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Banner).to.exist\ncoreResult = res.body;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6282b7f1-0082-467b-b8fd-90832e5792bb&quot;,&quot;parentUUID&quot;:&quot;7265340f-d76f-4aa7-ae35-87ab61475daa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6282b7f1-0082-467b-b8fd-90832e5792bb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;58e5ed19-d18e-4329-8723-fe9ae1a05404&quot;,&quot;title&quot;:&quot;Core Service Utilities&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/utilities.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service Utilities \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b55bbb58-8848-4c42-969d-0fad3b487588&quot;,&quot;parentUUID&quot;:&quot;58e5ed19-d18e-4329-8723-fe9ae1a05404&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a1398aff-c282-4991-8e23-c28f861abacb&quot;,&quot;title&quot;:&quot;locale&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Utilities locale core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/Utilities/locales/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            //console.log(res.body);\n            coreResult = res.body;\n            expect(res.status).to.equal(200);\n            // expect(res.text).to.exist;\n            // expect(res.text).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5632d643-38c6-4210-a70c-53ad484b8de3&quot;,&quot;parentUUID&quot;:&quot;a1398aff-c282-4991-8e23-c28f861abacb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5632d643-38c6-4210-a70c-53ad484b8de3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;7e17f2a8-f6f6-45c7-84c8-737869af1268&quot;,&quot;title&quot;:&quot;GET /Utilities/timezone&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/core-service/test/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Utilities GET /Utilities/timezone core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/Utilities/timezone&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body[0]).to.be.an(&#x27;array&#x27;).that.does.include(&#x27;Etc/GMT+12&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7da19498-cd08-48f3-bc4f-c50bcb7d9b89&quot;,&quot;parentUUID&quot;:&quot;7e17f2a8-f6f6-45c7-84c8-737869af1268&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7da19498-cd08-48f3-bc4f-c50bcb7d9b89&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;f81c32db-a474-42ba-8a9e-7f8bd852a4be&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7fb5ef70-16c2-4b9d-ad64-d1e27edac708&quot;,&quot;title&quot;:&quot;Integrify Libs JWT Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9b53fb2-9f54-43e6-ad63-ad354bf50f6c&quot;,&quot;parentUUID&quot;:&quot;7fb5ef70-16c2-4b9d-ad64-d1e27edac708&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f4a2bd6b-6814-4245-b147-ee835ce93678&quot;,&quot;title&quot;:&quot;getSystemToken&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a system token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests getSystemToken should return a system token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nlet token = await jwt.getSystemToken(process.env.INTEGRIFY_ENV_TOKEN, tenant)\nexpect(token).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;494dc1a2-2c75-4320-9a50-2c9c10c08be8&quot;,&quot;parentUUID&quot;:&quot;f4a2bd6b-6814-4245-b147-ee835ce93678&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;494dc1a2-2c75-4320-9a50-2c9c10c08be8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3d153cbe-e5ff-40dd-9156-067d9c5cc680&quot;,&quot;title&quot;:&quot;createRefreshToken&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a refresh token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests createRefreshToken should return a refresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet exists = await redis.zrankAsync(tenant + \&quot;.refreshTokens\&quot;, refreshToken)\nexpect(refreshToken).to.exist;\nexpect(exists !== null).to.be.true&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c951ec5-c574-4361-b2a6-8f327094a726&quot;,&quot;parentUUID&quot;:&quot;3d153cbe-e5ff-40dd-9156-067d9c5cc680&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6c951ec5-c574-4361-b2a6-8f327094a726&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ffae77c1-06d9-49c6-b93a-a9fe4018e35a&quot;,&quot;title&quot;:&quot;verifyRefreshToken&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true for the non-expired token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests verifyRefreshToken should return true for the non-expired token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet exists = await jwt.verifyRefreshToken(tenant, refreshToken, options)\nexpect(exists).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c646baf-00ab-4932-904d-a6e77c5fc126&quot;,&quot;parentUUID&quot;:&quot;ffae77c1-06d9-49c6-b93a-a9fe4018e35a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false for the expired token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests verifyRefreshToken should return false for the expired token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5006,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\nlet refreshToken = await jwt.createRefreshToken(tenant, options)\nawait delay(5000);\nlet exists = await jwt.verifyRefreshToken(tenant, refreshToken, options)\nexpect(exists).to.be.false\nexists = await redis.zrankAsync(tenant + \&quot;.refreshTokens\&quot;, refreshToken)\nexpect(exists === null).to.be.true&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9929d480-d1e8-4de3-bdf0-41802cec3a4a&quot;,&quot;parentUUID&quot;:&quot;ffae77c1-06d9-49c6-b93a-a9fe4018e35a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8c646baf-00ab-4932-904d-a6e77c5fc126&quot;,&quot;9929d480-d1e8-4de3-bdf0-41802cec3a4a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5008,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;12af3ae0-e5e4-4460-9cc3-4311df875b58&quot;,&quot;title&quot;:&quot;issueJwt&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a JWT&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests issueJwt should return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\noptions.expiresInAmount = 15\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\n//let exists = await jwt.verifyRefreshToken(tenant, refreshToken, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\noptions.expiresInAmount = 5\nexpect(token).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b148c525-58e6-4281-9abd-223c60a0fa5c&quot;,&quot;parentUUID&quot;:&quot;12af3ae0-e5e4-4460-9cc3-4311df875b58&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b148c525-58e6-4281-9abd-223c60a0fa5c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e354a5d6-d436-48ef-a3fb-2613dcf1e364&quot;,&quot;title&quot;:&quot;verifyJwt&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a JWT&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests verifyJwt should return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\nlet verified = jwt.verifyJwt(token, options);\nexpect(verified).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61859f1c-347e-4a71-b2f2-956284eb8b6c&quot;,&quot;parentUUID&quot;:&quot;e354a5d6-d436-48ef-a3fb-2613dcf1e364&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail for an expired JWT&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests verifyJwt should fail for an expired JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5010,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\nawait delay(5000);\nlet verified, error;\ntry {\n   verified = await jwt.verifyJwt(token, options)\n} catch(e) {\n    error = e;\n}\nexpect(error).to.exist\nexpect(error.name).to.equal(\&quot;TokenExpiredError\&quot;)\nexpect(verified).to.not.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4116d17-0797-4bb6-99da-58c14eeda9c2&quot;,&quot;parentUUID&quot;:&quot;e354a5d6-d436-48ef-a3fb-2613dcf1e364&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;61859f1c-347e-4a71-b2f2-956284eb8b6c&quot;,&quot;e4116d17-0797-4bb6-99da-58c14eeda9c2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5017,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fbe307c5-f6d3-4f05-a903-fa08dc72ea78&quot;,&quot;title&quot;:&quot;renewJwt&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a new JWT using a valid refresh token and an expired token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests renewJwt should return a new JWT using a valid refresh token and an expired token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3017,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\noptions.expiresInAmount = 5;\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\nawait delay(3000); //let the token JWT time out\nlet error;\ntry {\n    verified = await jwt.verifyJwt(token, options)\n } catch(e) {\n     error = e;\n}\nexpect(error).to.exist\nexpect(error.name).to.equal(\&quot;TokenExpiredError\&quot;)\ntoken = await jwt.renewJwt(token,refreshToken, options)\nexpect(token).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3f06676-1bed-4071-b666-aabe8aacd144&quot;,&quot;parentUUID&quot;:&quot;fbe307c5-f6d3-4f05-a903-fa08dc72ea78&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to return a new JWT using a invalid refresh token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests renewJwt should fail to return a new JWT using a invalid refresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5016,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\noptions.expiresInAmount = 2;\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\nawait delay(5000); //let the token JWT time out\nlet error;\ntry {\n    verified = await jwt.verifyJwt(token, options)\n } catch(e) {\n     error = e;\n}\nexpect(error).to.exist\nexpect(error.name).to.equal(\&quot;TokenExpiredError\&quot;)\ntry {\n    token = await jwt.renewJwt(token,refreshToken, options)\n} catch(e) {\n    error = e\n}\nexpect(error).to.exist\nexpect(error.name).to.equal(\&quot;TokenExpiredError\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;62b8b61b-13ea-47a0-8cac-375542044296&quot;,&quot;parentUUID&quot;:&quot;fbe307c5-f6d3-4f05-a903-fa08dc72ea78&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a3f06676-1bed-4071-b666-aabe8aacd144&quot;,&quot;62b8b61b-13ea-47a0-8cac-375542044296&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8033,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ec177ee0-958c-4b65-83ee-d7423ca9b924&quot;,&quot;title&quot;:&quot;reIssueJwt&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a new JWT using a valid refresh token and an Contact&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests reIssueJwt should return a new JWT using a valid refresh token and an Contact&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\noptions.expiresInAmount = 5;\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\ntoken = await jwt.reIssueJwt(Contact,refreshToken, options)\nexpect(token).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f226f535-88f0-4911-ac57-14a5d57b7df7&quot;,&quot;parentUUID&quot;:&quot;ec177ee0-958c-4b65-83ee-d7423ca9b924&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f226f535-88f0-4911-ac57-14a5d57b7df7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;18a50e79-609c-4dc3-9d2c-7639c06df8ff&quot;,&quot;title&quot;:&quot;Integrify Libs Config Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/config/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5cbfc49f-1a99-4ae0-85ec-6b24a6c18da7&quot;,&quot;title&quot;:&quot;Config&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/config/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config/config.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Config Tests Config \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7da39b9-db53-4a19-a370-d69231a26b51&quot;,&quot;parentUUID&quot;:&quot;5cbfc49f-1a99-4ae0-85ec-6b24a6c18da7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a728bf4a-04e8-4e5a-9e18-2974a73dfc6d&quot;,&quot;title&quot;:&quot;get a config from redis&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/config/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should have config.mongo&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Config Tests Config get a config from redis should have config.mongo&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(config.mongo).to.exist;\n                //expect(true).to.equal(true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6895b14d-4a4e-41a4-9868-12cd9b10fa75&quot;,&quot;parentUUID&quot;:&quot;a728bf4a-04e8-4e5a-9e18-2974a73dfc6d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6895b14d-4a4e-41a4-9868-12cd9b10fa75&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;dfdae52c-3deb-4a83-ad00-d7d665da06a2&quot;,&quot;title&quot;:&quot;log the latest git commit&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/config/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the lates git commit&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Config Tests Config log the latest git commit should return the lates git commit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let commit = Config.logRunningGitCommit(&#x27;integrify-libs&#x27;, true);\nexpect(commit).to.exist;\n//expect(true).to.equal(true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f968a9a-d585-48b8-aa88-d0d0367e6c64&quot;,&quot;parentUUID&quot;:&quot;dfdae52c-3deb-4a83-ad00-d7d665da06a2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0f968a9a-d585-48b8-aa88-d0d0367e6c64&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8495f00a-2dbc-46a0-99d1-e4902441b914&quot;,&quot;title&quot;:&quot;Integrify Libs Logger Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/logger/logger.test.js&quot;,&quot;file&quot;:&quot;/test/integration/logger/logger.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3aafda14-0898-4d17-8bbe-c37753380938&quot;,&quot;title&quot;:&quot;Logger&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/logger/logger.test.js&quot;,&quot;file&quot;:&quot;/test/integration/logger/logger.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Logger Tests Logger \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nconfig = config.test;\nthis.timeout(105000);\n//let deletes = await redis.delAsync([`${session.tenant}.permissions.${session.user_sid}`]);\n//cnsole.log(deletes)\n//process.env.DEBUG=\&quot;knex:query\&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1987c75-f4a9-442e-a54e-7b9431dda496&quot;,&quot;parentUUID&quot;:&quot;3aafda14-0898-4d17-8bbe-c37753380938&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2503b4a8-2844-4e59-8441-4f567c59a5b0&quot;,&quot;title&quot;:&quot;info&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/logger/logger.test.js&quot;,&quot;file&quot;:&quot;/test/integration/logger/logger.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should connect log a message&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Logger Tests Logger info should connect log a message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;logger.info(config.tenantOne.tenantId);\n  \nexpect(logger).to.exist;\n              \n//expect(true).to.equal(true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd21318a-c938-4713-942f-d967579bdafe&quot;,&quot;parentUUID&quot;:&quot;2503b4a8-2844-4e59-8441-4f567c59a5b0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fd21318a-c938-4713-942f-d967579bdafe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1fd652f6-7fd5-468f-97bc-5e06ece863cb&quot;,&quot;title&quot;:&quot;Integrify Libs Parse JWT Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/middleware/parseJWT.test.js&quot;,&quot;file&quot;:&quot;/test/integration/middleware/parseJWT.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Parse JWT Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);        config = await Config.getConfig()\nContact = {\n    contactSid: \&quot;1234\&quot;,\n    userName: \&quot;testuser\&quot;,\n    tenant: config.test.tenantOne.tenantId,\n    email: \&quot;test@test.com\&quot;,\n    name: \&quot;Test User\&quot;\n}\nrefreshTokenPayload = {userName: Contact.userName, contactSid: Contact.contactSid}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d9502bfc-846d-4c35-96e1-1a9d2535a697&quot;,&quot;parentUUID&quot;:&quot;1fd652f6-7fd5-468f-97bc-5e06ece863cb&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0b4da846-1f4b-4d9d-aba2-055809ffc7b4&quot;,&quot;title&quot;:&quot;parse token&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/middleware/parseJWT.test.js&quot;,&quot;file&quot;:&quot;/test/integration/middleware/parseJWT.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return extract data from a token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Parse JWT Tests parse token should return extract data from a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload)\n\ntoken = jsonwebtoken.sign(Contact, config.jwtSecret, {\&quot;audience\&quot;: config.test.tenantOne.tenantId});\nlet req = {headers: {authorization: \&quot;Bearer \&quot; + token}, cookies: {integrifyRefreshToken: refreshToken}}\nawait parseJWT(req, {status:200}, function(){})\nexpect(req.oauth.profile).to.exist;\nexpect(req.oauth.profile.sid).to.equal(\&quot;1234\&quot;);\nexpect(req.oauth.profile.user_name).to.equal(\&quot;testuser\&quot;);\nexpect(req.oauth.tenant).to.equal(config.test.tenantOne.tenantId)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1350f31-c920-417e-b1ef-0d67095a6af1&quot;,&quot;parentUUID&quot;:&quot;0b4da846-1f4b-4d9d-aba2-055809ffc7b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f1350f31-c920-417e-b1ef-0d67095a6af1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000},{&quot;uuid&quot;:&quot;fab48c77-b29e-4fbe-8ad8-8461df291fed&quot;,&quot;title&quot;:&quot;auto refresh and parse token&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/middleware/parseJWT.test.js&quot;,&quot;file&quot;:&quot;/test/integration/middleware/parseJWT.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return extract data from a token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Parse JWT Tests auto refresh and parse token should return extract data from a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20031,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let refreshToken = await jwt.createRefreshToken(Contact.tenant, refreshTokenPayload)\n\ntoken = jsonwebtoken.sign(Contact, config.jwtSecret, {\&quot;audience\&quot;: Contact.tenant, expiresIn:1});\n           \nawait delay(20000)\nlet req = {headers: {authorization: \&quot;Bearer \&quot; + token}, cookies: {integrifyRefreshToken: refreshToken}}\n          \nlet mockRes = await mocks.mockResponse();\n\nawait parseJWT(req, mockRes, function(){})\nexpect(req.oauth.profile).to.exist;\nexpect(req.oauth.profile.sid).to.equal(\&quot;1234\&quot;);\nexpect(req.oauth.profile.user_name).to.equal(\&quot;testuser\&quot;);\nexpect(req.oauth.tenant).to.equal(config.test.tenantOne.tenantId)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d31b7b10-493f-4658-9772-963a8b9d1f5b&quot;,&quot;parentUUID&quot;:&quot;fab48c77-b29e-4fbe-8ad8-8461df291fed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d31b7b10-493f-4658-9772-963a8b9d1f5b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20031,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000},{&quot;uuid&quot;:&quot;6a1a0348-9209-434d-a747-623bf3341faf&quot;,&quot;title&quot;:&quot;use system token&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/middleware/parseJWT.test.js&quot;,&quot;file&quot;:&quot;/test/integration/middleware/parseJWT.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return extract data from a token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Parse JWT Tests use system token should return extract data from a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let req = {headers: {\&quot;integrify-system-token\&quot;: config.test.tenantOne.tenantId + \&quot; \&quot; +  process.env.INTEGRIFY_ENV_TOKEN}}\nawait parseJWT(req, {status:200}, function(){})\nexpect(req.oauth.profile).to.exist;\nexpect(req.oauth.profile.sid).to.equal(\&quot;d8c469c3-f781-4179-a09c-6d148885fb30\&quot;);\nexpect(req.oauth.profile.user_name).to.equal(\&quot;Integrify\&quot;);\nexpect(req.oauth.tenant).to.equal(config.test.tenantOne.tenantId)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a7a2a9f-239f-44b9-9e0b-2f1d68379d1d&quot;,&quot;parentUUID&quot;:&quot;6a1a0348-9209-434d-a747-623bf3341faf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1a7a2a9f-239f-44b9-9e0b-2f1d68379d1d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000},{&quot;uuid&quot;:&quot;783df1b5-110a-49eb-b59c-971a6e683e88&quot;,&quot;title&quot;:&quot;Integrify Libs Mongeese Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/mongeese/db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/mongeese/db.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;903321f0-e960-418a-b15e-eb35116a2cb3&quot;,&quot;title&quot;:&quot;Mongeese&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/mongeese/db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/mongeese/db.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Mongeese Tests Mongeese \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nconsole.log(config)\nconfig = config.test;\nthis.timeout(105000);\n//let deletes = await redis.delAsync([`${session.tenant}.permissions.${session.user_sid}`]);\n//cnsole.log(deletes)\n//process.env.DEBUG=\&quot;knex:query\&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2fcc487c-7d8b-474d-9285-a07966a5943d&quot;,&quot;parentUUID&quot;:&quot;903321f0-e960-418a-b15e-eb35116a2cb3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ade08435-29f7-49dc-bef3-ab18504e1da4&quot;,&quot;title&quot;:&quot;mongoConn&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/mongeese/db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/mongeese/db.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should connect to mongo based on a tenant id&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Mongeese Tests Mongeese mongoConn should connect to mongo based on a tenant id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const tenantId = await config.tenantOne.tenantId;\nvar db = await mongeese.getConn(tenantId);\n    \nexpect(db).to.exist;\nexpect(db.name).to.equal(tenantId);\nexpect(db.readyState).to.equal(2);\n//expect(true).to.equal(true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;51925b1e-53c3-4eeb-9976-2a8dec124a86&quot;,&quot;parentUUID&quot;:&quot;ade08435-29f7-49dc-bef3-ab18504e1da4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;51925b1e-53c3-4eeb-9976-2a8dec124a86&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:26,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;64d4e75f-86ac-42a6-aef4-0194d22dca02&quot;,&quot;title&quot;:&quot;Integrify Libs Permissions Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/permissions/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/permissions/permissions.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\nlet config = await Config.getConfig();\nconfig = config.test;\nsession = {user_sid: config.tenantOne.adminUser.sid.toLowerCase(), user_name: config.tenantOne.adminUser.userName, tenant: config.tenantOne.tenantId }\nlet deletes = await redis.delAsync([`${session.tenant}.permissions.${session.user_sid}`]);\nconsole.log(deletes)\n//process.env.DEBUG=\&quot;knex:query\&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57b8116e-a723-44b0-8bc8-d33d52632728&quot;,&quot;parentUUID&quot;:&quot;64d4e75f-86ac-42a6-aef4-0194d22dca02&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await redis.delAsync([`${session.tenant}.permissions.${session.user_sid}`]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53380c10-1229-4def-a23b-9ad1f4ecb3d6&quot;,&quot;parentUUID&quot;:&quot;64d4e75f-86ac-42a6-aef4-0194d22dca02&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;35a6053e-7379-47b7-aae4-fde36b02f6a8&quot;,&quot;title&quot;:&quot;currentUserPermssions&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/permissions/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/permissions/permissions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should cache and return the current users permssiosn based on a passed-in session&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests currentUserPermssions should cache and return the current users permssiosn based on a passed-in session&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:251,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nlet perms = await permissions.currentUserPermissions(session);\nlet cached =  await redis.getAsync([`${session.tenant}.permissions.${session.user_sid}`]);\ncached = JSON.parse(cached)\nexpect(perms).length.to.be.gt(0);\nexpect(cached.length).to.equal(perms.length)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96a6834e-540c-49b4-a473-db499596cf67&quot;,&quot;parentUUID&quot;:&quot;35a6053e-7379-47b7-aae4-fde36b02f6a8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;96a6834e-540c-49b4-a473-db499596cf67&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:251,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6570166e-26e1-4631-971a-78ce854fec96&quot;,&quot;title&quot;:&quot;isSysAdmin&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/permissions/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/permissions/permissions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should cache and return the current users permssiosn based on a passed-in session&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests isSysAdmin should cache and return the current users permssiosn based on a passed-in session&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nlet perms = await permissions.isSysAdmin(session);\nexpect(perms).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e556ec23-c171-4bba-b025-9b2ebaced4f6&quot;,&quot;parentUUID&quot;:&quot;6570166e-26e1-4631-971a-78ce854fec96&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e556ec23-c171-4bba-b025-9b2ebaced4f6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9c926633-3eb5-4f24-8308-b32c07db2af9&quot;,&quot;title&quot;:&quot;hasPermissions&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/permissions/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/permissions/permissions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true for sysAdmin permissions&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return true for sysAdmin permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.sysAdmin);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    \&quot;irrelevantObjectGuid\&quot;,\n    \&quot;irrelevantCategoryGuid\&quot;, \&quot;irrelevantPublishStatus\&quot;);\nexpect(hasPerms).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2dc8ea42-b614-40a9-9cf1-0353c58289d4&quot;,&quot;parentUUID&quot;:&quot;9c926633-3eb5-4f24-8308-b32c07db2af9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return true for System scoped permissions&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return true for System scoped permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.systemScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    \&quot;irrelevantObjectGuid\&quot;,\n    \&quot;irrelevantCategoryGuid\&quot;,\n    \&quot;irrelevantPublishStatus\&quot;);\nexpect(hasPerms).to.be.true;\nlet perms = await permissions.isSysAdmin(session);\nexpect(perms).to.be.undefined&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;345c8913-a0c1-4e6b-b4ee-da4c6dc8140a&quot;,&quot;parentUUID&quot;:&quot;9c926633-3eb5-4f24-8308-b32c07db2af9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return true for category scoped permissions&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return true for category scoped permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.categoryScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    \&quot;irrelevantObjectGuid\&quot;,\n    mocks.categoryScoped[0].ownerSid,\n    mocks.categoryScoped[0].publishStatus);\nexpect(hasPerms).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e570935-4063-4764-80fd-df2d2dc1ba83&quot;,&quot;parentUUID&quot;:&quot;9c926633-3eb5-4f24-8308-b32c07db2af9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return true for Object scoped permissions&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return true for Object scoped permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.objectScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    mocks.objectScoped[0].ownerSid,\n    \&quot;irrelevantCategoryGuid\&quot;,\n    mocks.categoryScoped[0].publishStatus);\nexpect(hasPerms).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9fbc9894-3197-4bc5-81f2-d0a4ee6abefb&quot;,&quot;parentUUID&quot;:&quot;9c926633-3eb5-4f24-8308-b32c07db2af9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false for Object scoped permissions with wrong publish status&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return false for Object scoped permissions with wrong publish status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.objectScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    mocks.objectScoped[0].ownerSid,\n    \&quot;irrelevantCategoryGuid\&quot;,\n    \&quot;production\&quot;);\nexpect(hasPerms).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76f4ad43-e6ae-4016-968e-cdc505f67d4f&quot;,&quot;parentUUID&quot;:&quot;9c926633-3eb5-4f24-8308-b32c07db2af9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false for bogus permission type&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return false for bogus permission type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.objectScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edizt&#x27;,\n    mocks.objectScoped[0].ownerSid,\n    \&quot;irrelevantCategoryGuid\&quot;,\n    mocks.categoryScoped[0].publishStatus);\nexpect(hasPerms).to.be.false;\nhasPerms = await permissions.hasPermissions(session,\n    &#x27;holiday&#x27;,\n    &#x27;viewconfig&#x27;);\nexpect(hasPerms).to.be.false&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cef249d6-e6d1-48cf-a3b9-159084a3d720&quot;,&quot;parentUUID&quot;:&quot;9c926633-3eb5-4f24-8308-b32c07db2af9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2dc8ea42-b614-40a9-9cf1-0353c58289d4&quot;,&quot;345c8913-a0c1-4e6b-b4ee-da4c6dc8140a&quot;,&quot;3e570935-4063-4764-80fd-df2d2dc1ba83&quot;,&quot;9fbc9894-3197-4bc5-81f2-d0a4ee6abefb&quot;,&quot;76f4ad43-e6ae-4016-968e-cdc505f67d4f&quot;,&quot;cef249d6-e6d1-48cf-a3b9-159084a3d720&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;076ee540-3961-41fa-9938-acea4e6b69b8&quot;,&quot;title&quot;:&quot;Integrify Libs Contact Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/sqldb/contacts.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/contacts.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;89ed717c-5cfb-4eb3-ad11-c4f23ff8c8f2&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/sqldb/contacts.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/contacts.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig();\nuser = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d140f8c9-0fd4-49fa-aa04-f3f429b02ae1&quot;,&quot;parentUUID&quot;:&quot;89ed717c-5cfb-4eb3-ad11-c4f23ff8c8f2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should getContact&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should getContact&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nconst ContactModel = await model.getModel(config.test.tenantOne.tenantId, &#x27;Contact&#x27;)\n//console.dir(ContactModel)\nlet results = await ContactModel.query()\n//console.log(results)\nexpect(results.length).to.be.gt(0)\nlet sampleContactGuid = results[0].contactGuid\nlet contactController = new ContactController(config.test.tenantOne)\nconst Contact = await contactController.getContact(sampleContactGuid);\nexpect(Contact).to.exist;\nexpect(Contact.contactGuid).equal(sampleContactGuid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d71b88e-80f8-445a-af0a-e8e21d5bd2d2&quot;,&quot;parentUUID&quot;:&quot;89ed717c-5cfb-4eb3-ad11-c4f23ff8c8f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getContactByUserName&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should getContactByUserName&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nlet sampleUserName = user.userName\nlet contactController = new ContactController(config.test.tenantOne)\nconst Contact = await contactController.getContactByUserName(sampleUserName);\nexpect(Contact).to.exist;\nexpect(Contact.userName).equal(sampleUserName)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97a9cc0c-8025-4eaa-bf04-0f997f79b38f&quot;,&quot;parentUUID&quot;:&quot;89ed717c-5cfb-4eb3-ad11-c4f23ff8c8f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should searchContacts&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should searchContacts&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne)\n            let Contacts = await contactController.searchContacts({&#x27;auth.userName&#x27;: &#x27;iApprov&#x27;, firstName: &#x27;Sys&#x27;, lastName: &#x27;S&#x27;});\n            expect(Contacts[0]).to.exist;\n            expect(Contacts[0].userName).equal(&#x27;iApprove&#x27;)\n            Contacts = await contactController.searchContacts({&#x27;auth.userName&#x27;: &#x27;iApprove&#x27;});\n            let Contact = Contacts[0]\n            expect(Contact).to.exist;\n            expect(Contact.userName).equal(&#x27;iApprove&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cdc1e005-cd9e-4f30-9f9d-06fb4067c094&quot;,&quot;parentUUID&quot;:&quot;89ed717c-5cfb-4eb3-ad11-c4f23ff8c8f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should dbAuthContact&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should dbAuthContact&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:97,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\n            const Contact = await contactController.dbAuthContact(user.userName, user.password)\n            expect(Contact).to.exist;\n            expect(Contact.token).to.exist;\n            expect(Contact.refreshToken).to.exist;\n            expect(Contact).to.have.property(&#x27;passwordResetDate&#x27;);\n            expect(Contact.userName).equal(user.userName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b6d06d1-115a-48b2-bb55-6c91ada7c754&quot;,&quot;parentUUID&quot;:&quot;89ed717c-5cfb-4eb3-ad11-c4f23ff8c8f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getGroupSids&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should getGroupSids&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:84,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\n            const Contact = await contactController.dbAuthContact(user.userName, user.password)\n            expect(Contact).to.exist;\n            let groupSids = await contactController.getGroupSids(Contact.contactSid)\n            expect(groupSids.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;950e4e9d-885c-4459-8521-3d32bd6df859&quot;,&quot;parentUUID&quot;:&quot;89ed717c-5cfb-4eb3-ad11-c4f23ff8c8f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getAccountsByEmail&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should getAccountsByEmail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\nlet Contacts = await contactController.getAccountsByEmail(config.test.tenantOne.adminUser.email);\nexpect(Contacts.length).to.be.gt(0);\nContacts.forEach(contact =&gt; {\n  expect(contact).to.have.all.keys(&#x27;contactGuid&#x27;, &#x27;ntId&#x27;, &#x27;email&#x27;);\n  expect(contact.email).to.equal(config.test.tenantOne.adminUser.email);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9e8d722-926d-4cc4-82a8-79951d173ce1&quot;,&quot;parentUUID&quot;:&quot;89ed717c-5cfb-4eb3-ad11-c4f23ff8c8f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should updatePassword&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should updatePassword&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:93,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\nlet Contact = await contactController.updatePassword(\n  config.test.tenantOne.adminUser.sid,\n  bcrypt.hashSync(config.test.tenantOne.adminUser.password)\n);\nexpect(Contact).to.exist\n  .and.to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fda93da2-94b4-478d-ac75-b46ec57edba4&quot;,&quot;parentUUID&quot;:&quot;89ed717c-5cfb-4eb3-ad11-c4f23ff8c8f2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5d71b88e-80f8-445a-af0a-e8e21d5bd2d2&quot;,&quot;97a9cc0c-8025-4eaa-bf04-0f997f79b38f&quot;,&quot;cdc1e005-cd9e-4f30-9f9d-06fb4067c094&quot;,&quot;5b6d06d1-115a-48b2-bb55-6c91ada7c754&quot;,&quot;950e4e9d-885c-4459-8521-3d32bd6df859&quot;,&quot;e9e8d722-926d-4cc4-82a8-79951d173ce1&quot;,&quot;fda93da2-94b4-478d-ac75-b46ec57edba4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:324,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a59ca513-4a98-4c18-8694-b5a03c5f192d&quot;,&quot;title&quot;:&quot;Integrify Libs Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/sqldb/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;57f7bdb0-eaa0-40c7-8457-8c17cec3fadf&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/sqldb/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Controller Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig();\nuser = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb268d83-daa0-439b-a9a7-57df25c09a41&quot;,&quot;parentUUID&quot;:&quot;57f7bdb0-eaa0-40c7-8457-8c17cec3fadf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Controller Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(controllers.BaseController).to.exist;\nclass TestController extends controllers.BaseController {}            \nconst testController = new TestController(config.test.tenantOne)\nlet tenantDb =  await testController.getTenantDb()\n\nexpect(tenantDb).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d4ad097-6874-4504-bb0e-3619135ce9bf&quot;,&quot;parentUUID&quot;:&quot;57f7bdb0-eaa0-40c7-8457-8c17cec3fadf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5d4ad097-6874-4504-bb0e-3619135ce9bf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;add8c04e-8f3f-4720-85cb-2ebd94d75326&quot;,&quot;title&quot;:&quot;Integrify Libs Data Instance Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/sqldb/data-instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/data-instance.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig();\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f8537168-308e-47ec-abda-e2e68f6d817c&quot;,&quot;parentUUID&quot;:&quot;add8c04e-8f3f-4720-85cb-2ebd94d75326&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a377449a-757d-4932-b27b-2f2c55fd46e4&quot;,&quot;title&quot;:&quot;Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/sqldb/data-instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/data-instance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a consumer model&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Model Tests should get a consumer model&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const DataInstanceModel = await model.getConsumerModel(config.consumersConn, &#x27;DataInstance&#x27;)\nexpect(DataInstanceModel).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1d0380d-2af2-4b91-86cd-61607ec51075&quot;,&quot;parentUUID&quot;:&quot;a377449a-757d-4932-b27b-2f2c55fd46e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return data instances&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Model Tests should return data instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const DataInstanceModel = await model.getConsumerModel(config.consumersConn, &#x27;DataInstance&#x27;)\nexpect(DataInstanceModel).to.exist;\nlet results = await DataInstanceModel.query()\nexpect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d9fd09b-ca98-4bea-929e-dfc38943cc3f&quot;,&quot;parentUUID&quot;:&quot;a377449a-757d-4932-b27b-2f2c55fd46e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return data instances with settings&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Model Tests should return data instances with settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const DataInstanceModel = await model.getConsumerModel(config.consumersConn, &#x27;DataInstance&#x27;)\nexpect(DataInstanceModel).to.exist;\nlet results = await DataInstanceModel.query().eager(&#x27;[dataInstanceSettings]&#x27;)\nconsole.dir(results)\nexpect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db23e327-0bbd-44f5-9d9e-2a8ed97fd60e&quot;,&quot;parentUUID&quot;:&quot;a377449a-757d-4932-b27b-2f2c55fd46e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c1d0380d-2af2-4b91-86cd-61607ec51075&quot;,&quot;9d9fd09b-ca98-4bea-929e-dfc38943cc3f&quot;,&quot;db23e327-0bbd-44f5-9d9e-2a8ed97fd60e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:30,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a1fd526c-5de4-4eaf-8b53-b38c665098b5&quot;,&quot;title&quot;:&quot;Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/sqldb/data-instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/data-instance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list datainstances&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Controller Tests should list datainstances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let dataInstanceController = new DataInstanceController();\nlet dataInstances = await dataInstanceController.listDataInstances()\nexpect(dataInstances).to.exist;\nexpect(dataInstances.length).to.be.gt(0)\nexpect(dataInstances[0].dataInstanceSettings.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98ee49ee-0519-4389-82bb-ffd6b4843f98&quot;,&quot;parentUUID&quot;:&quot;a1fd526c-5de4-4eaf-8b53-b38c665098b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a datainstance&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Controller Tests should get a datainstance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let dataInstanceController = new DataInstanceController();\nlet dataInstance = await dataInstanceController.getDataInstance(config.test.tenantOne.tenantId)\nexpect(dataInstance).to.exist;\nexpect(dataInstance.dataInstanceSettings.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c44a386-3f06-470c-a34e-33f701b71226&quot;,&quot;parentUUID&quot;:&quot;a1fd526c-5de4-4eaf-8b53-b38c665098b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a datainstances hash&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Controller Tests should get a datainstances hash&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let dataInstanceController = new DataInstanceController();\nlet dataInstanceHt = await dataInstanceController.GetDataInstancesHash()\nexpect(dataInstanceHt).to.exist;\nexpect(dataInstanceHt[config.test.tenantOne.tenantId]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c57c971-31ed-411a-9ca0-dfaadad8c390&quot;,&quot;parentUUID&quot;:&quot;a1fd526c-5de4-4eaf-8b53-b38c665098b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a datainstance&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Controller Tests should update a datainstance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:51,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let settingVal = new Date().toISOString()\nlet dataInstanceController = new DataInstanceController();\nlet dataInstance = await dataInstanceController.getDataInstance(config.test.tenantOne.tenantId)\nlet settingIdx  = dataInstance.dataInstanceSettings.findIndex((s =&gt; s.settingsKey === &#x27;HelpURL&#x27;));\ndataInstance.dataInstanceSettings[settingIdx].settingsValue = settingVal\ndataInstance  = await dataInstanceController.updateDataInstance(dataInstance)\nexpect(dataInstance.dataInstanceSettings.length).to.be.gt(0)\nlet setting  = dataInstance.dataInstanceSettings.find((s =&gt; s.settingsKey === &#x27;HelpURL&#x27;));\nexpect(setting).to.exist\nexpect(setting.settingsValue).to.equal(settingVal)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dab1f03c-0512-446c-9f6f-712a51d7d4ed&quot;,&quot;parentUUID&quot;:&quot;a1fd526c-5de4-4eaf-8b53-b38c665098b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;98ee49ee-0519-4389-82bb-ffd6b4843f98&quot;,&quot;7c44a386-3f06-470c-a34e-33f701b71226&quot;,&quot;5c57c971-31ed-411a-9ca0-dfaadad8c390&quot;,&quot;dab1f03c-0512-446c-9f6f-712a51d7d4ed&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:103,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c5252fdf-ea6d-4103-90fe-6c958ca80a75&quot;,&quot;title&quot;:&quot;Integrify Libs Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/sqldb/model.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;78911204-fb73-499e-b6b1-c39831a49a95&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/sqldb/model.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/model.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig();\nuser = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;72d00e48-ee2a-4f7e-9385-1391d8faf640&quot;,&quot;parentUUID&quot;:&quot;78911204-fb73-499e-b6b1-c39831a49a95&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nthis.timeout(105000);\nconst ContactModel = await model.bindModel(config.test.tenantOne.tenantId, models.Contact)\n//console.dir(ContactModel)\n//ContactModel.setOptions({excludeDeleted:false})\n//let results = await ContactModel.query().where(&#x27;contactId&#x27;, &#x27;&gt;&#x27;, 0)\n//console.log(results)\nlet results;\nresults = await ContactModel.query().setOptions({excludeDeleted:false}).where(&#x27;contactId&#x27;, &#x27;&gt;&#x27;, 0)\nresults = await ContactModel.query().where(&#x27;contactId&#x27;, &#x27;&gt;&#x27;, 0)\nlet c = await ContactModel.query().findOne({userName: &#x27;iApprove&#x27;}).joinRelated(&#x27;auth&#x27;).select(&#x27;contact.*&#x27;, &#x27;contact.contactGuid as contactSid&#x27;,&#x27;auth.userName as userName&#x27;)\nconsole.log(c)\nlet patched = await c.$query().patch({middleName: \&quot;bob\&quot;})\nconsole.log(patched)\n\n\nexpect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34d62735-168f-4bf1-800f-6ecb4146b292&quot;,&quot;parentUUID&quot;:&quot;78911204-fb73-499e-b6b1-c39831a49a95&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;34d62735-168f-4bf1-800f-6ecb4146b292&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000},{&quot;uuid&quot;:&quot;2c9a9de2-0a68-4073-b76e-74b386e92893&quot;,&quot;title&quot;:&quot;Integrify Libs Permissions Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/sqldb/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/permissions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;380283e8-8e95-4d1b-bb82-8737bf75f3a0&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/sqldb/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/permissions.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Controller Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nuser  = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73bb7637-0f9f-4921-8736-f11a20b5f21c&quot;,&quot;parentUUID&quot;:&quot;380283e8-8e95-4d1b-bb82-8737bf75f3a0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should getUserPermissionsFromDb&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Controller Tests tests should getUserPermissionsFromDb&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nconst session = {tenantId: config.test.tenantOne.tenantId, user_sid: user.sid}\nlet permissionsController = new PermissionsController(session)\nlet permissions = await permissionsController.getWorkflowPermissionsFromDb(session);\nconsole.log(permissions)\nexpect(permissions[0]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e444fcb3-299d-4de6-9605-155ea5a867d4&quot;,&quot;parentUUID&quot;:&quot;380283e8-8e95-4d1b-bb82-8737bf75f3a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e444fcb3-299d-4de6-9605-155ea5a867d4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;de00c290-d469-48ce-ad4a-3525527b0b5d&quot;,&quot;title&quot;:&quot;Integrify Libs Process Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/sqldb/process.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;270cd65a-6e6a-49ae-b7ab-f4ff50de6358&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/sqldb/process.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/process.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Process Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nuser  = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59bf9f95-a375-4751-ad9c-f2894e1486f7&quot;,&quot;parentUUID&quot;:&quot;270cd65a-6e6a-49ae-b7ab-f4ff50de6358&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a process from sql&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Process Model Tests tests should get a process from sql&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:68,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nconst ProcessModel = await model.getModel(config.test.tenantOne.tenantId, &#x27;Process&#x27;)\n\n\nlet results = await ProcessModel.query()\n//console.log(results)\nexpect(results.length).to.be.gt(0)\nlet sampleProcesstGuid = results[0].processGuid\nlet processController = new ProcessController(config.test.tenantOne)\nconst Process = await processController.getFullProcessFromSql(sampleProcesstGuid);\nexpect(Process).to.exist;\nconsole.log([Process])\nexpect(Process.processGuid).equal(sampleProcesstGuid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5651a991-4b98-4305-840a-cab44be5c24d&quot;,&quot;parentUUID&quot;:&quot;270cd65a-6e6a-49ae-b7ab-f4ff50de6358&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should upsert a process in sql&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Process Model Tests tests should upsert a process in sql&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:335,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nconst ProcessModel = await model.getModel(config.test.tenantOne.tenantId, &#x27;Process&#x27;)\n//console.dir(ContactModel)\nlet results = await ProcessModel.query()\n//console.log(results)\nexpect(results.length).to.be.gt(0)\nlet sampleProcesstGuid = results[0].processGuid\nlet processController = new ProcessController(config.test.tenantOne)\nlet Process = await processController.getFullProcessFromSql(sampleProcesstGuid);\nexpect(Process).to.exist;\nexpect(Process.processGuid).equal(sampleProcesstGuid)\nlet newName = &#x27;Updated &#x27; + new Date().toISOString()\nclonedProcess = JSON.parse(JSON.stringify(Process));\n           \nProcess.objective = newName;\nProcess.tasks[0].internalNotes = newName;\nProcess.processCategory.ordinal = 1;\nawait processController.upsertFullProcess(Process);\nProcess = await processController.getFullProcessFromSql(sampleProcesstGuid);\nexpect(Process.objective).to.equal(newName);\nexpect(Process.tasks[0].internalNotes).to.equal(newName);\nexpect(Process.processCategory.ordinal).equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea879b85-64fd-484c-932e-8caf480636e5&quot;,&quot;parentUUID&quot;:&quot;270cd65a-6e6a-49ae-b7ab-f4ff50de6358&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5651a991-4b98-4305-840a-cab44be5c24d&quot;,&quot;ea879b85-64fd-484c-932e-8caf480636e5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:403,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0efbf7c6-167d-4a30-94f3-747169887b68&quot;,&quot;title&quot;:&quot;Integrify Libs Tenant tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/sqldb/sqldb-db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/sqldb-db.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c82f6e72-2720-420c-b04c-1cef490ad822&quot;,&quot;title&quot;:&quot;tentantSql tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/sqldb/sqldb-db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/sqldb-db.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tenant tests tentantSql tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// let configClass = await require(&#x27;../../../config&#x27;)\n            // await configClass.setConfigs();\n            // config = await configClass.getConfig();\n            config = await Config.getConfig();\n            this.timeout(100000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bce27695-6c1e-4552-86fb-8fc5f86e201e&quot;,&quot;parentUUID&quot;:&quot;c82f6e72-2720-420c-b04c-1cef490ad822&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get the consumer Db&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tenant tests tentantSql tests should get the consumer Db&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:45,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let db = await sqlDb.getConsumersDb(config.consumersConn)\nexpect(db).to.exist;\nlet queyResults =  await db.raw(`SELECT * FROM sys.tables WHERE name = &#x27;data_instance&#x27;`)\nexpect(queyResults.length).equal(1)\n//console.log(queyResults)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;810a871f-e8b2-49d3-b84a-254308cac94c&quot;,&quot;parentUUID&quot;:&quot;c82f6e72-2720-420c-b04c-1cef490ad822&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;shoulld get the tenant Db&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tenant tests tentantSql tests shoulld get the tenant Db&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let db = await sqlDb.getTenantDb(config.test.tenantOne.tenantId)\nexpect(db).to.exist;\nlet queyResults =  await db.raw(`select * from contact`)\nexpect(queyResults.length).to.be.gt(0)\nqueyResults = await db.raw(\&quot;select * from contact_auth where user_name = :uname\&quot;, {uname: &#x27;iApprove&#x27;})\nexpect(queyResults.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;796ec842-82d6-467f-a6a6-bb37aa8b03c6&quot;,&quot;parentUUID&quot;:&quot;c82f6e72-2720-420c-b04c-1cef490ad822&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;810a871f-e8b2-49d3-b84a-254308cac94c&quot;,&quot;796ec842-82d6-467f-a6a6-bb37aa8b03c6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:50,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2e8f62cb-ba0b-4b55-b3a0-235e7338e5b1&quot;,&quot;title&quot;:&quot;Integrify Libs StreamConsumer Load Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Load Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2808,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(1050000000);\nlet deletes = await redis.delAsync([fullStreamName, eventHistoryName, eventProcessedName, `${tenant}.activeSessions`]);\n/*\nRedis stream stuff:\nYou can scale up by running additional processors in the group. This creates a new Node process and runs a new consumer\nin the existing stream group. The consumer name for each processor will have an incremental suffix so it will be unique\nensuring that each consumer processes a unique set of events.\nWith 3 processors, it handeld a loadSize of a million events as they came in with no backlog build up in the group.\n */\nforkedProcessor = await streamConsumer.forkStreamProcessor()\nforkedProcessor2 = await streamConsumer.forkStreamProcessor()\nforkedProcessor3 = await streamConsumer.forkStreamProcessor()\nfor (let index = 0; index &lt; loadSize; index++) {\n\n    await sp.sendEvent(\&quot;extendSession\&quot;,{\n        token: \&quot;abcd234\&quot;,\n        user: {\n            sid:\&quot;11111\&quot;, \n            user_name: \&quot;iapprove\&quot;, \n            email: \&quot;iapprove@integrify.com\&quot;, \n            name: \&quot;System System\&quot;\n        }\n    })\n\n}\n       \nawait delay(1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;986669e2-7d93-43d9-8915-22684962e99f&quot;,&quot;parentUUID&quot;:&quot;2e8f62cb-ba0b-4b55-b3a0-235e7338e5b1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Load Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;forkedProcessor.kill()\nforkedProcessor2.kill()\nforkedProcessor3.kill()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3818ccb1-5e7d-407c-8a33-bed2f87ec205&quot;,&quot;parentUUID&quot;:&quot;2e8f62cb-ba0b-4b55-b3a0-235e7338e5b1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f5e4a878-2046-4763-969d-780ba0de92dd&quot;,&quot;title&quot;:&quot;forkStreamProcessor&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;60dfe182-5f66-4210-9660-94fdc646687b&quot;,&quot;title&quot;:&quot;processed event count  = history count&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should process events&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Load Tests forkStreamProcessor processed event count  = history count should process events&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processedCount = await redis.zcardAsync(eventProcessedName)\n let historyCount = await redis.zcardAsync(eventHistoryName)\n expect(historyCount).to.equal(processedCount)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01e623f9-9d35-4c00-8d55-da0177641eeb&quot;,&quot;parentUUID&quot;:&quot;60dfe182-5f66-4210-9660-94fdc646687b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;01e623f9-9d35-4c00-8d55-da0177641eeb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7101ee75-9fb8-416e-909d-2dadcb1eb313&quot;,&quot;title&quot;:&quot;Integrify Libs StreamConsumer Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/stream/streamConsumer.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5034,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\nlet deletes = await redis.delAsync([fullStreamName, eventHistoryName, eventProcessedName, `${tenant}.activeSessions`]);\nconsole.log(deletes)\nfor (let index = 0; index &lt; 5; index++) {\n    await sp.sendEvent(\&quot;extendSession\&quot;, {activityDate: new Date(),\n        token: \&quot;abcd234\&quot;,\n        user: {\n            sid:\&quot;11111\&quot;,\n            user_name: \&quot;iapprove\&quot;,\n            email: \&quot;iapprove@integrify.com\&quot;,\n            name: \&quot;System System\&quot;\n        }\n    })\n}\nforkedProcessor = await streamConsumer.forkStreamProcessor()\nawait delay(5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43103f8d-a6b6-4e59-8d65-79a53e32d71a&quot;,&quot;parentUUID&quot;:&quot;7101ee75-9fb8-416e-909d-2dadcb1eb313&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;728f9935-93ed-47c7-a5d0-1bc5db78e780&quot;,&quot;parentUUID&quot;:&quot;7101ee75-9fb8-416e-909d-2dadcb1eb313&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2d171043-1b48-4cd7-ab72-c505461df7c6&quot;,&quot;title&quot;:&quot;forkStreamProcessor&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/stream/streamConsumer.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;dc90ec35-830f-4d3d-a999-ad1bca12f81e&quot;,&quot;title&quot;:&quot;processed event count  = history count&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/stream/streamConsumer.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should process events&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Tests forkStreamProcessor processed event count  = history count should process events&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processedCount = await redis.zcardAsync(eventProcessedName)\n let historyCount = await redis.zcardAsync(eventHistoryName)\n expect(historyCount).to.equal(processedCount)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e0271ef-4ec0-41d0-8dfb-f294aa31ae83&quot;,&quot;parentUUID&quot;:&quot;dc90ec35-830f-4d3d-a999-ad1bca12f81e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6e0271ef-4ec0-41d0-8dfb-f294aa31ae83&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;da6846bc-2959-4f2c-bbff-c28dd5ff5ab2&quot;,&quot;title&quot;:&quot;Integrify Libs Stream Publisher Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/stream/streamPublisher.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamPublisher.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8f0dfeaa-4fde-43e3-ab15-aa78657f911f&quot;,&quot;title&quot;:&quot;stream publisher&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/stream/streamPublisher.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamPublisher.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Stream Publisher Tests stream publisher \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(100000)\nprocess.env.jest = \&quot;true\&quot;;\nawait redis.delAsync([fullStreamName, eventHistoryName])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91179529-66b6-4b30-8c4a-00a3536ad089&quot;,&quot;parentUUID&quot;:&quot;8f0dfeaa-4fde-43e3-ab15-aa78657f911f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should handle the constructor&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Stream Publisher Tests stream publisher should handle the constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const sp = new StreamPublisher(testStreamName, tenant);\nexpect(sp.streamName).equal(fullStreamName)\nexpect(sp.baseStreamName).equal(testStreamName)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;32759b70-89d7-49b8-9181-284a80e55b28&quot;,&quot;parentUUID&quot;:&quot;8f0dfeaa-4fde-43e3-ab15-aa78657f911f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should an sendEvent&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Stream Publisher Tests stream publisher should an sendEvent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:104,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const sp = new StreamPublisher(testStreamName, tenant,1000);\nexpect(sp.streamName).equal(fullStreamName)\n//sendEvent(eventType, data) data will get stringified\nlet id = await sp.sendEvent(testEventType, {foo:\&quot;bar\&quot;, biz:\&quot;buzz\&quot;, beep:{bop:\&quot;bam\&quot;}})   \nexpect(id).to.exist;\nexpect (id.indexOf(\&quot;-\&quot;)).to.be.gt(-1)  \nawait delay(100);\nlet id2 = await sp.sendEvent(testEventType, {foo:\&quot;bar2\&quot;, biz:\&quot;buzz2\&quot;, beep:{bop:\&quot;bam2\&quot;}})   \nexpect (Number(id2.split(\&quot;-\&quot;)[0])).to.be.gt(Number(id.split(\&quot;-\&quot;)[0]))&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df487583-1513-49a6-b7f9-2ac20c8df9e9&quot;,&quot;parentUUID&quot;:&quot;8f0dfeaa-4fde-43e3-ab15-aa78657f911f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should append to eventhistory&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Stream Publisher Tests stream publisher should append to eventhistory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const sp = new StreamPublisher(testStreamName, tenant, 1000); \n\nlet id = await sp.sendEvent(testEventType, {foo:\&quot;bar\&quot;, biz:\&quot;buzz\&quot;, beep:{bop:\&quot;bam\&quot;}}) \n           \n//console.log(historySet)\nlet historyCount = await redis.zcardAsync(eventHistoryName)\nexpect(historyCount).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;07b414c9-49d2-4865-b212-21d34fd8a78f&quot;,&quot;parentUUID&quot;:&quot;8f0dfeaa-4fde-43e3-ab15-aa78657f911f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;32759b70-89d7-49b8-9181-284a80e55b28&quot;,&quot;df487583-1513-49a6-b7f9-2ac20c8df9e9&quot;,&quot;07b414c9-49d2-4865-b212-21d34fd8a78f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:106,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9c003a6c-5f26-43ee-afa6-c403f522a12e&quot;,&quot;title&quot;:&quot;Integrify Libs Tes-lib Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/test-lib/test-lib.test.js&quot;,&quot;file&quot;:&quot;/test/integration/test-lib/test-lib.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;618d3b9d-1a39-4085-aa19-a609a9db2566&quot;,&quot;title&quot;:&quot;Test Config&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/test-lib/test-lib.test.js&quot;,&quot;file&quot;:&quot;/test/integration/test-lib/test-lib.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tes-lib Tests Test Config \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//config = await Config.getConfig()\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa7a5a2a-0f83-41fe-8020-09b0d55bb343&quot;,&quot;parentUUID&quot;:&quot;618d3b9d-1a39-4085-aa19-a609a9db2566&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9832994d-439f-42c8-b0e8-193b82a980a1&quot;,&quot;title&quot;:&quot;get a test config&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/test-lib/test-lib.test.js&quot;,&quot;file&quot;:&quot;/test/integration/test-lib/test-lib.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should have config.mongo&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tes-lib Tests Test Config get a test config should have config.mongo&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testConfig = await testLib.getTestConfig();\nconsole.log(testConfig)\nexpect(testConfig).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1edc2d0f-fbfb-43da-8791-2fb9f708270b&quot;,&quot;parentUUID&quot;:&quot;9832994d-439f-42c8-b0e8-193b82a980a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1edc2d0f-fbfb-43da-8791-2fb9f708270b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;097e1cee-6146-4054-887b-2676bf29b64a&quot;,&quot;title&quot;:&quot;get an auth Token &quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/integrify-libs/test/integration/test-lib/test-lib.test.js&quot;,&quot;file&quot;:&quot;/test/integration/test-lib/test-lib.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should have a auth token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tes-lib Tests Test Config get an auth Token  should have a auth token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const authToken = await testLib.getAuthToken();\nconsole.log(authToken)\nexpect(authToken).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0bca3ab4-f8be-4d24-8014-e180f7c92a69&quot;,&quot;parentUUID&quot;:&quot;097e1cee-6146-4054-887b-2676bf29b64a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0bca3ab4-f8be-4d24-8014-e180f7c92a69&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5b2dbdc5-655d-443d-9d3c-7288ad1d469a&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5fbdcdac-362a-4ae9-970c-224a5bad3402&quot;,&quot;title&quot;:&quot;Scheduler CRUD tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Scheduler CRUD tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests \&quot;before all\&quot; hook in \&quot;Scheduler CRUD tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:142,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntry {\n    testConfig = await serverConfig.setProcessServerConfig()\n    jobCtrl = require(\&quot;../lib/scheduler/mongo/jobCtrl.js\&quot;);\n} catch(e){}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7476e75-de17-4dc5-8aae-1835ada2b974&quot;,&quot;parentUUID&quot;:&quot;5fbdcdac-362a-4ae9-970c-224a5bad3402&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;042e9c71-fa05-4a61-b50d-32d45635c836&quot;,&quot;title&quot;:&quot;.save&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;saves the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .save saves the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:66,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let sDate = new Date();\nlet startThis = new Date(\n    new Date().setMinutes(sDate.getMinutes() - 5)\n);\nlet endThis = new Date(\n    new Date().setMinutes(sDate.getMinutes() + 5)\n);\nlet job = {\n    dbName: config.dbName,\n    status: \&quot;Scheduled\&quot;,\n    name: config.name,\n    initData: config.initData,\n    runAs: config.runAs,\n    frequency: \&quot;Recurring\&quot;,\n    rminutes: 1,\n    state: \&quot;ended\&quot;,\n    startDate: startThis,\n    startHour: startThis.getHours(),\n    startMinute: startThis.getMinutes(),\n    startAMPM: startThis.getHours() &gt; 12 ? \&quot;PM\&quot; : \&quot;AM\&quot;,\n    endDate: endThis,\n    endHour: endThis.getHours(),\n    endMinute: endThis.getMinutes(),\n    endAMPM: endThis.getHours() &gt; 12 ? \&quot;PM\&quot; : \&quot;AM\&quot;,\n    jobType: config.jobType\n};\nreturn jobCtrl.save(job).then(saved =&gt; {\n    expect(saved).to.exist;\n    dbJob = saved;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de797c01-ed0c-4a1d-bf89-8b6fce36414e&quot;,&quot;parentUUID&quot;:&quot;042e9c71-fa05-4a61-b50d-32d45635c836&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;de797c01-ed0c-4a1d-bf89-8b6fce36414e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:66,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0349443c-76cc-4baa-9df0-7b2166fea4cf&quot;,&quot;title&quot;:&quot;.upate&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .upate updates the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;dbJob.name = \&quot;pdq\&quot;;\nreturn jobCtrl.update(dbJob).then(updated =&gt; {\n    expect(updated).to.exist;\n    expect(updated.modifiedDate.getTime()).to.be.greaterThan(\n        updated.createdDate.getTime()\n    );\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ee546a4-1a2f-48fb-be9d-6d370ce777c3&quot;,&quot;parentUUID&quot;:&quot;0349443c-76cc-4baa-9df0-7b2166fea4cf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6ee546a4-1a2f-48fb-be9d-6d370ce777c3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0911eb5b-f530-499e-b10d-2376883d8388&quot;,&quot;title&quot;:&quot;.getOne&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a job by id&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .getOne should get a job by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;dbJob.name = \&quot;pdq\&quot;;\nreturn jobCtrl.getOne(config.dbName, dbJob._id).then(job =&gt; {\n    expect(job).to.exist;\n    expect(job._id.toString()).to.equal(dbJob._id.toString());\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f520439c-7e3f-4f44-a429-545ca1552e08&quot;,&quot;parentUUID&quot;:&quot;0911eb5b-f530-499e-b10d-2376883d8388&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f520439c-7e3f-4f44-a429-545ca1552e08&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ebc2278a-357e-4a2d-9edc-87f5f13192b2&quot;,&quot;title&quot;:&quot;.getAll&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get all jobs&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .getAll should get all jobs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return jobCtrl.getAll(config.dbName).then(jobs =&gt; {\n    expect(jobs).to.be.an(\&quot;array\&quot;).that.is.not.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c39305b-63a1-4450-9cb5-44337ffb775e&quot;,&quot;parentUUID&quot;:&quot;ebc2278a-357e-4a2d-9edc-87f5f13192b2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4c39305b-63a1-4450-9cb5-44337ffb775e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;66ff88a7-a2a4-4676-8421-86d50e277ca7&quot;,&quot;title&quot;:&quot;.getAll(filter)&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get all jobs of type testToConsole&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .getAll(filter) should get all jobs of type testToConsole&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return jobCtrl.getAll(config.dbName, \&quot;testToConsole\&quot;).then(jobs =&gt; {\n    expect(jobs).to.be.an(\&quot;array\&quot;).that.is.not.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43b3a57c-c54a-4e68-9cde-e70ec33df761&quot;,&quot;parentUUID&quot;:&quot;66ff88a7-a2a4-4676-8421-86d50e277ca7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;43b3a57c-c54a-4e68-9cde-e70ec33df761&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;aa5b02c7-602a-493e-8f18-da5b67a91b74&quot;,&quot;title&quot;:&quot;.getAll(filter-bad)&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not have any jobs of type fakeJob&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .getAll(filter-bad) should not have any jobs of type fakeJob&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return jobCtrl.getAll(config.dbName, \&quot;fakeJob\&quot;).then(jobs =&gt; {\n    expect(jobs).to.be.an(\&quot;array\&quot;).that.is.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ecdf5214-e569-49f2-9f17-377c1014a05a&quot;,&quot;parentUUID&quot;:&quot;aa5b02c7-602a-493e-8f18-da5b67a91b74&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ecdf5214-e569-49f2-9f17-377c1014a05a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1d827eee-0b4b-477c-944f-d21e813b6169&quot;,&quot;title&quot;:&quot;.delete&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a job&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .delete should delete a job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return jobCtrl.delete(config.dbName, dbJob._id).then(deleted =&gt; {\n    expect(deleted).to.be.true;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0cf4cc04-252c-4de7-b3af-6bda316bed6b&quot;,&quot;parentUUID&quot;:&quot;1d827eee-0b4b-477c-944f-d21e813b6169&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0cf4cc04-252c-4de7-b3af-6bda316bed6b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;eafc5ebb-7915-4993-bfd8-9eee49e8d504&quot;,&quot;title&quot;:&quot;Scheduler OneTimeJob&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/onetime.test.js&quot;,&quot;file&quot;:&quot;/test/onetime.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Scheduler OneTimeJob\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob \&quot;before all\&quot; hook in \&quot;Scheduler OneTimeJob\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:70,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(20000);\ntestConfig = await serverConfig.setProcessServerConfig()\nscheduler = require(\&quot;../lib/scheduler/index.js\&quot;);\n//jobCtrl = require(\&quot;../lib/scheduler/mongo/jobCtrl\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;633b656d-7c1c-41b7-93e0-031e0fbb7d3f&quot;,&quot;parentUUID&quot;:&quot;eafc5ebb-7915-4993-bfd8-9eee49e8d504&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4d830797-151e-47e0-851b-9783fdbdd3f9&quot;,&quot;title&quot;:&quot;#addOneTimeJob&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/onetime.test.js&quot;,&quot;file&quot;:&quot;/test/onetime.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add a job&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob #addOneTimeJob should add a job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.addJob(job);\nexpect(job._id).to.equal(j.name);\n//setTimeout(done, 2500);\n// done()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89b7b2a9-99be-4aaa-a2ee-b540a0669595&quot;,&quot;parentUUID&quot;:&quot;4d830797-151e-47e0-851b-9783fdbdd3f9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;89b7b2a9-99be-4aaa-a2ee-b540a0669595&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b4128d41-f7df-47d3-b31c-c9974aeb444a&quot;,&quot;title&quot;:&quot;#listJobs&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/onetime.test.js&quot;,&quot;file&quot;:&quot;/test/onetime.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a hash with jobs&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob #listJobs should return a hash with jobs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let jobs = scheduler.listJobs();\nexpect(Object.keys(jobs).length).to.be.greaterThan(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;abb3710e-77b0-4441-9f13-f00adc51c6d7&quot;,&quot;parentUUID&quot;:&quot;b4128d41-f7df-47d3-b31c-c9974aeb444a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should contain job xyz&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob #listJobs should contain job xyz&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let jobs = scheduler.listJobs();\nexpect(jobs[job._id]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b46e0c9a-462c-4950-9821-af0a91aae50d&quot;,&quot;parentUUID&quot;:&quot;b4128d41-f7df-47d3-b31c-c9974aeb444a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;abb3710e-77b0-4441-9f13-f00adc51c6d7&quot;,&quot;b46e0c9a-462c-4950-9821-af0a91aae50d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;123ecac4-967a-448c-83ce-03282f75dc33&quot;,&quot;title&quot;:&quot;#getJob&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/onetime.test.js&quot;,&quot;file&quot;:&quot;/test/onetime.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a job by id&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob #getJob should get a job by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.getJobById(job._id);\n//expect(j.nextInvocation()).to.equal(job.start);\nexpect(j.name).to.equal(job._id);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f878c24-d0bf-43ad-b0cb-5901783cdfb2&quot;,&quot;parentUUID&quot;:&quot;123ecac4-967a-448c-83ce-03282f75dc33&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2f878c24-d0bf-43ad-b0cb-5901783cdfb2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;babb558d-3127-49af-9e0b-29a5b634ad5a&quot;,&quot;title&quot;:&quot;#runJob&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/onetime.test.js&quot;,&quot;file&quot;:&quot;/test/onetime.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should run the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob #runJob should run the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15001,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.getJobById(job._id);\nlet c = await delay(15000);\nexpect(j.triggeredJobs()).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1212001-898c-4b87-8b79-2fede3fd53b1&quot;,&quot;parentUUID&quot;:&quot;babb558d-3127-49af-9e0b-29a5b634ad5a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e1212001-898c-4b87-8b79-2fede3fd53b1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15001,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9ea9adfc-00ce-4149-be77-19b5f01b8938&quot;,&quot;title&quot;:&quot;Scheduler PubSubHandler&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/pubsub.test.js&quot;,&quot;file&quot;:&quot;/test/pubsub.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Scheduler PubSubHandler\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler PubSubHandler \&quot;before all\&quot; hook in \&quot;Scheduler PubSubHandler\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(20000);\ntestConfig = await serverConfig.setProcessServerConfig()\nscheduler = require(\&quot;../lib/scheduler/index.js\&quot;);\njobCtrl = require(\&quot;../lib/scheduler/mongo/jobCtrl\&quot;);\ndbJobWithId = await jobCtrl.save(dbJob);\nservice = require(\&quot;../scheduler.js\&quot;);\nintegrify_redis = require(\&quot;../lib/redis/integrify-redis.js\&quot;);\npubSubClient = integrify_redis.getRedisPubSubClient();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;37d13081-057a-4536-acef-d5a43dbf4b93&quot;,&quot;parentUUID&quot;:&quot;9ea9adfc-00ce-4149-be77-19b5f01b8938&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Scheduler PubSubHandler\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler PubSubHandler \&quot;after all\&quot; hook in \&quot;Scheduler PubSubHandler\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return await jobCtrl.delete(dbJob.dbName, dbJobWithId._id.toString());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;558bcc06-0ee4-4c81-9686-0949d1cc6246&quot;,&quot;parentUUID&quot;:&quot;9ea9adfc-00ce-4149-be77-19b5f01b8938&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2f9a427e-34d3-409c-8641-c1d958952517&quot;,&quot;title&quot;:&quot;#addJob&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/pubsub.test.js&quot;,&quot;file&quot;:&quot;/test/pubsub.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;add a new job based on a message&quot;,&quot;fullTitle&quot;:&quot;Scheduler PubSubHandler #addJob add a new job based on a message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3004,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pubSubClient.publish(\n    `schedule:add`,\n    JSON.stringify({\n        dbName: dbJobWithId.dbName,\n        jobId: dbJobWithId._id\n    }),\n    function(err, ok) {\n        setTimeout(\n            function() {\n                let j = scheduler.getJobById(dbJobWithId._id);\n                expect(j).to.exist;\n                done();\n            },\n            3000\n        );\n    }\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf863f2d-af08-40df-9c7f-ebc7b09ff857&quot;,&quot;parentUUID&quot;:&quot;2f9a427e-34d3-409c-8641-c1d958952517&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cf863f2d-af08-40df-9c7f-ebc7b09ff857&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3004,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;be8721e7-d551-47d5-8ccd-f2792b02fc7a&quot;,&quot;title&quot;:&quot;#cancel&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/pubsub.test.js&quot;,&quot;file&quot;:&quot;/test/pubsub.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should cancel the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler PubSubHandler #cancel should cancel the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pubSubClient.publish(\n    `schedule:delete`,\n    JSON.stringify({\n        dbName: dbJobWithId.dbName,\n        jobId: dbJobWithId._id\n    }),\n    async function(err, ok) {\n        delay(500);\n        let jobs = scheduler.listJobs();\n        expect(jobs[dbJobWithId._id]).to.not.exist;\n                        }\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de31718a-727a-40e4-a3cf-a61b5927bdcb&quot;,&quot;parentUUID&quot;:&quot;be8721e7-d551-47d5-8ccd-f2792b02fc7a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;de31718a-727a-40e4-a3cf-a61b5927bdcb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;50728ca9-4e76-43a9-bfbe-05134dfb28c3&quot;,&quot;title&quot;:&quot;Scheduler RecurringJob&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/recur.test.js&quot;,&quot;file&quot;:&quot;/test/recur.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Scheduler RecurringJob\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler RecurringJob \&quot;before all\&quot; hook in \&quot;Scheduler RecurringJob\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(20000);\ntestConfig = await serverConfig.setProcessServerConfig()\nscheduler = require(\&quot;../lib/scheduler/index.js\&quot;);\n//jobCtrl = require(\&quot;../lib/scheduler/mongo/jobCtrl\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99b3dce4-3cfb-4ae7-99fc-fe97879af149&quot;,&quot;parentUUID&quot;:&quot;50728ca9-4e76-43a9-bfbe-05134dfb28c3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;72a6b652-4d58-4639-887a-d5b8c604b7df&quot;,&quot;title&quot;:&quot;#addRecurringJob&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/recur.test.js&quot;,&quot;file&quot;:&quot;/test/recur.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add a job&quot;,&quot;fullTitle&quot;:&quot;Scheduler RecurringJob #addRecurringJob should add a job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.addJob(job);5\nexpect(job.recur).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93e7a3a6-5d28-423f-804f-5ed84fe9966c&quot;,&quot;parentUUID&quot;:&quot;72a6b652-4d58-4639-887a-d5b8c604b7df&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;93e7a3a6-5d28-423f-804f-5ed84fe9966c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9a676593-168d-46e4-9d84-f63860bbb2d3&quot;,&quot;title&quot;:&quot;#listJobs&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/recur.test.js&quot;,&quot;file&quot;:&quot;/test/recur.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a hash with jobs&quot;,&quot;fullTitle&quot;:&quot;Scheduler RecurringJob #listJobs should return a hash with jobs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;jobs = scheduler.listJobs();\nexpect(Object.keys(jobs).length).to.be.greaterThan(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5c5f875-7f61-444d-9b7d-6af9e65cc1d0&quot;,&quot;parentUUID&quot;:&quot;9a676593-168d-46e4-9d84-f63860bbb2d3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should contain job xyz&quot;,&quot;fullTitle&quot;:&quot;Scheduler RecurringJob #listJobs should contain job xyz&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(jobs[job._id]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f3b3f5b-bb96-4b26-99c2-331bb89596f8&quot;,&quot;parentUUID&quot;:&quot;9a676593-168d-46e4-9d84-f63860bbb2d3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a5c5f875-7f61-444d-9b7d-6af9e65cc1d0&quot;,&quot;3f3b3f5b-bb96-4b26-99c2-331bb89596f8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2d5ad53e-a8bf-4ada-b958-e7546cff9e8f&quot;,&quot;title&quot;:&quot;#getJob&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/recur.test.js&quot;,&quot;file&quot;:&quot;/test/recur.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a job by id&quot;,&quot;fullTitle&quot;:&quot;Scheduler RecurringJob #getJob should get a job by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.getJobById(job._id);\n//expect(j.nextInvocation()).to.equal(job.start);\nexpect(j.name).to.equal(job._id);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9f6f7273-a553-4190-9ddc-ed1b12e64715&quot;,&quot;parentUUID&quot;:&quot;2d5ad53e-a8bf-4ada-b958-e7546cff9e8f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9f6f7273-a553-4190-9ddc-ed1b12e64715&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;03a964e0-cb97-4c4f-814d-5c2acc3d9ef4&quot;,&quot;title&quot;:&quot;Scheduler Scheduled Jobs&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Scheduler Scheduled Jobs\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs \&quot;before all\&quot; hook in \&quot;Scheduler Scheduled Jobs\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;;\n        testConfig = await serverConfig.setProcessServerConfig()\n        scheduler = require(\&quot;../lib/scheduler/index.js\&quot;);\n        jobCtrl = require(\&quot;../lib/scheduler/mongo/jobCtrl\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24fb1577-95ff-4152-a6d1-e91d5181027d&quot;,&quot;parentUUID&quot;:&quot;03a964e0-cb97-4c4f-814d-5c2acc3d9ef4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;19e73fa1-569d-498f-9033-9e8b311be1a0&quot;,&quot;title&quot;:&quot;#addJob&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add a job&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #addJob should add a job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.addJob(job);\nexpect(job._id).to.equal(j.name);\n//setTimeout(done, 2500);\n// done()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1bb92559-988f-433e-bcf5-0526e3b65e20&quot;,&quot;parentUUID&quot;:&quot;19e73fa1-569d-498f-9033-9e8b311be1a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1bb92559-988f-433e-bcf5-0526e3b65e20&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;e2bf404c-4c0d-4e6a-9362-b81939885629&quot;,&quot;title&quot;:&quot;#loadAllJobsFromMongo&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;#loadAllJobsFromMongo\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #loadAllJobsFromMongo \&quot;before all\&quot; hook in \&quot;#loadAllJobsFromMongo\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// runs before all tests in this block\nreturn jobCtrl.save(dbJob).then(j =&gt; {\n    dbJobWithId = j;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3926e963-ebb9-4de0-a947-a1e1cabc98cc&quot;,&quot;parentUUID&quot;:&quot;e2bf404c-4c0d-4e6a-9362-b81939885629&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;#loadAllJobsFromMongo\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #loadAllJobsFromMongo \&quot;after all\&quot; hook in \&quot;#loadAllJobsFromMongo\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//return jobCtrl.delete(dbJob.dbName, dbJobWithId._id.toString())&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bdcea24f-1970-42a5-9018-5a14aab68df5&quot;,&quot;parentUUID&quot;:&quot;e2bf404c-4c0d-4e6a-9362-b81939885629&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should load the jobs from mongo&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #loadAllJobsFromMongo should load the jobs from mongo&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return scheduler.loadJobsFromMongo().then(loadedJobs =&gt; {\n    expect(loadedJobs.length).to.be.greaterThan(0);\n    expect(scheduler.listJobs()[dbJobWithId.id]).to.exist;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c8e46f9-92e1-4d11-b6fe-3bd2c1bd9b32&quot;,&quot;parentUUID&quot;:&quot;e2bf404c-4c0d-4e6a-9362-b81939885629&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4c8e46f9-92e1-4d11-b6fe-3bd2c1bd9b32&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;6613650c-97cb-4fb4-8533-db33cd783f3b&quot;,&quot;title&quot;:&quot;#listJobs&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a hash with jobs&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #listJobs should return a hash with jobs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;jobs = scheduler.listJobs();\nexpect(Object.keys(jobs).length).to.be.greaterThan(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5dbbbac8-1b11-4843-94d3-94ff717a8c99&quot;,&quot;parentUUID&quot;:&quot;6613650c-97cb-4fb4-8533-db33cd783f3b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should contain job xyz&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #listJobs should contain job xyz&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(jobs[job._id]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d2bda52-20b0-4446-b327-4d76da31c377&quot;,&quot;parentUUID&quot;:&quot;6613650c-97cb-4fb4-8533-db33cd783f3b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5dbbbac8-1b11-4843-94d3-94ff717a8c99&quot;,&quot;3d2bda52-20b0-4446-b327-4d76da31c377&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;84d6ef64-b1ca-4516-b4b5-d8f92c697309&quot;,&quot;title&quot;:&quot;#getJob&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a job by id&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #getJob should get a job by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.getJobById(job._id);\n//expect(j.nextInvocation()).to.equal(job.start);\nexpect(j.name).to.equal(job._id);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95ebb651-004d-4f5d-814a-b167f0f4af6c&quot;,&quot;parentUUID&quot;:&quot;84d6ef64-b1ca-4516-b4b5-d8f92c697309&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;95ebb651-004d-4f5d-814a-b167f0f4af6c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;7764bd0d-6aba-432c-8b71-880f7b79e701&quot;,&quot;title&quot;:&quot;#reschedule&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should reschedule the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #reschedule should reschedule the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let oldStart = job.start;\n            job.start =  new Date(job.start.getTime() + 100);\n            job.end =   new Date(job.end.getTime() + 10000);\n            let rj = scheduler.rescheduleJob(job);\n            await delay(300);\n            let j = scheduler.getJobById(job._id);\n            expect(new Date(j.nextInvocation()).getTime()).to.be.greaterThan(oldStart.getTime());&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;AssertionError: expected 0 to be above 1616795939000&quot;,&quot;estack&quot;:&quot;AssertionError: expected 0 to be above 1616795939000\n    at Context.&lt;anonymous&gt; (test/schedule.test.js:129:66)&quot;,&quot;diff&quot;:&quot;- 0\n+ 1616795939000\n&quot;},&quot;uuid&quot;:&quot;17960f7a-68d5-41fb-a398-544d617a7dee&quot;,&quot;parentUUID&quot;:&quot;7764bd0d-6aba-432c-8b71-880f7b79e701&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[&quot;17960f7a-68d5-41fb-a398-544d617a7dee&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:307,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;b4142639-e5b7-4675-9497-8290820e0e54&quot;,&quot;title&quot;:&quot;#cancel&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should cancel the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #cancel should cancel the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let cj = scheduler.cancelJob(job._id);\nlet jobs = scheduler.listJobs();\nexpect(jobs[job._id]).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1cc2740-4172-41e4-a4d3-c0784f49c985&quot;,&quot;parentUUID&quot;:&quot;b4142639-e5b7-4675-9497-8290820e0e54&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e1cc2740-4172-41e4-a4d3-c0784f49c985&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5663cb45-2fd1-40da-9494-6348d5d724cc&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6ccd7b94-f59e-43d0-80e1-eccec110d587&quot;,&quot;title&quot;:&quot;Session Processor Tests&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/session-processor/test/integration/sessionEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sessionEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Session Processor Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5039,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let testConfig = await testLib.getTestConfig();\n       \nthis.timeout(105000);\nlet deletes = await redis.delAsync([fullStreamName, eventHistoryName, eventProcessedName, `${tenant}.activeSessions`]);\nconsole.log(deletes)\nlet sp = new StreamPublisher(testStreamName,tenant);\nawait sp.sendEvent(\&quot;login\&quot;, {\n  token: \&quot;abcd234\&quot;,\n  user:  {jwt_token: &#x27;xxxxx&#x27;, tenantId: testConfig.tenantOne.tenantId, sid: testConfig.tenantOne.adminUser.sid}\n})\nfor (let index = 0; index &lt; 5; index++) {\n    await sp.sendEvent(\&quot;extendSession\&quot;, {\n        token: \&quot;abcd234\&quot;,\n        user: {\n            sid: testConfig.tenantOne.adminUser.sid,\n            user_name: \&quot;iapprove\&quot;,\n            email: \&quot;iapprove@integrify.com\&quot;,\n            name: \&quot;System System\&quot;\n        }\n    })\n}\n\nforkedProcessor = await sessionStreamConsumer.forkStreamProcessor(tenant)\nawait delay(5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bac674e0-06bf-4f1c-b82d-e5c69b1fb6e1&quot;,&quot;parentUUID&quot;:&quot;6ccd7b94-f59e-43d0-80e1-eccec110d587&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Session Processor Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2c570ce-7c4d-4f12-aec6-cd2dae992527&quot;,&quot;parentUUID&quot;:&quot;6ccd7b94-f59e-43d0-80e1-eccec110d587&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;82ed3953-34c9-4d16-9ad7-93072bdd2414&quot;,&quot;title&quot;:&quot;stream processor&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/session-processor/test/integration/sessionEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sessionEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8eb77e97-799d-4bf3-9ea9-d8eb0c791f46&quot;,&quot;title&quot;:&quot;reads from session stream&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/session-processor/test/integration/sessionEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sessionEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should process events&quot;,&quot;fullTitle&quot;:&quot;Session Processor Tests stream processor reads from session stream should process events&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processedCount = await redis.zcardAsync(eventProcessedName)\n              let historyCount = await redis.zcardAsync(eventHistoryName)\n              expect(historyCount).to.equal(processedCount)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18f73baa-5e56-4ef8-acd0-da1d7cb75177&quot;,&quot;parentUUID&quot;:&quot;8eb77e97-799d-4bf3-9ea9-d8eb0c791f46&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;18f73baa-5e56-4ef8-acd0-da1d7cb75177&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8846742c-1ebd-4ecd-ba88-d608d0f6bd31&quot;,&quot;title&quot;:&quot;handles events&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/session-processor/test/integration/sessionEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sessionEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should push events into REDIS activeSession set&quot;,&quot;fullTitle&quot;:&quot;Session Processor Tests stream processor handles events should push events into REDIS activeSession set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let sessions = await redis.zrangebyscoreAsync(`${tenant}.activeSessions`, \&quot;-inf\&quot;, \&quot;+inf\&quot;);\nconsole.log(sessions)\nexpect(sessions).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f32c2d7-cfea-4cd2-8b85-1b2004893cfe&quot;,&quot;parentUUID&quot;:&quot;8846742c-1ebd-4ecd-ba88-d608d0f6bd31&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7f32c2d7-cfea-4cd2-8b85-1b2004893cfe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;903a9066-7b65-40f0-8dbb-a3fa199db106&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;47ac11bd-e01d-4128-8800-99bc8074ac6d&quot;,&quot;title&quot;:&quot;adminCategoryConfig.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;adminCategoryConfig.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=objectCatTree]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=btn_addCategory]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=dialog_addCategory]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=dialog_editCategory]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=dialog_deleteCategory]&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c3f3e66-ad27-4294-b6f7-9b44d754b5b0&quot;,&quot;parentUUID&quot;:&quot;47ac11bd-e01d-4128-8800-99bc8074ac6d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6c3f3e66-ad27-4294-b6f7-9b44d754b5b0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7c647119-93a5-4130-92cc-a1fc5b57590d&quot;,&quot;title&quot;:&quot;adminTreeAddObjectButton.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;adminTreeAddObjectButton.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(btn_addObject.exists()).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54ff809b-7020-4431-a5ee-4aaeed6db5cc&quot;,&quot;parentUUID&quot;:&quot;7c647119-93a5-4130-92cc-a1fc5b57590d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;54ff809b-7020-4431-a5ee-4aaeed6db5cc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e2ad2e40-c9d7-44ac-8c65-afa1168b621f&quot;,&quot;title&quot;:&quot;adminTreePermsButton.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;adminTreePermsButton.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(btn_permsButton.exists()).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c7d6c7ce-352f-4bf9-85ca-0366f196cb49&quot;,&quot;parentUUID&quot;:&quot;e2ad2e40-c9d7-44ac-8c65-afa1168b621f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c7d6c7ce-352f-4bf9-85ca-0366f196cb49&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;097aed03-65e0-4141-85d1-494ec8ab3289&quot;,&quot;title&quot;:&quot;adminTreeViewButton.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;adminTreeViewButton.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(btn_viewButton.exists()).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;442547e4-9ed0-4981-b610-f100271bf526&quot;,&quot;parentUUID&quot;:&quot;097aed03-65e0-4141-85d1-494ec8ab3289&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;442547e4-9ed0-4981-b610-f100271bf526&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6e314141-ac19-4407-aa35-661da41838cf&quot;,&quot;title&quot;:&quot;AddGroupDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;AddGroupDialog.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:62,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_AddGroupDialog.default);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ea789b0-b45b-4539-9097-486727a4db3b&quot;,&quot;parentUUID&quot;:&quot;6e314141-ac19-4407-aa35-661da41838cf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;417cd68b-8d84-4b2c-8c02-8cdec11aa17d&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays group fields&quot;,&quot;fullTitle&quot;:&quot;AddGroupDialog.vue inital state displays group fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=nameField]&#x27;)).to.exist;\nexpect(wrapper.find(&#x27;[data-test=descField]&#x27;)).to.exist;\nexpect(wrapper.find(&#x27;[data-test=dynamicField]&#x27;)).to.exist;\nexpect(wrapper.find(&#x27;[data-test=sqlField]&#x27;)).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;740dabec-a7fb-4f12-a6ea-112c39585b36&quot;,&quot;parentUUID&quot;:&quot;417cd68b-8d84-4b2c-8c02-8cdec11aa17d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;save button disabled&quot;,&quot;fullTitle&quot;:&quot;AddGroupDialog.vue inital state save button disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=saveButton]&#x27;).element.disabled).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b92b690f-8c1a-4098-af37-2fd9560a6e8f&quot;,&quot;parentUUID&quot;:&quot;417cd68b-8d84-4b2c-8c02-8cdec11aa17d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;740dabec-a7fb-4f12-a6ea-112c39585b36&quot;,&quot;b92b690f-8c1a-4098-af37-2fd9560a6e8f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;80ce8e27-7217-4c43-88a4-cd948ec38b7d&quot;,&quot;title&quot;:&quot;EditGroupDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EditGroupDialog.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:46,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\ngroup = {\n  groupName: \&quot;test group\&quot;,\n  groupDesc: \&quot;test group description\&quot;,\n  dynamic: false,\n  groupSql: \&quot;first_name like &#x27;%foo%&#x27;\&quot;\n};\nwrapper = (0, _mocks.initWrapper)(_EditGroupDialog.default, {\n  propsData: {\n    group\n  },\n  data() {\n    return {\n      activeTab: 0\n    };\n  },\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e56f104b-b1b9-47b2-916e-fb8e0f0c8da6&quot;,&quot;parentUUID&quot;:&quot;80ce8e27-7217-4c43-88a4-cd948ec38b7d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;182c25bb-dc60-49d7-a046-d99019475171&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays group fields&quot;,&quot;fullTitle&quot;:&quot;EditGroupDialog.vue inital state displays group fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=nameField]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=descField]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=dynamicField]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=sqlField]&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;559a485f-cb80-4ac5-a981-b1fd9317692f&quot;,&quot;parentUUID&quot;:&quot;182c25bb-dc60-49d7-a046-d99019475171&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;populates group fields&quot;,&quot;fullTitle&quot;:&quot;EditGroupDialog.vue inital state populates group fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=nameField]&#x27;).element.value).to.equal(group.groupName);\nexpect(wrapper.find(&#x27;[data-test=descField]&#x27;).element.value).to.equal(group.groupDesc);\nexpect(wrapper.find(&#x27;[data-test=sqlField]&#x27;).element.value).to.equal(group.groupSql);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e112f3b0-293c-4ffa-94ab-197a00001ed6&quot;,&quot;parentUUID&quot;:&quot;182c25bb-dc60-49d7-a046-d99019475171&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;559a485f-cb80-4ac5-a981-b1fd9317692f&quot;,&quot;e112f3b0-293c-4ffa-94ab-197a00001ed6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;773f2d1e-6a8f-475c-84bf-3bf362802ab8&quot;,&quot;title&quot;:&quot;GroupList.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GroupList.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:48,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_GroupList.default, {\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af42cca0-cc59-41b1-9a70-09a96a5dd718&quot;,&quot;parentUUID&quot;:&quot;773f2d1e-6a8f-475c-84bf-3bf362802ab8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8f3ef068-93fb-44e9-8458-b08a95bf5c4a&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays toolbar buttons&quot;,&quot;fullTitle&quot;:&quot;GroupList.vue inital state displays toolbar buttons&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const toolbar = wrapper.find(&#x27;[data-test=buttonBar]&#x27;);\nexpect(toolbar.exists()).to.equal(true);\nconst buttons = toolbar.findAll(&#x27;button&#x27;);\nexpect(buttons.at(0).text()).to.equal(&#x27;Add Group&#x27;);\nexpect(buttons.at(1).text()).to.equal(&#x27;Delete Group&#x27;);\nexpect(buttons.at(1).props().disabled).to.equal(true);\nexpect(buttons.at(2).text()).to.equal(&#x27;Set Roles &amp; Permissions&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3430b355-ee15-4077-9cf8-a8713140a7a7&quot;,&quot;parentUUID&quot;:&quot;8f3ef068-93fb-44e9-8458-b08a95bf5c4a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays list of groups&quot;,&quot;fullTitle&quot;:&quot;GroupList.vue inital state displays list of groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const table = wrapper.find(&#x27;div.v-data-table&#x27;);\nexpect(table.exists()).to.equal(true);\nconst rows = table.findAll(&#x27;table &gt; tbody &gt; tr&#x27;);\nconst adminRow = rows.at(0).findAll(&#x27;td&#x27;);\nconst userRow = rows.at(1).findAll(&#x27;td&#x27;);\nexpect(rows.length).to.equal(2);\nexpect(adminRow.at(3).text()).to.equal(&#x27;Administrators&#x27;); // group name column\nexpect(userRow.at(3).text()).to.equal(&#x27;Users&#x27;);\nexpect(adminRow.at(5).text()).to.equal(&#x27;No&#x27;); // dynamic column\nexpect(userRow.at(5).text()).to.equal(&#x27;Yes&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c94d8f5-a475-4ed0-9caa-d72123bd2706&quot;,&quot;parentUUID&quot;:&quot;8f3ef068-93fb-44e9-8458-b08a95bf5c4a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3430b355-ee15-4077-9cf8-a8713140a7a7&quot;,&quot;2c94d8f5-a475-4ed0-9caa-d72123bd2706&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d2007ddd-be94-4292-aff2-393ab063fb3c&quot;,&quot;title&quot;:&quot;GroupMembershipDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GroupMembershipDialog.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:88,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\ngroup = {\n  groupName: \&quot;test group\&quot;,\n  groupDesc: \&quot;test group description\&quot;,\n  dynamic: false,\n  groupSql: \&quot;first_name like &#x27;%foo%&#x27;\&quot;,\n  canManage: true,\n  canEdit: true\n};\nwrapper = (0, _mocks.initWrapper)(_GroupMembershipDialog.default, {\n  propsData: {\n    group\n  },\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69c801c0-9bec-4b18-97e0-5948acb5a62f&quot;,&quot;parentUUID&quot;:&quot;d2007ddd-be94-4292-aff2-393ab063fb3c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7f91f3f1-b857-4398-937a-cc7eb6da6345&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;membership tables&quot;,&quot;fullTitle&quot;:&quot;GroupMembershipDialog.vue inital state membership tables&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const nonMembersTable = wrapper.find(&#x27;[data-test=nonMembersTable]&#x27;);\nconst membersTable = wrapper.find(&#x27;[data-test=membersTable]&#x27;);\nexpect(nonMembersTable.exists()).to.equal(true);\nexpect(membersTable.exists()).to.equal(true); // Non members table\nlet rows = nonMembersTable.findAll(&#x27;table &gt; tbody &gt; tr&#x27;);\nlet firstRow = rows.at(0).findAll(&#x27;td&#x27;);\nexpect(rows.length).to.equal(3);\nexpect(firstRow.length).to.equal(5);\nexpect(firstRow.at(0).find(&#x27;div.v-simple-checkbox&#x27;).exists()).to.equal(true); //  selectable column\nexpect(firstRow.at(1).find(&#x27;button.mdi-plus-circle-outline&#x27;).exists()).to.equal(true); // button to add members\nexpect(firstRow.at(2).find(&#x27;i.mdi-account&#x27;).exists()).to.equal(true); // icon for user accoutn\nexpect(firstRow.at(3).text()).to.equal(&#x27;97&#x27;); // member id\nexpect(firstRow.at(4).text()).to.equal(&#x27;Joe User&#x27;); // member name\nexpect(rows.at(2).find(&#x27;i.mdi-account-multiple&#x27;).exists()).to.equal(true); // check a group member row renders with the group icon\n// Members table\nrows = membersTable.findAll(&#x27;table &gt; tbody &gt; tr&#x27;);\nexpect(rows.length).to.equal(2);\nfirstRow = rows.at(0).findAll(&#x27;td&#x27;);\nexpect(rows.length).to.equal(2);\nexpect(firstRow.length).to.equal(5);\nexpect(firstRow.at(0).find(&#x27;div.v-simple-checkbox&#x27;).exists()).to.equal(true); //  selectable column\nexpect(firstRow.at(1).find(&#x27;button.mdi-minus-circle-outline&#x27;).exists()).to.equal(true); // button to add members\nexpect(firstRow.at(2).find(&#x27;i.mdi-account&#x27;).exists()).to.equal(true); // icon for user accoutn\nexpect(firstRow.at(3).text()).to.equal(&#x27;98&#x27;); // member id\nexpect(firstRow.at(4).text()).to.equal(&#x27;Integrify Services&#x27;); // member name&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;edd3c274-db16-470b-9449-1e6ad56dbced&quot;,&quot;parentUUID&quot;:&quot;7f91f3f1-b857-4398-937a-cc7eb6da6345&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;edd3c274-db16-470b-9449-1e6ad56dbced&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1b8dc1e6-18f1-4dde-ad0b-b78a571b3e87&quot;,&quot;title&quot;:&quot;UserCreate.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserCreate.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:64,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserCreate.default, {\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d45521f2-4159-4566-b5bf-9d2772f700e1&quot;,&quot;parentUUID&quot;:&quot;1b8dc1e6-18f1-4dde-ad0b-b78a571b3e87&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should display all necessary fields&quot;,&quot;fullTitle&quot;:&quot;UserCreate.vue should display all necessary fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;[&#x27;firstName&#x27;, &#x27;middleName&#x27;, &#x27;lastName&#x27;, &#x27;username&#x27;, &#x27;email&#x27;, &#x27;locale&#x27;, &#x27;timezone&#x27;, &#x27;language&#x27;, &#x27;password&#x27;, &#x27;confirmPassword&#x27;].forEach(fieldName =&gt; {\n  const field = wrapper.find(`[data-test=${fieldName}Input]`);\n  expect(field.exists()).to.be.true;\n  expect(field.text()).to.be.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f78cc6c1-1bae-44df-a2bc-c27ceb43ea35&quot;,&quot;parentUUID&quot;:&quot;1b8dc1e6-18f1-4dde-ad0b-b78a571b3e87&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should display cancel and save btns&quot;,&quot;fullTitle&quot;:&quot;UserCreate.vue should display cancel and save btns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;[{\n  key: &#x27;cancelBtn&#x27;,\n  value: &#x27;Cancel&#x27;\n}, {\n  key: &#x27;saveBtn&#x27;,\n  value: &#x27;Save&#x27;\n}].forEach(btn =&gt; {\n  const button = wrapper.find(`[data-test=${btn.key}]`);\n  expect(button.exists()).to.be.true;\n  expect(button.text()).to.eq(btn.value);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c736b16-08ea-4ffe-bdf1-2839e3425129&quot;,&quot;parentUUID&quot;:&quot;1b8dc1e6-18f1-4dde-ad0b-b78a571b3e87&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f78cc6c1-1bae-44df-a2bc-c27ceb43ea35&quot;,&quot;4c736b16-08ea-4ffe-bdf1-2839e3425129&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;92bd326a-10bf-4370-bdc5-707360ff1f04&quot;,&quot;title&quot;:&quot;UserEdit.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// store = new Vuex.Store({modules: mockStore().modules})\nstore = new _vuex.default.Store({\n  modules: (0, _store.mockStore)({\n    state: {\n      selectedUser: _mockedData.mockedUser\n    },\n    actions: {\n      getUser: function () {\n        console.log(&#x27;--- getUser()&#x27;);\n        return { ..._mockedData.mockedUser\n        };\n      }\n    }\n  }).modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserEdit.default, {\n  store,\n  propsData: {\n    id: _mockedData.mockedUser.contactGuid\n  }\n});\nmockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a81ced3c-bfd0-40c4-a2b2-39f39377fb8e&quot;,&quot;parentUUID&quot;:&quot;92bd326a-10bf-4370-bdc5-707360ff1f04&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should always display page title&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue should always display page title&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const pageTitle = wrapper.find(&#x27;#pageTitle&#x27;);\nexpect(pageTitle.text()).to.eq(&#x27;Edit User&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2c4cb40-784b-4137-a8bb-2b9ff6fd0795&quot;,&quot;parentUUID&quot;:&quot;92bd326a-10bf-4370-bdc5-707360ff1f04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not display form if loading&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue should not display form if loading&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const form = wrapper.find(&#x27;form[data-test=userForm]&#x27;);\nexpect(form.exists()).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f008d683-2f99-4bc9-b475-a5d62bf180c2&quot;,&quot;parentUUID&quot;:&quot;92bd326a-10bf-4370-bdc5-707360ff1f04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should display form and btns if user information present&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue should display form and btns if user information present&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:190,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper.vm.$store.state.users.userLoading = false;\nawait wrapper.vm.$nextTick();\nconst form = wrapper.find(&#x27;form[data-test=userForm]&#x27;);\nexpect(form.exists()).to.be.true;\n[{\n  key: &#x27;cancelBtn&#x27;,\n  value: &#x27;Cancel&#x27;\n}, {\n  key: &#x27;saveBtn&#x27;,\n  value: &#x27;Save&#x27;\n}].forEach(btn =&gt; {\n  const button = wrapper.find(`[data-test=${btn.key}]`);\n  expect(button.exists()).to.be.true;\n  expect(button.text()).to.eq(btn.value);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9b2fcb1-bf41-482e-9fc1-7f6fcdf450dc&quot;,&quot;parentUUID&quot;:&quot;92bd326a-10bf-4370-bdc5-707360ff1f04&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c2c4cb40-784b-4137-a8bb-2b9ff6fd0795&quot;,&quot;f008d683-2f99-4bc9-b475-a5d62bf180c2&quot;,&quot;c9b2fcb1-bf41-482e-9fc1-7f6fcdf450dc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:192,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;108a4887-6a51-4639-bb1f-b215a5283d6c&quot;,&quot;title&quot;:&quot;UserEdit.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)({\n    state: {\n      selectedUser: _mockedData.mockedUser\n    }\n  }).modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserEditDelegation.default, {\n  store\n});\nmockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;feb8d89a-d37f-43e8-90d7-ccc5e0ffc667&quot;,&quot;parentUUID&quot;:&quot;108a4887-6a51-4639-bb1f-b215a5283d6c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should display all fields&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue should display all fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;[&#x27;delegate&#x27;, &#x27;processes&#x27;] // &#x27;startDate&#x27;, &#x27;startTime&#x27;, &#x27;endDate&#x27;, &#x27;endTime&#x27;\n.forEach(fieldName =&gt; {\n  const field = wrapper.find(`[data-test=${fieldName}Input]`);\n  expect(field.exists()).to.be.true;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1618b871-e666-4d8e-8416-e1ce20afb11a&quot;,&quot;parentUUID&quot;:&quot;108a4887-6a51-4639-bb1f-b215a5283d6c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1618b871-e666-4d8e-8416-e1ce20afb11a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;39a78792-6093-4b03-912c-9efd2e4c1c45&quot;,&quot;title&quot;:&quot;UserEditOrganizationalDetails.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserEditOrganizationalDetails.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:39,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserEditOrganizationalDetails.default, {\n  store\n});\nmockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96f0aa3d-ad0a-442e-ac29-564671151932&quot;,&quot;parentUUID&quot;:&quot;39a78792-6093-4b03-912c-9efd2e4c1c45&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should display all fields&quot;,&quot;fullTitle&quot;:&quot;UserEditOrganizationalDetails.vue should display all fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper.vm.$store.state.users.selectedUser = _mockedData.mockedUser;\nawait wrapper.vm.$nextTick();\n[&#x27;title&#x27;, &#x27;division&#x27;, &#x27;department&#x27;, &#x27;costCenter&#x27;, &#x27;location&#x27;, &#x27;phone&#x27;, &#x27;manager&#x27;].forEach(fieldName =&gt; {\n  const field = wrapper.find(`[data-test=${fieldName}Input]`);\n  expect(field.exists()).to.be.true;\n  if (!!field.element.value || !!_mockedData.mockedUser[fieldName]) {\n    expect(field.element.value).to.eq(_mockedData.mockedUser[fieldName]);\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d2417f6-99f1-451f-a749-e8cc68a86b39&quot;,&quot;parentUUID&quot;:&quot;39a78792-6093-4b03-912c-9efd2e4c1c45&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2d2417f6-99f1-451f-a749-e8cc68a86b39&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;79431a98-90e7-4633-9e2e-fcd58eb2773a&quot;,&quot;title&quot;:&quot;UserEditUserDetails.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserEditUserDetails.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:71,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserEditUserDetails.default, {\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6f55100-a0fb-47c3-b8de-9197529bf400&quot;,&quot;parentUUID&quot;:&quot;79431a98-90e7-4633-9e2e-fcd58eb2773a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should display card title&quot;,&quot;fullTitle&quot;:&quot;UserEditUserDetails.vue should display card title&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const title = wrapper.find(&#x27;.v-card__title&#x27;);\nexpect(title.exists()).to.be.true;\nexpect(title.text()).contains(&#x27;User Details&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46a23d5d-f647-4a5a-8a0e-bfea0914d0a5&quot;,&quot;parentUUID&quot;:&quot;79431a98-90e7-4633-9e2e-fcd58eb2773a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should display all fields&quot;,&quot;fullTitle&quot;:&quot;UserEditUserDetails.vue should display all fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:58,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper.vm.$store.state.users.selectedUser = _mockedData.mockedUser;\nawait wrapper.vm.$nextTick();\n[&#x27;firstName&#x27;, &#x27;middleName&#x27;, &#x27;lastName&#x27;, &#x27;contactId&#x27;, &#x27;userName&#x27;, &#x27;email&#x27;, &#x27;address1&#x27;, &#x27;address2&#x27;, &#x27;city&#x27;, &#x27;state&#x27;, &#x27;zip&#x27;, &#x27;country&#x27;, &#x27;language&#x27;, &#x27;timezone&#x27;, &#x27;locale&#x27;, &#x27;cField1&#x27;, &#x27;cField2&#x27;, &#x27;password&#x27;, &#x27;confirmPassword&#x27;].forEach(fieldName =&gt; {\n  const field = wrapper.find(`[data-test=${fieldName}Input]`);\n  expect(field.exists()).to.be.true;\n  if (!!field.element.value &amp;&amp; !!_mockedData.mockedUser[fieldName]) {\n    expect(field.element.value.toString()).to.eq(_mockedData.mockedUser[fieldName].toString());\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;16c25763-de27-4bed-9031-19d211df2dd1&quot;,&quot;parentUUID&quot;:&quot;79431a98-90e7-4633-9e2e-fcd58eb2773a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;46a23d5d-f647-4a5a-8a0e-bfea0914d0a5&quot;,&quot;16c25763-de27-4bed-9031-19d211df2dd1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:60,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e81f3f1d-7c93-4ab4-a6d6-f81f9269c5ae&quot;,&quot;title&quot;:&quot;UserFilterDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserFilterDialog.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:47,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserFilterDialog.default, {\n  store\n});\nmockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9768fac-e06d-405c-b228-a69c995cfe78&quot;,&quot;parentUUID&quot;:&quot;e81f3f1d-7c93-4ab4-a6d6-f81f9269c5ae&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;UserFilterDialog.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const title = wrapper.find(&#x27;.v-card__title .headline&#x27;);\nexpect(title.text()).to.eq(&#x27;User Filters&#x27;);\n[&#x27;lastName&#x27;, &#x27;firstName&#x27;, &#x27;username&#x27;, &#x27;email&#x27;, &#x27;title&#x27;, &#x27;managerName&#x27;, &#x27;costCenter&#x27;, &#x27;country&#x27;, &#x27;department&#x27;].forEach(fieldName =&gt; {\n  const field = wrapper.find(`[data-test=${fieldName}Input]`);\n  expect(field.exists()).to.be.true;\n  expect(field.element.value).to.be.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;addcefb4-b3e0-42c7-9df8-b62e6f88c7a8&quot;,&quot;parentUUID&quot;:&quot;e81f3f1d-7c93-4ab4-a6d6-f81f9269c5ae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should close dialog on clicking Close btn&quot;,&quot;fullTitle&quot;:&quot;UserFilterDialog.vue should close dialog on clicking Close btn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.vm.showDialog).to.be.false;\nwrapper.vm.$store.state.users.showDialog = true;\nawait wrapper.vm.$nextTick();\nexpect(wrapper.vm.showDialog).to.be.true;\nconst closeBtn = wrapper.find(&#x27;[data-test=closeBtn]&#x27;);\nexpect(closeBtn.exists()).to.be.true;\nawait closeBtn.trigger(&#x27;click&#x27;);\nexpect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;\nexpect(mockstore.actions.getUsers).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;077c44db-aed8-460c-95f5-74befae7d720&quot;,&quot;parentUUID&quot;:&quot;e81f3f1d-7c93-4ab4-a6d6-f81f9269c5ae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;addcefb4-b3e0-42c7-9df8-b62e6f88c7a8&quot;,&quot;077c44db-aed8-460c-95f5-74befae7d720&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:50,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;49fa8cc2-703b-4d4a-8f81-cea12956fd27&quot;,&quot;title&quot;:&quot;UserList.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserList.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:42,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserList.default, {\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b94ea2b6-3ed9-4a34-9f13-e2f874797bc9&quot;,&quot;parentUUID&quot;:&quot;49fa8cc2-703b-4d4a-8f81-cea12956fd27&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should contain pageTitle and search input&quot;,&quot;fullTitle&quot;:&quot;UserList.vue should contain pageTitle and search input&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// pageTitle\nconst pageTitle = wrapper.find(&#x27;#pageTitle&#x27;);\nexpect(pageTitle.exists()).to.be.true;\nexpect(pageTitle.text()).to.eq(&#x27;Users&#x27;); // searchInput\nconst searchInput = wrapper.get(&#x27;input#searchText&#x27;);\nexpect(searchInput.exists()).to.be.true;\nexpect(searchInput.text()).to.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;493f00c0-145d-4f08-bc02-4831ca5137c5&quot;,&quot;parentUUID&quot;:&quot;49fa8cc2-703b-4d4a-8f81-cea12956fd27&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should display toolbar buttons&quot;,&quot;fullTitle&quot;:&quot;UserList.vue should display toolbar buttons&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;[{\n  key: &#x27;addUserBtn&#x27;,\n  value: &#x27;Add User&#x27;\n}, {\n  key: &#x27;replaceUserBtn&#x27;,\n  value: &#x27;Replace User&#x27;\n}].forEach(btn =&gt; {\n  const button = wrapper.find(`[data-test=${btn.key}]`);\n  expect(button.exists()).to.be.true;\n  expect(button.text()).to.eq(btn.value);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2ca0cd8-25a2-4f6e-8f92-dc61db1180d9&quot;,&quot;parentUUID&quot;:&quot;49fa8cc2-703b-4d4a-8f81-cea12956fd27&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should display list of users&quot;,&quot;fullTitle&quot;:&quot;UserList.vue should display list of users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const table = wrapper.find(&#x27;[data-test=usersTable]&#x27;);\nexpect(table.exists()).to.be.true;\nconst header = table.find(&#x27;table &gt; thead&#x27;);\n[&#x27;Last Name&#x27;, &#x27;First Name&#x27;, &#x27;Username&#x27;, &#x27;Email&#x27;, &#x27;Created&#x27;, &#x27;Last Updated&#x27;, &#x27;Active&#x27;].forEach(colName =&gt; {\n  expect(header.text()).contains(colName);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69515c70-d272-4677-a125-da6ce5671d7f&quot;,&quot;parentUUID&quot;:&quot;49fa8cc2-703b-4d4a-8f81-cea12956fd27&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;493f00c0-145d-4f08-bc02-4831ca5137c5&quot;,&quot;f2ca0cd8-25a2-4f6e-8f92-dc61db1180d9&quot;,&quot;69515c70-d272-4677-a125-da6ce5671d7f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c811ecad-ae05-4a58-be26-6764d1d2288e&quot;,&quot;title&quot;:&quot;users store actions&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;users store actions \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;commit = _sinon.default.spy();\nstate = { ..._users.default.state\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0eae3cce-719b-4973-950f-d0c3924676ab&quot;,&quot;parentUUID&quot;:&quot;c811ecad-ae05-4a58-be26-6764d1d2288e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;users store actions \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;_sinon.default.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13236613-6774-4b6f-abed-f8722933ee1b&quot;,&quot;parentUUID&quot;:&quot;c811ecad-ae05-4a58-be26-6764d1d2288e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should getUsers&quot;,&quot;fullTitle&quot;:&quot;users store actions should getUsers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await _actions.default.getUsers({\n  commit,\n  state\n}, _commonLib.default);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_LIST_LOADING&#x27;, true]);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_USERS&#x27;, [..._mockedData.mockedUsers]]);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_USERS_TOTAL&#x27;, _mockedData.mockedUsers.length]);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_LIST_LOADING&#x27;, false]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b82550b-e2df-419d-9d25-a6a9df76d779&quot;,&quot;parentUUID&quot;:&quot;c811ecad-ae05-4a58-be26-6764d1d2288e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getUser&quot;,&quot;fullTitle&quot;:&quot;users store actions should getUser&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const user = { ..._mockedData.mockedUser\n};\nawait _actions.default.getUser({\n  commit,\n  state\n}, {\n  userGuid: user.contactGuid,\n  $commonLib: _commonLib.default\n});\nuser.active = !user.deletedDate;\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_USER_LOADING&#x27;, true]);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_SELECTED_USER&#x27;, user]);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_USER_LOADING&#x27;, false]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9f1234d1-557d-4db4-852a-8054ffb27941&quot;,&quot;parentUUID&quot;:&quot;c811ecad-ae05-4a58-be26-6764d1d2288e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insertUser&quot;,&quot;fullTitle&quot;:&quot;users store actions should insertUser&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await _actions.default.insertUser({\n  commit,\n  state\n}, _commonLib.default);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_SELECTED_USER&#x27;, _mockedData.mockedUser]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab4ce14f-44a3-48ff-b1d9-150c8f2c4553&quot;,&quot;parentUUID&quot;:&quot;c811ecad-ae05-4a58-be26-6764d1d2288e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should clearFiltersAndOptions&quot;,&quot;fullTitle&quot;:&quot;users store actions should clearFiltersAndOptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;_actions.default.clearFiltersAndOptions({\n  commit,\n  state\n});\n(0, _chai.expect)(commit.args).to.deep.eq([[&#x27;CLEAR_FILTERS&#x27;], [&#x27;SET_LIST_OPTIONS&#x27;]]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8feac3bf-ea8f-4d6e-8b41-a6490e84cfc0&quot;,&quot;parentUUID&quot;:&quot;c811ecad-ae05-4a58-be26-6764d1d2288e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4b82550b-e2df-419d-9d25-a6a9df76d779&quot;,&quot;9f1234d1-557d-4db4-852a-8054ffb27941&quot;,&quot;ab4ce14f-44a3-48ff-b1d9-150c8f2c4553&quot;,&quot;8feac3bf-ea8f-4d6e-8b41-a6490e84cfc0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;352e9211-1b13-48f6-8d26-1fa0aa5f3a14&quot;,&quot;title&quot;:&quot;users store getters&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get users&quot;,&quot;fullTitle&quot;:&quot;users store getters should get users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;state.users = [..._mockedData.mockedUsers];\nconst users = _getters.default.users(state);\n(0, _chai.expect)(users).to.deep.equal(_mockedData.mockedUsers);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42bd4b42-2a4f-418d-aa7a-a190b9e961d8&quot;,&quot;parentUUID&quot;:&quot;352e9211-1b13-48f6-8d26-1fa0aa5f3a14&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get filterCount&quot;,&quot;fullTitle&quot;:&quot;users store getters should get filterCount&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;(0, _chai.expect)(_getters.default.filterCount(state)).to.eq(0);\nstate.filters.lastName = &#x27;foo&#x27;;\nstate.filters.firstName = &#x27;bar&#x27;;\nstate.filters.costCenter = &#x27;costCenter&#x27;;\nstate.filters.country = &#x27;&#x27;;\nstate.filters.activeOnly = true;\n(0, _chai.expect)(_getters.default.filterCount(state)).to.eq(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e13ad52c-d829-43f7-bbfd-48fb97253762&quot;,&quot;parentUUID&quot;:&quot;352e9211-1b13-48f6-8d26-1fa0aa5f3a14&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;42bd4b42-2a4f-418d-aa7a-a190b9e961d8&quot;,&quot;e13ad52c-d829-43f7-bbfd-48fb97253762&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;95c7a638-a4c1-4978-8f85-45d50a49143b&quot;,&quot;title&quot;:&quot;users store mutations&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should SET_USERS&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_USERS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_USERS(state, [..._mockedData.mockedUsers]);\n(0, _chai.expect)(state.users).to.deep.eq(_mockedData.mockedUsers);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb3ff96f-8bb9-4931-be24-c73c5caf7c90&quot;,&quot;parentUUID&quot;:&quot;95c7a638-a4c1-4978-8f85-45d50a49143b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_USERS_TOTAL&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_USERS_TOTAL&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_USERS_TOTAL(state, _mockedData.mockedUsers.length);\n(0, _chai.expect)(state.total).to.eq(_mockedData.mockedUsers.length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f62aa29-036e-4132-90e7-55f56cf6627f&quot;,&quot;parentUUID&quot;:&quot;95c7a638-a4c1-4978-8f85-45d50a49143b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SEARCH&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_SEARCH&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const searchTxt = &#x27;searching for something&#x27;;\nSET_SEARCH(state, searchTxt);\n(0, _chai.expect)(state.search).to.eq(searchTxt);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c15e2ccc-c224-4725-8b25-0f4d839419bd&quot;,&quot;parentUUID&quot;:&quot;95c7a638-a4c1-4978-8f85-45d50a49143b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_LIST_LOADING&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_LIST_LOADING&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_LIST_LOADING(state, true);\n(0, _chai.expect)(state.listLoading).to.eq(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56bb182b-669c-4117-8df9-c3356f175c3c&quot;,&quot;parentUUID&quot;:&quot;95c7a638-a4c1-4978-8f85-45d50a49143b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should CLEAR_FILTERS&quot;,&quot;fullTitle&quot;:&quot;users store mutations should CLEAR_FILTERS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;state.filters = {\n  lastName: &#x27;test last name&#x27;,\n  firstName: &#x27;first name&#x27;,\n  userName: &#x27;fooBar&#x27;,\n  email: &#x27;foo@bar.com&#x27;,\n  title: &#x27;my title&#x27;,\n  managerName: &#x27;manager name&#x27;,\n  managerGuid: 123,\n  costCenter: &#x27;cost center&#x27;,\n  country: &#x27;USM&#x27;,\n  department: &#x27;manager of managers&#x27;,\n  activeOnly: true\n};\nCLEAR_FILTERS(state);\n(0, _chai.expect)(state.filters).to.deep.eq({\n  lastName: null,\n  firstName: null,\n  userName: null,\n  email: null,\n  title: null,\n  managerName: null,\n  managerGuid: null,\n  costCenter: null,\n  country: null,\n  department: null,\n  activeOnly: false\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c97eefe2-7e73-47c1-97c4-3aff23ea9abe&quot;,&quot;parentUUID&quot;:&quot;95c7a638-a4c1-4978-8f85-45d50a49143b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_LIST_OPTIONS&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_LIST_OPTIONS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const listOptions = {\n  sortBy: [&#x27;firstName&#x27;],\n  sortDesc: [true],\n  page: 2\n};\nSET_LIST_OPTIONS(state, listOptions);\n(0, _chai.expect)(state.listOptions).to.deep.eq(listOptions); // clear listOptions\nSET_LIST_OPTIONS(state);\n(0, _chai.expect)(state.listOptions).to.deep.eq({\n  sortBy: [],\n  sortDesc: [],\n  page: 1\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8da0768b-c904-48da-9364-d23df61cc908&quot;,&quot;parentUUID&quot;:&quot;95c7a638-a4c1-4978-8f85-45d50a49143b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SHOW_DIALOG&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_SHOW_DIALOG&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_SHOW_DIALOG(state, true);\n(0, _chai.expect)(state.showDialog).to.eq(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48a9d1c1-993e-4218-a0e3-c754352c533a&quot;,&quot;parentUUID&quot;:&quot;95c7a638-a4c1-4978-8f85-45d50a49143b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_USER_LOADING&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_USER_LOADING&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_USER_LOADING(state, false);\n(0, _chai.expect)(state.userLoading).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b1ed63b-3bca-437b-9b45-ea63addcae6c&quot;,&quot;parentUUID&quot;:&quot;95c7a638-a4c1-4978-8f85-45d50a49143b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_IS_CHECKING_USERNAME&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_IS_CHECKING_USERNAME&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_IS_CHECKING_USERNAME(state, true);\n(0, _chai.expect)(state.isCheckingUsername).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;49a68c61-69da-4c3f-926b-401db921b50d&quot;,&quot;parentUUID&quot;:&quot;95c7a638-a4c1-4978-8f85-45d50a49143b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SELECTED_USER&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_SELECTED_USER&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const user = { ..._mockedData.mockedUser,\n  password: &#x27;testPwd&#x27;,\n  confirmPassword: &#x27;testPwd&#x27;\n};\nSET_SELECTED_USER(state, user);\n(0, _chai.expect)(state.selectedUser).to.deep.eq(user); // when no user specified\nSET_SELECTED_USER(state);\n(0, _chai.expect)(state.selectedUser).to.deep.eq({\n  firstName: &#x27;&#x27;,\n  middleName: &#x27;&#x27;,\n  lastName: &#x27;&#x27;,\n  userName: &#x27;&#x27;,\n  email: &#x27;&#x27;,\n  locale: &#x27;en-US&#x27;,\n  timezone: &#x27;&#x27;,\n  languageGuid: &#x27;2a803d80-de6d-4adc-a642-4e3d831f5460&#x27;,\n  // US English\n  password: &#x27;&#x27;,\n  confirmPassword: &#x27;&#x27;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;732271dc-74b6-4846-ba13-03513a1d10f7&quot;,&quot;parentUUID&quot;:&quot;95c7a638-a4c1-4978-8f85-45d50a49143b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_LOCALES&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_LOCALES&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_LOCALES(state, [..._mockedData.mockedLocales]);\n(0, _chai.expect)(state.locales).to.deep.eq(_mockedData.mockedLocales);\nSET_LOCALES(state);\n(0, _chai.expect)(state.locales).to.deep.eq([]);\nSET_LOCALES(state, []);\n(0, _chai.expect)(state.locales).to.deep.eq([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9f7dc13-be9b-46dd-902d-1bef7fdf7589&quot;,&quot;parentUUID&quot;:&quot;95c7a638-a4c1-4978-8f85-45d50a49143b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_DELEGATION_START_DATE&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_DELEGATION_START_DATE&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const date = &#x27;2020-01-12&#x27;;\nSET_SELECTED_USER(state, { ..._mockedData.mockedUser\n});\nSET_DELEGATION_START_DATE(state, date);\n(0, _chai.expect)(state.selectedUser.delegate.startDate).to.eq(date);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ebee0e4-c16e-4189-b674-60159173d4e2&quot;,&quot;parentUUID&quot;:&quot;95c7a638-a4c1-4978-8f85-45d50a49143b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fb3ff96f-8bb9-4931-be24-c73c5caf7c90&quot;,&quot;3f62aa29-036e-4132-90e7-55f56cf6627f&quot;,&quot;c15e2ccc-c224-4725-8b25-0f4d839419bd&quot;,&quot;56bb182b-669c-4117-8df9-c3356f175c3c&quot;,&quot;c97eefe2-7e73-47c1-97c4-3aff23ea9abe&quot;,&quot;8da0768b-c904-48da-9364-d23df61cc908&quot;,&quot;48a9d1c1-993e-4218-a0e3-c754352c533a&quot;,&quot;1b1ed63b-3bca-437b-9b45-ea63addcae6c&quot;,&quot;49a68c61-69da-4c3f-926b-401db921b50d&quot;,&quot;732271dc-74b6-4846-ba13-03513a1d10f7&quot;,&quot;e9f7dc13-be9b-46dd-902d-1bef7fdf7589&quot;,&quot;7ebee0e4-c16e-4189-b674-60159173d4e2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b66aa896-cb8e-4668-860d-bcc4cd553efb&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5b9e5f5e-5b24-442c-990f-8a4698c74334&quot;,&quot;title&quot;:&quot;recentlyVisited&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/libs/commonLib/tests/unit/bookmarks.spec.js&quot;,&quot;file&quot;:&quot;/tests/unit/bookmarks.spec.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;recentlyVisited\&quot;&quot;,&quot;fullTitle&quot;:&quot;recentlyVisited \&quot;before each\&quot; hook in \&quot;recentlyVisited\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const dom = new JSDOM(\&quot;&lt;html&gt;\\n       &lt;body&gt;\\n          &lt;div class=\\\&quot;v-toolbar__title hidden-sm-and-down\\\&quot;&gt;Holidays&lt;/div&gt;\\n       &lt;/body&gt;\\n     &lt;/html&gt;\&quot;);\nglobal.window = dom.window;\nglobal.document = dom.window.document;\nglobal.location = {\n  hostname: hostname\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04c7952a-5a6e-448a-97f7-5a6becafd87f&quot;,&quot;parentUUID&quot;:&quot;5b9e5f5e-5b24-442c-990f-8a4698c74334&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;adds to recently visted history&quot;,&quot;fullTitle&quot;:&quot;recentlyVisited adds to recently visted history&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const bookmarks = require(&#x27;./mocks/bookmarks&#x27;);\nexpect(bookmarks.recentlyVisited).to.be.empty;\nawait bookmarks.addRecentlyVisited();\nexpect(bookmarks.recentlyVisited.length).to.equal(1);\nexpect(bookmarks.recentlyVisited[0].label).to.equal(&#x27;Holidays&#x27;);\nexpect(bookmarks.recentlyVisited[0].icon).to.equal(&#x27;mdi-calendar-month&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;492d23d2-3734-4b2a-8c00-7d4955655105&quot;,&quot;parentUUID&quot;:&quot;5b9e5f5e-5b24-442c-990f-8a4698c74334&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;492d23d2-3734-4b2a-8c00-7d4955655105&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e4cbe644-c042-40e7-b914-669902cce242&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;04cbaf71-d1de-433f-b535-bbcd1a04387c&quot;,&quot;title&quot;:&quot;CategorySelect.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;CategorySelect.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:128,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_CategorySelect.CategorySelect, {\n  showDialog: false\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0889ed27-1e0a-4144-b46e-c816a90dcb12&quot;,&quot;parentUUID&quot;:&quot;04cbaf71-d1de-433f-b535-bbcd1a04387c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5d37602d-b021-43f2-9b91-8933c48dec02&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;renders correctly&quot;,&quot;fullTitle&quot;:&quot;CategorySelect.vue inital state renders correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=input_categorySelect]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=dialog_categorySelect]&#x27;).exists()).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a5c7a36-9000-4876-a177-1c428efe76ff&quot;,&quot;parentUUID&quot;:&quot;5d37602d-b021-43f2-9b91-8933c48dec02&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9a5c7a36-9000-4876-a177-1c428efe76ff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;644df182-45da-453b-83a6-864a0d96e531&quot;,&quot;title&quot;:&quot;CategorySelectDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;CategorySelectDialog.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:54,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_CategorySelectDialog.default, {\n  items: _mockedCategoryResponse.default\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff8c4d6e-9686-4d80-bbc8-63e076bb9f81&quot;,&quot;parentUUID&quot;:&quot;644df182-45da-453b-83a6-864a0d96e531&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5b454afb-7691-4544-8595-d55526468742&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;renders correctly&quot;,&quot;fullTitle&quot;:&quot;CategorySelectDialog.vue inital state renders correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=objectCatTree]&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;718a890d-f016-4030-9380-de603dc6d195&quot;,&quot;parentUUID&quot;:&quot;5b454afb-7691-4544-8595-d55526468742&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;718a890d-f016-4030-9380-de603dc6d195&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7904b400-b5cf-4ad8-9928-05a6fe456fe1&quot;,&quot;title&quot;:&quot;CategoryTreeTable.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;CategoryTreeTable.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_CategoryTreeTable.CategoryTreeTable, {\n  objectType: &#x27;forms&#x27;,\n  objectData: _mockedData.mockedObjectData,\n  items: _mockedCategoryResponse.mockedCategoryResponse\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9a2cd7b-9dda-49d0-882c-f11a09d6340c&quot;,&quot;parentUUID&quot;:&quot;7904b400-b5cf-4ad8-9928-05a6fe456fe1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ea71d5ed-2c2a-48ff-8a49-b71dedaf133e&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;renders correctly&quot;,&quot;fullTitle&quot;:&quot;CategoryTreeTable.vue inital state renders correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=objectCatTree]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=objectCatTree_permsButtonComponent]&#x27;).exists()).to.equal(false);\nexpect(wrapper.find(&#x27;[data-test=objectCatTree_datatable]&#x27;).exists()).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05b93de5-6519-4be5-96ee-f8c436a98ac1&quot;,&quot;parentUUID&quot;:&quot;ea71d5ed-2c2a-48ff-8a49-b71dedaf133e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;05b93de5-6519-4be5-96ee-f8c436a98ac1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;acc05a50-d2b0-4542-9bc2-0d59ea7d6a5e&quot;,&quot;title&quot;:&quot;Report.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Report.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:55,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_Reports.Report);\ndocument.body.setAttribute(&#x27;data-app&#x27;, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bef96acc-4e94-48cc-a810-3ea882f8f237&quot;,&quot;parentUUID&quot;:&quot;acc05a50-d2b0-4542-9bc2-0d59ea7d6a5e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;aae530e4-b14e-4b2c-87f1-4f67e39a521d&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays toolbar buttons&quot;,&quot;fullTitle&quot;:&quot;Report.vue inital state displays toolbar buttons&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;button i.mdi-refresh&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;button i.mdi-filter-plus-outline&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;button.mdi-export&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;213e22ab-6c2b-4997-bb15-1be6da3dd471&quot;,&quot;parentUUID&quot;:&quot;aae530e4-b14e-4b2c-87f1-4f67e39a521d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays report name&quot;,&quot;fullTitle&quot;:&quot;Report.vue inital state displays report name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;.v-toolbar__title&#x27;).text()).to.equal(&#x27;Report - Update profile tasks&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;827a3257-0170-441e-981d-232f78969571&quot;,&quot;parentUUID&quot;:&quot;aae530e4-b14e-4b2c-87f1-4f67e39a521d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;213e22ab-6c2b-4997-bb15-1be6da3dd471&quot;,&quot;827a3257-0170-441e-981d-232f78969571&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4a131d64-5431-4205-820c-8ced0bf3c56c&quot;,&quot;title&quot;:&quot;ReportTable.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;ReportTable.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:69,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_Reports.ReportTable, {\n  propsData: {\n    report: _mockedData.mockedFormattedReport\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14606706-c137-4144-a5dc-0f325de36959&quot;,&quot;parentUUID&quot;:&quot;4a131d64-5431-4205-820c-8ced0bf3c56c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7736ab2d-5549-4851-b4fe-11d74c5242ae&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;renders column headers&quot;,&quot;fullTitle&quot;:&quot;ReportTable.vue inital state renders column headers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const headers = wrapper.findAll(&#x27;th&#x27;);\nconst expectedHeaders = [\&quot;Request Link\&quot;, \&quot;Username\&quot;, \&quot;ID For Manage Task\&quot;, \&quot;Status\&quot;, \&quot;Time from Start to Complete\&quot;, \&quot;Date Completed\&quot;, \&quot;Manager ID\&quot;, \&quot;System ID\&quot;, \&quot;Name\&quot;];\nexpectedHeaders.forEach((title, i) =&gt; expect(headers.at(i).text()).to.equal(title));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9fb26325-262e-4afa-b3df-bd60608919d6&quot;,&quot;parentUUID&quot;:&quot;7736ab2d-5549-4851-b4fe-11d74c5242ae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;renders links with the correct icons&quot;,&quot;fullTitle&quot;:&quot;ReportTable.vue inital state renders links with the correct icons&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const firstRow = wrapper.find(&#x27;tbody &gt; tr&#x27;).findAll(&#x27;td&#x27;);\nexpect(firstRow.length).to.equal(9);\nexpect(firstRow.at(0).find(&#x27;button.mdi-magnify&#x27;).exists()).to.equal(true); // Request link\nexpect(firstRow.at(1).text()).to.equal(&#x27;juser&#x27;); // Username\nexpect(firstRow.at(2).find(&#x27;.mdi-menu-open&#x27;).exists()).to.equal(true); // Manage Task menu icon\nexpect(firstRow.at(2).find(&#x27;.v-menu&#x27;).exists()).to.equal(true); // manage task menu\nexpect(firstRow.at(3).text()).to.equal(&#x27;Completed&#x27;); // status\nexpect(firstRow.at(5).text()).to.equal(&#x27;2/24/2021&#x27;); // date completed\nexpect(firstRow.at(6).text()).to.equal(&#x27;1&#x27;); // manager id\nexpect(firstRow.at(7).find(&#x27;button.mdi-magnify&#x27;).exists()).to.equal(true); // link to Task\nexpect(firstRow.at(8).text()).to.equal(&#x27;System Task - Update Profile&#x27;); // task name&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2730b4c1-6541-4ba5-b941-0e07ef2db2ec&quot;,&quot;parentUUID&quot;:&quot;7736ab2d-5549-4851-b4fe-11d74c5242ae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9fb26325-262e-4afa-b3df-bd60608919d6&quot;,&quot;2730b4c1-6541-4ba5-b941-0e07ef2db2ec&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8de89096-b069-4784-961e-992d374f25d8&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;commits SET_SELECTED_FOR_EDIT mutation&quot;,&quot;fullTitle&quot;:&quot;commits SET_SELECTED_FOR_EDIT mutation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(mockstore.mutations.SET_SELECTED_FOR_EDIT).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;491f8b66-1aa6-4276-82c9-376a6680ee50&quot;,&quot;parentUUID&quot;:&quot;8de89096-b069-4784-961e-992d374f25d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;commits SET_SHOW_DIALOG mutation&quot;,&quot;fullTitle&quot;:&quot;commits SET_SHOW_DIALOG mutation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8951cc2a-f440-4b85-a58e-392360f68416&quot;,&quot;parentUUID&quot;:&quot;8de89096-b069-4784-961e-992d374f25d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ebc45bbd-41c6-438e-af00-d9fd39421757&quot;,&quot;title&quot;:&quot;PasswordSettings.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;renders correctly&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue renders correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(pwdSettingsApi.listPasswordSettings).to.have.been.called;\nexpect(pwdExpirationActiveCheckBox).to.be.exist;\nexpect(pwdExpirationActiveCheckBox.element.checked).to.equal(false);\nexpect(pwdExpirationTextBox).to.be.exist;\nexpect(pwdExpirationTextBox.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);\nexpect(pwdExpirationTextBox.element.value).to.equal(&#x27;7&#x27;);\nexpect(pwdStrengthActiveCheckBox).to.be.exist;\nexpect(pwdStrengthActiveCheckBox.element.checked).to.equal(false);\nexpect(minPwdLengthTextBox).to.be.exist;\nexpect(minPwdLengthTextBox.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);\nexpect(minPwdLengthTextBox.element.value).to.equal(&#x27;3&#x27;);\nexpect(maxPwdLengthTextBox).to.be.exist;\nexpect(maxPwdLengthTextBox.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);\nexpect(maxPwdLengthTextBox.element.value).to.equal(&#x27;10&#x27;);\nexpect(pwdStrengthExpressionTextBox).to.be.exist;\nexpect(pwdStrengthExpressionTextBox.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;); // remember \\\\ is escaped \\\nexpect(pwdStrengthExpressionTextBox.element.value).to.equal(&#x27;^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{3,10}$&#x27;);\nconst restoreButton = wrapper.find(&#x27;button#restoreDefaultPwdStrengthExpression&#x27;);\nexpect(restoreButton).to.be.exist;\nexpect(restoreButton.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);\nexpect(wrapper.find(&#x27;button#save&#x27;)).to.be.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1c02f58-f0ea-424f-984e-6313676b8dae&quot;,&quot;parentUUID&quot;:&quot;ebc45bbd-41c6-438e-af00-d9fd39421757&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;00c438ca-13fd-43df-9b40-20609eec63cf&quot;,&quot;title&quot;:&quot;checkboxes enabling textboxes&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;enables Expiration (days) textbox when Enforce Password Expiration checkbox is checked&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue checkboxes enabling textboxes enables Expiration (days) textbox when Enforce Password Expiration checkbox is checked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pwdExpirationActiveCheckBox.trigger(&#x27;click&#x27;);\nawait wrapper.vm.$nextTick();\nexpect(pwdExpirationActiveCheckBox.element.checked).to.equal(true);\nexpect(pwdExpirationTextBox.attributes(&#x27;disabled&#x27;)).to.equal(undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e6e3b97-adec-4e03-a517-c371d5df4cbb&quot;,&quot;parentUUID&quot;:&quot;00c438ca-13fd-43df-9b40-20609eec63cf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;enables min/max password length and strength expression textboxes when Enforce Password Strength checkbox is checked&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue checkboxes enabling textboxes enables min/max password length and strength expression textboxes when Enforce Password Strength checkbox is checked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pwdStrengthActiveCheckBox.trigger(&#x27;click&#x27;);\nawait wrapper.vm.$nextTick();\nexpect(pwdStrengthActiveCheckBox.element.checked).to.equal(true);\nexpect(minPwdLengthTextBox.attributes(&#x27;disabled&#x27;)).to.equal(undefined);\nexpect(maxPwdLengthTextBox.attributes(&#x27;disabled&#x27;)).to.equal(undefined);\nexpect(pwdStrengthExpressionTextBox.attributes(&#x27;disabled&#x27;)).to.equal(undefined);\nconst restoreButton = wrapper.find(&#x27;button#restoreDefaultPwdStrengthExpression&#x27;);\nexpect(restoreButton.attributes(&#x27;disabled&#x27;)).to.equal(undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;06d8805e-122d-4735-9ae4-170e54ac8402&quot;,&quot;parentUUID&quot;:&quot;00c438ca-13fd-43df-9b40-20609eec63cf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8e6e3b97-adec-4e03-a517-c371d5df4cbb&quot;,&quot;06d8805e-122d-4735-9ae4-170e54ac8402&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:27,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a0897912-56b4-4d28-a351-3c545535d8dc&quot;,&quot;title&quot;:&quot;password length change effects on strength regular expression&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;correctly adjusts strength expression when min pwd length changes&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue password length change effects on strength regular expression correctly adjusts strength expression when min pwd length changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pwdStrengthActiveCheckBox.trigger(&#x27;click&#x27;);\nminPwdLengthTextBox.element.value = &#x27;4&#x27;;\nminPwdLengthTextBox.trigger(&#x27;input&#x27;);\nmaxPwdLengthTextBox.element.value = &#x27;11&#x27;;\nmaxPwdLengthTextBox.trigger(&#x27;input&#x27;);\nawait wrapper.vm.$nextTick(); // remember \\\\ is escaped \\\nexpect(pwdStrengthExpressionTextBox.element.value).to.equal(&#x27;^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{4,11}$&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;620190c1-645f-4f57-a39e-ce7b9cd4a2c3&quot;,&quot;parentUUID&quot;:&quot;a0897912-56b4-4d28-a351-3c545535d8dc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;620190c1-645f-4f57-a39e-ce7b9cd4a2c3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;054c01a1-4d2d-42a6-9475-6791ae6738ab&quot;,&quot;title&quot;:&quot;restore default password strength&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;restores default password strength values when restore button is clicked&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue restore default password strength restores default password strength values when restore button is clicked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pwdStrengthActiveCheckBox.trigger(&#x27;click&#x27;);\nawait minPwdLengthTextBox.setValue(&#x27;4&#x27;);\nawait maxPwdLengthTextBox.setValue(&#x27;11&#x27;);\nawait wrapper.find(&#x27;button#restoreDefaultPwdStrengthExpression&#x27;).trigger(&#x27;click&#x27;); // remember \\\\ is escaped \\\nexpect(pwdStrengthExpressionTextBox.element.value).to.equal(&#x27;^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{3,10}$&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;704f17ae-3cc0-4459-90ab-be2159fe6096&quot;,&quot;parentUUID&quot;:&quot;054c01a1-4d2d-42a6-9475-6791ae6738ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;704f17ae-3cc0-4459-90ab-be2159fe6096&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;27947abf-880e-4a59-a111-52f8f6c58619&quot;,&quot;title&quot;:&quot;save password settings&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;calls updatePasswordSettings with correct params when Save button is clicked&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue save password settings calls updatePasswordSettings with correct params when Save button is clicked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(pwdExpirationActiveCheckBox.element.checked).to.equal(true); // change some settings in ui. make sure api call has correct params when saved\npwdExpirationTextBox.setValue(&#x27;10&#x27;);\nawait minPwdLengthTextBox.setValue(&#x27;4&#x27;);\nawait maxPwdLengthTextBox.setValue(&#x27;11&#x27;);\nwrapper.find(&#x27;button#save&#x27;).trigger(&#x27;click&#x27;);\nexpect(pwdSettingsApi.updatePasswordSettings).to.have.been.called;\nconst requestBody = pwdSettingsApi.updatePasswordSettings.args[0][1].requestBody;\nexpect(requestBody).to.be.ok;\nexpect(requestBody.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION&#x27;).settingsValue).to.equal(&#x27;10&#x27;);\nexpect(requestBody.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION_ACTIVE&#x27;).settingsValue).to.equal(&#x27;1&#x27;);\nexpect(requestBody.find(x =&gt; x.settingsKey == &#x27;PWD_STRENGTH_ACTIVE&#x27;).settingsValue).to.equal(&#x27;1&#x27;);\nexpect(requestBody.find(x =&gt; x.settingsKey == &#x27;PWD_STRENGTH&#x27;).settingsValue).to.equal(&#x27;^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{4,11}$&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0175a34-ce6a-42f3-934f-1734488376a0&quot;,&quot;parentUUID&quot;:&quot;27947abf-880e-4a59-a111-52f8f6c58619&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b0175a34-ce6a-42f3-934f-1734488376a0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[&quot;d1c02f58-f0ea-424f-984e-6313676b8dae&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e5654517-3079-4a1d-8d05-ce5c5b9d9a24&quot;,&quot;title&quot;:&quot;BiztimeDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;BiztimeDialog.vue\&quot;&quot;,&quot;fullTitle&quot;:&quot;BiztimeDialog.vue \&quot;before each\&quot; hook in \&quot;BiztimeDialog.vue\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;mockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13c68b90-dfe4-4bfa-b697-0a24f13b76c2&quot;,&quot;parentUUID&quot;:&quot;e5654517-3079-4a1d-8d05-ce5c5b9d9a24&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;BiztimeDialog.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// console.log(&#x27;-- dd:&#x27;, wrapper.vm.$store.state.biztimes.selectedForEdit);\n// headline\nconst headline = wrapper.find(&#x27;span.headline&#x27;);\nexpect(headline.exists()).to.be.true;\nexpect(headline.text()).to.eq(`Edit Business Hours for ${biztime.dayOfWeek}`); // inputs\nexpect(startTimeRef.value).to.deep.equal(biztime.startTime);\nexpect(endTimeRef.value).to.deep.equal(biztime.endTime);\nexpect(activeRef.inputValue).to.equal(biztime.active); // btns\nexpect(saveBtn.exists()).to.be.true;\nexpect(closeBtn.exists()).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa5c7a19-54f1-42b5-a2bb-ae61aef68e37&quot;,&quot;parentUUID&quot;:&quot;e5654517-3079-4a1d-8d05-ce5c5b9d9a24&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should save biztime&quot;,&quot;fullTitle&quot;:&quot;BiztimeDialog.vue should save biztime&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await saveBtn.trigger(&#x27;click&#x27;);\nexpect(mockstore.actions.saveBiztime).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cdc73a7f-99c0-42df-8145-5221376ab1a1&quot;,&quot;parentUUID&quot;:&quot;e5654517-3079-4a1d-8d05-ce5c5b9d9a24&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should close dialog&quot;,&quot;fullTitle&quot;:&quot;BiztimeDialog.vue should close dialog&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await closeBtn.trigger(&#x27;click&#x27;);\nexpect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;\nexpect(mockstore.mutations.SET_SELECTED_FOR_EDIT).to.have.been.calledWith(store.state.biztimes, {});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85ea6d44-b17a-4cab-9a57-3fec0a23da22&quot;,&quot;parentUUID&quot;:&quot;e5654517-3079-4a1d-8d05-ce5c5b9d9a24&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fa5c7a19-54f1-42b5-a2bb-ae61aef68e37&quot;,&quot;cdc73a7f-99c0-42df-8145-5221376ab1a1&quot;,&quot;85ea6d44-b17a-4cab-9a57-3fec0a23da22&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;785768cd-fb34-4438-9115-77591320ba92&quot;,&quot;title&quot;:&quot;BiztimesTable.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;BiztimesTable.vue\&quot;&quot;,&quot;fullTitle&quot;:&quot;BiztimesTable.vue \&quot;before each\&quot; hook in \&quot;BiztimesTable.vue\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;mockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c40ad42-098c-4478-a7c0-d3e31de068f5&quot;,&quot;parentUUID&quot;:&quot;785768cd-fb34-4438-9115-77591320ba92&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;BiztimesTable.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// pageTitle\nexpect(pageTitle.exists()).to.be.true;\nexpect(pageTitle.text()).to.eq(&#x27;Business Hours&#x27;); // link to set permissions\nexpect(wrapper.find(&#x27;[data-test=\&quot;setPermissions\&quot;&#x27;).exists()).to.equal(true); // getBiztimes\nexpect(mockstore.actions.getBiztimes).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d9efdb1-77db-47d0-bcf6-581dabdc0a70&quot;,&quot;parentUUID&quot;:&quot;785768cd-fb34-4438-9115-77591320ba92&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1d9efdb1-77db-47d0-bcf6-581dabdc0a70&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e5f634ab-c37c-4cfe-847b-97780e226b03&quot;,&quot;title&quot;:&quot;HolidaysTable.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;941633d7-b2f0-4170-bc03-1f8962a7ba27&quot;,&quot;title&quot;:&quot;initial state&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;HolidaysTable.vue initial state \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_HolidaysTable.default, {\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;de725bb0-9de2-41b1-9774-06646159454b&quot;,&quot;parentUUID&quot;:null,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;01dd22e4-76ac-476c-8190-ba0304b4f865&quot;,&quot;title&quot;:&quot;Menu.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Menu.vue\&quot;&quot;,&quot;fullTitle&quot;:&quot;Menu.vue \&quot;before each\&quot; hook in \&quot;Menu.vue\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_Menu.default, {\n  store\n}); // data-app prevents warning during test: [Vuetify] Unable to locate target [data-app]\n// https://forum.vuejs.org/t/vuetify-data-app-true-and-problems-rendering-v-dialog-in-unit-tests/27495\ndocument.body.setAttribute(&#x27;data-app&#x27;, true);\nmenuButton = wrapper.find(\&quot;button#holidayMenu\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7af70ac2-eb28-4ef1-ac22-c24403efc1ca&quot;,&quot;parentUUID&quot;:&quot;01dd22e4-76ac-476c-8190-ba0304b4f865&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5465207f-810c-41ac-8e5c-f766c224446b&quot;,&quot;title&quot;:&quot;initial state&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays add holiday button&quot;,&quot;fullTitle&quot;:&quot;Menu.vue initial state displays add holiday button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:64,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;menuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  expect(wrapper.find(&#x27;#addHolidayMobile&#x27;).exists()).to.equal(true);\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;baa4377f-0f12-41b5-9cdd-1ebe64db41bc&quot;,&quot;parentUUID&quot;:&quot;5465207f-810c-41ac-8e5c-f766c224446b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays set roles &amp; permissions button&quot;,&quot;fullTitle&quot;:&quot;Menu.vue initial state displays set roles &amp; permissions button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:59,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;menuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  expect(wrapper.find(&#x27;[data-test=\&quot;setPermissionsMobile\&quot;&#x27;).exists()).to.equal(true);\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2199124-1468-4955-bc5b-4ce2f49a51cd&quot;,&quot;parentUUID&quot;:&quot;5465207f-810c-41ac-8e5c-f766c224446b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays disabled delete holidays button&quot;,&quot;fullTitle&quot;:&quot;Menu.vue initial state displays disabled delete holidays button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:118,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;menuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  const deleteButton = wrapper.find(&#x27;[data-test=\&quot;deleteButtonMobile\&quot;&#x27;);\n  expect(deleteButton.exists()).to.equal(true);\n  expect(deleteButton.attributes(&#x27;disabled&#x27;)).to.not.be.undefined;\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;040eefc0-6ad4-435c-baf7-4a1089f9c298&quot;,&quot;parentUUID&quot;:&quot;5465207f-810c-41ac-8e5c-f766c224446b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;baa4377f-0f12-41b5-9cdd-1ebe64db41bc&quot;,&quot;f2199124-1468-4955-bc5b-4ce2f49a51cd&quot;,&quot;040eefc0-6ad4-435c-baf7-4a1089f9c298&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:241,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;72056c52-25aa-43f2-85ca-fef66849aee3&quot;,&quot;title&quot;:&quot;Menu item clicks&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;add holiday button click&quot;,&quot;fullTitle&quot;:&quot;Menu.vue Menu item clicks add holiday button click&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:51,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;menuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  expect(wrapper.find(&#x27;#addHolidayMobile&#x27;).exists()).to.equal(true);\n  wrapper.find(&#x27;button#addHolidayMobile&#x27;).trigger(&#x27;click&#x27;);\n  it(&#x27;commits SET_SELECTED_FOR_EDIT mutation&#x27;, () =&gt; {\n    expect(mockstore.mutations.SET_SELECTED_FOR_EDIT).to.have.been.called;\n  });\n  it(&#x27;commits SET_SHOW_DIALOG mutation&#x27;, () =&gt; {\n    expect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;\n  });\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c323b33-54c0-48f7-928b-93b8055eaca9&quot;,&quot;parentUUID&quot;:&quot;72056c52-25aa-43f2-85ca-fef66849aee3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;enables delete holidays button&quot;,&quot;fullTitle&quot;:&quot;Menu.vue Menu item clicks enables delete holidays button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:69,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const state = {\n  holidays: [{}, {}, {}],\n  selectedForDelete: [{}],\n  selectedForEdit: {},\n  showDialog: false\n};\nstore = new _vuex.default.Store({\n  modules: (0, _store.mockStore)({\n    state\n  }).modules\n});\nwrapper = (0, _mocks.initWrapper)(_Menu.default, {\n  store\n});\ndocument.body.setAttribute(&#x27;data-app&#x27;, true);\nmenuButton = wrapper.find(\&quot;button#holidayMenu\&quot;);\nmenuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  const deleteButton = wrapper.find(&#x27;[data-test=\&quot;deleteButtonMobile\&quot;&#x27;);\n  expect(deleteButton.attributes(&#x27;disabled&#x27;)).to.equal(undefined);\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;969c06ef-3c46-4fb6-9182-613ffacccc29&quot;,&quot;parentUUID&quot;:&quot;72056c52-25aa-43f2-85ca-fef66849aee3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6c323b33-54c0-48f7-928b-93b8055eaca9&quot;,&quot;969c06ef-3c46-4fb6-9182-613ffacccc29&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:120,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;92bbe6a2-c413-4751-8b0f-9e6ea875575c&quot;,&quot;title&quot;:&quot;Toolbar.vue&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;995a503c-2b62-4d4b-af9c-141f87989c30&quot;,&quot;title&quot;:&quot;initial state&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;initial state\&quot;&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue initial state \&quot;before each\&quot; hook in \&quot;initial state\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_Toolbar.default, {\n  store\n});\ndeleteButton = wrapper.find(&#x27;[data-test=\&quot;deleteButton\&quot;&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;28f9b228-5114-4132-96db-613ecc2f6593&quot;,&quot;parentUUID&quot;:&quot;995a503c-2b62-4d4b-af9c-141f87989c30&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays add holiday button&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue initial state displays add holiday button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;button#addHoliday&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05ce3561-07f7-47d4-b491-d24c7c844f99&quot;,&quot;parentUUID&quot;:&quot;995a503c-2b62-4d4b-af9c-141f87989c30&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays set roles &amp; permissions button&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue initial state displays set roles &amp; permissions button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=\&quot;setPermissions\&quot;&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce07e287-b32e-4821-91bc-0aa17afb7ace&quot;,&quot;parentUUID&quot;:&quot;995a503c-2b62-4d4b-af9c-141f87989c30&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays disabled delete holidays button&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue initial state displays disabled delete holidays button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(deleteButton.exists()).to.equal(true);\nexpect(deleteButton.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5dee3f71-5648-47c7-b568-02c64508af30&quot;,&quot;parentUUID&quot;:&quot;995a503c-2b62-4d4b-af9c-141f87989c30&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;05ce3561-07f7-47d4-b491-d24c7c844f99&quot;,&quot;ce07e287-b32e-4821-91bc-0aa17afb7ace&quot;,&quot;5dee3f71-5648-47c7-b568-02c64508af30&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b3672bc7-4e87-4b7e-a3c2-492df9c97f5f&quot;,&quot;title&quot;:&quot;add holiday button click&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;add holiday button click\&quot;&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue add holiday button click \&quot;before each\&quot; hook in \&quot;add holiday button click\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;mockstore = (0, _store.mockStore)();\nstore = new _vuex.default.Store({\n  modules: mockstore.modules\n});\nwrapper = (0, _mocks.initWrapper)(_Toolbar.default, {\n  store\n});\nwrapper.find(&#x27;button#addHoliday&#x27;).trigger(&#x27;click&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a04459a1-2c6e-4084-8737-80622f8ba5fa&quot;,&quot;parentUUID&quot;:&quot;b3672bc7-4e87-4b7e-a3c2-492df9c97f5f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;commits SET_SELECTED_FOR_EDIT mutation&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue add holiday button click commits SET_SELECTED_FOR_EDIT mutation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(mockstore.mutations.SET_SELECTED_FOR_EDIT).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3af962a-eb66-467e-8eee-87f7e2ef2c8d&quot;,&quot;parentUUID&quot;:&quot;b3672bc7-4e87-4b7e-a3c2-492df9c97f5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;commits SET_SHOW_DIALOG mutation&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue add holiday button click commits SET_SHOW_DIALOG mutation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b037acb-9b9c-4ba7-8636-82ca066de21e&quot;,&quot;parentUUID&quot;:&quot;b3672bc7-4e87-4b7e-a3c2-492df9c97f5f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b3af962a-eb66-467e-8eee-87f7e2ef2c8d&quot;,&quot;5b037acb-9b9c-4ba7-8636-82ca066de21e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;32e9c547-1397-4fa8-92c8-b8ee0202b5f4&quot;,&quot;title&quot;:&quot;holidays have been selected for deletion&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;holidays have been selected for deletion\&quot;&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue holidays have been selected for deletion \&quot;before each\&quot; hook in \&quot;holidays have been selected for deletion\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const state = {\n  holidays: [{}, {}, {}],\n  selectedForDelete: [{}],\n  selectedForEdit: {},\n  showDialog: false\n};\nmockstore = (0, _store.mockStore)({\n  state\n});\nstore = new _vuex.default.Store({\n  modules: mockstore.modules\n});\nwrapper = (0, _mocks.initWrapper)(_Toolbar.default, {\n  store\n});\ndeleteButton = wrapper.find(&#x27;[data-test=\&quot;deleteButton\&quot;&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2fefba70-cb5f-416b-ae3b-45ead8313236&quot;,&quot;parentUUID&quot;:&quot;32e9c547-1397-4fa8-92c8-b8ee0202b5f4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;enables delete holidays button&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue holidays have been selected for deletion enables delete holidays button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(deleteButton.attributes(&#x27;disabled&#x27;)).to.equal(undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08ffc36c-977f-418a-a30b-dbf7ca36334a&quot;,&quot;parentUUID&quot;:&quot;32e9c547-1397-4fa8-92c8-b8ee0202b5f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;dispatches delete_holidays action when delete holidays button is clicked&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue holidays have been selected for deletion dispatches delete_holidays action when delete holidays button is clicked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;deleteButton.trigger(&#x27;click&#x27;);\nexpect(mockstore.actions.delete_holidays).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76b7a2aa-2911-4cdd-bf51-043dc477cf52&quot;,&quot;parentUUID&quot;:&quot;32e9c547-1397-4fa8-92c8-b8ee0202b5f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;08ffc36c-977f-418a-a30b-dbf7ca36334a&quot;,&quot;76b7a2aa-2911-4cdd-bf51-043dc477cf52&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d7bf917d-82a1-4918-9f79-4cdafcb5f862&quot;,&quot;title&quot;:&quot;biztime actions&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;biztime actions\&quot;&quot;,&quot;fullTitle&quot;:&quot;biztime actions \&quot;before each\&quot; hook in \&quot;biztime actions\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;commit = _sinon.default.spy();\nstate = {};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d95559a5-22fb-4ddb-808f-6c79096e0944&quot;,&quot;parentUUID&quot;:&quot;d7bf917d-82a1-4918-9f79-4cdafcb5f862&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;biztime actions\&quot;&quot;,&quot;fullTitle&quot;:&quot;biztime actions \&quot;after each\&quot; hook in \&quot;biztime actions\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;_sinon.default.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8f62fca-cb66-48be-be06-07b8708c1085&quot;,&quot;parentUUID&quot;:&quot;d7bf917d-82a1-4918-9f79-4cdafcb5f862&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should getBiztimes&quot;,&quot;fullTitle&quot;:&quot;biztime actions should getBiztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await _actions.default.getBiztimes({\n  commit,\n  state\n}, _commonLib.default);\n(0, _chai.expect)(commit.args).to.deep.equal([[&#x27;SET_BIZTIMES&#x27;, [..._list.default]]]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a6fa5e4-edc3-40bb-b4a2-3fa33a3afdd4&quot;,&quot;parentUUID&quot;:&quot;d7bf917d-82a1-4918-9f79-4cdafcb5f862&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should saveBiztime&quot;,&quot;fullTitle&quot;:&quot;biztime actions should saveBiztime&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await _actions.default.saveBiztime({\n  commit,\n  state\n}, { ..._list.default[0],\n  $commonLib: _commonLib.default\n});\n(0, _chai.expect)(commit.args).to.deep.equal([[&#x27;SET_BIZTIMES&#x27;, [..._list.default]], [&#x27;SET_SELECTED_FOR_EDIT&#x27;, {}], [&#x27;SET_SHOW_DIALOG&#x27;, false]]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5cc5c367-6110-45af-8302-d04f66c25d3c&quot;,&quot;parentUUID&quot;:&quot;d7bf917d-82a1-4918-9f79-4cdafcb5f862&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2a6fa5e4-edc3-40bb-b4a2-3fa33a3afdd4&quot;,&quot;5cc5c367-6110-45af-8302-d04f66c25d3c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c366e211-fc20-445f-a5f5-ff5015e5c997&quot;,&quot;title&quot;:&quot;biztime getters&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get biztimes&quot;,&quot;fullTitle&quot;:&quot;biztime getters should get biztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const state = {\n  biztimes: JSON.parse(JSON.stringify(_list.default))\n};\nconst biztimes = _getters.default.biztimes(state);\n(0, _chai.expect)(biztimes).not.to.deep.equal(_list.default);\nbiztimes.forEach(biztime =&gt; {\n  const startTime = {\n    hour: biztime.startHour,\n    minute: biztime.startMinute\n  };\n  const endTime = {\n    hour: biztime.endHour,\n    minute: biztime.endMinute\n  };\n  (0, _chai.expect)(biztime.startTime).to.deep.equal(startTime);\n  (0, _chai.expect)(biztime.endTime).to.deep.equal(endTime);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;283049fe-7ac1-4b01-b4fb-ce9de1b8ef89&quot;,&quot;parentUUID&quot;:&quot;c366e211-fc20-445f-a5f5-ff5015e5c997&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;283049fe-7ac1-4b01-b4fb-ce9de1b8ef89&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f82cf51a-35b0-4bfc-bd24-9c871e882ddb&quot;,&quot;title&quot;:&quot;biztime mutations&quot;,&quot;fullFile&quot;:&quot;/home/will/code/integrify/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should SET_BIZTIMES&quot;,&quot;fullTitle&quot;:&quot;biztime mutations should SET_BIZTIMES&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_BIZTIMES(state, [..._list.default]);\n(0, _chai.expect)(state.biztimes).to.deep.equal(_list.default);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4225770b-1516-45f0-9644-343a74d176a7&quot;,&quot;parentUUID&quot;:&quot;f82cf51a-35b0-4bfc-bd24-9c871e882ddb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SELECTED_FOR_EDIT&quot;,&quot;fullTitle&quot;:&quot;biztime mutations should SET_SELECTED_FOR_EDIT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_SELECTED_FOR_EDIT(state, _list.default[0]);\n(0, _chai.expect)(state.selectedForEdit).to.deep.equal(_list.default[0]);\nSET_SELECTED_FOR_EDIT(state, _list.default[3]);\n(0, _chai.expect)(state.selectedForEdit).to.deep.equal(_list.default[3]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6ffb3b2-7219-4a27-b9fd-9890f34995d8&quot;,&quot;parentUUID&quot;:&quot;f82cf51a-35b0-4bfc-bd24-9c871e882ddb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SHOW_DIALOG&quot;,&quot;fullTitle&quot;:&quot;biztime mutations should SET_SHOW_DIALOG&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_SHOW_DIALOG(state, true);\n(0, _chai.expect)(state.showDialog).to.equal(true);\nSET_SHOW_DIALOG(state, false);\n(0, _chai.expect)(state.showDialog).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b60a36bd-dfd8-4151-97f9-56967ff6c934&quot;,&quot;parentUUID&quot;:&quot;f82cf51a-35b0-4bfc-bd24-9c871e882ddb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4225770b-1516-45f0-9644-343a74d176a7&quot;,&quot;a6ffb3b2-7219-4a27-b9fd-9890f34995d8&quot;,&quot;b60a36bd-dfd8-4151-97f9-56967ff6c934&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;491f8b66-1aa6-4276-82c9-376a6680ee50&quot;,&quot;8951cc2a-f440-4b85-a58e-392360f68416&quot;],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;8.1.1&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;6.1.1&quot;},&quot;marge&quot;:{&quot;options&quot;:null,&quot;version&quot;:&quot;5.1.0&quot;}}}" data-config="{&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;test&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:false,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;htmlFile&quot;:&quot;/home/will/code/integrify/test/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>