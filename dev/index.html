<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:21,&quot;tests&quot;:519,&quot;passes&quot;:515,&quot;pending&quot;:0,&quot;failures&quot;:1,&quot;start&quot;:&quot;2021-07-01T12:16:15.607Z&quot;,&quot;end&quot;:&quot;2021-07-01T12:16:15.607Z&quot;,&quot;duration&quot;:61960,&quot;testsRegistered&quot;:519,&quot;passPercent&quot;:99.22928709055877,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:3,&quot;hasSkipped&quot;:true},&quot;results&quot;:[{&quot;uuid&quot;:&quot;95e276ed-8a25-4e2a-b42b-9a12b7fb923f&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// insert known tokens into redis (normally these are created by emailPasswordReset)\nconst mockRes = mocks.mockResponse();\nconst mockReq = await mocks.emailPasswordReset();\nawait redisClient.setexAsync(`pwReset:${accountGuid}`, 3600, securityToken);\nawait redisClient.setexAsync(`pwReset:${securityToken}`, 3600, accountGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3fd370fe-2bb0-443e-92c1-59d0287fb21c&quot;,&quot;parentUUID&quot;:&quot;95e276ed-8a25-4e2a-b42b-9a12b7fb923f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a new password&quot;,&quot;fullTitle&quot;:&quot;should create a new password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = mocks.createNewPassword(securityToken);\nconst mockRes = mocks.mockResponse();\nawait resetPassword.createNewPassword(mockReq, mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;\n// ensure createNewPassword cleans up redis\nexpect(await redisClient.getAsync(`pwReset:${accountGuid}`)).to.be.null;\nexpect(await redisClient.getAsync(`pwReset:${securityToken}`)).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15e11ba3-ae5e-4d0c-af00-b4226f45d61a&quot;,&quot;parentUUID&quot;:&quot;95e276ed-8a25-4e2a-b42b-9a12b7fb923f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e901f7f1-2745-4ee5-8795-46c67e2f5020&quot;,&quot;title&quot;:&quot;Auth API API Key Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-auth/test/integration/functions/apiKey.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/apiKey.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Auth API API Key Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests \&quot;before all\&quot; hook in \&quot;Auth API API Key Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7bce466-322c-47e6-841c-00589a7b99e2&quot;,&quot;parentUUID&quot;:&quot;e901f7f1-2745-4ee5-8795-46c67e2f5020&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Auth API API Key Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests \&quot;after all\&quot; hook in \&quot;Auth API API Key Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await apiKey.deleteTestKeys(testConfig.tenantOne.tenantId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;509a47df-c208-45f4-a6d5-77ea47eea3c7&quot;,&quot;parentUUID&quot;:&quot;e901f7f1-2745-4ee5-8795-46c67e2f5020&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;45b09070-35f1-4729-83a8-f49206c6d7c6&quot;,&quot;title&quot;:&quot;api key crud &quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-auth/test/integration/functions/apiKey.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/apiKey.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should insert an apiKey and return a doc&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should insert an apiKey and return a doc&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:203,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = {expires: new Date(new Date().getTime() + 60000), testOnly: true, description: \&quot;this is a test\&quot;}\nawait apiKey.createApiKey(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst inserted = mockRes.body;\nkey = inserted.key;\nid = inserted._id;\nexpect(inserted).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39e93901-e84e-4d2d-b231-e0f3dfbe48d4&quot;,&quot;parentUUID&quot;:&quot;45b09070-35f1-4729-83a8-f49206c6d7c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list an apiKeys&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should list an apiKeys&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.key = key;\nawait apiKey.listApiKeys(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst keyList = mockRes.body;\nexpect(keyList).to.exist;\nexpect(keyList.length).to.be.gt(0);\nexpect(keyList[0].hashedKey).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2390dce7-c985-4f2c-ba9d-e12a08d6862a&quot;,&quot;parentUUID&quot;:&quot;45b09070-35f1-4729-83a8-f49206c6d7c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should verify an apiKey&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should verify an apiKey&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.key = key;\nreq.params.tenant = testConfig.tenantOne.tenantId;\nawait apiKey.verifyApiKey(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst deleted = mockRes.body;\nexpect(deleted.message).to.equal(\&quot;api key valid\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec8b6036-4e96-4c2d-a853-88ace3fb6a3e&quot;,&quot;parentUUID&quot;:&quot;45b09070-35f1-4729-83a8-f49206c6d7c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should  impersonate using a valid api key and return a JWT&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should  impersonate using a valid api key and return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.key = key;\nreq.params.tenant = testConfig.tenantOne.tenantId;\nreq.params.userName = testConfig.tenantOne.adminUser.userName;\nawait apiKey.impersonate(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst impersonated = mockRes.body;\nexpect(impersonated).to.exist;\nexpect(impersonated.token).to.exist;\nexpect(impersonated.userName).to.equal(testConfig.tenantOne.adminUser.userName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24e05a55-ce85-44dc-b977-945187db0161&quot;,&quot;parentUUID&quot;:&quot;45b09070-35f1-4729-83a8-f49206c6d7c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should  impersonate using a valid env token and userName and return a JWT&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should  impersonate using a valid env token and userName and return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\n\n\nreq.params.tenant = testConfig.tenantOne.tenantId;\nreq.params.userName = testConfig.tenantOne.adminUser.userName;\nawait apiKey.impersonateWithSystemApiKey(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst impersonated = mockRes.body;\nexpect(impersonated).to.exist;\nexpect(impersonated.token).to.exist;\nexpect(impersonated.userName).to.equal(testConfig.tenantOne.adminUser.userName);\ncontact = impersonated;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3d9daf6-e25d-4a37-97a0-ea22b09d4bc8&quot;,&quot;parentUUID&quot;:&quot;45b09070-35f1-4729-83a8-f49206c6d7c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should  impersonate using a valid env token and userSid and return a JWT&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should  impersonate using a valid env token and userSid and return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\n\n\nreq.params.tenant = testConfig.tenantOne.tenantId;\nreq.params.userSid = contact.contactGuid;\nawait apiKey.impersonateWithSystemApiKey(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst impersonated = mockRes.body;\nexpect(impersonated).to.exist;\nexpect(impersonated.token).to.exist;\nexpect(impersonated.userName).to.equal(testConfig.tenantOne.adminUser.userName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dcea1f9c-53d3-496e-996d-2863bc69c762&quot;,&quot;parentUUID&quot;:&quot;45b09070-35f1-4729-83a8-f49206c6d7c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;39e93901-e84e-4d2d-b231-e0f3dfbe48d4&quot;,&quot;2390dce7-c985-4f2c-ba9d-e12a08d6862a&quot;,&quot;ec8b6036-4e96-4c2d-a853-88ace3fb6a3e&quot;,&quot;24e05a55-ce85-44dc-b977-945187db0161&quot;,&quot;e3d9daf6-e25d-4a37-97a0-ea22b09d4bc8&quot;,&quot;dcea1f9c-53d3-496e-996d-2863bc69c762&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:288,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;93f1c47a-1212-442f-8c89-dada3b97d821&quot;,&quot;title&quot;:&quot;Auth API Auth Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Auth API Auth Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests \&quot;before all\&quot; hook in \&quot;Auth API Auth Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a427c72-a47a-4f3b-800e-687f457b5625&quot;,&quot;parentUUID&quot;:&quot;93f1c47a-1212-442f-8c89-dada3b97d821&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e97889ec-f3ec-48ed-86fc-761784a1486d&quot;,&quot;title&quot;:&quot;getGuestToken&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return guest auth token&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests getGuestToken should return guest auth token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:40,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet getGuestTokenEvent = await mocks.getGuestTokenEvent()\n\t\t\tlet results = await dbauth.getGuestToken(getGuestTokenEvent, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n      expect(mockRes.body.length).to.be.greaterThan(1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;342c32c5-49ba-4d27-8161-7e8a70124d47&quot;,&quot;parentUUID&quot;:&quot;e97889ec-f3ec-48ed-86fc-761784a1486d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;342c32c5-49ba-4d27-8161-7e8a70124d47&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:40,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b8bf0bb3-c4b4-4847-a898-2fa9be3063de&quot;,&quot;title&quot;:&quot;login&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a contact with a token&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests login should return a contact with a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:100,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet loginEvent = await mocks.loginEvent()\n\t\t\tlet results = await dbauth.login(loginEvent, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst contactInfo = mockRes.body;\n\t\t\texpect(contactInfo.userName).equal(loginEvent.body.username);\n\t\t\texpect(contactInfo.token).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;55880a3d-dca0-46fb-a88c-cdcceba66dfa&quot;,&quot;parentUUID&quot;:&quot;b8bf0bb3-c4b4-4847-a898-2fa9be3063de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;55880a3d-dca0-46fb-a88c-cdcceba66dfa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:100,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6b27b29c-9a8b-4083-9761-45c84de36d00&quot;,&quot;title&quot;:&quot;refreshJwt&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;refresh a token a user out&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests refreshJwt refresh a token a user out&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:90,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let mockRes = await mocks.mockResponse();\nlet loginEvent = await mocks.loginEvent()\nlet logoutEvent = await mocks.logoutEvent()\nawait dbauth.login(loginEvent, mockRes);\nconst contactInfo = mockRes.body;\nlogoutEvent.cookies = {\&quot;integrifyRefreshToken\&quot;: contactInfo.refreshToken };\nlogoutEvent.body = {token: contactInfo.token, refreshToken: contactInfo.refreshToken }\nawait jwtFuncs.refreshJwt(logoutEvent, await mocks.mockResponse());\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15029eaa-29b3-4cd1-b13f-605d1604f669&quot;,&quot;parentUUID&quot;:&quot;6b27b29c-9a8b-4083-9761-45c84de36d00&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;15029eaa-29b3-4cd1-b13f-605d1604f669&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:90,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fd99a5f6-4ba8-48d1-b623-88cc2308dac3&quot;,&quot;title&quot;:&quot;isAuthenticated&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;refresh a token a user out&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests isAuthenticated refresh a token a user out&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let mockRes = await mocks.mockResponse();\n\nawait jwtFuncs.isAuthenticated({cookies: {integrifyToken: \&quot;fake\&quot;}}, mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0bfb2de-8ef7-4588-9012-c37335948a29&quot;,&quot;parentUUID&quot;:&quot;fd99a5f6-4ba8-48d1-b623-88cc2308dac3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f0bfb2de-8ef7-4588-9012-c37335948a29&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2fab912a-1fb1-4640-bd3e-3a8c754332d7&quot;,&quot;title&quot;:&quot;logout&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should log a user out&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests logout should log a user out&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nlet logoutEvent = await mocks.logoutEvent()\nawait dbauth.logout(logoutEvent, mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;\nexpect(mockRes.body).to.deep.equal({message: &#x27;OK&#x27;});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23dccf1f-01c6-4a19-9bd1-b8c8ea5def20&quot;,&quot;parentUUID&quot;:&quot;2fab912a-1fb1-4640-bd3e-3a8c754332d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;23dccf1f-01c6-4a19-9bd1-b8c8ea5def20&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;78b92022-40e8-4e48-a749-6c70a65c9bda&quot;,&quot;title&quot;:&quot;Auth API Reset Password Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-auth/test/integration/functions/resetPassword.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/resetPassword.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Auth API Reset Password Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API Reset Password Tests \&quot;before all\&quot; hook in \&quot;Auth API Reset Password Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(1050000);\nprocess.env.TESTING = true;\nresetRewired.__set__(&#x27;nodemailer&#x27;, nodemailerMock);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8da72954-dc45-4b2d-99d6-a1b92bac7b6c&quot;,&quot;parentUUID&quot;:&quot;78b92022-40e8-4e48-a749-6c70a65c9bda&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0dfedc26-5771-4f0b-a3e0-0f2b24f951e3&quot;,&quot;title&quot;:&quot;emailUsernames&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-auth/test/integration/functions/resetPassword.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/resetPassword.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should send an email of accounts for existing email&quot;,&quot;fullTitle&quot;:&quot;Auth API Reset Password Tests emailUsernames should send an email of accounts for existing email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let config = (await Config.getConfig()).test;\n      const accountGuid = config.tenantOne.adminUser.sid.toLowerCase();\n      const mockRes = mocks.mockResponse();\n      const mockReq = await mocks.emailUsernames();\n      await resetRewired.emailUsernames(mockReq, mockRes);\n      expect(mockRes.statusCode).equal(200);\n      expect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0dce9a3d-1f55-4391-bd06-90c247a80383&quot;,&quot;parentUUID&quot;:&quot;0dfedc26-5771-4f0b-a3e0-0f2b24f951e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0dce9a3d-1f55-4391-bd06-90c247a80383&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b1cdd211-a1e9-4ab2-8c28-a0fd964219c8&quot;,&quot;title&quot;:&quot;passwordReset&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-auth/test/integration/functions/resetPassword.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/resetPassword.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;passwordReset\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API Reset Password Tests passwordReset \&quot;before all\&quot; hook in \&quot;passwordReset\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;resetRewired.__set__(&#x27;nodemailer&#x27;, nodemailerMock);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;078ce58f-f263-47f6-b258-0b69a1a33194&quot;,&quot;parentUUID&quot;:&quot;b1cdd211-a1e9-4ab2-8c28-a0fd964219c8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;emailPassworReset&quot;,&quot;fullTitle&quot;:&quot;Auth API Reset Password Tests passwordReset emailPassworReset&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let config = (await Config.getConfig()).test;\nconst accountGuid = config.tenantOne.adminUser.sid.toLowerCase();\nconst mockRes = mocks.mockResponse();\nconst mockReq = await mocks.emailPasswordReset();\nawait resetRewired.emailPasswordReset(mockReq, mockRes);\n// check if security token was added to redis\nconst securityToken = await redisClient.getAsync(`pwReset:${accountGuid}`);\nconst accountEntry = await redisClient.getAsync(`pwReset:${securityToken}`);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;\nexpect(securityToken).to.exist;\nexpect(accountEntry).to.exist;\n// clean up entries leftover from calling emailPasswordReset\nawait redisClient.del(`pwReset:${accountGuid}`);\nawait redisClient.del(`pwReset:${securityToken}`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4dd1dee-0a5c-4df5-87be-9cc4de514261&quot;,&quot;parentUUID&quot;:&quot;b1cdd211-a1e9-4ab2-8c28-a0fd964219c8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e4dd1dee-0a5c-4df5-87be-9cc4de514261&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;163d2a8f-a9de-4062-a735-ca0e7c269ec2&quot;,&quot;title&quot;:&quot;Auth API SAML Settings Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-auth/test/integration/functions/samlSettings.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/samlSettings.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Auth API SAML Settings Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests \&quot;before all\&quot; hook in \&quot;Auth API SAML Settings Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c8eadf5-cb76-425b-b365-3846ec34e2f4&quot;,&quot;parentUUID&quot;:&quot;163d2a8f-a9de-4062-a735-ca0e7c269ec2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Auth API SAML Settings Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests \&quot;after all\&quot; hook in \&quot;Auth API SAML Settings Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await samlSettings.deleteSamlSettingsByName(testConfig.tenantOne.tenantId, &#x27;unitTestIDP&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;967ed54d-ca7b-44f3-92e5-db464f235e1b&quot;,&quot;parentUUID&quot;:&quot;163d2a8f-a9de-4062-a735-ca0e7c269ec2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2f1bcbdb-4294-420c-9c07-b0170121a164&quot;,&quot;title&quot;:&quot;SAML Settings crud &quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-auth/test/integration/functions/samlSettings.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/samlSettings.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should insert saml settings and return a doc&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should insert saml settings and return a doc&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\n           \nreq.body = data;\nawait samlSettings.createSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst inserted = mockRes.body;\n\nsamlId = inserted._id;\nexpect(inserted).to.exist;\nexpect(inserted.idpMetaData).to.equal(data.idpMetaData);\nexpect(inserted.idpName).to.equal(data.idpName);\nexpect(inserted.idpDescription).to.equal(data.idpDescription);\nexpect(inserted.createdByDetail).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a7d92413-d71f-415b-be75-c70b6495bb0e&quot;,&quot;parentUUID&quot;:&quot;2f1bcbdb-4294-420c-9c07-b0170121a164&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get saml settings without an id&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should get saml settings without an id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nawait samlSettings.getSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result.createdByDetail).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;871613cd-f793-4ded-8371-05991b58e830&quot;,&quot;parentUUID&quot;:&quot;2f1bcbdb-4294-420c-9c07-b0170121a164&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get saml settings with an id&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should get saml settings with an id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.samlId = samlId.toString();\nawait samlSettings.getSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result._id.toString()).to.equal(samlId.toString());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0be1924-e420-4ff8-8126-0226567c0905&quot;,&quot;parentUUID&quot;:&quot;2f1bcbdb-4294-420c-9c07-b0170121a164&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update saml settings&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should update saml settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.samlId = samlId;\n\nreq.body = data;\n\nawait samlSettings.updateSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c0259d3-8ae9-4c01-84e8-89793bb975c5&quot;,&quot;parentUUID&quot;:&quot;2f1bcbdb-4294-420c-9c07-b0170121a164&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return sp metadata&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should return sp metadata&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.tenant = testConfig.tenantOne.tenantId;\nawait samlSettings.getMetaData(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst metadata = mockRes.body;\nexpect(metadata).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ebed4798-6780-4ccb-9c8d-5b724362a34d&quot;,&quot;parentUUID&quot;:&quot;2f1bcbdb-4294-420c-9c07-b0170121a164&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete saml settings&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should delete saml settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.samlId = samlId;\nawait samlSettings.deleteSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst deleted = mockRes.body;\nexpect(deleted.message).to.equal(\&quot;delete successful\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2bf8c45e-2781-4a1e-9f22-6e4dc7f65d1a&quot;,&quot;parentUUID&quot;:&quot;2f1bcbdb-4294-420c-9c07-b0170121a164&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a7d92413-d71f-415b-be75-c70b6495bb0e&quot;,&quot;871613cd-f793-4ded-8371-05991b58e830&quot;,&quot;f0be1924-e420-4ff8-8126-0226567c0905&quot;,&quot;3c0259d3-8ae9-4c01-84e8-89793bb975c5&quot;,&quot;ebed4798-6780-4ccb-9c8d-5b724362a34d&quot;,&quot;2bf8c45e-2781-4a1e-9f22-6e4dc7f65d1a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:50,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;15e11ba3-ae5e-4d0c-af00-b4226f45d61a&quot;],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cdc6fded-4b3d-43f4-b0bd-bfab6cda3135&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;eda16162-d5e9-4408-a7e6-a180ebaf8b4a&quot;,&quot;title&quot;:&quot;Dashboard controller tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-dashboards/test/dashboard.controller.test.js&quot;,&quot;file&quot;:&quot;/test/dashboard.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ebc530db-7eec-46c1-af91-a934abb8ee47&quot;,&quot;parentUUID&quot;:&quot;eda16162-d5e9-4408-a7e6-a180ebaf8b4a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test&#x27;});\ndeleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test-copy&#x27;});\nconsole.log(deleted);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;67a5723b-ffe0-42e9-aab3-3bfa8e177030&quot;,&quot;parentUUID&quot;:&quot;eda16162-d5e9-4408-a7e6-a180ebaf8b4a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bc67e992-92a4-4295-a168-1f5490c86207&quot;,&quot;title&quot;:&quot;dashboard crud &quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-dashboards/test/dashboard.controller.test.js&quot;,&quot;file&quot;:&quot;/test/dashboard.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should create a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:44,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  dashboard = await dashboardController.createDashboard(tenant, dashboardObj);\nsid = dashboard.sid;\nexpect(sid).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1315f55-3cb1-4838-b4e3-c659d1db880e&quot;,&quot;parentUUID&quot;:&quot;bc67e992-92a4-4295-a168-1f5490c86207&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list dashboards for end users&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should list dashboards for end users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  dashboards = await dashboardController.listDashboards(tenant);\n         expect(dashboards.length).to.be.gt(0);  \n         let createdDashord  = dashboards.find((d) =&gt; {\n             return d.sid === sid;\n         })\n         expect\n         (createdDashord).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4fa12f61-9637-455b-819c-f490f835fca4&quot;,&quot;parentUUID&quot;:&quot;bc67e992-92a4-4295-a168-1f5490c86207&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should get a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;dashboard = await dashboardController.getDashboard(tenant,sid);\n            expect(dashboard).to.exist         \n            expect(dashboard.sid).to.equal(sid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fbb08b61-c250-400a-9f1b-d8ebb64893cb&quot;,&quot;parentUUID&quot;:&quot;bc67e992-92a4-4295-a168-1f5490c86207&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should update a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;dashboard.banner = &#x27;test-updated&#x27;;\n            const updatedDashboard = await dashboardController.updateDashboard(tenant,dashboard.toObject());\n            expect(updatedDashboard).to.exist         \n            expect(updatedDashboard.sid).to.equal(sid)\n            expect(updatedDashboard.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83f9a654-7dd7-424e-9d02-93dbdc747b14&quot;,&quot;parentUUID&quot;:&quot;bc67e992-92a4-4295-a168-1f5490c86207&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should copy a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should copy a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const copiedDashboard = await dashboardController.copyDashboard(tenant, sid);\n            expect(copiedDashboard).to.exist         \n            expect(copiedDashboard.sid).to.not.equal(sid)\n            expect(copiedDashboard._id).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53350610-2a66-4c21-9af5-b2e3e7dade65&quot;,&quot;parentUUID&quot;:&quot;bc67e992-92a4-4295-a168-1f5490c86207&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  delete a a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const deleted = await dashboardController.deleteDashboard(tenant,sid);\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c3ec79d-eabb-4013-9d05-e74b57cbbcf4&quot;,&quot;parentUUID&quot;:&quot;bc67e992-92a4-4295-a168-1f5490c86207&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c1315f55-3cb1-4838-b4e3-c659d1db880e&quot;,&quot;4fa12f61-9637-455b-819c-f490f835fca4&quot;,&quot;fbb08b61-c250-400a-9f1b-d8ebb64893cb&quot;,&quot;83f9a654-7dd7-424e-9d02-93dbdc747b14&quot;,&quot;53350610-2a66-4c21-9af5-b2e3e7dade65&quot;,&quot;5c3ec79d-eabb-4013-9d05-e74b57cbbcf4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:74,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c97444f9-e50b-43e7-adf2-982415eabaff&quot;,&quot;title&quot;:&quot;Dashboard route handler tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-dashboards/test/dashboard.handlers.test.js&quot;,&quot;file&quot;:&quot;/test/dashboard.handlers.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\n\ntestConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;\nsession = (await mocks.req()).oauth;\nperms  = await permissions.currentUserPermissions(session)\nlet permissionsWithRun = perms.concat([\n    {\n        \&quot;objectType\&quot;: \&quot;tab\&quot;,\n        \&quot;ownerSid\&quot;: \&quot;bb6cb26b-d179-4763-b2cb-69d107dfd1d8\&quot;,\n        \&quot;ownerType\&quot;: \&quot;system\&quot;,\n        \&quot;permissions\&quot;: enums.permissionTypes.run,\n        \&quot;roleName\&quot;: \&quot;system administrators\&quot;,\n        \&quot;roleGuid\&quot;: \&quot;a48ea7cf-f1ba-4ca9-bf17-2c97d49336cd\&quot;\n      }\n])\nawait permissions.cachePerms(session, permissionsWithRun);\nconsole.log(permissionsWithRun)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;baf77ee6-eb84-4cd0-9ef1-acf730d3ca7c&quot;,&quot;parentUUID&quot;:&quot;c97444f9-e50b-43e7-adf2-982415eabaff&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test&#x27;});\ndeleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test-copy&#x27;});\nconsole.log(deleted);\nawait permissions.cachePerms(session, perms);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05eb9e99-ed4c-4aa9-a679-df1838090dfe&quot;,&quot;parentUUID&quot;:&quot;c97444f9-e50b-43e7-adf2-982415eabaff&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c7649915-bdde-4dec-b08d-2590859551f6&quot;,&quot;title&quot;:&quot;dashboard crud &quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-dashboards/test/dashboard.handlers.test.js&quot;,&quot;file&quot;:&quot;/test/dashboard.handlers.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should create a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = dashboardObj;\nawait handlers.createDashboard(req,mockRes);\nconst dashboard = req.body;\nsid = dashboard.sid;\nexpect(sid).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;532a72b4-9d45-4122-8089-0af1e74a541d&quot;,&quot;parentUUID&quot;:&quot;c7649915-bdde-4dec-b08d-2590859551f6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list dashboards for end users&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should list dashboards for end users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nawait handlers.listDashboards(req,mockRes);\nconst  dashboards = mockRes.body;\nexpect(dashboards.length).to.be.gt(0);  \nlet createdDashboard  = dashboards.find((d) =&gt; {\n    return d.sid === sid;\n})\nexpect(createdDashboard).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79312503-eba8-4099-ba67-e87f3d7728ce&quot;,&quot;parentUUID&quot;:&quot;c7649915-bdde-4dec-b08d-2590859551f6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list dashboards for admins&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should list dashboards for admins&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.query.admin = true;\nawait handlers.listDashboards(req,mockRes);\nconst  dashboards = mockRes.body;\nexpect(dashboards.length).to.be.gt(0);  \nlet createdDashboard  = dashboards.find((d) =&gt; {\n    return d.sid === sid;\n})\nexpect(createdDashboard).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d405452-8842-4992-aba6-297323df08a9&quot;,&quot;parentUUID&quot;:&quot;c7649915-bdde-4dec-b08d-2590859551f6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should get a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.sid = sid;\nawait handlers.getDashboard(req,mockRes);\ndashboard = mockRes.body;\nexpect(dashboard).to.exist         \nexpect(dashboard.sid).to.equal(sid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d95e0f4b-bb47-4d89-89e2-d52375a476e2&quot;,&quot;parentUUID&quot;:&quot;c7649915-bdde-4dec-b08d-2590859551f6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should update a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.sid = sid;\nreq.body = dashboard.toObject();\nawait handlers.updateDashboard(req,mockRes);\nconst updatedDashboard = mockRes.body;\nexpect(updatedDashboard).to.exist         \nexpect(updatedDashboard.sid).to.equal(sid)\nexpect(updatedDashboard.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;33177309-1e8e-495f-9277-13f9df3b0a29&quot;,&quot;parentUUID&quot;:&quot;c7649915-bdde-4dec-b08d-2590859551f6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should copy a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should copy a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.sid = sid;\nreq.body = dashboard.toObject();\nawait handlers.copyDashboard(req,mockRes);\nconst copiedDashboard = mockRes.body;\nexpect(copiedDashboard).to.exist         \nexpect(copiedDashboard.sid).to.not.equal(sid)\nexpect(copiedDashboard._id).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c3c4081-9e66-453b-839c-289f0ac7ef9d&quot;,&quot;parentUUID&quot;:&quot;c7649915-bdde-4dec-b08d-2590859551f6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should delete a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.sid = sid;\nawait handlers.deleteDashboard(req,mockRes);\nlet deleted = mockRes.body;\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;414fbe68-98e4-47f9-849b-5517ae0af72f&quot;,&quot;parentUUID&quot;:&quot;c7649915-bdde-4dec-b08d-2590859551f6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;532a72b4-9d45-4122-8089-0af1e74a541d&quot;,&quot;79312503-eba8-4099-ba67-e87f3d7728ce&quot;,&quot;4d405452-8842-4992-aba6-297323df08a9&quot;,&quot;d95e0f4b-bb47-4d89-89e2-d52375a476e2&quot;,&quot;33177309-1e8e-495f-9277-13f9df3b0a29&quot;,&quot;7c3c4081-9e66-453b-839c-289f0ac7ef9d&quot;,&quot;414fbe68-98e4-47f9-849b-5517ae0af72f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:33,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4109a4e5-dd7a-4df6-9854-2244ffe7f2b8&quot;,&quot;title&quot;:&quot;Legacy tab mongo tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-dashboards/test/tab.test.js&quot;,&quot;file&quot;:&quot;/test/tab.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig()\ntenant = testConfig.tenantOne.tenantId;;\ntab = await dashboardController.createTestTab(tenant)\nexpect(tab.SID).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c701061c-0add-48d9-8ebb-8e21c70f96bc&quot;,&quot;parentUUID&quot;:&quot;4109a4e5-dd7a-4df6-9854-2244ffe7f2b8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await dashboardController.deleteTabs(tenant, {Title: &#x27;created-by-mocha-test&#x27;});\ndeleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test&#x27;});\ndeleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test-migrated&#x27;});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ddd0f00-2b0b-4d5a-9948-7a774f963418&quot;,&quot;parentUUID&quot;:&quot;4109a4e5-dd7a-4df6-9854-2244ffe7f2b8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;147ca796-2552-4861-8957-767dcef047c3&quot;,&quot;title&quot;:&quot;tab crud &quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-dashboards/test/tab.test.js&quot;,&quot;file&quot;:&quot;/test/tab.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a legacy tab&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should create a legacy tab&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  tab = await dashboardController.createTestTab(tenant);\n\n tabSid = tab.SID;\n expect(tabSid).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71407dac-22fb-45d7-81bf-0e4b543f8e89&quot;,&quot;parentUUID&quot;:&quot;147ca796-2552-4861-8957-767dcef047c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list legacy tabs&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should list legacy tabs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  tabs = await dashboardController.listTabs(tenant);\n expect(tabs.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a544232-d2ba-4335-a5a2-c26632975718&quot;,&quot;parentUUID&quot;:&quot;147ca796-2552-4861-8957-767dcef047c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a legacy tab&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should get a legacy tab&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;tab = await dashboardController.getTab(tenant,tabSid);\n            expect(tab).to.exist         \n            expect(tab.SID).to.equal(tabSid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4f7dc29-892c-404c-a7a9-c75d4da5a705&quot;,&quot;parentUUID&quot;:&quot;147ca796-2552-4861-8957-767dcef047c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a tab using a dashboard object&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should update a tab using a dashboard object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const dashboardObject = {\n    sid: tab.SID,\n    title: tab.Title,\n    ordinal: 5000,\n}\nconst dashboardMask = await dashboardController.updateTabFromDashboardObject(tenant,dashboardObject);\nexpect(dashboardObject.modifiedDate).to.exist\ntab = await dashboardController.getTab(tenant,tab.SID);\nexpect(tab).to.exist         \nexpect(tab.SID).to.equal(tabSid)\nexpect(tab.Ordinal).to.equal(dashboardObject.ordinal)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e24bde6e-57cd-4570-909f-c5f0262a6cc5&quot;,&quot;parentUUID&quot;:&quot;147ca796-2552-4861-8957-767dcef047c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should convert a legacy tab&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should convert a legacy tab&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  dashboard = await dashboardController.converTabToDashboard(tab);\n            expect(dashboard).to.exist         \n            expect(dashboard.layouts).to.exist;\n            expect(dashboard.legacySid).to.equal(tabSid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4db4b159-dc20-4b2b-a759-d3c1f7b5e30a&quot;,&quot;parentUUID&quot;:&quot;147ca796-2552-4861-8957-767dcef047c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should migrate legacy tab to dashboard&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should migrate legacy tab to dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  success = await dashboardController.migrateTabToDashboard(tenant, tabSid);\n            expect(success.sid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5bed9a9-99ff-4c5f-8f56-a2cf3a92f06b&quot;,&quot;parentUUID&quot;:&quot;147ca796-2552-4861-8957-767dcef047c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;71407dac-22fb-45d7-81bf-0e4b543f8e89&quot;,&quot;2a544232-d2ba-4335-a5a2-c26632975718&quot;,&quot;e4f7dc29-892c-404c-a7a9-c75d4da5a705&quot;,&quot;e24bde6e-57cd-4570-909f-c5f0262a6cc5&quot;,&quot;4db4b159-dc20-4b2b-a759-d3c1f7b5e30a&quot;,&quot;d5bed9a9-99ff-4c5f-8f56-a2cf3a92f06b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:24,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c5b2e63a-da47-4350-ae13-6d6215cf7c1c&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;48b5ce3d-f909-4b15-9f27-4bfc701e8da1&quot;,&quot;title&quot;:&quot;Files db controller tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-files/test/db/file.controller.test.js&quot;,&quot;file&quot;:&quot;/test/db/file.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Files db controller tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests \&quot;before all\&quot; hook in \&quot;Files db controller tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await testLib.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53a2326d-4f58-463c-82a6-759c09ec0bc5&quot;,&quot;parentUUID&quot;:&quot;48b5ce3d-f909-4b15-9f27-4bfc701e8da1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Files db controller tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests \&quot;after all\&quot; hook in \&quot;Files db controller tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await fileController.removeFiles(tenant, {path: \&quot;/created/by/mocha/test\&quot;});\nconsole.log(deleted);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3eecad34-961b-4d6b-a78b-be4b238e1699&quot;,&quot;parentUUID&quot;:&quot;48b5ce3d-f909-4b15-9f27-4bfc701e8da1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c12c81e7-80fa-4afd-a9c3-1384f000e10a&quot;,&quot;title&quot;:&quot;file crud &quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-files/test/db/file.controller.test.js&quot;,&quot;file&quot;:&quot;/test/db/file.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  should create a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:34,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const file = await fileController.createFile(tenant, fileObj);\nsid = file.sid;\nexpect(sid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;069f5071-529c-45ee-8221-53e0e01f51a6&quot;,&quot;parentUUID&quot;:&quot;c12c81e7-80fa-4afd-a9c3-1384f000e10a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  should get a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;file = await fileController.getFile(tenant, sid);\nexpect(file).to.exist;\nexpect(file.sid).to.equal(sid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c096d123-8bb9-4aeb-b445-65f7e9c586ef&quot;,&quot;parentUUID&quot;:&quot;c12c81e7-80fa-4afd-a9c3-1384f000e10a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should find a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  should find a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;file = await fileController.findFile(tenant, {filePath: \&quot;/created/by/mocha/test\&quot;});\nexpect(file).to.exist;\nexpect(file.sid).to.equal(sid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6e3e4f3-85f4-46c4-9ee4-151df7edda3f&quot;,&quot;parentUUID&quot;:&quot;c12c81e7-80fa-4afd-a9c3-1384f000e10a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  should update a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const updatedFile = await fileController.updateFile(\n  tenant,\n  file.toObject()\n);\nexpect(updatedFile).to.exist;\nexpect(updatedFile.sid).to.equal(sid);\nexpect(updatedFile.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eeaf3a53-0b30-4a3f-8b4b-323684fd9493&quot;,&quot;parentUUID&quot;:&quot;c12c81e7-80fa-4afd-a9c3-1384f000e10a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  delete a a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const deleted = await fileController.removeFile(tenant, fileObj);\nexpect(deleted).to.exist;\nexpect(deleted.deletedCount).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53407580-2db1-4798-88eb-e3c38a3f0d49&quot;,&quot;parentUUID&quot;:&quot;c12c81e7-80fa-4afd-a9c3-1384f000e10a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;069f5071-529c-45ee-8221-53e0e01f51a6&quot;,&quot;c096d123-8bb9-4aeb-b445-65f7e9c586ef&quot;,&quot;c6e3e4f3-85f4-46c4-9ee4-151df7edda3f&quot;,&quot;eeaf3a53-0b30-4a3f-8b4b-323684fd9493&quot;,&quot;53407580-2db1-4798-88eb-e3c38a3f0d49&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:52,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;841a12d7-588b-40c5-95f4-e4e62f7e940f&quot;,&quot;title&quot;:&quot;Files API Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-files/test/functions/functions.test.js&quot;,&quot;file&quot;:&quot;/test/functions/functions.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Files API Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Files API Tests \&quot;before all\&quot; hook in \&quot;Files API Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\nconst testConfig = await testLib.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31588db5-3c5d-4e1d-b858-2ae465da51d4&quot;,&quot;parentUUID&quot;:&quot;841a12d7-588b-40c5-95f4-e4e62f7e940f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;writes a temp file (non file upload)&quot;,&quot;fullTitle&quot;:&quot;Files API Tests writes a temp file (non file upload)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(baseUrl)\n  .post(`/api/files/${parentFolder}/${encodeURIComponent(`${tenant}/testDir/mochaTest-WriteTextFile.txt`)}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\n  .set(&#x27;content-type&#x27;, &#x27;text/plain&#x27;)\n  .send(&#x27;directly write text into a file (non file upload)&#x27;)\n  \nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ae857b16-9276-44d8-acd1-f57a393e4a1d&quot;,&quot;parentUUID&quot;:&quot;841a12d7-588b-40c5-95f4-e4e62f7e940f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uploads multiple files in multipart form using bearerAuth&quot;,&quot;fullTitle&quot;:&quot;Files API Tests uploads multiple files in multipart form using bearerAuth&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const token = await testLib.getAuthToken()\nlet res = await chai.request(baseUrl)\n  // .post(`/api/files/upload`)\n  .post(`/api/files/${parentFolder}/${path}/upload`)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n  .attach(&#x27;files&#x27;, &#x27;./test/mocks/mochaTest.txt&#x27;, &#x27;mochaTest.txt&#x27;)\n  .attach(&#x27;files&#x27;, &#x27;./test/mocks/mochaTest.txt&#x27;, &#x27;mochaTest.txt&#x27;)\n  \nexpect(res.status).to.equal(200);\nlet filePathParts = res.body[0].filePath.split(&#x27;/&#x27;)\nfilePathParts.shift()\ntestFilePath = filePathParts.join(&#x27;/&#x27;)\nuploadResultBody = res.body\nexpect(res.body.length).to.equal(2);\nexpect(res.body[0].originalFilename).to.equal(&#x27;mochaTest.txt&#x27;);\nexpect(res.body[1].originalFilename).to.equal(&#x27;mochaTest.txt&#x27;);\nsetTimeout(async () =&gt; {\n  // verify that we have records in mongo db for these files\n  let file = await fileController.getFile(tenant, res.body[0].sid);\n  expect(file).to.exist;\n  expect(file.sid).to.equal(res.body[0].sid);\n  file = await fileController.getFile(tenant, res.body[1].sid);\n  expect(file).to.exist;\n  expect(file.sid).to.equal(res.body[1].sid);\n}, 1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3b4414e8-ef60-4a46-a511-9aaa8c34b45d&quot;,&quot;parentUUID&quot;:&quot;841a12d7-588b-40c5-95f4-e4e62f7e940f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uploads multiple files in multipart form using integrify env token for internal use&quot;,&quot;fullTitle&quot;:&quot;Files API Tests uploads multiple files in multipart form using integrify env token for internal use&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const token = await testLib.getAuthToken()\nlet res = await chai.request(baseUrl)\n  // .post(`/api/files/upload`)\n  .post(`/api/files/${parentFolder}/${path}/upload/internal?tenant=${tenant}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\n  .attach(&#x27;files&#x27;, &#x27;./test/mocks/mochaTest.txt&#x27;, &#x27;mochaTest.txt&#x27;)\n  .attach(&#x27;files&#x27;, &#x27;./test/mocks/mochaTest.txt&#x27;, &#x27;mochaTest.txt&#x27;)\n  \nexpect(res.status).to.equal(200);\nlet filePathParts = res.body[0].filePath.split(&#x27;/&#x27;)\nfilePathParts.shift()\ntestFilePath = filePathParts.join(&#x27;/&#x27;)\nexpect(res.body.length).to.equal(2);\nexpect(res.body[0].originalFilename).to.equal(&#x27;mochaTest.txt&#x27;);\nexpect(res.body[1].originalFilename).to.equal(&#x27;mochaTest.txt&#x27;);\nsetTimeout(async () =&gt; {\n  // verify that we have records in mongo db for these files\n  let file = await fileController.getFile(tenant, res.body[0].sid);\n  expect(file).to.exist;\n  expect(file.sid).to.equal(res.body[0].sid);\n  file = await fileController.getFile(tenant, res.body[1].sid);\n  expect(file).to.exist;\n  expect(file.sid).to.equal(res.body[1].sid);\n  }, 1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b067da1f-2f67-40fb-9f26-4ba2c4c59c70&quot;,&quot;parentUUID&quot;:&quot;841a12d7-588b-40c5-95f4-e4e62f7e940f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;uploads a file in octet stream&quot;,&quot;fullTitle&quot;:&quot;Files API Tests uploads a file in octet stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(baseUrl)\n  .post(`/api/files/${parentFolder}/${filePath}/uploadStream`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\n  .set(&#x27;Content-Type&#x27;, &#x27;application/octet-stream&#x27;)\n  .attach(&#x27;files&#x27;, &#x27;./test/mocks/mochaTest.txt&#x27;, &#x27;mochaTest.txt&#x27;)\n  \nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8efbded1-e5b3-4994-be54-b339a9902625&quot;,&quot;parentUUID&quot;:&quot;841a12d7-588b-40c5-95f4-e4e62f7e940f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;read file with attachment param = false&quot;,&quot;fullTitle&quot;:&quot;Files API Tests read file with attachment param = false&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(baseUrl)\n  .get(`/api/files/${parentFolder}/${encodeURIComponent(testFilePath)}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\nexpect(res).to.have.status(200);\nexpect(res).to.have.header(&#x27;content-type&#x27;, &#x27;text/plain; charset=utf-8&#x27;);\nexpect(res).to.be.text;\nexpect(res.text).to.include(&#x27;Hello World!&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92176a50-c1d3-485e-82fd-d5448999e5d5&quot;,&quot;parentUUID&quot;:&quot;841a12d7-588b-40c5-95f4-e4e62f7e940f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;read file with attachment param = true&quot;,&quot;fullTitle&quot;:&quot;Files API Tests read file with attachment param = true&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const filePathParts = testFilePath.split(&#x27;/&#x27;)\nconst filename = filePathParts[filePathParts.length-1]\nlet res = await chai.request(baseUrl)\n  .get(`/api/files/${parentFolder}/${encodeURIComponent(testFilePath)}`)\n  .query({attachment: &#x27;true&#x27;})\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\nexpect(res.statusCode).to.equal(200)\nexpect(res).to.have.header(&#x27;content-disposition&#x27;, `attachment; filename=\&quot;${filename}\&quot;`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b333130d-2b75-4da5-a3db-9af7656b8ccc&quot;,&quot;parentUUID&quot;:&quot;841a12d7-588b-40c5-95f4-e4e62f7e940f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;downloads a file&quot;,&quot;fullTitle&quot;:&quot;Files API Tests downloads a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const filePathParts = testFilePath.split(&#x27;/&#x27;)\nconst filename = filePathParts[filePathParts.length-1]\nlet downloadRes = await chai.request(baseUrl)\n  .get(`/api/files/${parentFolder}/${encodeURIComponent(testFilePath)}/download`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\n\nexpect(downloadRes).to.have.status(200);\nexpect(downloadRes).to.have.header(&#x27;content-type&#x27;, &#x27;application/octet-stream&#x27;)\nexpect(downloadRes).to.have.header(&#x27;content-disposition&#x27;, `attachment; filename=\&quot;${filename}\&quot;`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ecbb3e5-04b1-49e1-bda7-b8aaa5be8f70&quot;,&quot;parentUUID&quot;:&quot;841a12d7-588b-40c5-95f4-e4e62f7e940f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;checks if a file exists&quot;,&quot;fullTitle&quot;:&quot;Files API Tests checks if a file exists&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(baseUrl)\n  .get(`/api/files/${parentFolder}/${encodeURIComponent(testFilePath)}/exists`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\n  \nexpect(res.status).to.equal(200);\nexpect(res.body).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a621d3bd-1511-4010-9ffd-9d16c82eb227&quot;,&quot;parentUUID&quot;:&quot;841a12d7-588b-40c5-95f4-e4e62f7e940f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;checks if a file exists by sid&quot;,&quot;fullTitle&quot;:&quot;Files API Tests checks if a file exists by sid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;setTimeout(async () =&gt; {\n  let res = await chai.request(baseUrl)\n    .get(`/api/files/${uploadResultBody[1].sid}/exists?tenant=${tenant}`)\n    .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\n\n  expect(res.status).to.equal(200);\n  expect(res.body).to.equal(true);\n}, 1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b30a02b2-b158-4467-983c-7fe014e1a9a2&quot;,&quot;parentUUID&quot;:&quot;841a12d7-588b-40c5-95f4-e4e62f7e940f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;downloads a file by sid using integrify env token for internal use&quot;,&quot;fullTitle&quot;:&quot;Files API Tests downloads a file by sid using integrify env token for internal use&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const token = await testLib.getAuthToken()\nlet downloadRes = await chai.request(`${baseUrl}`)\n  .get(`/api/files/${uploadResultBody[0].sid}/download/internal?tenant=${tenant}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\nexpect(downloadRes).to.have.status(200);\nexpect(downloadRes).to.have.header(&#x27;content-type&#x27;, &#x27;application/octet-stream&#x27;)\nexpect(downloadRes).to.have.header(&#x27;content-disposition&#x27;, &#x27;attachment; filename=\&quot;mochaTest.txt\&quot;&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7151967d-fc55-4197-9f94-84da0856bb38&quot;,&quot;parentUUID&quot;:&quot;841a12d7-588b-40c5-95f4-e4e62f7e940f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets file info&quot;,&quot;fullTitle&quot;:&quot;Files API Tests gets file info&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const token = await testLib.getAuthToken()\nconst result = await chai.request(baseUrl)\n  .get(`/api/files/${uploadResultBody[0].sid}/info?tenant=${tenant}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\nexpect(result.body.sid).to.equal(uploadResultBody[0].sid)\nexpect(result.body.originalFilename).to.equal(uploadResultBody[0].originalFilename)\nexpect(result.body.contentType).to.equal(uploadResultBody[0].contentType)\nexpect(result.body.filePath).to.equal(uploadResultBody[0].filePath)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba9fc3cd-89de-4acf-9181-ce75d93e25fe&quot;,&quot;parentUUID&quot;:&quot;841a12d7-588b-40c5-95f4-e4e62f7e940f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;read file by sid&quot;,&quot;fullTitle&quot;:&quot;Files API Tests read file by sid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(baseUrl)\n  .get(`/api/files/${uploadResultBody[0].sid}?tenant=${tenant}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\nexpect(res).to.have.status(200);\nexpect(res).to.have.header(&#x27;content-type&#x27;, &#x27;text/plain; charset=utf-8&#x27;);\nexpect(res).to.be.text;\nexpect(res.text).to.include(&#x27;Hello World!&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94495388-0ce3-4bba-baf7-13ac75a70d94&quot;,&quot;parentUUID&quot;:&quot;841a12d7-588b-40c5-95f4-e4e62f7e940f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;copies a file&quot;,&quot;fullTitle&quot;:&quot;Files API Tests copies a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// upload now modifies the filename so we need to use the new filename from fileInfo\nlet filePath = uploadResultBody[0].filePath.replace(parentFolder, &#x27;&#x27;)\nlet copyRes = await chai.request(baseUrl)\n  .put(`/api/files/${parentFolder}/${encodeURIComponent(filePath)}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\n  .send({\n    targetParentFolder: \&quot;temp\&quot;,\n    targetFilePath: `${tenant}/testDir/helloWorld2.txt`\n  })\nexpect(copyRes.statusCode).to.equal(200)\n// verify that original and copy have same contents\nlet readRes = await chai.request(baseUrl)\n  .get(`/api/files/${parentFolder}/${encodeURIComponent(`${tenant}/testDir/mochaTest-WriteTextFile.txt`)}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\nexpect(readRes.text).to.include(&#x27;directly write text into a file (non file upload)&#x27;);\n// verify that mongodb record exists and has correct path exists for the file copy \nlet file = await fileController.getFile(tenant, copyRes.body.sid)\nexpect(file).to.exist;\nexpect(file.filePath).to.equal(`temp/${tenant}/testDir/helloWorld2.txt`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cba3adad-61e3-431d-9454-3105befe6777&quot;,&quot;parentUUID&quot;:&quot;841a12d7-588b-40c5-95f4-e4e62f7e940f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;copies a file by sid&quot;,&quot;fullTitle&quot;:&quot;Files API Tests copies a file by sid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// const uploadedFilename = uploadResultBody[0].filePath.split(&#x27;/&#x27;)\nlet copyRes = await chai.request(baseUrl)\n  .put(`/api/files/${uploadResultBody[0].sid}?tenant=${tenant}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\n  .send({\n    targetParentFolder: \&quot;temp\&quot;,\n    targetPath: `${tenant}/testDirBySid`\n  })\ncopyResultBody = copyRes.body\nexpect(copyRes.statusCode).to.equal(200)\n// verify that original and copy have same contents\nlet readRes = await chai.request(baseUrl)\n  .get(`/api/files/${uploadResultBody[0].sid}?tenant=${tenant}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\nexpect(readRes.text).to.include(&#x27;Hello World!&#x27;);\n// verify that mongodb record exists and has correct path exists for the file copy \nlet file = await fileController.getFile(tenant, copyResultBody.sid)\nexpect(file).to.exist;\nexpect(file.filePath).to.equal(`temp/${tenant}/testDirBySid/${copyResultBody.sid.substring(30)}_${uploadResultBody[0].originalFilename}`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3fe16415-4416-4d8c-a7c7-404c901344e0&quot;,&quot;parentUUID&quot;:&quot;841a12d7-588b-40c5-95f4-e4e62f7e940f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;moves a file&quot;,&quot;fullTitle&quot;:&quot;Files API Tests moves a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// upload now modifies the filename so we need to use the new filename from fileInfo\nlet filePath = uploadResultBody[0].filePath.replace(parentFolder, &#x27;&#x27;)\n// get mongo record by name\n// after moveFile, get mongo record by sid and verify that the path changed\nconst preMovefileInfo = await fileController.findFile(tenant, { filePath: uploadResultBody[0].filePath })\nlet moveRes = await chai.request(baseUrl)\n  .patch(`/api/files/${parentFolder}/${encodeURIComponent(filePath)}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\n  .send({\n    targetParentFolder: \&quot;temp\&quot;,\n    targetFilePath: `${tenant}/testDir/helloWorld3.txt`\n  })\nexpect(moveRes.statusCode).to.equal(200)\n\nlet movedFileInfo = await fileController.getFile(tenant, preMovefileInfo.sid)\nexpect(movedFileInfo.sid).to.equal(preMovefileInfo.sid)\nexpect(movedFileInfo).to.exist;\nexpect(movedFileInfo.filePath).to.equal(`temp/${tenant}/testDir/helloWorld3.txt`);\n// verify that original file \&quot;mochaTest.txt\&quot; no longer exists\n\nlet readRes = await chai.request(baseUrl)\n  .get(`/api/files/${parentFolder}/${filePath}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\nexpect(readRes.statusCode).to.equal(404)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b51a0a29-a22f-493a-9ed7-77732f7a3080&quot;,&quot;parentUUID&quot;:&quot;841a12d7-588b-40c5-95f4-e4e62f7e940f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;moves a file by sid&quot;,&quot;fullTitle&quot;:&quot;Files API Tests moves a file by sid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let moveRes = await chai.request(baseUrl)\n  .patch(`/api/files/${copyResultBody.sid}?tenant=${tenant}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\n  .send({\n    targetParentFolder: \&quot;temp\&quot;,\n    targetPath: `${tenant}/testDirBySid/move`\n  })\nexpect(moveRes.statusCode).to.equal(200)\n// query by sid and verify that contents and path are correct\nlet readRes = await chai.request(baseUrl)\n  .get(`/api/files/${moveRes.body.sid}?tenant=${tenant}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\nexpect(readRes.text).to.include(&#x27;Hello World!&#x27;);\n// verify that mongodb record exists and has correct path exists for the file copy \nlet file = await fileController.getFile(tenant, moveRes.body.sid)\nexpect(file).to.exist;\nexpect(file.filePath).to.equal(`temp/${tenant}/testDirBySid/move/${copyResultBody.sid.substring(30)}_${copyResultBody.originalFilename}`);\n  \n// try to read by pre move path and make sure we get a 404\nconst copyResultFilePathParts = copyResultBody.filePath.split(&#x27;/&#x27;)\ncopyResultFilePathParts.shift()\nreadRes = await chai.request(baseUrl)\n  .get(`/api/files/${parentFolder}/${copyResultFilePathParts.join(&#x27;/&#x27;)}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\nexpect(readRes.statusCode).to.equal(404)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75e2525b-3623-499c-9d08-8ab80e15ee9d&quot;,&quot;parentUUID&quot;:&quot;841a12d7-588b-40c5-95f4-e4e62f7e940f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;deletes a file&quot;,&quot;fullTitle&quot;:&quot;Files API Tests deletes a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// for some reason, this errors with s3 filestore if you run all tests in mocha explorer at the same time\n// but works correctly if you run them one by one\nconst url = tenant + &#x27;/testDir/helloWorld3.txt&#x27;\nlet delRes = await chai.request(baseUrl)\n  .delete(`/api/files/${parentFolder}/${encodeURIComponent(url)}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\nexpect(delRes.statusCode).to.equal(200)\nexpect(delRes.text).to.equal(&#x27;1&#x27;);\nlet readRes = await chai.request(baseUrl)\n  .get(`/api/files/${parentFolder}/${encodeURIComponent(url)}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\nexpect(readRes.statusCode).to.equal(404)\n// verify that mongo record was deleted\nfile = await fileController.findFile(tenant, {filePath:`temp/${url}`})\nexpect(file).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;60be2fcd-352a-42d6-8721-15cec004b8f8&quot;,&quot;parentUUID&quot;:&quot;841a12d7-588b-40c5-95f4-e4e62f7e940f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;deletes a file by sid&quot;,&quot;fullTitle&quot;:&quot;Files API Tests deletes a file by sid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:378,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// for some reason, this errors with s3 filestore if you run all tests in mocha explorer at the same time\n// but works correctly if you run them one by one\nlet delRes = await chai.request(baseUrl)\n  .delete(`/api/files/${uploadResultBody[1].sid}?tenant=${tenant}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\nexpect(delRes.statusCode).to.equal(200)\nexpect(delRes.text).to.equal(&#x27;1&#x27;);\nlet readRes = await chai.request(baseUrl)\n  .get(`/api/files/${uploadResultBody[1].sid}?tenant=${tenant}`)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\nexpect(readRes.statusCode).to.equal(404)\n// verify that mongo record was deleted\nfile = await fileController.getFile(tenant, uploadResultBody[1].sid)\nexpect(file).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;caad8030-3cc2-40b2-82cb-349c540237c3&quot;,&quot;parentUUID&quot;:&quot;841a12d7-588b-40c5-95f4-e4e62f7e940f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ae857b16-9276-44d8-acd1-f57a393e4a1d&quot;,&quot;3b4414e8-ef60-4a46-a511-9aaa8c34b45d&quot;,&quot;b067da1f-2f67-40fb-9f26-4ba2c4c59c70&quot;,&quot;8efbded1-e5b3-4994-be54-b339a9902625&quot;,&quot;92176a50-c1d3-485e-82fd-d5448999e5d5&quot;,&quot;b333130d-2b75-4da5-a3db-9af7656b8ccc&quot;,&quot;0ecbb3e5-04b1-49e1-bda7-b8aaa5be8f70&quot;,&quot;a621d3bd-1511-4010-9ffd-9d16c82eb227&quot;,&quot;b30a02b2-b158-4467-983c-7fe014e1a9a2&quot;,&quot;7151967d-fc55-4197-9f94-84da0856bb38&quot;,&quot;ba9fc3cd-89de-4acf-9181-ce75d93e25fe&quot;,&quot;94495388-0ce3-4bba-baf7-13ac75a70d94&quot;,&quot;cba3adad-61e3-431d-9454-3105befe6777&quot;,&quot;3fe16415-4416-4d8c-a7c7-404c901344e0&quot;,&quot;b51a0a29-a22f-493a-9ed7-77732f7a3080&quot;,&quot;75e2525b-3623-499c-9d08-8ab80e15ee9d&quot;,&quot;60be2fcd-352a-42d6-8721-15cec004b8f8&quot;,&quot;caad8030-3cc2-40b2-82cb-349c540237c3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:500,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d4bc2485-0901-46b9-97e1-3ab7867763d5&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c73d8036-7ae3-4965-9f75-6ce9e3993a5a&quot;,&quot;title&quot;:&quot;Form controller tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-forms/test/controller.test.js&quot;,&quot;file&quot;:&quot;/test/controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Form controller tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\ntenant = config.tenantOne.tenantId;\nsession = {jwt_token: &#x27;xxxxx&#x27;, tenant: config.tenantOne.tenantId, \nuser_sid: config.tenantOne.adminUser.sid,\nprofile: {\n  sid: config.tenantOne.adminUser.sid,\n  user_sid: config.tenantOne.adminUser.sid,\n  user_name: config.tenantOne.adminUser.userName,\n  email: \&quot;test@nowhere.com\&quot;,\n  name: config.tenantOne.adminUser.userName + \&quot; user\&quot;\n}\n   }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5bc0a17e-886e-4432-b86c-bab1dfcc3101&quot;,&quot;parentUUID&quot;:&quot;c73d8036-7ae3-4965-9f75-6ce9e3993a5a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1a099b85-785d-43bf-8ca8-e22c34004858&quot;,&quot;title&quot;:&quot;form retrieval&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-forms/test/controller.test.js&quot;,&quot;file&quot;:&quot;/test/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should retrieve a form by id with default&quot;,&quot;fullTitle&quot;:&quot;Form controller tests form retrieval should retrieve a form by id with default&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:44,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const form = await controller.getForm(tenant, profileFormSid);\nexpect(form[&#x27;name&#x27;]).to.equal(&#x27;Contact Profile Update Form&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bfa3f633-547b-4e81-85eb-65c0c3f616b6&quot;,&quot;parentUUID&quot;:&quot;1a099b85-785d-43bf-8ca8-e22c34004858&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should parse out questions&quot;,&quot;fullTitle&quot;:&quot;Form controller tests form retrieval should parse out questions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const questions = await controller.getFormQuestions(tenant, profileFormSid);\nexpect(questions.length).to.equal(12);\nexpect(Object.keys(questions[0])).to.have.members([&#x27;id&#x27;, &#x27;displayName&#x27;, &#x27;label&#x27;, &#x27;show&#x27;, &#x27;type&#x27;, &#x27;validation&#x27;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1bf01e3c-5b54-49c2-a524-91f748a1650b&quot;,&quot;parentUUID&quot;:&quot;1a099b85-785d-43bf-8ca8-e22c34004858&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list forms without a name search&quot;,&quot;fullTitle&quot;:&quot;Form controller tests form retrieval should list forms without a name search&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:145,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const forms = await controller.listForms(tenant);\nexpect(forms.length).to.be.gt(0);\nexpect(forms[0].name).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41d5f55e-f76c-448b-bbef-a24272ef2087&quot;,&quot;parentUUID&quot;:&quot;1a099b85-785d-43bf-8ca8-e22c34004858&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list forms with a name search&quot;,&quot;fullTitle&quot;:&quot;Form controller tests form retrieval should list forms with a name search&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const forms = await controller.listForms(tenant, {sid: profileFormSid});\nexpect(forms.length).to.be.gt(0);\nexpect(forms[0].sid).to.equal(profileFormSid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9818affc-0a07-486c-8a2f-27ec8c8d6639&quot;,&quot;parentUUID&quot;:&quot;1a099b85-785d-43bf-8ca8-e22c34004858&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bfa3f633-547b-4e81-85eb-65c0c3f616b6&quot;,&quot;1bf01e3c-5b54-49c2-a524-91f748a1650b&quot;,&quot;41d5f55e-f76c-448b-bbef-a24272ef2087&quot;,&quot;9818affc-0a07-486c-8a2f-27ec8c8d6639&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:199,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cb414686-3d5d-4ca0-981f-62c757f97f54&quot;,&quot;title&quot;:&quot;Form route handler tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-forms/test/handlers.test.js&quot;,&quot;file&quot;:&quot;/test/handlers.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Form route handler tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\ntenant = config.tenantOne.tenantId;\nintegrifyEnvToken = config.tenantOne.tenantId + \&quot; \&quot; + process.env.INTEGRIFY_ENV_TOKEN\noauth = {jwt_token: &#x27;xxxxx&#x27;, tenant: config.tenantOne.tenantId, \nuser_sid: config.tenantOne.adminUser.sid,\nprofile: {\n  sid: config.tenantOne.adminUser.sid,\n  user_sid: config.tenantOne.adminUser.sid,\n  user_name: config.tenantOne.adminUser.userName,\n  email: \&quot;test@nowhere.com\&quot;,\n  name: config.tenantOne.adminUser.userName + \&quot; user\&quot;\n}\n       }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;862c1515-6c58-46aa-b6ca-98811fd10ef6&quot;,&quot;parentUUID&quot;:&quot;cb414686-3d5d-4ca0-981f-62c757f97f54&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0c4ca923-ec6f-45b6-9827-36e768bad894&quot;,&quot;title&quot;:&quot;form retrieval&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-forms/test/handlers.test.js&quot;,&quot;file&quot;:&quot;/test/handlers.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should retrieve a form by id with default&quot;,&quot;fullTitle&quot;:&quot;Form route handler tests form retrieval should retrieve a form by id with default&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.formSid = profileFormSid;\nawait handlers.getForm(req,mockRes);\nconst form = mockRes.body;\nexpect(form.name).to.equal(&#x27;Contact Profile Update Form&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f2d17e38-8092-42ab-8596-5f4f43599a11&quot;,&quot;parentUUID&quot;:&quot;0c4ca923-ec6f-45b6-9827-36e768bad894&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should parse out questions&quot;,&quot;fullTitle&quot;:&quot;Form route handler tests form retrieval should parse out questions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.formSid = profileFormSid;\nawait handlers.getFormQuestions(req, mockRes);\nconst questions = mockRes.body;\nexpect(questions.length).to.equal(12);\nexpect(Object.keys(questions[0])).to.have.members([&#x27;id&#x27;, &#x27;displayName&#x27;, &#x27;label&#x27;, &#x27;show&#x27;, &#x27;type&#x27;, &#x27;validation&#x27;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd30bfe7-7308-4743-a03c-cc529bb65ef4&quot;,&quot;parentUUID&quot;:&quot;0c4ca923-ec6f-45b6-9827-36e768bad894&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list forms without a query or userPerms&quot;,&quot;fullTitle&quot;:&quot;Form route handler tests form retrieval should list forms without a query or userPerms&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\n//req.params.formSid = profileFormSid;\nawait handlers.searchForms(req,mockRes);\nconst forms = mockRes.body;\nexpect(forms.length).to.be.gt(0);\nexpect(forms[0].name).to.exist;\nexpect(forms[0].categoryName).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1292897-6de9-45de-99b1-0d3b8a3e6eda&quot;,&quot;parentUUID&quot;:&quot;0c4ca923-ec6f-45b6-9827-36e768bad894&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list forms with a search term&quot;,&quot;fullTitle&quot;:&quot;Form route handler tests form retrieval should list forms with a search term&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.query.search = &#x27;profile Update&#x27;;\nawait handlers.searchForms(req,mockRes);\nconst forms = mockRes.body;\nexpect(forms.length).to.be.gt(0);\nexpect(forms[0].categoryName).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b83080db-7e79-4741-bdb4-5edaf390f4ed&quot;,&quot;parentUUID&quot;:&quot;0c4ca923-ec6f-45b6-9827-36e768bad894&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f2d17e38-8092-42ab-8596-5f4f43599a11&quot;,&quot;cd30bfe7-7308-4743-a03c-cc529bb65ef4&quot;,&quot;e1292897-6de9-45de-99b1-0d3b8a3e6eda&quot;,&quot;b83080db-7e79-4741-bdb4-5edaf390f4ed&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:326,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;73d45aab-0d2e-4bab-85f1-757050a42ff3&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0aac729c-e58c-4a17-9611-4a3cb648dbfe&quot;,&quot;title&quot;:&quot;Instance API Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()} //system level\n// session = {tenant: config.tenantOne.tenantId, user_sid: &#x27;1e660111-de6f-4318-8f51-6e59cb33d8d7&#x27;} //process level\n// session = {tenant: config.tenantOne.tenantId, user_sid:&#x27;521a92c8-e77c-4537-811b-dea6e533d800&#x27;} //category level\ntenantId = config.tenantOne.tenantId;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97b49203-f65e-4fa2-b179-6ce0a77080c1&quot;,&quot;parentUUID&quot;:&quot;0aac729c-e58c-4a17-9611-4a3cb648dbfe&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a78140b9-0e20-47c9-b8be-17785ff0a68b&quot;,&quot;title&quot;:&quot;list tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;get a full instance&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get a full instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1104,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet instances = await Instance.query().orderBy(\&quot;createdDate\&quot;, \&quot;desc\&quot;);\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst fullInstance = await instanceController.getFullInstance(\n  sampleInstanceGuid\n);\nexpect(fullInstance).to.exist;\nexpect(fullInstance.instanceTasks.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;787bde1b-ab8e-423c-9bfd-5a91b24e8277&quot;,&quot;parentUUID&quot;:&quot;a78140b9-0e20-47c9-b8be-17785ff0a68b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet instances = await Instance.query().orderBy(\&quot;createdDate\&quot;, \&quot;desc\&quot;);\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst instance = await instanceController.getInstance(sampleInstanceGuid)\nexpect(instance).to.exist;\nexpect(instance.instanceGuid).to.equal(sampleInstanceGuid)\nexpect(instance.instanceId).to.be.gt(0)\nexpect(instance.requester).to.not.exist;\nexpect(instance.client).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be587f07-bf47-4de1-9f09-e085aa4ee629&quot;,&quot;parentUUID&quot;:&quot;a78140b9-0e20-47c9-b8be-17785ff0a68b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance with requester&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance with requester&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet instances = await Instance.query().orderBy(\&quot;createdDate\&quot;, \&quot;desc\&quot;);\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst instance = await instanceController.getInstance(sampleInstanceGuid, {requester: true})\nexpect(instance).to.exist;\nexpect(instance.instanceGuid).to.equal(sampleInstanceGuid)\nexpect(instance.instanceId).to.be.gt(0)\nexpect(instance.requester).to.exist;\nexpect(instance.requester.contactGuid).to.exist;\nexpect(instance.client).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1cbed1d1-4faf-4760-a405-b5366aa92701&quot;,&quot;parentUUID&quot;:&quot;a78140b9-0e20-47c9-b8be-17785ff0a68b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance with client&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance with client&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet instances = await Instance.query().orderBy(\&quot;createdDate\&quot;, \&quot;desc\&quot;);\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst instance = await instanceController.getInstance(sampleInstanceGuid, {client: true})\nexpect(instance).to.exist;\nexpect(instance.instanceGuid).to.equal(sampleInstanceGuid)\nexpect(instance.instanceId).to.be.gt(0)\nexpect(instance.requester).to.not.exist;\nexpect(instance.client).to.exist;\nexpect(instance.client.contactGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da9a0b88-82ef-4bd4-bc94-f38c7224072a&quot;,&quot;parentUUID&quot;:&quot;a78140b9-0e20-47c9-b8be-17785ff0a68b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance with client manager&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance with client manager&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\n// get instances for Joe User, who reports to System System\nlet instances = await Instance.query().where(\&quot;clientGuid\&quot;, &#x27;92a73dad-d953-4c59-9c5e-5d037791d411&#x27;);\n\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst instance = await instanceController.getInstance(sampleInstanceGuid, {clientManager: true})\nexpect(instance).to.exist;\nexpect(instance.instanceGuid).to.equal(sampleInstanceGuid)\nexpect(instance.instanceId).to.be.gt(0)\nexpect(instance.requester).to.not.exist;\nexpect(instance.client).to.exist;\nexpect(instance.client.contactGuid).to.exist;\nexpect(instance.client.manager).to.exist;\nexpect(instance.client.manager.contactGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c755b14-64c9-4293-8749-538378055362&quot;,&quot;parentUUID&quot;:&quot;a78140b9-0e20-47c9-b8be-17785ff0a68b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance process&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance process&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet instances = await Instance.query().orderBy(\&quot;createdDate\&quot;, \&quot;desc\&quot;);\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst instanceProcess = await instanceController.getInstanceProcess(sampleInstanceGuid)\nexpect(instanceProcess).to.exist;\nexpect(instanceProcess.instanceGuid).to.equal(sampleInstanceGuid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;807106b8-96c7-430c-a253-c27b8ec115db&quot;,&quot;parentUUID&quot;:&quot;a78140b9-0e20-47c9-b8be-17785ff0a68b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance recipient tasks data by instanceSid&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance recipient tasks data by instanceSid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(config.tenantOne);\nconst instanceSid = &#x27;6D4785AE-57A2-46C5-9141-DE2B134ED8EF&#x27;\nconst instanceTasks = await instanceController.getInstanceRecipientTasksData(instanceSid);\n\nexpect(instanceTasks).to.exist;\nexpect(instanceTasks.length).to.be.gt(0);\nconst maintenanceReqFormTask = instanceTasks[2]\nexpect(maintenanceReqFormTask.taskName).to.equal(&#x27;Maintenance Request Form&#x27;)\nexpect(maintenanceReqFormTask.recipientTasks.length).to.be.gt(0)\nconst recipientTask = maintenanceReqFormTask.recipientTasks[0]\nexpect(recipientTask.recipientGuid).to.equal(&#x27;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF&#x27;);\nexpect(recipientTask.taskData.length).to.be.gt(0)\nexpect(recipientTask.taskData.find(x =&gt; x.dataLabel == &#x27;Location of Problem&#x27;).dataValue).to.equal(&#x27;Inside the building&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;145b4308-22a2-467d-9b47-2071e347cc2c&quot;,&quot;parentUUID&quot;:&quot;a78140b9-0e20-47c9-b8be-17785ff0a68b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my requests columns&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my requests columns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getMyRequests();\n        \nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0);\nsampleInstance = firstInstance;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e08244b8-3f60-4689-8bd9-934b6bc2b90e&quot;,&quot;parentUUID&quot;:&quot;a78140b9-0e20-47c9-b8be-17785ff0a68b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - filters - ID&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - filters - ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:92,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\n        \nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;processId\&quot;,\n          data: {\n            comparison: \&quot;eq\&quot;,\n            value: sampleInstance.processId,\n          },\n        },\n      ],\n      count: 5,\n    });\n        \n    expect(result.results[0].processId).to.equal(sampleInstance.processId);\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;instanceId\&quot;,\n          data: {\n            comparison: \&quot;gt\&quot;,\n            value: 500,\n          },\n        },\n      ],\n      sort: \&quot;instanceId\&quot;,\n      dir: \&quot;asc\&quot;,\n      count: 5,\n    });\n        \n    // no longer useful after starting over with an empty db\n    // result.results.length.should.equal(5); \n        \n    result.results.forEach((result) =&gt; {\n      expect(result.instanceId).to.be.gt(500);\n    });\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;instanceId\&quot;,\n          data: {\n            comparison: \&quot;lt\&quot;,\n            value: 505,\n          },\n        },\n      ],\n      sort: \&quot;instanceId\&quot;,\n      dir: \&quot;desc\&quot;,\n      count: 2,\n    });\n        \n    expect(result.results.length).to.equal(2);\n    result.results.forEach((result) =&gt; {\n      expect(result.instanceId).to.be.lt(505);\n    });\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd250b1d-a073-43b8-a3de-2d35faeed241&quot;,&quot;parentUUID&quot;:&quot;a78140b9-0e20-47c9-b8be-17785ff0a68b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - filters - date&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - filters - date&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:93,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\n        \nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let d = moment().day(-90);\n    let result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;range\&quot;, value: \&quot;90\&quot; },\n        },\n      ],\n      count: 1,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    if (result.results.length)\n      expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    d = moment().year(-30);\n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;range\&quot;, value: \&quot;30\&quot; },\n        },\n      ],\n      count: 1,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    if (result.results.length)\n        expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    d = moment().day(-7);\n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;range\&quot;, value: \&quot;7\&quot; },\n        },\n      ],\n      count: 1,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    // if (result.results.length)\n    //     expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    // d = moment().day(-3);\n    // result = await f.call(instanceController, {\n    //   filters: [\n    //     {\n    //       field: \&quot;StartDate\&quot;,\n    //       data: { comparison: \&quot;range\&quot;, value: \&quot;3\&quot; },\n    //     },\n    //   ],\n    //   count: 1,\n    //   dir: \&quot;asc\&quot;,\n    // });\n        \n    // if (result.results.length)\n    //     expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    // d = moment().day(-1);\n    // result = await f.call(instanceController, {\n    //   filters: [\n    //     {\n    //       field: \&quot;StartDate\&quot;,\n    //       data: { comparison: \&quot;range\&quot;, value: \&quot;1\&quot; },\n    //     },\n    //   ],\n    //   count: 1,\n    //   dir: \&quot;asc\&quot;,\n    // });\n        \n    // if (result.results.length)\n    //     expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    const startDate = moment(\&quot;2018-10-11\&quot;);\n    const endDate = moment(\&quot;2018-11-23\&quot;);\n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;gt\&quot;, value: \&quot;2018-10-11\&quot; },\n        },\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;lt\&quot;, value: \&quot;2018-11-23\&quot; },\n        },\n      ],\n      count: 1,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    if (result.results.length) {\n        expect(result.results[0].startDate).to.be.gt(startDate.toDate());\n        expect(result.results[0].startDate).to.be.lt(endDate.toDate());\n    }\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a867d59e-3316-4f47-9cd2-7dd9ede540e0&quot;,&quot;parentUUID&quot;:&quot;a78140b9-0e20-47c9-b8be-17785ff0a68b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - filters - name&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - filters - name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:77,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;instanceName\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: \&quot;test\&quot; },\n        },\n      ],\n      count: 10,\n    });\n        \n    result.results.forEach((instance) =&gt; {\n      expect(instance.instanceName.toLowerCase()).to.contain(\&quot;test\&quot;);\n    });\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;processName\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: \&quot;test\&quot; },\n        },\n      ],\n      count: 10,\n    });\n        \n    // no longer useful after starting over with an empty db\n    // result.results.forEach((instance) =&gt; {\n    //   instance.processName.should.contain(\&quot;test\&quot;);\n    // });\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;requester\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: \&quot;system system\&quot; },\n        },\n      ],\n      count: 10,\n    });\n        \n    result.results.forEach((instance) =&gt; {\n      expect(instance.requesterGuid\n        .toLowerCase())\n        .to.equal(session.user_sid.toLowerCase());\n    });\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64f5547b-681b-45e6-b36d-781d3b3b4d1f&quot;,&quot;parentUUID&quot;:&quot;a78140b9-0e20-47c9-b8be-17785ff0a68b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - filters - guid&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - filters - guid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:58,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;processGuid\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: sampleInstance.processGuid },\n        },\n      ],\n      count: 10,\n    });\n        \n    result.results.forEach((instance) =&gt; {\n      expect(instance.processName.indexOf(sampleInstance.processName)).to.be.gt(-1);\n    });\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;requesterGuid\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: session.user_sid },\n        },\n      ],\n      count: 10,\n    });\n        \n    result.results.forEach((instance) =&gt; {\n      expect(instance.requesterGuid\n        .toLowerCase())\n        .to.equal(session.user_sid);\n    });\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;52cbca04-5686-44f8-8590-8615fd872b3d&quot;,&quot;parentUUID&quot;:&quot;a78140b9-0e20-47c9-b8be-17785ff0a68b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - count&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\n        \nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, { count: 2 });\n        \n    expect(result.results).to.exist;\n    expect(result.results.length).to.equal(2);\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0272e063-13bc-4f22-ab62-2e3d28a572d2&quot;,&quot;parentUUID&quot;:&quot;a78140b9-0e20-47c9-b8be-17785ff0a68b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my requests params - sort, dir&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my requests params - sort, dir&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      count: 2,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    expect(result.results[0].createdDate).to.be.lt(\n      result.results[1].createdDate\n    );\n        \n    result = await f.call(instanceController, {\n      count: 2,\n      dir: \&quot;desc\&quot;,\n    });\n        \n    expect(result.results[0].createdDate).to.be.gt(\n      result.results[1].createdDate\n    );\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61824a84-ff84-4165-8434-5f9cba6e2255&quot;,&quot;parentUUID&quot;:&quot;a78140b9-0e20-47c9-b8be-17785ff0a68b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my requests param - start&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my requests param - start&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:34,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      start: 0,\n      count: 2,\n      sort: \&quot;instanceId\&quot;,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    const startZeroId = result.results[0].instanceId;\n        \n    result = await f.call(instanceController, {\n      start: 1,\n      count: 2,\n      sort: \&quot;instanceId\&quot;,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    const startOneId = result.results[0].instanceId;\n        \n    expect(startZeroId).to.be.lessThan(startOneId);\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1177821-057b-497e-92c4-ded36d7cbd53&quot;,&quot;parentUUID&quot;:&quot;a78140b9-0e20-47c9-b8be-17785ff0a68b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get monitor requests&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get monitor requests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({permisionType: &#x27;monitor&#x27;});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\nexpect(firstInstance.requester).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b4dc002-8650-4acc-8d65-5f8224d04308&quot;,&quot;parentUUID&quot;:&quot;a78140b9-0e20-47c9-b8be-17785ff0a68b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get monitor requests with search term against procssName, instanceName and requester&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get monitor requests with search term against procssName, instanceName and requester&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({search: sampleInstance.processName, permisionType: &#x27;monitor&#x27;});\nconsole.log(result)\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\nexpect(firstInstance.requester).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0)&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;RequestError: select top (@p0) [INSTANCE].[INSTANCE_GUID], [INSTANCE].[INSTANCE_ID], [INSTANCE].[INSTANCE_NAME], [INSTANCE].[PROCESS_NAME], [INSTANCE].[INSTANCE_STATE], [INSTANCE].[LAST_MILESTONE], [INSTANCE].[CREATED_DATE], [INSTANCE].[MODIFIED_DATE], [INSTANCE].[START_DATE], [REQUESTER_GUID], [PROCESS].[PROCESS_ID], [PROCESS].[PROCESS_GUID], [PROCESS].[CATEGORY_NAME], [PROCESS].[VERSION], [BASE_PROCESS].[MODIFIED_DATE] as [PROCESS_MODIFIED_DATE], dbo.fn_getcontactname([REQUESTER_GUID]) as [REQUESTER] from [INSTANCE] inner join (select [INSTANCE_PROCESS].* from [INSTANCE_PROCESS] where [INSTANCE_PROCESS].[DELETED_DATE] is null) as [PROCESS] on [PROCESS].[INSTANCE_GUID] = [INSTANCE].[INSTANCE_GUID] inner join (select [PROCESS].* from [PROCESS] where [PROCESS].[DELETED_DATE] is null) as [BASE_PROCESS] on [BASE_PROCESS].[PROCESS_GUID] = [INSTANCE].[PROCESS_GUID] where [INSTANCE].[DELETED_DATE] is null and not [INSTANCE_STATE] = @p1 and ([INSTANCE].[DELETED_DATE] is null and ([INSTANCE].[DELETED_DATE] is null and [BASE_PROCESS].[PUBLISH_STATUS] = @p2 and [INSTANCE].[PUBLISH_STATUS] = @p3) or ([INSTANCE].[DELETED_DATE] is null and [INSTANCE].[PUBLISH_STATUS] = @p4 or [INSTANCE].[PUBLISH_STATUS] = [BASE_PROCESS].[PUBLISH_STATUS])) and ([INSTANCE].[DELETED_DATE] is null and [BASE_PROCESS].[PROCESS_NAME] like @p5 or [INSTANCE].[INSTANCE_NAME] like @p6 or LOWER(dbo.fn_getcontactname([REQUESTER_GUID])) like LOWER(&#x27;%frank&#x27;s grid default empty data%&#x27;)) order by [INSTANCE].[CREATED_DATE] desc - Unclosed quotation mark after the character string &#x27;)) order by [INSTANCE].[CREATED_DATE] desc&#x27;.&quot;,&quot;estack&quot;:&quot;RequestError: Unclosed quotation mark after the character string &#x27;)) order by [INSTANCE].[CREATED_DATE] desc&#x27;.\n    at handleError (node_modules/mssql/lib/tedious/request.js:374:15)\n    at Parser.&lt;anonymous&gt; (node_modules/tedious/lib/connection.js:832:12)\n    at Parser.&lt;anonymous&gt; (node_modules/tedious/lib/token/token-stream-parser.js:37:14)\n    at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:298:12)\n    at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:280:11)\n    at Parser.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:241:10)\n    at Parser.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:139:32)\n    at doneParsing (node_modules/tedious/lib/token/stream-parser.js:122:14)\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/infoerror-token-parser.js:48:5\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/infoerror-token-parser.js:21:19\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/stream-parser.js:221:7\n    at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:145:7)\n    at Parser.readUInt32LE (node_modules/tedious/lib/token/stream-parser.js:218:10)\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/infoerror-token-parser.js:20:90\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/stream-parser.js:379:9\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/stream-parser.js:371:7\n    at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:145:7)\n    at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:368:10)\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/stream-parser.js:378:12\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/stream-parser.js:165:7\n    at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:145:7)\n    at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:162:10)\n    at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:377:10)\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/infoerror-token-parser.js:19:22\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/stream-parser.js:379:9\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/stream-parser.js:371:7\n    at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:145:7)\n    at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:368:10)\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/stream-parser.js:378:12\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/stream-parser.js:165:7\n    at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:145:7)\n    at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:162:10)\n    at Parser.readBVarChar (node_modules/tedious/lib/token/stream-parser.js:377:10)\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/infoerror-token-parser.js:18:20\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/stream-parser.js:388:9\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/stream-parser.js:371:7\n    at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:145:7)\n    at Parser.readBuffer (node_modules/tedious/lib/token/stream-parser.js:368:10)\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/stream-parser.js:387:12\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/stream-parser.js:189:7\n    at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:145:7)\n    at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:186:10)\n    at Parser.readUsVarChar (node_modules/tedious/lib/token/stream-parser.js:386:10)\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/infoerror-token-parser.js:17:18\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/stream-parser.js:165:7\n    at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:145:7)\n    at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:162:10)\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/infoerror-token-parser.js:16:16\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/stream-parser.js:165:7\n    at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:145:7)\n    at Parser.readUInt8 (node_modules/tedious/lib/token/stream-parser.js:162:10)\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/infoerror-token-parser.js:15:14\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/stream-parser.js:221:7\n    at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:145:7)\n    at Parser.readUInt32LE (node_modules/tedious/lib/token/stream-parser.js:218:10)\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/infoerror-token-parser.js:14:12\n    at /home/peyton/src/api-instance/node_modules/tedious/lib/token/stream-parser.js:189:7\n    at Parser.awaitData (node_modules/tedious/lib/token/stream-parser.js:145:7)\n    at Parser.readUInt16LE (node_modules/tedious/lib/token/stream-parser.js:186:10)\n    at parseToken (node_modules/tedious/lib/token/infoerror-token-parser.js:13:10)\n    at Object.errorParser (node_modules/tedious/lib/token/infoerror-token-parser.js:47:3)\n    at Parser.parseTokens (node_modules/tedious/lib/token/stream-parser.js:131:27)\n    at Parser._transform (node_modules/tedious/lib/token/stream-parser.js:109:12)\n    at Parser.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:177:10)\n    at Parser.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:164:83)\n    at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:409:139)\n    at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:398:5)\n    at Parser.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:307:11)\n    at Parser.addBuffer (node_modules/tedious/lib/token/token-stream-parser.js:47:24)\n    at Connection.sendDataToTokenStreamParser (node_modules/tedious/lib/connection.js:1430:35)\n    at Connection.&lt;anonymous&gt; (node_modules/tedious/lib/connection.js:2384:26)\n    at Connection.data (node_modules/tedious/lib/connection.js:2373:25)\n    at Connection.dispatchEvent (node_modules/tedious/lib/connection.js:1279:15)\n    at MessageIO.&lt;anonymous&gt; (node_modules/tedious/lib/connection.js:1136:14)\n    at Message.&lt;anonymous&gt; (node_modules/tedious/lib/message-io.js:43:14)\n    at addChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:298:12)\n    at readableAddChunk (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:280:11)\n    at Message.Readable.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_readable.js:241:10)\n    at Message.Transform.push (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:139:32)\n    at Message.afterTransform (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:88:10)\n    at Message.PassThrough._transform (node_modules/tedious/node_modules/readable-stream/lib/_stream_passthrough.js:38:3)\n    at Message.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:177:10)\n    at Message.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:164:83)\n    at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:409:139)\n    at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:398:5)\n    at Message.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:307:11)\n    at Message.Writable.end (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:563:51)\n    at IncomingMessageStream.processBufferedData (node_modules/tedious/lib/incoming-message-stream.js:85:19)\n    at IncomingMessageStream._transform (node_modules/tedious/lib/incoming-message-stream.js:107:10)\n    at IncomingMessageStream.Transform._read (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:177:10)\n    at IncomingMessageStream.Transform._write (node_modules/tedious/node_modules/readable-stream/lib/_stream_transform.js:164:83)\n    at doWrite (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:409:139)\n    at writeOrBuffer (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:398:5)\n    at IncomingMessageStream.Writable.write (node_modules/tedious/node_modules/readable-stream/lib/_stream_writable.js:307:11)\n    at Socket.ondata (internal/streams/readable.js:719:22)\n    at addChunk (internal/streams/readable.js:309:12)\n    at readableAddChunk (internal/streams/readable.js:284:9)\n    at Socket.Readable.push (internal/streams/readable.js:223:10)\n    at TCP.onStreamRead (internal/stream_base_commons.js:188:23)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;5491df74-800e-4dec-b03c-09de66294f62&quot;,&quot;parentUUID&quot;:&quot;a78140b9-0e20-47c9-b8be-17785ff0a68b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get monitor requests with a numeric term against instanceId&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get monitor requests with a numeric term against instanceId&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({search: sampleInstance.instanceId, permisionType: &#x27;monitor&#x27;});\nconsole.log(result)\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\nexpect(firstInstance.requester).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f49edd75-1d8a-4c8e-8bd5-68be4e27ba2e&quot;,&quot;parentUUID&quot;:&quot;a78140b9-0e20-47c9-b8be-17785ff0a68b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get manage requests&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get manage requests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({permisionType: &#x27;manage&#x27;});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\nexpect(firstInstance.requester).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e2aeb88-3675-484f-99e1-7c663043aaad&quot;,&quot;parentUUID&quot;:&quot;a78140b9-0e20-47c9-b8be-17785ff0a68b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;787bde1b-ab8e-423c-9bfd-5a91b24e8277&quot;,&quot;be587f07-bf47-4de1-9f09-e085aa4ee629&quot;,&quot;1cbed1d1-4faf-4760-a405-b5366aa92701&quot;,&quot;da9a0b88-82ef-4bd4-bc94-f38c7224072a&quot;,&quot;3c755b14-64c9-4293-8749-538378055362&quot;,&quot;807106b8-96c7-430c-a253-c27b8ec115db&quot;,&quot;145b4308-22a2-467d-9b47-2071e347cc2c&quot;,&quot;e08244b8-3f60-4689-8bd9-934b6bc2b90e&quot;,&quot;cd250b1d-a073-43b8-a3de-2d35faeed241&quot;,&quot;a867d59e-3316-4f47-9cd2-7dd9ede540e0&quot;,&quot;64f5547b-681b-45e6-b36d-781d3b3b4d1f&quot;,&quot;52cbca04-5686-44f8-8590-8615fd872b3d&quot;,&quot;0272e063-13bc-4f22-ab62-2e3d28a572d2&quot;,&quot;61824a84-ff84-4165-8434-5f9cba6e2255&quot;,&quot;f1177821-057b-497e-92c4-ded36d7cbd53&quot;,&quot;1b4dc002-8650-4acc-8d65-5f8224d04308&quot;,&quot;f49edd75-1d8a-4c8e-8bd5-68be4e27ba2e&quot;,&quot;0e2aeb88-3675-484f-99e1-7c663043aaad&quot;],&quot;failures&quot;:[&quot;5491df74-800e-4dec-b03c-09de66294f62&quot;],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1654,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;f919a854-46a0-444b-87f4-fd67c8b76d8e&quot;,&quot;title&quot;:&quot;delete/undelete tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes a request&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests deletes a request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:121,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({permisionType: &#x27;monitor&#x27;});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\nsampleInstances = result.results;\n    \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\nsampleInstanceGuid = firstInstance.instanceGuid;\n      \nlet deleted = await instanceController.deleteInstance(sampleInstanceGuid);\n\nexpect(sampleInstanceGuid).to.equal(deleted.instanceGuid)\nexpect(deleted.deletedDate).not.be.null\nconst Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet excludeDeleted = await Instance.query().where({instanceGuid: sampleInstanceGuid})\nexpect(excludeDeleted.length).to.equal(0);\n\t\t\t\t//await delay(5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa52d6a5-52d0-48ac-9528-b5aef92dc55f&quot;,&quot;parentUUID&quot;:&quot;f919a854-46a0-444b-87f4-fd67c8b76d8e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retores a request&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests retores a request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:82,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nlet undeleted = await instanceController.restoreInstance(sampleInstanceGuid);\n//expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\nexpect(sampleInstanceGuid).to.equal(undeleted.instanceGuid)\nexpect(undeleted.deletedDate).to.be.null;\n\t\t\t\t//await delay(5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7314084b-5455-4f3e-a4a2-22465fb223ec&quot;,&quot;parentUUID&quot;:&quot;f919a854-46a0-444b-87f4-fd67c8b76d8e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;deletes a batch of requests&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests deletes a batch of requests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:123,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst instanceGuids = sampleInstances.map((i) =&gt; {\n  return i.instanceGuid;\n})\nlet deleted = await instanceController.deleteInstances(instanceGuids);\n//expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\nexpect(deleted.length).to.equal(sampleInstances.length);\n//expect(deleted[0].instanceGuid).to.equal(sampleInstances[0].instanceGuid);\nexpect(deleted[0].deletedDate).not.to.be.null;\n\t\t\t\t//await delay(5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0634acad-37bd-4d7a-928e-aaab8c3141cd&quot;,&quot;parentUUID&quot;:&quot;f919a854-46a0-444b-87f4-fd67c8b76d8e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;restores a batch of requests&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests restores a batch of requests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:84,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst instanceGuids = sampleInstances.map((i) =&gt; {\n  return i.instanceGuid;\n})\nlet deleted = await instanceController.restoreInstances(instanceGuids);\n//expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\nexpect(deleted.length).to.equal(sampleInstances.length);\nexpect(deleted[0].instanceGuid).to.equal(sampleInstances[0].instanceGuid);\nexpect(deleted[0].deletedDate).to.be.null;\n\t\t\t\t//await delay(5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c20db86d-4068-47c2-b7bc-11cd3a845e53&quot;,&quot;parentUUID&quot;:&quot;f919a854-46a0-444b-87f4-fd67c8b76d8e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;restores all&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests restores all&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:399,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nlet restored = await instanceController.restoreAllInstances();\n//expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\nexpect(restored.length).to.gt(0);\n\t\t\t\t//await delay(5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a28f060-76d7-4d7c-9ab7-d7a2f8c2bc93&quot;,&quot;parentUUID&quot;:&quot;f919a854-46a0-444b-87f4-fd67c8b76d8e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fa52d6a5-52d0-48ac-9528-b5aef92dc55f&quot;,&quot;7314084b-5455-4f3e-a4a2-22465fb223ec&quot;,&quot;0634acad-37bd-4d7a-928e-aaab8c3141cd&quot;,&quot;c20db86d-4068-47c2-b7bc-11cd3a845e53&quot;,&quot;0a28f060-76d7-4d7c-9ab7-d7a2f8c2bc93&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:809,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;5349e4a0-30fd-4dee-b580-6c31925624ac&quot;,&quot;title&quot;:&quot;insert tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;inserts an instance data&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests insert tests inserts an instance data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceDataRow = {\n  itaskRecipientGuid: &#x27;8ad1a6f2-9f6f-4667-9750-d961044ed817&#x27;,\n  itaskGuid: &#x27;5bde578f-615f-4494-86b2-ca61044ed883&#x27;,\n  taskGuid: &#x27;6386f905-7fac-41c6-9b6b-86d53f14d61c&#x27;,\n  objectGuid: null,\n  objectType: null,\n  objectId: null,\n  dataProperty: &#x27;1491430190541&#x27;,\n  dataType: &#x27;String&#x27;,\n  dataSid: &#x27;14777392-ac81-44f0-b1f2-87d53f14d65d&#x27;,\n  dataId: null,\n  dataClientId: &#x27;1491430190541&#x27;,\n  dataLabel: &#x27;Enter Details:&#x27;,\n  dataValue: &#x27;Need a background check&#x27;,\n  META_1: &#x27;TEST_INSERT_INSTANCE_DATA&#x27;,\n  META_2: null,\n  dataHide: null,\n  instanceContactGuid: null,\n  roleGuid: null,\n  dataValueExt: null,\n  questionType: &#x27;LongText&#x27;,\n  deletedDate: new Date().toISOString() // so that it doesnt interfere with its instance\n}\nconst instanceController = new InstanceController(session)\nlet instanceDataGuid = await instanceController.insertInstanceData(instanceDataRow)\nexpect(instanceDataGuid).to.be.a.uuid()\n\t\t\t\t//await delay(5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1695143e-da9a-4afe-a75f-1685dcb4e8e3&quot;,&quot;parentUUID&quot;:&quot;5349e4a0-30fd-4dee-b580-6c31925624ac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1695143e-da9a-4afe-a75f-1685dcb4e8e3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;a1c79d03-85eb-4ff2-8edb-c88d412f105a&quot;,&quot;title&quot;:&quot;update tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates an instance task recipient task state&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests update tests updates an instance task recipient task state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session)\nconst recipTaskSid = &#x27;b3fef53a-7742-46d1-9faf-be573c14d6fa&#x27;\nlet taskState = &#x27;Cancelled&#x27;\nlet updated = await instanceController.setInstanceRecipientTaskState(recipTaskSid, taskState)\nexpect(updated.taskState).to.equal(taskState)\n// change it back to Completed\ntaskState = &#x27;Completed&#x27;\nupdated = await instanceController.setInstanceRecipientTaskState(recipTaskSid, taskState)\nexpect(updated.taskState).to.equal(taskState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb6258b3-40be-4e15-9f45-32ff0bdc01f5&quot;,&quot;parentUUID&quot;:&quot;a1c79d03-85eb-4ff2-8edb-c88d412f105a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bb6258b3-40be-4e15-9f45-32ff0bdc01f5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;9b210572-680c-45e7-8170-62e9a091fefe&quot;,&quot;title&quot;:&quot;Instance API Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-instance/test/db/instanceModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;869199bc-3f22-4f76-b215-5fbab3258653&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-instance/test/db/instanceModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceModel.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Instance API Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b1fd3f4c-cc0b-4569-a391-455778ac392b&quot;,&quot;parentUUID&quot;:&quot;869199bc-3f22-4f76-b215-5fbab3258653&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Instance API Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceModel = await sqldb.models.bindModel(config.tenantOne.tenantId, instanceModels.Instance)\n          \n          let results = await instanceModel.query()\n          //console.log(results)\n          expect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5426d3ac-2e3a-4a02-8d74-78e8938c8bb2&quot;,&quot;parentUUID&quot;:&quot;869199bc-3f22-4f76-b215-5fbab3258653&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a hash of bound models&quot;,&quot;fullTitle&quot;:&quot;Instance API Model Tests tests should return a hash of bound models&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceModel = (await models.getModels(config.tenantOne.tenantId)).Instance;\n          \n          let results = await instanceModel.query()\n          //console.log(results)\n          expect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9f17139-1752-434d-a304-7289eeb46cd5&quot;,&quot;parentUUID&quot;:&quot;869199bc-3f22-4f76-b215-5fbab3258653&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should bound models should be cached in memory&quot;,&quot;fullTitle&quot;:&quot;Instance API Model Tests tests should bound models should be cached in memory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(models._tenantModels[config.tenantOne.tenantId]).to.exist\n          let results = await models._tenantModels[config.tenantOne.tenantId].Instance.query()\n          //console.log(results)\n          expect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e235bd1-95e1-4473-b978-f43a6b65fd44&quot;,&quot;parentUUID&quot;:&quot;869199bc-3f22-4f76-b215-5fbab3258653&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5426d3ac-2e3a-4a02-8d74-78e8938c8bb2&quot;,&quot;e9f17139-1752-434d-a304-7289eeb46cd5&quot;,&quot;7e235bd1-95e1-4473-b978-f43a6b65fd44&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;6ffff53f-18ba-47dd-94b2-407467475554&quot;,&quot;title&quot;:&quot;Task API Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-instance/test/db/myTaskController.test.js&quot;,&quot;file&quot;:&quot;/test/db/myTaskController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()};\ntenantId = config.tenantOne.tenantId;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b35b93c1-e97b-42c5-b750-2f80021675fa&quot;,&quot;parentUUID&quot;:&quot;6ffff53f-18ba-47dd-94b2-407467475554&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;941a6d04-d214-4cbc-8fe5-1adaa7e39848&quot;,&quot;title&quot;:&quot;list tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-instance/test/db/myTaskController.test.js&quot;,&quot;file&quot;:&quot;/test/db/myTaskController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set a sample task&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should set a sample task&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:191,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Task = await models.getModel(config.tenantOne.tenantId, &#x27;InstanceRecipientTask&#x27;);\nconst tasks = await Task.query()\n  .withGraphFetched(&#x27;[instanceTaskBase, taskType, instance]&#x27;)\n  .where(&#x27;recipientGuid&#x27;, session.user_sid)\n  .orderBy(&#x27;instanceRecipientTask.createdDate&#x27;, &#x27;desc&#x27;);\nexpect(tasks.length).to.be.gt(0);\nsampleTaskGuid = tasks[0].itaskRecipientGuid;\nsampleTask = tasks[0];\nsampleTask.taskName = sampleTask.instanceTaskBase.taskName;\nsampleTask.taskTypeName = sampleTask.taskType.taskTypeName;\nsampleTask.instanceId = sampleTask.instance.instanceId;\nsampleTask.instanceName = sampleTask.instance.instanceName;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bf8a2f35-4806-4a59-b5b7-a1e93a3bc858&quot;,&quot;parentUUID&quot;:&quot;941a6d04-d214-4cbc-8fe5-1adaa7e39848&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks columns&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks columns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:176,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst result = await taskController.getMyTasks();\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\nconst firstTask = result.results[0];\nexpect(firstTask.itaskRecipientId).to.be.ok;\nexpect(firstTask.itaskRecipientGuid).to.be.ok;\nexpect(firstTask.taskName).to.be.ok;\nexpect(firstTask.taskTypeName).to.be.ok;\nexpect(firstTask.createdDate).to.be.ok;\nexpect(firstTask.dueDate).not.to.be.undefined;\nexpect(firstTask.priority).not.to.be.undefined;\nexpect(firstTask.instanceName).to.be.ok;\nexpect(firstTask.instanceId).to.be.ok;\n//expect(firstTask.lastMilestone).to.be.ok;\nexpect(result.total).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bcfb2dc0-2a2d-4a8b-81b1-cf82c11df0cb&quot;,&quot;parentUUID&quot;:&quot;941a6d04-d214-4cbc-8fe5-1adaa7e39848&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my open tasks only&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my open tasks only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:143,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskState&#x27;, &#x27;eq&#x27;, &#x27;Open&#x27;, 50, &#x27;asc&#x27;);\nconst result = await taskController.getMyTasks(options);\nresult.results.forEach(task =&gt; {\n  expect(task.taskState === &#x27;Initialized&#x27; || task.taskState === &#x27;Started&#x27;).to.equal(true);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36629f03-e43c-4070-bb91-983e25fb387f&quot;,&quot;parentUUID&quot;:&quot;941a6d04-d214-4cbc-8fe5-1adaa7e39848&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my completed tasks only&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my completed tasks only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:166,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskState&#x27;, &#x27;eq&#x27;, &#x27;Completed&#x27;, 50, &#x27;asc&#x27;);\nconst result = await taskController.getMyTasks(options);\nresult.results.forEach(task =&gt; {\n  expect(task.taskState).to.equal(&#x27;Completed&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;474951ad-7518-4b49-a796-126726854c63&quot;,&quot;parentUUID&quot;:&quot;941a6d04-d214-4cbc-8fe5-1adaa7e39848&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: taskName&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: taskName&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:169,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskName&#x27;, &#x27;contains&#x27;, sampleTask.taskName);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;593baf27-6541-424f-a4f0-c2acd411c02c&quot;,&quot;parentUUID&quot;:&quot;941a6d04-d214-4cbc-8fe5-1adaa7e39848&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: taskType&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: taskType&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:161,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskType&#x27;, &#x27;contains&#x27;, sampleTask.taskTypeName);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;762b71c2-b71b-4da2-837b-5c55534e9cad&quot;,&quot;parentUUID&quot;:&quot;941a6d04-d214-4cbc-8fe5-1adaa7e39848&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: description (instanceName)&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: description (instanceName)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:172,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;instanceName&#x27;, &#x27;contains&#x27;, sampleTask.instanceName);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13caf46b-e09e-4657-bfd2-298c44a22cc9&quot;,&quot;parentUUID&quot;:&quot;941a6d04-d214-4cbc-8fe5-1adaa7e39848&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: requestId (instanceId)&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: requestId (instanceId)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:110,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;instanceId&#x27;, &#x27;contains&#x27;, sampleTask.instanceId);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8b1e3c7-1f6a-401b-b1ec-7482869baee9&quot;,&quot;parentUUID&quot;:&quot;941a6d04-d214-4cbc-8fe5-1adaa7e39848&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: requester&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: requester&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:174,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;requester&#x27;, &#x27;contains&#x27;, &#x27;system system&#x27;);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3a68509-4bd6-4f7c-b2d6-40d7ba0b1c92&quot;,&quot;parentUUID&quot;:&quot;941a6d04-d214-4cbc-8fe5-1adaa7e39848&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my task by searching&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my task by searching&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:683,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {search: sampleTask.taskName};\nlet result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);\noptions = {search: sampleTask.taskTypeName};\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);\noptions = {search: sampleTask.instanceName};\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);\noptions = {search: sampleTask.instanceId};\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf4750bf-9af0-46c4-b60a-54ca19370b75&quot;,&quot;parentUUID&quot;:&quot;941a6d04-d214-4cbc-8fe5-1adaa7e39848&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. params - start&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. params - start&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:282,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {\n  start: 0,\n  count: 2,\n  sort: &#x27;itaskRecipientId&#x27;,\n  dir: &#x27;asc&#x27;\n};\nlet result = await taskController.getMyTasks(options);\nconst startZeroId = result.results[0].itaskRecipientId;\noptions.start = 1;\nresult = await taskController.getMyTasks(options);\nconst startOneId = result.results[0].itaskRecipientId;\nexpect(startZeroId).to.be.lt(startOneId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc89199e-5a48-4eef-9c0b-777f28033e49&quot;,&quot;parentUUID&quot;:&quot;941a6d04-d214-4cbc-8fe5-1adaa7e39848&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. params - sort, dir&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. params - sort, dir&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:260,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {count: 2, dir: &#x27;asc&#x27;};\nlet result = await taskController.getMyTasks(options);\nexpect(result.results[0].createdDate).to.be.lt(result.results[1].createdDate);\noptions.dir = &#x27;desc&#x27;;\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].createdDate).to.be.gt(result.results[1].createdDate);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3048fd9-f1df-4b7b-b24c-ea75f86cfaf8&quot;,&quot;parentUUID&quot;:&quot;941a6d04-d214-4cbc-8fe5-1adaa7e39848&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. params - count&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. params - count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:116,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {count: 2};\nlet result = await taskController.getMyTasks(options);\nexpect(result.results).to.exist;\nexpect(result.results.length).to.eq(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84f72a78-362b-49ab-b572-01a0b456b7e7&quot;,&quot;parentUUID&quot;:&quot;941a6d04-d214-4cbc-8fe5-1adaa7e39848&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bf8a2f35-4806-4a59-b5b7-a1e93a3bc858&quot;,&quot;bcfb2dc0-2a2d-4a8b-81b1-cf82c11df0cb&quot;,&quot;36629f03-e43c-4070-bb91-983e25fb387f&quot;,&quot;474951ad-7518-4b49-a796-126726854c63&quot;,&quot;593baf27-6541-424f-a4f0-c2acd411c02c&quot;,&quot;762b71c2-b71b-4da2-837b-5c55534e9cad&quot;,&quot;13caf46b-e09e-4657-bfd2-298c44a22cc9&quot;,&quot;b8b1e3c7-1f6a-401b-b1ec-7482869baee9&quot;,&quot;a3a68509-4bd6-4f7c-b2d6-40d7ba0b1c92&quot;,&quot;cf4750bf-9af0-46c4-b60a-54ca19370b75&quot;,&quot;cc89199e-5a48-4eef-9c0b-777f28033e49&quot;,&quot;c3048fd9-f1df-4b7b-b24c-ea75f86cfaf8&quot;,&quot;84f72a78-362b-49ab-b572-01a0b456b7e7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2803,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;89fb1f31-5408-4137-83ca-a18a47f59713&quot;,&quot;title&quot;:&quot;My Task API Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-instance/test/db/myTaskModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/myTaskModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;69eee662-dadd-4df4-af00-6e44f7093df6&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-instance/test/db/myTaskModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/myTaskModel.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;My Task API Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5de0ff9e-7188-4241-8576-d9c695233238&quot;,&quot;parentUUID&quot;:&quot;69eee662-dadd-4df4-af00-6e44f7093df6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;My Task API Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskModel = await sqldb.models.bindModel(config.tenantOne.tenantId, taskModels.InstanceRecipientTask);\nconst results = await taskModel.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8239ff60-9f90-4622-b8db-d474d62e23b2&quot;,&quot;parentUUID&quot;:&quot;69eee662-dadd-4df4-af00-6e44f7093df6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a hash of bound models&quot;,&quot;fullTitle&quot;:&quot;My Task API Model Tests tests should return a hash of bound models&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskModel = (await models.getModels(config.tenantOne.tenantId)).InstanceRecipientTask;\nconst results = await taskModel.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db96c253-9890-4995-96bc-eecea65f9d74&quot;,&quot;parentUUID&quot;:&quot;69eee662-dadd-4df4-af00-6e44f7093df6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should bound models cached in memory&quot;,&quot;fullTitle&quot;:&quot;My Task API Model Tests tests should bound models cached in memory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(models._tenantModels[config.tenantOne.tenantId]).to.exist;\nconst results = await models._tenantModels[config.tenantOne.tenantId].InstanceRecipientTask.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ace5c64-6a3a-41dc-a941-282cff930a90&quot;,&quot;parentUUID&quot;:&quot;69eee662-dadd-4df4-af00-6e44f7093df6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8239ff60-9f90-4622-b8db-d474d62e23b2&quot;,&quot;db96c253-9890-4995-96bc-eecea65f9d74&quot;,&quot;9ace5c64-6a3a-41dc-a941-282cff930a90&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:27,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;789788ef-4c80-4aeb-a1a5-000fc160c5da&quot;,&quot;title&quot;:&quot;Instance API Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-instance/test/integration/instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/instance.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\njwt = await testLib.getAuthToken()\nthis.timeout(105000); \nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()} //system level&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b24cf4e7-95ae-42c9-a994-240055022fba&quot;,&quot;parentUUID&quot;:&quot;789788ef-4c80-4aeb-a1a5-000fc160c5da&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9cd1bf47-527c-44a8-813e-acd9816fb67a&quot;,&quot;title&quot;:&quot;getInstancesByPermission&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-instance/test/integration/instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/instance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of instances for a user with monitor permissions&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a list of instances for a user with monitor permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;monitor\&quot;;\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();\n            sampleInstance = result.results[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;842356fa-9259-4914-82e7-0b21f1c83d92&quot;,&quot;parentUUID&quot;:&quot;9cd1bf47-527c-44a8-813e-acd9816fb67a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a list of instances for a user with manage permissions&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a list of instances for a user with manage permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;monitor\&quot;;\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();\n            sampleInstance = result.results[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;775ed190-a5ad-475c-bccf-dbf34c738acd&quot;,&quot;parentUUID&quot;:&quot;9cd1bf47-527c-44a8-813e-acd9816fb67a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a list of instances started by the user calling the endpoint&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a list of instances started by the user calling the endpoint&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;mine\&quot;;\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();\n            sampleInstance = result.results[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;861f2771-04c8-401c-af95-41dbca841869&quot;,&quot;parentUUID&quot;:&quot;9cd1bf47-527c-44a8-813e-acd9816fb67a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a \&quot;monitor\&quot; list of instances filtered&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a \&quot;monitor\&quot; list of instances filtered&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:127,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;monitor\&quot;;\n            req.query.filters = [\n                \n                {\&quot;field\&quot;:\&quot;instanceName\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.instanceName}},\n                {\&quot;field\&quot;:\&quot;instanceId\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;gteq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:1}},\n                {\&quot;field\&quot;:\&quot;instanceId\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;lteq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:1000000}},\n                {\&quot;field\&quot;:\&quot;processName\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.processName}},\n                {\&quot;field\&quot;:\&quot;instanceState\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.instanceState}},\n                {\&quot;field\&quot;:\&quot;lastMilestone\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.lastMilestone}},\n                {\&quot;field\&quot;:\&quot;requesterGuid\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.requesterGuid}},\n                {\&quot;field\&quot;:\&quot;requester\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.requester}},\n                {\&quot;field\&quot;:\&quot;startDate\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;gteq\&quot;,\&quot;type\&quot;:\&quot;date\&quot;,\&quot;value\&quot;:&#x27;2010-01-01&#x27;}},\n                {\&quot;field\&quot;:\&quot;startDate\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;lteq\&quot;,\&quot;type\&quot;:\&quot;date\&quot;,\&quot;value\&quot;:&#x27;2030-01-01&#x27;}}\n            ]\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;834c4ccf-b44a-4682-8466-3f65a9ded7df&quot;,&quot;parentUUID&quot;:&quot;9cd1bf47-527c-44a8-813e-acd9816fb67a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a \&quot;mine\&quot; list of instances filtered&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a \&quot;mine\&quot; list of instances filtered&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:130,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;mine\&quot;;\n            req.query.filters = [\n                \n                {\&quot;field\&quot;:\&quot;instanceName\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.instanceName}},\n                {\&quot;field\&quot;:\&quot;instanceId\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;gteq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:1}},\n                {\&quot;field\&quot;:\&quot;instanceId\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;lteq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:1000000}},\n                {\&quot;field\&quot;:\&quot;processName\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.processName}},\n                {\&quot;field\&quot;:\&quot;instanceState\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.instanceState}},\n                {\&quot;field\&quot;:\&quot;lastMilestone\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.lastMilestone}},\n                {\&quot;field\&quot;:\&quot;requesterGuid\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.requesterGuid}},\n                {\&quot;field\&quot;:\&quot;requester\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.requester}}\n            ]\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6ec271d-9545-441b-86d8-89405d03b91a&quot;,&quot;parentUUID&quot;:&quot;9cd1bf47-527c-44a8-813e-acd9816fb67a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;842356fa-9259-4914-82e7-0b21f1c83d92&quot;,&quot;775ed190-a5ad-475c-bccf-dbf34c738acd&quot;,&quot;861f2771-04c8-401c-af95-41dbca841869&quot;,&quot;834c4ccf-b44a-4682-8466-3f65a9ded7df&quot;,&quot;c6ec271d-9545-441b-86d8-89405d03b91a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:279,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;d4ac56d4-87d2-47bd-92b5-7c467d6feb9f&quot;,&quot;title&quot;:&quot;deleteInstances&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-instance/test/integration/instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/instance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a batch of instances&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests deleteInstances should delete a batch of instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:160,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\n            let result = await instanceController.getMyRequests()\n            let instanceGuids= result.results.map((i) =&gt; {\n                return i.instanceGuid;\n            })\n\t\t\tconst mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.body = JSON.stringify(instanceGuids);\n           \n\t\t\tawait handlers.deleteInstances(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n            expect(mockRes.body).to.exist;\n\t\t\tlet deleted = mockRes.body;\n            expect(deleted.instancesDeleted).to.exist;\n            expect(deleted.instancesDeleted).to.equal(instanceGuids.length);\n            \n            //retore them\n            \n            let restored = await instanceController.restoreInstances(instanceGuids);\n            //expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\n            expect(restored.length).to.equal(instanceGuids.length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09210e98-86a5-46dd-b358-1a9f5db1f807&quot;,&quot;parentUUID&quot;:&quot;d4ac56d4-87d2-47bd-92b5-7c467d6feb9f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;09210e98-86a5-46dd-b358-1a9f5db1f807&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:160,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;98e97962-5a01-4200-bd56-8185ae4b19c9&quot;,&quot;title&quot;:&quot;MyTask API Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-instance/test/integration/myTask.test.js&quot;,&quot;file&quot;:&quot;/test/integration/myTask.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;MyTask API Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\njwt = await testLib.getAuthToken();\nthis.timeout(10500);\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d72e855-139c-49e9-b17d-68ea35f2814b&quot;,&quot;parentUUID&quot;:&quot;98e97962-5a01-4200-bd56-8185ae4b19c9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of my tasks&quot;,&quot;fullTitle&quot;:&quot;MyTask API Tests should return a list of my tasks&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:116,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req(jwt);\nawait handlers.getMyTasks(req, mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;\nconst result = mockRes.body;\nexpect(result.total).to.exist;\nexpect(result.total).to.be.gt(0);\nexpect(result.results).to.be.array();\nexpect(result.results.length).to.be.gt(0);\nsampleTask = result.results[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cccf0bbb-4d8d-4b93-a5d3-57f9a7f217d1&quot;,&quot;parentUUID&quot;:&quot;98e97962-5a01-4200-bd56-8185ae4b19c9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cccf0bbb-4d8d-4b93-a5d3-57f9a7f217d1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:116,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;79d03bdc-9126-493a-a99f-15940bec86ea&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;13b7d963-7419-4ce9-a734-69dcbd24124b&quot;,&quot;title&quot;:&quot;Permission/User Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-permissions/test/integration/user.test.js&quot;,&quot;file&quot;:&quot;/test/integration/user.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Permission/User Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nconst user  = config.tenantOne.adminUser;\nconst session = {tenant: config.tenantOne.tenantId, user_sid: user.sid.toLowerCase()}\nthis.timeout(105000); \nlet deletes = await redis.delAsync([`{$session.tenant}.permissions.${session.user_sid}.`]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1bdfae1-0309-4fd5-9778-32db21d6989c&quot;,&quot;parentUUID&quot;:&quot;13b7d963-7419-4ce9-a734-69dcbd24124b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Permission/User Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73faca8c-f1c2-48e5-9c8b-c884855f9038&quot;,&quot;parentUUID&quot;:&quot;13b7d963-7419-4ce9-a734-69dcbd24124b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c9a8d3c8-a0b5-4f69-8514-ba43b0f55611&quot;,&quot;title&quot;:&quot;isSysAdminHandler&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-permissions/test/integration/user.test.js&quot;,&quot;file&quot;:&quot;/test/integration/user.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return {isSysAdmin: true} for an admin user&quot;,&quot;fullTitle&quot;:&quot;Permission/User Tests isSysAdminHandler should return {isSysAdmin: true} for an admin user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n        let req = await mocks.req();\n        let isSysAdmin  = await userFunctions.isSysAdminHandler(req, mockRes);\n        expect(mockRes.statusCode).equal(200);\n        expect(mockRes.body).to.exist;\n        const info = mockRes.body;\n        expect(info.isSysAdmin).to.be.true&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bef9526c-2d03-428e-97ae-34b9b7e6b5f6&quot;,&quot;parentUUID&quot;:&quot;c9a8d3c8-a0b5-4f69-8514-ba43b0f55611&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bef9526c-2d03-428e-97ae-34b9b7e6b5f6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b3908153-ebcc-45bf-b547-c68a2134a8f0&quot;,&quot;title&quot;:&quot;Permission/Workflow Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-permissions/test/integration/workflow.test.js&quot;,&quot;file&quot;:&quot;/test/integration/workflow.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Permission/Workflow Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig()\nuser  = config.tenantOne.adminUser;\nsession = {tenant: config.tenantOne.tenantId, user_sid: user.sid.toLowerCase()}\nthis.timeout(105000);\nlet deletes = await redis.delAsync([`{$session.tenant}.${session.user_name}.permissions`]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75d740dd-9739-4729-bf46-b2bf327793ae&quot;,&quot;parentUUID&quot;:&quot;b3908153-ebcc-45bf-b547-c68a2134a8f0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Permission/Workflow Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ce67187-b438-45ae-b893-d39966eae026&quot;,&quot;parentUUID&quot;:&quot;b3908153-ebcc-45bf-b547-c68a2134a8f0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6dcde71e-8f7e-4103-b650-96abfc08d637&quot;,&quot;title&quot;:&quot;currentUserPermissionssHandler&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-permissions/test/integration/workflow.test.js&quot;,&quot;file&quot;:&quot;/test/integration/workflow.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should cache and return permissions&quot;,&quot;fullTitle&quot;:&quot;Permission/Workflow Tests currentUserPermissionssHandler should cache and return permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n        let req = await mocks.req();\n        let isSysAdmin  = await workflow.currentUserPermissionsHandler(req, mockRes);\n        expect(mockRes.statusCode).equal(200);\n        expect(mockRes.body).to.exist;\n        const info = mockRes.body;\n        expect(info.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42fab3b6-65b0-4a41-8c6c-5c5443b9a441&quot;,&quot;parentUUID&quot;:&quot;6dcde71e-8f7e-4103-b650-96abfc08d637&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;42fab3b6-65b0-4a41-8c6c-5c5443b9a441&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7b66e633-cf22-43b3-bc4a-357555f6cb57&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c2387c93-ccdb-4b4d-8a8c-15f4c3aa4c69&quot;,&quot;title&quot;:&quot;Process controller tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-processes/test/controller.test.js&quot;,&quot;file&quot;:&quot;/test/controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Process controller tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Process controller tests \&quot;before all\&quot; hook in \&quot;Process controller tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\nconfig = await mocks.getTestConfig();\ntenant = config.tenantOne.tenantId;\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()} //system level&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed99aeef-ac06-4b06-ad43-ee817cd85c95&quot;,&quot;parentUUID&quot;:&quot;c2387c93-ccdb-4b4d-8a8c-15f4c3aa4c69&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;532e9e2d-6bf3-43b4-a0a8-fd83c35007a9&quot;,&quot;title&quot;:&quot;process crud &quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-processes/test/controller.test.js&quot;,&quot;file&quot;:&quot;/test/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;searches for a process with run permissions&quot;,&quot;fullTitle&quot;:&quot;Process controller tests process crud  searches for a process with run permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:193,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processConstroller = new ProcessController(session);\n//const  processes = await processConstroller.searchProcesses(&#x27;Update my profile&#x27;, &#x27;run&#x27;, {});\nconst  processes = await processConstroller.searchProcesses({permissionType: &#x27;run&#x27;, search:&#x27;Update my profile&#x27;});\n\nexpect(processes.length).to.be.gt(0);\nconst process = processes[0];\nexpect(process.categoryName).to.exist;\nexpect(process.processGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1fb836b0-e129-4e50-97fe-80dca1c84348&quot;,&quot;parentUUID&quot;:&quot;532e9e2d-6bf3-43b4-a0a8-fd83c35007a9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;searches for a process with viewConfig permissions&quot;,&quot;fullTitle&quot;:&quot;Process controller tests process crud  searches for a process with viewConfig permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processConstroller = new ProcessController(session);\n//const  processes = await processConstroller.searchProcesses(&#x27;Update my profile&#x27;, &#x27;run&#x27;, {});\nconst  processes = await processConstroller.searchProcesses({permissionType: &#x27;viewconfig&#x27;, search:&#x27;Update my profile&#x27;});\n\nexpect(processes.length).to.be.gt(0);\nconst process = processes[0];\nexpect(process.categoryName).to.exist;\nexpect(process.processGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f75c4cf3-8f23-407b-8e40-2db78ba376cc&quot;,&quot;parentUUID&quot;:&quot;532e9e2d-6bf3-43b4-a0a8-fd83c35007a9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;searches for a process with edit permissions&quot;,&quot;fullTitle&quot;:&quot;Process controller tests process crud  searches for a process with edit permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processConstroller = new ProcessController(session);\n//const  processes = await processConstroller.searchProcesses(&#x27;Update my profile&#x27;, &#x27;run&#x27;, {});\nconst  processes = await processConstroller.searchProcesses({permissionType: &#x27;edit&#x27;, search:&#x27;Update my profile&#x27;});\n\nexpect(processes.length).to.be.gt(0);\nconst process = processes[0];\nexpect(process.categoryName).to.exist;\nexpect(process.processGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ea94769-bfd0-49e1-8e65-cd4461279b15&quot;,&quot;parentUUID&quot;:&quot;532e9e2d-6bf3-43b4-a0a8-fd83c35007a9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1fb836b0-e129-4e50-97fe-80dca1c84348&quot;,&quot;f75c4cf3-8f23-407b-8e40-2db78ba376cc&quot;,&quot;6ea94769-bfd0-49e1-8e65-cd4461279b15&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:203,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;84369860-bfb0-4dae-86fd-fef50f2ecc09&quot;,&quot;title&quot;:&quot;process tasks&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-processes/test/controller.test.js&quot;,&quot;file&quot;:&quot;/test/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets all process tasks for given processSid&quot;,&quot;fullTitle&quot;:&quot;Process controller tests process tasks gets all process tasks for given processSid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const emailMonProcessSid = &#x27;8cd0fdcd-3e88-4b5a-b8b2-9ddc4c3b2239&#x27;\nconst processConstroller = new ProcessController(session);\nconst  processTasks = await processConstroller.getProcessTasks({processSid:emailMonProcessSid});\nexpect(processTasks.length).to.equal(6);\nexpect(processTasks[0].taskType.taskTypeName).to.equal(&#x27;Power Form&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;73a86ba2-647d-41b8-a102-476c405f542a&quot;,&quot;parentUUID&quot;:&quot;84369860-bfb0-4dae-86fd-fef50f2ecc09&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets process tasks for given processSid that match taskType filters&quot;,&quot;fullTitle&quot;:&quot;Process controller tests process tasks gets process tasks for given processSid that match taskType filters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const emailMonProcessSid = &#x27;8cd0fdcd-3e88-4b5a-b8b2-9ddc4c3b2239&#x27;\nconst processConstroller = new ProcessController(session);\nconst taskTypes = [&#x27;Power Form&#x27;]\nconst  processTasks = await processConstroller.getProcessTasks({processSid:emailMonProcessSid, taskTypes});\nexpect(processTasks.length).to.equal(2);\nexpect(processTasks[0].taskType.taskTypeName).to.equal(&#x27;Power Form&#x27;)\nexpect(processTasks[1].taskType.taskTypeName).to.equal(&#x27;Power Form&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d48f687b-493d-4c5b-9f53-bf98c220a6fe&quot;,&quot;parentUUID&quot;:&quot;84369860-bfb0-4dae-86fd-fef50f2ecc09&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;73a86ba2-647d-41b8-a102-476c405f542a&quot;,&quot;d48f687b-493d-4c5b-9f53-bf98c220a6fe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:33,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c9158aee-d773-4dc2-8b4f-b9278f310c66&quot;,&quot;title&quot;:&quot;Process route handler tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-processes/test/handlers.test.js&quot;,&quot;file&quot;:&quot;/test/handlers.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Process route handler tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Process route handler tests \&quot;before all\&quot; hook in \&quot;Process route handler tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e87dca66-8e22-4b7f-9734-cb96a5e362c9&quot;,&quot;parentUUID&quot;:&quot;c9158aee-d773-4dc2-8b4f-b9278f310c66&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1e8e9dc4-e1e0-49eb-b584-04721eb4fc4b&quot;,&quot;title&quot;:&quot;process crud &quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-processes/test/handlers.test.js&quot;,&quot;file&quot;:&quot;/test/handlers.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should search processes with run perms&quot;,&quot;fullTitle&quot;:&quot;Process route handler tests process crud  should search processes with run perms&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.query = {permissionType: &#x27;run&#x27;, search:&#x27;Update my profile&#x27;}\nawait handlers.searchProcesses(req,mockRes);\nconst processes = mockRes.body;\nconst process= processes[0];\nexpect(process).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09a9c587-528c-4412-8007-40d451c971f6&quot;,&quot;parentUUID&quot;:&quot;1e8e9dc4-e1e0-49eb-b584-04721eb4fc4b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should search processes with view config perms&quot;,&quot;fullTitle&quot;:&quot;Process route handler tests process crud  should search processes with view config perms&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.query = {permissionType: &#x27;viewconfig&#x27;, search:&#x27;Update my profile&#x27;}\nawait handlers.searchProcesses(req,mockRes);\nconst processes = mockRes.body;\nconst process= processes[0];\nexpect(process).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5b537b5-3259-4822-b78b-a08d5f121ee5&quot;,&quot;parentUUID&quot;:&quot;1e8e9dc4-e1e0-49eb-b584-04721eb4fc4b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;09a9c587-528c-4412-8007-40d451c971f6&quot;,&quot;b5b537b5-3259-4822-b78b-a08d5f121ee5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4cdff12b-adec-4b46-a069-8a3ea042ac51&quot;,&quot;title&quot;:&quot;process tasks&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-processes/test/handlers.test.js&quot;,&quot;file&quot;:&quot;/test/handlers.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets all process tasks for given processSid&quot;,&quot;fullTitle&quot;:&quot;Process route handler tests process tasks gets all process tasks for given processSid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nconst emailMonProcessSid = &#x27;8cd0fdcd-3e88-4b5a-b8b2-9ddc4c3b2239&#x27;\nreq.params = {processSid: emailMonProcessSid}\nreq.query = {taskTypes: &#x27;&#x27;}\nawait handlers.getProcessTasks(req,mockRes);\nexpect(mockRes.statusCode).equal(200);\nconst processTasks = mockRes.body;\nexpect(processTasks.length).to.equal(6);\nexpect(processTasks[0].taskType.taskTypeName).to.equal(&#x27;Power Form&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f5f29c2c-f4bb-406b-b023-18c6718c3191&quot;,&quot;parentUUID&quot;:&quot;4cdff12b-adec-4b46-a069-8a3ea042ac51&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets process tasks for given processSid that match taskType filters&quot;,&quot;fullTitle&quot;:&quot;Process route handler tests process tasks gets process tasks for given processSid that match taskType filters&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nconst emailMonProcessSid = &#x27;8cd0fdcd-3e88-4b5a-b8b2-9ddc4c3b2239&#x27;\nreq.params = {processSid: emailMonProcessSid}\nreq.query = {taskTypes: &#x27;Form,Power Form,Developer Form&#x27;}\nawait handlers.getProcessTasks(req,mockRes);\nexpect(mockRes.statusCode).equal(200);\nconst processTasks = mockRes.body;\nexpect(processTasks.length).to.equal(2);\nexpect(processTasks[0].taskType.taskTypeName).to.equal(&#x27;Power Form&#x27;)\nexpect(processTasks[1].taskType.taskTypeName).to.equal(&#x27;Power Form&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c00153f-4461-4532-beae-441866c84f2c&quot;,&quot;parentUUID&quot;:&quot;4cdff12b-adec-4b46-a069-8a3ea042ac51&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f5f29c2c-f4bb-406b-b023-18c6718c3191&quot;,&quot;2c00153f-4461-4532-beae-441866c84f2c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;656de7ef-dfcc-46cf-bb42-28cfebcd6846&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f099801c-32e2-46b3-907f-3d76d1b11e80&quot;,&quot;title&quot;:&quot;Report controller tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-reports/test/controller.test.js&quot;,&quot;file&quot;:&quot;/test/controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Report controller tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2eb8aa2d-eecf-40b1-b751-a1fa378e7a81&quot;,&quot;parentUUID&quot;:&quot;f099801c-32e2-46b3-907f-3d76d1b11e80&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;eb7d73c1-da80-4c2c-853e-312bba79bd1b&quot;,&quot;title&quot;:&quot;process crud &quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-reports/test/controller.test.js&quot;,&quot;file&quot;:&quot;/test/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a report&quot;,&quot;fullTitle&quot;:&quot;Report controller tests process crud  should create a report&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:46,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const reportJson = { name: \&quot;test report\&quot;,\n                     categorySid: &#x27;test-category-sid&#x27; };\nconst report = await reportController.createReport(tenant, reportJson);\nexpect(report.sid).to.exist\nreportSid = report.sid&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2cb47541-23c7-4563-a60c-415cb7131f98&quot;,&quot;parentUUID&quot;:&quot;eb7d73c1-da80-4c2c-853e-312bba79bd1b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should retrieve a report&quot;,&quot;fullTitle&quot;:&quot;Report controller tests process crud  should retrieve a report&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const report = await reportController.getReport(tenant,reportSid);\nexpect(report.sid).to.equal(reportSid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b2123e9d-706f-41e1-96ad-f007d00e7373&quot;,&quot;parentUUID&quot;:&quot;eb7d73c1-da80-4c2c-853e-312bba79bd1b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should populate core-service expected default values&quot;,&quot;fullTitle&quot;:&quot;Report controller tests process crud  should populate core-service expected default values&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const report = await reportController.getReport(tenant,reportSid);\nexpect(report.limits.get(&#x27;DateRange&#x27;)).to.equal(30);\nexpect(report.limits.get(&#x27;UserFilter&#x27;)).to.equal(&#x27;No&#x27;);\nexpect(report.limits.get(&#x27;PageSize&#x27;)).to.equal(10);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e37ae9a4-be9f-4e6b-976b-0fc5c1de76d9&quot;,&quot;parentUUID&quot;:&quot;eb7d73c1-da80-4c2c-853e-312bba79bd1b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a report&quot;,&quot;fullTitle&quot;:&quot;Report controller tests process crud  should update a report&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const columnMap = { \&quot;column\&quot; : {\n  \&quot;@alias\&quot; : \&quot;Address Line 1\&quot;,\n  \&quot;@sortable\&quot; : \&quot;No\&quot;,\n  \&quot;mapping_val\&quot; : \&quot;Client|AddressLine1\&quot;,\n  \&quot;mapping_text\&quot; : \&quot;Client - Address Line 1\&quot;\n}}\nconst newFields = { \&quot;columns\&quot; : [ columnMap ]}\nconst updatedReport = await reportController.updateReport(tenant,reportSid,newFields)\nexpect(updatedReport).to.exist\nexpect(updatedReport.sid).to.equal(reportSid)\nexpect(updatedReport.modifiedDate).to.be.above(updatedReport.createdDate);\nexpect(updatedReport.columns.length).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cde56c09-69ed-41aa-9547-cef546343c36&quot;,&quot;parentUUID&quot;:&quot;eb7d73c1-da80-4c2c-853e-312bba79bd1b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;soft deletes a report&quot;,&quot;fullTitle&quot;:&quot;Report controller tests process crud  soft deletes a report&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const report = await reportController.getReport(tenant,reportSid);\nexpect(report.deletedDate).to.not.exist\nconst deleted = await reportController.deleteReport(tenant,reportSid);\nexpect(deleted).to.exist\nexpect(deleted.deletedDate).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc35bdce-a597-4988-8c34-5049cdf6631b&quot;,&quot;parentUUID&quot;:&quot;eb7d73c1-da80-4c2c-853e-312bba79bd1b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2cb47541-23c7-4563-a60c-415cb7131f98&quot;,&quot;b2123e9d-706f-41e1-96ad-f007d00e7373&quot;,&quot;e37ae9a4-be9f-4e6b-976b-0fc5c1de76d9&quot;,&quot;cde56c09-69ed-41aa-9547-cef546343c36&quot;,&quot;dc35bdce-a597-4988-8c34-5049cdf6631b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:70,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;64d90e44-d7f4-48fd-8e33-8ab398baf3e5&quot;,&quot;title&quot;:&quot;Report route handler tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-reports/test/handlers.test.js&quot;,&quot;file&quot;:&quot;/test/handlers.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Report route handler tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;testConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dffdf88c-6dc6-4be0-827d-c0d9ec4270fd&quot;,&quot;parentUUID&quot;:&quot;64d90e44-d7f4-48fd-8e33-8ab398baf3e5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6105838e-8633-447a-ac98-92127bb8b614&quot;,&quot;title&quot;:&quot;handler report crud &quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-reports/test/handlers.test.js&quot;,&quot;file&quot;:&quot;/test/handlers.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a report&quot;,&quot;fullTitle&quot;:&quot;Report route handler tests handler report crud  should create a report&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = { name: \&quot;handler test report\&quot;,\n             categorySid: &#x27;test-category-sid&#x27; }\nconst response = await handlers.createReport(req,mockRes);\nconst report = response.body;\nexpect(report.sid).to.exist;\nreportSid = report.sid;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3e8d24b-2980-421a-8315-cea3dcea9e93&quot;,&quot;parentUUID&quot;:&quot;6105838e-8633-447a-ac98-92127bb8b614&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a report&quot;,&quot;fullTitle&quot;:&quot;Report route handler tests handler report crud  should get a report&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.reportSid = reportSid;\nconst response = await handlers.getReport(req,mockRes);\nconst report = response.body;\nexpect(report).to.exist\nexpect(report.sid).to.equal(reportSid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d5de492c-ba4a-4c51-84fc-9473692bbe42&quot;,&quot;parentUUID&quot;:&quot;6105838e-8633-447a-ac98-92127bb8b614&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a report&quot;,&quot;fullTitle&quot;:&quot;Report route handler tests handler report crud  should update a report&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.reportSid = reportSid;\nreq.body = { Description: &#x27;handler test description&#x27; }\nconst response = await handlers.updateReport(req,mockRes);\nconst updatedReport = response.body;\nexpect(updatedReport).to.exist\nexpect(updatedReport.sid).to.equal(reportSid)\nexpect(updatedReport.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd68f8a4-15c6-4503-bc6a-47433c28b954&quot;,&quot;parentUUID&quot;:&quot;6105838e-8633-447a-ac98-92127bb8b614&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete a report&quot;,&quot;fullTitle&quot;:&quot;Report route handler tests handler report crud  should delete a report&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.reportSid = reportSid;\nconst response = await handlers.deleteReport(req,mockRes);\nlet deletedReport = response.body;\nexpect(deletedReport).to.exist;\nexpect(deletedReport.deletedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df4da166-4e9f-4c55-808d-6783ad9c270a&quot;,&quot;parentUUID&quot;:&quot;6105838e-8633-447a-ac98-92127bb8b614&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e3e8d24b-2980-421a-8315-cea3dcea9e93&quot;,&quot;d5de492c-ba4a-4c51-84fc-9473692bbe42&quot;,&quot;bd68f8a4-15c6-4503-bc6a-47433c28b954&quot;,&quot;df4da166-4e9f-4c55-808d-6783ad9c270a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1f3eed56-a4af-485a-acbe-9207d1b80c3a&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d8da6ec6-6824-453c-81ab-ec79a0e2290e&quot;,&quot;title&quot;:&quot;Settings API Holiday Controller tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-settings/test/integration/db/holidays.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/holidays.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Settings API Holiday Controller tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nsession = {tenantId: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()}\ntenantId = config.tenantOne.tenantId;\noauth = {\n  instance_name: config.tenantOne.tenantId,\n  user_sid: config.tenantOne.adminUser.sid\n}\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44dd9e8d-4ed9-4102-a847-d0502e30adbb&quot;,&quot;parentUUID&quot;:&quot;d8da6ec6-6824-453c-81ab-ec79a0e2290e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should insert, select, delete and list holidays&quot;,&quot;fullTitle&quot;:&quot;Settings API Holiday Controller tests should insert, select, delete and list holidays&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:240,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let holiday = {\n  holidayName: \&quot;O Day\&quot;,\n  startDate: \&quot;2019-10-10T00:00:00.000Z\&quot;,\n  endDate: \&quot;2019-10-11T00:00:00.000Z\&quot;,\n  country: \&quot;USA\&quot;\n};\nlet holidayController = new HolidayController(oauth);\n// insert\nconst inserted = await holidayController.insertHoliday(holiday);\nvalidateHoliday(holiday, inserted);\n// select\nlet gotOne = await holidayController.getHoliday(inserted.holidayGuid);\nvalidateHoliday(holiday, gotOne);\n// update\nholiday.holidayGuid = inserted.holidayGuid;\nholiday.holidayName = \&quot;Easter Monday\&quot;;\nholiday.country = \&quot;Papa New Guinea\&quot;;\nawait holidayController.updateHoliday(holiday);\ngotOne = await holidayController.getHoliday(inserted.holidayGuid);\nvalidateHoliday(holiday, gotOne);\n//list\nconst holidays = await holidayController.listHolidays();\nexpect(holidays.length).to.be.gt(0);\nholiday = holidays[0];\nexpect(holiday.holidayGuid).to.exist;\nexpect(holiday.holidayName).to.exist;\nexpect(holiday.startDate).to.exist;\nexpect(holiday.endDate).to.exist;\nexpect(holiday.country).to.exist;\n// delete\nconst holidayGuids = [inserted.holidayGuid];\nawait holidayController.deleteHolidays(holidayGuids);\ngotOne = await holidayController.getHoliday(inserted.holidayGuid);\nexpect(gotOne).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5bb0bf2c-f47e-4f4f-ba68-a58784df95fe&quot;,&quot;parentUUID&quot;:&quot;d8da6ec6-6824-453c-81ab-ec79a0e2290e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5bb0bf2c-f47e-4f4f-ba68-a58784df95fe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:240,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4d793bf7-95a1-47a8-a667-5beff0affcaf&quot;,&quot;title&quot;:&quot;Settings API Language Controller test&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-settings/test/integration/db/languages.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/languages.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Settings API Language Controller test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\noauth = {\n  instance_name: config.tenantOne.tenantId,\n  user_sid: config.tenantOne.adminUser.sid\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c41242bc-eba1-41b2-b6d8-32b7cbe7ab27&quot;,&quot;parentUUID&quot;:&quot;4d793bf7-95a1-47a8-a667-5beff0affcaf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a list of languages&quot;,&quot;fullTitle&quot;:&quot;Settings API Language Controller test should get a list of languages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const languageCtrl = new LanguageController(oauth);\nconst languages = await languageCtrl.listLanguages();\nexpect(languages.length).to.be.gt(0);\nconst language = languages[0];\nexpect(language.languageGuid).to.exist;\nexpect(language.languageName).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f9dd7c18-7d9d-47a9-b15b-3ae2c0555875&quot;,&quot;parentUUID&quot;:&quot;4d793bf7-95a1-47a8-a667-5beff0affcaf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f9dd7c18-7d9d-47a9-b15b-3ae2c0555875&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;02ebee06-e37f-47e9-831c-1929c55e78a7&quot;,&quot;title&quot;:&quot;Settings API System Setting Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-settings/test/integration/db/systemsetting.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/systemsetting.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()} \nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e294596-88ef-4e8d-9312-2a1d75e715be&quot;,&quot;parentUUID&quot;:&quot;02ebee06-e37f-47e9-831c-1929c55e78a7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f8a0c045-f269-4651-a825-8914a34d8854&quot;,&quot;title&quot;:&quot;Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-settings/test/integration/db/systemsetting.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/systemsetting.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a system setting model&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Model Tests should get a system setting model&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const SystemSettingsModel = await model.getConsumerModel(\n  config.ConsumersConn1,\n  \&quot;SystemSettings\&quot;\n);\nexpect(SystemSettingsModel).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61629660-44e7-4b8a-a477-7a1fe743be2b&quot;,&quot;parentUUID&quot;:&quot;f8a0c045-f269-4651-a825-8914a34d8854&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return system settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Model Tests should return system settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const SystemSettingsModel = await model.getConsumerModel(\n  config.ConsumersConn1,\n  \&quot;SystemSettings\&quot;\n);\nlet results = await SystemSettingsModel.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d59da33-dafe-4b7a-ba18-f55d30da478a&quot;,&quot;parentUUID&quot;:&quot;f8a0c045-f269-4651-a825-8914a34d8854&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;61629660-44e7-4b8a-a477-7a1fe743be2b&quot;,&quot;0d59da33-dafe-4b7a-ba18-f55d30da478a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b8c7491c-b224-4ef7-ac7b-5c13b874bb3f&quot;,&quot;title&quot;:&quot;Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-settings/test/integration/db/systemsetting.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/systemsetting.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list system settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Controller Tests should list system settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:39,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let systemSettingController = new SystemSettingController(session);\nlet systemSettings = await systemSettingController.listSystemSettings();\nexpect(systemSettings).to.exist;\nexpect(systemSettings.length).to.be.gt(0);\nexpect(systemSettings[0].masterSettings.settingsGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0f0e9a02-f0b7-420d-aafc-780d9102c6a3&quot;,&quot;parentUUID&quot;:&quot;b8c7491c-b224-4ef7-ac7b-5c13b874bb3f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list password settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Controller Tests should list password settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let systemSettingController = new SystemSettingController(session);\nlet systemSettings = await systemSettingController.listPasswordSettings();\nexpect(systemSettings).to.exist;\nexpect(systemSettings.length).to.be.gt(0);\n// only system settings listed should be the ones related to passwords   \nexpect(systemSettings.filter(x =&gt; x.settingsKey.startsWith(&#x27;PWD&#x27;)).length).to.equal(systemSettings.length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71586019-b52c-4c33-b73c-e72504838ae7&quot;,&quot;parentUUID&quot;:&quot;b8c7491c-b224-4ef7-ac7b-5c13b874bb3f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update system settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Controller Tests should update system settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:143,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let pwdSettings = [{\n  \&quot;settingsGuid\&quot;:\&quot;6F170960-C5BC-4A12-B170-1CCEDCAC3DF2\&quot;,\n  \&quot;dataInstanceGuid\&quot;:\&quot;2CA0CE58-B55B-4DA7-ACE1-5FC37E3D32D5\&quot;,\n  \&quot;settingsKey\&quot;:\&quot;PWD_EXPIRATION\&quot;,\n  \&quot;settingsValue\&quot;:\&quot;14\&quot;, // changed\n  \&quot;createdBy\&quot;:\&quot;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF\&quot;,\n  \&quot;createdDate\&quot;:\&quot;2020-01-28T03:38:03.200Z\&quot;,\n  \&quot;modifiedBy\&quot;:null,\n  \&quot;modifiedDate\&quot;:null,\n  \&quot;masterSettings\&quot;:{\n    \&quot;settingsGuid\&quot;:\&quot;6F170960-C5BC-4A12-B170-1CCEDCAC3DF2\&quot;,\n    \&quot;settingsKey\&quot;:\&quot;PWD_EXPIRATION\&quot;,\n    \&quot;keyDefault\&quot;:\&quot;7\&quot;,\n    \&quot;keyOptions\&quot;:null,\n    \&quot;description\&quot;:\&quot;Length in days before a user is prompted to change his or her password.\&quot;\n  }\n}, {\n  \&quot;settingsGuid\&quot;:\&quot;B2476A3D-095F-424A-9C29-4AA95E93A09E\&quot;,\n  \&quot;dataInstanceGuid\&quot;:\&quot;2CA0CE58-B55B-4DA7-ACE1-5FC37E3D32D5\&quot;,\n  \&quot;settingsKey\&quot;:\&quot;PWD_EXPIRATION_ACTIVE\&quot;,\n  \&quot;settingsValue\&quot;:\&quot;1\&quot;, // changed\n  \&quot;createdBy\&quot;:\&quot;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF\&quot;,\n  \&quot;createdDate\&quot;:\&quot;2020-01-28T03:38:03.200Z\&quot;,\n  \&quot;modifiedBy\&quot;:null,\n  \&quot;modifiedDate\&quot;:null,\n  \&quot;masterSettings\&quot;:{\n    \&quot;settingsGuid\&quot;:\&quot;B2476A3D-095F-424A-9C29-4AA95E93A09E\&quot;,\n    \&quot;settingsKey\&quot;:\&quot;PWD_EXPIRATION_ACTIVE\&quot;,\n    \&quot;keyDefault\&quot;:\&quot;0\&quot;,\n    \&quot;keyOptions\&quot;:\&quot;1|0\&quot;,\n    \&quot;description\&quot;:\&quot;Flag to turn enforcement of password expiration.  1 = On, 0 = Off\&quot;\n  }\n}]\n// save the changes above, query to verify changes, set them back to the defaults\nlet systemSettingController = new SystemSettingController(session)\nawait systemSettingController.updateSystemSettings(pwdSettings)\nlet systemSettings = await systemSettingController.listPasswordSettings();\nexpect(systemSettings.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION&#x27;).settingsValue).to.equal(&#x27;14&#x27;)\nexpect(systemSettings.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION_ACTIVE&#x27;).settingsValue).to.equal(&#x27;1&#x27;)\npwdSettings.forEach(setting =&gt; {\n  setting.settingsValue = setting.masterSettings.keyDefault\n})\nawait systemSettingController.updateSystemSettings(pwdSettings)\nsystemSettings = await systemSettingController.listPasswordSettings();\nlet pwdExpiration = systemSettings.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION&#x27;)\nlet pwdExpirationActive = systemSettings.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION_ACTIVE&#x27;)\nexpect(pwdExpiration.settingsValue).to.equal(pwdExpiration.masterSettings.keyDefault)\nexpect(pwdExpirationActive.settingsValue).to.equal(pwdExpirationActive.masterSettings.keyDefault)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b12762bd-1444-4cec-8d03-40e70f52c6d0&quot;,&quot;parentUUID&quot;:&quot;b8c7491c-b224-4ef7-ac7b-5c13b874bb3f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0f0e9a02-f0b7-420d-aafc-780d9102c6a3&quot;,&quot;71586019-b52c-4c33-b73c-e72504838ae7&quot;,&quot;b12762bd-1444-4cec-8d03-40e70f52c6d0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:203,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a6278eb2-9c54-4a2a-be7e-05f88fbdb6a0&quot;,&quot;title&quot;:&quot;Biztime API Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-settings/test/integration/functions/biztimes.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/biztimes.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Biztime API Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\njwt = await testLib.getAuthToken();\nthis.timeout(10500);\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()};\nmockRes = await mocks.mockResponse();\nreq = await mocks.req(jwt);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a60daacf-d40a-4cf4-a2c7-a26cd9eff2d4&quot;,&quot;parentUUID&quot;:&quot;a6278eb2-9c54-4a2a-be7e-05f88fbdb6a0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of biztimes&quot;,&quot;fullTitle&quot;:&quot;Biztime API Tests should return a list of biztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await handlers.listBiztimes(req, mockRes);\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;\nexpect(mockRes.body.length).to.be.gt(0);\nvalidateBiztime(mockRes.body[0]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2fa8d344-324b-4052-9932-e3d57db926f6&quot;,&quot;parentUUID&quot;:&quot;a6278eb2-9c54-4a2a-be7e-05f88fbdb6a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert a biztime&quot;,&quot;fullTitle&quot;:&quot;Biztime API Tests should insert a biztime&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await handlers.insertBiztime(\n  {...req, body: {...biztimeToInsert}},\n  mockRes);\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;\ninsertedBiztime = mockRes.body;\nvalidateBiztime(biztimeToInsert, insertedBiztime);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0fdc479-4593-4b4c-92bd-8ffb73474bd5&quot;,&quot;parentUUID&quot;:&quot;a6278eb2-9c54-4a2a-be7e-05f88fbdb6a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a biztime&quot;,&quot;fullTitle&quot;:&quot;Biztime API Tests should update a biztime&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await handlers.updateBiztime(\n  {\n    ...req,\n    params: {bizTimeGuid: insertedBiztime.bizTimeGuid},\n    body: {...biztimeToUpdate}},\n  mockRes\n  );\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;\nvalidateBiztime(biztimeToUpdate, mockRes.body);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f1de895d-73d9-4270-bbd8-96f91db1b81c&quot;,&quot;parentUUID&quot;:&quot;a6278eb2-9c54-4a2a-be7e-05f88fbdb6a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2fa8d344-324b-4052-9932-e3d57db926f6&quot;,&quot;b0fdc479-4593-4b4c-92bd-8ffb73474bd5&quot;,&quot;f1de895d-73d9-4270-bbd8-96f91db1b81c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:34,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;789c4054-970e-4d3e-b596-c28d77642ad8&quot;,&quot;title&quot;:&quot;Settings API Holiday Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-settings/test/integration/functions/holidays.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/holidays.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;insert, list, get, delete holiday&quot;,&quot;fullTitle&quot;:&quot;Settings API Holiday Tests insert, list, get, delete holiday&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = mocks.mockResponse();\nlet listHolidaysEvent = await mocks.listHolidaysEvent()\nlet insertHolidayEvent = await mocks.insertHolidayEvent();\nlet getHolidayEvent = await mocks.getHolidayEvent();\n\n// insert\nawait holidays.insert(insertHolidayEvent, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst inserted = mockRes.body;\nvalidateHoliday(insertHolidayEvent.body, inserted);\n//list\nawait holidays.list(listHolidaysEvent, mockRes);\n\t\texpect(mockRes.statusCode).to.equal(200);\nexpect(mockRes.body.length).to.be.greaterThan(0);\nexpectDefinedHoliday(mockRes.body[0]);\n// get\ngetHolidayEvent.params.holidayGuid = inserted.holidayGuid;\nawait holidays.get(getHolidayEvent, mockRes);\n\t\texpect(mockRes.statusCode).to.equal(200);\nconst got = mockRes.body;\nvalidateHoliday(inserted, got);\n// delete\nlet deleteEvent = Object.assign({}, listHolidaysEvent);\ndeleteEvent.body = [inserted.holidayGuid];\nawait holidays.remove(deleteEvent, mockRes);\n\t\texpect(mockRes.statusCode).to.equal(200);\ngetHolidayEvent.params = {\n  holidayGuid: inserted.holidayGuid\n};\nawait holidays.get(getHolidayEvent, mockRes);\nexpect(mockRes.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b2effd50-422f-42fe-ba6c-ba37f4f0335e&quot;,&quot;parentUUID&quot;:&quot;789c4054-970e-4d3e-b596-c28d77642ad8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b2effd50-422f-42fe-ba6c-ba37f4f0335e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:28,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;28a1e179-da9b-4731-b2d6-75107a4594df&quot;,&quot;title&quot;:&quot;Settings API Languages Test&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-settings/test/integration/functions/languages.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/languages.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a list of holidays&quot;,&quot;fullTitle&quot;:&quot;Settings API Languages Test should get a list of holidays&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = mocks.mockResponse();\nconst listLanguagesEvent = await mocks.listLanguagesEvent();\nawait languages.list(listLanguagesEvent, mockRes);\nexpect(mockRes.statusCode).to.eq(200);\nexpect(mockRes.body.length).to.be.gt(0);\nconst language = mockRes.body[0];\nexpect(language.languageGuid).to.exist;\nexpect(language.languageName).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c776b369-658f-4dd0-a8b9-3fb08be63e77&quot;,&quot;parentUUID&quot;:&quot;28a1e179-da9b-4731-b2d6-75107a4594df&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c776b369-658f-4dd0-a8b9-3fb08be63e77&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;69a57090-d1e6-4967-914c-b29e806bc8d7&quot;,&quot;title&quot;:&quot;Settings API Password Settings Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-settings/test/integration/functions/passwordSettings.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/passwordSettings.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;lists the password settings&quot;,&quot;fullTitle&quot;:&quot;Settings API Password Settings Tests lists the password settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse();\nawait passwordSettings.list(mockReq, mockRes);\n\n\t\texpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body\nexpect(result.length).to.be.greaterThan(0);\n// only system settings listed should be the ones related to passwords\nexpect(result.filter(x =&gt; x.settingsKey.startsWith(&#x27;PWD&#x27;)).length).to.equal(result.length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d2c05260-e626-4b5a-9256-7d58d1bfc4f5&quot;,&quot;parentUUID&quot;:&quot;69a57090-d1e6-4967-914c-b29e806bc8d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d2c05260-e626-4b5a-9256-7d58d1bfc4f5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;30b7e9d5-f61a-4f57-8c9b-7bc4fe5c9e8b&quot;,&quot;title&quot;:&quot;Settings API System Config Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-settings/test/integration/functions/systemConfig.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/systemConfig.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;lists the system config settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Config Tests lists the system config settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse();\nawait systemConfig.list(mockReq, mockRes);\n\n\t\texpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body\nexpect(result.length).to.be.greaterThan(40);\nexpect(result[0].settingsGuid).to.exist\nexpect(result[0].settingsKey).to.exist\nexpect(result[0].settingsValue).to.exist\nexpect(result[0].masterSettings.description).to.exist\nexpect(result[0].masterSettings.keyDefault).to.exist\nexpect(result[0].masterSettings.keyOptions).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e8a2196-3fce-4f89-a2f5-658c8476da22&quot;,&quot;parentUUID&quot;:&quot;30b7e9d5-f61a-4f57-8c9b-7bc4fe5c9e8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;updates system config settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Config Tests updates system config settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:163,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse();\nmockReq.body = [{\n  settingsGuid: \&quot;2B18AE62-7C26-439C-84A7-371B4A51BE26\&quot;,\n  settingsKey: \&quot;AllowGetReqInfo\&quot;,\n  settingsValue: \&quot;true\&quot;\n}]\nawait systemConfig.update(mockReq, mockRes);\n\n\t\texpect(mockRes.statusCode).to.equal(200);\nlet result = mockRes.body\nexpect(result).to.equal(&#x27;1&#x27;);\n// verify that change was made\nawait systemConfig.list(mockReq, mockRes);\nresult = mockRes.body\nlet allowGetReqInfo = result.find( x =&gt; x.settingsKey == &#x27;AllowGetReqInfo&#x27;)\nexpect(allowGetReqInfo.settingsValue).to.equal(&#x27;true&#x27;)\n// revert the change\nmockReq.body = [{\n  settingsGuid: \&quot;2B18AE62-7C26-439C-84A7-371B4A51BE26\&quot;,\n  settingsKey: \&quot;AllowGetReqInfo\&quot;,\n  settingsValue: \&quot;false\&quot;\n}]\nawait systemConfig.update(mockReq, mockRes);\nawait systemConfig.list(mockReq, mockRes);\nresult = mockRes.body\nallowGetReqInfo = result.find( x =&gt; x.settingsKey == &#x27;AllowGetReqInfo&#x27;)\nexpect(allowGetReqInfo.settingsValue).to.equal(&#x27;false&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26da9c9d-f50c-4d8e-9529-af12f9147565&quot;,&quot;parentUUID&quot;:&quot;30b7e9d5-f61a-4f57-8c9b-7bc4fe5c9e8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8e8a2196-3fce-4f89-a2f5-658c8476da22&quot;,&quot;26da9c9d-f50c-4d8e-9529-af12f9147565&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:183,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d10c35fc-b26c-4936-9b1d-fc440d110ee2&quot;,&quot;title&quot;:&quot;Settings API Utilities Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-settings/test/integration/functions/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b15ceddb-5a42-4e9c-b73e-a850badf52a1&quot;,&quot;title&quot;:&quot;locales&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-settings/test/integration/functions/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;lists locales&quot;,&quot;fullTitle&quot;:&quot;Settings API Utilities Tests locales lists locales&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\nawait utils.listLocales(mocks.req(), mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9bc858e1-f552-4948-96c8-248595a3c306&quot;,&quot;parentUUID&quot;:&quot;b15ceddb-5a42-4e9c-b73e-a850badf52a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9bc858e1-f552-4948-96c8-248595a3c306&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a3f3985f-4b56-45f2-89d7-cfef44444264&quot;,&quot;title&quot;:&quot;timezones&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-settings/test/integration/functions/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list timezones&quot;,&quot;fullTitle&quot;:&quot;Settings API Utilities Tests timezones should list timezones&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nawait utils.listTimezones(mocks.req(), mockRes);\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8164b275-c2a9-4737-bbc3-42543e9aea5f&quot;,&quot;parentUUID&quot;:&quot;a3f3985f-4b56-45f2-89d7-cfef44444264&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8164b275-c2a9-4737-bbc3-42543e9aea5f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;48678f3f-6a95-4a06-8bb4-7b9a4b9baee7&quot;,&quot;title&quot;:&quot;running versions&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-settings/test/integration/functions/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list running versions&quot;,&quot;fullTitle&quot;:&quot;Settings API Utilities Tests running versions should list running versions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nawait utils.listRunningVersions(mocks.req(), mockRes);\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e65c2c80-1f45-462b-a6cd-63e01515a711&quot;,&quot;parentUUID&quot;:&quot;48678f3f-6a95-4a06-8bb4-7b9a4b9baee7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e65c2c80-1f45-462b-a6cd-63e01515a711&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d2e265d7-fd73-415b-aef6-64e421a9437d&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3ca41245-4353-4edd-bd0b-d0387498eeed&quot;,&quot;title&quot;:&quot;Task Dispatcher API Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Task Dispatcher API Controller Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests \&quot;before all\&quot; hook in \&quot;Task Dispatcher API Controller Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4c5364b-d4f7-4154-ac45-7c500f66b8bb&quot;,&quot;parentUUID&quot;:&quot;3ca41245-4353-4edd-bd0b-d0387498eeed&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a8e9bb70-2290-40b2-a48c-d12063d7b3cb&quot;,&quot;title&quot;:&quot;ProcessTaskController&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get process tasks&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskController should get process tasks&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:199,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processTaskController = new controllers.ProcessTaskController(session);\nconst updateMyProfileProcessSid = &#x27;f864cfe2-98df-4724-8db1-de2cc538d4e0&#x27;\nlet processTasks = await processTaskController.getProcessTasks(updateMyProfileProcessSid)\nexpect(processTasks).to.exist;\nexpect(processTasks.length).to.be.gt(0);\nexpect(processTasks[0].processTaskGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3183c52-9a52-40d9-85a2-360c875abd0c&quot;,&quot;parentUUID&quot;:&quot;a8e9bb70-2290-40b2-a48c-d12063d7b3cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a3183c52-9a52-40d9-85a2-360c875abd0c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:199,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b9f0b710-ac67-4b2d-a714-505ead6b967f&quot;,&quot;title&quot;:&quot;ProcessTaskAttributeController&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list process task attributes&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskAttributeController should list process task attributes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processTaskAttributeController = new controllers.ProcessTaskAttributeController(session);\nconst profileFormProcessTaskSid = &#x27;c0473244-f04f-4916-8ac9-a73cc538d434&#x27;\nlet includeExt = false\nlet processTaskAttributes = await processTaskAttributeController.list(profileFormProcessTaskSid, includeExt)\nexpect(processTaskAttributes).to.exist;\nexpect(processTaskAttributes.length).to.be.gt(0);\nexpect(processTaskAttributes[6].processTaskAttributeGuid).to.exist;\nexpect(processTaskAttributes[6].extendedAtt).to.not.exist;\nincludeExt = true\nlet processTaskAttributesIncExt = await processTaskAttributeController.list(profileFormProcessTaskSid, includeExt)\nexpect(processTaskAttributesIncExt).to.exist;\nexpect(processTaskAttributesIncExt.length).to.be.gt(0);\nexpect(processTaskAttributesIncExt[6].processTaskAttributeGuid).to.exist;\nexpect(processTaskAttributesIncExt[6].extendedAtt.extAttribute).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03510d99-3817-44e9-981a-c0ac1f8805c5&quot;,&quot;parentUUID&quot;:&quot;b9f0b710-ac67-4b2d-a714-505ead6b967f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get and update a process task attribute&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskAttributeController should get and update a process task attribute&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:51,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processTaskAttributeGuid = &#x27;7cece0ab-bda6-4b13-a8fb-3f5c467371e6&#x27;  \nlet processTaskAttributeController = new controllers.ProcessTaskAttributeController(session);\nlet processTaskAttribute =  await processTaskAttributeController.get(processTaskAttributeGuid)\n// console.log(processTaskAttribute)\nexpect(processTaskAttribute.attributeValue).to.equal(&#x27;0&#x27;)\nlet numberOfAffectedRows = await processTaskAttributeController.update({\n  processTaskAttributeGuid,\n  fields: {\n    attributeValue: &#x27;TEST&#x27;\n  }\n})\nexpect(numberOfAffectedRows).to.equal(1)\nprocessTaskAttribute =  await processTaskAttributeController.get(processTaskAttributeGuid)\nexpect(processTaskAttribute.attributeValue).to.equal(&#x27;TEST&#x27;)\n// must set it back to original value so that we don&#x27;t break anything\nnumberOfAffectedRows = await processTaskAttributeController.update({\n  processTaskAttributeGuid,\n  fields: {\n    attributeValue: &#x27;0&#x27;\n  }\n})\nexpect(numberOfAffectedRows).to.equal(1)\nprocessTaskAttribute =  await processTaskAttributeController.get(processTaskAttributeGuid)\nexpect(processTaskAttribute.attributeValue).to.equal(&#x27;0&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ea5cff4-0874-4dc4-80a2-80c12aa652c9&quot;,&quot;parentUUID&quot;:&quot;b9f0b710-ac67-4b2d-a714-505ead6b967f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert a process task attribute&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskAttributeController should insert a process task attribute&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// pick any process task and insert a process task attribute\n// then delete it\nconst processTaskAttributeController = new controllers.ProcessTaskAttributeController(session);\n// give \&quot;Update my profile - Start task\&quot; a test process task att\nconst processTaskGuid = &#x27;27cb04ea-b19d-4327-8b3a-e82cc538d44d&#x27;\nconst attributeKey = &#x27;TEST_KEY&#x27;\nconst attributeValue = &#x27;TEST_VALUE&#x27;\nconst ordinal = 1\nconst processTaskAttribute = await processTaskAttributeController.insert({\n  processTaskGuid,\n  attributeKey,\n  attributeValue,\n  ordinal\n})\nexpect(processTaskAttribute.processTaskAttributeGuid).to.be.a.uuid()\nexpect(processTaskAttribute.processTaskGuid).to.equal(processTaskGuid)\nexpect(processTaskAttribute.attributeKey).to.equal(attributeKey)\nexpect(processTaskAttribute.attributeValue).to.equal(attributeValue)\nexpect(processTaskAttribute.ordinal).to.equal(ordinal)\n// cleanup\n// const numberOfAffectedRows = await processTaskAttributeController.delete(processTaskAttribute.processTaskAttributeGuid)\nconst numberOfAffectedRows = await processTaskAttributeController.delete(processTaskAttribute.processTaskAttributeGuid)\nexpect(numberOfAffectedRows).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ef903d1-86b0-4834-97c0-2deb588eb705&quot;,&quot;parentUUID&quot;:&quot;b9f0b710-ac67-4b2d-a714-505ead6b967f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get the process task attribute max ordinal value for a process task&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskAttributeController should get the process task attribute max ordinal value for a process task&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processTaskAttributeController = new controllers.ProcessTaskAttributeController(session);\n// \&quot;Update my profile - Start task\&quot; a test process task att\nlet processTaskGuid = \&quot;27cb04ea-b19d-4327-8b3a-e82cc538d44d\&quot;;\n// that process task has no atts so its max ordinal should be null\nlet maxOrdinal = await processTaskAttributeController.getMaxOrdinal(processTaskGuid);\nexpect(maxOrdinal).to.equal(null);\n// \&quot;Update my profile - User Profile\&quot; task does have atts.  seed db goes up to 12\nprocessTaskGuid = \&quot;28d88aa5-fc4c-4e16-b32d-2964c738d49b\&quot;;\nmaxOrdinal = await processTaskAttributeController.getMaxOrdinal(processTaskGuid);\nexpect(maxOrdinal).to.equal(12);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3edebde7-ca50-46c8-94ef-b59ad59b78fe&quot;,&quot;parentUUID&quot;:&quot;b9f0b710-ac67-4b2d-a714-505ead6b967f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;03510d99-3817-44e9-981a-c0ac1f8805c5&quot;,&quot;9ea5cff4-0874-4dc4-80a2-80c12aa652c9&quot;,&quot;5ef903d1-86b0-4834-97c0-2deb588eb705&quot;,&quot;3edebde7-ca50-46c8-94ef-b59ad59b78fe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:102,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e5313755-e4e0-4254-b0ae-0d9c6787e430&quot;,&quot;title&quot;:&quot;ProcessTaskMappingController&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list process task mappings&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskMappingController should list process task mappings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processTaskMappingController = new controllers.ProcessTaskMappingController(session);\nconst profileFormProcessTaskSid = &#x27;c0473244-f04f-4916-8ac9-a73cc538d434&#x27;\nlet processTaskAttributes = await processTaskMappingController.list(profileFormProcessTaskSid)\nexpect(processTaskAttributes).to.exist;\nexpect(processTaskAttributes.length).to.be.gt(0);\nexpect(processTaskAttributes[0].processTaskMappingGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dec50616-2ea8-4e73-9e92-e210a922b8b0&quot;,&quot;parentUUID&quot;:&quot;e5313755-e4e0-4254-b0ae-0d9c6787e430&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dec50616-2ea8-4e73-9e92-e210a922b8b0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d349f017-30a3-42cd-8737-e469f57cf989&quot;,&quot;title&quot;:&quot;ProcessController&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update a process&#x27;s modified by and date fields&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessController should update a process&#x27;s modified by and date fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processController = new controllers.ProcessController(session);\nconst updateMyProfileProcessSid = &#x27;f864cfe2-98df-4724-8db1-de2cc538d4e0&#x27;\nconst systemUserGuid = &#x27;D8C469C3-F781-4179-A09C-6D148885FB30&#x27;\nlet process = await processController.get(updateMyProfileProcessSid)\nexpect(process).to.exist;\nexpect(process.processGuid.toLowerCase()).to.equal(updateMyProfileProcessSid);\nconst oldModifiedDate = process.modifiedDate\nconst numberOfAffectedRows = await processController.updateModifiedByAndDate(updateMyProfileProcessSid)\nexpect(numberOfAffectedRows).to.equal(1)\nprocess = await processController.get(updateMyProfileProcessSid) \nexpect(process.modifiedDate).to.be.greaterThan(oldModifiedDate)\n// for some reason when executed in a test the db record&#x27;s modifiedBy is set to \n// the systemUserGuid instead of the contact sid specified in the session (4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF)\nexpect(process.modifiedBy).to.equal(systemUserGuid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f1e0b3a-0b54-429b-88cf-56d12c846452&quot;,&quot;parentUUID&quot;:&quot;d349f017-30a3-42cd-8737-e469f57cf989&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1f1e0b3a-0b54-429b-88cf-56d12c846452&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9a8e5968-f1a2-47e7-9eb3-0dcad0e711c6&quot;,&quot;title&quot;:&quot;Task Dispatcher API Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-task-dispatcher/test/integration/db/model.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;434b25ea-1708-4adf-ae9f-fc5d62494dee&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-task-dispatcher/test/integration/db/model.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/model.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Model Tests tests \&quot;before all\&quot; hook in \&quot;tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d7395a8-356f-4bcb-8906-ac0d8517b52d&quot;,&quot;parentUUID&quot;:&quot;434b25ea-1708-4adf-ae9f-fc5d62494dee&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:64,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const vwProcessTasksModel = await sqldb.models.bindModel(\n  config.tenantOne.tenantId,\n  vwProcessTasksModels.vwProcessTasks\n);\nlet results = await vwProcessTasksModel.query();\n//console.log(results)\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;916fd9d3-d0e5-4e1f-a7bf-14edf57f2048&quot;,&quot;parentUUID&quot;:&quot;434b25ea-1708-4adf-ae9f-fc5d62494dee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a hash of bound models&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Model Tests tests should return a hash of bound models&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:39,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const vwProcessTasksModel = (await models.getModels(config.tenantOne.tenantId))\n  .vwProcessTasks;\nlet results = await vwProcessTasksModel.query();\n//console.log(results)\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54d39214-0c09-4200-ba2a-abcfa6ed81b1&quot;,&quot;parentUUID&quot;:&quot;434b25ea-1708-4adf-ae9f-fc5d62494dee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should bound models should be cached in memory&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Model Tests tests should bound models should be cached in memory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:36,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(models._tentantModels[config.tenantOne.tenantId]).to.exist;\nlet results = await models._tentantModels[\n  config.tenantOne.tenantId\n].vwProcessTasks.query();\n//console.log(results)\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8590ab6-7cb2-47de-8c4a-561a692ddd30&quot;,&quot;parentUUID&quot;:&quot;434b25ea-1708-4adf-ae9f-fc5d62494dee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;916fd9d3-d0e5-4e1f-a7bf-14edf57f2048&quot;,&quot;54d39214-0c09-4200-ba2a-abcfa6ed81b1&quot;,&quot;e8590ab6-7cb2-47de-8c4a-561a692ddd30&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:139,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7a2f86a4-77c3-4b58-95fb-3cc9638e7b68&quot;,&quot;title&quot;:&quot;Task Dispatcher API Excel Batch Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-task-dispatcher/test/integration/functions/excelBatch.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/excelBatch.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Task Dispatcher API Excel Batch Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Excel Batch Tests \&quot;before all\&quot; hook in \&quot;Task Dispatcher API Excel Batch Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:34,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\n// upload sample excel file to temp folder\nconst testConfig = await config.getConfig();\nconst tenant = testConfig.test.tenantOne.tenantId;\nconst baseUrl = testConfig.portalUrl;\nconst token = await testLib.getAuthToken();\nconst res = await chai.request(baseUrl)\n  .post(`/api/files/temp/${tenant}/upload`)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\n  .attach(&#x27;files&#x27;, &#x27;./test/files/student_records.xlsx&#x27;, &#x27;student_records.xlsx&#x27;);\n// add sampleFileSid to excelBatchTaskSettings\nexcelBatchTaskSettings.push({\&quot;attributeKey\&quot;:\&quot;SampleSpreadsheetSID\&quot;,\&quot;attributeValue\&quot;: res.body[0].sid});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd65a8e1-438e-4bc3-a735-7af0cdfcf0ca&quot;,&quot;parentUUID&quot;:&quot;7a2f86a4-77c3-4b58-95fb-3cc9638e7b68&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should post general settings&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Excel Batch Tests should post general settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:132,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = {processTaskSid, op: &#x27;script_postgeneralsettings&#x27;, tasktype};\nmockReq.body = excelBatchTaskSettings;\nawait functions.saveConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.eq(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ebeed0c-09bf-47d6-9096-34e18c0b1a80&quot;,&quot;parentUUID&quot;:&quot;7a2f86a4-77c3-4b58-95fb-3cc9638e7b68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get general settings&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Excel Batch Tests should get general settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = {processTaskSid, op: &#x27;script_getgeneralsettings&#x27;, tasktype};\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.eq(200);\nconst data = mockRes.body?.Data;\nexpect(data).to.exist;\nexpect(data.ProcessSID).to.eq(childProcessSid);\nexcelBatchTaskSettings.forEach(setting =&gt; {\n  expect(data[setting.attributeKey]).to.eq(setting.attributeValue);\n})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fccd1ede-7539-4a00-942b-179563a48f83&quot;,&quot;parentUUID&quot;:&quot;7a2f86a4-77c3-4b58-95fb-3cc9638e7b68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should save excel mappings&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Excel Batch Tests should save excel mappings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = {processTaskSid, op: &#x27;script_savemappings&#x27;, tasktype};\nmockReq.body = excelBatchTaskMappings;\nawait functions.saveConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.eq(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;25ba623a-1147-4db9-bc1d-6d4f69099fc4&quot;,&quot;parentUUID&quot;:&quot;7a2f86a4-77c3-4b58-95fb-3cc9638e7b68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should load excel mappings&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Excel Batch Tests should load excel mappings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = {processTaskSid, op: &#x27;script_loadexcelmappings&#x27;, tasktype};\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.eq(200);\nconst data = mockRes.body?.Data;\nexpect(data).to.exist;\nexpect(data.length).to.be.gt(0);\nexcelBatchTaskMappings.forEach((mapping, idx) =&gt; {\n  const coordinate = `${data[idx][3]}|${data[idx][4]}|${data[idx][5]}`;\n  expect(mapping[0]).to.eq(coordinate);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c0a71ea-36a0-47ff-b7ca-a3bf009462d1&quot;,&quot;parentUUID&quot;:&quot;7a2f86a4-77c3-4b58-95fb-3cc9638e7b68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should load excel sheets&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Excel Batch Tests should load excel sheets&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:41,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = {processTaskSid, op: &#x27;script_loadsheets&#x27;, tasktype};\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.eq(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe03860c-c6f4-4d8a-ae72-954a18a0eb93&quot;,&quot;parentUUID&quot;:&quot;7a2f86a4-77c3-4b58-95fb-3cc9638e7b68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6ebeed0c-09bf-47d6-9096-34e18c0b1a80&quot;,&quot;fccd1ede-7539-4a00-942b-179563a48f83&quot;,&quot;25ba623a-1147-4db9-bc1d-6d4f69099fc4&quot;,&quot;6c0a71ea-36a0-47ff-b7ca-a3bf009462d1&quot;,&quot;fe03860c-c6f4-4d8a-ae72-954a18a0eb93&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:213,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6ee970ae-1ec6-4389-ad6a-cf6882c86fe5&quot;,&quot;title&quot;:&quot;Task Dispatcher API Excel Import Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-task-dispatcher/test/integration/functions/excelImport.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/excelImport.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Task Dispatcher API Excel Import Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Excel Import Tests \&quot;before all\&quot; hook in \&quot;Task Dispatcher API Excel Import Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\n// upload sample excel file to temp folder\nconst testConfig = await config.getConfig();\ntenant = testConfig.test.tenantOne.tenantId;\nconst baseUrl = testConfig.portalUrl;\nconst token = await testLib.getAuthToken();\nconst res = await chai.request(baseUrl)\n  .post(`/api/files/temp/${tenant}/upload`)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n  .set(&#x27;integrify-env-token&#x27;, process.env.INTEGRIFY_ENV_TOKEN)\n  .attach(&#x27;files&#x27;, &#x27;./test/files/student_records.xlsx&#x27;, &#x27;student_records.xlsx&#x27;);\nattachmentSid = res.body[0].sid;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b09ce3a-edfe-4d12-86f8-252c33b327f7&quot;,&quot;parentUUID&quot;:&quot;6ee970ae-1ec6-4389-ad6a-cf6882c86fe5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;saves Excel Import config options&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Excel Import Tests saves Excel Import config options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:56,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid,\n                   op: \&quot;script_savesettings\&quot;,\n                   tasktype }\nmockReq.body = { AttachmentSID: attachmentSid,\n                 tenant: tenant,\n                 FormSID: formSid }\nconst result = await functions.saveConfig(mockReq, mockRes);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a528140a-6968-459b-bc76-9611639d80f3&quot;,&quot;parentUUID&quot;:&quot;6ee970ae-1ec6-4389-ad6a-cf6882c86fe5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;lists Excel Import rule options&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Excel Import Tests lists Excel Import rule options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;listRuleOptions\&quot;, tasktype }\nmockReq.query = { processSid }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result).to.eql([{ Value: \&quot;1483989525681\&quot;, Label: \&quot;First Name\&quot;, Type: \&quot;ShortText\&quot;}])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02c5d507-dfe4-4649-b0ac-ed4f55429992&quot;,&quot;parentUUID&quot;:&quot;6ee970ae-1ec6-4389-ad6a-cf6882c86fe5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;loads spreadsheet file info and form config&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Excel Import Tests loads spreadsheet file info and form config&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;script_loadconfig\&quot;, tasktype }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result.Data).to.eql({\n  SelectedForm: &#x27;Contact Profile Update Form&#x27;,\n  FormSID: formSid,\n  AttachmentName: &#x27;student_records.xlsx&#x27;,\n  AttachmentSID: attachmentSid });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4abe7804-871a-4136-be11-43351a630ab5&quot;,&quot;parentUUID&quot;:&quot;6ee970ae-1ec6-4389-ad6a-cf6882c86fe5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;loads mappings&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Excel Import Tests loads mappings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:57,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;script_loadpfexcelmappings\&quot;, tasktype }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nconst mappedField = result.Data[0];\nexpect(mappedField).to.eql({\n  Coordinates: &#x27;Sheet1|a1|a1&#x27;,\n  ordinal: 2,\n  &#x27;Question ID&#x27;: &#x27;1483989525681&#x27;,\n  QuestionLabel: &#x27;First Name&#x27;,\n  QuestionType: &#x27;ShortText&#x27;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3dffa04e-c1ef-40c7-aca1-4331681fb81b&quot;,&quot;parentUUID&quot;:&quot;6ee970ae-1ec6-4389-ad6a-cf6882c86fe5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a528140a-6968-459b-bc76-9611639d80f3&quot;,&quot;02c5d507-dfe4-4649-b0ac-ed4f55429992&quot;,&quot;4abe7804-871a-4136-be11-43351a630ab5&quot;,&quot;3dffa04e-c1ef-40c7-aca1-4331681fb81b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:142,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;74819623-caab-4fa6-b885-71e52b1ce462&quot;,&quot;title&quot;:&quot;Task Dispatcher API FTP Push Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-task-dispatcher/test/integration/functions/ftpPush.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/ftpPush.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets task file settings&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API FTP Push Tests gets task file settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;script_getfilesettings\&quot;, tasktype }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst data = mockRes.body.Data;\nexpect(data).to.include({PickDirectory: \&quot;No\&quot;});\nexpect(data).to.include({FileToFTP: \&quot;4a6c9613-bac9-4448-93c9-d9342bf5d897;96865aec-667c-4db5-8116-f1d1bae512ab\&quot;});\nexpect(data).to.include({FTPSite: \&quot;ftp\&quot;});\nexpect(data).to.include({FTPUsername: \&quot;ftp_user\&quot;});\nexpect(data).to.include({FTPPassword: \&quot;ftp_pass\&quot;});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b7fd85fd-e58c-4680-8f1a-7e9d7b8b3120&quot;,&quot;parentUUID&quot;:&quot;74819623-caab-4fa6-b885-71e52b1ce462&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets task file options&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API FTP Push Tests gets task file options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;script_getfileoptions\&quot;, tasktype }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nconst data = mockRes.body.Data[0];\nexpect(data).to.include(&#x27;4a6c9613-bac9-4448-93c9-d9342bf5d897;96865aec-667c-4db5-8116-f1d1bae512ab&#x27;);\nexpect(data).to.include(&#x27;Form : File Attachment:  (Task Output)&#x27;),\nexpect(data).to.include(&#x27;322ffece-654f-49e4-bb5c-4ae41768d5be&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b29cf2d-8a57-43e2-a1e9-25a5856a278c&quot;,&quot;parentUUID&quot;:&quot;74819623-caab-4fa6-b885-71e52b1ce462&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b7fd85fd-e58c-4680-8f1a-7e9d7b8b3120&quot;,&quot;2b29cf2d-8a57-43e2-a1e9-25a5856a278c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a79baf1a-07be-4102-84e7-22c442981502&quot;,&quot;title&quot;:&quot;Task Dispatcher API PDF Generator Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-task-dispatcher/test/integration/functions/pdfGenerator.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/pdfGenerator.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Task Dispatcher API PDF Generator Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Generator Tests \&quot;before each\&quot; hook in \&quot;Task Dispatcher API PDF Generator Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;mockReq = await mocks.req()\nmockRes = await mocks.mockResponse()\nawait uploadTestFile();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;83df093e-4179-4ba4-8252-e04c70e4d6ca&quot;,&quot;parentUUID&quot;:&quot;a79baf1a-07be-4102-84e7-22c442981502&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;Get GeneralSettings&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Generator Tests Get GeneralSettings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;mockReq.params = { processTaskSid, op: \&quot;script_getgeneralsettings\&quot;, tasktype }\n\nsetTimeout(async () =&gt; {\n  await functions.getConfig(mockReq, mockRes);\n  expect(mockRes.statusCode).to.equal(200);\n  const result = mockRes.body; \n  \n  expect(result.Data).to.exist;\n  expect(result.Data[0][0]).to.equal(&#x27;PDFTemplateSID&#x27;);\n  expect(result.Data[1][0]).to.equal(&#x27;PDFTemplate&#x27;);\n  expect(result.Data[2][0]).to.equal(&#x27;GeneratedFileName&#x27;);\n  expect(result.Data[3][0]).to.equal(&#x27;PDFSource&#x27;);\n  expect(result.Data[4][0]).to.equal(&#x27;PDFTask&#x27;);\n  \n  expect(result.Data[0][1]).to.equal(fileAttachment.sid); // PDF Form SID\n  expect(result.Data[1][1]).to.equal(fileAttachment.originalFilename); // PDF Form Name\n  expect(result.Data[2][1]).to.exist; // Generated File Name\n  expect(result.Data[3][1]).to.equal(&#x27;Template&#x27;); // Only Template is allowed atm\n  expect(result.Data[4][1]).to.be.null; // Only relevant when PDFSource is set to Task, which we&#x27;re not doing\n}, 100);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d98b5831-de8e-47c9-932a-fdbe76e4bf2f&quot;,&quot;parentUUID&quot;:&quot;a79baf1a-07be-4102-84e7-22c442981502&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get Loadparams (prefill mappings)&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Generator Tests Get Loadparams (prefill mappings)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;mockReq.params = { processTaskSid, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid }\nsetTimeout(async () =&gt; {\n  await functions.getConfig(mockReq, mockRes)\n  expect(mockRes.statusCode).to.equal(200)    \n  const result = mockRes.body.Data.Items\n  \n  expect(result).to.exist\n  expect(result.length).to.be.greaterThan(0); // we will always have a row for mapping &#x27;columnNames&#x27;\n  \n  expect(result[0][0]).to.equal(&#x27;ParameterName&#x27;);\n  expect(result[0][1]).to.equal(&#x27;PrefillType&#x27;);\n  expect(result[0][2]).to.equal(&#x27;PrefillField&#x27;);\n  expect(result[0][3]).to.equal(&#x27;Description&#x27;);\n  expect(result[0][4]).to.equal(&#x27;TaskSID&#x27;);\n}, 100);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4522cd63-1402-4a33-b5bf-808e6f99b041&quot;,&quot;parentUUID&quot;:&quot;a79baf1a-07be-4102-84e7-22c442981502&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Get PDF Fields&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Generator Tests Get PDF Fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;mockReq.params = { processTaskSid, op: \&quot;script_getpdffields\&quot;, tasktype }\nmockReq.query = { processSid }\nsetTimeout(async () =&gt; {\n  await functions.getConfig(mockReq, mockRes)\n  expect(mockRes.statusCode).to.equal(200)\n  const result = mockRes.body\n  expect(result.Data).to.exist;\n  expect(Array.isArray(result.Data)).to.equal(true);\n}, 100);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6979f8d-056e-4928-a26b-ae2f4fc685db&quot;,&quot;parentUUID&quot;:&quot;a79baf1a-07be-4102-84e7-22c442981502&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Save General Settings&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Generator Tests Save General Settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;mockReq.params = { processTaskSid, op: \&quot;script_postgeneralsettings\&quot;, tasktype }\nmockReq.query = { processSid }\nmockReq.body = {\n  \&quot;PDFTemplateSID\&quot;: fileAttachment.sid,\n  \&quot;PDFTask\&quot;:null,\n  \&quot;GeneratedFileName\&quot;:\&quot;{FILE_NAME}.pdf\&quot;,\n  \&quot;PDFSource\&quot;:\&quot;Template\&quot;,\n  \&quot;PDFTemplate\&quot;: fileAttachment.originalFilename\n}\nsetTimeout(async () =&gt; {\n  await functions.getConfig(mockReq, mockRes);\n  expect(mockRes.statusCode).to.equal(200);\n  const result = mockRes.body;\n  expect(result).to.equal(true);\n}, 100);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c46f46c-5952-420f-8c2f-8925e5dd0d53&quot;,&quot;parentUUID&quot;:&quot;a79baf1a-07be-4102-84e7-22c442981502&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;Save Mappings&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Generator Tests Save Mappings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;mockReq.params = { processTaskSid, op: \&quot;script_postloadparams\&quot;, tasktype }\nmockReq.query = { processSid }\nmockReq.body = [\n  [\&quot;ParameterName\&quot;,\&quot;PrefillType\&quot;,\&quot;PrefillField\&quot;,\&quot;Description\&quot;,\&quot;TaskSID\&quot;],\n  [\&quot;Name\&quot;,\&quot;Task_Input\&quot;,\&quot;1624564861260\&quot;,\&quot;Data - Form - Name\&quot;,\&quot;53819ebc-05f2-475d-909b-7bf9ceb4de28\&quot;]\n];\nsetTimeout(async () =&gt; {\n  await functions.getConfig(mockReq, mockRes);\n  expect(mockRes.statusCode).to.equal(200);\n  const result = mockRes.body;\n  expect(result).to.equal(true);\n}, 100);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c34cfcd-d9d1-4a6b-bd30-113184ef6e8b&quot;,&quot;parentUUID&quot;:&quot;a79baf1a-07be-4102-84e7-22c442981502&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d98b5831-de8e-47c9-932a-fdbe76e4bf2f&quot;,&quot;4522cd63-1402-4a33-b5bf-808e6f99b041&quot;,&quot;c6979f8d-056e-4928-a26b-ae2f4fc685db&quot;,&quot;1c46f46c-5952-420f-8c2f-8925e5dd0d53&quot;,&quot;6c34cfcd-d9d1-4a6b-bd30-113184ef6e8b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a28f1e40-2944-4821-81f4-7a12861275b9&quot;,&quot;title&quot;:&quot;Task Dispatcher API PDF Merge Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-task-dispatcher/test/integration/functions/pdfMerge.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/pdfMerge.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets task settings&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets task settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;script_gettasksettings\&quot;, tasktype }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\n// vue output\n// expect(result.length).to.be.greaterThan(1);\n// expect(result[0].attributeKey).to.exist;\n// expect(result[0].attributeValue).to.exist;\n// expect(result.find(x =&gt; x.attributeKey == &#x27;GeneratedFileName&#x27;)).to.exist\n// expect(result.find(x =&gt; x.attributeKey == &#x27;FirstPDF&#x27;)).to.exist\n// angular output\nexpect(result.Data.GeneratedFileName).to.exist;\nexpect(result.Data.FirstPDF).to.exist;\nexpect(result.Data.SecondPDF).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;186fc259-ce25-486b-b8e5-1d22f5fb98db&quot;,&quot;parentUUID&quot;:&quot;a28f1e40-2944-4821-81f4-7a12861275b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets PDF options&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets PDF options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;script_getpdfoptions\&quot;, tasktype }\nmockReq.query = { processSid }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result.length).to.be.greaterThan(1);\n// vue output\n// expect(result[0].displayName).to.exist;\n// expect(result[0].processTaskGuid).to.exist;\n// expect(result[0].taskTypeGuid).to.exist;\n// angular output\nexpect(result[0].length).to.be.greaterThan(1);\nexpect(result[0][0]).to.equal(&#x27;ae9b4a71-5f37-4fe9-9926-a0901da0eb0e;52407ad7-bd98-4023-8d88-91ef4464cd98&#x27;);\nexpect(result[0][1]).to.equal(&#x27;second PDF Merge Form : File Attachment (Task Output)&#x27;);\nexpect(result[0][2]).to.equal(&#x27;322ffece-654f-49e4-bb5c-4ae41768d5be&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;988d22de-f331-4217-bd2e-a4ab39c1a582&quot;,&quot;parentUUID&quot;:&quot;a28f1e40-2944-4821-81f4-7a12861275b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;lists PDF rule options&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests lists PDF rule options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;listRuleOptions\&quot;, tasktype }\nmockReq.query = { processSid }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result).to.eql([{ Value: \&quot;GeneratedPDF\&quot;, Label: \&quot;Generated PDF\&quot;, Type: \&quot;FileAttachment\&quot;}])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a64d840e-875e-4f08-bfa0-bf0f06e355fa&quot;,&quot;parentUUID&quot;:&quot;a28f1e40-2944-4821-81f4-7a12861275b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets PDF fields&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets PDF fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid, op: \&quot;script_getpdffields\&quot;, tasktype }\nmockReq.query = { processSid }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\n// vue output\n// expect(result.length).to.equal(1)\n// expect(result[0]).to.equal(&#x27;FILE_NAME&#x27;)\n// angular output\nexpect(result.Data.length).to.equal(1)\nexpect(result.Data[0][0]).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result.Data[0][1]).to.equal(&#x27;FILE_NAME&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f691a6f6-eb7c-4f65-8061-275648188223&quot;,&quot;parentUUID&quot;:&quot;a28f1e40-2944-4821-81f4-7a12861275b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - data source - form mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - data source - form mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:55,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Task_Input&#x27;)\nexpect(result[0].PrefillField).to.equal(&#x27;1601919933647&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Data - second PDF Merge Form - Merged PDF Filename:&#x27;)\nexpect(result[0].TaskSID).to.equal(&#x27;ae9b4a71-5f37-4fe9-9926-a0901da0eb0e&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e1735a4-f7a0-4cbd-98d2-6228e4daf30d&quot;,&quot;parentUUID&quot;:&quot;a28f1e40-2944-4821-81f4-7a12861275b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - fixed value mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - fixed value mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:116,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processSid_fixedValue = &#x27;c2095ccf-896b-46a0-b5e9-8e5b7e288270&#x27; \nconst processTaskSid_fixedValue = &#x27;5f719bb1-11b8-43d9-a9fd-66e55306f4eb&#x27;\nconst mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid: processTaskSid_fixedValue, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid: processSid_fixedValue }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Fixed_Value&#x27;)\nexpect(result[0].PrefillField).to.equal(&#x27;fixValFileName&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Fixed Value - fixValFileName&#x27;)\nexpect(result[0].TaskSID).to.not.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f469811b-95f6-410f-974f-50feb60d7c34&quot;,&quot;parentUUID&quot;:&quot;a28f1e40-2944-4821-81f4-7a12861275b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - request id mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - request id mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processSid_requestId = &#x27;f9f94cfe-d4b3-4d89-9695-1b32c6cee55d&#x27; \nconst processTaskSid_requestId = &#x27;9b4f1444-7bd7-481a-8008-69a0490da139&#x27;\nconst mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid: processTaskSid_requestId, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid: processSid_requestId }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Request&#x27;)\nexpect(result[0].PrefillField).to.equal(&#x27;ID&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Request - ID&#x27;)\nexpect(result[0].TaskSID).to.not.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;715b4236-7791-4e2a-8b18-494341c3a58b&quot;,&quot;parentUUID&quot;:&quot;a28f1e40-2944-4821-81f4-7a12861275b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - client username mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - client username mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processSid_clientUsername = &#x27;d1a7c44e-1e6e-4cdf-9d39-deac08a8b5cc&#x27; \nconst processTaskSid_clientUsername = &#x27;a79cde56-9f3a-4be4-9824-dd634eddbff3&#x27;\nconst mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid: processTaskSid_clientUsername, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid: processSid_clientUsername }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Client&#x27;)\nexpect(result[0].PrefillField).to.equal(&#x27;UserName&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Client - UserName&#x27;)\nexpect(result[0].TaskSID).to.not.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6af74321-8fa5-48af-bda8-97d6f4d5b678&quot;,&quot;parentUUID&quot;:&quot;a28f1e40-2944-4821-81f4-7a12861275b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - status pdfmerge mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - status pdfmerge mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processSid_statusPdfMerge = &#x27;ab3a8404-c208-4ca7-8ae6-637b16c23368&#x27; \nconst processTaskSid_statusPdfMerge = &#x27;7f4f1f42-228c-46dc-90a3-77fe15fe7412&#x27;\nconst mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid: processTaskSid_statusPdfMerge, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid: processSid_statusPdfMerge }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Task_State&#x27;)\n// expect(result[0].PrefillField).to.equal(&#x27;UserName&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Status - PDF Merge - &#x27;)\nexpect(result[0].TaskSID).to.equal(&#x27;7f4f1f42-228c-46dc-90a3-77fe15fe7412&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9bb6cec0-d168-41bc-abf5-ddaf1f6cb94f&quot;,&quot;parentUUID&quot;:&quot;a28f1e40-2944-4821-81f4-7a12861275b9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;186fc259-ce25-486b-b8e5-1d22f5fb98db&quot;,&quot;988d22de-f331-4217-bd2e-a4ab39c1a582&quot;,&quot;a64d840e-875e-4f08-bfa0-bf0f06e355fa&quot;,&quot;f691a6f6-eb7c-4f65-8061-275648188223&quot;,&quot;6e1735a4-f7a0-4cbd-98d2-6228e4daf30d&quot;,&quot;f469811b-95f6-410f-974f-50feb60d7c34&quot;,&quot;715b4236-7791-4e2a-8b18-494341c3a58b&quot;,&quot;6af74321-8fa5-48af-bda8-97d6f4d5b678&quot;,&quot;9bb6cec0-d168-41bc-abf5-ddaf1f6cb94f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:234,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;32a6383e-5a2d-4ee0-b64c-2cf56dff0e8b&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ac8a58aa-ef51-4c97-8bf6-af0f511a35be&quot;,&quot;title&quot;:&quot;Tenant API Sessions Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/activeSessions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/activeSessions.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Sessions Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000); \ntestConfig = await testLib.getTestConfig();\n    \ntenant = testConfig.tenantOne.tenantId;\ngroup = \&quot;sessionServiceGroup\&quot;\ntestEventType = &#x27;extendSession&#x27;\nfullStreamName = tenant + &#x27;.stream.&#x27; + testStreamName\neventProcessedName = fullStreamName + \&quot;.\&quot; + group + \&quot;.processed\&quot;;\neventHistoryName = fullStreamName + \&quot;.history\&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10081681-f1e6-40c2-b018-06dc8d8dd809&quot;,&quot;parentUUID&quot;:&quot;ac8a58aa-ef51-4c97-8bf6-af0f511a35be&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Sessions Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14976188-95ca-43c3-aa53-e4dfad7bcd8d&quot;,&quot;parentUUID&quot;:&quot;ac8a58aa-ef51-4c97-8bf6-af0f511a35be&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;63c30731-07d8-4b44-a4a3-2832d789325c&quot;,&quot;title&quot;:&quot;Active Sessions&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/activeSessions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/activeSessions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;22f859b4-aa43-4596-92d7-91273df8c360&quot;,&quot;title&quot;:&quot;count active sessions&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/activeSessions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/activeSessions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return activeSessions&quot;,&quot;fullTitle&quot;:&quot;Tenant API Sessions Tests Active Sessions count active sessions should return activeSessions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let sessions  = await getActiveSessions(tenant);\n//console.log(sessions)\nexpect(sessions).to.exist;\nexpect(sessions).to.have.property(\&quot;activeSessions\&quot;)\nexpect(sessions).to.have.property(\&quot;activeUsers\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fc8a2ad-2931-4512-bb43-f770b046379c&quot;,&quot;parentUUID&quot;:&quot;22f859b4-aa43-4596-92d7-91273df8c360&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8fc8a2ad-2931-4512-bb43-f770b046379c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f5af2941-a2e0-4164-85e8-2e3805cabc85&quot;,&quot;title&quot;:&quot;Tenant API licsense stats&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/licenseStats.test.js&quot;,&quot;file&quot;:&quot;/test/integration/licenseStats.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API licsense stats \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3003,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000); \nconfig = await testLib.getTestConfig();\nlet sp = new stream.StreamPublisher(&#x27;sessions&#x27;,config.tenantOne.tenantId);\nawait sp.sendEvent(\&quot;extendSession\&quot;, {\n    token: \&quot;abcd234\&quot;,\n    user: {\n        sid:\&quot;11111\&quot;, \n        user_name: \&quot;iapprove\&quot;, \n        email: \&quot;iapprove@integrify.com\&quot;, \n        name: \&quot;System System\&quot;\n    }\n})\n    \nawait delay(3000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c97b1e2-2add-4002-88df-f20ac83233bc&quot;,&quot;parentUUID&quot;:&quot;f5af2941-a2e0-4164-85e8-2e3805cabc85&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API licsense stats \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7fa89bb4-9c29-4a01-9120-8340ee837425&quot;,&quot;parentUUID&quot;:&quot;f5af2941-a2e0-4164-85e8-2e3805cabc85&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d0065262-0531-4d69-82ec-1f6ed321911d&quot;,&quot;title&quot;:&quot;Post all stats&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/licenseStats.test.js&quot;,&quot;file&quot;:&quot;/test/integration/licenseStats.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return ok&quot;,&quot;fullTitle&quot;:&quot;Tenant API licsense stats Post all stats should return ok&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:564,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let result = await postAllStats();\nexpect(result).to.eq(\&quot;ok\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;643db43e-41c1-4a1c-8373-5af0ca2e9cd5&quot;,&quot;parentUUID&quot;:&quot;d0065262-0531-4d69-82ec-1f6ed321911d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;643db43e-41c1-4a1c-8373-5af0ca2e9cd5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:564,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c53e274f-4403-41f8-b200-77b770d385ec&quot;,&quot;title&quot;:&quot;Tenant API Stream-Manager Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f73ef545-f495-4db1-907b-d02b5a0d100e&quot;,&quot;title&quot;:&quot;listTenantStreams&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of the streams for a tenant&quot;,&quot;fullTitle&quot;:&quot;Tenant API Stream-Manager Tests listTenantStreams should return a list of the streams for a tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req();\n\t\t\tlet results = await streamMonitor.listTenantStreams(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst apps = mockRes.body;\n\t\t\tstreamName = apps[0]\n\t\t\texpect(apps).to.be.array()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39136cd4-4440-4cec-8bf0-fede2d224bd6&quot;,&quot;parentUUID&quot;:&quot;f73ef545-f495-4db1-907b-d02b5a0d100e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;39136cd4-4440-4cec-8bf0-fede2d224bd6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b39e088b-5aa0-4fb5-ade8-60bef426329c&quot;,&quot;title&quot;:&quot;streamInfoReqHandler&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return info for the stream&quot;,&quot;fullTitle&quot;:&quot;Tenant API Stream-Manager Tests streamInfoReqHandler should return info for the stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req();\n\t\t\treq.params.streamName = req.params.tenant + &#x27;.stream.&#x27; + testStreamName\n\t\t\tlet results = await streamMonitor.streamInfoReqHandler(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst info = mockRes.body;\n\t\t\texpect(info).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;239b30f7-4203-4d6e-a1d2-896bfd83b6fe&quot;,&quot;parentUUID&quot;:&quot;b39e088b-5aa0-4fb5-ade8-60bef426329c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;239b30f7-4203-4d6e-a1d2-896bfd83b6fe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0301c5c4-28a8-4e25-9cfb-243b0adc8ca2&quot;,&quot;title&quot;:&quot;getGroupInfo&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return group info for the stream&quot;,&quot;fullTitle&quot;:&quot;Tenant API Stream-Manager Tests getGroupInfo should return group info for the stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req();\n\t\t\treq.params.streamName = req.params.tenant + &#x27;.stream.&#x27; + testStreamName\n\t\t\tlet results = await streamMonitor.getGroupInfo(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst info = mockRes.body;\n\t\t\texpect(info).to.be.array()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;247b4bb4-5aaa-49b2-93f1-1e7d156dae19&quot;,&quot;parentUUID&quot;:&quot;0301c5c4-28a8-4e25-9cfb-243b0adc8ca2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;247b4bb4-5aaa-49b2-93f1-1e7d156dae19&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;aa2e52f7-44b4-43e5-adfb-f2c8fa306213&quot;,&quot;title&quot;:&quot;getConsumerInfo&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return consumer info for the group&quot;,&quot;fullTitle&quot;:&quot;Tenant API Stream-Manager Tests getConsumerInfo should return consumer info for the group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req();\n\t\t\treq.params.streamName = req.params.tenant + &#x27;.stream.&#x27; + testStreamName\n\t\t\treq.params.groupName = \&quot;sessionServiceGroup\&quot; \n\t\t\tlet results = await streamMonitor.getConsumerInfo(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst info = mockRes.body;\n\t\t\texpect(info).to.be.array()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d273a37-2d56-4b0a-9b71-bcda18421573&quot;,&quot;parentUUID&quot;:&quot;aa2e52f7-44b4-43e5-adfb-f2c8fa306213&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3d273a37-2d56-4b0a-9b71-bcda18421573&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a7ff3568-671e-4782-9772-30ceb92d412e&quot;,&quot;title&quot;:&quot;Tenant API License, Apps and Settings Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;01b2dbbb-c337-4b75-9fa0-5a8168986c2b&quot;,&quot;title&quot;:&quot;getTenantLicense&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a license for a tenant&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantLicense should return a license for a tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req()\n\t\t\tlet results = await getTenantLicense(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst licenseInfo = mockRes.body;\n\t\t\texpect(licenseInfo.instanceId).equal(req.oauth.tenant);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1b0d1d1d-8584-4429-9062-5e861a8ee620&quot;,&quot;parentUUID&quot;:&quot;01b2dbbb-c337-4b75-9fa0-5a8168986c2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1b0d1d1d-8584-4429-9062-5e861a8ee620&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a27423ef-5a52-43b8-b6bf-5e32e5b58642&quot;,&quot;title&quot;:&quot;getTenantApps&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return apps for a tenant&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantApps should return apps for a tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await  mocks.req()\n\t\t\tlet results = await getTenantApps(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst apps = mockRes.body;\n\t\t\texpect(apps).to.be.array()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b5f99ea-3fe1-4a55-9096-71b8bc2933d7&quot;,&quot;parentUUID&quot;:&quot;a27423ef-5a52-43b8-b6bf-5e32e5b58642&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0b5f99ea-3fe1-4a55-9096-71b8bc2933d7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;dfac1953-b154-4703-bca8-911ebd061f4a&quot;,&quot;title&quot;:&quot;getTenantLicenseLocation&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return license location for a tenant&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantLicenseLocation should return license location for a tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await  mocks.req()\n\t\t\tlet results = await getTenantLicenseLocation(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst licenseLocation = mockRes.body;\n      expect(licenseLocation).to.satisfy(function(val) { return val === &#x27;onpremise&#x27; || val.toLowerCase().includes(&#x27;cloud&#x27;); });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e57b00da-bc55-4cdd-a4a7-f37f6840ce7b&quot;,&quot;parentUUID&quot;:&quot;dfac1953-b154-4703-bca8-911ebd061f4a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e57b00da-bc55-4cdd-a4a7-f37f6840ce7b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;21ca8245-dba5-403e-bce1-3f5ec72a68d8&quot;,&quot;title&quot;:&quot;getTenantLoginSettings&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should login settings for a tenant based on a tenant id&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantLoginSettings should login settings for a tenant based on a tenant id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await  mocks.req()\n\t\t\treq.query = {tenant: req.config.tenantOne.tenantId}\n\t\t\tlet results = await getTenantLoginSettings(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst settings = mockRes.body;\n\t\t\texpect(settings.ID).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95b31411-8be0-4dca-92bd-493ec1894a0f&quot;,&quot;parentUUID&quot;:&quot;21ca8245-dba5-403e-bce1-3f5ec72a68d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should login settings for a tenant based on a host header&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantLoginSettings should login settings for a tenant based on a host header&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await  mocks.req()\n\t\t\treq.query = {hostHeader: req.config.tenantOne.hostHeader}\n\t\t\tlet results = await getTenantLoginSettings(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst settings = mockRes.body;\n\t\t\texpect(settings.ID).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af5c1e98-f473-424f-98af-5e7d38fae20e&quot;,&quot;parentUUID&quot;:&quot;21ca8245-dba5-403e-bce1-3f5ec72a68d8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;95b31411-8be0-4dca-92bd-493ec1894a0f&quot;,&quot;af5c1e98-f473-424f-98af-5e7d38fae20e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a9db9bb5-b0f6-4303-9630-c3e9ea27eff4&quot;,&quot;title&quot;:&quot;Tenant API Translation controller tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/translation.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd722724-2936-429d-9f6e-acf9166e5c2d&quot;,&quot;parentUUID&quot;:&quot;a9db9bb5-b0f6-4303-9630-c3e9ea27eff4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await translationController.deleteLanguages(tenant, {languageName: &#x27;test&#x27;});\ndeleted = await translationController.deleteLabels(tenant, {defaultText: &#x27;label from test&#x27;});\nconsole.log(deleted);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;70739909-1e75-4245-83f2-826183b96d01&quot;,&quot;parentUUID&quot;:&quot;a9db9bb5-b0f6-4303-9630-c3e9ea27eff4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5e2bc499-5407-4458-b6e1-2bf53cd39a49&quot;,&quot;title&quot;:&quot;language crud &quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/translation.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests language crud  should create a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:41,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  language = await translationController.createLanguage(tenant, languageObj);\n_id = language._id.toString();\nexpect(_id).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4e86bdf2-aa6b-4142-9ee5-1d13763460d3&quot;,&quot;parentUUID&quot;:&quot;5e2bc499-5407-4458-b6e1-2bf53cd39a49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list languages&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests language crud  should list languages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  languages = await translationController.listLanguages(tenant);\n         console.log(JSON.stringify(languages));\n         expect(languages.length).to.be.gt(0);  \n         let createdLanguage  = languages.find((d) =&gt; {\n             return d._id.toString() === _id;\n         })\n         expect(createdLanguage).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef0483dd-6936-465f-adaa-141157856665&quot;,&quot;parentUUID&quot;:&quot;5e2bc499-5407-4458-b6e1-2bf53cd39a49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests language crud  should get a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;language = await translationController.getLanguage(tenant,_id);\n            expect(language).to.exist         \n            expect(language._id.toString()).to.equal(_id)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d6bce7d-a1a3-4e7e-ab4b-dc874b8b8c87&quot;,&quot;parentUUID&quot;:&quot;5e2bc499-5407-4458-b6e1-2bf53cd39a49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests language crud  should update a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;language.translationCode = &#x27;test-updated&#x27;;\n            language.modifiedBy = IntegrifySystemContactSid;\n            const updatedLanguage = await translationController.updateLanguage(tenant,language.toObject());\n            expect(updatedLanguage).to.exist         \n            expect(updatedLanguage._id.toString()).to.equal(_id)\n            expect(updatedLanguage.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;618049f9-b10b-4728-9a7c-34ee08fbfe81&quot;,&quot;parentUUID&quot;:&quot;5e2bc499-5407-4458-b6e1-2bf53cd39a49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests language crud  delete a a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const deleted = await translationController.deleteLanguage(tenant,_id);\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6e5b0dae-6336-496d-abad-68c05acbbed6&quot;,&quot;parentUUID&quot;:&quot;5e2bc499-5407-4458-b6e1-2bf53cd39a49&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4e86bdf2-aa6b-4142-9ee5-1d13763460d3&quot;,&quot;ef0483dd-6936-465f-adaa-141157856665&quot;,&quot;9d6bce7d-a1a3-4e7e-ab4b-dc874b8b8c87&quot;,&quot;618049f9-b10b-4728-9a7c-34ee08fbfe81&quot;,&quot;6e5b0dae-6336-496d-abad-68c05acbbed6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:70,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;31c48f40-0119-4f78-b0f0-7d0d434b67ca&quot;,&quot;title&quot;:&quot;label crud &quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/translation.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  should create a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  label = await translationController.createLabel(tenant, labelObj);\n_id = label._id.toString();\nexpect(_id).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4a48b5c-3ce6-4df4-98cc-1c727c002b0a&quot;,&quot;parentUUID&quot;:&quot;31c48f40-0119-4f78-b0f0-7d0d434b67ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list labels&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  should list labels&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  labels = await translationController.listLabels(tenant);\n         expect(labels.length).to.be.gt(0);  \n         let createdLabel  = labels.find((d) =&gt; {\n             return d._id.toString() === _id;\n         })\n         expect(createdLabel).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36b72020-77d6-4f38-918b-65e11246413f&quot;,&quot;parentUUID&quot;:&quot;31c48f40-0119-4f78-b0f0-7d0d434b67ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  should get a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;label = await translationController.getLabel(tenant,_id);\n            expect(label).to.exist         \n            expect(label._id.toString()).to.equal(_id)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63f53069-ee02-479d-a566-eb2903ea18fe&quot;,&quot;parentUUID&quot;:&quot;31c48f40-0119-4f78-b0f0-7d0d434b67ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  should update a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;label.translatedText = &#x27;test-updated&#x27;;\n            label.modifiedBy = IntegrifySystemContactSid;\n            const updatedLabel = await translationController.updateLabel(tenant,label.toObject());\n            expect(updatedLabel).to.exist         \n            expect(updatedLabel._id.toString()).to.equal(_id)\n            expect(updatedLabel.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6459b3b5-5a95-42da-924f-40d6c2af91a2&quot;,&quot;parentUUID&quot;:&quot;31c48f40-0119-4f78-b0f0-7d0d434b67ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  delete a a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const deleted = await translationController.deleteLabel(tenant,_id);\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad2ad95c-c055-4aae-a45d-e3b617a7c2aa&quot;,&quot;parentUUID&quot;:&quot;31c48f40-0119-4f78-b0f0-7d0d434b67ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;save new labels from ui list&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  save new labels from ui list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let unsaved = [&#x27;label from test&#x27;]\nconst savedCount = await translationController.saveNewDefaultLabels(tenant, unsaved);\nexpect(savedCount).to.exist         \nexpect(savedCount).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;135dcc33-7c23-4c35-aebe-e96a451666c0&quot;,&quot;parentUUID&quot;:&quot;31c48f40-0119-4f78-b0f0-7d0d434b67ca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b4a48b5c-3ce6-4df4-98cc-1c727c002b0a&quot;,&quot;36b72020-77d6-4f38-918b-65e11246413f&quot;,&quot;63f53069-ee02-479d-a566-eb2903ea18fe&quot;,&quot;6459b3b5-5a95-42da-924f-40d6c2af91a2&quot;,&quot;ad2ad95c-c055-4aae-a45d-e3b617a7c2aa&quot;,&quot;135dcc33-7c23-4c35-aebe-e96a451666c0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d9d39a86-3756-4349-a7a0-5af4d6eb9555&quot;,&quot;title&quot;:&quot;seed functions &quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/translation.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should seed languages&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests seed functions  should seed languages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  seeded = await translationController.seedLanguages(true) //true for isTest;\n\nexpect(seeded).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4088771-c39b-4c6a-a542-733b42166b63&quot;,&quot;parentUUID&quot;:&quot;d9d39a86-3756-4349-a7a0-5af4d6eb9555&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should seed labels&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests seed functions  should seed labels&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  seeded = await translationController.seedLabels(true) //true for isTest;\n\nexpect(seeded).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19608431-4801-48af-924c-03b04a9fd079&quot;,&quot;parentUUID&quot;:&quot;d9d39a86-3756-4349-a7a0-5af4d6eb9555&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a4088771-c39b-4c6a-a542-733b42166b63&quot;,&quot;19608431-4801-48af-924c-03b04a9fd079&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;34fd5514-9f98-4650-a3ca-21c9ccd4023f&quot;,&quot;title&quot;:&quot;Tenant API Translation handler tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/translation.handler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.handler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1edf893-b68b-49b0-8381-476d8c629139&quot;,&quot;parentUUID&quot;:&quot;34fd5514-9f98-4650-a3ca-21c9ccd4023f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await translationController.deleteLanguages(tenant, {languageName: &#x27;test&#x27;});\ndeleted = await translationController.deleteLabels(tenant, {defaultText: &#x27;label from test&#x27;});\nconsole.log(deleted);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19a94540-eb76-4fae-84a0-609f270fcbf0&quot;,&quot;parentUUID&quot;:&quot;34fd5514-9f98-4650-a3ca-21c9ccd4023f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8a40695e-fb9f-4e73-8413-cdcf02192a0f&quot;,&quot;title&quot;:&quot;language crud &quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/translation.handler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.handler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  should create a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = languageObj;\nawait translationHandler.createLanguage(req, mockRes);\nlanguage = mockRes.body;\n_id = language._id.toString();\nexpect(_id).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d39b2b7-0ac0-49c1-811d-8cbc155ef64b&quot;,&quot;parentUUID&quot;:&quot;8a40695e-fb9f-4e73-8413-cdcf02192a0f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list languages&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  should list languages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n         const req = await mocks.req();\n         await translationHandler.listLanguages(req,mockRes);\n         const  languages = mockRes.body;\n         expect(languages.length).to.be.gt(0);  \n         let createdLanguage  = languages.find((d) =&gt; {\n             return d._id.toString() === _id;\n         })\n         expect(createdLanguage).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8437a95-7613-4609-a46a-379d91640256&quot;,&quot;parentUUID&quot;:&quot;8a40695e-fb9f-4e73-8413-cdcf02192a0f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list tenant languages&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  should list tenant languages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n         const req = await mocks.req();\n         req.params.tenant = tenant\n         await translationHandler.listTenantLanguages(req,mockRes);\n         const  languages = mockRes.body;\n         expect(languages.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ce68f18-65dc-4322-967f-ee23d35168a3&quot;,&quot;parentUUID&quot;:&quot;8a40695e-fb9f-4e73-8413-cdcf02192a0f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  should get a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            const req = await mocks.req();\n            req.params.id = _id;\n            await translationHandler.getLanguage(req,mockRes);\n            language = mockRes.body;\n            expect(language).to.exist         \n            expect(language._id.toString()).to.equal(_id)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;acbc7c3e-41d9-406b-88ee-5eaf2a4c7079&quot;,&quot;parentUUID&quot;:&quot;8a40695e-fb9f-4e73-8413-cdcf02192a0f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  should update a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = language;\nawait translationHandler.updateLanguage(req, mockRes);\nconst updatedLanguage = mockRes.body;\nexpect(updatedLanguage).to.exist         \nexpect(updatedLanguage._id.toString()).to.equal(_id)\nexpect(updatedLanguage.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2afe2bca-1a69-41b3-8ee9-d06fe320ed97&quot;,&quot;parentUUID&quot;:&quot;8a40695e-fb9f-4e73-8413-cdcf02192a0f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  delete a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.id = _id;\nawait translationHandler.deleteLanguage(req,mockRes);\nconst  deleted = mockRes.body;\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;50a0d963-9cc2-4835-b25a-6cc8e1ff291a&quot;,&quot;parentUUID&quot;:&quot;8a40695e-fb9f-4e73-8413-cdcf02192a0f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2d39b2b7-0ac0-49c1-811d-8cbc155ef64b&quot;,&quot;b8437a95-7613-4609-a46a-379d91640256&quot;,&quot;7ce68f18-65dc-4322-967f-ee23d35168a3&quot;,&quot;acbc7c3e-41d9-406b-88ee-5eaf2a4c7079&quot;,&quot;2afe2bca-1a69-41b3-8ee9-d06fe320ed97&quot;,&quot;50a0d963-9cc2-4835-b25a-6cc8e1ff291a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e680b7c9-0bd2-4021-8deb-eefd57be3277&quot;,&quot;title&quot;:&quot;label crud &quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-tenant/test/integration/translation.handler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.handler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  should create a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = labelObj;\nawait translationHandler.createLabel(req, mockRes);\nlabel = mockRes.body;\n_id = label._id.toString();\nexpect(_id).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04fee8d7-38d7-4373-aaac-f1a69d6b07cc&quot;,&quot;parentUUID&quot;:&quot;e680b7c9-0bd2-4021-8deb-eefd57be3277&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list labels&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  should list labels&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n         const req = await mocks.req();\n         req.query.tenant = tenant\n         await translationHandler.listLabels(req,mockRes);\n         const  labels = mockRes.body;\n         expect(labels.length).to.be.gt(0);  \n         let createdLabel  = labels.find((d) =&gt; {\n             return d._id.toString() === _id;\n         })\n         expect(createdLabel).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc193455-b328-49c5-99af-7ca750ecde1c&quot;,&quot;parentUUID&quot;:&quot;e680b7c9-0bd2-4021-8deb-eefd57be3277&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  should get a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            const req = await mocks.req();\n            req.params.id = _id;\n            await translationHandler.getLabel(req,mockRes);\n            label = mockRes.body;\n            expect(label).to.exist         \n            expect(label._id.toString()).to.equal(_id)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ae56f63-4fe2-492d-b23a-a03a966a1d81&quot;,&quot;parentUUID&quot;:&quot;e680b7c9-0bd2-4021-8deb-eefd57be3277&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  should update a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;label.translatedText = &#x27;test-updated&#x27;;\nlabel.modifiedBy = IntegrifySystemContactSid;\nconst mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = label;\nawait translationHandler.updateLabel(req, mockRes);\nconst updatedLabel = mockRes.body;   \nexpect(updatedLabel).to.exist         \nexpect(updatedLabel._id.toString()).to.equal(_id)\nexpect(updatedLabel.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;825d2f1e-21aa-40ec-8b11-538aaef32704&quot;,&quot;parentUUID&quot;:&quot;e680b7c9-0bd2-4021-8deb-eefd57be3277&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete aa label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  delete aa label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.id = _id;\nawait translationHandler.deleteLabel(req,mockRes);\nconst  deleted = mockRes.body;\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8e4636a-c0b6-4186-9f2b-114d955bebd7&quot;,&quot;parentUUID&quot;:&quot;e680b7c9-0bd2-4021-8deb-eefd57be3277&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete labels&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  delete labels&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let results = await translationController.listLabels(tenant,{_id})\n            let labelIds= results.map((i) =&gt; {\n                return i._id;\n            })\n\t\t\tconst mockRes = await mocks.mockResponse();\n            let req = await mocks.req()\n            req.body = labelIds;\n            await translationHandler.deleteLabels(req,mockRes);\n\t\t\tconst  deleted = mockRes.body;\n            expect(deleted).to.exist         \n            expect(deleted.deletedCount).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;edf7858b-bc8a-4836-b365-dda054c5e957&quot;,&quot;parentUUID&quot;:&quot;e680b7c9-0bd2-4021-8deb-eefd57be3277&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;save new labels from ui list&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  save new labels from ui list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let unsaved = [&#x27;label from test&#x27;]\nconst mockRes = await mocks.mockResponse();\nlet req = await mocks.req()\nreq.body = unsaved;\nawait translationHandler.saveNewDefaultLabels(req,mockRes);\nconst result = mockRes.body;\nexpect(result).to.exist         \nexpect(result.saved).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ac1c521-cf89-4091-ac96-d699a30ca863&quot;,&quot;parentUUID&quot;:&quot;e680b7c9-0bd2-4021-8deb-eefd57be3277&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;04fee8d7-38d7-4373-aaac-f1a69d6b07cc&quot;,&quot;cc193455-b328-49c5-99af-7ca750ecde1c&quot;,&quot;6ae56f63-4fe2-492d-b23a-a03a966a1d81&quot;,&quot;825d2f1e-21aa-40ec-8b11-538aaef32704&quot;,&quot;b8e4636a-c0b6-4186-9f2b-114d955bebd7&quot;,&quot;edf7858b-bc8a-4836-b365-dda054c5e957&quot;,&quot;0ac1c521-cf89-4091-ac96-d699a30ca863&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fc4dc902-7f5c-4e50-a5ef-175079614b65&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f224d5b5-cdc5-426c-90c6-a88dbce0fcf9&quot;,&quot;title&quot;:&quot;api-user Group Handler Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-user/test/groupHandler.test.js&quot;,&quot;file&quot;:&quot;/test/groupHandler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:346,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;testConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;\nconst userCtl = new UserController({tenantId: tenant})\nrestrictedUser = await userCtl.insertUser({firstName: &#x27;groups test&#x27;,\n                                           lastName: &#x27;groups test&#x27;,\n                                           userName: &#x27;restricted user for groups permission test&#x27;,\n                                           password: &#x27;password&#x27;})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe6f3dc1-647c-4f53-82e6-8ebcada824a7&quot;,&quot;parentUUID&quot;:&quot;f224d5b5-cdc5-426c-90c6-a88dbce0fcf9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:42,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const User = await models.getModel(tenant, &#x27;User&#x27;);\nawait User.query().hardDelete(restrictedUser)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;388c0834-bf54-4840-8c30-0bd757973dc7&quot;,&quot;parentUUID&quot;:&quot;f224d5b5-cdc5-426c-90c6-a88dbce0fcf9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;19f6db3a-0e30-4b5f-806c-d62647b1945a&quot;,&quot;title&quot;:&quot;crud tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-user/test/groupHandler.test.js&quot;,&quot;file&quot;:&quot;/test/groupHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests crud tests should create a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;api-user group test&#x27;\nconst mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = { groupName: groupName,\n             groupDesc: &#x27;api-user group test description&#x27; }\nconst response = await handlers.addGroup(req,mockRes);\nconst group = response.body\nexpect(response.statusCode).to.equal(200)\nexpect(group.groupGuid).to.match(/([-\\w]+)/)\nexpect(group.groupName).to.equal(groupName);\n// cleanup\nreq.body = [group.groupGuid]\nconst foo = await handlers.deleteGroups(req, mockRes)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f9e6998-d17c-4cf3-955f-9fdae73eb363&quot;,&quot;parentUUID&quot;:&quot;19f6db3a-0e30-4b5f-806c-d62647b1945a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1f9e6998-d17c-4cf3-955f-9fdae73eb363&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:32,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;263569f9-e77a-4123-b9ae-af49cb0a4ac2&quot;,&quot;title&quot;:&quot;permission tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-user/test/groupHandler.test.js&quot;,&quot;file&quot;:&quot;/test/groupHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;admin should have manage/edit permissions per group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests permission tests admin should have manage/edit permissions per group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.oauth.user_sid = testConfig.tenantOne.adminUser.sid;\nconst response = await handlers.getGroups(req,mockRes);\nconst groups = response.body.results;\ngroups.forEach( group =&gt; {\n  expect(group.canManage).to.equal(true);\n  expect(group.canEdit).to.equal(true);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4fa0f3d-612d-4668-9349-dbdae9d477e5&quot;,&quot;parentUUID&quot;:&quot;263569f9-e77a-4123-b9ae-af49cb0a4ac2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not have permission to create a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests permission tests should not have permission to create a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;api-user group test&#x27;\nconst mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.oauth.user_sid = restrictedUser.contactGuid;\nreq.body = { groupName: groupName,\n             groupDesc: &#x27;api-user group test description&#x27; }\nconst response = await handlers.addGroup(req,mockRes);\nexpect(response.statusCode).to.equal(403)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;034cb802-ece5-48a4-b143-db599f3dcd2c&quot;,&quot;parentUUID&quot;:&quot;263569f9-e77a-4123-b9ae-af49cb0a4ac2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not have permission to list groups members&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests permission tests should not have permission to list groups members&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupCtl = new GroupController({tenantId: tenant})\nconst group = groupCtl.getGroups({count: 1})\nconst mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.oauth.user_sid = restrictedUser.contactGuid\nreq.params.groupGuid = group.groupGuid\nconst response = await handlers.getGroups(req,mockRes);\nexpect(response.statusCode).to.equal(403)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c99f96fc-ca7b-4c9f-aa71-90613115e078&quot;,&quot;parentUUID&quot;:&quot;263569f9-e77a-4123-b9ae-af49cb0a4ac2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not have permission to delete a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests permission tests should not have permission to delete a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupCtl = new GroupController({tenantId: tenant})\nconst group = groupCtl.getGroups({count: 1})\nconst mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.oauth.user_sid = restrictedUser.contactGuid\nreq.params.body = [ group.groupGuid ]\nconst response = await handlers.deleteGroups(req,mockRes);\nexpect(response.statusCode).to.equal(403)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cc8aadb9-3918-474c-b3a2-a0c89eaeb9f4&quot;,&quot;parentUUID&quot;:&quot;263569f9-e77a-4123-b9ae-af49cb0a4ac2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f4fa0f3d-612d-4668-9349-dbdae9d477e5&quot;,&quot;034cb802-ece5-48a4-b143-db599f3dcd2c&quot;,&quot;c99f96fc-ca7b-4c9f-aa71-90613115e078&quot;,&quot;cc8aadb9-3918-474c-b3a2-a0c89eaeb9f4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:42,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;8ca3a28d-25f3-4221-a7b9-f5d7d66e395c&quot;,&quot;title&quot;:&quot;api-user User Handler Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-user/test/userHandler.test.js&quot;,&quot;file&quot;:&quot;/test/userHandler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;testConfig = await mocks.getTestConfig();\ntenantId = testConfig.tenantOne.tenantId;\nsession = {tenant: tenantId, user_sid: testConfig.tenantOne.adminUser.sid.toLowerCase()};\nUser = await models.getModel(tenantId, &#x27;User&#x27;);\nUserAuth = await models.getModel(tenantId, &#x27;UserAuth&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b3e59a02-7043-4dc9-90e1-505c0c699210&quot;,&quot;parentUUID&quot;:&quot;8ca3a28d-25f3-4221-a7b9-f5d7d66e395c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;req = await mocks.req();\nmockRes = await mocks.mockResponse();\ntestUser = (await User.query().limit(1))[0];\ntestUser.userName  = (await UserAuth.query().select(&#x27;userName&#x27;).where(&#x27;contactGuid&#x27;, testUser.contactGuid))[0].userName;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca33cdd2-4209-4bf9-9f27-751748b45d23&quot;,&quot;parentUUID&quot;:&quot;8ca3a28d-25f3-4221-a7b9-f5d7d66e395c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:30,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await UserAuth.query().delete().where(&#x27;userName&#x27;, &#x27;like&#x27;, &#x27;user_to_delete%&#x27;);\nawait User.query().delete().where(&#x27;firstName&#x27;, &#x27;like&#x27;, &#x27;user_to_delete%&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;566b4d30-fdd8-41e5-ba44-79becb2693e7&quot;,&quot;parentUUID&quot;:&quot;8ca3a28d-25f3-4221-a7b9-f5d7d66e395c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a list of users&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should get a list of users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const response = await handlers.getUsers(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body).to.exist;\nexpect(response.body.results).to.exist;\nexpect(response.body.results.length).to.be.gt(0);\nexpect(response.body.total).to.exist;\nexpect(response.body.total).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c854f9fb-c028-467d-8694-accdb5ce6f04&quot;,&quot;parentUUID&quot;:&quot;8ca3a28d-25f3-4221-a7b9-f5d7d66e395c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a list of managers&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should return a list of managers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const response = await handlers.getManagers(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body).to.exist;\nexpect(response.body.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb405638-168f-46fd-a507-c6bba42d5ebe&quot;,&quot;parentUUID&quot;:&quot;8ca3a28d-25f3-4221-a7b9-f5d7d66e395c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get single user&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should get single user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;req.params.userGuid = testUser.contactGuid;\nconst response = await handlers.getUser(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body).to.exist;\nexpect(response.body.contactGuid).to.exist;\nexpect(response.body.firstName).to.exist;\nexpect(response.body.delegate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86da24c9-c967-4193-8d5a-4cda25ee6712&quot;,&quot;parentUUID&quot;:&quot;8ca3a28d-25f3-4221-a7b9-f5d7d66e395c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should check if userName is taken&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should check if userName is taken&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;req.query.userName = testUser.userName;\nreq.query.userGuid = testUser.contactGuid;\nconst response = await handlers.checkIfUserNameIsTaken(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body).to.exist;\nexpect(response.body.isTaken).to.exist;\nexpect(response.body.isTaken).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c29982f-d882-43d7-9268-ddbbc3c1282d&quot;,&quot;parentUUID&quot;:&quot;8ca3a28d-25f3-4221-a7b9-f5d7d66e395c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not insert user without data&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should not insert user without data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const response = await handlers.insertUser(req, mockRes);\nexpect(response.statusCode).to.eq(400);\nexpect(response.body.firstName).to.exist;\nexpect(response.body.firstName).to.deep.eq([&#x27;The firstName field is required.&#x27;]);\nexpect(response.body.lastName).to.exist;\nexpect(response.body.password).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;191570d3-f5f7-4e74-a76b-f573d6ad3a7f&quot;,&quot;parentUUID&quot;:&quot;8ca3a28d-25f3-4221-a7b9-f5d7d66e395c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert user&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should insert user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:108,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;req.body = {\n  firstName: &#x27;user_to_delete&#x27;,\n  lastName: &#x27;lastName&#x27;,\n  userName: &#x27;user_to_delete&#x27; + Math.random().toString(36).substring(7), // random string\n  email: &#x27;random@test.com&#x27;,\n  locale: &#x27;en-US&#x27;,\n  timezone: &#x27;Pacific&#x27;,\n  languageGuid: testUser.languageGuid,\n  password: &#x27;randomPwd&#x27;,\n}\nconst response = await handlers.insertUser(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body).to.exist;\nexpect(response.body.contactGuid).to.exist;\nexpect(response.body.firstName).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b10cb0e6-f83c-47ad-904d-2c1192c61ccb&quot;,&quot;parentUUID&quot;:&quot;8ca3a28d-25f3-4221-a7b9-f5d7d66e395c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should register a user&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should register a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2841,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const userName = &#x27;register_user&#x27; + Math.random().toString(36).substring(7) // random string\nreq.body = {\n  firstName: &#x27;register_user&#x27;,\n  lastName: &#x27;lastName&#x27;,\n  userName,\n  email: &#x27;random@test.com&#x27;,\n  // locale: &#x27;en-US&#x27;,\n  timezone: &#x27;US/Central&#x27;,\n  languageGuid: testUser.languageGuid,\n  password: &#x27;randomPwd&#x27;,\n  tenant: tenantId\n}\nreq.bypassRecaptcha = true\nconst response = await handlers.registerUser(req, mockRes);\nexpect(response.statusCode).to.eq(200);\n// search by username to verify user record was created\nconst userCtrl = new UserController(session);\nconst result = await userCtrl.getUsers({search: userName});\nexpect(result.results.length).to.be.gt(0);\nlet found = result.results.find(u =&gt; u.userName = userName);\nexpect(found).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6eb70365-27f7-461a-b44a-861031240f9b&quot;,&quot;parentUUID&quot;:&quot;8ca3a28d-25f3-4221-a7b9-f5d7d66e395c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not update user with empty data&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should not update user with empty data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;req.body = &#x27;{}&#x27;;\nconst response = await handlers.updateUser(req, mockRes);\nexpect(response.statusCode).to.eq(400);\nexpect(response.body.firstName).to.exist;\nexpect(response.body.firstName).to.deep.eq([&#x27;The firstName field is required.&#x27;]);\nexpect(response.body.lastName).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;137c6592-021e-4a85-916c-a860e2dcb5de&quot;,&quot;parentUUID&quot;:&quot;8ca3a28d-25f3-4221-a7b9-f5d7d66e395c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update user&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should update user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let userToDelete = (await UserAuth.query().where(&#x27;userName&#x27;, &#x27;like&#x27;, &#x27;user_to_delete%&#x27;).limit(1))[0];\nif (!userToDelete) {\n  req.body = {\n    firstName: &#x27;user_to_delete&#x27;,\n    lastName: &#x27;lastName&#x27;,\n    userName: &#x27;user_to_delete&#x27; + Math.random().toString(36).substring(7), // random string\n    email: &#x27;random@test.com&#x27;,\n    locale: &#x27;en-US&#x27;,\n    timezone: &#x27;Pacific&#x27;,\n    languageGuid: testUser.languageGuid,\n    password: &#x27;randomPwd&#x27;,\n  }\n  userToDelete  = (await handlers.insertUser(req, mockRes)).body;\n}\nconst data = {\n  firstName: &#x27;user_to_delete&#x27;,\n  lastName: &#x27;updated last&#x27;,\n  userName: &#x27;user_to_delete&#x27; + Math.random().toString(36).substring(7),\n  email: &#x27;random@test.updated&#x27;,\n  locale: &#x27;en-US&#x27;,\n  timezone: &#x27;Atlantic/New York&#x27;,\n  languageGuid: testUser.languageGuid,\n};\nreq.params.userGuid = userToDelete.contactGuid;\nreq.body = JSON.stringify(data);\nconst response = await handlers.updateUser(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body.contactGuid).to.exist;\nexpect(response.body.firstName).to.exist;\nexpect(response.body.firstName).to.eq(data.firstName);\nexpect(response.body.timezone).to.exist;\nexpect(response.body.timezone).to.eq(data.timezone);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c5d6992-8d5f-423a-b88d-0e551bba089e&quot;,&quot;parentUUID&quot;:&quot;8ca3a28d-25f3-4221-a7b9-f5d7d66e395c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c854f9fb-c028-467d-8694-accdb5ce6f04&quot;,&quot;cb405638-168f-46fd-a507-c6bba42d5ebe&quot;,&quot;86da24c9-c967-4193-8d5a-4cda25ee6712&quot;,&quot;8c29982f-d882-43d7-9268-ddbbc3c1282d&quot;,&quot;191570d3-f5f7-4e74-a76b-f573d6ad3a7f&quot;,&quot;b10cb0e6-f83c-47ad-904d-2c1192c61ccb&quot;,&quot;6eb70365-27f7-461a-b44a-861031240f9b&quot;,&quot;137c6592-021e-4a85-916c-a860e2dcb5de&quot;,&quot;6c5d6992-8d5f-423a-b88d-0e551bba089e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3008,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;8c2f9227-e4da-43be-8df0-b1c49c5cec7a&quot;,&quot;title&quot;:&quot;api-user Group Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:114,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nsession = { tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase() }; // system level\ntenantId = config.tenantOne.tenantId;\nfor (i = 1; i &lt;= 10; i++) {\n  const groupController = new GroupController(session);\n  const result = await groupController.addGroup({ groupName: `Test Automation Group ${i}` });\n  testGroups.push(result);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;12c0a1cd-9382-4bcf-8500-f22d4c2b8001&quot;,&quot;parentUUID&quot;:&quot;8c2f9227-e4da-43be-8df0-b1c49c5cec7a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// clean up our test data\nconst Group = await models.getModel(config.tenantOne.tenantId, &#x27;Group&#x27;);\nconst ContactGroup = await models.getModel(config.tenantOne.tenantId, &#x27;ContactGroup&#x27;);\nawait Promise.all(testGroups.map(async (group) =&gt; {\n  await Group.query().hardDelete(group);\n  await ContactGroup.query()\n    .where(&#x27;groupGuid&#x27;, group.groupGuid)\n    .delete();\n}));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc4f3616-c8c9-4c10-8571-ba72c34f5964&quot;,&quot;parentUUID&quot;:&quot;8c2f9227-e4da-43be-8df0-b1c49c5cec7a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6395253f-ed31-45f9-8e8d-e54032e94cdb&quot;,&quot;title&quot;:&quot;get tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;retrieves a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests get tests retrieves a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Group = await models.getModel(config.tenantOne.tenantId, &#x27;Group&#x27;);\nconst groups = await Group.query().where(&#x27;group_name&#x27;, &#x27;=&#x27;, &#x27;Administrators&#x27;);\nexpect(groups.length).to.equal(1);\nadminGroupGuid = groups[0].groupGuid;\nconst groupController = new GroupController(config.tenantOne);\nconst adminGroup = await groupController.getGroup(adminGroupGuid);\nexpect(adminGroup).to.exist;\nexpect(adminGroup.groupName).to.equal(&#x27;Administrators&#x27;);\nexpect(adminGroup.groupDesc).to.equal(&#x27;System administrators&#x27;);\nexpect(adminGroup.groupSql).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f2179c4-4722-4b8c-a0d6-ea6c7e0e82d0&quot;,&quot;parentUUID&quot;:&quot;6395253f-ed31-45f9-8e8d-e54032e94cdb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retrieves all groups by default&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests get tests retrieves all groups by default&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Group = await models.getModel(config.tenantOne.tenantId, &#x27;Group&#x27;);\nconst groupController = new GroupController(config.tenantOne);\nconst response = await groupController.getGroups();\nconst groups = response.results;\nexpect(groups.length).to.be.above(10);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6df4a4a9-f6c3-4c12-99d8-93b10e86254c&quot;,&quot;parentUUID&quot;:&quot;6395253f-ed31-45f9-8e8d-e54032e94cdb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retrieves filtered list of groups&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests get tests retrieves filtered list of groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Group = await models.getModel(config.tenantOne.tenantId, &#x27;Group&#x27;);\nconst groupController = new GroupController(config.tenantOne);\nconst response = await groupController.getGroups({ search: &#x27;Test Automation Group&#x27;, count: 4 });\nconst groups = response.results;\nexpect(groups.length).to.equal(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d854390d-f73b-4c19-b3c0-411aba0183c8&quot;,&quot;parentUUID&quot;:&quot;6395253f-ed31-45f9-8e8d-e54032e94cdb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retrieves all possible members for adding to groups&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests get tests retrieves all possible members for adding to groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Group = await models.getModel(config.tenantOne.tenantId, &#x27;Group&#x27;);\nconst groupController = new GroupController(config.tenantOne);\nconst group = testGroups[9];\nconst response = await groupController.getNonMembers(group.groupGuid);\nconst results = response.results;\nexpect(results.length).to.be.equal(response.total);\n// empty group, so test a sampling of accounts that should be non-members\nexpect(results).to.include.deep({ memberGuid: \&quot;A03BDD24-A0BA-4071-9A5B-2833C865EC3D\&quot;,\n                                  memberId: 1,\n                                  memberName: \&quot;Administrators\&quot;,\n                                  memberType: \&quot;Group\&quot;\n                                })\nexpect(results).to.include.deep({ memberGuid: testGroups[8].groupGuid.toUpperCase(),\n                                  memberId: testGroups[8].groupId,\n                                  memberName: testGroups[8].groupName,\n                                  memberType: \&quot;Group\&quot;\n                                })\nexpect(results).to.include.deep({ memberGuid: &#x27;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF&#x27;,\n                                  memberId: 1,\n                                  memberName: &#x27;System System&#x27;,\n                                  memberType: &#x27;User&#x27;\n                                })\n// two system accounts that should not be returned, plus the group itself\nexpect(results).to.not.include.deep({ memberGuid: &#x27;D8C469C3-F781-4179-A09C-6D148885FB30&#x27;,\n                                               memberId: 92,\n                                               memberName: \&quot;Integrify System\&quot;,\n                                               memberType: \&quot;User\&quot;\n                                             })\nexpect(results).to.not.include.deep({ memberGuid: &#x27;64EC8FC9-B426-4376-A1A4-3AD16F0F9906&#x27;,\n                                               memberId: 96,\n                                               memberName: \&quot;Guest Account\&quot;,\n                                               memberType: \&quot;User\&quot;\n                                             })\nexpect(results).to.not.include.deep({ memberGuid: testGroups[9].groupGuid.toUpperCase(),\n                                           memberId: testGroups[9].groupId,\n                                           memberName: testGroups[9].groupName,\n                                           memberType: \&quot;Group\&quot;\n                                         })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;63ba44b2-671c-4a6f-9b29-c5bd4a25f5ab&quot;,&quot;parentUUID&quot;:&quot;6395253f-ed31-45f9-8e8d-e54032e94cdb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2f2179c4-4722-4b8c-a0d6-ea6c7e0e82d0&quot;,&quot;6df4a4a9-f6c3-4c12-99d8-93b10e86254c&quot;,&quot;d854390d-f73b-4c19-b3c0-411aba0183c8&quot;,&quot;63ba44b2-671c-4a6f-9b29-c5bd4a25f5ab&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:47,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;12c1067d-6ac8-4f98-a7f1-dc08d1ffa171&quot;,&quot;title&quot;:&quot;insert tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;inserts a non-dynamic group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests inserts a non-dynamic group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;Test Group (non-dynamic)&#x27;;\nconst groupDesc = &#x27;Simple test group&#x27;;\nconst groupData = {\n  groupName,\n  groupDesc,\n};\nconst groupController = new GroupController(session);\nconst result = await groupController.addGroup(groupData);\nexpect(result.groupName).to.equal(groupName);\nexpect(result.groupDesc).to.equal(groupDesc);\nexpect(result.dynamic).to.equal(&#x27;No&#x27;); // ensure defaulting to \&quot;No\&quot; rather than null\nexpect(result.createdBy).to.equal(session.user_sid);\ntestGroups.push(result); // for cleanup at end&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8147ad33-a3e3-44e8-a362-54c4769d973d&quot;,&quot;parentUUID&quot;:&quot;12c1067d-6ac8-4f98-a7f1-dc08d1ffa171&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;inserts a dynamic group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests inserts a dynamic group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;Test Group (dynamic)&#x27;;\nconst groupDesc = &#x27;Simple test group&#x27;;\nconst groupData = {\n  groupName,\n  groupDesc,\n  dynamic: &#x27;Yes&#x27;,\n  groupSql: \&quot;first_name = &#x27;Admin&#x27;\&quot;,\n};\nconst groupController = new GroupController(session);\nconst result = await groupController.addGroup(groupData);\nexpect(result.groupName).to.equal(groupName);\nexpect(result.groupDesc).to.equal(groupDesc);\nexpect(result.createdBy).to.equal(session.user_sid);\ntestGroups.push(result); // for cleanup at end&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c432f2c8-05e6-4dd0-a296-54b6986a8a3b&quot;,&quot;parentUUID&quot;:&quot;12c1067d-6ac8-4f98-a7f1-dc08d1ffa171&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects a dynamic group with bad SQL&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests rejects a dynamic group with bad SQL&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;Test Group (simple)&#x27;;\nconst groupDesc = &#x27;Simple test group&#x27;;\nconst groupData = {\n  groupName,\n  groupDesc,\n  dynamic: &#x27;Yes&#x27;,\n  groupSql: \&quot;bad_column_name = &#x27;Admin&#x27;\&quot;,\n};\nconst groupController = new GroupController(session);\nawait expect(groupController.addGroup(groupData)).to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c031c3f-7dec-4d3c-a4e7-9ba57176ffe4&quot;,&quot;parentUUID&quot;:&quot;12c1067d-6ac8-4f98-a7f1-dc08d1ffa171&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects a group with no name&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests rejects a group with no name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nawait expect(groupController.addGroup({ groupDesc: &#x27;Test Group&#x27; })).to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a766b96-803f-484a-ae4d-c147f60b628a&quot;,&quot;parentUUID&quot;:&quot;12c1067d-6ac8-4f98-a7f1-dc08d1ffa171&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects a dynamic group with no SQL&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests rejects a dynamic group with no SQL&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupData = {\n  groupName: &#x27;Dynamic Test Group&#x27;,\n  dynamic: &#x27;Yes&#x27;,\n};\nconst groupController = new GroupController(session);\nawait expect(groupController.addGroup(groupData)).to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97bff404-9757-4d9f-878f-21e1644c20de&quot;,&quot;parentUUID&quot;:&quot;12c1067d-6ac8-4f98-a7f1-dc08d1ffa171&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8147ad33-a3e3-44e8-a362-54c4769d973d&quot;,&quot;c432f2c8-05e6-4dd0-a296-54b6986a8a3b&quot;,&quot;1c031c3f-7dec-4d3c-a4e7-9ba57176ffe4&quot;,&quot;9a766b96-803f-484a-ae4d-c147f60b628a&quot;,&quot;97bff404-9757-4d9f-878f-21e1644c20de&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:45,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;35defa2a-1370-41a2-8a5c-b53a87919051&quot;,&quot;title&quot;:&quot;update tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests update tests updates a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[0];\nconst result = await groupController.updateGroup({\n  groupGuid: group.groupGuid,\n  groupName: &#x27;Updated Test Automation Group&#x27;,\n  dynamic: &#x27;Yes&#x27;,\n  groupSql: \&quot;first_name = &#x27;Admin&#x27;\&quot;,\n});\nexpect(result.groupName).to.equal(&#x27;Updated Test Automation Group&#x27;);\nexpect(result.dynamic).to.equal(&#x27;Yes&#x27;);\nexpect(result.groupSql).to.equal(\&quot;first_name = &#x27;Admin&#x27;\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e5b5f07-cfdb-4d53-96a3-7f9cde46888b&quot;,&quot;parentUUID&quot;:&quot;35defa2a-1370-41a2-8a5c-b53a87919051&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects an update with no group name&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests update tests rejects an update with no group name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[0];\nawait expect(groupController\n  .updateGroup({\n    groupGuid: group.groupGuid,\n    groupName: &#x27;&#x27;,\n  }))\n  .to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;074f2b3d-42e0-4e07-acf3-51b76e132254&quot;,&quot;parentUUID&quot;:&quot;35defa2a-1370-41a2-8a5c-b53a87919051&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects an update for dynamic without sql&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests update tests rejects an update for dynamic without sql&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[0];\nawait expect(groupController\n  .updateGroup({\n    groupGuid: group.groupGuid,\n    groupName: &#x27;Validation test&#x27;,\n    dynamic: &#x27;Yes&#x27;,\n    groupSql: &#x27;&#x27;,\n  }))\n  .to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;582142d0-cfaf-42e0-b045-8cedb11c4c39&quot;,&quot;parentUUID&quot;:&quot;35defa2a-1370-41a2-8a5c-b53a87919051&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects an update for dynamic other than Yes/No&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests update tests rejects an update for dynamic other than Yes/No&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[0];\nawait expect(groupController\n  .updateGroup({\n    groupGuid: group.groupGuid,\n    groupName: &#x27;Validation test&#x27;,\n    dynamic: true,\n    groupSql: \&quot;name = &#x27;Admin&#x27;\&quot;,\n  }))\n  .to.be.rejectedWith(Error);\nawait expect(groupController\n  .updateGroup({\n    groupGuid: group.groupGuid,\n    groupName: &#x27;Validation test&#x27;,\n    dynamic: &#x27;yes&#x27;,\n    groupSql: \&quot;name = &#x27;Admin&#x27;\&quot;,\n  }))\n  .to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5f0a610-f8cc-4d00-b4eb-e6f11a075346&quot;,&quot;parentUUID&quot;:&quot;35defa2a-1370-41a2-8a5c-b53a87919051&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9e5b5f07-cfdb-4d53-96a3-7f9cde46888b&quot;,&quot;074f2b3d-42e0-4e07-acf3-51b76e132254&quot;,&quot;582142d0-cfaf-42e0-b045-8cedb11c4c39&quot;,&quot;c5f0a610-f8cc-4d00-b4eb-e6f11a075346&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;0cb7ab1e-b706-40fd-92d9-fa743e0efab3&quot;,&quot;title&quot;:&quot;delete tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;soft deletes a list of groups&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests delete tests soft deletes a list of groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst timeBeforeDelete = Date.now();\nconst firstGroup = testGroups[0];\nconst response = await groupController.deleteGroups(testGroups.slice(0, 5).map((group) =&gt; group.groupGuid));\nexpect(response).to.eql([1, 1, 1, 1, 1]);\nconst deletedGroup = groupController.getGroup(firstGroup.groupGuid);\nexpect(deletedGroup).to.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;347f917a-76ed-47f2-9a76-574c5a9f666c&quot;,&quot;parentUUID&quot;:&quot;0cb7ab1e-b706-40fd-92d9-fa743e0efab3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;347f917a-76ed-47f2-9a76-574c5a9f666c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;8c50a883-1c09-46ba-a531-fe2f24776036&quot;,&quot;title&quot;:&quot;membership test&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;adds a user to a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test adds a user to a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[9]; // 0-4 get deleted in a previous test\nres = await groupController.getMembers(group.groupGuid);\nexpect(res.results.length).to.equal(0); // make sure group starts empty\nlet result = await groupController.addMembersToGroup({\n  groupGuid: group.groupGuid,\n  members: [{\n    memberGuid: session.user_sid,\n    memberType: &#x27;User&#x27;,\n  },\n  ],\n});\nexpect(result).to.not.be.undefined;\nres = await groupController.getMembers(group.groupGuid);\nresult = res.results;\nexpect(result.length).to.equal(1);\nexpect(result[0].memberGuid.toLowerCase()).to.equal(session.user_sid);\nexpect(result[0].groupGuid.toLowerCase()).to.equal(group.groupGuid);\nexpect(result[0].memberType).to.equal(&#x27;User&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9c13e10-9ee7-4554-b4ac-b32401f28eb0&quot;,&quot;parentUUID&quot;:&quot;8c50a883-1c09-46ba-a531-fe2f24776036&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;removes members from a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test removes members from a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[9];\nres = await groupController.getMembers(group.groupGuid);\nexpect(res.results.length).to.equal(1); // should have 1 member from preceding addUser test\nlet result = await groupController.removeMembersFromGroup({\n  groupGuid: group.groupGuid,\n  members: [session.user_sid],\n});\nexpect(result).to.equal(1);\nres = await groupController.getMembers(group.groupGuid);\nresult = res.results;\nexpect(result.length).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5f5544c-a230-48b4-b534-375b25136fc1&quot;,&quot;parentUUID&quot;:&quot;8c50a883-1c09-46ba-a531-fe2f24776036&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;lists members of a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test lists members of a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst usersGroupGuid = &#x27;eab8a4c9-6903-40bc-a2ee-cf254a408d6f&#x27;;\nconst res = await groupController.getMembers(usersGroupGuid);\nexpect(res.results.length).to.be.at.least(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f68dc2c-57e3-40f3-b843-632e4b41d64c&quot;,&quot;parentUUID&quot;:&quot;8c50a883-1c09-46ba-a531-fe2f24776036&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;filters members of a group based on search string&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test filters members of a group based on search string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst usersGroupGuid = &#x27;eab8a4c9-6903-40bc-a2ee-cf254a408d6f&#x27;;\nconst res = await groupController.getMembers(usersGroupGuid, { search: &#x27;no-reply@integrify.com&#x27; });\nexpect(res.results.length).to.equal(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;50662dbe-ff93-4235-a848-22e2345db118&quot;,&quot;parentUUID&quot;:&quot;8c50a883-1c09-46ba-a531-fe2f24776036&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits result members of a group based start/count&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits result members of a group based start/count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst usersGroupGuid = &#x27;eab8a4c9-6903-40bc-a2ee-cf254a408d6f&#x27;;\nlet res = await groupController.getMembers(usersGroupGuid);\nconst groupSize = res.results.length;\nexpect(groupSize).to.equal(res.total);\nres = await groupController.getMembers(usersGroupGuid, { count: 1 });\nexpect(res.results.length).to.equal(1);\nexpect(res.total).to.equal(groupSize);\nres = await groupController.getMembers(usersGroupGuid, { start: 1 });\nexpect(res.results.length).to.equal(groupSize - 1);\nexpect(res.total).to.equal(groupSize);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bfa7ed80-37ce-43aa-85c0-17a0acf7ef34&quot;,&quot;parentUUID&quot;:&quot;8c50a883-1c09-46ba-a531-fe2f24776036&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits nonmembers to users only&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits nonmembers to users only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst adminGroupGuid = &#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;;\nconst res = await groupController.getNonMembers(adminGroupGuid, { users: &#x27;true&#x27;, groups: &#x27;false&#x27; });\nres.results.forEach((groupMember) =&gt; expect(groupMember.memberType).to.equal(&#x27;User&#x27;));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dfb7a4e7-f801-4444-bc37-ef9ad0b8420e&quot;,&quot;parentUUID&quot;:&quot;8c50a883-1c09-46ba-a531-fe2f24776036&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits nonmembers to groups only&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits nonmembers to groups only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst adminGroupGuid = &#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;;\nconst res = await groupController.getNonMembers(adminGroupGuid, { users: &#x27;false&#x27;, groups: &#x27;true&#x27; });\nres.results.forEach((groupMember) =&gt; expect(groupMember.memberType).to.equal(&#x27;Group&#x27;));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;61df9e16-5cbf-4a82-92bf-8fcad6fee5a0&quot;,&quot;parentUUID&quot;:&quot;8c50a883-1c09-46ba-a531-fe2f24776036&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retrieves groups a user belongs to&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test retrieves groups a user belongs to&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst userGuid = &#x27;4e99e0dd-b3b3-4d5d-826d-3d5ae62a16cf&#x27;;\nconst res = await groupController.getUserGroups(userGuid);\nexpect(res.results.find((result) =&gt; result.groupName == &#x27;Administrators&#x27;)).to.not.be.undefined;\nexpect(res.results.find((result) =&gt; result.groupDesc == &#x27;All users&#x27;)).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41a379e0-62c2-48e4-a488-6059ed1edf09&quot;,&quot;parentUUID&quot;:&quot;8c50a883-1c09-46ba-a531-fe2f24776036&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits resulting nonmembers based on start/count&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits resulting nonmembers based on start/count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const group = testGroups[9];\nconst groupController = new GroupController(session);\nlet res = await groupController.getNonMembers(group.groupGuid);\nconst availableSize = res.results.length;\nexpect(availableSize).to.equal(res.total);\nres = await groupController.getNonMembers(group.groupGuid, { count: 1 });\nexpect(res.results.length).to.equal(1);\nexpect(res.total).to.equal(availableSize);\nres = await groupController.getNonMembers(group.groupGuid, { start: 0, count: 5 });\nexpect(res.results.length).to.equal(5);\nexpect(res.total).to.equal(availableSize);\nres = await groupController.getNonMembers(group.groupGuid, { start: 1, count: 5 });\nexpect(res.results.length).to.equal(5);\nexpect(res.total).to.equal(availableSize);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26ffd50f-2c57-43bb-9ada-e7d7c34cd186&quot;,&quot;parentUUID&quot;:&quot;8c50a883-1c09-46ba-a531-fe2f24776036&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits resulting nonmembers based on search string&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits resulting nonmembers based on search string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const group = testGroups[9];\nconst groupController = new GroupController(session);\nlet res = await groupController.getNonMembers(group.groupGuid);\nconst availableSize = res.results.length;\nexpect(availableSize).to.equal(res.total);\nres = await groupController.getNonMembers(group.groupGuid, { search: &#x27;System&#x27; });\nconst { results } = res;\nexpect(results).to.eql([{\n  memberGuid: &#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;,\n  memberName: &#x27;Administrators&#x27;,\n  memberType: &#x27;Group&#x27;,\n  memberId: 1,\n},\n{\n  memberGuid: &#x27;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF&#x27;,\n  memberId: 1,\n  memberName: &#x27;System System&#x27;,\n  memberType: &#x27;User&#x27;,\n},\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd2f761d-0322-4ffa-9e0e-63d99dd880af&quot;,&quot;parentUUID&quot;:&quot;8c50a883-1c09-46ba-a531-fe2f24776036&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;lists members of a dynamic group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test lists members of a dynamic group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst allUsersGroupGuid = &#x27;eab8a4c9-6903-40bc-a2ee-cf254a408d6f&#x27;;\nconst result = await groupController.getMembers(allUsersGroupGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d255f028-4579-43ae-91b1-1480e130f6b9&quot;,&quot;parentUUID&quot;:&quot;8c50a883-1c09-46ba-a531-fe2f24776036&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;lists all members of a group containing groups&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test lists all members of a group containing groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6708b39-ae64-4a25-9337-8c6a0ac3a86c&quot;,&quot;parentUUID&quot;:&quot;8c50a883-1c09-46ba-a531-fe2f24776036&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a9c13e10-9ee7-4554-b4ac-b32401f28eb0&quot;,&quot;b5f5544c-a230-48b4-b534-375b25136fc1&quot;,&quot;6f68dc2c-57e3-40f3-b843-632e4b41d64c&quot;,&quot;50662dbe-ff93-4235-a848-22e2345db118&quot;,&quot;bfa7ed80-37ce-43aa-85c0-17a0acf7ef34&quot;,&quot;dfb7a4e7-f801-4444-bc37-ef9ad0b8420e&quot;,&quot;61df9e16-5cbf-4a82-92bf-8fcad6fee5a0&quot;,&quot;41a379e0-62c2-48e4-a488-6059ed1edf09&quot;,&quot;26ffd50f-2c57-43bb-9ada-e7d7c34cd186&quot;,&quot;fd2f761d-0322-4ffa-9e0e-63d99dd880af&quot;,&quot;d255f028-4579-43ae-91b1-1480e130f6b9&quot;,&quot;f6708b39-ae64-4a25-9337-8c6a0ac3a86c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:192,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;aa6f674d-3d1b-4e04-90e6-24dd15cd4d65&quot;,&quot;title&quot;:&quot;association tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;list processes associated to a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests association tests list processes associated to a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst res = await groupController.getProcessAssociations(&#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;);\nexpect(res.length).to.equal(47);\n// should not include categoryLevel by default\nexpect(res[0]).to.have.keys(&#x27;processGuid&#x27;, &#x27;processName&#x27;, &#x27;processVersion&#x27;, &#x27;taskName&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7be53032-44d2-4649-b6b2-ac06e115a728&quot;,&quot;parentUUID&quot;:&quot;aa6f674d-3d1b-4e04-90e6-24dd15cd4d65&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;list processes associated to a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests association tests list processes associated to a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:62,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst res = await groupController.getProcessAssociations(&#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;, { include: [&#x27;category&#x27;] });\nexpect(res[0]).to.have.keys(&#x27;processGuid&#x27;, &#x27;processName&#x27;, &#x27;processVersion&#x27;, &#x27;taskName&#x27;, &#x27;categoryLevel&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f87413da-d9ac-4bee-bc9e-db6259dd8b48&quot;,&quot;parentUUID&quot;:&quot;aa6f674d-3d1b-4e04-90e6-24dd15cd4d65&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;list roles associated to a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests association tests list roles associated to a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst res = await groupController.getRoleAssociations(&#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;);\nexpect(res.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e95123b-adeb-45c2-b1d6-c21fbd0a31db&quot;,&quot;parentUUID&quot;:&quot;aa6f674d-3d1b-4e04-90e6-24dd15cd4d65&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7be53032-44d2-4649-b6b2-ac06e115a728&quot;,&quot;f87413da-d9ac-4bee-bc9e-db6259dd8b48&quot;,&quot;8e95123b-adeb-45c2-b1d6-c21fbd0a31db&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:75,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;60f4f965-0938-40fd-a9d3-5a5bb7360603&quot;,&quot;title&quot;:&quot;api-user User Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/api-user/test/db/userController.test.js&quot;,&quot;file&quot;:&quot;/test/db/userController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:975,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\ntenantId = config.tenantOne.tenantId;\nsession = {tenant: tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()};\nUser = await models.getModel(tenantId, &#x27;User&#x27;);\nMetadataValue = await models.getModel(tenantId, &#x27;MetadataValue&#x27;);\nUserAuth = await models.getModel(tenantId, &#x27;UserAuth&#x27;);\n// add user\nuserCtrl = new UserController(session);\nfor (let i=1; i&lt;=limit; i++) {\n  const user = {\n    firstName: &#x27;test first name&#x27; + i,\n    lastName: &#x27;last&#x27; + i,\n    userName: &#x27;test_username&#x27; + i,\n    email: `test${i}@test.test${i}`,\n    locale: &#x27;en-US&#x27;,\n    languageGuid: &#x27;2a803d80-de6d-4adc-a642-4e3d831f5460&#x27;, // US English\n    password: testPwd,\n    confirmPassword: testPwd,\n    title: &#x27;title&#x27; + i\n  };\n  const dbUser = await userCtrl.insertUser(user)\n  testUsers.push(dbUser);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;169c68b3-2d78-4346-8c82-8020e107fd6e&quot;,&quot;parentUUID&quot;:&quot;60f4f965-0938-40fd-a9d3-5a5bb7360603&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:52,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await Promise.all( testUsers.map( async (user) =&gt; {\n  return UserAuth.query().deleteById(user.contactGuid);\n}));\nawait User.query().delete().where(&#x27;firstName&#x27;, &#x27;like&#x27;, &#x27;test first%&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88a9306b-173f-493d-b0c4-95536fb1415e&quot;,&quot;parentUUID&quot;:&quot;60f4f965-0938-40fd-a9d3-5a5bb7360603&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should retrieves users&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should retrieves users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const User = await models.getModel(tenantId, &#x27;User&#x27;);\nconst UserAuth = await models.getModel(tenantId, &#x27;UserAuth&#x27;);\nconst users = await User.query()\n  .orderBy(&#x27;createdDate&#x27;, &#x27;desc&#x27;)\n  .limit(limit);\nawait Promise.all(users.map(async user =&gt; {\n  const result = await userCtrl.getUser(user.contactGuid);\n  const {userName, managerGuid, ...userToCompare1} = result;\n  user.languageGuid = user.languageGuid.toLowerCase() // &#x27;user&#x27; from Database query has \&quot;upper case\&quot; language guid - but userToCompare1 from API should be in lower case\n  user.contactGuid = user.contactGuid.toLowerCase()\n  user.createdBy = user.createdBy.toLowerCase()\n  expect(userToCompare1).to.deep.eq(user);\n  // compare testUser to user\n  const testUser = testUsers.find(u =&gt; u.contactGuid === user.contactGuid);\n  [&#x27;firstName&#x27;, &#x27;lastName&#x27;, &#x27;email&#x27;, &#x27;locale&#x27;, &#x27;languageGuid&#x27;, &#x27;contactId&#x27;, &#x27;title&#x27;].forEach(p =&gt; {\n    expect(testUser[p]).to.eq(user[p]);\n  });\n  // check userNames\n  const userAuth = await UserAuth.query()\n    .findById(user.contactGuid);\n  expect(userAuth).to.exist;\n  expect(userAuth.userName).to.eq(testUser.userName);\n}));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5231a861-b3ab-44c9-b5e8-a027ee579cc1&quot;,&quot;parentUUID&quot;:&quot;60f4f965-0938-40fd-a9d3-5a5bb7360603&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should search in users&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should search in users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:61,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testUser = testUsers[0];\n// search by id\nlet result = await userCtrl.getUsers({search: testUser.contactId});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.eq(1);\n// search by username\nresult = await userCtrl.getUsers({search: testUser.userName});\nexpect(result.results.length).to.be.gt(0);\nlet found = result.results.find(u =&gt; u.userName = testUser.userName);\nexpect(found).to.exist;\n// search by first &amp; last names\nresult = await userCtrl.getUsers({search: testUser.firstName.slice(0, -2)});\nexpect(result.results.length).to.be.gt(0);\nfound = result.results.find(u =&gt; u.first === testUser.first);\nexpect(found).to.exist;\nresult = await userCtrl.getUsers({search: testUser.lastName.slice(0, -1)});\nexpect(result.results.length).to.be.gt(0);\nfound = result.results.find(u =&gt; u.lastName === testUser.lastName);\nexpect(found).to.exist;\n// search by email\nresult = await userCtrl.getUsers({search: testUser.email.slice(-10)});\nexpect(result.results.length).to.be.gt(0);\nfound = result.results.find(u =&gt; u.email === testUser.email);\nexpect(found).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c327f9fd-9f87-4878-a0da-5617374b23e5&quot;,&quot;parentUUID&quot;:&quot;60f4f965-0938-40fd-a9d3-5a5bb7360603&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should limit results&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should limit results&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const result = await userCtrl.getUsers({count: 4});\nexpect(result.results.length).to.eq(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d05ccb6a-3126-43fb-9994-9607c408d584&quot;,&quot;parentUUID&quot;:&quot;60f4f965-0938-40fd-a9d3-5a5bb7360603&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should retrieve filtered users &quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should retrieve filtered users &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testUser = testUsers[0];\nconst user = await userCtrl.getUser(testUser.contactGuid);\nconst filters = [\n  {\n    field: &#x27;lastName&#x27;,\n    data: {comparison: &#x27;eq&#x27;, type: &#x27;string&#x27;, value: user.lastName,}\n  },\n  {\n    field: &#x27;firstName&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.firstName}\n  },\n  {\n    field: &#x27;userName&#x27;,\n    data: {comparison: &#x27;eq&#x27;, value: user.userName}\n  },\n  {\n    field: &#x27;email&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.email}\n  },\n  {\n    field: &#x27;title&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.title}\n  },\n  {\n    field: &#x27;constCenter&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.constCenter}\n  },\n  {\n    field: &#x27;country&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.country}\n  },\n  {\n    field: &#x27;department&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.department}\n  },\n  {\n    field: &#x27;managerName&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.managerName}\n  },\n  {\n    field: &#x27;managerGuid&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.managerGuid}\n  },\n];\nconst result = await userCtrl.getUsers({filters});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\nconst found = result.results.find(u =&gt; u.contactGuid === testUser.contactGuid);\nexpect(found).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3cac26a3-927e-4852-a3db-7444e662120d&quot;,&quot;parentUUID&quot;:&quot;60f4f965-0938-40fd-a9d3-5a5bb7360603&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a list of managers&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should get a list of managers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const exceptGuid = testUsers[0].contactGuid;\nconst managers = await userCtrl.getManagers({exceptGuid});\nmanagers.forEach(manager =&gt; {\n  expect(manager.contactGuid).to.not.eq(exceptGuid);\n});\ntestUsers.filter(u =&gt; u.contactGuid !== exceptGuid).forEach(u =&gt; {\n  const manager = managers.find(m =&gt; m.contactGuid === u.contactGuid);\n  const {contactGuid, firstName, lastName, email, title} = u;\n  const testUser = {contactGuid, firstName, lastName, email, title};\n  expect(manager).to.deep.eq(testUser);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6909272-792d-4683-ad5a-f299b1024f3f&quot;,&quot;parentUUID&quot;:&quot;60f4f965-0938-40fd-a9d3-5a5bb7360603&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a single user&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should get a single user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testUser = testUsers[3];\nconst user = await userCtrl.getUser(testUser.contactGuid);\nexpect(user).to.exist;\n[&#x27;contactGuid&#x27;, &#x27;contactId&#x27;, &#x27;firstName&#x27;, &#x27;lastName&#x27;, &#x27;userName&#x27;, &#x27;email&#x27;, &#x27;locale&#x27;, &#x27;languageGuid&#x27;, &#x27;title&#x27;].forEach(p =&gt; {\n  expect(user[p]).to.eq(testUser[p]);\n});\n[&#x27;middleName&#x27;, &#x27;phone&#x27;, &#x27;address1&#x27;, &#x27;address2&#x27;, &#x27;city&#x27;, &#x27;state&#x27;, &#x27;zip&#x27;, &#x27;country&#x27;,\n  &#x27;department&#x27;, &#x27;costCenter&#x27;, &#x27;division&#x27;, &#x27;managerGuid&#x27;, &#x27;cField1&#x27;, &#x27;cField2&#x27;].forEach(p =&gt; {\n  expect(!!user[p] || user[p] === null || user[p] === &#x27;&#x27;).to.eq(true);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59695c22-8ec4-4a65-82c2-bde7878adf76&quot;,&quot;parentUUID&quot;:&quot;60f4f965-0938-40fd-a9d3-5a5bb7360603&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update and get delegate&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should update and get delegate&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:45,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// insert delegate\nconst testDelegate = {\n  contactGuid: testUsers[3].contactGuid,\n  processes: [{id: &#x27;a6714779-4bde-4000-8361-ad37c838d440&#x27;}, {id: &#x27;3545404d-6fff-4ed5-ba9a-1100ce38d421&#x27;}, {id: &#x27;cfc36de0-a71b-451f-817a-2092c3c247ca&#x27;}],\n  startDate: &#x27;2021-01-14&#x27;,\n  startTime: &#x27;06:00&#x27;,\n  endDate: &#x27;2021-01-15&#x27;,\n  endTime: &#x27;17:35&#x27;,\n};\nawait userCtrl.updateDelegate(testUsers[3].contactGuid, testDelegate);\n// get delegate\nlet delegate = await userCtrl.getDelegate(testDelegate.contactGuid);\n[&#x27;contactGuid&#x27;, &#x27;startDate&#x27;, &#x27;startTime&#x27;, &#x27;endDate&#x27;, &#x27;endTime&#x27;].forEach(p =&gt; {\n  expect(delegate[p]).to.exist;\n  expect(delegate[p]).to.eq(testDelegate[p]);\n})\nexpect(delegate.processes).to.exist;\nexpect(delegate.processes.length).to.eq(testDelegate.processes.length);\ntestDelegate.processes.forEach(p =&gt; {\n  const process = delegate.processes.find(dp =&gt; dp.id === p.id);\n  expect(process).to.exist;\n});\n// for user without delegate\ndelegate = await userCtrl.getDelegate(testUsers[1].contactGuid);\n[&#x27;contactGuid&#x27;, &#x27;startDate&#x27;, &#x27;startTime&#x27;, &#x27;endDate&#x27;, &#x27;endTime&#x27;].forEach(p =&gt; {\n  expect(delegate[p]).to.be.null;\n});\nexpect(delegate.processes.length).to.eq(0);\n// delete delegate\nawait MetadataValue.query()\n  .where(&#x27;ownerSid&#x27;, testDelegate.contactGuid)\n  .delete();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dd2d911d-d721-490b-a0f0-4e04761029cf&quot;,&quot;parentUUID&quot;:&quot;60f4f965-0938-40fd-a9d3-5a5bb7360603&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;password should be hashed&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests password should be hashed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const user = await UserAuth.query()\n  .findById(testUsers[0].contactGuid);\nexpect(user.password).to.not.eq(testPwd);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5cde3ee4-2cf3-4d7c-989a-f595e818e054&quot;,&quot;parentUUID&quot;:&quot;60f4f965-0938-40fd-a9d3-5a5bb7360603&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;user should be active (not deleted)&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests user should be active (not deleted)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const user = await User.query()\n  .findById(testUsers[0].contactGuid);\nexpect(user.deletedDate).to.be.null;\nexpect(user.deletedBy).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a445e692-81b0-449a-a399-1503e0ca05be&quot;,&quot;parentUUID&quot;:&quot;60f4f965-0938-40fd-a9d3-5a5bb7360603&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should convert user Guids&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should convert user Guids&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testUser = {\n  contactGuid: &#x27;SomeRandomString&#x27;,\n  managerGuid: &#x27;SomeRandomString&#x27;,\n  signatureGuid: &#x27;SomeRandomString&#x27;,\n  languageGuid: &#x27;SomeRandomString&#x27;,\n  createdBy: &#x27;SomeRandomString&#x27;,\n};\nconst convertedUser1 = userCtrl.convertUserGuids(testUser);\nconst convertedUser2 = userCtrl.convertUserGuids({contactGuid: testUser.contactGuid});\n[convertedUser1, convertedUser2].forEach(u =&gt; {\n  Object.keys(u).forEach(key =&gt; {\n    expect(u[key]).to.eq(u[key].toLowerCase());\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eca10d63-a25b-46f3-8229-019da7141757&quot;,&quot;parentUUID&quot;:&quot;60f4f965-0938-40fd-a9d3-5a5bb7360603&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should check if username is taken&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should check if username is taken&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const userGuid = testUsers[0].contactGuid;\nconst username = testUsers[0].userName;\nlet isTaken = await userCtrl.isUserNameTaken(username);\nexpect(isTaken).to.be.true;\nisTaken = await userCtrl.isUserNameTaken(username.toUpperCase());\nexpect(isTaken).to.be.true;\n// with un-taken username\nisTaken = await userCtrl.isUserNameTaken(&#x27;someUnusedUsernameTest&#x27;);\nexpect(isTaken).to.be.false;\n// with Guid provided\nisTaken = await userCtrl.isUserNameTaken(username, userGuid);\nexpect(isTaken).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;364fd22d-5a92-4af6-925e-9abdafa8bbdb&quot;,&quot;parentUUID&quot;:&quot;60f4f965-0938-40fd-a9d3-5a5bb7360603&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update user&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should update user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:103,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const userGuid = testUsers[3].contactGuid;\nconst data = {\n  firstName: &#x27;test first updated&#x27;,\n  middleName: &#x27;up mid name&#x27;,\n  lastName: &#x27;up last name&#x27;,\n  email: &#x27;updated@email.com&#x27;,\n  title: &#x27;updatedTitle&#x27;,\n  division: &#x27;up division&#x27;,\n  department: &#x27;upd department&#x27;,\n  costCenter: &#x27;upd cost center&#x27;,\n  location: &#x27;upd loc&#x27;,\n  phone: &#x27;094-242-5654 ext 4&#x27;,\n  managerGuid: testUsers[0].contactGuid,\n  address1: &#x27;654 Some ave&#x27;,\n  address2: &#x27;apt 589&#x27;,\n  city: &#x27;New London&#x27;,\n  state: &#x27;OR&#x27;,\n  zip: &#x27;98353&#x27;,\n  country: &#x27;USM&#x27;,\n  languageGuid: testUsers[0].languageGuid,\n  timezone: &#x27;PFT-09&#x27;,\n  locale: &#x27;en-US&#x27;,\n  cField1: &#x27;upd cust field 1&#x27;,\n  cField2: &#x27;upd cust field 2&#x27;,\n  active: false,\n  userName: &#x27;updatedUserName&#x27;,\n  password: &#x27;updatedPwd&#x27;,\n  signatureGuid: &#x27;36b65bca-140d-41b9-ac8b-89b50c86e7ba&#x27;\n};\n// get current password\nlet user = await UserAuth.query()\n  .findById(testUsers[3].contactGuid);\nconst previousPwd = user.password;\n// update\nuser = await userCtrl.updateUser(userGuid, data);\nconst {contactGuid, contactId, createdBy, createdDate, deletedBy, deletedDate, modifiedBy, modifiedDate, ntId, reportsToGuid, lastUpdate, ...updatedUser} = user;\nconst {password, active, ...testData} = data;\nexpect(updatedUser).to.deep.eq(testData);\n// should be inactive/deleted\nexpect(!!deletedBy).to.be.true;\nexpect(!!deletedDate).to.be.true;\n// should change the password\nuser = await UserAuth.query()\n  .findById(testUsers[3].contactGuid);\nconst updatedPwd = user.password;\nexpect(previousPwd).to.not.eq(updatedPwd);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c61cd4ce-8a2a-46c1-83fb-24d62adb287b&quot;,&quot;parentUUID&quot;:&quot;60f4f965-0938-40fd-a9d3-5a5bb7360603&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5231a861-b3ab-44c9-b5e8-a027ee579cc1&quot;,&quot;c327f9fd-9f87-4878-a0da-5617374b23e5&quot;,&quot;d05ccb6a-3126-43fb-9994-9607c408d584&quot;,&quot;3cac26a3-927e-4852-a3db-7444e662120d&quot;,&quot;a6909272-792d-4683-ad5a-f299b1024f3f&quot;,&quot;59695c22-8ec4-4a65-82c2-bde7878adf76&quot;,&quot;dd2d911d-d721-490b-a0f0-4e04761029cf&quot;,&quot;5cde3ee4-2cf3-4d7c-989a-f595e818e054&quot;,&quot;a445e692-81b0-449a-a399-1503e0ca05be&quot;,&quot;eca10d63-a25b-46f3-8229-019da7141757&quot;,&quot;364fd22d-5a92-4af6-925e-9abdafa8bbdb&quot;,&quot;c61cd4ce-8a2a-46c1-83fb-24d62adb287b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:286,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;76a75307-d21c-490f-9949-94d859780a2d&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;895de5c8-e184-4eda-b180-e55b6baa35c9&quot;,&quot;title&quot;:&quot;Config Processor Event Handler Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/config-processor/test/integration/configEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/configEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config Processor Event Handler Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10030,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.TESTING = true;\nthis.timeout(105000);\nlet deletes = await redis.delAsync([fullStreamName, eventHistoryName, eventProcessedName]);\n\nconsole.log(deletes)\nlet sp = new StreamPublisher(testStreamName,tenant);\nawait sp.sendEvent(\&quot;updateEnvConfig\&quot;, {\n    update: new Date().toISOString()\n});\nawait sp.sendEvent(\&quot;updateDataInstances\&quot;, {\n  update: new Date().toISOString()\n});\nawait sp.sendEvent(\&quot;updateLicenses\&quot;, {\n    update: new Date().toISOString()\n});\nawait sp.sendEvent(\&quot;updateLicenses\&quot;, {\n  update: new Date().toISOString(),\n  tenantId: &#x27;integrifydev&#x27;\n      });\n\n\nforkedProcessor = await configStreamConsumer.monitorStream(tenant);\nawait delay(10000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9473e2f-991c-44a0-bbea-1904361f962c&quot;,&quot;parentUUID&quot;:&quot;895de5c8-e184-4eda-b180-e55b6baa35c9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config Processor Event Handler Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;62daa4d2-d77a-4735-aa47-7c8530e612aa&quot;,&quot;parentUUID&quot;:&quot;895de5c8-e184-4eda-b180-e55b6baa35c9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3cad286c-6e47-4055-9d6f-e8660361a877&quot;,&quot;title&quot;:&quot;config stream processor&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/config-processor/test/integration/configEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/configEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;561915da-2ad0-4df1-af90-aca0663d1fec&quot;,&quot;title&quot;:&quot;reads from config stream&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/config-processor/test/integration/configEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/configEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should process events&quot;,&quot;fullTitle&quot;:&quot;Config Processor Event Handler Tests config stream processor reads from config stream should process events&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processedCount = await redis.zcardAsync(eventProcessedName)\n              let historyCount = await redis.zcardAsync(eventHistoryName)\n              expect(historyCount).to.equal(processedCount)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f88cf3c9-f9dc-4dd6-a655-6f5c7d441e7a&quot;,&quot;parentUUID&quot;:&quot;561915da-2ad0-4df1-af90-aca0663d1fec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f88cf3c9-f9dc-4dd6-a655-6f5c7d441e7a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4237f72e-3fa8-4b49-abe0-b85c2e6f2f48&quot;,&quot;title&quot;:&quot;Config Processor ENV.CONFIG tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/config-processor/test/integration/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config Processor ENV.CONFIG tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\nprocess.env.TESTING = true;\n\nconfigHelper = require(\&quot;../../src/helpers/config\&quot;)\nredis = require(\&quot;integrify-libs\&quot;).redisClient\npubSubClient = redis.makeCopy();\npubSubClient.subscribe(&#x27;updateEnvConfig&#x27;)\npubSubClient.on(&#x27;message&#x27;, function(channel, message) {\n  \n  pubSubMessage = {channel, message}\n  // pubSubMessage[channel] = message;\n  \n});\n//let deletes = await redis.delAsync([&#x27;ENV.CONFIG&#x27;]);\n//console.log(deletes)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;010b897c-4192-4eec-92dd-c9156201e103&quot;,&quot;parentUUID&quot;:&quot;4237f72e-3fa8-4b49-abe0-b85c2e6f2f48&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a23ad4f8-17cc-4641-93cf-0fff46a94489&quot;,&quot;title&quot;:&quot;config helper&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/config-processor/test/integration/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;27a6fc4a-f220-4d6d-86a7-c0e125772229&quot;,&quot;title&quot;:&quot;setConfig&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/config-processor/test/integration/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set ENV.CONFIG in redis based on a local config file&quot;,&quot;fullTitle&quot;:&quot;Config Processor ENV.CONFIG tests config helper setConfig should set ENV.CONFIG in redis based on a local config file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:333,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await configHelper.setEnvConfig()\nlet storedConfig = await redis.getAsync(&#x27;ENV.CONFIG&#x27;)\n//console.log(\&quot;wow\&quot;,storedConfig)\nexpect(storedConfig).to.exist;\nstoredConfig = JSON.parse(storedConfig);\n//expect(storedConfig.cacheTime).to.exist;\nawait delay(300)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98ce98c4-0d00-4b5c-82b2-f37f173cfe13&quot;,&quot;parentUUID&quot;:&quot;27a6fc4a-f220-4d6d-86a7-c0e125772229&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a message on the updateEnvConfig pub/sub channel&quot;,&quot;fullTitle&quot;:&quot;Config Processor ENV.CONFIG tests config helper setConfig should get a message on the updateEnvConfig pub/sub channel&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(pubSubMessage.channel).to.equal(&#x27;updateEnvConfig&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;788d3488-e493-4637-8e76-9ee879378af7&quot;,&quot;parentUUID&quot;:&quot;27a6fc4a-f220-4d6d-86a7-c0e125772229&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should set ENV.CONFIG in redis based on a S3 config file&quot;,&quot;fullTitle&quot;:&quot;Config Processor ENV.CONFIG tests config helper setConfig should set ENV.CONFIG in redis based on a S3 config file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.USE_S3_FILES=\&quot;true\&quot;\nawait configHelper.setEnvConfig()\nlet storedConfig = await redis.getAsync(&#x27;ENV.CONFIG&#x27;)\nexpect(storedConfig).to.exist;\nstoredConfig = JSON.parse(storedConfig);\nexpect(storedConfig.cacheTime).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5660652d-b090-4b06-82fd-4bc7cb2ea438&quot;,&quot;parentUUID&quot;:&quot;27a6fc4a-f220-4d6d-86a7-c0e125772229&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;98ce98c4-0d00-4b5c-82b2-f37f173cfe13&quot;,&quot;788d3488-e493-4637-8e76-9ee879378af7&quot;,&quot;5660652d-b090-4b06-82fd-4bc7cb2ea438&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:347,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;44ba76fb-5ca2-47c3-912b-82d23651b196&quot;,&quot;title&quot;:&quot;Config data instance tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/config-processor/test/integration/dataInstance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/dataInstance.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config data instance tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.TESTING = true;\npubSubClient.subscribe(&#x27;updateDataInstances&#x27;)\npubSubClient.on(&#x27;message&#x27;, function(channel, message) {\n  \n  pubSubMessage = {channel, message}\n  // pubSubMessage[channel] = message;\n  \n});\n  \nlet deletes = await redis.delAsync([&#x27;data_instances&#x27;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6fcdad23-5508-4669-8adf-4d71329eee28&quot;,&quot;parentUUID&quot;:&quot;44ba76fb-5ca2-47c3-912b-82d23651b196&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;08665937-5d1f-4eed-83ef-f78e18f1f592&quot;,&quot;title&quot;:&quot;dataInstasnce helper&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/config-processor/test/integration/dataInstance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/dataInstance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ec6e86cd-61cd-4d11-8068-86ff13729d7e&quot;,&quot;title&quot;:&quot;updateDataInstances&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/config-processor/test/integration/dataInstance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/dataInstance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set data_instances in redis&quot;,&quot;fullTitle&quot;:&quot;Config data instance tests dataInstasnce helper updateDataInstances should set data_instances in redis&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:906,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await dataInstanceHelper.updateDataInstances();\nlet storedDataInstances = await redis.getAsync(&#x27;data_instances&#x27;)\nexpect(storedDataInstances).to.exist;\nstoredDataInstances = JSON.parse(storedDataInstances);\nexpect(Object.keys(storedDataInstances).length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e5db876-ab34-4d8a-8270-538f1e6e96bc&quot;,&quot;parentUUID&quot;:&quot;ec6e86cd-61cd-4d11-8068-86ff13729d7e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a message on the updateDataInstances pub/sub channel&quot;,&quot;fullTitle&quot;:&quot;Config data instance tests dataInstasnce helper updateDataInstances should get a message on the updateDataInstances pub/sub channel&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:301,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await delay(300)\nexpect(pubSubMessage.channel).to.equal(&#x27;updateDataInstances&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0169fb3f-f1e1-4c37-9aa4-92c96f020a7c&quot;,&quot;parentUUID&quot;:&quot;ec6e86cd-61cd-4d11-8068-86ff13729d7e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0e5db876-ab34-4d8a-8270-538f1e6e96bc&quot;,&quot;0169fb3f-f1e1-4c37-9aa4-92c96f020a7c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1207,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8c85e8dd-87db-4f9b-ac11-78bf5ffd0f84&quot;,&quot;title&quot;:&quot;Config license tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/config-processor/test/integration/license.test.js&quot;,&quot;file&quot;:&quot;/test/integration/license.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config license tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.TESTING = true;\npubSubClient.subscribe(&#x27;updateLicenses&#x27;)\npubSubClient.on(&#x27;message&#x27;, function(channel, message) {\n  \n  pubSubMessage = {channel, message}\n  // pubSubMessage[channel] = message;\n  \n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;754a54dc-fb88-4cd2-b357-54b6a572c8f3&quot;,&quot;parentUUID&quot;:&quot;8c85e8dd-87db-4f9b-ac11-78bf5ffd0f84&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6c3b4e13-9d8c-4376-a4e2-8f3ca58eb943&quot;,&quot;title&quot;:&quot;license helper&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/config-processor/test/integration/license.test.js&quot;,&quot;file&quot;:&quot;/test/integration/license.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;29ed3ff3-5e3c-4f73-8a51-52498dfc9adf&quot;,&quot;title&quot;:&quot;updateLicenses&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/config-processor/test/integration/license.test.js&quot;,&quot;file&quot;:&quot;/test/integration/license.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set licenses and x.license in redis for all dataInstances&quot;,&quot;fullTitle&quot;:&quot;Config license tests license helper updateLicenses should set licenses and x.license in redis for all dataInstances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:414,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await licenseHelper.updateLicenses()\nlet storedLicences = await redis.hgetallAsync(&#x27;licenses&#x27;)\nlicenseId = Object.keys(storedLicences)[0]\nexpect(storedLicences).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;841195ef-90c3-46d1-93b7-5d176fb800c7&quot;,&quot;parentUUID&quot;:&quot;29ed3ff3-5e3c-4f73-8a51-52498dfc9adf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a message on the updateLicenses pub/sub channel&quot;,&quot;fullTitle&quot;:&quot;Config license tests license helper updateLicenses should get a message on the updateLicenses pub/sub channel&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:301,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await delay(300)\nexpect(pubSubMessage.channel).to.equal(&#x27;updateLicenses&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c87f6f53-2d14-453d-b70b-d012cfc64f25&quot;,&quot;parentUUID&quot;:&quot;29ed3ff3-5e3c-4f73-8a51-52498dfc9adf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should set license redis for all dataInstances&quot;,&quot;fullTitle&quot;:&quot;Config license tests license helper updateLicenses should set license redis for all dataInstances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:187,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await licenseHelper.updateLicenses(licenseId)\nlet storedLicences = await redis.hgetallAsync(&#x27;licenses&#x27;)\nexpect(storedLicences).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;891de55a-f11e-4054-910d-1a496a62ebd5&quot;,&quot;parentUUID&quot;:&quot;29ed3ff3-5e3c-4f73-8a51-52498dfc9adf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;841195ef-90c3-46d1-93b7-5d176fb800c7&quot;,&quot;c87f6f53-2d14-453d-b70b-d012cfc64f25&quot;,&quot;891de55a-f11e-4054-910d-1a496a62ebd5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:902,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0a5fd6b6-fd45-4a91-b8fe-b2563abe4b27&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f225b27e-acf5-449e-8e6a-fb86cf9484d2&quot;,&quot;title&quot;:&quot;Core Service biztimes&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/biztimes.test.js&quot;,&quot;file&quot;:&quot;/test/biztimes.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service biztimes \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()\nlet test_yml = await getTestConfig();\ntest_data = test_yml.data;\nbiz = { \&quot;Active\&quot;: false, \&quot;EndHour\&quot;: 17, \&quot;EndMinute\&quot;: 0, \&quot;SID\&quot;: test_data.biz_sid, \&quot;StartHour\&quot;: 9, \&quot;StartMinute\&quot;: 15, \&quot;Weekday\&quot;: 0 }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04ca2fcf-8469-4363-992b-3520089cdb35&quot;,&quot;parentUUID&quot;:&quot;f225b27e-acf5-449e-8e6a-fb86cf9484d2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;768fb9f6-881c-48d7-a40d-d1b9535e43cc&quot;,&quot;title&quot;:&quot;GET /biztimes&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/biztimes.test.js&quot;,&quot;file&quot;:&quot;/test/biztimes.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets biztimes&quot;,&quot;fullTitle&quot;:&quot;Core Service biztimes GET /biztimes gets biztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:47,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/biztimes&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n// biz = res.body.Items[0];\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b953a49-d934-4bcf-82ae-06a0a1302564&quot;,&quot;parentUUID&quot;:&quot;768fb9f6-881c-48d7-a40d-d1b9535e43cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7b953a49-d934-4bcf-82ae-06a0a1302564&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:47,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;345a6e36-1ffe-4420-b1d6-1cbdf33db6ea&quot;,&quot;title&quot;:&quot;POST /biztimes/save&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/biztimes.test.js&quot;,&quot;file&quot;:&quot;/test/biztimes.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service biztimes POST /biztimes/save \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;if (biz.EndHour &lt; 24)\n    biz.EndHour = biz.EndHour + 1\nelse\n    biz.EndHour = biz.EndHour - 23&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff959950-ae42-4d2e-a0fe-98f1d963bd4c&quot;,&quot;parentUUID&quot;:&quot;345a6e36-1ffe-4420-b1d6-1cbdf33db6ea&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;saves biztimes&quot;,&quot;fullTitle&quot;:&quot;Core Service biztimes POST /biztimes/save saves biztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/biztimes/save&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(biz)\n//console.log(res.body)\nexpect(res.status).to.equal(200);\nexpect(res.body.EndHour).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;06e7375a-5e05-466a-bf98-8400597029f9&quot;,&quot;parentUUID&quot;:&quot;345a6e36-1ffe-4420-b1d6-1cbdf33db6ea&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;06e7375a-5e05-466a-bf98-8400597029f9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:27,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;7304c913-c0a5-4953-a834-497391a0e0f9&quot;,&quot;title&quot;:&quot;Core Service category&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service category \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a82c1279-667e-4d1c-8b75-6fde674954fa&quot;,&quot;parentUUID&quot;:&quot;7304c913-c0a5-4953-a834-497391a0e0f9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f244145e-4504-4d65-bf2c-55e52d1c7de1&quot;,&quot;title&quot;:&quot;GET tree/{object_type}&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service category GET tree/{object_type} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:36,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/categories/tree/category?node=all&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            category = res.body[0]\n            coreResult = res.body;\n            //console.log(res.body)\n            expect(res.status).to.equal(200);\n            // expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9df81b3-9ad2-4a50-9d60-e758935bdbf9&quot;,&quot;parentUUID&quot;:&quot;f244145e-4504-4d65-bf2c-55e52d1c7de1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e9df81b3-9ad2-4a50-9d60-e758935bdbf9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:36,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;a7cd7cc4-ec34-44ab-a638-2893e999f32f&quot;,&quot;title&quot;:&quot;GET {sid}&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service category GET {sid} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/category/&#x27; + category.id)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            //console.log(res.body);\n            coreResult = res.body;\n            expect(res.status).to.equal(200);\n            expect(res.body.Name).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;adede329-7d1e-4072-b3aa-8a72dc5a8c01&quot;,&quot;parentUUID&quot;:&quot;a7cd7cc4-ec34-44ab-a638-2893e999f32f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;adede329-7d1e-4072-b3aa-8a72dc5a8c01&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;5d526fc3-3e20-4b6c-8133-b1f8e5590935&quot;,&quot;title&quot;:&quot;POST save&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service category POST save core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/category/save&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(category_save)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.CreatedDate).to.exist;\n// expect(res.body.Name).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6946d031-1495-4a24-9497-a0c9c874bd60&quot;,&quot;parentUUID&quot;:&quot;5d526fc3-3e20-4b6c-8133-b1f8e5590935&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6946d031-1495-4a24-9497-a0c9c874bd60&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;c279c5f9-75af-4202-8da4-672fdffecdda&quot;,&quot;title&quot;:&quot;GET {sid}/delete&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service category GET {sid}/delete \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//Fetch category sid to delete\n            let resp = await chai.request(newUrlBase)\n                .get(&#x27;/categories/tree/category?node=all&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            category = resp.body;\n            category.forEach(element =&gt; {\n                //console.log(element.Name);\n                if (element.Name == &#x27;Qa Auto&#x27;)\n                    cate_delete = element;\n            });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;975bfb69-8a93-4440-bef5-15a448588e52&quot;,&quot;parentUUID&quot;:&quot;c279c5f9-75af-4202-8da4-672fdffecdda&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service category GET {sid}/delete core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/category/&#x27; + cate_delete.id + &#x27;/delete&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body).to.equal(0);\n// expect(res.body.Name).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2b6f2d56-f12a-460e-b72f-973601338d6b&quot;,&quot;parentUUID&quot;:&quot;c279c5f9-75af-4202-8da4-672fdffecdda&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2b6f2d56-f12a-460e-b72f-973601338d6b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;a1bd32c8-e982-4f34-bee5-ed4aed3bcf9b&quot;,&quot;title&quot;:&quot;Core Service contacts&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3640b31-11ac-419f-9170-84467a6e2b56&quot;,&quot;parentUUID&quot;:&quot;a1bd32c8-e982-4f34-bee5-ed4aed3bcf9b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;72d8eee5-c799-47f2-9e9d-a85e46f698d7&quot;,&quot;title&quot;:&quot;GET /contacts/current&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET /contacts/current core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                        .get(&#x27;/contacts/current/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n                        .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n                  coreResult = res.body;\n                  expect(res.status).to.equal(200);\n                  expect(res.body.ContactID).to.exist;\n                  currentUser_sid = res.body.SID&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8a41e8bf-9983-4542-be9f-657638531bcd&quot;,&quot;parentUUID&quot;:&quot;72d8eee5-c799-47f2-9e9d-a85e46f698d7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8a41e8bf-9983-4542-be9f-657638531bcd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;33bd87b5-6127-4f93-aa49-f4d11889783b&quot;,&quot;title&quot;:&quot;GET detail/{contact_sid}&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET detail/{contact_sid} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                        .get(&#x27;/contacts/detail/&#x27; + currentUser_sid)\n                        .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n                  coreResult = res.body;\n                  expect(res.status).to.equal(200);\n                  expect(res.body.ContactID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;82c8bc05-b903-43dd-9102-decc6d9b992b&quot;,&quot;parentUUID&quot;:&quot;33bd87b5-6127-4f93-aa49-f4d11889783b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;82c8bc05-b903-43dd-9102-decc6d9b992b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;90d1730c-4c25-4164-8623-88202b16bee3&quot;,&quot;title&quot;:&quot;GET {contact_sid}/attributes&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET {contact_sid}/attributes core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contact/&#x27; + currentUser_sid + &#x27;/attributes&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//Need clarifacation on a valaid test \nexpect(res.body[0]).to.exist;\nexpect(res.body[1]).to.exist;\nexpect(res.body[2]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59817b29-2107-4eb5-b8c4-964f5571935f&quot;,&quot;parentUUID&quot;:&quot;90d1730c-4c25-4164-8623-88202b16bee3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;59817b29-2107-4eb5-b8c4-964f5571935f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;8adf7775-12fc-4116-b6fc-87af4ed87965&quot;,&quot;title&quot;:&quot;GET {contact_sid}/delegations&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET {contact_sid}/delegations core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contact/&#x27; + currentUser_sid + &#x27;/delegations&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\n// //console.log(res.body)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;689304c9-d63d-4813-9d57-4091afcb5eaa&quot;,&quot;parentUUID&quot;:&quot;8adf7775-12fc-4116-b6fc-87af4ed87965&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;689304c9-d63d-4813-9d57-4091afcb5eaa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;7185ebcc-13d5-4819-a014-bc57c9b1ea19&quot;,&quot;title&quot;:&quot;GET byuserid/{user_id}&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET byuserid/{user_id} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contacts/byuserid/iApprove&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\n//console.log(res.body)\nexpect(res.status).to.equal(200);\n//Need clarifacation on a valaid test \n// expect(res.body[0]).to.exist;\n// expect(res.body[1]).to.exist;\n// expect(res.body[2]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;516ccd3f-b0a3-402e-8ecb-e7ba0b4a0232&quot;,&quot;parentUUID&quot;:&quot;7185ebcc-13d5-4819-a014-bc57c9b1ea19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;516ccd3f-b0a3-402e-8ecb-e7ba0b4a0232&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;c3bcdade-c420-44e6-9502-b5a7014d0b80&quot;,&quot;title&quot;:&quot;GET /contacts/search&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET /contacts/search core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contacts/search?search=System&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n// //console.log(res.body)\ncoreResult = res.body;\n//console.log(res.body);\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;04d65fcd-1abb-45ef-8220-12c529a57870&quot;,&quot;parentUUID&quot;:&quot;c3bcdade-c420-44e6-9502-b5a7014d0b80&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;04d65fcd-1abb-45ef-8220-12c529a57870&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;1f59fbc8-ec7a-4712-8d5f-f4f9ade2dd84&quot;,&quot;title&quot;:&quot;GET /contact/search/quick/name&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET /contact/search/quick/name core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contacts/search/quick/name/script/?start=0&amp;count=20&amp;sort=Name&amp;dir=ASC&amp;filter=System&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n//console.log(res.body)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;da63d084-1cc5-499a-8797-77f5f80ceb60&quot;,&quot;parentUUID&quot;:&quot;1f59fbc8-ec7a-4712-8d5f-f4f9ade2dd84&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;da63d084-1cc5-499a-8797-77f5f80ceb60&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;4b4ccac6-fb78-40de-bf56-f7ec49e4e5f3&quot;,&quot;title&quot;:&quot;GET /contacts/contactdetailsearch/{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET /contacts/contactdetailsearch/{page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contacts/contactdetailsearch/0/10/LAST_NAME/ASC/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n//console.log(res.body)\nexpect(res.status).to.equal(200);\ncoreResult = res.body;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;af6bc0bb-a034-46b8-991a-b2307b85f9f4&quot;,&quot;parentUUID&quot;:&quot;4b4ccac6-fb78-40de-bf56-f7ec49e4e5f3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;af6bc0bb-a034-46b8-991a-b2307b85f9f4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:33,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;0b37c114-0873-4434-ab54-05ae9cb57362&quot;,&quot;title&quot;:&quot;POST /contacts/save | update&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts POST /contacts/save | update core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:409,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .post(&#x27;/contacts/save&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send(contact);\ninsertedSid = res.text\n//console.log(res.text)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e255d90c-3431-40a4-a188-e2cf7f6d00d3&quot;,&quot;parentUUID&quot;:&quot;0b37c114-0873-4434-ab54-05ae9cb57362&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;core service update&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts POST /contacts/save | update core service update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:390,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;contact.SID = insertedSid;\nlet res = await chai.request(newUrlBase)\n      .post(&#x27;/contacts/update&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send(contact);\n//console.log(res.body)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;11de48ac-abcc-4186-a0da-ec559c5b5072&quot;,&quot;parentUUID&quot;:&quot;0b37c114-0873-4434-ab54-05ae9cb57362&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e255d90c-3431-40a4-a188-e2cf7f6d00d3&quot;,&quot;11de48ac-abcc-4186-a0da-ec559c5b5072&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:799,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;07441960-5826-43a9-bda6-fbb6d7e8e84d&quot;,&quot;title&quot;:&quot;POST /contacts/replace POST&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts POST /contacts/replace POST \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;replace_user = [[\&quot;OldContactSid\&quot;, insertedSid], [\&quot;ReplacementContactSid\&quot;, insertedSid2], [\&quot;RecipientReplace\&quot;, \&quot;No\&quot;], [\&quot;OpenTaskReplace\&quot;, \&quot;No\&quot;], [\&quot;GroupReplace\&quot;, \&quot;No\&quot;], [\&quot;RoleReplace\&quot;, \&quot;No\&quot;], [\&quot;DelegationReplace\&quot;, \&quot;No\&quot;]]&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5360b13-0cb7-46c4-a231-c67a9e2f6ee8&quot;,&quot;parentUUID&quot;:&quot;07441960-5826-43a9-bda6-fbb6d7e8e84d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service update&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts POST /contacts/replace POST core service update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;contact.SID = insertedSid;\nlet res = await chai.request(newUrlBase)\n      .post(&#x27;/contacts/replace &#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send(replace_user);\n//console.log(res.body)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d1a1a5f-491c-45b4-b219-17e904eb65eb&quot;,&quot;parentUUID&quot;:&quot;07441960-5826-43a9-bda6-fbb6d7e8e84d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4d1a1a5f-491c-45b4-b219-17e904eb65eb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;86bd822e-83fd-4547-afd5-b872fc5caa64&quot;,&quot;title&quot;:&quot;Core service dbconns&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/dbconn.test.js&quot;,&quot;file&quot;:&quot;/test/dbconn.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core service dbconns \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96148425-e961-43b3-a6a6-a65fcea5bc01&quot;,&quot;parentUUID&quot;:&quot;86bd822e-83fd-4547-afd5-b872fc5caa64&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all dbconns&quot;,&quot;fullTitle&quot;:&quot;Core service dbconns it should GET all dbconns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .get(&#x27;/dbconns/list/0/1000/Name/ASC/script/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6ecab8f-f540-4a45-9528-4ffbff3ee5d1&quot;,&quot;parentUUID&quot;:&quot;86bd822e-83fd-4547-afd5-b872fc5caa64&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should add a test dbconn&quot;,&quot;fullTitle&quot;:&quot;Core service dbconns it should add a test dbconn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .post(&#x27;/dbconns/save/script/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n  .send(testDbConn)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\nexpect(res.text).to.be.a.guid()\ntestDbConnSid = res.text\n// verify testDbConn comes back in list\nres = await chai.request(newUrlBase)\n  .get(&#x27;/dbconns/list/0/1000/Name/ASC/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst idx = res.body.Items.findIndex(item =&gt; item.SID == testDbConnSid);\nexpect(idx).to.be.greaterThan(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6db59886-f239-4517-ab9b-f928101b6e2a&quot;,&quot;parentUUID&quot;:&quot;86bd822e-83fd-4547-afd5-b872fc5caa64&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should delete the test dbconn&quot;,&quot;fullTitle&quot;:&quot;Core service dbconns it should delete the test dbconn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .post(&#x27;/dbconns/delete/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n  .send([testDbConnSid])\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\nexpect(res.text).to.equal(&#x27;1&#x27;);\n// verify testDbConn does not come back in list\nres = await chai.request(newUrlBase)\n  .get(&#x27;/dbconns/list/0/1000/Name/ASC/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst idx = res.body.Items.findIndex(item =&gt; item.SID == testDbConnSid);\nexpect(idx).to.equal(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e266047b-7ce3-4755-aa00-dc223bed0899&quot;,&quot;parentUUID&quot;:&quot;86bd822e-83fd-4547-afd5-b872fc5caa64&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c6ecab8f-f540-4a45-9528-4ffbff3ee5d1&quot;,&quot;6db59886-f239-4517-ab9b-f928101b6e2a&quot;,&quot;e266047b-7ce3-4755-aa00-dc223bed0899&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:76,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;f75ab62b-819c-4ae2-919b-a32617e5dd79&quot;,&quot;title&quot;:&quot;Core Service groups&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service groups \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b0f5af83-6e46-4cce-ae00-7976c6de2d1d&quot;,&quot;parentUUID&quot;:&quot;f75ab62b-819c-4ae2-919b-a32617e5dd79&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d3612103-c7de-417f-a74c-de233676ff01&quot;,&quot;title&quot;:&quot;POST /group/save&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups POST /group/save core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                        .post(&#x27;/groups/save/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n                        .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n                        .send({ \&quot;Name\&quot;: \&quot;Qa Auto\&quot;, \&quot;Description\&quot;: \&quot;This is an automation\&quot;, \&quot;Dynamic\&quot;: 0 })\n                  new_groupSid = res.text;\n                  expect(res.status).to.equal(200);\n                  expect(res.text).to.exist;\n                  expect(res.text).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58e30166-9e19-4050-8612-04815f48a4d7&quot;,&quot;parentUUID&quot;:&quot;d3612103-c7de-417f-a74c-de233676ff01&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;58e30166-9e19-4050-8612-04815f48a4d7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;12152f68-0ffb-44d0-b2e5-6d7fc320c7d9&quot;,&quot;title&quot;:&quot;POST /groups/members/{groupSid}/add&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups POST /groups/members/{groupSid}/add core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:37,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .post(&#x27;/groups/members/&#x27; + new_groupSid + &#x27;/add&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send([{ SID: system_user, ContactType: 1 }])\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;771fc4d2-a99d-4819-9361-1ac72eed7db6&quot;,&quot;parentUUID&quot;:&quot;12152f68-0ffb-44d0-b2e5-6d7fc320c7d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;771fc4d2-a99d-4819-9361-1ac72eed7db6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:37,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;f669b0b1-d0f9-42ce-a227-fd955951934a&quot;,&quot;title&quot;:&quot;POST /groups/members/{groupSid}/remove&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups POST /groups/members/{groupSid}/remove core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .post(&#x27;/groups/members/&#x27; + new_groupSid + &#x27;/remove&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send([{ SID: system_user, ContactType: 1 }])\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;37d696b9-6e29-4d62-9cda-ef6dbeb209ff&quot;,&quot;parentUUID&quot;:&quot;f669b0b1-d0f9-42ce-a227-fd955951934a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;37d696b9-6e29-4d62-9cda-ef6dbeb209ff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;0b56f1d7-42b5-491d-ba03-6e8daca9803b&quot;,&quot;title&quot;:&quot;GET /groups​/{sid}​/delete&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups​/{sid}​/delete core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/&#x27; + new_groupSid + &#x27;/delete&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\nexpect(res.text).to.equal(&#x27;true&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08b77896-302a-4963-9439-16e9799f44b3&quot;,&quot;parentUUID&quot;:&quot;0b56f1d7-42b5-491d-ba03-6e8daca9803b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;08b77896-302a-4963-9439-16e9799f44b3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;b79981e0-e46a-435d-8e49-53c86eb357d5&quot;,&quot;title&quot;:&quot;GET /groups/list/simple&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/list/simple core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/list/simple&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body[0]).to.be.an(&#x27;array&#x27;).that.does.include(&#x27;Administrators&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3780e99c-e5ba-418e-be1d-14976b072737&quot;,&quot;parentUUID&quot;:&quot;b79981e0-e46a-435d-8e49-53c86eb357d5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3780e99c-e5ba-418e-be1d-14976b072737&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;918b3d79-2182-4d0d-9f59-527a3dd71c82&quot;,&quot;title&quot;:&quot;GET /groups/{sid}&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/{sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/&#x27; + groupSid)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.SID).to.exist\nexpect(res.body.SID).to.be.guid\n// expect(res.).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8025329e-6ae6-4dd5-b95a-54c933d5a8dc&quot;,&quot;parentUUID&quot;:&quot;918b3d79-2182-4d0d-9f59-527a3dd71c82&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8025329e-6ae6-4dd5-b95a-54c933d5a8dc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;972c8d49-7bea-440f-99ad-d15dd6ae33e4&quot;,&quot;title&quot;:&quot;GET /groups/listroleassociation/{groupSid}&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/listroleassociation/{groupSid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/listroleassociation/&#x27; + groupSid)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body[0]).to.be.an(&#x27;array&#x27;).that.does.include(&#x27;System Administrators&#x27;);\n// expect(res.).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;771e741b-335b-40be-9aff-8bbdc99aacd3&quot;,&quot;parentUUID&quot;:&quot;972c8d49-7bea-440f-99ad-d15dd6ae33e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;771e741b-335b-40be-9aff-8bbdc99aacd3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;eccd30d1-7252-4922-b9fa-c963485107e6&quot;,&quot;title&quot;:&quot;GET /groups/select/{contact_sid}&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/select/{contact_sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/select/&#x27; + system_user)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59ff8cd5-7cab-438e-b7f4-762fb43ebc37&quot;,&quot;parentUUID&quot;:&quot;eccd30d1-7252-4922-b9fa-c963485107e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;59ff8cd5-7cab-438e-b7f4-762fb43ebc37&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;a2de9ad1-65c1-4901-9c64-5870b344037d&quot;,&quot;title&quot;:&quot;GET /groups​/nondynamic​/list​/simple&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups​/nondynamic​/list​/simple core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/nondynamic/list/simple&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a09cac85-ae76-4442-bf9b-5cb2f67fdb5b&quot;,&quot;parentUUID&quot;:&quot;a2de9ad1-65c1-4901-9c64-5870b344037d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a09cac85-ae76-4442-bf9b-5cb2f67fdb5b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;cb834c09-2aef-408f-a495-2df50ee46d25&quot;,&quot;title&quot;:&quot;​GET /groups​/listmembers​/{sid}&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups ​GET /groups​/listmembers​/{sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/listmembers/&#x27; + groupSid)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;513e8bdf-5efa-44e2-ab1c-facd8bff1d5d&quot;,&quot;parentUUID&quot;:&quot;cb834c09-2aef-408f-a495-2df50ee46d25&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;513e8bdf-5efa-44e2-ab1c-facd8bff1d5d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;8e631886-61df-4e33-9a03-b2048cd35a8d&quot;,&quot;title&quot;:&quot;​GET /groups​/list​/{page}​/{count}​/{sort}​/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups ​GET /groups​/list​/{page}​/{count}​/{sort}​/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/list/0/10/Name/asc&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0fc8353d-e6ef-48de-985e-bca74ee8f4b0&quot;,&quot;parentUUID&quot;:&quot;8e631886-61df-4e33-9a03-b2048cd35a8d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0fc8353d-e6ef-48de-985e-bca74ee8f4b0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;237bf519-20fa-4df8-a38b-373ec1d9622d&quot;,&quot;title&quot;:&quot;GET /groups/listbypage/{sid}/{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/listbypage/{sid}/{page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/listbypage/&#x27; + groupSid + &#x27;/0/10/Name/asc&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8243848e-b550-4211-b0ba-dec379f6d280&quot;,&quot;parentUUID&quot;:&quot;237bf519-20fa-4df8-a38b-373ec1d9622d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8243848e-b550-4211-b0ba-dec379f6d280&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;e972e329-9eb9-49e6-b338-0bfdb419eb9c&quot;,&quot;title&quot;:&quot;GET /groups/listprocessassociation/{sid}&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/listprocessassociation/{sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/listprocessassociation/&#x27; + groupSid)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d2bcbcf-1af9-4765-bf9a-b4f19979192c&quot;,&quot;parentUUID&quot;:&quot;e972e329-9eb9-49e6-b338-0bfdb419eb9c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3d2bcbcf-1af9-4765-bf9a-b4f19979192c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;3f86e570-38af-485c-9a5f-7ee450490063&quot;,&quot;title&quot;:&quot;Core Service Members&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/member.test.js&quot;,&quot;file&quot;:&quot;/test/member.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service Members \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6a85a6d7-3c10-413c-a4ab-c5bd4cc81170&quot;,&quot;parentUUID&quot;:&quot;3f86e570-38af-485c-9a5f-7ee450490063&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c3af52e0-a7e3-4526-a6b6-035c230a2b6f&quot;,&quot;title&quot;:&quot;{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/member.test.js&quot;,&quot;file&quot;:&quot;/test/member.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Members {page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/member/0/10/Name/Asc/script/?filter=&amp;include=3&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist\n// expect(res.).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1d4f1fa4-93c9-4696-a064-14d7a4de030d&quot;,&quot;parentUUID&quot;:&quot;c3af52e0-a7e3-4526-a6b6-035c230a2b6f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1d4f1fa4-93c9-4696-a064-14d7a4de030d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:26,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;49d68741-1fa4-4ae0-8d4b-b98b78ed038a&quot;,&quot;title&quot;:&quot;Core Service myTasks&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/myTasks.test.js&quot;,&quot;file&quot;:&quot;/test/myTasks.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service myTasks \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e58b027-f6d0-4087-a6e9-c4f22824a479&quot;,&quot;parentUUID&quot;:&quot;49d68741-1fa4-4ae0-8d4b-b98b78ed038a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ac931627-46c5-4bac-8532-e534a5e39e19&quot;,&quot;title&quot;:&quot;GEt {status}/{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/myTasks.test.js&quot;,&quot;file&quot;:&quot;/test/myTasks.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service myTasks GEt {status}/{page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:104,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/myTasks/status/0/10/Name/Asc&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8e544001-1981-4e55-b714-82a2ad404adc&quot;,&quot;parentUUID&quot;:&quot;ac931627-46c5-4bac-8532-e534a5e39e19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8e544001-1981-4e55-b714-82a2ad404adc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:104,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;473b4839-50a9-4f8d-9ab5-d4e06fd6bb1f&quot;,&quot;title&quot;:&quot;Core Service powerForm&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()\nlet test_yml = await getTestConfig();\ntest_data = test_yml.data;\n// //console.log(test_data);\nnew_role = &#x27;{ \&quot;Name\&quot;: \&quot;Qatest\&quot;, \&quot;ExtendedDescription\&quot;: \&quot;qa automated\&quot;, \&quot;OwnerSID\&quot;:&#x27; + test_data.object_sid + &#x27;, \&quot;OwnerType\&quot;: 2 }&#x27;\npowerform = {\n    CategorySID: test_data.category_sid,\n    Name: \&quot;test\&quot;,\n    PowerFormType: \&quot;0\&quot;,\n    Version: 1\n}\n// { \&quot;ID\&quot;: 9999, \&quot;Mode\&quot;: 2, \&quot;ObjectType\&quot;: 1, \&quot;RoleSID\&quot;: test_data.role_sid, \&quot;SID\&quot;: \&quot;90645d40-9de6-48b1-b689-0a610ef1d716\&quot;, \&quot;Permissions\&quot;: 0 }, { \&quot;ID\&quot;: 9999, \&quot;Mode\&quot;: 3, \&quot;ObjectType\&quot;: 1, \&quot;RoleSID\&quot;: \&quot;e513a6ec-cfea-4bcb-8b74-eebc3439c9fc\&quot;, \&quot;SID\&quot;: \&quot;4711a8f4-68be-4772-b389-0a610ef1d7fe\&quot;, \&quot;Permissions\&quot;: 0 }, { \&quot;ID\&quot;: 9999, \&quot;Mode\&quot;: 4, \&quot;ObjectType\&quot;: 1, \&quot;RoleSID\&quot;: \&quot;e513a6ec-cfea-4bcb-8b74-eebc3439c9fc\&quot;, \&quot;SID\&quot;: \&quot;b1e03457-e202-4a99-a389-0a610ef1d79d\&quot;, \&quot;Permissions\&quot;: 0 }, { \&quot;ID\&quot;: 0, \&quot;Mode\&quot;: 5, \&quot;ObjectType\&quot;: 1, \&quot;RoleSID\&quot;: \&quot;e513a6ec-cfea-4bcb-8b74-eebc3439c9fc\&quot;, \&quot;SID\&quot;: \&quot;f221751c-ba9f-4b19-9708-1f22372dffde\&quot;, \&quot;Permissions\&quot;: 1023 }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1266ae70-a7d7-40c4-9971-1b6737bbd51a&quot;,&quot;parentUUID&quot;:&quot;473b4839-50a9-4f8d-9ab5-d4e06fd6bb1f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;94da0bb8-a7bb-4074-9e33-17f6b07e0d35&quot;,&quot;title&quot;:&quot;POST /Powerform/save&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm POST /Powerform/save core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:37,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/powerform/save&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(powerform)\nexpect(res.status).to.equal(200);\nsid = res.body.SID\n//console.log(sid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c958421d-e039-46ec-b6a3-4f5e9246a131&quot;,&quot;parentUUID&quot;:&quot;94da0bb8-a7bb-4074-9e33-17f6b07e0d35&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c958421d-e039-46ec-b6a3-4f5e9246a131&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:37,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;50a7c471-09de-4a05-ae02-ae5ec10d12c4&quot;,&quot;title&quot;:&quot;GET /Powerform/{sid}&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm GET /Powerform/{sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/powerform/&#x27; + sid)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4784d39d-0697-4abc-9c2c-c97625b6eea7&quot;,&quot;parentUUID&quot;:&quot;50a7c471-09de-4a05-ae02-ae5ec10d12c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4784d39d-0697-4abc-9c2c-c97625b6eea7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;5aac07bc-45da-4d08-82dc-3470290c5591&quot;,&quot;title&quot;:&quot;GET /Powerform/{sid}/detail&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm GET /Powerform/{sid}/detail core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/powerform/&#x27; + sid + &#x27;/detail&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6fda283-8f05-4082-8893-ac53851f8c19&quot;,&quot;parentUUID&quot;:&quot;5aac07bc-45da-4d08-82dc-3470290c5591&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f6fda283-8f05-4082-8893-ac53851f8c19&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;60b28a58-b3de-4764-b320-db631b64c611&quot;,&quot;title&quot;:&quot;GET /Powerform/{sid}/delete&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm GET /Powerform/{sid}/delete core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/powerform/&#x27; + sid + &#x27;/delete&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4af65bed-0e51-4a42-902a-b6ea6665dc68&quot;,&quot;parentUUID&quot;:&quot;60b28a58-b3de-4764-b320-db631b64c611&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4af65bed-0e51-4a42-902a-b6ea6665dc68&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;65a35d9a-2ab1-4a14-aef6-95da2dc05245&quot;,&quot;title&quot;:&quot;Core Service Process&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service Process \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken();\nlet test_yml = await getTestConfig();\ntest_data = test_yml.data;\nprc = { Name: new Date().toISOString(), Description: \&quot;Qa Automation\&quot;, CategorySID: test_data.category_sid }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e8dfc47-ea26-4dc0-bc2d-dc6b13100115&quot;,&quot;parentUUID&quot;:&quot;65a35d9a-2ab1-4a14-aef6-95da2dc05245&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d9acd2db-d382-480f-98c1-528da9195b2b&quot;,&quot;title&quot;:&quot;POST /process​/create|delete&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process POST /process​/create|delete core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:124,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/process/create&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(prc)\np1 = res.body.SID;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42fe1664-38da-47ea-941d-86a7de586b27&quot;,&quot;parentUUID&quot;:&quot;d9acd2db-d382-480f-98c1-528da9195b2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;core service | Delete&quot;,&quot;fullTitle&quot;:&quot;Core Service Process POST /process​/create|delete core service | Delete&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:211,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/process/&#x27; + p1 + &#x27;/delete&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nconsole.log(res);\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9420442f-999b-42a1-a419-de1eea08a9ff&quot;,&quot;parentUUID&quot;:&quot;d9acd2db-d382-480f-98c1-528da9195b2b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;42fe1664-38da-47ea-941d-86a7de586b27&quot;,&quot;9420442f-999b-42a1-a419-de1eea08a9ff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:335,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;76d86bf8-71e7-45da-a9c6-5c53fffe21a1&quot;,&quot;title&quot;:&quot;GET /process/{sid}/copy&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /process/{sid}/copy core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1547,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/processes/&#x27; + test_data.process_sid + &#x27;/copy&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            expect(res.status).to.equal(200);\n            //delete copied process\n            let del = await chai.request(newUrlBase)\n                .get(&#x27;/process/&#x27; + res.text + &#x27;/delete&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            expect(del.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f9d2f4c6-3024-4488-a47b-998c078f67da&quot;,&quot;parentUUID&quot;:&quot;76d86bf8-71e7-45da-a9c6-5c53fffe21a1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f9d2f4c6-3024-4488-a47b-998c078f67da&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1547,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;f7a3da9c-4a18-4839-9cd1-afedc135fe13&quot;,&quot;title&quot;:&quot;GET /processes&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:116,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0925d29-a9bf-41af-8628-9e9a81930b37&quot;,&quot;parentUUID&quot;:&quot;f7a3da9c-4a18-4839-9cd1-afedc135fe13&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a0925d29-a9bf-41af-8628-9e9a81930b37&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:116,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;64c158aa-305d-407d-90d7-2ec350ad1ea6&quot;,&quot;title&quot;:&quot;GET /processes/{SID}&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{SID} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;640a46df-e0e2-4de8-a273-6d429f59eaf2&quot;,&quot;parentUUID&quot;:&quot;64c158aa-305d-407d-90d7-2ec350ad1ea6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;640a46df-e0e2-4de8-a273-6d429f59eaf2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;0be8c3b4-ccb8-436f-b967-f8383061f297&quot;,&quot;title&quot;:&quot;GET /processes/{sid}/detail&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{sid}/detail core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/detail&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;afba2f9d-0515-43ad-b65e-76d0fc01a29f&quot;,&quot;parentUUID&quot;:&quot;0be8c3b4-ccb8-436f-b967-f8383061f297&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;afba2f9d-0515-43ad-b65e-76d0fc01a29f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;40a95a87-5310-40ee-bbcb-4fa558ca87c4&quot;,&quot;title&quot;:&quot;GET /processes/{sid}/name&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{sid}/name core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/name&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.text)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c96c164-3925-4d94-9633-1c30331bf13d&quot;,&quot;parentUUID&quot;:&quot;40a95a87-5310-40ee-bbcb-4fa558ca87c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2c96c164-3925-4d94-9633-1c30331bf13d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;18c6aaf6-b812-46fb-9fdf-0d69fa8c94c5&quot;,&quot;title&quot;:&quot;GET ​/processes​/{sid}​/summary&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET ​/processes​/{sid}​/summary core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/summary&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.text)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a344de89-c200-48f5-a4aa-608d1330c78f&quot;,&quot;parentUUID&quot;:&quot;18c6aaf6-b812-46fb-9fdf-0d69fa8c94c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a344de89-c200-48f5-a4aa-608d1330c78f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;02b4eef3-fe91-467f-9598-07df3e2eded3&quot;,&quot;title&quot;:&quot;​GET /processes​/{process_sid}​/tasks&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process ​GET /processes​/{process_sid}​/tasks core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/tasks&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e724eee9-5932-4f74-8d29-edef18eb5568&quot;,&quot;parentUUID&quot;:&quot;02b4eef3-fe91-467f-9598-07df3e2eded3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e724eee9-5932-4f74-8d29-edef18eb5568&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;f6a219c5-ae8f-4cf7-ac39-043235128881&quot;,&quot;title&quot;:&quot;GET /processes/{process_sid}/tasks/{task_sid}/rules&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{process_sid}/tasks/{task_sid}/rules core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:45,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/tasks/&#x27; + test_data.task_sid + &#x27;/rules&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;60442592-569d-4c4e-a891-6c93a5b47141&quot;,&quot;parentUUID&quot;:&quot;f6a219c5-ae8f-4cf7-ac39-043235128881&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;60442592-569d-4c4e-a891-6c93a5b47141&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:45,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;38ea0ed0-3f7d-4f5c-aafc-14ff1b519e84&quot;,&quot;title&quot;:&quot;POST /processes/{process_sid}/tasks/{task_sid}/rules/update | reorder | delete &quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process POST /processes/{process_sid}/tasks/{task_sid}/rules/update | reorder | delete  core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/tasks/&#x27; + test_data.task_sid + &#x27;/rules/update/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(rule)\nsids.one = res.body.SID;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3fddd30-171d-49ca-acc1-25e8b466d7a7&quot;,&quot;parentUUID&quot;:&quot;38ea0ed0-3f7d-4f5c-aafc-14ff1b519e84&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;core service | reorder&quot;,&quot;fullTitle&quot;:&quot;Core Service Process POST /processes/{process_sid}/tasks/{task_sid}/rules/update | reorder | delete  core service | reorder&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let reorder = { \&quot;SID\&quot;: sids.two, \&quot;Ordinal\&quot;: 2, \&quot;ConditionType\&quot;: 1, \&quot;MatchGuid\&quot;: \&quot;\&quot;, \&quot;RecipientSID\&quot;: null, \&quot;DestinationAction\&quot;: \&quot;0\&quot; }\nlet res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/tasks/&#x27; + test_data.task_sid + &#x27;/rules/reorder/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(reorder)\n//console.log(res.body)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;530a659c-d3a2-44d9-b737-64ca37d67c6a&quot;,&quot;parentUUID&quot;:&quot;38ea0ed0-3f7d-4f5c-aafc-14ff1b519e84&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e3fddd30-171d-49ca-acc1-25e8b466d7a7&quot;,&quot;530a659c-d3a2-44d9-b737-64ca37d67c6a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:53,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;35d63a5b-a762-4f73-92c5-6d5b5f0a27f2&quot;,&quot;title&quot;:&quot;Core Service processes/tasks&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()\nlet test_yml = await getTestConfig();\ntest_data = test_yml.data;\nrecipient = [{ \&quot;BaseObjectSID\&quot;: \&quot;\&quot;, \&quot;ContactType\&quot;: 2, \&quot;ReferenceObjectSID\&quot;: \&quot;\&quot;, \&quot;SID\&quot;: test_data.contact_sid }]&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dbb5aad3-c554-4731-ae8c-5251729b7866&quot;,&quot;parentUUID&quot;:&quot;35d63a5b-a762-4f73-92c5-6d5b5f0a27f2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d1817d42-b9cf-43f7-aa0d-5780df4135e0&quot;,&quot;title&quot;:&quot;GET {sid}&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {sid} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.task_sid)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;efff8247-57c3-4e29-9df9-5c68fdb57321&quot;,&quot;parentUUID&quot;:&quot;d1817d42-b9cf-43f7-aa0d-5780df4135e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;efff8247-57c3-4e29-9df9-5c68fdb57321&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;3636f14b-5f93-442a-9c91-060510ad62a0&quot;,&quot;title&quot;:&quot;GET {task_sid}/copy&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/copy core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:90,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/processes/tasks/&#x27; + test_data.task_sid + &#x27;/copy&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            //console.log(res.body);\n            coreResult = res.body;\n            //console.log(res.body);\n            expect(res.status).to.equal(200);\n            expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9bf5623-3112-416f-a1b6-f6f49fc45462&quot;,&quot;parentUUID&quot;:&quot;3636f14b-5f93-442a-9c91-060510ad62a0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c9bf5623-3112-416f-a1b6-f6f49fc45462&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:90,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;a644ce72-21ed-4144-aff1-53260754d23d&quot;,&quot;title&quot;:&quot;GET {task_sid}/notification&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/notification core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/notification&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fd59fb4-bc77-427e-9ed9-c97db01a7663&quot;,&quot;parentUUID&quot;:&quot;a644ce72-21ed-4144-aff1-53260754d23d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8fd59fb4-bc77-427e-9ed9-c97db01a7663&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;f7fff985-9ab0-4eb2-b193-10ec095ae1fe&quot;,&quot;title&quot;:&quot;GET {task_sid}/notification/restore&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/notification/restore core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/notification/restore&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;49551fc4-669e-4d4e-a73c-2e3ad86e7649&quot;,&quot;parentUUID&quot;:&quot;f7fff985-9ab0-4eb2-b193-10ec095ae1fe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;49551fc4-669e-4d4e-a73c-2e3ad86e7649&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:29,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;bd945ea7-a72f-47c8-810a-ddc7fde5df4f&quot;,&quot;title&quot;:&quot;GET {task_sid}/notification/{enabledisable}&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/notification/{enabledisable} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/notification/enabled&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1afa4293-67b7-4cc0-99ff-f0b33c4024de&quot;,&quot;parentUUID&quot;:&quot;bd945ea7-a72f-47c8-810a-ddc7fde5df4f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1afa4293-67b7-4cc0-99ff-f0b33c4024de&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;b09f49ac-f9d1-4411-99db-7da6ce2b9ad4&quot;,&quot;title&quot;:&quot;POST notification/save&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks POST notification/save core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/tasks/notification/save&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(notification)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69980a18-dffc-4959-b9d4-77cf10e8e01d&quot;,&quot;parentUUID&quot;:&quot;b09f49ac-f9d1-4411-99db-7da6ce2b9ad4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;69980a18-dffc-4959-b9d4-77cf10e8e01d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;448644dc-f7a5-45ee-9e7c-d5093380e03f&quot;,&quot;title&quot;:&quot;GET {task_sid}/notification/advancedsettings&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/notification/advancedsettings core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/notification/advancesettings&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = JSON.stringify(res.body);\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a59d742-a4d8-48c2-8247-88213f8a1548&quot;,&quot;parentUUID&quot;:&quot;448644dc-f7a5-45ee-9e7c-d5093380e03f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9a59d742-a4d8-48c2-8247-88213f8a1548&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;955d5fce-da57-4dc3-b929-1b1eec95652b&quot;,&quot;title&quot;:&quot;GET {task_sid}/recipients&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/recipients core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipients/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;501de96c-b388-465a-8a44-0df347c85a44&quot;,&quot;parentUUID&quot;:&quot;955d5fce-da57-4dc3-b929-1b1eec95652b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;501de96c-b388-465a-8a44-0df347c85a44&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:33,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;78cbd16e-8c71-4082-865d-78a497c8bf8b&quot;,&quot;title&quot;:&quot;POST {task_sid}/recipients/add&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks POST {task_sid}/recipients/add core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipients/add&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(recipient);\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98661bb9-b603-4808-814c-29d55c107eab&quot;,&quot;parentUUID&quot;:&quot;78cbd16e-8c71-4082-865d-78a497c8bf8b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;98661bb9-b603-4808-814c-29d55c107eab&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:23,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;dac20eef-5179-49bb-bc16-8b02f678ee60&quot;,&quot;title&quot;:&quot;POST {task_sid}/recipients/remove&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks POST {task_sid}/recipients/remove core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipients/remove&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(recipient);\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4946fd0f-4a49-4f2d-852c-fbd96fbf7060&quot;,&quot;parentUUID&quot;:&quot;dac20eef-5179-49bb-bc16-8b02f678ee60&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4946fd0f-4a49-4f2d-852c-fbd96fbf7060&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;e06e84c1-3ef1-4916-925a-930b82f749c3&quot;,&quot;title&quot;:&quot;GET {task_sid}/recipsettings&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/recipsettings core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipsettings/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = JSON.stringify(res.body);\nexpect(res.status).to.equal(200);\n// expect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa1bcb61-ec3b-4ecf-a81b-863454bb974c&quot;,&quot;parentUUID&quot;:&quot;e06e84c1-3ef1-4916-925a-930b82f749c3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fa1bcb61-ec3b-4ecf-a81b-863454bb974c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;bfeeda35-059f-4c91-81f2-3b02acd1025e&quot;,&quot;title&quot;:&quot;GET task_sid}/recipients/dynamic&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET task_sid}/recipients/dynamic core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipients/dynamic/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = JSON.stringify(res.body);\nexpect(res.status).to.equal(200);\nexpect(res.body.TotalItemCnt).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;353dd5c5-c46b-455f-8f27-9426a7c37baf&quot;,&quot;parentUUID&quot;:&quot;bfeeda35-059f-4c91-81f2-3b02acd1025e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;353dd5c5-c46b-455f-8f27-9426a7c37baf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;8ca54ebb-0c72-46d9-b72d-e529216da421&quot;,&quot;title&quot;:&quot;Core Service systemmessages&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ccaff808-973b-466c-905b-30487844406e&quot;,&quot;parentUUID&quot;:&quot;8ca54ebb-0c72-46d9-b72d-e529216da421&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f37782b0-89f5-4676-8ae5-6e0b378c9a28&quot;,&quot;title&quot;:&quot;POST /systemmessages/save&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should save a systemmessage&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages POST /systemmessages/save it should save a systemmessage&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:49,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .post(&#x27;/systemmessages/save/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send(testMsg)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\n\n// verify systemMessage is in the list\nres = await chai.request(newUrlBase)\n      .get(&#x27;/systemmessages/list/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst idx = res.body.Items.findIndex(item =&gt; item.MessageBody == testMsg.MessageBody);\nexpect(idx).to.be.greaterThan(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba632c33-c1d5-4e5f-8dcc-f36df970b904&quot;,&quot;parentUUID&quot;:&quot;f37782b0-89f5-4676-8ae5-6e0b378c9a28&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ba632c33-c1d5-4e5f-8dcc-f36df970b904&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:49,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;bdcb6120-5c3e-427f-9bfc-dee0fd63d396&quot;,&quot;title&quot;:&quot;GET /systemmessages/list&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all systemmessages&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages GET /systemmessages/list it should GET all systemmessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .get(&#x27;/systemmessages/list/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n  \ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64f4229b-1366-4a02-b9b7-02b853c35b34&quot;,&quot;parentUUID&quot;:&quot;bdcb6120-5c3e-427f-9bfc-dee0fd63d396&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;64f4229b-1366-4a02-b9b7-02b853c35b34&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;058c6d4c-f1a7-4c52-b34e-32e8f52b6f8c&quot;,&quot;title&quot;:&quot;GET /systemmessages/active/list&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET active systemmessages&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages GET /systemmessages/active/list it should GET active systemmessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .get(&#x27;/systemmessages/active/list/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n  \ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e2407e62-4604-4440-8610-0f2b02144109&quot;,&quot;parentUUID&quot;:&quot;058c6d4c-f1a7-4c52-b34e-32e8f52b6f8c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e2407e62-4604-4440-8610-0f2b02144109&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;1f69476c-c2cc-4ca3-9bcf-3a9db92a27b6&quot;,&quot;title&quot;:&quot;/systemmessages/{sid}}&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET system message by SID&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages /systemmessages/{sid}} it should GET system message by SID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:30,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n             .get(&#x27;/systemmessages/list/script/&#x27;)\n             .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n       \n             expect(res.status).to.equal(200);\n             expect(res.body.Items).to.exist;\n             const testSystemMsgSID = res.body.Items[0].SID;\n             res = await chai.request(newUrlBase)\n             .get(`/systemmessages/${testSystemMsgSID}/script/`)\n             .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n             expect(res.status).to.equal(200);\n             expect(res.body.SID).to.equal(testSystemMsgSID);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;12ef953b-da09-4f89-a52f-80d5fbd731d2&quot;,&quot;parentUUID&quot;:&quot;1f69476c-c2cc-4ca3-9bcf-3a9db92a27b6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;12ef953b-da09-4f89-a52f-80d5fbd731d2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:30,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;20894f9a-8362-41c2-b55e-93f041037d4c&quot;,&quot;title&quot;:&quot;GET /systemmessages/delete&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE system message&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages GET /systemmessages/delete it should DELETE system message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/systemmessages/list/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n      \nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst testSystemMsgSID = res.body.Items[0].SID;\nres = await chai.request(newUrlBase)\n  .post(&#x27;/systemmessages/delete/script/&#x27;) \n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n  .send([testSystemMsgSID])\n        \nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\nexpect(res.text).to.equal(&#x27;1&#x27;);\n        \n// verify that system message is not in the list anymore\nres = await chai.request(newUrlBase)\n      .get(&#x27;/systemmessages/list/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst idx = res.body.Items.findIndex(item =&gt; item.SID == testSystemMsgSID);\nexpect(idx).to.equal(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;436433c8-ea87-485f-abb1-f0c998bd2bb9&quot;,&quot;parentUUID&quot;:&quot;20894f9a-8362-41c2-b55e-93f041037d4c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;436433c8-ea87-485f-abb1-f0c998bd2bb9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:31,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;1c891f8a-9be7-44ee-ac05-00206f257e69&quot;,&quot;title&quot;:&quot;Core Service System Process&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/systemProcess.test.js&quot;,&quot;file&quot;:&quot;/test/systemProcess.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service System Process \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb267fb3-89a4-45d9-bb75-803dde334069&quot;,&quot;parentUUID&quot;:&quot;1c891f8a-9be7-44ee-ac05-00206f257e69&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;638c206b-78cb-437a-9f61-77aba63ffd67&quot;,&quot;title&quot;:&quot;GET S/SystemProcess/list&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/systemProcess.test.js&quot;,&quot;file&quot;:&quot;/test/systemProcess.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should save a systemmessage&quot;,&quot;fullTitle&quot;:&quot;Core Service System Process GET S/SystemProcess/list it should save a systemmessage&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:37,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/SystemProcess/list&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;260ec579-77b7-4aee-a4cc-c526956c2b00&quot;,&quot;parentUUID&quot;:&quot;638c206b-78cb-437a-9f61-77aba63ffd67&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;260ec579-77b7-4aee-a4cc-c526956c2b00&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:37,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;a62458e7-a91a-4fd0-9438-8c8bd786b0c9&quot;,&quot;title&quot;:&quot;Core Service system Settings&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/systemSettings.test.js&quot;,&quot;file&quot;:&quot;/test/systemSettings.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service system Settings \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;054be8b4-654f-42a7-91cd-c127c8b0e003&quot;,&quot;parentUUID&quot;:&quot;a62458e7-a91a-4fd0-9438-8c8bd786b0c9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;dbdd924c-5e23-40ad-a2bf-2bbe55c88c4f&quot;,&quot;title&quot;:&quot;GET /systemsettings/list&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/systemSettings.test.js&quot;,&quot;file&quot;:&quot;/test/systemSettings.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service system Settings GET /systemsettings/list core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/systemsettings/list/script/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n// expect(res.body.InstanceSID).to.exist\ncoreResult = res.body;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;90431345-52d8-4332-9a09-b727cf1abe90&quot;,&quot;parentUUID&quot;:&quot;dbdd924c-5e23-40ad-a2bf-2bbe55c88c4f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;90431345-52d8-4332-9a09-b727cf1abe90&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:32,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;fde85d69-68bc-47b3-b00d-1a259548d6e1&quot;,&quot;title&quot;:&quot;Core Service Tabs&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/tabs.test.js&quot;,&quot;file&quot;:&quot;/test/tabs.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service Tabs \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5bd18ef0-526f-44c6-a96d-8ecf8de08f5f&quot;,&quot;parentUUID&quot;:&quot;fde85d69-68bc-47b3-b00d-1a259548d6e1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b39f5b5d-cb8a-4e92-a4f8-1fed6b519fe2&quot;,&quot;title&quot;:&quot;GET {sid}&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/tabs.test.js&quot;,&quot;file&quot;:&quot;/test/tabs.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service Tabs GET {sid} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/tabs/5ffbf397-8b3a-4d06-a773-58158e39d46f/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Banner).to.exist\ncoreResult = res.body;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2748c383-95ec-4eb7-83bf-cf2ff234a0b4&quot;,&quot;parentUUID&quot;:&quot;b39f5b5d-cb8a-4e92-a4f8-1fed6b519fe2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2748c383-95ec-4eb7-83bf-cf2ff234a0b4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:27,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;e75fb2a5-29f6-4495-9d63-4e963d9aa2bf&quot;,&quot;title&quot;:&quot;GET {sid}/delete&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/tabs.test.js&quot;,&quot;file&quot;:&quot;/test/tabs.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service &quot;,&quot;fullTitle&quot;:&quot;Core Service Tabs GET {sid}/delete core-service &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/tabs/5ffbf397-8b3a-4d06-a773-58158e39d46f/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Banner).to.exist\ncoreResult = res.body;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e936642c-15c3-4690-b506-d7b350b95390&quot;,&quot;parentUUID&quot;:&quot;e75fb2a5-29f6-4495-9d63-4e963d9aa2bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e936642c-15c3-4690-b506-d7b350b95390&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;e7dcb596-d2eb-43eb-ab6d-ae9d8aa90044&quot;,&quot;title&quot;:&quot;Core Service Utilities&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/utilities.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service Utilities \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4ab9817-b9f9-4b28-adc2-d1ae96cca4d4&quot;,&quot;parentUUID&quot;:&quot;e7dcb596-d2eb-43eb-ab6d-ae9d8aa90044&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;944cb8ea-51c0-4f92-96ab-6cf13b91afa3&quot;,&quot;title&quot;:&quot;locale&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Utilities locale core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/Utilities/locales/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            //console.log(res.body);\n            coreResult = res.body;\n            expect(res.status).to.equal(200);\n            // expect(res.text).to.exist;\n            // expect(res.text).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;738d3a6e-5c69-48a4-b716-ac608e726993&quot;,&quot;parentUUID&quot;:&quot;944cb8ea-51c0-4f92-96ab-6cf13b91afa3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;738d3a6e-5c69-48a4-b716-ac608e726993&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;eb200814-eb5d-4ba2-8fe2-c65a50c7e262&quot;,&quot;title&quot;:&quot;GET /Utilities/timezone&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/core-service/test/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Utilities GET /Utilities/timezone core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/Utilities/timezone&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body[0]).to.be.an(&#x27;array&#x27;).that.does.include(&#x27;Etc/GMT+12&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ce616aa-ee8a-4bce-941e-01a9cbc1e7fd&quot;,&quot;parentUUID&quot;:&quot;eb200814-eb5d-4ba2-8fe2-c65a50c7e262&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2ce616aa-ee8a-4bce-941e-01a9cbc1e7fd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;59b45a1d-40e4-4422-bf16-c746e06e86ef&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f9b54337-83e8-482b-ae66-f23dc5cb02cd&quot;,&quot;title&quot;:&quot;Integrify Libs JWT Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e1f0f67-4284-41d3-90b9-c57d940fea1a&quot;,&quot;parentUUID&quot;:&quot;f9b54337-83e8-482b-ae66-f23dc5cb02cd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4fdd7563-94d1-44dd-ab9f-ac2d7b029803&quot;,&quot;title&quot;:&quot;getSystemToken&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a system token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests getSystemToken should return a system token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nlet token = await jwt.getSystemToken(process.env.INTEGRIFY_ENV_TOKEN, tenant)\nexpect(token).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e03a4bdf-7f4d-4bc8-a981-8e720ad1852f&quot;,&quot;parentUUID&quot;:&quot;4fdd7563-94d1-44dd-ab9f-ac2d7b029803&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e03a4bdf-7f4d-4bc8-a981-8e720ad1852f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7e61dbf0-0851-4cce-b8ad-470c8c65c0a5&quot;,&quot;title&quot;:&quot;createRefreshToken&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a refresh token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests createRefreshToken should return a refresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet exists = await redis.zrankAsync(tenant + \&quot;.refreshTokens\&quot;, refreshToken)\nexpect(refreshToken).to.exist;\nexpect(exists !== null).to.be.true&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ffe1e2e6-5e35-4646-ba52-d1ab14f22cd8&quot;,&quot;parentUUID&quot;:&quot;7e61dbf0-0851-4cce-b8ad-470c8c65c0a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ffe1e2e6-5e35-4646-ba52-d1ab14f22cd8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;caf1cc03-beb9-41d3-860b-070fe13f5cf4&quot;,&quot;title&quot;:&quot;verifyRefreshToken&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true for the non-expired token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests verifyRefreshToken should return true for the non-expired token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet exists = await jwt.verifyRefreshToken(tenant, refreshToken, options)\nexpect(exists).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ca850fd-8916-487e-9be7-06920a19ec46&quot;,&quot;parentUUID&quot;:&quot;caf1cc03-beb9-41d3-860b-070fe13f5cf4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false for the expired token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests verifyRefreshToken should return false for the expired token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5006,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\nlet refreshToken = await jwt.createRefreshToken(tenant, options)\nawait delay(5000);\nlet exists = await jwt.verifyRefreshToken(tenant, refreshToken, options)\nexpect(exists).to.be.false\nexists = await redis.zrankAsync(tenant + \&quot;.refreshTokens\&quot;, refreshToken)\nexpect(exists === null).to.be.true&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b425ec76-4d98-44ba-9104-b8ef973ee1eb&quot;,&quot;parentUUID&quot;:&quot;caf1cc03-beb9-41d3-860b-070fe13f5cf4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6ca850fd-8916-487e-9be7-06920a19ec46&quot;,&quot;b425ec76-4d98-44ba-9104-b8ef973ee1eb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5008,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5f772a2e-89f0-4ee9-ae78-64419cad388e&quot;,&quot;title&quot;:&quot;issueJwt&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a JWT&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests issueJwt should return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\noptions.expiresInAmount = 15\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\n//let exists = await jwt.verifyRefreshToken(tenant, refreshToken, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\noptions.expiresInAmount = 5\nexpect(token).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab870798-7121-48e4-ad34-7d0fca058a01&quot;,&quot;parentUUID&quot;:&quot;5f772a2e-89f0-4ee9-ae78-64419cad388e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ab870798-7121-48e4-ad34-7d0fca058a01&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6ebca1a5-fcb8-46e5-818a-0a7ef2dd50af&quot;,&quot;title&quot;:&quot;verifyJwt&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a JWT&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests verifyJwt should return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\nlet verified = jwt.verifyJwt(token, options);\nexpect(verified).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;308e9d73-5d73-4e7d-81fe-8cfa6bcecbf0&quot;,&quot;parentUUID&quot;:&quot;6ebca1a5-fcb8-46e5-818a-0a7ef2dd50af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail for an expired JWT&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests verifyJwt should fail for an expired JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5007,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\nawait delay(5000);\nlet verified, error;\ntry {\n   verified = await jwt.verifyJwt(token, options)\n} catch(e) {\n    error = e;\n}\nexpect(error).to.exist\nexpect(error.name).to.equal(\&quot;TokenExpiredError\&quot;)\nexpect(verified).to.not.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b00f9590-e7b6-48f7-983f-c144fe848b5e&quot;,&quot;parentUUID&quot;:&quot;6ebca1a5-fcb8-46e5-818a-0a7ef2dd50af&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;308e9d73-5d73-4e7d-81fe-8cfa6bcecbf0&quot;,&quot;b00f9590-e7b6-48f7-983f-c144fe848b5e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5012,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;33dd1e30-4edd-4628-839c-b4cb2a2aca70&quot;,&quot;title&quot;:&quot;renewJwt&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a new JWT using a valid refresh token and an expired token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests renewJwt should return a new JWT using a valid refresh token and an expired token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3010,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\noptions.expiresInAmount = 5;\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\nawait delay(3000); //let the token JWT time out\nlet error;\ntry {\n    verified = await jwt.verifyJwt(token, options)\n } catch(e) {\n     error = e;\n}\nexpect(error).to.exist\nexpect(error.name).to.equal(\&quot;TokenExpiredError\&quot;)\ntoken = await jwt.renewJwt(token,refreshToken, options)\nexpect(token).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ee0ca9c-c537-4ee3-b19f-050ba19cfbd3&quot;,&quot;parentUUID&quot;:&quot;33dd1e30-4edd-4628-839c-b4cb2a2aca70&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to return a new JWT using a invalid refresh token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests renewJwt should fail to return a new JWT using a invalid refresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5011,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\noptions.expiresInAmount = 2;\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\nawait delay(5000); //let the token JWT time out\nlet error;\ntry {\n    verified = await jwt.verifyJwt(token, options)\n } catch(e) {\n     error = e;\n}\nexpect(error).to.exist\nexpect(error.name).to.equal(\&quot;TokenExpiredError\&quot;)\ntry {\n    token = await jwt.renewJwt(token,refreshToken, options)\n} catch(e) {\n    error = e\n}\nexpect(error).to.exist\nexpect(error.name).to.equal(\&quot;TokenExpiredError\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;997e2703-20c6-4483-b8ef-4375f5209a40&quot;,&quot;parentUUID&quot;:&quot;33dd1e30-4edd-4628-839c-b4cb2a2aca70&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1ee0ca9c-c537-4ee3-b19f-050ba19cfbd3&quot;,&quot;997e2703-20c6-4483-b8ef-4375f5209a40&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8021,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cd751555-26d8-4d54-ab12-70e04c80b61d&quot;,&quot;title&quot;:&quot;reIssueJwt&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a new JWT using a valid refresh token and an Contact&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests reIssueJwt should return a new JWT using a valid refresh token and an Contact&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\noptions.expiresInAmount = 5;\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\ntoken = await jwt.reIssueJwt(Contact,refreshToken, options)\nexpect(token).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93064983-adea-4af7-857b-cc09e07cef7b&quot;,&quot;parentUUID&quot;:&quot;cd751555-26d8-4d54-ab12-70e04c80b61d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;93064983-adea-4af7-857b-cc09e07cef7b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f7d03317-34ba-4784-b839-84671a8c8d1a&quot;,&quot;title&quot;:&quot;Integrify Libs Config Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/config/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;014151d7-8023-4e1a-8384-98e80b18c959&quot;,&quot;title&quot;:&quot;Config&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/config/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config/config.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Config Tests Config \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5892b490-35e3-4f53-8626-b3d7de893391&quot;,&quot;parentUUID&quot;:&quot;014151d7-8023-4e1a-8384-98e80b18c959&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;dc2d3827-eea8-4082-a6e1-20c934fc2c86&quot;,&quot;title&quot;:&quot;get a config from redis&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/config/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should have config.mongo&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Config Tests Config get a config from redis should have config.mongo&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(config.mongo).to.exist;\n                //expect(true).to.equal(true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a57ef97-9de0-4674-8b99-762d920042be&quot;,&quot;parentUUID&quot;:&quot;dc2d3827-eea8-4082-a6e1-20c934fc2c86&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1a57ef97-9de0-4674-8b99-762d920042be&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c238d139-fa14-43da-9b7e-f65df5484b0a&quot;,&quot;title&quot;:&quot;log the latest git commit&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/config/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the lates git commit&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Config Tests Config log the latest git commit should return the lates git commit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let commit = Config.logRunningGitCommit(&#x27;integrify-libs&#x27;, true);\nexpect(commit).to.exist;\n//expect(true).to.equal(true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cfba30ec-b8c1-41f9-b693-959655e17625&quot;,&quot;parentUUID&quot;:&quot;c238d139-fa14-43da-9b7e-f65df5484b0a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cfba30ec-b8c1-41f9-b693-959655e17625&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3e377c4d-84ea-4b0d-9400-9b5deff8fb11&quot;,&quot;title&quot;:&quot;Integrify Libs Logger Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/logger/logger.test.js&quot;,&quot;file&quot;:&quot;/test/integration/logger/logger.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;54f6b779-586b-41bc-966b-acb54e147294&quot;,&quot;title&quot;:&quot;Logger&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/logger/logger.test.js&quot;,&quot;file&quot;:&quot;/test/integration/logger/logger.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Logger Tests Logger \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nconfig = config.test;\nthis.timeout(105000);\n//let deletes = await redis.delAsync([`${session.tenant}.permissions.${session.user_sid}`]);\n//cnsole.log(deletes)\n//process.env.DEBUG=\&quot;knex:query\&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89f65da7-634c-4435-ad16-7dfcd7153715&quot;,&quot;parentUUID&quot;:&quot;54f6b779-586b-41bc-966b-acb54e147294&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;da0ec84f-c956-4a0b-baed-c22b80a632a4&quot;,&quot;title&quot;:&quot;info&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/logger/logger.test.js&quot;,&quot;file&quot;:&quot;/test/integration/logger/logger.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should connect log a message&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Logger Tests Logger info should connect log a message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;logger.info(config.tenantOne.tenantId);\n  \nexpect(logger).to.exist;\n              \n//expect(true).to.equal(true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41460692-1456-4fad-bd7d-08ae3a36ce41&quot;,&quot;parentUUID&quot;:&quot;da0ec84f-c956-4a0b-baed-c22b80a632a4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;41460692-1456-4fad-bd7d-08ae3a36ce41&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;760b12e6-6f0c-45fa-8e6b-3deea3b0e83f&quot;,&quot;title&quot;:&quot;Integrify Libs Parse JWT Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/middleware/parseJWT.test.js&quot;,&quot;file&quot;:&quot;/test/integration/middleware/parseJWT.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Parse JWT Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);        config = await Config.getConfig()\nContact = {\n    contactSid: \&quot;1234\&quot;,\n    userName: \&quot;testuser\&quot;,\n    tenant: config.test.tenantOne.tenantId,\n    email: \&quot;test@test.com\&quot;,\n    name: \&quot;Test User\&quot;\n}\nrefreshTokenPayload = {userName: Contact.userName, contactSid: Contact.contactSid}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2fb84623-e735-414d-9850-8c319df39822&quot;,&quot;parentUUID&quot;:&quot;760b12e6-6f0c-45fa-8e6b-3deea3b0e83f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;68b471b2-507b-4025-9a08-fa2790f89123&quot;,&quot;title&quot;:&quot;parse token&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/middleware/parseJWT.test.js&quot;,&quot;file&quot;:&quot;/test/integration/middleware/parseJWT.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return extract data from a token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Parse JWT Tests parse token should return extract data from a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload)\n\ntoken = jsonwebtoken.sign(Contact, config.jwtSecret, {\&quot;audience\&quot;: config.test.tenantOne.tenantId});\nlet req = {headers: {authorization: \&quot;Bearer \&quot; + token}, cookies: {integrifyRefreshToken: refreshToken}}\nawait parseJWT(req, {status:200}, function(){})\nexpect(req.oauth.profile).to.exist;\nexpect(req.oauth.profile.sid).to.equal(\&quot;1234\&quot;);\nexpect(req.oauth.profile.user_name).to.equal(\&quot;testuser\&quot;);\nexpect(req.oauth.tenant).to.equal(config.test.tenantOne.tenantId)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40eae735-bdbd-4cdc-abee-d5dea9b2f3cb&quot;,&quot;parentUUID&quot;:&quot;68b471b2-507b-4025-9a08-fa2790f89123&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;40eae735-bdbd-4cdc-abee-d5dea9b2f3cb&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000},{&quot;uuid&quot;:&quot;6d8bd4fa-04d4-4ff9-982e-91ff3d6021c5&quot;,&quot;title&quot;:&quot;auto refresh and parse token&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/middleware/parseJWT.test.js&quot;,&quot;file&quot;:&quot;/test/integration/middleware/parseJWT.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return extract data from a token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Parse JWT Tests auto refresh and parse token should return extract data from a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20022,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let refreshToken = await jwt.createRefreshToken(Contact.tenant, refreshTokenPayload)\n\ntoken = jsonwebtoken.sign(Contact, config.jwtSecret, {\&quot;audience\&quot;: Contact.tenant, expiresIn:1});\n           \nawait delay(20000)\nlet req = {headers: {authorization: \&quot;Bearer \&quot; + token}, cookies: {integrifyRefreshToken: refreshToken}}\n          \nlet mockRes = await mocks.mockResponse();\n\nawait parseJWT(req, mockRes, function(){})\nexpect(req.oauth.profile).to.exist;\nexpect(req.oauth.profile.sid).to.equal(\&quot;1234\&quot;);\nexpect(req.oauth.profile.user_name).to.equal(\&quot;testuser\&quot;);\nexpect(req.oauth.tenant).to.equal(config.test.tenantOne.tenantId)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c4a36419-1b86-4686-85fa-5aefba6bc75d&quot;,&quot;parentUUID&quot;:&quot;6d8bd4fa-04d4-4ff9-982e-91ff3d6021c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c4a36419-1b86-4686-85fa-5aefba6bc75d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20022,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000},{&quot;uuid&quot;:&quot;9de05f93-5922-4892-98fa-0e8d81f05869&quot;,&quot;title&quot;:&quot;use system token&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/middleware/parseJWT.test.js&quot;,&quot;file&quot;:&quot;/test/integration/middleware/parseJWT.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return extract data from a token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Parse JWT Tests use system token should return extract data from a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let req = {headers: {\&quot;integrify-system-token\&quot;: config.test.tenantOne.tenantId + \&quot; \&quot; +  process.env.INTEGRIFY_ENV_TOKEN}}\nawait parseJWT(req, {status:200}, function(){})\nexpect(req.oauth.profile).to.exist;\nexpect(req.oauth.profile.sid).to.equal(\&quot;d8c469c3-f781-4179-a09c-6d148885fb30\&quot;);\nexpect(req.oauth.profile.user_name).to.equal(\&quot;Integrify\&quot;);\nexpect(req.oauth.tenant).to.equal(config.test.tenantOne.tenantId)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;00904f88-67ce-4fcb-933e-7111e001f6c2&quot;,&quot;parentUUID&quot;:&quot;9de05f93-5922-4892-98fa-0e8d81f05869&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;00904f88-67ce-4fcb-933e-7111e001f6c2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000},{&quot;uuid&quot;:&quot;8057445c-5b3a-472c-bf09-2cb946fcfded&quot;,&quot;title&quot;:&quot;Integrify Libs Mongeese Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/mongeese/db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/mongeese/db.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7a8d4d6d-c58c-49d4-abd8-38e655f0a036&quot;,&quot;title&quot;:&quot;Mongeese&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/mongeese/db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/mongeese/db.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Mongeese Tests Mongeese \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nconsole.log(config)\nconfig = config.test;\nthis.timeout(105000);\n//let deletes = await redis.delAsync([`${session.tenant}.permissions.${session.user_sid}`]);\n//cnsole.log(deletes)\n//process.env.DEBUG=\&quot;knex:query\&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c166719-2516-4d75-a8c5-2b8e0d457f9a&quot;,&quot;parentUUID&quot;:&quot;7a8d4d6d-c58c-49d4-abd8-38e655f0a036&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;94c923f7-23b9-4fe6-87c3-cf739014d188&quot;,&quot;title&quot;:&quot;mongoConn&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/mongeese/db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/mongeese/db.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should connect to mongo based on a tenant id&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Mongeese Tests Mongeese mongoConn should connect to mongo based on a tenant id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const tenantId = await config.tenantOne.tenantId;\nvar db = await mongeese.getConn(tenantId);\n    \nexpect(db).to.exist;\nexpect(db.name).to.equal(tenantId);\nexpect(db.readyState).to.equal(2);\n//expect(true).to.equal(true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3fbc3ab-d1db-4644-b971-58a244f4e56f&quot;,&quot;parentUUID&quot;:&quot;94c923f7-23b9-4fe6-87c3-cf739014d188&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a3fbc3ab-d1db-4644-b971-58a244f4e56f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fddc1b1b-9934-4fe2-af4f-97b399e927aa&quot;,&quot;title&quot;:&quot;Integrify Libs Permissions Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/permissions/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/permissions/permissions.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\nlet config = await Config.getConfig();\nconfig = config.test;\nsession = {user_sid: config.tenantOne.adminUser.sid.toLowerCase(), user_name: config.tenantOne.adminUser.userName, tenant: config.tenantOne.tenantId }\nlet deletes = await redis.delAsync([`${session.tenant}.permissions.${session.user_sid}`]);\nconsole.log(deletes)\n//process.env.DEBUG=\&quot;knex:query\&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23bebba0-2549-4899-9d56-47666913921e&quot;,&quot;parentUUID&quot;:&quot;fddc1b1b-9934-4fe2-af4f-97b399e927aa&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await redis.delAsync([`${session.tenant}.permissions.${session.user_sid}`]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4219810f-ab4f-4fe7-be29-3eacbf9d6aa3&quot;,&quot;parentUUID&quot;:&quot;fddc1b1b-9934-4fe2-af4f-97b399e927aa&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;eb9ee4b5-1fb2-4f67-9add-50f9cf7a3bf8&quot;,&quot;title&quot;:&quot;currentUserPermssions&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/permissions/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/permissions/permissions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should cache and return the current users permssiosn based on a passed-in session&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests currentUserPermssions should cache and return the current users permssiosn based on a passed-in session&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:243,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nlet perms = await permissions.currentUserPermissions(session);\nlet cached =  await redis.getAsync([`${session.tenant}.permissions.${session.user_sid}`]);\ncached = JSON.parse(cached)\nexpect(perms).length.to.be.gt(0);\nexpect(cached.length).to.equal(perms.length)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;344552d0-6830-466e-bb81-9a657a3abe1e&quot;,&quot;parentUUID&quot;:&quot;eb9ee4b5-1fb2-4f67-9add-50f9cf7a3bf8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;344552d0-6830-466e-bb81-9a657a3abe1e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:243,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5b1abba7-2671-4037-8582-9cd6a6d22cca&quot;,&quot;title&quot;:&quot;isSysAdmin&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/permissions/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/permissions/permissions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should cache and return the current users permssiosn based on a passed-in session&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests isSysAdmin should cache and return the current users permssiosn based on a passed-in session&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nlet perms = await permissions.isSysAdmin(session);\nexpect(perms).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;efa5f849-5d8b-4ad6-8790-87c99f0a2f95&quot;,&quot;parentUUID&quot;:&quot;5b1abba7-2671-4037-8582-9cd6a6d22cca&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;efa5f849-5d8b-4ad6-8790-87c99f0a2f95&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5cd3142b-254a-4e8a-ab09-0fb1f5d56c6c&quot;,&quot;title&quot;:&quot;hasPermissions&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/permissions/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/permissions/permissions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true for sysAdmin permissions&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return true for sysAdmin permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.sysAdmin);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    \&quot;irrelevantObjectGuid\&quot;,\n    \&quot;irrelevantCategoryGuid\&quot;, \&quot;irrelevantPublishStatus\&quot;);\nexpect(hasPerms).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4dfc3189-dbee-4b79-8e02-2216584005c4&quot;,&quot;parentUUID&quot;:&quot;5cd3142b-254a-4e8a-ab09-0fb1f5d56c6c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return true for System scoped permissions&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return true for System scoped permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.systemScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    \&quot;irrelevantObjectGuid\&quot;,\n    \&quot;irrelevantCategoryGuid\&quot;,\n    \&quot;irrelevantPublishStatus\&quot;);\nexpect(hasPerms).to.be.true;\nlet perms = await permissions.isSysAdmin(session);\nexpect(perms).to.be.undefined&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;457e1342-f0bb-4e89-8b1a-a2ca01219b3a&quot;,&quot;parentUUID&quot;:&quot;5cd3142b-254a-4e8a-ab09-0fb1f5d56c6c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return true for category scoped permissions&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return true for category scoped permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.categoryScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    \&quot;irrelevantObjectGuid\&quot;,\n    mocks.categoryScoped[0].ownerSid,\n    mocks.categoryScoped[0].publishStatus);\nexpect(hasPerms).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f5a81ee-74b7-4261-b9fb-b465b3caf600&quot;,&quot;parentUUID&quot;:&quot;5cd3142b-254a-4e8a-ab09-0fb1f5d56c6c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return true for Object scoped permissions&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return true for Object scoped permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.objectScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    mocks.objectScoped[0].ownerSid,\n    \&quot;irrelevantCategoryGuid\&quot;,\n    mocks.categoryScoped[0].publishStatus);\nexpect(hasPerms).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1e14bf7-6904-4692-8709-d02df3389d4e&quot;,&quot;parentUUID&quot;:&quot;5cd3142b-254a-4e8a-ab09-0fb1f5d56c6c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false for Object scoped permissions with wrong publish status&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return false for Object scoped permissions with wrong publish status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.objectScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    mocks.objectScoped[0].ownerSid,\n    \&quot;irrelevantCategoryGuid\&quot;,\n    \&quot;production\&quot;);\nexpect(hasPerms).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b906076e-f579-4dd1-bd29-16d3e756f89b&quot;,&quot;parentUUID&quot;:&quot;5cd3142b-254a-4e8a-ab09-0fb1f5d56c6c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false for bogus permission type&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return false for bogus permission type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.objectScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edizt&#x27;,\n    mocks.objectScoped[0].ownerSid,\n    \&quot;irrelevantCategoryGuid\&quot;,\n    mocks.categoryScoped[0].publishStatus);\nexpect(hasPerms).to.be.false;\nhasPerms = await permissions.hasPermissions(session,\n    &#x27;holiday&#x27;,\n    &#x27;viewconfig&#x27;);\nexpect(hasPerms).to.be.false&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3982a0d3-5520-4058-83d6-76a529974157&quot;,&quot;parentUUID&quot;:&quot;5cd3142b-254a-4e8a-ab09-0fb1f5d56c6c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4dfc3189-dbee-4b79-8e02-2216584005c4&quot;,&quot;457e1342-f0bb-4e89-8b1a-a2ca01219b3a&quot;,&quot;8f5a81ee-74b7-4261-b9fb-b465b3caf600&quot;,&quot;e1e14bf7-6904-4692-8709-d02df3389d4e&quot;,&quot;b906076e-f579-4dd1-bd29-16d3e756f89b&quot;,&quot;3982a0d3-5520-4058-83d6-76a529974157&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3b0187bd-abc6-488c-94a1-c085121aeb20&quot;,&quot;title&quot;:&quot;Integrify Libs SwaggerClient Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/serviceClient/serviceClient.test.js&quot;,&quot;file&quot;:&quot;/test/integration/serviceClient/serviceClient.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d4935a69-b807-4750-a4b3-6464ea535cc6&quot;,&quot;title&quot;:&quot;Test portalUrl&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/serviceClient/serviceClient.test.js&quot;,&quot;file&quot;:&quot;/test/integration/serviceClient/serviceClient.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs SwaggerClient Tests Test portalUrl \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//config = await Config.getConfig()\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ca14eee-bdb4-4768-b38c-869ef66f2996&quot;,&quot;parentUUID&quot;:&quot;d4935a69-b807-4750-a4b3-6464ea535cc6&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3c03385b-22db-430a-afa7-e362c77962b5&quot;,&quot;title&quot;:&quot;first check PORTAL_URL env var, then check redis&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/serviceClient/serviceClient.test.js&quot;,&quot;file&quot;:&quot;/test/integration/serviceClient/serviceClient.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should have gotten portalUrl from redis&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs SwaggerClient Tests Test portalUrl first check PORTAL_URL env var, then check redis should have gotten portalUrl from redis&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.PORTAL_URL = &#x27;&#x27;\nconst serviceClient = new ServiceClient(&#x27;constructor param no longer used&#x27;)\nconst portalUrl = await serviceClient._getPortalUrl()\nexpect(portalUrl).to.exist\nexpect(portalUrl.startsWith(&#x27;http&#x27;)).to.be.true&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d8088b7-0d4d-4da6-8d00-9b68b3b015d7&quot;,&quot;parentUUID&quot;:&quot;3c03385b-22db-430a-afa7-e362c77962b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4d8088b7-0d4d-4da6-8d00-9b68b3b015d7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3a89a022-6995-48f4-956e-8d224bb9ea80&quot;,&quot;title&quot;:&quot;Integrify Libs Contact Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/sqldb/contacts.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/contacts.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;63fac052-9ada-4691-81ec-79ba859f1c39&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/sqldb/contacts.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/contacts.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig();\nuser = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0abbad21-10f3-41c7-b0aa-278e8097bc39&quot;,&quot;parentUUID&quot;:&quot;63fac052-9ada-4691-81ec-79ba859f1c39&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should getContact&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should getContact&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:44,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nconst ContactModel = await model.getModel(config.test.tenantOne.tenantId, &#x27;Contact&#x27;)\n//console.dir(ContactModel)\nlet results = await ContactModel.query()\n//console.log(results)\nexpect(results.length).to.be.gt(0)\nlet sampleContactGuid = results[0].contactGuid\nlet contactController = new ContactController(config.test.tenantOne)\nconst Contact = await contactController.getContact(sampleContactGuid);\nexpect(Contact).to.exist;\nexpect(Contact.contactGuid).equal(sampleContactGuid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f3e9641-0ad1-44c0-b73f-44f5d2ca92f4&quot;,&quot;parentUUID&quot;:&quot;63fac052-9ada-4691-81ec-79ba859f1c39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getContactByUserName&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should getContactByUserName&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nlet sampleUserName = user.userName\nlet contactController = new ContactController(config.test.tenantOne)\nconst Contact = await contactController.getContactByUserName(sampleUserName);\nexpect(Contact).to.exist;\nexpect(Contact.userName).equal(sampleUserName)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;675adc00-bfee-41b3-965c-bbbfeca6faa8&quot;,&quot;parentUUID&quot;:&quot;63fac052-9ada-4691-81ec-79ba859f1c39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should searchContacts&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should searchContacts&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne)\n            let Contacts = await contactController.searchContacts({&#x27;auth.userName&#x27;: &#x27;iApprov&#x27;, firstName: &#x27;Sys&#x27;, lastName: &#x27;S&#x27;});\n            expect(Contacts[0]).to.exist;\n            expect(Contacts[0].userName).equal(&#x27;iApprove&#x27;)\n            Contacts = await contactController.searchContacts({&#x27;auth.userName&#x27;: &#x27;iApprove&#x27;});\n            let Contact = Contacts[0]\n            expect(Contact).to.exist;\n            expect(Contact.userName).equal(&#x27;iApprove&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;33807f3e-1d25-47d3-bd01-9d28731bb5b7&quot;,&quot;parentUUID&quot;:&quot;63fac052-9ada-4691-81ec-79ba859f1c39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should dbAuthContact&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should dbAuthContact&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:110,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\n            const Contact = await contactController.dbAuthContact(user.userName, user.password)\n            expect(Contact).to.exist;\n            expect(Contact.token).to.exist;\n            expect(Contact.refreshToken).to.exist;\n            expect(Contact).to.have.property(&#x27;passwordResetDate&#x27;);\n            expect(Contact.userName).equal(user.userName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;035b61db-3465-4ae1-92e9-fb71909914ea&quot;,&quot;parentUUID&quot;:&quot;63fac052-9ada-4691-81ec-79ba859f1c39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should indicate that juser password is not expired (passwordResetDate 2121)&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should indicate that juser password is not expired (passwordResetDate 2121)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\nconst isPasswordExpired = await contactController.isPasswordExpired(&#x27;juser&#x27;)\n\nexpect(isPasswordExpired).to.exist\nexpect(isPasswordExpired).to.be.false&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9bbf183b-bb8b-47a3-8ef4-eb66239856f6&quot;,&quot;parentUUID&quot;:&quot;63fac052-9ada-4691-81ec-79ba859f1c39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should indicate that password is expired (passwordResetDate is NULL)&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should indicate that password is expired (passwordResetDate is NULL)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\nconst isPasswordExpired = await contactController.isPasswordExpired(user.userName)\n\nexpect(isPasswordExpired).to.exist\nexpect(isPasswordExpired).to.be.true&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a67e3641-d162-4e0d-b88b-bc01a86ded15&quot;,&quot;parentUUID&quot;:&quot;63fac052-9ada-4691-81ec-79ba859f1c39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getGroupSids&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should getGroupSids&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:98,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\n            const Contact = await contactController.dbAuthContact(user.userName, user.password)\n            expect(Contact).to.exist;\n            let groupSids = await contactController.getGroupSids(Contact.contactSid)\n            expect(groupSids.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb7d83bd-0dd2-476e-a463-247fa02bd98d&quot;,&quot;parentUUID&quot;:&quot;63fac052-9ada-4691-81ec-79ba859f1c39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getAccountsByEmail&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should getAccountsByEmail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\nlet Contacts = await contactController.getAccountsByEmail(config.test.tenantOne.adminUser.email);\nexpect(Contacts.length).to.be.gt(0);\nContacts.forEach(contact =&gt; {\n  expect(contact).to.have.all.keys(&#x27;contactGuid&#x27;, &#x27;ntId&#x27;, &#x27;email&#x27;);\n  expect(contact.email).to.equal(config.test.tenantOne.adminUser.email);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0041152-9366-46b2-88f6-fdc8b0a522ad&quot;,&quot;parentUUID&quot;:&quot;63fac052-9ada-4691-81ec-79ba859f1c39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should updatePassword&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should updatePassword&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:139,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\nlet Contact = await contactController.updatePassword(\n  config.test.tenantOne.adminUser.sid,\n  bcrypt.hashSync(config.test.tenantOne.adminUser.password)\n);\nexpect(Contact).to.exist\n  .and.to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17c91868-f041-43c6-b484-6f6ed49be345&quot;,&quot;parentUUID&quot;:&quot;63fac052-9ada-4691-81ec-79ba859f1c39&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7f3e9641-0ad1-44c0-b73f-44f5d2ca92f4&quot;,&quot;675adc00-bfee-41b3-965c-bbbfeca6faa8&quot;,&quot;33807f3e-1d25-47d3-bd01-9d28731bb5b7&quot;,&quot;035b61db-3465-4ae1-92e9-fb71909914ea&quot;,&quot;9bbf183b-bb8b-47a3-8ef4-eb66239856f6&quot;,&quot;a67e3641-d162-4e0d-b88b-bc01a86ded15&quot;,&quot;eb7d83bd-0dd2-476e-a463-247fa02bd98d&quot;,&quot;f0041152-9366-46b2-88f6-fdc8b0a522ad&quot;,&quot;17c91868-f041-43c6-b484-6f6ed49be345&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:442,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f989be0f-5a68-4e06-8540-2104c6a86180&quot;,&quot;title&quot;:&quot;Integrify Libs Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/sqldb/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cfcbeb91-ee1a-4341-b12f-a9c2966a7432&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/sqldb/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Controller Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig();\nuser = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cbc5d6b7-004e-426c-b091-c2f1e5f1963d&quot;,&quot;parentUUID&quot;:&quot;cfcbeb91-ee1a-4341-b12f-a9c2966a7432&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Controller Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(controllers.BaseController).to.exist;\nclass TestController extends controllers.BaseController {}            \nconst testController = new TestController(config.test.tenantOne)\nlet tenantDb =  await testController.getTenantDb()\n\nexpect(tenantDb).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;058b47d3-7736-420d-a485-a202b119ed59&quot;,&quot;parentUUID&quot;:&quot;cfcbeb91-ee1a-4341-b12f-a9c2966a7432&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;058b47d3-7736-420d-a485-a202b119ed59&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;24c51408-1a59-4c29-81bd-26afb4d7146f&quot;,&quot;title&quot;:&quot;Integrify Libs Data Instance Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/sqldb/data-instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/data-instance.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig();\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;829d7d19-75fb-4905-9b8c-27911402f19f&quot;,&quot;parentUUID&quot;:&quot;24c51408-1a59-4c29-81bd-26afb4d7146f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e408cb74-2a97-4862-a33a-2123cd1bc36e&quot;,&quot;title&quot;:&quot;Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/sqldb/data-instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/data-instance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a consumer model&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Model Tests should get a consumer model&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const DataInstanceModel = await model.getConsumerModel(config.consumersConn, &#x27;DataInstance&#x27;)\nexpect(DataInstanceModel).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2bd4c1c8-5209-45d8-99ab-5e848c71bdd3&quot;,&quot;parentUUID&quot;:&quot;e408cb74-2a97-4862-a33a-2123cd1bc36e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return data instances&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Model Tests should return data instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const DataInstanceModel = await model.getConsumerModel(config.consumersConn, &#x27;DataInstance&#x27;)\nexpect(DataInstanceModel).to.exist;\nlet results = await DataInstanceModel.query()\nexpect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea6fec45-3d2f-4343-acfb-a5903529717a&quot;,&quot;parentUUID&quot;:&quot;e408cb74-2a97-4862-a33a-2123cd1bc36e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return data instances with settings&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Model Tests should return data instances with settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const DataInstanceModel = await model.getConsumerModel(config.consumersConn, &#x27;DataInstance&#x27;)\nexpect(DataInstanceModel).to.exist;\nlet results = await DataInstanceModel.query().eager(&#x27;[dataInstanceSettings]&#x27;)\nconsole.dir(results)\nexpect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3a26f3c-cf98-4aae-a774-9cdc1bd6c630&quot;,&quot;parentUUID&quot;:&quot;e408cb74-2a97-4862-a33a-2123cd1bc36e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2bd4c1c8-5209-45d8-99ab-5e848c71bdd3&quot;,&quot;ea6fec45-3d2f-4343-acfb-a5903529717a&quot;,&quot;e3a26f3c-cf98-4aae-a774-9cdc1bd6c630&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:43,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b9085995-0cf9-43d6-ae15-b73fa13c1008&quot;,&quot;title&quot;:&quot;Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/sqldb/data-instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/data-instance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list datainstances&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Controller Tests should list datainstances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let dataInstanceController = new DataInstanceController();\nlet dataInstances = await dataInstanceController.listDataInstances()\nexpect(dataInstances).to.exist;\nexpect(dataInstances.length).to.be.gt(0)\nexpect(dataInstances[0].dataInstanceSettings.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee9d0ab2-c369-4563-acad-8432e7fa3450&quot;,&quot;parentUUID&quot;:&quot;b9085995-0cf9-43d6-ae15-b73fa13c1008&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a datainstance&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Controller Tests should get a datainstance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let dataInstanceController = new DataInstanceController();\nlet dataInstance = await dataInstanceController.getDataInstance(config.test.tenantOne.tenantId)\nexpect(dataInstance).to.exist;\nexpect(dataInstance.dataInstanceSettings.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5257997-512c-401f-992f-f8f0aa7ce78f&quot;,&quot;parentUUID&quot;:&quot;b9085995-0cf9-43d6-ae15-b73fa13c1008&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a datainstances hash&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Controller Tests should get a datainstances hash&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let dataInstanceController = new DataInstanceController();\nlet dataInstanceHt = await dataInstanceController.GetDataInstancesHash()\nexpect(dataInstanceHt).to.exist;\nexpect(dataInstanceHt[config.test.tenantOne.tenantId]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d763bb5-f9d8-49c8-8299-903422b893ab&quot;,&quot;parentUUID&quot;:&quot;b9085995-0cf9-43d6-ae15-b73fa13c1008&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a datainstance&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Controller Tests should update a datainstance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:64,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let settingVal = new Date().toISOString()\nlet dataInstanceController = new DataInstanceController();\nlet dataInstance = await dataInstanceController.getDataInstance(config.test.tenantOne.tenantId)\nlet settingIdx  = dataInstance.dataInstanceSettings.findIndex((s =&gt; s.settingsKey === &#x27;HelpURL&#x27;));\ndataInstance.dataInstanceSettings[settingIdx].settingsValue = settingVal\ndataInstance  = await dataInstanceController.updateDataInstance(dataInstance)\nexpect(dataInstance.dataInstanceSettings.length).to.be.gt(0)\nlet setting  = dataInstance.dataInstanceSettings.find((s =&gt; s.settingsKey === &#x27;HelpURL&#x27;));\nexpect(setting).to.exist\nexpect(setting.settingsValue).to.equal(settingVal)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80d771c8-e3b1-409d-84dd-b3553291a8bf&quot;,&quot;parentUUID&quot;:&quot;b9085995-0cf9-43d6-ae15-b73fa13c1008&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ee9d0ab2-c369-4563-acad-8432e7fa3450&quot;,&quot;c5257997-512c-401f-992f-f8f0aa7ce78f&quot;,&quot;5d763bb5-f9d8-49c8-8299-903422b893ab&quot;,&quot;80d771c8-e3b1-409d-84dd-b3553291a8bf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:140,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;85ec9f9d-88bf-4af5-aed1-af46761914c0&quot;,&quot;title&quot;:&quot;Integrify Libs Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/sqldb/model.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;46d8580e-5208-4418-a4d8-6bdd14e529ff&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/sqldb/model.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/model.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig();\nuser = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6094fcd-50d3-49e4-a9a1-9302d28f7256&quot;,&quot;parentUUID&quot;:&quot;46d8580e-5208-4418-a4d8-6bdd14e529ff&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nthis.timeout(105000);\nconst ContactModel = await model.bindModel(config.test.tenantOne.tenantId, models.Contact)\n//console.dir(ContactModel)\n//ContactModel.setOptions({excludeDeleted:false})\n//let results = await ContactModel.query().where(&#x27;contactId&#x27;, &#x27;&gt;&#x27;, 0)\n//console.log(results)\nlet results;\nresults = await ContactModel.query().setOptions({excludeDeleted:false}).where(&#x27;contactId&#x27;, &#x27;&gt;&#x27;, 0)\nresults = await ContactModel.query().where(&#x27;contactId&#x27;, &#x27;&gt;&#x27;, 0)\nlet c = await ContactModel.query().findOne({userName: &#x27;iApprove&#x27;}).joinRelated(&#x27;auth&#x27;).select(&#x27;contact.*&#x27;, &#x27;contact.contactGuid as contactSid&#x27;,&#x27;auth.userName as userName&#x27;)\nconsole.log(c)\nlet patched = await c.$query().patch({middleName: \&quot;bob\&quot;})\nconsole.log(patched)\n\n\nexpect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a78d5cbc-d189-483e-b738-75486ccb49ef&quot;,&quot;parentUUID&quot;:&quot;46d8580e-5208-4418-a4d8-6bdd14e529ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a78d5cbc-d189-483e-b738-75486ccb49ef&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000},{&quot;uuid&quot;:&quot;486c587d-a4cd-4640-b9f3-514875488131&quot;,&quot;title&quot;:&quot;Integrify Libs Permissions Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/sqldb/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/permissions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;26c5587e-e7e4-428a-b5c9-be0554f0fcf8&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/sqldb/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/permissions.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Controller Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nuser  = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c0dbad75-26d1-4aaf-a9c4-f37a8d780aec&quot;,&quot;parentUUID&quot;:&quot;26c5587e-e7e4-428a-b5c9-be0554f0fcf8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should getUserPermissionsFromDb&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Controller Tests tests should getUserPermissionsFromDb&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nconst session = {tenantId: config.test.tenantOne.tenantId, user_sid: user.sid}\nlet permissionsController = new PermissionsController(session)\nlet permissions = await permissionsController.getWorkflowPermissionsFromDb(session);\nconsole.log(permissions)\nexpect(permissions[0]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;befaa594-5f4f-47ad-930c-620d8cad4331&quot;,&quot;parentUUID&quot;:&quot;26c5587e-e7e4-428a-b5c9-be0554f0fcf8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;befaa594-5f4f-47ad-930c-620d8cad4331&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;aa3f4f25-c462-4ef4-ae45-bdc44f4da8b9&quot;,&quot;title&quot;:&quot;Integrify Libs Process Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/sqldb/process.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f04b3eab-bda6-457f-b30c-f4e92e4b1c21&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/sqldb/process.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/process.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Process Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nuser  = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dfdc9177-c849-4a11-8cd3-59fcbb357ad7&quot;,&quot;parentUUID&quot;:&quot;f04b3eab-bda6-457f-b30c-f4e92e4b1c21&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a process from sql&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Process Model Tests tests should get a process from sql&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:100,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nconst ProcessModel = await model.getModel(config.test.tenantOne.tenantId, &#x27;Process&#x27;)\n\n\nlet results = await ProcessModel.query()\n//console.log(results)\nexpect(results.length).to.be.gt(0)\nlet sampleProcesstGuid = results[0].processGuid\nlet processController = new ProcessController(config.test.tenantOne)\nconst Process = await processController.getFullProcessFromSql(sampleProcesstGuid);\nexpect(Process).to.exist;\nconsole.log([Process])\nexpect(Process.processGuid).equal(sampleProcesstGuid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2742d3da-22e7-457c-9099-1a9ddd749da5&quot;,&quot;parentUUID&quot;:&quot;f04b3eab-bda6-457f-b30c-f4e92e4b1c21&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should upsert a process in sql&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Process Model Tests tests should upsert a process in sql&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:333,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nconst ProcessModel = await model.getModel(config.test.tenantOne.tenantId, &#x27;Process&#x27;)\n//console.dir(ContactModel)\nlet results = await ProcessModel.query()\n//console.log(results)\nexpect(results.length).to.be.gt(0)\nlet sampleProcesstGuid = results[0].processGuid\nlet processController = new ProcessController(config.test.tenantOne)\nlet Process = await processController.getFullProcessFromSql(sampleProcesstGuid);\nexpect(Process).to.exist;\nexpect(Process.processGuid).equal(sampleProcesstGuid)\nlet newName = &#x27;Updated &#x27; + new Date().toISOString()\nclonedProcess = JSON.parse(JSON.stringify(Process));\n           \nProcess.objective = newName;\nProcess.tasks[0].internalNotes = newName;\nProcess.processCategory.ordinal = 1;\nawait processController.upsertFullProcess(Process);\nProcess = await processController.getFullProcessFromSql(sampleProcesstGuid);\nexpect(Process.objective).to.equal(newName);\nexpect(Process.tasks[0].internalNotes).to.equal(newName);\nexpect(Process.processCategory.ordinal).equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d9ec8238-684c-4d8f-abb3-495ef905ce0c&quot;,&quot;parentUUID&quot;:&quot;f04b3eab-bda6-457f-b30c-f4e92e4b1c21&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2742d3da-22e7-457c-9099-1a9ddd749da5&quot;,&quot;d9ec8238-684c-4d8f-abb3-495ef905ce0c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:433,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cc00d8a4-e765-437c-9f61-b70b87b7e026&quot;,&quot;title&quot;:&quot;Integrify Libs Tenant tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/sqldb/sqldb-db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/sqldb-db.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b5a26a97-d50e-4d63-b895-a235d83daa60&quot;,&quot;title&quot;:&quot;tentantSql tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/sqldb/sqldb-db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/sqldb-db.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tenant tests tentantSql tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// let configClass = await require(&#x27;../../../config&#x27;)\n            // await configClass.setConfigs();\n            // config = await configClass.getConfig();\n            config = await Config.getConfig();\n            this.timeout(100000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;67f64984-3e8f-41bc-92b2-b5c0d2d4c12f&quot;,&quot;parentUUID&quot;:&quot;b5a26a97-d50e-4d63-b895-a235d83daa60&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get the consumer Db&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tenant tests tentantSql tests should get the consumer Db&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:56,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let db = await sqlDb.getConsumersDb(config.consumersConn)\nexpect(db).to.exist;\nlet queyResults =  await db.raw(`SELECT * FROM sys.tables WHERE name = &#x27;data_instance&#x27;`)\nexpect(queyResults.length).equal(1)\n//console.log(queyResults)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;651aeaac-7ea1-4569-a641-f8c39aab225e&quot;,&quot;parentUUID&quot;:&quot;b5a26a97-d50e-4d63-b895-a235d83daa60&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;shoulld get the tenant Db&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tenant tests tentantSql tests shoulld get the tenant Db&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let db = await sqlDb.getTenantDb(config.test.tenantOne.tenantId)\nexpect(db).to.exist;\nlet queyResults =  await db.raw(`select * from contact`)\nexpect(queyResults.length).to.be.gt(0)\nqueyResults = await db.raw(\&quot;select * from contact_auth where user_name = :uname\&quot;, {uname: &#x27;iApprove&#x27;})\nexpect(queyResults.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ecbe6606-393a-4713-9d84-c63cea2fd9e3&quot;,&quot;parentUUID&quot;:&quot;b5a26a97-d50e-4d63-b895-a235d83daa60&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;651aeaac-7ea1-4569-a641-f8c39aab225e&quot;,&quot;ecbe6606-393a-4713-9d84-c63cea2fd9e3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:64,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;66479a8f-fb59-45d8-b812-6f22455bac47&quot;,&quot;title&quot;:&quot;Integrify Libs StreamConsumer Load Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Load Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4490,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(1050000000);\nlet deletes = await redis.delAsync([fullStreamName, eventHistoryName, eventProcessedName, `${tenant}.activeSessions`]);\n/*\nRedis stream stuff:\nYou can scale up by running additional processors in the group. This creates a new Node process and runs a new consumer\nin the existing stream group. The consumer name for each processor will have an incremental suffix so it will be unique\nensuring that each consumer processes a unique set of events.\nWith 3 processors, it handeld a loadSize of a million events as they came in with no backlog build up in the group.\n */\nforkedProcessor = await streamConsumer.forkStreamProcessor()\nforkedProcessor2 = await streamConsumer.forkStreamProcessor()\nforkedProcessor3 = await streamConsumer.forkStreamProcessor()\nfor (let index = 0; index &lt; loadSize; index++) {\n\n    await sp.sendEvent(\&quot;extendSession\&quot;,{\n        token: \&quot;abcd234\&quot;,\n        user: {\n            sid:\&quot;11111\&quot;, \n            user_name: \&quot;iapprove\&quot;, \n            email: \&quot;iapprove@integrify.com\&quot;, \n            name: \&quot;System System\&quot;\n        }\n    })\n\n}\n       \nawait delay(1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;574409af-caf3-4a1a-bd33-44d477919283&quot;,&quot;parentUUID&quot;:&quot;66479a8f-fb59-45d8-b812-6f22455bac47&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Load Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;forkedProcessor.kill()\nforkedProcessor2.kill()\nforkedProcessor3.kill()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5fe90ae-1648-4a30-b831-46dceb950912&quot;,&quot;parentUUID&quot;:&quot;66479a8f-fb59-45d8-b812-6f22455bac47&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;99075f3f-751a-4e16-9649-f0541f4d2176&quot;,&quot;title&quot;:&quot;forkStreamProcessor&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4b52dc48-9e66-4821-83a8-a46aa06046a9&quot;,&quot;title&quot;:&quot;processed event count  = history count&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should process events&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Load Tests forkStreamProcessor processed event count  = history count should process events&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processedCount = await redis.zcardAsync(eventProcessedName)\n let historyCount = await redis.zcardAsync(eventHistoryName)\n expect(historyCount).to.equal(processedCount)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5796b9c5-ed8f-4074-a590-64b1b1d7400a&quot;,&quot;parentUUID&quot;:&quot;4b52dc48-9e66-4821-83a8-a46aa06046a9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5796b9c5-ed8f-4074-a590-64b1b1d7400a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7ed47f81-06f7-489e-a14f-65bc2ec5df55&quot;,&quot;title&quot;:&quot;Integrify Libs StreamConsumer Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/stream/streamConsumer.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5012,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\nlet deletes = await redis.delAsync([fullStreamName, eventHistoryName, eventProcessedName, `${tenant}.activeSessions`]);\nconsole.log(deletes)\nfor (let index = 0; index &lt; 5; index++) {\n    await sp.sendEvent(\&quot;extendSession\&quot;, {activityDate: new Date(),\n        token: \&quot;abcd234\&quot;,\n        user: {\n            sid:\&quot;11111\&quot;,\n            user_name: \&quot;iapprove\&quot;,\n            email: \&quot;iapprove@integrify.com\&quot;,\n            name: \&quot;System System\&quot;\n        }\n    })\n}\nforkedProcessor = await streamConsumer.forkStreamProcessor()\nawait delay(5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;970c4e22-d2e6-42db-b415-c54d0fccf8d9&quot;,&quot;parentUUID&quot;:&quot;7ed47f81-06f7-489e-a14f-65bc2ec5df55&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;912df524-7e70-4e34-a070-3e2c02bc01f8&quot;,&quot;parentUUID&quot;:&quot;7ed47f81-06f7-489e-a14f-65bc2ec5df55&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2f739014-7347-4a31-84be-add88c29297c&quot;,&quot;title&quot;:&quot;forkStreamProcessor&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/stream/streamConsumer.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9b532cb0-05fe-412d-9389-8159eee1f6d1&quot;,&quot;title&quot;:&quot;processed event count  = history count&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/stream/streamConsumer.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should process events&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Tests forkStreamProcessor processed event count  = history count should process events&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processedCount = await redis.zcardAsync(eventProcessedName)\n let historyCount = await redis.zcardAsync(eventHistoryName)\n expect(historyCount).to.equal(processedCount)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;33d685a3-c31c-447b-8ff0-a4a55f3a32ae&quot;,&quot;parentUUID&quot;:&quot;9b532cb0-05fe-412d-9389-8159eee1f6d1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;33d685a3-c31c-447b-8ff0-a4a55f3a32ae&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fcf2185b-0683-45ef-8eec-7c0ceb375019&quot;,&quot;title&quot;:&quot;Integrify Libs Stream Publisher Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/stream/streamPublisher.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamPublisher.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e4603c29-a62b-4010-ad29-1436417b547c&quot;,&quot;title&quot;:&quot;stream publisher&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/stream/streamPublisher.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamPublisher.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Stream Publisher Tests stream publisher \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(100000)\nprocess.env.jest = \&quot;true\&quot;;\nawait redis.delAsync([fullStreamName, eventHistoryName])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7432bbb-f6be-4d58-b9ff-40e99d1087cb&quot;,&quot;parentUUID&quot;:&quot;e4603c29-a62b-4010-ad29-1436417b547c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should handle the constructor&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Stream Publisher Tests stream publisher should handle the constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const sp = new StreamPublisher(testStreamName, tenant);\nexpect(sp.streamName).equal(fullStreamName)\nexpect(sp.baseStreamName).equal(testStreamName)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92dd879b-333c-4802-a278-b87548c5b2be&quot;,&quot;parentUUID&quot;:&quot;e4603c29-a62b-4010-ad29-1436417b547c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should an sendEvent&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Stream Publisher Tests stream publisher should an sendEvent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:102,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const sp = new StreamPublisher(testStreamName, tenant,1000);\nexpect(sp.streamName).equal(fullStreamName)\n//sendEvent(eventType, data) data will get stringified\nlet id = await sp.sendEvent(testEventType, {foo:\&quot;bar\&quot;, biz:\&quot;buzz\&quot;, beep:{bop:\&quot;bam\&quot;}})   \nexpect(id).to.exist;\nexpect (id.indexOf(\&quot;-\&quot;)).to.be.gt(-1)  \nawait delay(100);\nlet id2 = await sp.sendEvent(testEventType, {foo:\&quot;bar2\&quot;, biz:\&quot;buzz2\&quot;, beep:{bop:\&quot;bam2\&quot;}})   \nexpect (Number(id2.split(\&quot;-\&quot;)[0])).to.be.gt(Number(id.split(\&quot;-\&quot;)[0]))&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1476ff7-7549-43b3-b078-3bb32eb3f172&quot;,&quot;parentUUID&quot;:&quot;e4603c29-a62b-4010-ad29-1436417b547c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should append to eventhistory&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Stream Publisher Tests stream publisher should append to eventhistory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const sp = new StreamPublisher(testStreamName, tenant, 1000); \n\nlet id = await sp.sendEvent(testEventType, {foo:\&quot;bar\&quot;, biz:\&quot;buzz\&quot;, beep:{bop:\&quot;bam\&quot;}}) \n           \n//console.log(historySet)\nlet historyCount = await redis.zcardAsync(eventHistoryName)\nexpect(historyCount).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;113992e2-1af7-46a1-8a77-8bb2bc984bd1&quot;,&quot;parentUUID&quot;:&quot;e4603c29-a62b-4010-ad29-1436417b547c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;92dd879b-333c-4802-a278-b87548c5b2be&quot;,&quot;d1476ff7-7549-43b3-b078-3bb32eb3f172&quot;,&quot;113992e2-1af7-46a1-8a77-8bb2bc984bd1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:102,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ac42892d-4b0d-4a5d-83b9-839907985e4b&quot;,&quot;title&quot;:&quot;Integrify Libs Tes-lib Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/test-lib/test-lib.test.js&quot;,&quot;file&quot;:&quot;/test/integration/test-lib/test-lib.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f172f440-d1c3-4f5f-99a7-47bfd3c21497&quot;,&quot;title&quot;:&quot;Test Config&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/test-lib/test-lib.test.js&quot;,&quot;file&quot;:&quot;/test/integration/test-lib/test-lib.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tes-lib Tests Test Config \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//config = await Config.getConfig()\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f97dd1f-57de-47b5-a569-1697ab3f74c4&quot;,&quot;parentUUID&quot;:&quot;f172f440-d1c3-4f5f-99a7-47bfd3c21497&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0b664b02-a1bd-439b-889a-9fcc54e3969a&quot;,&quot;title&quot;:&quot;get a test config&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/test-lib/test-lib.test.js&quot;,&quot;file&quot;:&quot;/test/integration/test-lib/test-lib.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should have config.mongo&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tes-lib Tests Test Config get a test config should have config.mongo&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testConfig = await testLib.getTestConfig();\nconsole.log(testConfig)\nexpect(testConfig).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be1782e3-429d-4a3e-b2ba-ea43db59837c&quot;,&quot;parentUUID&quot;:&quot;0b664b02-a1bd-439b-889a-9fcc54e3969a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;be1782e3-429d-4a3e-b2ba-ea43db59837c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bed7172b-4658-4507-85a4-6c1fd75c17ec&quot;,&quot;title&quot;:&quot;get an auth Token &quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/integrify-libs/test/integration/test-lib/test-lib.test.js&quot;,&quot;file&quot;:&quot;/test/integration/test-lib/test-lib.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should have a auth token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tes-lib Tests Test Config get an auth Token  should have a auth token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const authToken = await testLib.getAuthToken();\nconsole.log(authToken)\nexpect(authToken).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;53228dd5-0fed-4234-9c53-fd939792126c&quot;,&quot;parentUUID&quot;:&quot;bed7172b-4658-4507-85a4-6c1fd75c17ec&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;53228dd5-0fed-4234-9c53-fd939792126c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;264f9d13-9253-4d94-a33d-256efce6aca7&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;23ac3ed9-da0d-4aae-900a-72126b5eee59&quot;,&quot;title&quot;:&quot;Schedulers API Email Monitor Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/scheduler/test/db/emailMonitorController.test.js&quot;,&quot;file&quot;:&quot;/test/db/emailMonitorController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Schedulers API Email Monitor Controller Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Schedulers API Email Monitor Controller Tests \&quot;before all\&quot; hook in \&quot;Schedulers API Email Monitor Controller Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()} //system level\ntenantId = config.tenantOne.tenantId;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;55047f8e-c21d-4ad9-b35c-ee039fc4bcb4&quot;,&quot;parentUUID&quot;:&quot;23ac3ed9-da0d-4aae-900a-72126b5eee59&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;inserts an email monitor&quot;,&quot;fullTitle&quot;:&quot;Schedulers API Email Monitor Controller Tests inserts an email monitor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:222,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const emailMonitor = {\n  emailMonitorName: &#x27;TEST email mon name&#x27;,\n  emailMonitorDesc: &#x27;TEST email mon desc&#x27;,\n  mailServerUrl: &#x27;imap.gmail.com&#x27;,\n  mailServerPort: &#x27;993&#x27;,\n  loginName: &#x27;juserintegrify@gmail.com&#x27;,\n  loginPassword: &#x27;I6XUHIv7d/SeWajKYk2+5eqCQjk7dD1zOSVgefeNXsPFve544xxhAA==&#x27;,\n  protocol: &#x27;IMAP&#x27;,\n  processToLaunch: &#x27;8cd0fdcd-3e88-4b5a-b8b2-9ddc4c3b2239&#x27;,\n  taskForData: &#x27;10504a6a-72be-4856-9249-a87f56db5d35&#x27;,\n  lastCheckDate: null,\n  useSsl: &#x27;Yes&#x27;,\n  folder: null,\n  active: &#x27;No&#x27;,\n  destFolder: null,\n  afterProcessAction: null\n};\nconst emailMonitorController = new EmailMonitorController(session)\ninsertedEmailMonitor = await emailMonitorController.insertEmailMonitor(emailMonitor)\nexpect(insertedEmailMonitor.emailMonitorGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f000a35f-02de-408b-addc-2aee6c3c2e0f&quot;,&quot;parentUUID&quot;:&quot;23ac3ed9-da0d-4aae-900a-72126b5eee59&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets a list of email monitors&quot;,&quot;fullTitle&quot;:&quot;Schedulers API Email Monitor Controller Tests gets a list of email monitors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const emailMonitorController = new EmailMonitorController(session);\nconst result = await emailMonitorController.listEmailMonitors();\nexpect(result).to.exist;\nexpect(result.length).to.be.greaterThan(0);\nexpect(result[0].process.processName).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d7df2c9-5245-4374-9e9a-6757cccc74fd&quot;,&quot;parentUUID&quot;:&quot;23ac3ed9-da0d-4aae-900a-72126b5eee59&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;updates an email monitor&quot;,&quot;fullTitle&quot;:&quot;Schedulers API Email Monitor Controller Tests updates an email monitor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const emailMonitor = {\n  emailMonitorGuid: insertedEmailMonitor.emailMonitorGuid,\n  emailMonitorName: &#x27;TEST email mon name UPDATE&#x27;,\n  emailMonitorDesc: &#x27;TEST email mon desc&#x27;,\n  mailServerUrl: &#x27;imap.gmail.com&#x27;,\n  mailServerPort: &#x27;993&#x27;,\n  loginName: &#x27;juserintegrify@gmail.com&#x27;,\n  loginPassword: &#x27;I6XUHIv7d/SeWajKYk2+5eqCQjk7dD1zOSVgefeNXsPFve544xxhAA==&#x27;,\n  protocol: &#x27;IMAP&#x27;,\n  processToLaunch: &#x27;8cd0fdcd-3e88-4b5a-b8b2-9ddc4c3b2239&#x27;,\n  taskForData: &#x27;10504a6a-72be-4856-9249-a87f56db5d35&#x27;,\n  lastCheckDate: null,\n  useSsl: &#x27;Yes&#x27;,\n  folder: null,\n  active: &#x27;No&#x27;,\n  destFolder: null,\n  afterProcessAction: null\n};\nconst emailMonitorController = new EmailMonitorController(session)\nconst numUpdated = await emailMonitorController.updateEmailMonitor(emailMonitor)\nexpect(numUpdated).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f29b5731-d038-41ac-96bb-bd64f4351ca1&quot;,&quot;parentUUID&quot;:&quot;23ac3ed9-da0d-4aae-900a-72126b5eee59&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;deletes an email monitor&quot;,&quot;fullTitle&quot;:&quot;Schedulers API Email Monitor Controller Tests deletes an email monitor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const emailMonitorController = new EmailMonitorController(session);\n\nlet result = await emailMonitorController.listEmailMonitors();\nconst beforeDeleteCount = result.length\n\nawait emailMonitorController.deleteEmailMonitors([insertedEmailMonitor.emailMonitorGuid]);\nresult = await emailMonitorController.listEmailMonitors();\nexpect(beforeDeleteCount).to.be.greaterThan(result.length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30cb6f4b-498f-4848-884f-605b44233b65&quot;,&quot;parentUUID&quot;:&quot;23ac3ed9-da0d-4aae-900a-72126b5eee59&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f000a35f-02de-408b-addc-2aee6c3c2e0f&quot;,&quot;6d7df2c9-5245-4374-9e9a-6757cccc74fd&quot;,&quot;f29b5731-d038-41ac-96bb-bd64f4351ca1&quot;,&quot;30cb6f4b-498f-4848-884f-605b44233b65&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:275,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;aa4048c1-280c-4371-84da-2728a4f581b1&quot;,&quot;title&quot;:&quot;Schedulers API Email Monitor Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/scheduler/test/db/emailMonitorModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/emailMonitorModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a10c4df6-c9b6-4746-aca1-3289ea9a3d0d&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/scheduler/test/db/emailMonitorModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/emailMonitorModel.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Schedulers API Email Monitor Model Tests tests \&quot;before all\&quot; hook in \&quot;tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed7c6472-ec13-4bb9-873e-c03fc379fb01&quot;,&quot;parentUUID&quot;:&quot;a10c4df6-c9b6-4746-aca1-3289ea9a3d0d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Schedulers API Email Monitor Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const emailMonitorModel = await sqldb.models.bindModel(config.tenantOne.tenantId, EmailMonitor);\nconst results = await emailMonitorModel.query();\nexpect(results.length).to.be.a(&#x27;number&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9419b9ea-9894-410c-a04f-93a86be9bd57&quot;,&quot;parentUUID&quot;:&quot;a10c4df6-c9b6-4746-aca1-3289ea9a3d0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a hash of bound models&quot;,&quot;fullTitle&quot;:&quot;Schedulers API Email Monitor Model Tests tests should return a hash of bound models&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const modals = await models.getModels(config.tenantOne.tenantId)\nconst emailMonitorModel = modals.EmailMonitor;\nconst results = await emailMonitorModel.query();\nexpect(results.length).to.be.a(&#x27;number&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3aec0c8e-8cbd-4774-9136-f5e8487ab3fc&quot;,&quot;parentUUID&quot;:&quot;a10c4df6-c9b6-4746-aca1-3289ea9a3d0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should bound models should be cached in memory&quot;,&quot;fullTitle&quot;:&quot;Schedulers API Email Monitor Model Tests tests should bound models should be cached in memory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(models._tenantModels[config.tenantOne.tenantId]).to.exist\nlet results = await models._tenantModels[config.tenantOne.tenantId].EmailMonitor.query()\nexpect(results.length).to.be.a(&#x27;number&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;be70873a-a7cf-49e3-bc3e-f9b88e70f79a&quot;,&quot;parentUUID&quot;:&quot;a10c4df6-c9b6-4746-aca1-3289ea9a3d0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9419b9ea-9894-410c-a04f-93a86be9bd57&quot;,&quot;3aec0c8e-8cbd-4774-9136-f5e8487ab3fc&quot;,&quot;be70873a-a7cf-49e3-bc3e-f9b88e70f79a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6ccde657-64c5-4381-9d62-4b1641cb8728&quot;,&quot;title&quot;:&quot;Schedulers API Email Monitor Function Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/scheduler/test/functions/emailMonitors.test.js&quot;,&quot;file&quot;:&quot;/test/functions/emailMonitors.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;creates an email monitor&quot;,&quot;fullTitle&quot;:&quot;Schedulers API Email Monitor Function Tests creates an email monitor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.createEmailMonitorEvent()\nconst mockRes = await mocks.mockResponse();\nawait emailMonitors.insert(mockReq, mockRes);\n\n\t\texpect(mockRes.statusCode).to.equal(200);\nemailMonitor = mockRes.body&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8294ef6b-2284-4bf1-b66d-a960d8123371&quot;,&quot;parentUUID&quot;:&quot;6ccde657-64c5-4381-9d62-4b1641cb8728&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;lists the email monitors&quot;,&quot;fullTitle&quot;:&quot;Schedulers API Email Monitor Function Tests lists the email monitors&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.listEmailMonitorsEvent()\nconst mockRes = await mocks.mockResponse();\nawait emailMonitors.list(mockReq, mockRes);\n\n\t\texpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body\nexpect(result.length).to.be.greaterThan(0);\nemailMonitorCountBeforeDelete = result.length&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b292b462-c594-42f3-8042-1852f842de01&quot;,&quot;parentUUID&quot;:&quot;6ccde657-64c5-4381-9d62-4b1641cb8728&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;deletes an email monitor&quot;,&quot;fullTitle&quot;:&quot;Schedulers API Email Monitor Function Tests deletes an email monitor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockDeleteReq = await mocks.deleteEmailMonitorsEvent()\nconst mockRes = await mocks.mockResponse()\nmockDeleteReq.body = [emailMonitor.emailMonitorGuid]\nawait emailMonitors.remove(mockDeleteReq, mockRes)\n\n\t\texpect(mockRes.statusCode).to.equal(200)\nconst mockListReq = await mocks.listEmailMonitorsEvent()\nawait emailMonitors.list(mockListReq, mockRes)\nconst emailMonitorCountAfterDelete = mockRes.body.length\nexpect(emailMonitorCountBeforeDelete).to.be.greaterThan(emailMonitorCountAfterDelete)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e2c340ca-8e3a-40a7-8dec-fbb5d7c800c7&quot;,&quot;parentUUID&quot;:&quot;6ccde657-64c5-4381-9d62-4b1641cb8728&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8294ef6b-2284-4bf1-b66d-a960d8123371&quot;,&quot;b292b462-c594-42f3-8042-1852f842de01&quot;,&quot;e2c340ca-8e3a-40a7-8dec-fbb5d7c800c7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:40,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;246fedb8-9fbe-477b-a2c8-c8058df814ec&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e2206cca-170d-4326-b2a1-66ddc17fa439&quot;,&quot;title&quot;:&quot;Session Processor Tests&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/session-processor/test/integration/sessionEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sessionEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Session Processor Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10039,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let testConfig = await testLib.getTestConfig();\n       \nthis.timeout(105000);\nlet deletes = await redis.delAsync([fullStreamName, eventHistoryName, eventProcessedName, `${tenant}.activeSessions`]);\nconsole.log(deletes)\nlet sp = new StreamPublisher(testStreamName,tenant);\nawait sp.sendEvent(\&quot;login\&quot;, {\n  token: \&quot;abcd234\&quot;,\n  user:  {jwt_token: &#x27;xxxxx&#x27;, tenantId: testConfig.tenantOne.tenantId, sid: testConfig.tenantOne.adminUser.sid}\n})\nfor (let index = 0; index &lt; 5; index++) {\n    await sp.sendEvent(\&quot;extendSession\&quot;, {\n        token: \&quot;abcd234\&quot;,\n        user: {\n            sid: testConfig.tenantOne.adminUser.sid,\n            user_name: \&quot;iapprove\&quot;,\n            email: \&quot;iapprove@integrify.com\&quot;,\n            name: \&quot;System System\&quot;\n        }\n    })\n}\n\nforkedProcessor = await sessionStreamConsumer.forkStreamProcessor(tenant)\nawait delay(10000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a8a8c2f8-d200-475a-a65e-981c1719ad8f&quot;,&quot;parentUUID&quot;:&quot;e2206cca-170d-4326-b2a1-66ddc17fa439&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Session Processor Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9cb6fbb0-a5a2-4a34-bdbe-5f4669a6a9f1&quot;,&quot;parentUUID&quot;:&quot;e2206cca-170d-4326-b2a1-66ddc17fa439&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d53164b6-05dc-41f0-a366-1731a9401f04&quot;,&quot;title&quot;:&quot;stream processor&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/session-processor/test/integration/sessionEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sessionEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bc1ee255-1b62-4a42-9b5c-7f5c5c07d479&quot;,&quot;title&quot;:&quot;reads from session stream&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/session-processor/test/integration/sessionEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sessionEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should process events&quot;,&quot;fullTitle&quot;:&quot;Session Processor Tests stream processor reads from session stream should process events&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processedCount = await redis.zcardAsync(eventProcessedName)\n              let historyCount = await redis.zcardAsync(eventHistoryName)\n              expect(historyCount).to.equal(processedCount)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;604e2bcf-3fa2-429c-b726-c9543177cae3&quot;,&quot;parentUUID&quot;:&quot;bc1ee255-1b62-4a42-9b5c-7f5c5c07d479&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;604e2bcf-3fa2-429c-b726-c9543177cae3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9774028e-cdcc-4e3f-b14e-62beb378a1c0&quot;,&quot;title&quot;:&quot;handles events&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/session-processor/test/integration/sessionEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sessionEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should push events into REDIS activeSession set&quot;,&quot;fullTitle&quot;:&quot;Session Processor Tests stream processor handles events should push events into REDIS activeSession set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let sessions = await redis.zrangebyscoreAsync(`${tenant}.activeSessions`, \&quot;-inf\&quot;, \&quot;+inf\&quot;);\nconsole.log(sessions)\nexpect(sessions).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bdeff603-681d-4b64-b3cb-33158598bc0a&quot;,&quot;parentUUID&quot;:&quot;9774028e-cdcc-4e3f-b14e-62beb378a1c0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bdeff603-681d-4b64-b3cb-33158598bc0a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;90fa4453-37bd-4711-9cf5-d99be1aaae2a&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5f91dbfb-7f22-4c1c-bac7-dd4989c2b9aa&quot;,&quot;title&quot;:&quot;adminCategoryConfig.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;adminCategoryConfig.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=objectCatTree]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=btn_addCategory]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=dialog_addCategory]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=dialog_editCategory]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=dialog_deleteCategory]&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05c3ab09-aab4-4c2a-9240-d300f98f363b&quot;,&quot;parentUUID&quot;:&quot;5f91dbfb-7f22-4c1c-bac7-dd4989c2b9aa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;05c3ab09-aab4-4c2a-9240-d300f98f363b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;637df482-81b1-4294-afad-30463a766cb6&quot;,&quot;title&quot;:&quot;adminTreeAddObjectButton.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;adminTreeAddObjectButton.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(btn_addObject.exists()).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26910837-934a-4d94-a636-4d8c07aa6a0f&quot;,&quot;parentUUID&quot;:&quot;637df482-81b1-4294-afad-30463a766cb6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;26910837-934a-4d94-a636-4d8c07aa6a0f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6ea6f5a7-abaa-4b0f-8bde-2627355820bf&quot;,&quot;title&quot;:&quot;adminTreePermsButton.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;adminTreePermsButton.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(btn_permsButton.exists()).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bbbbec28-dd0a-468e-be34-d93c46b009a8&quot;,&quot;parentUUID&quot;:&quot;6ea6f5a7-abaa-4b0f-8bde-2627355820bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bbbbec28-dd0a-468e-be34-d93c46b009a8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;67bf0701-baf8-4a3d-9d79-aa4f6fb1af37&quot;,&quot;title&quot;:&quot;adminTreeViewButton.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;adminTreeViewButton.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(btn_viewButton.exists()).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;929b2445-0651-43bf-b44a-aefadc63e4e9&quot;,&quot;parentUUID&quot;:&quot;67bf0701-baf8-4a3d-9d79-aa4f6fb1af37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;929b2445-0651-43bf-b44a-aefadc63e4e9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;55613a86-9260-4a3d-b8f4-4a845b851727&quot;,&quot;title&quot;:&quot;AddGroupDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;AddGroupDialog.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:74,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_AddGroupDialog.default);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0075c5d9-c3a4-40b3-ba4a-721c2a360b74&quot;,&quot;parentUUID&quot;:&quot;55613a86-9260-4a3d-b8f4-4a845b851727&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d832c605-a305-47a7-857d-604752e8eb5a&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays group fields&quot;,&quot;fullTitle&quot;:&quot;AddGroupDialog.vue inital state displays group fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=nameField]&#x27;)).to.exist;\nexpect(wrapper.find(&#x27;[data-test=descField]&#x27;)).to.exist;\nexpect(wrapper.find(&#x27;[data-test=dynamicField]&#x27;)).to.exist;\nexpect(wrapper.find(&#x27;[data-test=sqlField]&#x27;)).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3832c466-6b50-49be-9bb5-cdbbaf0f3135&quot;,&quot;parentUUID&quot;:&quot;d832c605-a305-47a7-857d-604752e8eb5a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;save button disabled&quot;,&quot;fullTitle&quot;:&quot;AddGroupDialog.vue inital state save button disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=saveButton]&#x27;).element.disabled).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;362c7cd0-76e9-476b-830d-3af54b10f534&quot;,&quot;parentUUID&quot;:&quot;d832c605-a305-47a7-857d-604752e8eb5a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3832c466-6b50-49be-9bb5-cdbbaf0f3135&quot;,&quot;362c7cd0-76e9-476b-830d-3af54b10f534&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3a7c475d-0744-4cac-932d-f486eadb8b01&quot;,&quot;title&quot;:&quot;EditGroupDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EditGroupDialog.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:55,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\ngroup = {\n  groupName: \&quot;test group\&quot;,\n  groupDesc: \&quot;test group description\&quot;,\n  dynamic: false,\n  groupSql: \&quot;first_name like &#x27;%foo%&#x27;\&quot;\n};\nwrapper = (0, _mocks.initWrapper)(_EditGroupDialog.default, {\n  propsData: {\n    group\n  },\n  data() {\n    return {\n      activeTab: 0\n    };\n  },\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79fe966f-8ba3-481b-9514-e67fe6406ee5&quot;,&quot;parentUUID&quot;:&quot;3a7c475d-0744-4cac-932d-f486eadb8b01&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b67d2c74-6dfd-476a-9ee9-77214e5581bf&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays group fields&quot;,&quot;fullTitle&quot;:&quot;EditGroupDialog.vue inital state displays group fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=nameField]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=descField]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=dynamicField]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=sqlField]&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2bb5ed0f-cde9-4b13-9cde-6150ff81702c&quot;,&quot;parentUUID&quot;:&quot;b67d2c74-6dfd-476a-9ee9-77214e5581bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;populates group fields&quot;,&quot;fullTitle&quot;:&quot;EditGroupDialog.vue inital state populates group fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=nameField]&#x27;).element.value).to.equal(group.groupName);\nexpect(wrapper.find(&#x27;[data-test=descField]&#x27;).element.value).to.equal(group.groupDesc);\nexpect(wrapper.find(&#x27;[data-test=sqlField]&#x27;).element.value).to.equal(group.groupSql);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9bba7c38-a109-4928-8cbf-d8168466e6a9&quot;,&quot;parentUUID&quot;:&quot;b67d2c74-6dfd-476a-9ee9-77214e5581bf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2bb5ed0f-cde9-4b13-9cde-6150ff81702c&quot;,&quot;9bba7c38-a109-4928-8cbf-d8168466e6a9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0d1bf8c3-59a6-4794-affa-1382ad6f4eab&quot;,&quot;title&quot;:&quot;GroupList.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GroupList.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:64,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_GroupList.default, {\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e86a0b38-2f24-41d3-ba2e-c2bb6c6ca7fd&quot;,&quot;parentUUID&quot;:&quot;0d1bf8c3-59a6-4794-affa-1382ad6f4eab&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;78c987b8-2374-4924-a80e-025896e2b40f&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays toolbar buttons&quot;,&quot;fullTitle&quot;:&quot;GroupList.vue inital state displays toolbar buttons&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const toolbar = wrapper.find(&#x27;[data-test=buttonBar]&#x27;);\nexpect(toolbar.exists()).to.equal(true);\nconst buttons = toolbar.findAll(&#x27;button&#x27;);\nexpect(buttons.at(0).text()).to.equal(&#x27;Add Group&#x27;);\nexpect(buttons.at(1).text()).to.equal(&#x27;Delete Group&#x27;);\nexpect(buttons.at(1).props().disabled).to.equal(true);\nexpect(buttons.at(2).text()).to.equal(&#x27;Set Roles &amp; Permissions&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;49f7c226-88ec-42b1-9314-1fde9abb1a64&quot;,&quot;parentUUID&quot;:&quot;78c987b8-2374-4924-a80e-025896e2b40f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays list of groups&quot;,&quot;fullTitle&quot;:&quot;GroupList.vue inital state displays list of groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const table = wrapper.find(&#x27;div.v-data-table&#x27;);\nexpect(table.exists()).to.equal(true);\nconst rows = table.findAll(&#x27;table &gt; tbody &gt; tr&#x27;);\nconst adminRow = rows.at(0).findAll(&#x27;td&#x27;);\nconst userRow = rows.at(1).findAll(&#x27;td&#x27;);\nexpect(rows.length).to.equal(2);\nexpect(adminRow.at(3).text()).to.equal(&#x27;Administrators&#x27;); // group name column\nexpect(userRow.at(3).text()).to.equal(&#x27;Users&#x27;);\nexpect(adminRow.at(5).text()).to.equal(&#x27;No&#x27;); // dynamic column\nexpect(userRow.at(5).text()).to.equal(&#x27;Yes&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fb0f14b1-fc6d-44eb-9298-9ee008af1483&quot;,&quot;parentUUID&quot;:&quot;78c987b8-2374-4924-a80e-025896e2b40f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;49f7c226-88ec-42b1-9314-1fde9abb1a64&quot;,&quot;fb0f14b1-fc6d-44eb-9298-9ee008af1483&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d15fbcae-ee36-4fe2-8a11-36bcfb80c375&quot;,&quot;title&quot;:&quot;GroupMembershipDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GroupMembershipDialog.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:104,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\ngroup = {\n  groupName: \&quot;test group\&quot;,\n  groupDesc: \&quot;test group description\&quot;,\n  dynamic: false,\n  groupSql: \&quot;first_name like &#x27;%foo%&#x27;\&quot;,\n  canManage: true,\n  canEdit: true\n};\nwrapper = (0, _mocks.initWrapper)(_GroupMembershipDialog.default, {\n  propsData: {\n    group\n  },\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8bb70343-2979-4d36-846e-1203a20b2d38&quot;,&quot;parentUUID&quot;:&quot;d15fbcae-ee36-4fe2-8a11-36bcfb80c375&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;38d18533-56d7-468d-a8e9-bcc8cf49bf32&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;membership tables&quot;,&quot;fullTitle&quot;:&quot;GroupMembershipDialog.vue inital state membership tables&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const nonMembersTable = wrapper.find(&#x27;[data-test=nonMembersTable]&#x27;);\nconst membersTable = wrapper.find(&#x27;[data-test=membersTable]&#x27;);\nexpect(nonMembersTable.exists()).to.equal(true);\nexpect(membersTable.exists()).to.equal(true); // Non members table\nlet rows = nonMembersTable.findAll(&#x27;table &gt; tbody &gt; tr&#x27;);\nlet firstRow = rows.at(0).findAll(&#x27;td&#x27;);\nexpect(rows.length).to.equal(3);\nexpect(firstRow.length).to.equal(5);\nexpect(firstRow.at(0).find(&#x27;div.v-simple-checkbox&#x27;).exists()).to.equal(true); //  selectable column\nexpect(firstRow.at(1).find(&#x27;button.mdi-plus-circle-outline&#x27;).exists()).to.equal(true); // button to add members\nexpect(firstRow.at(2).find(&#x27;i.mdi-account&#x27;).exists()).to.equal(true); // icon for user accoutn\nexpect(firstRow.at(3).text()).to.equal(&#x27;97&#x27;); // member id\nexpect(firstRow.at(4).text()).to.equal(&#x27;Joe User&#x27;); // member name\nexpect(rows.at(2).find(&#x27;i.mdi-account-multiple&#x27;).exists()).to.equal(true); // check a group member row renders with the group icon\n// Members table\nrows = membersTable.findAll(&#x27;table &gt; tbody &gt; tr&#x27;);\nexpect(rows.length).to.equal(2);\nfirstRow = rows.at(0).findAll(&#x27;td&#x27;);\nexpect(rows.length).to.equal(2);\nexpect(firstRow.length).to.equal(5);\nexpect(firstRow.at(0).find(&#x27;div.v-simple-checkbox&#x27;).exists()).to.equal(true); //  selectable column\nexpect(firstRow.at(1).find(&#x27;button.mdi-minus-circle-outline&#x27;).exists()).to.equal(true); // button to add members\nexpect(firstRow.at(2).find(&#x27;i.mdi-account&#x27;).exists()).to.equal(true); // icon for user accoutn\nexpect(firstRow.at(3).text()).to.equal(&#x27;98&#x27;); // member id\nexpect(firstRow.at(4).text()).to.equal(&#x27;Integrify Services&#x27;); // member name&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89b225c7-aed9-4f05-96b5-a0dd62e6735d&quot;,&quot;parentUUID&quot;:&quot;38d18533-56d7-468d-a8e9-bcc8cf49bf32&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;89b225c7-aed9-4f05-96b5-a0dd62e6735d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;174c7398-5efe-424a-aea8-e0c1f5d9438c&quot;,&quot;title&quot;:&quot;UserCreate.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserCreate.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:65,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserCreate.default, {\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;960a7179-92cb-486e-99d9-abb1d09ab1fc&quot;,&quot;parentUUID&quot;:&quot;174c7398-5efe-424a-aea8-e0c1f5d9438c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should display all necessary fields&quot;,&quot;fullTitle&quot;:&quot;UserCreate.vue should display all necessary fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;[&#x27;firstName&#x27;, &#x27;middleName&#x27;, &#x27;lastName&#x27;, &#x27;username&#x27;, &#x27;email&#x27;, &#x27;locale&#x27;, &#x27;timezone&#x27;, &#x27;language&#x27;, &#x27;password&#x27;, &#x27;confirmPassword&#x27;].forEach(fieldName =&gt; {\n  const field = wrapper.find(`[data-test=${fieldName}Input]`);\n  expect(field.exists()).to.be.true;\n  expect(field.text()).to.be.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;326279c5-608b-4cda-9cc7-35a764cbb148&quot;,&quot;parentUUID&quot;:&quot;174c7398-5efe-424a-aea8-e0c1f5d9438c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should display cancel and save btns&quot;,&quot;fullTitle&quot;:&quot;UserCreate.vue should display cancel and save btns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;[{\n  key: &#x27;cancelBtn&#x27;,\n  value: &#x27;Cancel&#x27;\n}, {\n  key: &#x27;saveBtn&#x27;,\n  value: &#x27;Save&#x27;\n}].forEach(btn =&gt; {\n  const button = wrapper.find(`[data-test=${btn.key}]`);\n  expect(button.exists()).to.be.true;\n  expect(button.text()).to.eq(btn.value);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;232720bb-27b4-471d-aa3c-9ef388f7e8c1&quot;,&quot;parentUUID&quot;:&quot;174c7398-5efe-424a-aea8-e0c1f5d9438c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;326279c5-608b-4cda-9cc7-35a764cbb148&quot;,&quot;232720bb-27b4-471d-aa3c-9ef388f7e8c1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ebcc3e17-f0d3-4a47-b98d-519ed5065e21&quot;,&quot;title&quot;:&quot;UserEdit.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// store = new Vuex.Store({modules: mockStore().modules})\nstore = new _vuex.default.Store({\n  modules: (0, _store.mockStore)({\n    state: {\n      selectedUser: _mockedData.mockedUser\n    },\n    actions: {\n      getUser: function () {\n        console.log(&#x27;--- getUser()&#x27;);\n        return { ..._mockedData.mockedUser\n        };\n      }\n    }\n  }).modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserEdit.default, {\n  store,\n  propsData: {\n    id: _mockedData.mockedUser.contactGuid\n  }\n});\nmockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;50109de4-2a39-47c9-9287-422da886bf49&quot;,&quot;parentUUID&quot;:&quot;ebcc3e17-f0d3-4a47-b98d-519ed5065e21&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should always display page title&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue should always display page title&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const pageTitle = wrapper.find(&#x27;#pageTitle&#x27;);\nexpect(pageTitle.text()).to.eq(&#x27;Edit User&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e19ec5e-5628-4e61-989b-fe05cea8f719&quot;,&quot;parentUUID&quot;:&quot;ebcc3e17-f0d3-4a47-b98d-519ed5065e21&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not display form if loading&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue should not display form if loading&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const form = wrapper.find(&#x27;form[data-test=userForm]&#x27;);\nexpect(form.exists()).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2134f0d7-d315-4fc3-9a17-c299a039173d&quot;,&quot;parentUUID&quot;:&quot;ebcc3e17-f0d3-4a47-b98d-519ed5065e21&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should display form and btns if user information present&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue should display form and btns if user information present&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:203,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper.vm.$store.state.users.userLoading = false;\nawait wrapper.vm.$nextTick();\nconst form = wrapper.find(&#x27;form[data-test=userForm]&#x27;);\nexpect(form.exists()).to.be.true;\n[{\n  key: &#x27;cancelBtn&#x27;,\n  value: &#x27;Cancel&#x27;\n}, {\n  key: &#x27;saveBtn&#x27;,\n  value: &#x27;Save&#x27;\n}].forEach(btn =&gt; {\n  const button = wrapper.find(`[data-test=${btn.key}]`);\n  expect(button.exists()).to.be.true;\n  expect(button.text()).to.eq(btn.value);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c504b7c-29d2-4159-bea8-4762dde7f4e5&quot;,&quot;parentUUID&quot;:&quot;ebcc3e17-f0d3-4a47-b98d-519ed5065e21&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2e19ec5e-5628-4e61-989b-fe05cea8f719&quot;,&quot;2134f0d7-d315-4fc3-9a17-c299a039173d&quot;,&quot;8c504b7c-29d2-4159-bea8-4762dde7f4e5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:205,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8bcb8517-407e-46a0-a08b-65352916cee5&quot;,&quot;title&quot;:&quot;UserEdit.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:39,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)({\n    state: {\n      selectedUser: _mockedData.mockedUser\n    }\n  }).modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserEditDelegation.default, {\n  store\n});\nmockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac279abd-ca6d-402a-b34a-9e451ecb2f0f&quot;,&quot;parentUUID&quot;:&quot;8bcb8517-407e-46a0-a08b-65352916cee5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should display all fields&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue should display all fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;[&#x27;delegate&#x27;, &#x27;processes&#x27;] // &#x27;startDate&#x27;, &#x27;startTime&#x27;, &#x27;endDate&#x27;, &#x27;endTime&#x27;\n.forEach(fieldName =&gt; {\n  const field = wrapper.find(`[data-test=${fieldName}Input]`);\n  expect(field.exists()).to.be.true;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df772185-e0b8-4232-a7f6-9043738e65ce&quot;,&quot;parentUUID&quot;:&quot;8bcb8517-407e-46a0-a08b-65352916cee5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;df772185-e0b8-4232-a7f6-9043738e65ce&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fe91cc74-15d7-4ee6-8811-2c157fd0b6b2&quot;,&quot;title&quot;:&quot;UserEditOrganizationalDetails.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserEditOrganizationalDetails.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserEditOrganizationalDetails.default, {\n  store\n});\nmockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;093e4693-79e5-4434-90b3-193d28e78332&quot;,&quot;parentUUID&quot;:&quot;fe91cc74-15d7-4ee6-8811-2c157fd0b6b2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should display all fields&quot;,&quot;fullTitle&quot;:&quot;UserEditOrganizationalDetails.vue should display all fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper.vm.$store.state.users.selectedUser = _mockedData.mockedUser;\nawait wrapper.vm.$nextTick();\n[&#x27;title&#x27;, &#x27;division&#x27;, &#x27;department&#x27;, &#x27;costCenter&#x27;, &#x27;location&#x27;, &#x27;phone&#x27;, &#x27;manager&#x27;].forEach(fieldName =&gt; {\n  const field = wrapper.find(`[data-test=${fieldName}Input]`);\n  expect(field.exists()).to.be.true;\n  if (!!field.element.value || !!_mockedData.mockedUser[fieldName]) {\n    expect(field.element.value).to.eq(_mockedData.mockedUser[fieldName]);\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10d402d2-5f48-421c-afa8-6dffde7ca45b&quot;,&quot;parentUUID&quot;:&quot;fe91cc74-15d7-4ee6-8811-2c157fd0b6b2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;10d402d2-5f48-421c-afa8-6dffde7ca45b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e8d078ce-89bb-4a27-ba0c-bba8f00c1b5b&quot;,&quot;title&quot;:&quot;UserEditUserDetails.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserEditUserDetails.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:65,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserEditUserDetails.default, {\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;32900cd7-7b2a-4bc9-a425-221d61a18269&quot;,&quot;parentUUID&quot;:&quot;e8d078ce-89bb-4a27-ba0c-bba8f00c1b5b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should display card title&quot;,&quot;fullTitle&quot;:&quot;UserEditUserDetails.vue should display card title&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const title = wrapper.find(&#x27;.v-card__title&#x27;);\nexpect(title.exists()).to.be.true;\nexpect(title.text()).contains(&#x27;User Details&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;359a7206-dce0-4d54-b13f-fd525e5edbae&quot;,&quot;parentUUID&quot;:&quot;e8d078ce-89bb-4a27-ba0c-bba8f00c1b5b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should display all fields&quot;,&quot;fullTitle&quot;:&quot;UserEditUserDetails.vue should display all fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:56,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper.vm.$store.state.users.selectedUser = _mockedData.mockedUser;\nawait wrapper.vm.$nextTick();\n[&#x27;firstName&#x27;, &#x27;middleName&#x27;, &#x27;lastName&#x27;, &#x27;contactId&#x27;, &#x27;userName&#x27;, &#x27;email&#x27;, &#x27;address1&#x27;, &#x27;address2&#x27;, &#x27;city&#x27;, &#x27;state&#x27;, &#x27;zip&#x27;, &#x27;country&#x27;, &#x27;language&#x27;, &#x27;timezone&#x27;, &#x27;locale&#x27;, &#x27;cField1&#x27;, &#x27;cField2&#x27;, &#x27;password&#x27;, &#x27;confirmPassword&#x27;].forEach(fieldName =&gt; {\n  const field = wrapper.find(`[data-test=${fieldName}Input]`);\n  expect(field.exists()).to.be.true;\n  if (!!field.element.value &amp;&amp; !!_mockedData.mockedUser[fieldName]) {\n    expect(field.element.value.toString()).to.eq(_mockedData.mockedUser[fieldName].toString());\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14614787-655b-446e-8b52-7ff4dff9050c&quot;,&quot;parentUUID&quot;:&quot;e8d078ce-89bb-4a27-ba0c-bba8f00c1b5b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;359a7206-dce0-4d54-b13f-fd525e5edbae&quot;,&quot;14614787-655b-446e-8b52-7ff4dff9050c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:58,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ad1ad9c9-2a29-45f6-8c70-b8a97d256087&quot;,&quot;title&quot;:&quot;UserFilterDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserFilterDialog.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:42,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserFilterDialog.default, {\n  store\n});\nmockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;65470266-5e1c-45c1-9681-d47054158e58&quot;,&quot;parentUUID&quot;:&quot;ad1ad9c9-2a29-45f6-8c70-b8a97d256087&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;UserFilterDialog.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const title = wrapper.find(&#x27;.v-card__title .headline&#x27;);\nexpect(title.text()).to.eq(&#x27;User Filters&#x27;);\n[&#x27;lastName&#x27;, &#x27;firstName&#x27;, &#x27;username&#x27;, &#x27;email&#x27;, &#x27;title&#x27;, &#x27;managerName&#x27;, &#x27;costCenter&#x27;, &#x27;country&#x27;, &#x27;department&#x27;].forEach(fieldName =&gt; {\n  const field = wrapper.find(`[data-test=${fieldName}Input]`);\n  expect(field.exists()).to.be.true;\n  expect(field.element.value).to.be.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9fd34923-5eb6-4ea7-b289-3381c00b96d2&quot;,&quot;parentUUID&quot;:&quot;ad1ad9c9-2a29-45f6-8c70-b8a97d256087&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should close dialog on clicking Close btn&quot;,&quot;fullTitle&quot;:&quot;UserFilterDialog.vue should close dialog on clicking Close btn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.vm.showDialog).to.be.false;\nwrapper.vm.$store.state.users.showDialog = true;\nawait wrapper.vm.$nextTick();\nexpect(wrapper.vm.showDialog).to.be.true;\nconst closeBtn = wrapper.find(&#x27;[data-test=closeBtn]&#x27;);\nexpect(closeBtn.exists()).to.be.true;\nawait closeBtn.trigger(&#x27;click&#x27;);\nexpect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;\nexpect(mockstore.actions.getUsers).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df7b8f5a-274f-495b-96e4-c91f7ad2e709&quot;,&quot;parentUUID&quot;:&quot;ad1ad9c9-2a29-45f6-8c70-b8a97d256087&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9fd34923-5eb6-4ea7-b289-3381c00b96d2&quot;,&quot;df7b8f5a-274f-495b-96e4-c91f7ad2e709&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:55,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e035dd07-c10b-454b-8d1f-1f0904e75430&quot;,&quot;title&quot;:&quot;UserList.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserList.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:39,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserList.default, {\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;72fdd56c-991a-4ab1-8fc6-fd1b564a8a52&quot;,&quot;parentUUID&quot;:&quot;e035dd07-c10b-454b-8d1f-1f0904e75430&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should contain pageTitle and search input&quot;,&quot;fullTitle&quot;:&quot;UserList.vue should contain pageTitle and search input&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// pageTitle\nconst pageTitle = wrapper.find(&#x27;#pageTitle&#x27;);\nexpect(pageTitle.exists()).to.be.true;\nexpect(pageTitle.text()).to.eq(&#x27;Users&#x27;); // searchInput\nconst searchInput = wrapper.get(&#x27;input#searchText&#x27;);\nexpect(searchInput.exists()).to.be.true;\nexpect(searchInput.text()).to.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22eff342-4b61-4524-bc9e-1b323c2e0104&quot;,&quot;parentUUID&quot;:&quot;e035dd07-c10b-454b-8d1f-1f0904e75430&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should display toolbar buttons&quot;,&quot;fullTitle&quot;:&quot;UserList.vue should display toolbar buttons&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;[{\n  key: &#x27;addUserBtn&#x27;,\n  value: &#x27;Add User&#x27;\n}, {\n  key: &#x27;replaceUserBtn&#x27;,\n  value: &#x27;Replace User&#x27;\n}].forEach(btn =&gt; {\n  const button = wrapper.find(`[data-test=${btn.key}]`);\n  expect(button.exists()).to.be.true;\n  expect(button.text()).to.eq(btn.value);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fcf1a792-a6c8-45b9-9caa-2c61f119f123&quot;,&quot;parentUUID&quot;:&quot;e035dd07-c10b-454b-8d1f-1f0904e75430&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should display list of users&quot;,&quot;fullTitle&quot;:&quot;UserList.vue should display list of users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const table = wrapper.find(&#x27;[data-test=usersTable]&#x27;);\nexpect(table.exists()).to.be.true;\nconst header = table.find(&#x27;table &gt; thead&#x27;);\n[&#x27;Last Name&#x27;, &#x27;First Name&#x27;, &#x27;Username&#x27;, &#x27;Email&#x27;, &#x27;Created&#x27;, &#x27;Last Updated&#x27;, &#x27;Active&#x27;].forEach(colName =&gt; {\n  expect(header.text()).contains(colName);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;70c3886a-1491-4389-91ce-944231208a7e&quot;,&quot;parentUUID&quot;:&quot;e035dd07-c10b-454b-8d1f-1f0904e75430&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;22eff342-4b61-4524-bc9e-1b323c2e0104&quot;,&quot;fcf1a792-a6c8-45b9-9caa-2c61f119f123&quot;,&quot;70c3886a-1491-4389-91ce-944231208a7e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;159f7ad1-7596-4a24-bb21-0001d09e5313&quot;,&quot;title&quot;:&quot;users store actions&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;users store actions \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;commit = _sinon.default.spy();\nstate = { ..._users.default.state\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b5b9b34-555f-44e4-9128-250a21cefbb2&quot;,&quot;parentUUID&quot;:&quot;159f7ad1-7596-4a24-bb21-0001d09e5313&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;users store actions \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;_sinon.default.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;76efebce-1d98-40b7-b229-2b3216cf35b4&quot;,&quot;parentUUID&quot;:&quot;159f7ad1-7596-4a24-bb21-0001d09e5313&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should getUsers&quot;,&quot;fullTitle&quot;:&quot;users store actions should getUsers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await _actions.default.getUsers({\n  commit,\n  state\n}, _commonLib.default);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_LIST_LOADING&#x27;, true]);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_USERS&#x27;, [..._mockedData.mockedUsers]]);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_USERS_TOTAL&#x27;, _mockedData.mockedUsers.length]);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_LIST_LOADING&#x27;, false]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93fb79a1-15f9-495e-b5dd-ca972745bbfd&quot;,&quot;parentUUID&quot;:&quot;159f7ad1-7596-4a24-bb21-0001d09e5313&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getUser&quot;,&quot;fullTitle&quot;:&quot;users store actions should getUser&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const user = { ..._mockedData.mockedUser\n};\nawait _actions.default.getUser({\n  commit,\n  state\n}, {\n  userGuid: user.contactGuid,\n  $commonLib: _commonLib.default\n});\nuser.active = !user.deletedDate;\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_USER_LOADING&#x27;, true]);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_SELECTED_USER&#x27;, user]);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_USER_LOADING&#x27;, false]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;df25b674-5b69-4791-adc7-0b80ba6f88aa&quot;,&quot;parentUUID&quot;:&quot;159f7ad1-7596-4a24-bb21-0001d09e5313&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insertUser&quot;,&quot;fullTitle&quot;:&quot;users store actions should insertUser&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await _actions.default.insertUser({\n  commit,\n  state\n}, _commonLib.default);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_SELECTED_USER&#x27;, _mockedData.mockedUser]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8dbf5607-939c-4c07-a5d5-5e0e7bb92b47&quot;,&quot;parentUUID&quot;:&quot;159f7ad1-7596-4a24-bb21-0001d09e5313&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should clearFiltersAndOptions&quot;,&quot;fullTitle&quot;:&quot;users store actions should clearFiltersAndOptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;_actions.default.clearFiltersAndOptions({\n  commit,\n  state\n});\n(0, _chai.expect)(commit.args).to.deep.eq([[&#x27;CLEAR_FILTERS&#x27;], [&#x27;SET_LIST_OPTIONS&#x27;]]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6b05b267-a56c-4e55-b4c7-6524f1c572cd&quot;,&quot;parentUUID&quot;:&quot;159f7ad1-7596-4a24-bb21-0001d09e5313&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;93fb79a1-15f9-495e-b5dd-ca972745bbfd&quot;,&quot;df25b674-5b69-4791-adc7-0b80ba6f88aa&quot;,&quot;8dbf5607-939c-4c07-a5d5-5e0e7bb92b47&quot;,&quot;6b05b267-a56c-4e55-b4c7-6524f1c572cd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;34ca47f5-b349-4c6d-9615-ffc026b7396e&quot;,&quot;title&quot;:&quot;users store getters&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get users&quot;,&quot;fullTitle&quot;:&quot;users store getters should get users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;state.users = [..._mockedData.mockedUsers];\nconst users = _getters.default.users(state);\n(0, _chai.expect)(users).to.deep.equal(_mockedData.mockedUsers);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97e07da2-09ad-413a-a994-52fb80a91037&quot;,&quot;parentUUID&quot;:&quot;34ca47f5-b349-4c6d-9615-ffc026b7396e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get filterCount&quot;,&quot;fullTitle&quot;:&quot;users store getters should get filterCount&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;(0, _chai.expect)(_getters.default.filterCount(state)).to.eq(0);\nstate.filters.lastName = &#x27;foo&#x27;;\nstate.filters.firstName = &#x27;bar&#x27;;\nstate.filters.costCenter = &#x27;costCenter&#x27;;\nstate.filters.country = &#x27;&#x27;;\nstate.filters.activeOnly = true;\n(0, _chai.expect)(_getters.default.filterCount(state)).to.eq(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;70de7ecf-4c6e-4c5f-a4dc-d8ea301c5775&quot;,&quot;parentUUID&quot;:&quot;34ca47f5-b349-4c6d-9615-ffc026b7396e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;97e07da2-09ad-413a-a994-52fb80a91037&quot;,&quot;70de7ecf-4c6e-4c5f-a4dc-d8ea301c5775&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;479a75d6-85d7-4182-9b6c-5d4416a42299&quot;,&quot;title&quot;:&quot;users store mutations&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should SET_USERS&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_USERS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_USERS(state, [..._mockedData.mockedUsers]);\n(0, _chai.expect)(state.users).to.deep.eq(_mockedData.mockedUsers);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2eecd021-a83d-4779-9da7-1bd1d2d9581b&quot;,&quot;parentUUID&quot;:&quot;479a75d6-85d7-4182-9b6c-5d4416a42299&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_USERS_TOTAL&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_USERS_TOTAL&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_USERS_TOTAL(state, _mockedData.mockedUsers.length);\n(0, _chai.expect)(state.total).to.eq(_mockedData.mockedUsers.length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;65ab4527-f0a0-4eb2-bc7f-351ad07d255f&quot;,&quot;parentUUID&quot;:&quot;479a75d6-85d7-4182-9b6c-5d4416a42299&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SEARCH&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_SEARCH&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const searchTxt = &#x27;searching for something&#x27;;\nSET_SEARCH(state, searchTxt);\n(0, _chai.expect)(state.search).to.eq(searchTxt);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f846b7b-be50-4c4d-946e-dfb29d50fe67&quot;,&quot;parentUUID&quot;:&quot;479a75d6-85d7-4182-9b6c-5d4416a42299&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_LIST_LOADING&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_LIST_LOADING&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_LIST_LOADING(state, true);\n(0, _chai.expect)(state.listLoading).to.eq(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a68d38d0-109c-413b-8fb7-4767a73d95f8&quot;,&quot;parentUUID&quot;:&quot;479a75d6-85d7-4182-9b6c-5d4416a42299&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should CLEAR_FILTERS&quot;,&quot;fullTitle&quot;:&quot;users store mutations should CLEAR_FILTERS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;state.filters = {\n  lastName: &#x27;test last name&#x27;,\n  firstName: &#x27;first name&#x27;,\n  userName: &#x27;fooBar&#x27;,\n  email: &#x27;foo@bar.com&#x27;,\n  title: &#x27;my title&#x27;,\n  managerName: &#x27;manager name&#x27;,\n  managerGuid: 123,\n  costCenter: &#x27;cost center&#x27;,\n  country: &#x27;USM&#x27;,\n  department: &#x27;manager of managers&#x27;,\n  activeOnly: true\n};\nCLEAR_FILTERS(state);\n(0, _chai.expect)(state.filters).to.deep.eq({\n  lastName: null,\n  firstName: null,\n  userName: null,\n  email: null,\n  title: null,\n  managerName: null,\n  managerGuid: null,\n  costCenter: null,\n  country: null,\n  department: null,\n  activeOnly: false\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;805b0d07-72e1-43b0-9b22-7405cf4acec4&quot;,&quot;parentUUID&quot;:&quot;479a75d6-85d7-4182-9b6c-5d4416a42299&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_LIST_OPTIONS&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_LIST_OPTIONS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const listOptions = {\n  sortBy: [&#x27;firstName&#x27;],\n  sortDesc: [true],\n  page: 2\n};\nSET_LIST_OPTIONS(state, listOptions);\n(0, _chai.expect)(state.listOptions).to.deep.eq(listOptions); // clear listOptions\nSET_LIST_OPTIONS(state);\n(0, _chai.expect)(state.listOptions).to.deep.eq({\n  sortBy: [],\n  sortDesc: [],\n  page: 1\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb3fec0e-f193-4df9-803b-64121268c48a&quot;,&quot;parentUUID&quot;:&quot;479a75d6-85d7-4182-9b6c-5d4416a42299&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SHOW_DIALOG&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_SHOW_DIALOG&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_SHOW_DIALOG(state, true);\n(0, _chai.expect)(state.showDialog).to.eq(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;324633f6-fd69-408a-abb8-dd0f22bd2c00&quot;,&quot;parentUUID&quot;:&quot;479a75d6-85d7-4182-9b6c-5d4416a42299&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_USER_LOADING&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_USER_LOADING&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_USER_LOADING(state, false);\n(0, _chai.expect)(state.userLoading).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7277b1f8-6aff-41a9-9d20-b8b85e07cbc8&quot;,&quot;parentUUID&quot;:&quot;479a75d6-85d7-4182-9b6c-5d4416a42299&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_IS_CHECKING_USERNAME&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_IS_CHECKING_USERNAME&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_IS_CHECKING_USERNAME(state, true);\n(0, _chai.expect)(state.isCheckingUsername).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93819419-656a-4095-8867-1bd56668f169&quot;,&quot;parentUUID&quot;:&quot;479a75d6-85d7-4182-9b6c-5d4416a42299&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SELECTED_USER&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_SELECTED_USER&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const user = { ..._mockedData.mockedUser,\n  password: &#x27;testPwd&#x27;,\n  confirmPassword: &#x27;testPwd&#x27;\n};\nSET_SELECTED_USER(state, user);\n(0, _chai.expect)(state.selectedUser).to.deep.eq(user); // when no user specified\nSET_SELECTED_USER(state);\n(0, _chai.expect)(state.selectedUser).to.deep.eq({\n  firstName: &#x27;&#x27;,\n  middleName: &#x27;&#x27;,\n  lastName: &#x27;&#x27;,\n  userName: &#x27;&#x27;,\n  email: &#x27;&#x27;,\n  locale: &#x27;en-US&#x27;,\n  timezone: &#x27;&#x27;,\n  languageGuid: &#x27;2a803d80-de6d-4adc-a642-4e3d831f5460&#x27;,\n  // US English\n  password: &#x27;&#x27;,\n  confirmPassword: &#x27;&#x27;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1341f85d-12d4-46b3-acd2-8e5fadcc1854&quot;,&quot;parentUUID&quot;:&quot;479a75d6-85d7-4182-9b6c-5d4416a42299&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_LOCALES&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_LOCALES&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_LOCALES(state, [..._mockedData.mockedLocales]);\n(0, _chai.expect)(state.locales).to.deep.eq(_mockedData.mockedLocales);\nSET_LOCALES(state);\n(0, _chai.expect)(state.locales).to.deep.eq([]);\nSET_LOCALES(state, []);\n(0, _chai.expect)(state.locales).to.deep.eq([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;784e8f67-a746-4c0d-b883-52244b4b1722&quot;,&quot;parentUUID&quot;:&quot;479a75d6-85d7-4182-9b6c-5d4416a42299&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_DELEGATION_START_DATE&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_DELEGATION_START_DATE&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const date = &#x27;2020-01-12&#x27;;\nSET_SELECTED_USER(state, { ..._mockedData.mockedUser\n});\nSET_DELEGATION_START_DATE(state, date);\n(0, _chai.expect)(state.selectedUser.delegate.startDate).to.eq(date);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7ff8b257-0b2a-40a7-834f-6d713430035f&quot;,&quot;parentUUID&quot;:&quot;479a75d6-85d7-4182-9b6c-5d4416a42299&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2eecd021-a83d-4779-9da7-1bd1d2d9581b&quot;,&quot;65ab4527-f0a0-4eb2-bc7f-351ad07d255f&quot;,&quot;7f846b7b-be50-4c4d-946e-dfb29d50fe67&quot;,&quot;a68d38d0-109c-413b-8fb7-4767a73d95f8&quot;,&quot;805b0d07-72e1-43b0-9b22-7405cf4acec4&quot;,&quot;bb3fec0e-f193-4df9-803b-64121268c48a&quot;,&quot;324633f6-fd69-408a-abb8-dd0f22bd2c00&quot;,&quot;7277b1f8-6aff-41a9-9d20-b8b85e07cbc8&quot;,&quot;93819419-656a-4095-8867-1bd56668f169&quot;,&quot;1341f85d-12d4-46b3-acd2-8e5fadcc1854&quot;,&quot;784e8f67-a746-4c0d-b883-52244b4b1722&quot;,&quot;7ff8b257-0b2a-40a7-834f-6d713430035f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;675479d9-a709-4197-b24b-a5303d1a8e33&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;40140af4-fcc4-4ae0-b8d5-ea1f474ac0c1&quot;,&quot;title&quot;:&quot;recentlyVisited&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/libs/commonLib/tests/unit/bookmarks.spec.js&quot;,&quot;file&quot;:&quot;/tests/unit/bookmarks.spec.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;recentlyVisited\&quot;&quot;,&quot;fullTitle&quot;:&quot;recentlyVisited \&quot;before each\&quot; hook in \&quot;recentlyVisited\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const dom = new JSDOM(\&quot;&lt;html&gt;\\n       &lt;body&gt;\\n          &lt;div class=\\\&quot;v-toolbar__title hidden-sm-and-down\\\&quot;&gt;Holidays&lt;/div&gt;\\n       &lt;/body&gt;\\n     &lt;/html&gt;\&quot;);\nglobal.window = dom.window;\nglobal.document = dom.window.document;\nglobal.location = {\n  hostname: hostname\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c5b0e59-9854-4022-94f5-c6dbe1ff6bf1&quot;,&quot;parentUUID&quot;:&quot;40140af4-fcc4-4ae0-b8d5-ea1f474ac0c1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;adds to recently visted history&quot;,&quot;fullTitle&quot;:&quot;recentlyVisited adds to recently visted history&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const bookmarks = require(&#x27;./mocks/bookmarks&#x27;);\nexpect(bookmarks.recentlyVisited).to.be.empty;\nawait bookmarks.addRecentlyVisited();\nexpect(bookmarks.recentlyVisited.length).to.equal(1);\nexpect(bookmarks.recentlyVisited[0].label).to.equal(&#x27;Holidays&#x27;);\nexpect(bookmarks.recentlyVisited[0].icon).to.equal(&#x27;mdi-calendar-month&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e43c091-5e25-4d5e-88b3-30ad5d172596&quot;,&quot;parentUUID&quot;:&quot;40140af4-fcc4-4ae0-b8d5-ea1f474ac0c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9e43c091-5e25-4d5e-88b3-30ad5d172596&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c3a3e09f-c969-43d4-b9e4-c24e9ec01b62&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6b495609-25c0-4054-bbee-ee093a4ae924&quot;,&quot;title&quot;:&quot;CategorySelect.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;CategorySelect.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:154,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_CategorySelect.CategorySelect, {\n  showDialog: false\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dc08322e-466c-4638-8e3b-55c315862f9e&quot;,&quot;parentUUID&quot;:&quot;6b495609-25c0-4054-bbee-ee093a4ae924&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;af097b91-9731-4ea9-be2e-016a19555b5d&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;renders correctly&quot;,&quot;fullTitle&quot;:&quot;CategorySelect.vue inital state renders correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=input_categorySelect]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=dialog_categorySelect]&#x27;).exists()).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e145d8e5-0c48-4034-955c-35e19e5d48e6&quot;,&quot;parentUUID&quot;:&quot;af097b91-9731-4ea9-be2e-016a19555b5d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e145d8e5-0c48-4034-955c-35e19e5d48e6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;21363fb0-0061-4ae9-b87f-3aa85374d61f&quot;,&quot;title&quot;:&quot;CategorySelectDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;CategorySelectDialog.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:84,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_CategorySelectDialog.default, {\n  items: _mockedCategoryResponse.default\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;74debfbe-f8d4-4c5b-bc83-f6165ca059c5&quot;,&quot;parentUUID&quot;:&quot;21363fb0-0061-4ae9-b87f-3aa85374d61f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8df686ed-2173-4232-81dc-48c85470a617&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;renders correctly&quot;,&quot;fullTitle&quot;:&quot;CategorySelectDialog.vue inital state renders correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=objectCatTree]&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ad3779e4-d489-41bf-b19d-3ce869032a04&quot;,&quot;parentUUID&quot;:&quot;8df686ed-2173-4232-81dc-48c85470a617&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ad3779e4-d489-41bf-b19d-3ce869032a04&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c096be0b-e664-42ce-a475-4be078d9c983&quot;,&quot;title&quot;:&quot;CategoryTreeTable.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;CategoryTreeTable.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:36,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_CategoryTreeTable.CategoryTreeTable, {\n  objectType: &#x27;forms&#x27;,\n  objectData: _mockedData.mockedObjectData,\n  items: _mockedCategoryResponse.mockedCategoryResponse\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92821489-c26d-4791-9b7d-2a13070899cf&quot;,&quot;parentUUID&quot;:&quot;c096be0b-e664-42ce-a475-4be078d9c983&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;30375218-bae9-47c4-a331-fbcea0aa2c0d&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;renders correctly&quot;,&quot;fullTitle&quot;:&quot;CategoryTreeTable.vue inital state renders correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=objectCatTree]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=objectCatTree_permsButtonComponent]&#x27;).exists()).to.equal(false);\nexpect(wrapper.find(&#x27;[data-test=objectCatTree_datatable]&#x27;).exists()).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;633d76a2-db3e-4522-81ea-423252869bfe&quot;,&quot;parentUUID&quot;:&quot;30375218-bae9-47c4-a331-fbcea0aa2c0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;633d76a2-db3e-4522-81ea-423252869bfe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bfe5e396-74c0-4257-a44a-735512938a4f&quot;,&quot;title&quot;:&quot;Report.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Report.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:66,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_Reports.Report);\ndocument.body.setAttribute(&#x27;data-app&#x27;, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1a94290-338d-47e6-8bb4-8e73d7375fbd&quot;,&quot;parentUUID&quot;:&quot;bfe5e396-74c0-4257-a44a-735512938a4f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;24205a88-5730-4649-a54a-6a36570b56b4&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays toolbar buttons&quot;,&quot;fullTitle&quot;:&quot;Report.vue inital state displays toolbar buttons&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;button i.mdi-refresh&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;button i.mdi-filter-plus-outline&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;button.mdi-export&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef1f0545-44d3-4d19-96cc-c21c36df05cc&quot;,&quot;parentUUID&quot;:&quot;24205a88-5730-4649-a54a-6a36570b56b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays report name&quot;,&quot;fullTitle&quot;:&quot;Report.vue inital state displays report name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;.v-toolbar__title&#x27;).text()).to.equal(&#x27;Report - Update profile tasks&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4665bade-4b96-48d3-bcdd-c4efd3d3d1a6&quot;,&quot;parentUUID&quot;:&quot;24205a88-5730-4649-a54a-6a36570b56b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ef1f0545-44d3-4d19-96cc-c21c36df05cc&quot;,&quot;4665bade-4b96-48d3-bcdd-c4efd3d3d1a6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1ffd37fc-15a8-45dd-87f4-eb3461953c44&quot;,&quot;title&quot;:&quot;ReportTable.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;ReportTable.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:86,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_Reports.ReportTable, {\n  propsData: {\n    report: _mockedData.mockedFormattedReport\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d740ca02-df42-41ba-84c0-72cec2225b32&quot;,&quot;parentUUID&quot;:&quot;1ffd37fc-15a8-45dd-87f4-eb3461953c44&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;762acbc8-72b9-4066-8bb9-205c72db0692&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;renders column headers&quot;,&quot;fullTitle&quot;:&quot;ReportTable.vue inital state renders column headers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const headers = wrapper.findAll(&#x27;th&#x27;);\nconst expectedHeaders = [\&quot;Request Link\&quot;, \&quot;Username\&quot;, \&quot;ID For Manage Task\&quot;, \&quot;Status\&quot;, \&quot;Time from Start to Complete\&quot;, \&quot;Date Completed\&quot;, \&quot;Manager ID\&quot;, \&quot;System ID\&quot;, \&quot;Name\&quot;];\nexpectedHeaders.forEach((title, i) =&gt; expect(headers.at(i).text()).to.equal(title));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;afc40c30-e413-4c9f-9cb2-72857dde11fd&quot;,&quot;parentUUID&quot;:&quot;762acbc8-72b9-4066-8bb9-205c72db0692&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;renders links with the correct icons&quot;,&quot;fullTitle&quot;:&quot;ReportTable.vue inital state renders links with the correct icons&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const firstRow = wrapper.find(&#x27;tbody &gt; tr&#x27;).findAll(&#x27;td&#x27;);\nexpect(firstRow.length).to.equal(9);\nexpect(firstRow.at(0).find(&#x27;button.mdi-magnify&#x27;).exists()).to.equal(true); // Request link\nexpect(firstRow.at(1).text()).to.equal(&#x27;juser&#x27;); // Username\nexpect(firstRow.at(2).find(&#x27;.mdi-menu-open&#x27;).exists()).to.equal(true); // Manage Task menu icon\nexpect(firstRow.at(2).find(&#x27;.v-menu&#x27;).exists()).to.equal(true); // manage task menu\nexpect(firstRow.at(3).text()).to.equal(&#x27;Completed&#x27;); // status\nexpect(firstRow.at(5).text()).to.equal(&#x27;2/24/2021&#x27;); // date completed\nexpect(firstRow.at(6).text()).to.equal(&#x27;1&#x27;); // manager id\nexpect(firstRow.at(7).find(&#x27;button.mdi-magnify&#x27;).exists()).to.equal(true); // link to Task\nexpect(firstRow.at(8).text()).to.equal(&#x27;System Task - Update Profile&#x27;); // task name&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ca8414e-a95d-48f7-8dab-9fe5bbe150a6&quot;,&quot;parentUUID&quot;:&quot;762acbc8-72b9-4066-8bb9-205c72db0692&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;afc40c30-e413-4c9f-9cb2-72857dde11fd&quot;,&quot;6ca8414e-a95d-48f7-8dab-9fe5bbe150a6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0e766d09-fecf-46c6-8597-7395e911b707&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;commits SET_SELECTED_FOR_EDIT mutation&quot;,&quot;fullTitle&quot;:&quot;commits SET_SELECTED_FOR_EDIT mutation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(mockstore.mutations.SET_SELECTED_FOR_EDIT).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c8991c9c-4eee-49f5-8612-b986ea9fb784&quot;,&quot;parentUUID&quot;:&quot;0e766d09-fecf-46c6-8597-7395e911b707&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;commits SET_SHOW_DIALOG mutation&quot;,&quot;fullTitle&quot;:&quot;commits SET_SHOW_DIALOG mutation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e0b1207-1542-4846-b4d0-59af5aede68b&quot;,&quot;parentUUID&quot;:&quot;0e766d09-fecf-46c6-8597-7395e911b707&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9dfc6d02-8c7c-47b6-9ca7-692d935861ad&quot;,&quot;title&quot;:&quot;PasswordSettings.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;renders correctly&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue renders correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(pwdSettingsApi.listPasswordSettings).to.have.been.called;\nexpect(pwdExpirationActiveCheckBox).to.be.exist;\nexpect(pwdExpirationActiveCheckBox.element.checked).to.equal(false);\nexpect(pwdExpirationTextBox).to.be.exist;\nexpect(pwdExpirationTextBox.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);\nexpect(pwdExpirationTextBox.element.value).to.equal(&#x27;7&#x27;);\nexpect(pwdStrengthActiveCheckBox).to.be.exist;\nexpect(pwdStrengthActiveCheckBox.element.checked).to.equal(false);\nexpect(minPwdLengthTextBox).to.be.exist;\nexpect(minPwdLengthTextBox.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);\nexpect(minPwdLengthTextBox.element.value).to.equal(&#x27;3&#x27;);\nexpect(maxPwdLengthTextBox).to.be.exist;\nexpect(maxPwdLengthTextBox.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);\nexpect(maxPwdLengthTextBox.element.value).to.equal(&#x27;10&#x27;);\nexpect(pwdStrengthExpressionTextBox).to.be.exist;\nexpect(pwdStrengthExpressionTextBox.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;); // remember \\\\ is escaped \\\nexpect(pwdStrengthExpressionTextBox.element.value).to.equal(&#x27;^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{3,10}$&#x27;);\nconst restoreButton = wrapper.find(&#x27;button#restoreDefaultPwdStrengthExpression&#x27;);\nexpect(restoreButton).to.be.exist;\nexpect(restoreButton.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);\nexpect(wrapper.find(&#x27;button#save&#x27;)).to.be.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e89ef13e-9f34-44ea-b2c3-72f15e6f111c&quot;,&quot;parentUUID&quot;:&quot;9dfc6d02-8c7c-47b6-9ca7-692d935861ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;40e31fb8-65c6-4f84-80f2-21ab5d908a97&quot;,&quot;title&quot;:&quot;checkboxes enabling textboxes&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;enables Expiration (days) textbox when Enforce Password Expiration checkbox is checked&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue checkboxes enabling textboxes enables Expiration (days) textbox when Enforce Password Expiration checkbox is checked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pwdExpirationActiveCheckBox.trigger(&#x27;click&#x27;);\nawait wrapper.vm.$nextTick();\nexpect(pwdExpirationActiveCheckBox.element.checked).to.equal(true);\nexpect(pwdExpirationTextBox.attributes(&#x27;disabled&#x27;)).to.equal(undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e409c4d4-d5e6-4a57-a3db-f20340634610&quot;,&quot;parentUUID&quot;:&quot;40e31fb8-65c6-4f84-80f2-21ab5d908a97&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;enables min/max password length and strength expression textboxes when Enforce Password Strength checkbox is checked&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue checkboxes enabling textboxes enables min/max password length and strength expression textboxes when Enforce Password Strength checkbox is checked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pwdStrengthActiveCheckBox.trigger(&#x27;click&#x27;);\nawait wrapper.vm.$nextTick();\nexpect(pwdStrengthActiveCheckBox.element.checked).to.equal(true);\nexpect(minPwdLengthTextBox.attributes(&#x27;disabled&#x27;)).to.equal(undefined);\nexpect(maxPwdLengthTextBox.attributes(&#x27;disabled&#x27;)).to.equal(undefined);\nexpect(pwdStrengthExpressionTextBox.attributes(&#x27;disabled&#x27;)).to.equal(undefined);\nconst restoreButton = wrapper.find(&#x27;button#restoreDefaultPwdStrengthExpression&#x27;);\nexpect(restoreButton.attributes(&#x27;disabled&#x27;)).to.equal(undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;272ccbbb-de1e-4047-9cfe-f45dd463bc7c&quot;,&quot;parentUUID&quot;:&quot;40e31fb8-65c6-4f84-80f2-21ab5d908a97&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e409c4d4-d5e6-4a57-a3db-f20340634610&quot;,&quot;272ccbbb-de1e-4047-9cfe-f45dd463bc7c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:50,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;01d31b50-bd50-48fd-90e3-bf5fea3dfbad&quot;,&quot;title&quot;:&quot;password length change effects on strength regular expression&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;correctly adjusts strength expression when min pwd length changes&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue password length change effects on strength regular expression correctly adjusts strength expression when min pwd length changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pwdStrengthActiveCheckBox.trigger(&#x27;click&#x27;);\nminPwdLengthTextBox.element.value = &#x27;4&#x27;;\nminPwdLengthTextBox.trigger(&#x27;input&#x27;);\nmaxPwdLengthTextBox.element.value = &#x27;11&#x27;;\nmaxPwdLengthTextBox.trigger(&#x27;input&#x27;);\nawait wrapper.vm.$nextTick(); // remember \\\\ is escaped \\\nexpect(pwdStrengthExpressionTextBox.element.value).to.equal(&#x27;^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{4,11}$&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;24219817-ab9b-4d0b-8754-e4093a19571a&quot;,&quot;parentUUID&quot;:&quot;01d31b50-bd50-48fd-90e3-bf5fea3dfbad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;24219817-ab9b-4d0b-8754-e4093a19571a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:26,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bd28df88-c5c1-4cd5-8584-fcfb7e5b67ad&quot;,&quot;title&quot;:&quot;restore default password strength&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;restores default password strength values when restore button is clicked&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue restore default password strength restores default password strength values when restore button is clicked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pwdStrengthActiveCheckBox.trigger(&#x27;click&#x27;);\nawait minPwdLengthTextBox.setValue(&#x27;4&#x27;);\nawait maxPwdLengthTextBox.setValue(&#x27;11&#x27;);\nawait wrapper.find(&#x27;button#restoreDefaultPwdStrengthExpression&#x27;).trigger(&#x27;click&#x27;); // remember \\\\ is escaped \\\nexpect(pwdStrengthExpressionTextBox.element.value).to.equal(&#x27;^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{3,10}$&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9601e315-83c1-4ea0-8efb-01c50220a590&quot;,&quot;parentUUID&quot;:&quot;bd28df88-c5c1-4cd5-8584-fcfb7e5b67ad&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9601e315-83c1-4ea0-8efb-01c50220a590&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:29,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;994f2f8f-7a76-46ae-8feb-af90eb0d7dee&quot;,&quot;title&quot;:&quot;save password settings&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;calls updatePasswordSettings with correct params when Save button is clicked&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue save password settings calls updatePasswordSettings with correct params when Save button is clicked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(pwdExpirationActiveCheckBox.element.checked).to.equal(true); // change some settings in ui. make sure api call has correct params when saved\npwdExpirationTextBox.setValue(&#x27;10&#x27;);\nawait minPwdLengthTextBox.setValue(&#x27;4&#x27;);\nawait maxPwdLengthTextBox.setValue(&#x27;11&#x27;);\nwrapper.find(&#x27;button#save&#x27;).trigger(&#x27;click&#x27;);\nexpect(pwdSettingsApi.updatePasswordSettings).to.have.been.called;\nconst requestBody = pwdSettingsApi.updatePasswordSettings.args[0][1].requestBody;\nexpect(requestBody).to.be.ok;\nexpect(requestBody.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION&#x27;).settingsValue).to.equal(&#x27;10&#x27;);\nexpect(requestBody.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION_ACTIVE&#x27;).settingsValue).to.equal(&#x27;1&#x27;);\nexpect(requestBody.find(x =&gt; x.settingsKey == &#x27;PWD_STRENGTH_ACTIVE&#x27;).settingsValue).to.equal(&#x27;1&#x27;);\nexpect(requestBody.find(x =&gt; x.settingsKey == &#x27;PWD_STRENGTH&#x27;).settingsValue).to.equal(&#x27;^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{4,11}$&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a4b77c1f-a99f-4da4-a5cf-817beb783b69&quot;,&quot;parentUUID&quot;:&quot;994f2f8f-7a76-46ae-8feb-af90eb0d7dee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a4b77c1f-a99f-4da4-a5cf-817beb783b69&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:28,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[&quot;e89ef13e-9f34-44ea-b2c3-72f15e6f111c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7d4cbf18-9cc6-4608-bec1-4191377f198b&quot;,&quot;title&quot;:&quot;BiztimeDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;BiztimeDialog.vue\&quot;&quot;,&quot;fullTitle&quot;:&quot;BiztimeDialog.vue \&quot;before each\&quot; hook in \&quot;BiztimeDialog.vue\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;mockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f8a06889-3027-4e52-ba15-a0ea9ae492d2&quot;,&quot;parentUUID&quot;:&quot;7d4cbf18-9cc6-4608-bec1-4191377f198b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;BiztimeDialog.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// console.log(&#x27;-- dd:&#x27;, wrapper.vm.$store.state.biztimes.selectedForEdit);\n// headline\nconst headline = wrapper.find(&#x27;span.headline&#x27;);\nexpect(headline.exists()).to.be.true;\nexpect(headline.text()).to.eq(`Edit Business Hours for ${biztime.dayOfWeek}`); // inputs\nexpect(startTimeRef.value).to.deep.equal(biztime.startTime);\nexpect(endTimeRef.value).to.deep.equal(biztime.endTime);\nexpect(activeRef.inputValue).to.equal(biztime.active); // btns\nexpect(saveBtn.exists()).to.be.true;\nexpect(closeBtn.exists()).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e022cde-dc15-4e0d-beac-a90819c8a98f&quot;,&quot;parentUUID&quot;:&quot;7d4cbf18-9cc6-4608-bec1-4191377f198b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should save biztime&quot;,&quot;fullTitle&quot;:&quot;BiztimeDialog.vue should save biztime&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await saveBtn.trigger(&#x27;click&#x27;);\nexpect(mockstore.actions.saveBiztime).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed80022a-0e57-49a8-8463-4b756cc535bc&quot;,&quot;parentUUID&quot;:&quot;7d4cbf18-9cc6-4608-bec1-4191377f198b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should close dialog&quot;,&quot;fullTitle&quot;:&quot;BiztimeDialog.vue should close dialog&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await closeBtn.trigger(&#x27;click&#x27;);\nexpect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;\nexpect(mockstore.mutations.SET_SELECTED_FOR_EDIT).to.have.been.calledWith(store.state.biztimes, {});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f251eb3-9184-4dd1-943e-72d2ec9c20b3&quot;,&quot;parentUUID&quot;:&quot;7d4cbf18-9cc6-4608-bec1-4191377f198b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2e022cde-dc15-4e0d-beac-a90819c8a98f&quot;,&quot;ed80022a-0e57-49a8-8463-4b756cc535bc&quot;,&quot;8f251eb3-9184-4dd1-943e-72d2ec9c20b3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;daa611b2-c6af-48c6-bacd-3988ec613a7b&quot;,&quot;title&quot;:&quot;BiztimesTable.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;BiztimesTable.vue\&quot;&quot;,&quot;fullTitle&quot;:&quot;BiztimesTable.vue \&quot;before each\&quot; hook in \&quot;BiztimesTable.vue\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;mockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a43fb179-f934-47a1-b98e-d3ce5492cdc3&quot;,&quot;parentUUID&quot;:&quot;daa611b2-c6af-48c6-bacd-3988ec613a7b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;BiztimesTable.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// pageTitle\nexpect(pageTitle.exists()).to.be.true;\nexpect(pageTitle.text()).to.eq(&#x27;Business Hours&#x27;); // link to set permissions\nexpect(wrapper.find(&#x27;[data-test=\&quot;setPermissions\&quot;&#x27;).exists()).to.equal(true); // getBiztimes\nexpect(mockstore.actions.getBiztimes).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;101d0d4e-626f-4540-8371-1cb60936158d&quot;,&quot;parentUUID&quot;:&quot;daa611b2-c6af-48c6-bacd-3988ec613a7b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;101d0d4e-626f-4540-8371-1cb60936158d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1cdabdae-cd92-4731-91f3-5604f17cf3ef&quot;,&quot;title&quot;:&quot;HolidaysTable.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;fdab7fe6-c8c7-48ff-9932-5dcad581344d&quot;,&quot;title&quot;:&quot;initial state&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;HolidaysTable.vue initial state \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_HolidaysTable.default, {\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b26fa376-3a0e-4678-af20-bc59954f4cf0&quot;,&quot;parentUUID&quot;:null,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;151e3e49-130d-480b-ac0f-4b64c3fba95a&quot;,&quot;title&quot;:&quot;Menu.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Menu.vue\&quot;&quot;,&quot;fullTitle&quot;:&quot;Menu.vue \&quot;before each\&quot; hook in \&quot;Menu.vue\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_Menu.default, {\n  store\n}); // data-app prevents warning during test: [Vuetify] Unable to locate target [data-app]\n// https://forum.vuejs.org/t/vuetify-data-app-true-and-problems-rendering-v-dialog-in-unit-tests/27495\ndocument.body.setAttribute(&#x27;data-app&#x27;, true);\nmenuButton = wrapper.find(\&quot;button#holidayMenu\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8249a4ff-d007-4fdc-aa9b-1b475e204abc&quot;,&quot;parentUUID&quot;:&quot;151e3e49-130d-480b-ac0f-4b64c3fba95a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3f42f753-61e0-4f33-a861-9cfe9621e13a&quot;,&quot;title&quot;:&quot;initial state&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays add holiday button&quot;,&quot;fullTitle&quot;:&quot;Menu.vue initial state displays add holiday button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:71,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;menuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  expect(wrapper.find(&#x27;#addHolidayMobile&#x27;).exists()).to.equal(true);\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;90643cfc-c42b-4fb4-87d8-1cf1fef00230&quot;,&quot;parentUUID&quot;:&quot;3f42f753-61e0-4f33-a861-9cfe9621e13a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays set roles &amp; permissions button&quot;,&quot;fullTitle&quot;:&quot;Menu.vue initial state displays set roles &amp; permissions button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:57,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;menuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  expect(wrapper.find(&#x27;[data-test=\&quot;setPermissionsMobile\&quot;&#x27;).exists()).to.equal(true);\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48732129-74f5-4898-80a0-b1095c1a7b5f&quot;,&quot;parentUUID&quot;:&quot;3f42f753-61e0-4f33-a861-9cfe9621e13a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays disabled delete holidays button&quot;,&quot;fullTitle&quot;:&quot;Menu.vue initial state displays disabled delete holidays button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:57,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;menuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  const deleteButton = wrapper.find(&#x27;[data-test=\&quot;deleteButtonMobile\&quot;&#x27;);\n  expect(deleteButton.exists()).to.equal(true);\n  expect(deleteButton.attributes(&#x27;disabled&#x27;)).to.not.be.undefined;\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;441d41c2-4cd6-4362-bb6c-08ee7eddccc8&quot;,&quot;parentUUID&quot;:&quot;3f42f753-61e0-4f33-a861-9cfe9621e13a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;90643cfc-c42b-4fb4-87d8-1cf1fef00230&quot;,&quot;48732129-74f5-4898-80a0-b1095c1a7b5f&quot;,&quot;441d41c2-4cd6-4362-bb6c-08ee7eddccc8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:185,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c1951287-fd66-4043-a940-1087a110ddbf&quot;,&quot;title&quot;:&quot;Menu item clicks&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;add holiday button click&quot;,&quot;fullTitle&quot;:&quot;Menu.vue Menu item clicks add holiday button click&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:62,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;menuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  expect(wrapper.find(&#x27;#addHolidayMobile&#x27;).exists()).to.equal(true);\n  wrapper.find(&#x27;button#addHolidayMobile&#x27;).trigger(&#x27;click&#x27;);\n  it(&#x27;commits SET_SELECTED_FOR_EDIT mutation&#x27;, () =&gt; {\n    expect(mockstore.mutations.SET_SELECTED_FOR_EDIT).to.have.been.called;\n  });\n  it(&#x27;commits SET_SHOW_DIALOG mutation&#x27;, () =&gt; {\n    expect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;\n  });\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7166afa4-6af2-42dc-aee9-c0a5b66c142c&quot;,&quot;parentUUID&quot;:&quot;c1951287-fd66-4043-a940-1087a110ddbf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;enables delete holidays button&quot;,&quot;fullTitle&quot;:&quot;Menu.vue Menu item clicks enables delete holidays button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:100,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const state = {\n  holidays: [{}, {}, {}],\n  selectedForDelete: [{}],\n  selectedForEdit: {},\n  showDialog: false\n};\nstore = new _vuex.default.Store({\n  modules: (0, _store.mockStore)({\n    state\n  }).modules\n});\nwrapper = (0, _mocks.initWrapper)(_Menu.default, {\n  store\n});\ndocument.body.setAttribute(&#x27;data-app&#x27;, true);\nmenuButton = wrapper.find(\&quot;button#holidayMenu\&quot;);\nmenuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  const deleteButton = wrapper.find(&#x27;[data-test=\&quot;deleteButtonMobile\&quot;&#x27;);\n  expect(deleteButton.attributes(&#x27;disabled&#x27;)).to.equal(undefined);\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c606afff-d21f-4210-98e3-394aa4dc3827&quot;,&quot;parentUUID&quot;:&quot;c1951287-fd66-4043-a940-1087a110ddbf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7166afa4-6af2-42dc-aee9-c0a5b66c142c&quot;,&quot;c606afff-d21f-4210-98e3-394aa4dc3827&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:162,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e1bc8f07-d0b4-467b-97e5-1d09f5c0dc56&quot;,&quot;title&quot;:&quot;Toolbar.vue&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ba3b29b8-153b-4a2c-ad19-2dddad43fb9c&quot;,&quot;title&quot;:&quot;initial state&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;initial state\&quot;&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue initial state \&quot;before each\&quot; hook in \&quot;initial state\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_Toolbar.default, {\n  store\n});\ndeleteButton = wrapper.find(&#x27;[data-test=\&quot;deleteButton\&quot;&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b626e4e3-f3c9-463d-975e-b79bc5b2e162&quot;,&quot;parentUUID&quot;:&quot;ba3b29b8-153b-4a2c-ad19-2dddad43fb9c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays add holiday button&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue initial state displays add holiday button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;button#addHoliday&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;479b7d61-3b4b-42bf-9a03-08af5d618d8c&quot;,&quot;parentUUID&quot;:&quot;ba3b29b8-153b-4a2c-ad19-2dddad43fb9c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays set roles &amp; permissions button&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue initial state displays set roles &amp; permissions button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=\&quot;setPermissions\&quot;&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;498bf67b-f15c-44d2-acf1-caf723d48971&quot;,&quot;parentUUID&quot;:&quot;ba3b29b8-153b-4a2c-ad19-2dddad43fb9c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays disabled delete holidays button&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue initial state displays disabled delete holidays button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(deleteButton.exists()).to.equal(true);\nexpect(deleteButton.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd46970d-cf7d-4b39-ab9c-ae01f7f14a85&quot;,&quot;parentUUID&quot;:&quot;ba3b29b8-153b-4a2c-ad19-2dddad43fb9c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;479b7d61-3b4b-42bf-9a03-08af5d618d8c&quot;,&quot;498bf67b-f15c-44d2-acf1-caf723d48971&quot;,&quot;bd46970d-cf7d-4b39-ab9c-ae01f7f14a85&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d655e409-016d-4e45-a6b7-dbb20024d10e&quot;,&quot;title&quot;:&quot;add holiday button click&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;add holiday button click\&quot;&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue add holiday button click \&quot;before each\&quot; hook in \&quot;add holiday button click\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;mockstore = (0, _store.mockStore)();\nstore = new _vuex.default.Store({\n  modules: mockstore.modules\n});\nwrapper = (0, _mocks.initWrapper)(_Toolbar.default, {\n  store\n});\nwrapper.find(&#x27;button#addHoliday&#x27;).trigger(&#x27;click&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9e632629-9067-436c-b31b-2256ba965501&quot;,&quot;parentUUID&quot;:&quot;d655e409-016d-4e45-a6b7-dbb20024d10e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;commits SET_SELECTED_FOR_EDIT mutation&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue add holiday button click commits SET_SELECTED_FOR_EDIT mutation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(mockstore.mutations.SET_SELECTED_FOR_EDIT).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aa3f9edd-7656-494c-ab8c-e6e16a418378&quot;,&quot;parentUUID&quot;:&quot;d655e409-016d-4e45-a6b7-dbb20024d10e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;commits SET_SHOW_DIALOG mutation&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue add holiday button click commits SET_SHOW_DIALOG mutation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e0360005-1c3b-45ed-a898-60c2c234f924&quot;,&quot;parentUUID&quot;:&quot;d655e409-016d-4e45-a6b7-dbb20024d10e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aa3f9edd-7656-494c-ab8c-e6e16a418378&quot;,&quot;e0360005-1c3b-45ed-a898-60c2c234f924&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;004c94f7-a5c8-4d90-ad72-a9fc5acedc57&quot;,&quot;title&quot;:&quot;holidays have been selected for deletion&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;holidays have been selected for deletion\&quot;&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue holidays have been selected for deletion \&quot;before each\&quot; hook in \&quot;holidays have been selected for deletion\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const state = {\n  holidays: [{}, {}, {}],\n  selectedForDelete: [{}],\n  selectedForEdit: {},\n  showDialog: false\n};\nmockstore = (0, _store.mockStore)({\n  state\n});\nstore = new _vuex.default.Store({\n  modules: mockstore.modules\n});\nwrapper = (0, _mocks.initWrapper)(_Toolbar.default, {\n  store\n});\ndeleteButton = wrapper.find(&#x27;[data-test=\&quot;deleteButton\&quot;&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0d4c6695-409f-4ef3-bab3-07a3e71f1541&quot;,&quot;parentUUID&quot;:&quot;004c94f7-a5c8-4d90-ad72-a9fc5acedc57&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;enables delete holidays button&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue holidays have been selected for deletion enables delete holidays button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(deleteButton.attributes(&#x27;disabled&#x27;)).to.equal(undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f9b8fd67-1783-45fe-aba9-8cfcf3c32660&quot;,&quot;parentUUID&quot;:&quot;004c94f7-a5c8-4d90-ad72-a9fc5acedc57&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;dispatches delete_holidays action when delete holidays button is clicked&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue holidays have been selected for deletion dispatches delete_holidays action when delete holidays button is clicked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;deleteButton.trigger(&#x27;click&#x27;);\nexpect(mockstore.actions.delete_holidays).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;395186a6-b9d0-41aa-87ea-c0f6c2ead675&quot;,&quot;parentUUID&quot;:&quot;004c94f7-a5c8-4d90-ad72-a9fc5acedc57&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f9b8fd67-1783-45fe-aba9-8cfcf3c32660&quot;,&quot;395186a6-b9d0-41aa-87ea-c0f6c2ead675&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;698c0c12-2a5a-46af-8a3c-ef840faba8c5&quot;,&quot;title&quot;:&quot;biztime actions&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;biztime actions\&quot;&quot;,&quot;fullTitle&quot;:&quot;biztime actions \&quot;before each\&quot; hook in \&quot;biztime actions\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;commit = _sinon.default.spy();\nstate = {};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59927593-a814-44b9-b48e-fbe4da17391f&quot;,&quot;parentUUID&quot;:&quot;698c0c12-2a5a-46af-8a3c-ef840faba8c5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;biztime actions\&quot;&quot;,&quot;fullTitle&quot;:&quot;biztime actions \&quot;after each\&quot; hook in \&quot;biztime actions\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;_sinon.default.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cde28c7d-240f-46f1-9b9c-1e2b2f1952a8&quot;,&quot;parentUUID&quot;:&quot;698c0c12-2a5a-46af-8a3c-ef840faba8c5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should getBiztimes&quot;,&quot;fullTitle&quot;:&quot;biztime actions should getBiztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await _actions.default.getBiztimes({\n  commit,\n  state\n}, _commonLib.default);\n(0, _chai.expect)(commit.args).to.deep.equal([[&#x27;SET_BIZTIMES&#x27;, [..._list.default]]]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fc5b9d8-0565-4d07-8175-bfcdb1171014&quot;,&quot;parentUUID&quot;:&quot;698c0c12-2a5a-46af-8a3c-ef840faba8c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should saveBiztime&quot;,&quot;fullTitle&quot;:&quot;biztime actions should saveBiztime&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await _actions.default.saveBiztime({\n  commit,\n  state\n}, { ..._list.default[0],\n  $commonLib: _commonLib.default\n});\n(0, _chai.expect)(commit.args).to.deep.equal([[&#x27;SET_BIZTIMES&#x27;, [..._list.default]], [&#x27;SET_SELECTED_FOR_EDIT&#x27;, {}], [&#x27;SET_SHOW_DIALOG&#x27;, false]]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0da7ce38-45b1-48e8-a7b9-ce82c8e549d5&quot;,&quot;parentUUID&quot;:&quot;698c0c12-2a5a-46af-8a3c-ef840faba8c5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8fc5b9d8-0565-4d07-8175-bfcdb1171014&quot;,&quot;0da7ce38-45b1-48e8-a7b9-ce82c8e549d5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4b56a73f-924d-405f-b439-0e1ef6a9a10e&quot;,&quot;title&quot;:&quot;biztime getters&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get biztimes&quot;,&quot;fullTitle&quot;:&quot;biztime getters should get biztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const state = {\n  biztimes: JSON.parse(JSON.stringify(_list.default))\n};\nconst biztimes = _getters.default.biztimes(state);\n(0, _chai.expect)(biztimes).not.to.deep.equal(_list.default);\nbiztimes.forEach(biztime =&gt; {\n  const startTime = {\n    hour: biztime.startHour,\n    minute: biztime.startMinute\n  };\n  const endTime = {\n    hour: biztime.endHour,\n    minute: biztime.endMinute\n  };\n  (0, _chai.expect)(biztime.startTime).to.deep.equal(startTime);\n  (0, _chai.expect)(biztime.endTime).to.deep.equal(endTime);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d01fba85-0749-4fae-bbb2-3ec5061394cd&quot;,&quot;parentUUID&quot;:&quot;4b56a73f-924d-405f-b439-0e1ef6a9a10e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d01fba85-0749-4fae-bbb2-3ec5061394cd&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;03d5028b-d9ab-4c7a-89f1-a98144c9f8d9&quot;,&quot;title&quot;:&quot;biztime mutations&quot;,&quot;fullFile&quot;:&quot;/home/peyton/src/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should SET_BIZTIMES&quot;,&quot;fullTitle&quot;:&quot;biztime mutations should SET_BIZTIMES&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_BIZTIMES(state, [..._list.default]);\n(0, _chai.expect)(state.biztimes).to.deep.equal(_list.default);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ea293394-c6a6-4cc8-a034-7c25598fb1df&quot;,&quot;parentUUID&quot;:&quot;03d5028b-d9ab-4c7a-89f1-a98144c9f8d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SELECTED_FOR_EDIT&quot;,&quot;fullTitle&quot;:&quot;biztime mutations should SET_SELECTED_FOR_EDIT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_SELECTED_FOR_EDIT(state, _list.default[0]);\n(0, _chai.expect)(state.selectedForEdit).to.deep.equal(_list.default[0]);\nSET_SELECTED_FOR_EDIT(state, _list.default[3]);\n(0, _chai.expect)(state.selectedForEdit).to.deep.equal(_list.default[3]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;689d63dd-0dc9-42d0-8dd3-8ce65f89f7ef&quot;,&quot;parentUUID&quot;:&quot;03d5028b-d9ab-4c7a-89f1-a98144c9f8d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SHOW_DIALOG&quot;,&quot;fullTitle&quot;:&quot;biztime mutations should SET_SHOW_DIALOG&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_SHOW_DIALOG(state, true);\n(0, _chai.expect)(state.showDialog).to.equal(true);\nSET_SHOW_DIALOG(state, false);\n(0, _chai.expect)(state.showDialog).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;079e57d1-e129-4877-9438-e2028b81e901&quot;,&quot;parentUUID&quot;:&quot;03d5028b-d9ab-4c7a-89f1-a98144c9f8d9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ea293394-c6a6-4cc8-a034-7c25598fb1df&quot;,&quot;689d63dd-0dc9-42d0-8dd3-8ce65f89f7ef&quot;,&quot;079e57d1-e129-4877-9438-e2028b81e901&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;c8991c9c-4eee-49f5-8612-b986ea9fb784&quot;,&quot;2e0b1207-1542-4846-b4d0-59af5aede68b&quot;],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;8.1.1&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;6.1.1&quot;},&quot;marge&quot;:{&quot;options&quot;:null,&quot;version&quot;:&quot;5.1.0&quot;}}}" data-config="{&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;test&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:false,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;htmlFile&quot;:&quot;/home/peyton/src/test/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>