<!doctype html>
<html lang="en"><head><meta charSet="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1"/><title>Mochawesome Report</title><link rel="stylesheet" href="assets/app.css"/></head><body data-raw="{&quot;stats&quot;:{&quot;suites&quot;:20,&quot;tests&quot;:496,&quot;passes&quot;:493,&quot;pending&quot;:0,&quot;failures&quot;:0,&quot;start&quot;:&quot;2021-06-01T15:15:59.675Z&quot;,&quot;end&quot;:&quot;2021-06-01T15:15:59.675Z&quot;,&quot;duration&quot;:83118,&quot;testsRegistered&quot;:496,&quot;passPercent&quot;:99.39516129032258,&quot;pendingPercent&quot;:0,&quot;other&quot;:0,&quot;hasOther&quot;:false,&quot;skipped&quot;:3,&quot;hasSkipped&quot;:true},&quot;results&quot;:[{&quot;uuid&quot;:&quot;2d87477f-016a-496d-bc23-951499ae6e84&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// insert known tokens into redis (normally these are created by emailPasswordReset)\nconst mockRes = mocks.mockResponse();\nconst mockReq = await mocks.emailPasswordReset();\nawait redisClient.setexAsync(`pwReset:${accountGuid}`, 3600, securityToken);\nawait redisClient.setexAsync(`pwReset:${securityToken}`, 3600, accountGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f8f56f4-08ff-4c3f-b629-c1aef5528435&quot;,&quot;parentUUID&quot;:&quot;2d87477f-016a-496d-bc23-951499ae6e84&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a new password&quot;,&quot;fullTitle&quot;:&quot;should create a new password&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = mocks.createNewPassword(securityToken);\nconst mockRes = mocks.mockResponse();\nawait resetPassword.createNewPassword(mockReq, mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;\n// ensure createNewPassword cleans up redis\nexpect(await redisClient.getAsync(`pwReset:${accountGuid}`)).to.be.null;\nexpect(await redisClient.getAsync(`pwReset:${securityToken}`)).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;baa84bee-e588-40ad-ab80-d5a8c45705a3&quot;,&quot;parentUUID&quot;:&quot;2d87477f-016a-496d-bc23-951499ae6e84&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;acd91a5c-e859-42e7-bf12-ae04185a69cf&quot;,&quot;title&quot;:&quot;Auth API API Key Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/apiKey.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/apiKey.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Auth API API Key Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests \&quot;before all\&quot; hook in \&quot;Auth API API Key Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c954a879-b05f-458d-877c-67350a6a1749&quot;,&quot;parentUUID&quot;:&quot;acd91a5c-e859-42e7-bf12-ae04185a69cf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Auth API API Key Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests \&quot;after all\&quot; hook in \&quot;Auth API API Key Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await apiKey.deleteTestKeys(testConfig.tenantOne.tenantId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;88e8014a-17c8-4f17-a213-e16bd00aa2b8&quot;,&quot;parentUUID&quot;:&quot;acd91a5c-e859-42e7-bf12-ae04185a69cf&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;19209a05-65a0-4e09-8647-270d45358751&quot;,&quot;title&quot;:&quot;api key crud &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/apiKey.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/apiKey.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should insert an apiKey and return a doc&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should insert an apiKey and return a doc&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:39,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = {expires: new Date(new Date().getTime() + 60000), testOnly: true, description: \&quot;this is a test\&quot;}\nawait apiKey.createApiKey(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst inserted = mockRes.body;\nkey = inserted.key;\nid = inserted._id;\nexpect(inserted).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;192a617c-502f-4de5-81dc-096b4d880c40&quot;,&quot;parentUUID&quot;:&quot;19209a05-65a0-4e09-8647-270d45358751&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list an apiKeys&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should list an apiKeys&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.key = key;\nawait apiKey.listApiKeys(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst keyList = mockRes.body;\nexpect(keyList).to.exist;\nexpect(keyList.length).to.be.gt(0);\nexpect(keyList[0].hashedKey).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f38b1a55-7bc0-4ea1-8eaa-068ea8e698bd&quot;,&quot;parentUUID&quot;:&quot;19209a05-65a0-4e09-8647-270d45358751&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should verify an apiKey&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should verify an apiKey&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.key = key;\nreq.params.tenant = testConfig.tenantOne.tenantId;\nawait apiKey.verifyApiKey(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst deleted = mockRes.body;\nexpect(deleted.message).to.equal(\&quot;api key valid\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;361389de-648b-428b-a71f-bed467b67fce&quot;,&quot;parentUUID&quot;:&quot;19209a05-65a0-4e09-8647-270d45358751&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should  impersonate using a valid api key and return a JWT&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should  impersonate using a valid api key and return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:180,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.key = key;\nreq.params.tenant = testConfig.tenantOne.tenantId;\nreq.params.userName = testConfig.tenantOne.adminUser.userName;\nawait apiKey.impersonate(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst impersonated = mockRes.body;\nexpect(impersonated).to.exist;\nexpect(impersonated.token).to.exist;\nexpect(impersonated.userName).to.equal(testConfig.tenantOne.adminUser.userName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29c6f093-a077-445b-82fc-02a781fab754&quot;,&quot;parentUUID&quot;:&quot;19209a05-65a0-4e09-8647-270d45358751&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should  impersonate using a valid env token and userName and return a JWT&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should  impersonate using a valid env token and userName and return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\n\n\nreq.params.tenant = testConfig.tenantOne.tenantId;\nreq.params.userName = testConfig.tenantOne.adminUser.userName;\nawait apiKey.impersonateWithSystemApiKey(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst impersonated = mockRes.body;\nexpect(impersonated).to.exist;\nexpect(impersonated.token).to.exist;\nexpect(impersonated.userName).to.equal(testConfig.tenantOne.adminUser.userName);\ncontact = impersonated;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2d1cd539-c536-4293-bbdb-f2af0fe5a808&quot;,&quot;parentUUID&quot;:&quot;19209a05-65a0-4e09-8647-270d45358751&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should  impersonate using a valid env token and userSid and return a JWT&quot;,&quot;fullTitle&quot;:&quot;Auth API API Key Tests api key crud  should  impersonate using a valid env token and userSid and return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\n\n\nreq.params.tenant = testConfig.tenantOne.tenantId;\nreq.params.userSid = contact.contactGuid;\nawait apiKey.impersonateWithSystemApiKey(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst impersonated = mockRes.body;\nexpect(impersonated).to.exist;\nexpect(impersonated.token).to.exist;\nexpect(impersonated.userName).to.equal(testConfig.tenantOne.adminUser.userName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5cf65da4-49be-42aa-a9a6-801882249594&quot;,&quot;parentUUID&quot;:&quot;19209a05-65a0-4e09-8647-270d45358751&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;192a617c-502f-4de5-81dc-096b4d880c40&quot;,&quot;f38b1a55-7bc0-4ea1-8eaa-068ea8e698bd&quot;,&quot;361389de-648b-428b-a71f-bed467b67fce&quot;,&quot;29c6f093-a077-445b-82fc-02a781fab754&quot;,&quot;2d1cd539-c536-4293-bbdb-f2af0fe5a808&quot;,&quot;5cf65da4-49be-42aa-a9a6-801882249594&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:270,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a1078f32-eb23-4765-9aed-9438cf6a6c97&quot;,&quot;title&quot;:&quot;Auth API Auth Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Auth API Auth Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests \&quot;before all\&quot; hook in \&quot;Auth API Auth Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;02cb4663-8cb6-4b9a-9512-6ec97093aa7c&quot;,&quot;parentUUID&quot;:&quot;a1078f32-eb23-4765-9aed-9438cf6a6c97&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0a90d506-6d88-4153-8193-b3b44999290e&quot;,&quot;title&quot;:&quot;getGuestToken&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return guest auth token&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests getGuestToken should return guest auth token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:41,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet getGuestTokenEvent = await mocks.getGuestTokenEvent()\n\t\t\tlet results = await dbauth.getGuestToken(getGuestTokenEvent, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n      expect(mockRes.body.length).to.be.greaterThan(1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2af232d8-55c6-40e7-a35b-5348c1fb04d8&quot;,&quot;parentUUID&quot;:&quot;0a90d506-6d88-4153-8193-b3b44999290e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2af232d8-55c6-40e7-a35b-5348c1fb04d8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:41,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6781c7ff-6b5a-4ab1-8d71-de347d167357&quot;,&quot;title&quot;:&quot;login&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a contact with a token&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests login should return a contact with a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:124,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet loginEvent = await mocks.loginEvent()\n\t\t\tlet results = await dbauth.login(loginEvent, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst contactInfo = mockRes.body;\n\t\t\texpect(contactInfo.userName).equal(loginEvent.body.username);\n\t\t\texpect(contactInfo.token).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54baa5a2-72c0-4dd0-8443-ff033baa9628&quot;,&quot;parentUUID&quot;:&quot;6781c7ff-6b5a-4ab1-8d71-de347d167357&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;54baa5a2-72c0-4dd0-8443-ff033baa9628&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:124,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;49b0d15d-9630-4a89-b075-67de8cf80743&quot;,&quot;title&quot;:&quot;refreshJwt&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;refresh a token a user out&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests refreshJwt refresh a token a user out&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:104,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let mockRes = await mocks.mockResponse();\nlet loginEvent = await mocks.loginEvent()\nlet logoutEvent = await mocks.logoutEvent()\nawait dbauth.login(loginEvent, mockRes);\nconst contactInfo = mockRes.body;\nlogoutEvent.cookies = {\&quot;integrifyRefreshToken\&quot;: contactInfo.refreshToken };\nlogoutEvent.body = {token: contactInfo.token, refreshToken: contactInfo.refreshToken }\nawait jwtFuncs.refreshJwt(logoutEvent, await mocks.mockResponse());\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8bfd746-59cc-4c1d-ac45-e47c8e4e5d37&quot;,&quot;parentUUID&quot;:&quot;49b0d15d-9630-4a89-b075-67de8cf80743&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e8bfd746-59cc-4c1d-ac45-e47c8e4e5d37&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:104,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5d09fc1d-c7f7-4d0a-aa59-5ff54138e25a&quot;,&quot;title&quot;:&quot;isAuthenticated&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;refresh a token a user out&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests isAuthenticated refresh a token a user out&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let mockRes = await mocks.mockResponse();\n\nawait jwtFuncs.isAuthenticated({cookies: {integrifyToken: \&quot;fake\&quot;}}, mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15397ca9-ce9f-4a8a-afd5-74de6f83529b&quot;,&quot;parentUUID&quot;:&quot;5d09fc1d-c7f7-4d0a-aa59-5ff54138e25a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;15397ca9-ce9f-4a8a-afd5-74de6f83529b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a20b0fc4-735c-46cc-9da8-1547669f3f0a&quot;,&quot;title&quot;:&quot;logout&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/auth.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/auth.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should log a user out&quot;,&quot;fullTitle&quot;:&quot;Auth API Auth Tests logout should log a user out&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nlet logoutEvent = await mocks.logoutEvent()\nawait dbauth.logout(logoutEvent, mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;\nexpect(mockRes.body).to.deep.equal({message: &#x27;OK&#x27;});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b8fe7a2-eb67-4a97-83f0-4d1a866518f7&quot;,&quot;parentUUID&quot;:&quot;a20b0fc4-735c-46cc-9da8-1547669f3f0a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9b8fe7a2-eb67-4a97-83f0-4d1a866518f7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6d766313-a4c8-4ac1-8877-e036e135677e&quot;,&quot;title&quot;:&quot;Auth API Reset Password Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/resetPassword.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/resetPassword.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Auth API Reset Password Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API Reset Password Tests \&quot;before all\&quot; hook in \&quot;Auth API Reset Password Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(1050000);\nprocess.env.TESTING = true;\nresetRewired.__set__(&#x27;nodemailer&#x27;, nodemailerMock);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14c61078-98c2-478c-bc9f-81f5e9ca82c4&quot;,&quot;parentUUID&quot;:&quot;6d766313-a4c8-4ac1-8877-e036e135677e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;30e07767-15a0-42ab-a053-903e53c1985c&quot;,&quot;title&quot;:&quot;emailUsernames&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/resetPassword.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/resetPassword.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should send an email of accounts for existing email&quot;,&quot;fullTitle&quot;:&quot;Auth API Reset Password Tests emailUsernames should send an email of accounts for existing email&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let config = (await Config.getConfig()).test;\n      const accountGuid = config.tenantOne.adminUser.sid.toLowerCase();\n      const mockRes = mocks.mockResponse();\n      const mockReq = await mocks.emailUsernames();\n      await resetRewired.emailUsernames(mockReq, mockRes);\n      expect(mockRes.statusCode).equal(200);\n      expect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b11c94b-a3d7-4236-80e6-9189d898e19c&quot;,&quot;parentUUID&quot;:&quot;30e07767-15a0-42ab-a053-903e53c1985c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7b11c94b-a3d7-4236-80e6-9189d898e19c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5835ddcf-2e23-44ae-bb18-900cbc90ce93&quot;,&quot;title&quot;:&quot;passwordReset&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/resetPassword.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/resetPassword.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;passwordReset\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API Reset Password Tests passwordReset \&quot;before all\&quot; hook in \&quot;passwordReset\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;resetRewired.__set__(&#x27;nodemailer&#x27;, nodemailerMock);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3feea1f5-87a2-452a-99dc-54f2004b9ecb&quot;,&quot;parentUUID&quot;:&quot;5835ddcf-2e23-44ae-bb18-900cbc90ce93&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;emailPassworReset&quot;,&quot;fullTitle&quot;:&quot;Auth API Reset Password Tests passwordReset emailPassworReset&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let config = (await Config.getConfig()).test;\nconst accountGuid = config.tenantOne.adminUser.sid.toLowerCase();\nconst mockRes = mocks.mockResponse();\nconst mockReq = await mocks.emailPasswordReset();\nawait resetRewired.emailPasswordReset(mockReq, mockRes);\n// check if security token was added to redis\nconst securityToken = await redisClient.getAsync(`pwReset:${accountGuid}`);\nconst accountEntry = await redisClient.getAsync(`pwReset:${securityToken}`);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;\nexpect(securityToken).to.exist;\nexpect(accountEntry).to.exist;\n// clean up entries leftover from calling emailPasswordReset\nawait redisClient.del(`pwReset:${accountGuid}`);\nawait redisClient.del(`pwReset:${securityToken}`);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96d1ac84-01d6-41ff-ac32-1562a84b1409&quot;,&quot;parentUUID&quot;:&quot;5835ddcf-2e23-44ae-bb18-900cbc90ce93&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;96d1ac84-01d6-41ff-ac32-1562a84b1409&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4fd539c5-e051-46c9-a1c0-fb0bcf18a469&quot;,&quot;title&quot;:&quot;Auth API SAML Settings Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/samlSettings.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/samlSettings.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Auth API SAML Settings Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests \&quot;before all\&quot; hook in \&quot;Auth API SAML Settings Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ac21cde-f445-484c-8321-85d131ee30d7&quot;,&quot;parentUUID&quot;:&quot;4fd539c5-e051-46c9-a1c0-fb0bcf18a469&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Auth API SAML Settings Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests \&quot;after all\&quot; hook in \&quot;Auth API SAML Settings Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await samlSettings.deleteSamlSettingsByName(testConfig.tenantOne.tenantId, &#x27;unitTestIDP&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e382f98d-ebc3-4c73-a641-0b73423e5c47&quot;,&quot;parentUUID&quot;:&quot;4fd539c5-e051-46c9-a1c0-fb0bcf18a469&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5ef3fd37-ecc5-414d-acb0-b01506f2b929&quot;,&quot;title&quot;:&quot;SAML Settings crud &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-auth/test/integration/functions/samlSettings.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/samlSettings.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should insert saml settings and return a doc&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should insert saml settings and return a doc&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\n           \nreq.body = data;\nawait samlSettings.createSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst inserted = mockRes.body;\n\nsamlId = inserted._id;\nexpect(inserted).to.exist;\nexpect(inserted.idpMetaData).to.equal(data.idpMetaData);\nexpect(inserted.idpName).to.equal(data.idpName);\nexpect(inserted.idpDescription).to.equal(data.idpDescription);\nexpect(inserted.createdByDetail).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c59c52bd-6a77-4e14-936d-4ec1e2a6bbff&quot;,&quot;parentUUID&quot;:&quot;5ef3fd37-ecc5-414d-acb0-b01506f2b929&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get saml settings without an id&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should get saml settings without an id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nawait samlSettings.getSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result.createdByDetail).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ee841a1-e7b4-4838-a4ed-89f82cd875bb&quot;,&quot;parentUUID&quot;:&quot;5ef3fd37-ecc5-414d-acb0-b01506f2b929&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get saml settings with an id&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should get saml settings with an id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.samlId = samlId.toString();\nawait samlSettings.getSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result._id.toString()).to.equal(samlId.toString());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;82044618-917d-41d5-a694-3c211fe1d397&quot;,&quot;parentUUID&quot;:&quot;5ef3fd37-ecc5-414d-acb0-b01506f2b929&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update saml settings&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should update saml settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.samlId = samlId;\n\nreq.body = data;\n\nawait samlSettings.updateSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe7fdc7f-e6f2-4522-b516-23f1f2496d7c&quot;,&quot;parentUUID&quot;:&quot;5ef3fd37-ecc5-414d-acb0-b01506f2b929&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return sp metadata&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should return sp metadata&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.tenant = testConfig.tenantOne.tenantId;\nawait samlSettings.getMetaData(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst metadata = mockRes.body;\nexpect(metadata).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f3a7822-9c5a-4dde-bad4-1f9df4de42ea&quot;,&quot;parentUUID&quot;:&quot;5ef3fd37-ecc5-414d-acb0-b01506f2b929&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete saml settings&quot;,&quot;fullTitle&quot;:&quot;Auth API SAML Settings Tests SAML Settings crud  should delete saml settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.samlId = samlId;\nawait samlSettings.deleteSamlSettings(req, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst deleted = mockRes.body;\nexpect(deleted.message).to.equal(\&quot;delete successful\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc221d6b-d1c4-4c00-a930-9066e0a499b8&quot;,&quot;parentUUID&quot;:&quot;5ef3fd37-ecc5-414d-acb0-b01506f2b929&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c59c52bd-6a77-4e14-936d-4ec1e2a6bbff&quot;,&quot;8ee841a1-e7b4-4838-a4ed-89f82cd875bb&quot;,&quot;82044618-917d-41d5-a694-3c211fe1d397&quot;,&quot;fe7fdc7f-e6f2-4522-b516-23f1f2496d7c&quot;,&quot;8f3a7822-9c5a-4dde-bad4-1f9df4de42ea&quot;,&quot;fc221d6b-d1c4-4c00-a930-9066e0a499b8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:55,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;baa84bee-e588-40ad-ab80-d5a8c45705a3&quot;],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3a9bbcb0-3819-4cd8-99dc-5b93e6efdc83&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;31b43e98-68a5-4374-8242-04408c992b66&quot;,&quot;title&quot;:&quot;Dashboard controller tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-dashboards/test/dashboard.controller.test.js&quot;,&quot;file&quot;:&quot;/test/dashboard.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ec0a4a2-87b3-4f9c-8fd5-c3052f9e82fc&quot;,&quot;parentUUID&quot;:&quot;31b43e98-68a5-4374-8242-04408c992b66&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test&#x27;});\ndeleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test-copy&#x27;});\nconsole.log(deleted);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a1ed0a0-b39f-4014-a72e-a126359965b5&quot;,&quot;parentUUID&quot;:&quot;31b43e98-68a5-4374-8242-04408c992b66&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;be58da98-780c-40f9-bd5c-dfa1d8fd2697&quot;,&quot;title&quot;:&quot;dashboard crud &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-dashboards/test/dashboard.controller.test.js&quot;,&quot;file&quot;:&quot;/test/dashboard.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should create a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:50,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  dashboard = await dashboardController.createDashboard(tenant, dashboardObj);\nsid = dashboard.sid;\nexpect(sid).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;774f0d6f-4e88-47e7-b38a-d4fadf859d61&quot;,&quot;parentUUID&quot;:&quot;be58da98-780c-40f9-bd5c-dfa1d8fd2697&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list dashboards for end users&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should list dashboards for end users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  dashboards = await dashboardController.listDashboards(tenant);\n         expect(dashboards.length).to.be.gt(0);  \n         let createdDashord  = dashboards.find((d) =&gt; {\n             return d.sid === sid;\n         })\n         expect\n         (createdDashord).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d5f194d-fa97-4f85-92fd-df6e2e0b079c&quot;,&quot;parentUUID&quot;:&quot;be58da98-780c-40f9-bd5c-dfa1d8fd2697&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should get a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;dashboard = await dashboardController.getDashboard(tenant,sid);\n            expect(dashboard).to.exist         \n            expect(dashboard.sid).to.equal(sid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9367f299-69bf-412a-963b-0a4981b230f7&quot;,&quot;parentUUID&quot;:&quot;be58da98-780c-40f9-bd5c-dfa1d8fd2697&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should update a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;dashboard.banner = &#x27;test-updated&#x27;;\n            const updatedDashboard = await dashboardController.updateDashboard(tenant,dashboard.toObject());\n            expect(updatedDashboard).to.exist         \n            expect(updatedDashboard.sid).to.equal(sid)\n            expect(updatedDashboard.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48a04f0a-112c-4d21-9c0b-4fea0309809f&quot;,&quot;parentUUID&quot;:&quot;be58da98-780c-40f9-bd5c-dfa1d8fd2697&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should copy a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  should copy a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const copiedDashboard = await dashboardController.copyDashboard(tenant, sid);\n            expect(copiedDashboard).to.exist         \n            expect(copiedDashboard.sid).to.not.equal(sid)\n            expect(copiedDashboard._id).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57724aa0-9a70-41d9-bd0d-6342b1e53c6a&quot;,&quot;parentUUID&quot;:&quot;be58da98-780c-40f9-bd5c-dfa1d8fd2697&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard controller tests dashboard crud  delete a a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const deleted = await dashboardController.deleteDashboard(tenant,sid);\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9ddbfb97-f862-41c7-b575-b9aa3baeba7b&quot;,&quot;parentUUID&quot;:&quot;be58da98-780c-40f9-bd5c-dfa1d8fd2697&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;774f0d6f-4e88-47e7-b38a-d4fadf859d61&quot;,&quot;9d5f194d-fa97-4f85-92fd-df6e2e0b079c&quot;,&quot;9367f299-69bf-412a-963b-0a4981b230f7&quot;,&quot;48a04f0a-112c-4d21-9c0b-4fea0309809f&quot;,&quot;57724aa0-9a70-41d9-bd0d-6342b1e53c6a&quot;,&quot;9ddbfb97-f862-41c7-b575-b9aa3baeba7b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:86,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3bef9c9f-92bf-45ed-ad44-850c0b41bcab&quot;,&quot;title&quot;:&quot;Dashboard route handler tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-dashboards/test/dashboard.handlers.test.js&quot;,&quot;file&quot;:&quot;/test/dashboard.handlers.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\n\ntestConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;\nsession = (await mocks.req()).oauth;\nperms  = await permissions.currentUserPermissions(session)\nlet permissionsWithRun = perms.concat([\n    {\n        \&quot;objectType\&quot;: \&quot;tab\&quot;,\n        \&quot;ownerSid\&quot;: \&quot;bb6cb26b-d179-4763-b2cb-69d107dfd1d8\&quot;,\n        \&quot;ownerType\&quot;: \&quot;system\&quot;,\n        \&quot;permissions\&quot;: enums.permissionTypes.run,\n        \&quot;roleName\&quot;: \&quot;system administrators\&quot;,\n        \&quot;roleGuid\&quot;: \&quot;a48ea7cf-f1ba-4ca9-bf17-2c97d49336cd\&quot;\n      }\n])\nawait permissions.cachePerms(session, permissionsWithRun);\nconsole.log(permissionsWithRun)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;334e86d7-e448-4f6d-a7b8-ee68e5577e1b&quot;,&quot;parentUUID&quot;:&quot;3bef9c9f-92bf-45ed-ad44-850c0b41bcab&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test&#x27;});\ndeleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test-copy&#x27;});\nconsole.log(deleted);\nawait permissions.cachePerms(session, perms);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41df7cc2-61b1-4cc9-9512-936681492185&quot;,&quot;parentUUID&quot;:&quot;3bef9c9f-92bf-45ed-ad44-850c0b41bcab&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0675328a-1611-4dda-b85d-ba6c7c1cc4b8&quot;,&quot;title&quot;:&quot;dashboard crud &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-dashboards/test/dashboard.handlers.test.js&quot;,&quot;file&quot;:&quot;/test/dashboard.handlers.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should create a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = dashboardObj;\nawait handlers.createDashboard(req,mockRes);\nconst dashboard = req.body;\nsid = dashboard.sid;\nexpect(sid).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f8954a71-2860-42d6-a2e8-b54b6e67e601&quot;,&quot;parentUUID&quot;:&quot;0675328a-1611-4dda-b85d-ba6c7c1cc4b8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list dashboards for end users&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should list dashboards for end users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nawait handlers.listDashboards(req,mockRes);\nconst  dashboards = mockRes.body;\nexpect(dashboards.length).to.be.gt(0);  \nlet createdDashboard  = dashboards.find((d) =&gt; {\n    return d.sid === sid;\n})\nexpect(createdDashboard).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46bc032a-2fc3-498e-a322-91ac792d701b&quot;,&quot;parentUUID&quot;:&quot;0675328a-1611-4dda-b85d-ba6c7c1cc4b8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list dashboards for admins&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should list dashboards for admins&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.query.admin = true;\nawait handlers.listDashboards(req,mockRes);\nconst  dashboards = mockRes.body;\nexpect(dashboards.length).to.be.gt(0);  \nlet createdDashboard  = dashboards.find((d) =&gt; {\n    return d.sid === sid;\n})\nexpect(createdDashboard).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75e77130-4fa3-4e6c-a65d-c73c42755222&quot;,&quot;parentUUID&quot;:&quot;0675328a-1611-4dda-b85d-ba6c7c1cc4b8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should get a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.sid = sid;\nawait handlers.getDashboard(req,mockRes);\ndashboard = mockRes.body;\nexpect(dashboard).to.exist         \nexpect(dashboard.sid).to.equal(sid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31fb2bbb-276f-4b9b-88b5-c2165c70909f&quot;,&quot;parentUUID&quot;:&quot;0675328a-1611-4dda-b85d-ba6c7c1cc4b8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should update a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.sid = sid;\nreq.body = dashboard.toObject();\nawait handlers.updateDashboard(req,mockRes);\nconst updatedDashboard = mockRes.body;\nexpect(updatedDashboard).to.exist         \nexpect(updatedDashboard.sid).to.equal(sid)\nexpect(updatedDashboard.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96a737d5-b4a5-4559-b975-dee7158bf1e4&quot;,&quot;parentUUID&quot;:&quot;0675328a-1611-4dda-b85d-ba6c7c1cc4b8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should copy a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should copy a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.sid = sid;\nreq.body = dashboard.toObject();\nawait handlers.copyDashboard(req,mockRes);\nconst copiedDashboard = mockRes.body;\nexpect(copiedDashboard).to.exist         \nexpect(copiedDashboard.sid).to.not.equal(sid)\nexpect(copiedDashboard._id).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee38b637-1c4a-4a10-8df0-8b1cc8efd7c9&quot;,&quot;parentUUID&quot;:&quot;0675328a-1611-4dda-b85d-ba6c7c1cc4b8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete a dashboard&quot;,&quot;fullTitle&quot;:&quot;Dashboard route handler tests dashboard crud  should delete a dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.sid = sid;\nawait handlers.deleteDashboard(req,mockRes);\nlet deleted = mockRes.body;\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9c2df53-fc49-4dbe-9dd7-ff335f62afc1&quot;,&quot;parentUUID&quot;:&quot;0675328a-1611-4dda-b85d-ba6c7c1cc4b8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f8954a71-2860-42d6-a2e8-b54b6e67e601&quot;,&quot;46bc032a-2fc3-498e-a322-91ac792d701b&quot;,&quot;75e77130-4fa3-4e6c-a65d-c73c42755222&quot;,&quot;31fb2bbb-276f-4b9b-88b5-c2165c70909f&quot;,&quot;96a737d5-b4a5-4559-b975-dee7158bf1e4&quot;,&quot;ee38b637-1c4a-4a10-8df0-8b1cc8efd7c9&quot;,&quot;e9c2df53-fc49-4dbe-9dd7-ff335f62afc1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:40,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;44c0d331-c09c-4607-acaa-d78ec5e6155d&quot;,&quot;title&quot;:&quot;Legacy tab mongo tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-dashboards/test/tab.test.js&quot;,&quot;file&quot;:&quot;/test/tab.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig()\ntenant = testConfig.tenantOne.tenantId;;\ntab = await dashboardController.createTestTab(tenant)\nexpect(tab.SID).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b064ed71-186f-49d4-acf4-88567281e200&quot;,&quot;parentUUID&quot;:&quot;44c0d331-c09c-4607-acaa-d78ec5e6155d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await dashboardController.deleteTabs(tenant, {Title: &#x27;created-by-mocha-test&#x27;});\ndeleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test&#x27;});\ndeleted = await dashboardController.deleteDashboards(tenant, {title: &#x27;created-by-mocha-test-migrated&#x27;});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc764a31-8037-4a6f-b69d-c4bd7aeffb6d&quot;,&quot;parentUUID&quot;:&quot;44c0d331-c09c-4607-acaa-d78ec5e6155d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;79266679-970a-4e4d-b12d-22cfa45099ff&quot;,&quot;title&quot;:&quot;tab crud &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-dashboards/test/tab.test.js&quot;,&quot;file&quot;:&quot;/test/tab.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a legacy tab&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should create a legacy tab&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  tab = await dashboardController.createTestTab(tenant);\n\n tabSid = tab.SID;\n expect(tabSid).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;12217c83-f43c-46b9-be79-cc135ca6feff&quot;,&quot;parentUUID&quot;:&quot;79266679-970a-4e4d-b12d-22cfa45099ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list legacy tabs&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should list legacy tabs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  tabs = await dashboardController.listTabs(tenant);\n expect(tabs.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;214203f7-706f-43e6-b50c-d843f120b9a5&quot;,&quot;parentUUID&quot;:&quot;79266679-970a-4e4d-b12d-22cfa45099ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a legacy tab&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should get a legacy tab&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;tab = await dashboardController.getTab(tenant,tabSid);\n            expect(tab).to.exist         \n            expect(tab.SID).to.equal(tabSid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b9a5ba3-15d0-47db-aacf-a8eeb9a96292&quot;,&quot;parentUUID&quot;:&quot;79266679-970a-4e4d-b12d-22cfa45099ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a tab using a dashboard object&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should update a tab using a dashboard object&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const dashboardObject = {\n    sid: tab.SID,\n    title: tab.Title,\n    ordinal: 5000,\n}\nconst dashboardMask = await dashboardController.updateTabFromDashboardObject(tenant,dashboardObject);\nexpect(dashboardObject.modifiedDate).to.exist\ntab = await dashboardController.getTab(tenant,tab.SID);\nexpect(tab).to.exist         \nexpect(tab.SID).to.equal(tabSid)\nexpect(tab.Ordinal).to.equal(dashboardObject.ordinal)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fcec1589-ce93-4722-a676-a5fb1a9dba35&quot;,&quot;parentUUID&quot;:&quot;79266679-970a-4e4d-b12d-22cfa45099ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should convert a legacy tab&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should convert a legacy tab&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  dashboard = await dashboardController.converTabToDashboard(tab);\n            expect(dashboard).to.exist         \n            expect(dashboard.layouts).to.exist;\n            expect(dashboard.legacySid).to.equal(tabSid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c3a6dc8-085b-49f8-ab7b-455f1c79cab3&quot;,&quot;parentUUID&quot;:&quot;79266679-970a-4e4d-b12d-22cfa45099ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should migrate legacy tab to dashboard&quot;,&quot;fullTitle&quot;:&quot;Legacy tab mongo tests tab crud  should migrate legacy tab to dashboard&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  success = await dashboardController.migrateTabToDashboard(tenant, tabSid);\n            expect(success.sid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7b74e37a-be37-45ab-82a5-31510e15749d&quot;,&quot;parentUUID&quot;:&quot;79266679-970a-4e4d-b12d-22cfa45099ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;12217c83-f43c-46b9-be79-cc135ca6feff&quot;,&quot;214203f7-706f-43e6-b50c-d843f120b9a5&quot;,&quot;5b9a5ba3-15d0-47db-aacf-a8eeb9a96292&quot;,&quot;fcec1589-ce93-4722-a676-a5fb1a9dba35&quot;,&quot;4c3a6dc8-085b-49f8-ab7b-455f1c79cab3&quot;,&quot;7b74e37a-be37-45ab-82a5-31510e15749d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:26,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7fe4ba0a-ef61-4319-867e-dc215b6642eb&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;eba0781d-88b4-400b-89e8-2c9b34ab2602&quot;,&quot;title&quot;:&quot;Files db controller tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-files/test/db/file.controller.test.js&quot;,&quot;file&quot;:&quot;/test/db/file.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Files db controller tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests \&quot;before all\&quot; hook in \&quot;Files db controller tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await testLib.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5638f46f-85b1-43b2-ba3e-4c9978aadeb6&quot;,&quot;parentUUID&quot;:&quot;eba0781d-88b4-400b-89e8-2c9b34ab2602&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Files db controller tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests \&quot;after all\&quot; hook in \&quot;Files db controller tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await fileController.removeFiles(tenant, {path: \&quot;/created/by/mocha/test\&quot;});\nconsole.log(deleted);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c4fb097-17f4-40a5-8970-9871305fa346&quot;,&quot;parentUUID&quot;:&quot;eba0781d-88b4-400b-89e8-2c9b34ab2602&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;64648c24-6d8a-4152-990b-d4d8068c26c2&quot;,&quot;title&quot;:&quot;file crud &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-files/test/db/file.controller.test.js&quot;,&quot;file&quot;:&quot;/test/db/file.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  should create a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const file = await fileController.createFile(tenant, fileObj);\nsid = file.sid;\nexpect(sid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;985dd2f5-9955-468f-bf07-52624901a152&quot;,&quot;parentUUID&quot;:&quot;64648c24-6d8a-4152-990b-d4d8068c26c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  should get a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;file = await fileController.getFile(tenant, sid);\nexpect(file).to.exist;\nexpect(file.sid).to.equal(sid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6edf3bf1-5b10-414e-8d35-d91dc2b72269&quot;,&quot;parentUUID&quot;:&quot;64648c24-6d8a-4152-990b-d4d8068c26c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should find a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  should find a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;file = await fileController.findFile(tenant, {filePath: \&quot;/created/by/mocha/test\&quot;});\nexpect(file).to.exist;\nexpect(file.sid).to.equal(sid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31a18324-9428-424c-8365-cf896f8d9cfd&quot;,&quot;parentUUID&quot;:&quot;64648c24-6d8a-4152-990b-d4d8068c26c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  should update a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const updatedFile = await fileController.updateFile(\n  tenant,\n  file.toObject()\n);\nexpect(updatedFile).to.exist;\nexpect(updatedFile.sid).to.equal(sid);\nexpect(updatedFile.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fea36498-d157-45f4-a2d7-42671673bb3c&quot;,&quot;parentUUID&quot;:&quot;64648c24-6d8a-4152-990b-d4d8068c26c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a a file&quot;,&quot;fullTitle&quot;:&quot;Files db controller tests file crud  delete a a file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const deleted = await fileController.removeFile(tenant, fileObj);\nexpect(deleted).to.exist;\nexpect(deleted.deletedCount).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;805b665f-8065-4ce4-9613-3da34f3c4854&quot;,&quot;parentUUID&quot;:&quot;64648c24-6d8a-4152-990b-d4d8068c26c2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;985dd2f5-9955-468f-bf07-52624901a152&quot;,&quot;6edf3bf1-5b10-414e-8d35-d91dc2b72269&quot;,&quot;31a18324-9428-424c-8365-cf896f8d9cfd&quot;,&quot;fea36498-d157-45f4-a2d7-42671673bb3c&quot;,&quot;805b665f-8065-4ce4-9613-3da34f3c4854&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:57,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9b4b003a-b4c3-45d6-923b-1317734f1526&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;32a49907-51c8-412e-958c-0de270dfe16b&quot;,&quot;title&quot;:&quot;Form controller tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-forms/test/controller.test.js&quot;,&quot;file&quot;:&quot;/test/controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Form controller tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\ntenant = config.tenantOne.tenantId;\nsession = {jwt_token: &#x27;xxxxx&#x27;, tenant: config.tenantOne.tenantId, \nuser_sid: config.tenantOne.adminUser.sid,\nprofile: {\n  sid: config.tenantOne.adminUser.sid,\n  user_sid: config.tenantOne.adminUser.sid,\n  user_name: config.tenantOne.adminUser.userName,\n  email: \&quot;test@nowhere.com\&quot;,\n  name: config.tenantOne.adminUser.userName + \&quot; user\&quot;\n}\n   }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;faa2ee03-d4a9-452f-a1dc-817b8990f51a&quot;,&quot;parentUUID&quot;:&quot;32a49907-51c8-412e-958c-0de270dfe16b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5fbd4436-b50b-4df9-bebd-762a264df499&quot;,&quot;title&quot;:&quot;form retrieval&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-forms/test/controller.test.js&quot;,&quot;file&quot;:&quot;/test/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should retrieve a form by id with default&quot;,&quot;fullTitle&quot;:&quot;Form controller tests form retrieval should retrieve a form by id with default&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:48,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const form = await controller.getForm(tenant, profileFormSid);\nexpect(form[&#x27;name&#x27;]).to.equal(&#x27;Contact Profile Update Form&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e7e59fd-5de1-4c13-b653-137f0eee56d0&quot;,&quot;parentUUID&quot;:&quot;5fbd4436-b50b-4df9-bebd-762a264df499&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should parse out questions&quot;,&quot;fullTitle&quot;:&quot;Form controller tests form retrieval should parse out questions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const questions = await controller.getFormQuestions(tenant, profileFormSid);\nexpect(questions.length).to.equal(12);\nexpect(Object.keys(questions[0])).to.have.members([&#x27;id&#x27;, &#x27;displayName&#x27;, &#x27;label&#x27;, &#x27;show&#x27;, &#x27;type&#x27;, &#x27;validation&#x27;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34f2a228-30b2-4133-a5d8-8de5c7d4bf95&quot;,&quot;parentUUID&quot;:&quot;5fbd4436-b50b-4df9-bebd-762a264df499&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list forms without a name search&quot;,&quot;fullTitle&quot;:&quot;Form controller tests form retrieval should list forms without a name search&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:177,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const forms = await controller.listForms(tenant);\nexpect(forms.length).to.be.gt(0);\nexpect(forms[0].name).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;027e8280-e76b-489d-a46b-548ef1691610&quot;,&quot;parentUUID&quot;:&quot;5fbd4436-b50b-4df9-bebd-762a264df499&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list forms with a name search&quot;,&quot;fullTitle&quot;:&quot;Form controller tests form retrieval should list forms with a name search&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const forms = await controller.listForms(tenant, {sid: profileFormSid});\nexpect(forms.length).to.be.gt(0);\nexpect(forms[0].sid).to.equal(profileFormSid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0dcf7ea9-c1a2-4f19-9082-0bb0868d6195&quot;,&quot;parentUUID&quot;:&quot;5fbd4436-b50b-4df9-bebd-762a264df499&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7e7e59fd-5de1-4c13-b653-137f0eee56d0&quot;,&quot;34f2a228-30b2-4133-a5d8-8de5c7d4bf95&quot;,&quot;027e8280-e76b-489d-a46b-548ef1691610&quot;,&quot;0dcf7ea9-c1a2-4f19-9082-0bb0868d6195&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:237,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;69858d68-2edb-42d0-ad61-3e7420ab7b90&quot;,&quot;title&quot;:&quot;Form route handler tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-forms/test/handlers.test.js&quot;,&quot;file&quot;:&quot;/test/handlers.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Form route handler tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\ntenant = config.tenantOne.tenantId;\nintegrifyEnvToken = config.tenantOne.tenantId + \&quot; \&quot; + process.env.INTEGRIFY_ENV_TOKEN\noauth = {jwt_token: &#x27;xxxxx&#x27;, tenant: config.tenantOne.tenantId, \nuser_sid: config.tenantOne.adminUser.sid,\nprofile: {\n  sid: config.tenantOne.adminUser.sid,\n  user_sid: config.tenantOne.adminUser.sid,\n  user_name: config.tenantOne.adminUser.userName,\n  email: \&quot;test@nowhere.com\&quot;,\n  name: config.tenantOne.adminUser.userName + \&quot; user\&quot;\n}\n       }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef6ea337-be05-4609-b64d-887fc399ff81&quot;,&quot;parentUUID&quot;:&quot;69858d68-2edb-42d0-ad61-3e7420ab7b90&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b0efd7b4-69d7-4131-b4a0-c93d50362d9f&quot;,&quot;title&quot;:&quot;form retrieval&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-forms/test/handlers.test.js&quot;,&quot;file&quot;:&quot;/test/handlers.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should retrieve a form by id with default&quot;,&quot;fullTitle&quot;:&quot;Form route handler tests form retrieval should retrieve a form by id with default&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.formSid = profileFormSid;\nawait handlers.getForm(req,mockRes);\nconst form = mockRes.body;\nexpect(form.name).to.equal(&#x27;Contact Profile Update Form&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3530ae7-2374-4761-a9cc-b1d015f3c967&quot;,&quot;parentUUID&quot;:&quot;b0efd7b4-69d7-4131-b4a0-c93d50362d9f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should parse out questions&quot;,&quot;fullTitle&quot;:&quot;Form route handler tests form retrieval should parse out questions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.formSid = profileFormSid;\nawait handlers.getFormQuestions(req, mockRes);\nconst questions = mockRes.body;\nexpect(questions.length).to.equal(12);\nexpect(Object.keys(questions[0])).to.have.members([&#x27;id&#x27;, &#x27;displayName&#x27;, &#x27;label&#x27;, &#x27;show&#x27;, &#x27;type&#x27;, &#x27;validation&#x27;])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4dd8094f-602f-4790-a342-acb065a570b0&quot;,&quot;parentUUID&quot;:&quot;b0efd7b4-69d7-4131-b4a0-c93d50362d9f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list forms without a query or userPerms&quot;,&quot;fullTitle&quot;:&quot;Form route handler tests form retrieval should list forms without a query or userPerms&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:307,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\n//req.params.formSid = profileFormSid;\nawait handlers.searchForms(req,mockRes);\nconst forms = mockRes.body;\nexpect(forms.length).to.be.gt(0);\nexpect(forms[0].name).to.exist;\nexpect(forms[0].categoryName).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;05230ccb-3f72-42fe-baf2-5a8db7a7e88e&quot;,&quot;parentUUID&quot;:&quot;b0efd7b4-69d7-4131-b4a0-c93d50362d9f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list forms with a search term&quot;,&quot;fullTitle&quot;:&quot;Form route handler tests form retrieval should list forms with a search term&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.query.search = &#x27;profile Update&#x27;;\nawait handlers.searchForms(req,mockRes);\nconst forms = mockRes.body;\nexpect(forms.length).to.be.gt(0);\nexpect(forms[0].categoryName).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;156b4313-f325-45a6-a32c-3d9c23f4f502&quot;,&quot;parentUUID&quot;:&quot;b0efd7b4-69d7-4131-b4a0-c93d50362d9f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a3530ae7-2374-4761-a9cc-b1d015f3c967&quot;,&quot;4dd8094f-602f-4790-a342-acb065a570b0&quot;,&quot;05230ccb-3f72-42fe-baf2-5a8db7a7e88e&quot;,&quot;156b4313-f325-45a6-a32c-3d9c23f4f502&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:331,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f2ebcaf6-1ded-43cc-99d2-41686bd947d0&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2b71ab35-eaa3-4782-83ee-e98d3b058ced&quot;,&quot;title&quot;:&quot;Instance API Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()} //system level\n// session = {tenant: config.tenantOne.tenantId, user_sid: &#x27;1e660111-de6f-4318-8f51-6e59cb33d8d7&#x27;} //process level\n// session = {tenant: config.tenantOne.tenantId, user_sid:&#x27;521a92c8-e77c-4537-811b-dea6e533d800&#x27;} //category level\ntenantId = config.tenantOne.tenantId;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;419ca87e-90ab-4c03-8cf1-07b3ed037f6b&quot;,&quot;parentUUID&quot;:&quot;2b71ab35-eaa3-4782-83ee-e98d3b058ced&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;eeb5a773-dbfa-4f6b-b3bf-127a08e95f0b&quot;,&quot;title&quot;:&quot;list tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;get a full instance&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get a full instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:248,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet instances = await Instance.query().orderBy(\&quot;createdDate\&quot;, \&quot;desc\&quot;);\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst fullInstance = await instanceController.getFullInstance(\n  sampleInstanceGuid\n);\nexpect(fullInstance).to.exist;\nexpect(fullInstance.instanceTasks.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1bba5d2a-4431-4564-85db-b867887cc463&quot;,&quot;parentUUID&quot;:&quot;eeb5a773-dbfa-4f6b-b3bf-127a08e95f0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet instances = await Instance.query().orderBy(\&quot;createdDate\&quot;, \&quot;desc\&quot;);\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst instance = await instanceController.getInstance(sampleInstanceGuid)\nexpect(instance).to.exist;\nexpect(instance.instanceGuid).to.equal(sampleInstanceGuid)\nexpect(instance.instanceId).to.be.gt(0)\nexpect(instance.requester).to.not.exist;\nexpect(instance.client).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a0958b5f-8b8e-427d-868e-ab8fdd642ebd&quot;,&quot;parentUUID&quot;:&quot;eeb5a773-dbfa-4f6b-b3bf-127a08e95f0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance with requester&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance with requester&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet instances = await Instance.query().orderBy(\&quot;createdDate\&quot;, \&quot;desc\&quot;);\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst instance = await instanceController.getInstance(sampleInstanceGuid, {requester: true})\nexpect(instance).to.exist;\nexpect(instance.instanceGuid).to.equal(sampleInstanceGuid)\nexpect(instance.instanceId).to.be.gt(0)\nexpect(instance.requester).to.exist;\nexpect(instance.requester.contactGuid).to.exist;\nexpect(instance.client).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d575f64f-057f-4c35-bb7a-c6df2e604f77&quot;,&quot;parentUUID&quot;:&quot;eeb5a773-dbfa-4f6b-b3bf-127a08e95f0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance with client&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance with client&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet instances = await Instance.query().orderBy(\&quot;createdDate\&quot;, \&quot;desc\&quot;);\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst instance = await instanceController.getInstance(sampleInstanceGuid, {client: true})\nexpect(instance).to.exist;\nexpect(instance.instanceGuid).to.equal(sampleInstanceGuid)\nexpect(instance.instanceId).to.be.gt(0)\nexpect(instance.requester).to.not.exist;\nexpect(instance.client).to.exist;\nexpect(instance.client.contactGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1eac6b71-aea9-4930-9af2-cb497288b6f6&quot;,&quot;parentUUID&quot;:&quot;eeb5a773-dbfa-4f6b-b3bf-127a08e95f0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance with client manager&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance with client manager&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\n// get instances for Joe User, who reports to System System\nlet instances = await Instance.query().where(\&quot;clientGuid\&quot;, &#x27;92a73dad-d953-4c59-9c5e-5d037791d411&#x27;);\n\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst instance = await instanceController.getInstance(sampleInstanceGuid, {clientManager: true})\nexpect(instance).to.exist;\nexpect(instance.instanceGuid).to.equal(sampleInstanceGuid)\nexpect(instance.instanceId).to.be.gt(0)\nexpect(instance.requester).to.not.exist;\nexpect(instance.client).to.exist;\nexpect(instance.client.contactGuid).to.exist;\nexpect(instance.client.manager).to.exist;\nexpect(instance.client.manager.contactGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0fec1ac3-40d6-4e49-8ffa-d1f4ade08bde&quot;,&quot;parentUUID&quot;:&quot;eeb5a773-dbfa-4f6b-b3bf-127a08e95f0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance process&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance process&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet instances = await Instance.query().orderBy(\&quot;createdDate\&quot;, \&quot;desc\&quot;);\nexpect(instances.length).to.be.gt(0);\nsampleInstanceGuid = instances[0].instanceGuid;\nsampleInstance = instances[0];\nconst instanceController = new InstanceController(config.tenantOne);\nconst instanceProcess = await instanceController.getInstanceProcess(sampleInstanceGuid)\nexpect(instanceProcess).to.exist;\nexpect(instanceProcess.instanceGuid).to.equal(sampleInstanceGuid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6d09a28b-bb74-4dc3-9ec8-73f6f868c99d&quot;,&quot;parentUUID&quot;:&quot;eeb5a773-dbfa-4f6b-b3bf-127a08e95f0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets an instance recipient tasks data by instanceSid&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests gets an instance recipient tasks data by instanceSid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(config.tenantOne);\nconst instanceSid = &#x27;6D4785AE-57A2-46C5-9141-DE2B134ED8EF&#x27;\nconst instanceTasks = await instanceController.getInstanceRecipientTasksData(instanceSid);\n\nexpect(instanceTasks).to.exist;\nexpect(instanceTasks.length).to.be.gt(0);\nconst maintenanceReqFormTask = instanceTasks[2]\nexpect(maintenanceReqFormTask.taskName).to.equal(&#x27;Maintenance Request Form&#x27;)\nexpect(maintenanceReqFormTask.recipientTasks.length).to.be.gt(0)\nconst recipientTask = maintenanceReqFormTask.recipientTasks[0]\nexpect(recipientTask.recipientGuid).to.equal(&#x27;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF&#x27;);\nexpect(recipientTask.taskData.length).to.be.gt(0)\nexpect(recipientTask.taskData.find(x =&gt; x.dataLabel == &#x27;Location of Problem&#x27;).dataValue).to.equal(&#x27;Inside the building&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;12db1701-cf32-4c77-84a0-c242209bf365&quot;,&quot;parentUUID&quot;:&quot;eeb5a773-dbfa-4f6b-b3bf-127a08e95f0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my requests columns&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my requests columns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getMyRequests();\n        \nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0);\nsampleInstance = firstInstance;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;51c8d05d-b81f-4554-854d-fd0d78e9c9cb&quot;,&quot;parentUUID&quot;:&quot;eeb5a773-dbfa-4f6b-b3bf-127a08e95f0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - filters - ID&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - filters - ID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:63,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\n        \nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;processId\&quot;,\n          data: {\n            comparison: \&quot;eq\&quot;,\n            value: sampleInstance.processId,\n          },\n        },\n      ],\n      count: 5,\n    });\n        \n    expect(result.results[0].processId).to.equal(sampleInstance.processId);\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;instanceId\&quot;,\n          data: {\n            comparison: \&quot;gt\&quot;,\n            value: 500,\n          },\n        },\n      ],\n      sort: \&quot;instanceId\&quot;,\n      dir: \&quot;asc\&quot;,\n      count: 5,\n    });\n        \n    // no longer useful after starting over with an empty db\n    // result.results.length.should.equal(5); \n        \n    result.results.forEach((result) =&gt; {\n      expect(result.instanceId).to.be.gt(500);\n    });\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;instanceId\&quot;,\n          data: {\n            comparison: \&quot;lt\&quot;,\n            value: 505,\n          },\n        },\n      ],\n      sort: \&quot;instanceId\&quot;,\n      dir: \&quot;desc\&quot;,\n      count: 2,\n    });\n        \n    expect(result.results.length).to.equal(2);\n    result.results.forEach((result) =&gt; {\n      expect(result.instanceId).to.be.lt(505);\n    });\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19644137-7942-4d34-9404-bdbe63ae1f40&quot;,&quot;parentUUID&quot;:&quot;eeb5a773-dbfa-4f6b-b3bf-127a08e95f0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - filters - date&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - filters - date&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:84,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\n        \nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let d = moment().day(-90);\n    let result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;range\&quot;, value: \&quot;90\&quot; },\n        },\n      ],\n      count: 1,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    if (result.results.length)\n      expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    d = moment().year(-30);\n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;range\&quot;, value: \&quot;30\&quot; },\n        },\n      ],\n      count: 1,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    if (result.results.length)\n        expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    d = moment().day(-7);\n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;range\&quot;, value: \&quot;7\&quot; },\n        },\n      ],\n      count: 1,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    // if (result.results.length)\n    //     expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    // d = moment().day(-3);\n    // result = await f.call(instanceController, {\n    //   filters: [\n    //     {\n    //       field: \&quot;StartDate\&quot;,\n    //       data: { comparison: \&quot;range\&quot;, value: \&quot;3\&quot; },\n    //     },\n    //   ],\n    //   count: 1,\n    //   dir: \&quot;asc\&quot;,\n    // });\n        \n    // if (result.results.length)\n    //     expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    // d = moment().day(-1);\n    // result = await f.call(instanceController, {\n    //   filters: [\n    //     {\n    //       field: \&quot;StartDate\&quot;,\n    //       data: { comparison: \&quot;range\&quot;, value: \&quot;1\&quot; },\n    //     },\n    //   ],\n    //   count: 1,\n    //   dir: \&quot;asc\&quot;,\n    // });\n        \n    // if (result.results.length)\n    //     expect(result.results[0].startDate).to.be.gt(d.toDate());\n        \n    const startDate = moment(\&quot;2018-10-11\&quot;);\n    const endDate = moment(\&quot;2018-11-23\&quot;);\n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;gt\&quot;, value: \&quot;2018-10-11\&quot; },\n        },\n        {\n          field: \&quot;StartDate\&quot;,\n          data: { comparison: \&quot;lt\&quot;, value: \&quot;2018-11-23\&quot; },\n        },\n      ],\n      count: 1,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    if (result.results.length) {\n        expect(result.results[0].startDate).to.be.gt(startDate.toDate());\n        expect(result.results[0].startDate).to.be.lt(endDate.toDate());\n    }\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;97c7b632-2acb-44d5-858a-b4302f8b19ff&quot;,&quot;parentUUID&quot;:&quot;eeb5a773-dbfa-4f6b-b3bf-127a08e95f0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - filters - name&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - filters - name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:47,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;instanceName\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: \&quot;test\&quot; },\n        },\n      ],\n      count: 10,\n    });\n        \n    result.results.forEach((instance) =&gt; {\n      expect(instance.instanceName.toLowerCase()).to.contain(\&quot;test\&quot;);\n    });\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;processName\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: \&quot;test\&quot; },\n        },\n      ],\n      count: 10,\n    });\n        \n    // no longer useful after starting over with an empty db\n    // result.results.forEach((instance) =&gt; {\n    //   instance.processName.should.contain(\&quot;test\&quot;);\n    // });\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;requester\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: \&quot;system system\&quot; },\n        },\n      ],\n      count: 10,\n    });\n        \n    result.results.forEach((instance) =&gt; {\n      expect(instance.requesterGuid\n        .toLowerCase())\n        .to.equal(session.user_sid.toLowerCase());\n    });\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9f9bfa8-ed6a-4efa-9a0e-07a2ddeca9cc&quot;,&quot;parentUUID&quot;:&quot;eeb5a773-dbfa-4f6b-b3bf-127a08e95f0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - filters - guid&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - filters - guid&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;processGuid\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: sampleInstance.processGuid },\n        },\n      ],\n      count: 10,\n    });\n        \n    result.results.forEach((instance) =&gt; {\n      expect(instance.processName.indexOf(sampleInstance.processName)).to.be.gt(-1);\n    });\n        \n    result = await f.call(instanceController, {\n      filters: [\n        {\n          field: \&quot;requesterGuid\&quot;,\n          data: { comparison: \&quot;contains\&quot;, value: session.user_sid },\n        },\n      ],\n      count: 10,\n    });\n        \n    result.results.forEach((instance) =&gt; {\n      expect(instance.requesterGuid\n        .toLowerCase())\n        .to.equal(session.user_sid);\n    });\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;49626721-57b0-4c46-83e8-0f757ced00fd&quot;,&quot;parentUUID&quot;:&quot;eeb5a773-dbfa-4f6b-b3bf-127a08e95f0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my/manage/monitor requests param - count&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my/manage/monitor requests param - count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\n        \nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, { count: 2 });\n        \n    expect(result.results).to.exist;\n    expect(result.results.length).to.equal(2);\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43489993-4af4-4b81-abf9-949b605c500f&quot;,&quot;parentUUID&quot;:&quot;eeb5a773-dbfa-4f6b-b3bf-127a08e95f0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my requests params - sort, dir&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my requests params - sort, dir&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      count: 2,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    expect(result.results[0].createdDate).to.be.lt(\n      result.results[1].createdDate\n    );\n        \n    result = await f.call(instanceController, {\n      count: 2,\n      dir: \&quot;desc\&quot;,\n    });\n        \n    expect(result.results[0].createdDate).to.be.gt(\n      result.results[1].createdDate\n    );\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;35a2a5e5-3b00-44d8-9fa6-56aaeb0a24dc&quot;,&quot;parentUUID&quot;:&quot;eeb5a773-dbfa-4f6b-b3bf-127a08e95f0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get my requests param - start&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get my requests param - start&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:29,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst funcs = [\n  await instanceController.getMyRequests,\n  await instanceController.getManageMonitorRequests,\n];\n        \nawait Promise.all(\n  funcs.map(async (f) =&gt; {\n    let result = await f.call(instanceController, {\n      start: 0,\n      count: 2,\n      sort: \&quot;instanceId\&quot;,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    const startZeroId = result.results[0].instanceId;\n        \n    result = await f.call(instanceController, {\n      start: 1,\n      count: 2,\n      sort: \&quot;instanceId\&quot;,\n      dir: \&quot;asc\&quot;,\n    });\n        \n    const startOneId = result.results[0].instanceId;\n        \n    expect(startZeroId).to.be.lessThan(startOneId);\n  })\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b073edbd-bf96-4169-b167-8080bc33483b&quot;,&quot;parentUUID&quot;:&quot;eeb5a773-dbfa-4f6b-b3bf-127a08e95f0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get monitor requests&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get monitor requests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({permisionType: &#x27;monitor&#x27;});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\nexpect(firstInstance.requester).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e4347500-beee-4820-b3b6-17e6b2ee2260&quot;,&quot;parentUUID&quot;:&quot;eeb5a773-dbfa-4f6b-b3bf-127a08e95f0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get monitor requests with search term against procssName, instanceName and requester&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get monitor requests with search term against procssName, instanceName and requester&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({search: sampleInstance.processName, permisionType: &#x27;monitor&#x27;});\nconsole.log(result)\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\nexpect(firstInstance.requester).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f59fba75-f013-45dd-8148-14529089454f&quot;,&quot;parentUUID&quot;:&quot;eeb5a773-dbfa-4f6b-b3bf-127a08e95f0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get monitor requests with a numeric term against instanceId&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get monitor requests with a numeric term against instanceId&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({search: sampleInstance.instanceId, permisionType: &#x27;monitor&#x27;});\nconsole.log(result)\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\nexpect(firstInstance.requester).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ec26c82a-7cc9-45e9-adb4-fa819e70bfdf&quot;,&quot;parentUUID&quot;:&quot;eeb5a773-dbfa-4f6b-b3bf-127a08e95f0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;get manage requests&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests list tests get manage requests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({permisionType: &#x27;manage&#x27;});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\n        \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\n// console.log(result);\nexpect(firstInstance.instanceGuid).to.be.ok\nexpect(firstInstance.instanceId).to.be.ok\nexpect(firstInstance.instanceName).to.be.ok\nexpect(firstInstance.processName).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;lastMilestone\&quot;)).to.be.ok\nexpect(firstInstance.createdDate).to.be.ok\nexpect(Object.keys(firstInstance).includes(\&quot;modifiedDate\&quot;)).to.be.ok\nexpect(firstInstance.requester).to.be.ok\n\n        \nexpect(result.total).to.be.greaterThan(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5ae0d441-1c12-4ce1-99da-f41f27626c3d&quot;,&quot;parentUUID&quot;:&quot;eeb5a773-dbfa-4f6b-b3bf-127a08e95f0b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1bba5d2a-4431-4564-85db-b867887cc463&quot;,&quot;a0958b5f-8b8e-427d-868e-ab8fdd642ebd&quot;,&quot;d575f64f-057f-4c35-bb7a-c6df2e604f77&quot;,&quot;1eac6b71-aea9-4930-9af2-cb497288b6f6&quot;,&quot;0fec1ac3-40d6-4e49-8ffa-d1f4ade08bde&quot;,&quot;6d09a28b-bb74-4dc3-9ec8-73f6f868c99d&quot;,&quot;12db1701-cf32-4c77-84a0-c242209bf365&quot;,&quot;51c8d05d-b81f-4554-854d-fd0d78e9c9cb&quot;,&quot;19644137-7942-4d34-9404-bdbe63ae1f40&quot;,&quot;97c7b632-2acb-44d5-858a-b4302f8b19ff&quot;,&quot;b9f9bfa8-ed6a-4efa-9a0e-07a2ddeca9cc&quot;,&quot;49626721-57b0-4c46-83e8-0f757ced00fd&quot;,&quot;43489993-4af4-4b81-abf9-949b605c500f&quot;,&quot;35a2a5e5-3b00-44d8-9fa6-56aaeb0a24dc&quot;,&quot;b073edbd-bf96-4169-b167-8080bc33483b&quot;,&quot;e4347500-beee-4820-b3b6-17e6b2ee2260&quot;,&quot;f59fba75-f013-45dd-8148-14529089454f&quot;,&quot;ec26c82a-7cc9-45e9-adb4-fa819e70bfdf&quot;,&quot;5ae0d441-1c12-4ce1-99da-f41f27626c3d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:719,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;0c31062d-5dfa-409d-ad3c-2282117cf201&quot;,&quot;title&quot;:&quot;delete/undelete tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;deletes a request&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests deletes a request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1582,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst result = await instanceController.getManageMonitorRequests({permisionType: &#x27;monitor&#x27;});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\nsampleInstances = result.results;\n    \n// make sure it has the columns that we want\nconst firstInstance = result.results[0];\nsampleInstanceGuid = firstInstance.instanceGuid;\n      \nlet deleted = await instanceController.deleteInstance(sampleInstanceGuid);\n\nexpect(sampleInstanceGuid).to.equal(deleted.instanceGuid)\nexpect(deleted.deletedDate).not.be.null\nconst Instance = await models.getModel(config.tenantOne.tenantId, \&quot;Instance\&quot;);\nlet excludeDeleted = await Instance.query().where({instanceGuid: sampleInstanceGuid})\nexpect(excludeDeleted.length).to.equal(0);\n\t\t\t\tawait delay(1500);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4d40e18-81b3-4243-8f2e-7d49c4997d67&quot;,&quot;parentUUID&quot;:&quot;0c31062d-5dfa-409d-ad3c-2282117cf201&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retores a request&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests retores a request&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1515,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nlet undeleted = await instanceController.restoreInstance(sampleInstanceGuid);\n//expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\nexpect(sampleInstanceGuid).to.equal(undeleted.instanceGuid)\nexpect(undeleted.deletedDate).to.be.null;\n\t\t\t\tawait delay(1500);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;65a6c730-a4c1-4871-a7b7-eb442becb518&quot;,&quot;parentUUID&quot;:&quot;0c31062d-5dfa-409d-ad3c-2282117cf201&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;deletes a batch of requests&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests deletes a batch of requests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1610,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst instanceGuids = sampleInstances.map((i) =&gt; {\n  return i.instanceGuid;\n})\nlet deleted = await instanceController.deleteInstances(instanceGuids);\n//expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\nexpect(deleted.length).to.equal(sampleInstances.length);\n//expect(deleted[0].instanceGuid).to.equal(sampleInstances[0].instanceGuid);\nexpect(deleted[0].deletedDate).not.to.be.null;\n\t\t\t\tawait delay(1500);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a3a340d-6922-4e18-bb91-e38087645976&quot;,&quot;parentUUID&quot;:&quot;0c31062d-5dfa-409d-ad3c-2282117cf201&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;restores a batch of requests&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests restores a batch of requests&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1596,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nconst instanceGuids = sampleInstances.map((i) =&gt; {\n  return i.instanceGuid;\n})\nlet deleted = await instanceController.restoreInstances(instanceGuids);\n//expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\nexpect(deleted.length).to.equal(sampleInstances.length);\nexpect(deleted[0].instanceGuid).to.equal(sampleInstances[0].instanceGuid);\nexpect(deleted[0].deletedDate).to.be.null;\n\t\t\t\tawait delay(1500);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ef9248f0-4111-467e-9334-de3ac0892337&quot;,&quot;parentUUID&quot;:&quot;0c31062d-5dfa-409d-ad3c-2282117cf201&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;restores all&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests delete/undelete tests restores all&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1906,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\nlet restored = await instanceController.restoreAllInstances();\n//expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\nexpect(restored.length).to.gt(0);\n\t\t\t\tawait delay(1500);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7edf44dd-a90e-49b1-8597-a1a738389548&quot;,&quot;parentUUID&quot;:&quot;0c31062d-5dfa-409d-ad3c-2282117cf201&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b4d40e18-81b3-4243-8f2e-7d49c4997d67&quot;,&quot;65a6c730-a4c1-4871-a7b7-eb442becb518&quot;,&quot;7a3a340d-6922-4e18-bb91-e38087645976&quot;,&quot;ef9248f0-4111-467e-9334-de3ac0892337&quot;,&quot;7edf44dd-a90e-49b1-8597-a1a738389548&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8209,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;24610b8a-cc19-42ea-adf0-31d6ddc28812&quot;,&quot;title&quot;:&quot;insert tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;inserts an instance data&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests insert tests inserts an instance data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1518,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceDataRow = {\n  itaskRecipientGuid: &#x27;8ad1a6f2-9f6f-4667-9750-d961044ed817&#x27;,\n  itaskGuid: &#x27;5bde578f-615f-4494-86b2-ca61044ed883&#x27;,\n  taskGuid: &#x27;6386f905-7fac-41c6-9b6b-86d53f14d61c&#x27;,\n  objectGuid: null,\n  objectType: null,\n  objectId: null,\n  dataProperty: &#x27;1491430190541&#x27;,\n  dataType: &#x27;String&#x27;,\n  dataSid: &#x27;14777392-ac81-44f0-b1f2-87d53f14d65d&#x27;,\n  dataId: null,\n  dataClientId: &#x27;1491430190541&#x27;,\n  dataLabel: &#x27;Enter Details:&#x27;,\n  dataValue: &#x27;Need a background check&#x27;,\n  META_1: &#x27;TEST_INSERT_INSTANCE_DATA&#x27;,\n  META_2: null,\n  dataHide: null,\n  instanceContactGuid: null,\n  roleGuid: null,\n  dataValueExt: null,\n  questionType: &#x27;LongText&#x27;,\n  deletedDate: new Date().toISOString() // so that it doesnt interfere with its instance\n}\nconst instanceController = new InstanceController(session)\nlet instanceDataGuid = await instanceController.insertInstanceData(instanceDataRow)\nexpect(instanceDataGuid).to.be.a.uuid()\n\t\t\t\tawait delay(1500);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f7df0d3b-fb30-4bc5-9a82-bde6e5da053c&quot;,&quot;parentUUID&quot;:&quot;24610b8a-cc19-42ea-adf0-31d6ddc28812&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f7df0d3b-fb30-4bc5-9a82-bde6e5da053c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1518,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;69ec5df1-51c7-4aa3-821e-9b0267c92266&quot;,&quot;title&quot;:&quot;update tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/instanceController.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates an instance task recipient task state&quot;,&quot;fullTitle&quot;:&quot;Instance API Controller Tests update tests updates an instance task recipient task state&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:28,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session)\nconst recipTaskSid = &#x27;b3fef53a-7742-46d1-9faf-be573c14d6fa&#x27;\nlet taskState = &#x27;Cancelled&#x27;\nlet updated = await instanceController.setInstanceRecipientTaskState(recipTaskSid, taskState)\nexpect(updated.taskState).to.equal(taskState)\n// change it back to Completed\ntaskState = &#x27;Completed&#x27;\nupdated = await instanceController.setInstanceRecipientTaskState(recipTaskSid, taskState)\nexpect(updated.taskState).to.equal(taskState)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66988cfb-b781-4cdf-ae91-3c480914b664&quot;,&quot;parentUUID&quot;:&quot;69ec5df1-51c7-4aa3-821e-9b0267c92266&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;66988cfb-b781-4cdf-ae91-3c480914b664&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:28,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;d11c41c1-90c7-44d0-a887-db9a8d4a50c1&quot;,&quot;title&quot;:&quot;Instance API Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/instanceModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;763ad7f3-e4e0-4116-9d71-d6f600aad4be&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/instanceModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/instanceModel.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Instance API Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;390f6f6b-09d7-4091-8d1b-14401825e32b&quot;,&quot;parentUUID&quot;:&quot;763ad7f3-e4e0-4116-9d71-d6f600aad4be&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Instance API Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceModel = await sqldb.models.bindModel(config.tenantOne.tenantId, instanceModels.Instance)\n          \n          let results = await instanceModel.query()\n          //console.log(results)\n          expect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ef6f378-58bd-4b1c-8b7e-2ff551b65ca1&quot;,&quot;parentUUID&quot;:&quot;763ad7f3-e4e0-4116-9d71-d6f600aad4be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a hash of bound models&quot;,&quot;fullTitle&quot;:&quot;Instance API Model Tests tests should return a hash of bound models&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceModel = (await models.getModels(config.tenantOne.tenantId)).Instance;\n          \n          let results = await instanceModel.query()\n          //console.log(results)\n          expect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5e7d01ec-aee9-432c-a374-2621278faea8&quot;,&quot;parentUUID&quot;:&quot;763ad7f3-e4e0-4116-9d71-d6f600aad4be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should bound models should be cached in memory&quot;,&quot;fullTitle&quot;:&quot;Instance API Model Tests tests should bound models should be cached in memory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(models._tenantModels[config.tenantOne.tenantId]).to.exist\n          let results = await models._tenantModels[config.tenantOne.tenantId].Instance.query()\n          //console.log(results)\n          expect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff6d0e01-390f-4644-b6c4-96c98702f829&quot;,&quot;parentUUID&quot;:&quot;763ad7f3-e4e0-4116-9d71-d6f600aad4be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6ef6f378-58bd-4b1c-8b7e-2ff551b65ca1&quot;,&quot;5e7d01ec-aee9-432c-a374-2621278faea8&quot;,&quot;ff6d0e01-390f-4644-b6c4-96c98702f829&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;57a3aa8d-3590-48c4-aaf9-74506c4ac97f&quot;,&quot;title&quot;:&quot;Task API Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/myTaskController.test.js&quot;,&quot;file&quot;:&quot;/test/db/myTaskController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()};\ntenantId = config.tenantOne.tenantId;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3f38d81a-413b-4ec4-b6aa-102c978adae1&quot;,&quot;parentUUID&quot;:&quot;57a3aa8d-3590-48c4-aaf9-74506c4ac97f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0166b9ed-f8d7-464a-8326-c780f10da142&quot;,&quot;title&quot;:&quot;list tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/myTaskController.test.js&quot;,&quot;file&quot;:&quot;/test/db/myTaskController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set a sample task&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should set a sample task&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:153,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Task = await models.getModel(config.tenantOne.tenantId, &#x27;InstanceRecipientTask&#x27;);\nconst tasks = await Task.query()\n  .withGraphFetched(&#x27;[instanceTaskBase, taskType, instance]&#x27;)\n  .where(&#x27;recipientGuid&#x27;, session.user_sid)\n  .orderBy(&#x27;instanceRecipientTask.createdDate&#x27;, &#x27;desc&#x27;);\nexpect(tasks.length).to.be.gt(0);\nsampleTaskGuid = tasks[0].itaskRecipientGuid;\nsampleTask = tasks[0];\nsampleTask.taskName = sampleTask.instanceTaskBase.taskName;\nsampleTask.taskTypeName = sampleTask.taskType.taskTypeName;\nsampleTask.instanceId = sampleTask.instance.instanceId;\nsampleTask.instanceName = sampleTask.instance.instanceName;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34f583c3-317e-4003-aac6-8702a65c346d&quot;,&quot;parentUUID&quot;:&quot;0166b9ed-f8d7-464a-8326-c780f10da142&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks columns&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks columns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:109,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst result = await taskController.getMyTasks();\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\nconst firstTask = result.results[0];\nexpect(firstTask.itaskRecipientId).to.be.ok;\nexpect(firstTask.itaskRecipientGuid).to.be.ok;\nexpect(firstTask.taskName).to.be.ok;\nexpect(firstTask.taskTypeName).to.be.ok;\nexpect(firstTask.createdDate).to.be.ok;\nexpect(firstTask.dueDate).not.to.be.undefined;\nexpect(firstTask.priority).not.to.be.undefined;\nexpect(firstTask.instanceName).to.be.ok;\nexpect(firstTask.instanceId).to.be.ok;\nexpect(firstTask.lastMilestone).to.be.ok;\nexpect(result.total).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c5eb876f-cce4-4734-ae36-94b444065a73&quot;,&quot;parentUUID&quot;:&quot;0166b9ed-f8d7-464a-8326-c780f10da142&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my open tasks only&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my open tasks only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:102,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskState&#x27;, &#x27;eq&#x27;, &#x27;Open&#x27;, 50, &#x27;asc&#x27;);\nconst result = await taskController.getMyTasks(options);\nresult.results.forEach(task =&gt; {\n  expect(task.taskState === &#x27;Initialized&#x27; || task.taskState === &#x27;Started&#x27;).to.equal(true);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36baa81a-db7f-4caa-8251-4ce9e63bd319&quot;,&quot;parentUUID&quot;:&quot;0166b9ed-f8d7-464a-8326-c780f10da142&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my completed tasks only&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my completed tasks only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:112,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskState&#x27;, &#x27;eq&#x27;, &#x27;Completed&#x27;, 50, &#x27;asc&#x27;);\nconst result = await taskController.getMyTasks(options);\nresult.results.forEach(task =&gt; {\n  expect(task.taskState).to.equal(&#x27;Completed&#x27;);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;74957e76-2da5-44cd-b9d9-1f41ff63296a&quot;,&quot;parentUUID&quot;:&quot;0166b9ed-f8d7-464a-8326-c780f10da142&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: taskName&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: taskName&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:112,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskName&#x27;, &#x27;contains&#x27;, sampleTask.taskName);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5fec049a-aace-45e8-953d-58ed441690c7&quot;,&quot;parentUUID&quot;:&quot;0166b9ed-f8d7-464a-8326-c780f10da142&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: taskType&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: taskType&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:103,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;taskType&#x27;, &#x27;contains&#x27;, sampleTask.taskTypeName);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;696927fb-9686-4200-ad8e-484a36e394ba&quot;,&quot;parentUUID&quot;:&quot;0166b9ed-f8d7-464a-8326-c780f10da142&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: description (instanceName)&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: description (instanceName)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:104,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;instanceName&#x27;, &#x27;contains&#x27;, sampleTask.instanceName);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;821604d7-bfdb-44cc-a462-ff420181ca2c&quot;,&quot;parentUUID&quot;:&quot;0166b9ed-f8d7-464a-8326-c780f10da142&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: requestId (instanceId)&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: requestId (instanceId)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:113,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;instanceId&#x27;, &#x27;contains&#x27;, sampleTask.instanceId);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;80946e34-c0d5-458d-999b-08cb157b1a93&quot;,&quot;parentUUID&quot;:&quot;0166b9ed-f8d7-464a-8326-c780f10da142&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. filters: requester&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. filters: requester&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:109,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nconst options = generateOptions(&#x27;requester&#x27;, &#x27;contains&#x27;, &#x27;system system&#x27;);\nconst result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b512495d-1689-4b2c-a6fa-280559031f40&quot;,&quot;parentUUID&quot;:&quot;0166b9ed-f8d7-464a-8326-c780f10da142&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my task by searching&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my task by searching&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:426,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {search: sampleTask.taskName};\nlet result = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);\noptions = {search: sampleTask.taskTypeName};\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);\noptions = {search: sampleTask.instanceName};\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);\noptions = {search: sampleTask.instanceId};\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].itaskRecipientGuid).to.equal(sampleTask.itaskRecipientGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c0f225c2-e5ae-4461-aa6e-fc07c030ffd6&quot;,&quot;parentUUID&quot;:&quot;0166b9ed-f8d7-464a-8326-c780f10da142&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. params - start&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. params - start&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:224,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {\n  start: 0,\n  count: 2,\n  sort: &#x27;itaskRecipientId&#x27;,\n  dir: &#x27;asc&#x27;\n};\nlet result = await taskController.getMyTasks(options);\nconst startZeroId = result.results[0].itaskRecipientId;\noptions.start = 1;\nresult = await taskController.getMyTasks(options);\nconst startOneId = result.results[0].itaskRecipientId;\nexpect(startZeroId).to.be.lt(startOneId);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;301844c9-30f1-45f6-983e-84eb13a43ea1&quot;,&quot;parentUUID&quot;:&quot;0166b9ed-f8d7-464a-8326-c780f10da142&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. params - sort, dir&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. params - sort, dir&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:223,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {count: 2, dir: &#x27;asc&#x27;};\nlet result = await taskController.getMyTasks(options);\nexpect(result.results[0].createdDate).to.be.lt(result.results[1].createdDate);\noptions.dir = &#x27;desc&#x27;;\nresult = await taskController.getMyTasks(options);\nexpect(result.results[0].createdDate).to.be.gt(result.results[1].createdDate);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f85c7673-b542-47bd-b9a3-07fa96355b05&quot;,&quot;parentUUID&quot;:&quot;0166b9ed-f8d7-464a-8326-c780f10da142&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get my tasks. params - count&quot;,&quot;fullTitle&quot;:&quot;Task API Controller Tests list tests should get my tasks. params - count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:103,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskController = new TaskController(session);\nlet options = {count: 2};\nlet result = await taskController.getMyTasks(options);\nexpect(result.results).to.exist;\nexpect(result.results.length).to.eq(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75e05516-db30-47fd-bab9-253f50aee7ba&quot;,&quot;parentUUID&quot;:&quot;0166b9ed-f8d7-464a-8326-c780f10da142&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;34f583c3-317e-4003-aac6-8702a65c346d&quot;,&quot;c5eb876f-cce4-4734-ae36-94b444065a73&quot;,&quot;36baa81a-db7f-4caa-8251-4ce9e63bd319&quot;,&quot;74957e76-2da5-44cd-b9d9-1f41ff63296a&quot;,&quot;5fec049a-aace-45e8-953d-58ed441690c7&quot;,&quot;696927fb-9686-4200-ad8e-484a36e394ba&quot;,&quot;821604d7-bfdb-44cc-a462-ff420181ca2c&quot;,&quot;80946e34-c0d5-458d-999b-08cb157b1a93&quot;,&quot;b512495d-1689-4b2c-a6fa-280559031f40&quot;,&quot;c0f225c2-e5ae-4461-aa6e-fc07c030ffd6&quot;,&quot;301844c9-30f1-45f6-983e-84eb13a43ea1&quot;,&quot;f85c7673-b542-47bd-b9a3-07fa96355b05&quot;,&quot;75e05516-db30-47fd-bab9-253f50aee7ba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1993,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;dba1044d-2979-4309-b0c3-f1cfa0aec033&quot;,&quot;title&quot;:&quot;My Task API Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/myTaskModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/myTaskModel.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2cf7d39a-70a4-4918-8124-fba958440479&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/db/myTaskModel.test.js&quot;,&quot;file&quot;:&quot;/test/db/myTaskModel.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;My Task API Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7e92ebb1-50f8-4c22-aa46-4a52c49b06ca&quot;,&quot;parentUUID&quot;:&quot;2cf7d39a-70a4-4918-8124-fba958440479&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;My Task API Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskModel = await sqldb.models.bindModel(config.tenantOne.tenantId, taskModels.InstanceRecipientTask);\nconst results = await taskModel.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;670c6bda-e4c7-42c8-ab1d-a558d6ab71f4&quot;,&quot;parentUUID&quot;:&quot;2cf7d39a-70a4-4918-8124-fba958440479&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a hash of bound models&quot;,&quot;fullTitle&quot;:&quot;My Task API Model Tests tests should return a hash of bound models&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const taskModel = (await models.getModels(config.tenantOne.tenantId)).InstanceRecipientTask;\nconst results = await taskModel.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;52bd5a29-c271-42ed-9a10-38b7814135a7&quot;,&quot;parentUUID&quot;:&quot;2cf7d39a-70a4-4918-8124-fba958440479&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should bound models cached in memory&quot;,&quot;fullTitle&quot;:&quot;My Task API Model Tests tests should bound models cached in memory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(models._tenantModels[config.tenantOne.tenantId]).to.exist;\nconst results = await models._tenantModels[config.tenantOne.tenantId].InstanceRecipientTask.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7700117a-8c84-4347-a3fa-5da6818bdcc5&quot;,&quot;parentUUID&quot;:&quot;2cf7d39a-70a4-4918-8124-fba958440479&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;670c6bda-e4c7-42c8-ab1d-a558d6ab71f4&quot;,&quot;52bd5a29-c271-42ed-9a10-38b7814135a7&quot;,&quot;7700117a-8c84-4347-a3fa-5da6818bdcc5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;80722beb-ad66-46d2-84c2-22ee708e99dd&quot;,&quot;title&quot;:&quot;Instance API Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/integration/instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/instance.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\njwt = await testLib.getAuthToken()\nthis.timeout(105000); \nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()} //system level&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d2eeff29-ef2b-4995-96f0-6a2768cadbea&quot;,&quot;parentUUID&quot;:&quot;80722beb-ad66-46d2-84c2-22ee708e99dd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d6d758bc-33e6-4396-9fff-1915550f71f7&quot;,&quot;title&quot;:&quot;getInstancesByPermission&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/integration/instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/instance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of instances for a user with monitor permissions&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a list of instances for a user with monitor permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;monitor\&quot;;\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();\n            sampleInstance = result.results[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;790ecfd6-ab32-4064-9776-49183b33e38e&quot;,&quot;parentUUID&quot;:&quot;d6d758bc-33e6-4396-9fff-1915550f71f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a list of instances for a user with manage permissions&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a list of instances for a user with manage permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;monitor\&quot;;\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();\n            sampleInstance = result.results[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d687cdb9-bb04-4e61-9ec5-1d94440e49b9&quot;,&quot;parentUUID&quot;:&quot;d6d758bc-33e6-4396-9fff-1915550f71f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a list of instances started by the user calling the endpoint&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a list of instances started by the user calling the endpoint&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;mine\&quot;;\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();\n            sampleInstance = result.results[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fb1cfd5-1c1b-4904-9983-dceee25f6604&quot;,&quot;parentUUID&quot;:&quot;d6d758bc-33e6-4396-9fff-1915550f71f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a \&quot;monitor\&quot; list of instances filtered&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a \&quot;monitor\&quot; list of instances filtered&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:98,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;monitor\&quot;;\n            req.query.filters = [\n                \n                {\&quot;field\&quot;:\&quot;instanceName\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.instanceName}},\n                {\&quot;field\&quot;:\&quot;instanceId\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;gteq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:1}},\n                {\&quot;field\&quot;:\&quot;instanceId\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;lteq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:1000000}},\n                {\&quot;field\&quot;:\&quot;processName\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.processName}},\n                {\&quot;field\&quot;:\&quot;instanceState\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.instanceState}},\n                {\&quot;field\&quot;:\&quot;lastMilestone\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.lastMilestone}},\n                {\&quot;field\&quot;:\&quot;requesterGuid\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.requesterGuid}},\n                {\&quot;field\&quot;:\&quot;requester\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.requester}},\n                {\&quot;field\&quot;:\&quot;startDate\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;gteq\&quot;,\&quot;type\&quot;:\&quot;date\&quot;,\&quot;value\&quot;:&#x27;2010-01-01&#x27;}},\n                {\&quot;field\&quot;:\&quot;startDate\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;lteq\&quot;,\&quot;type\&quot;:\&quot;date\&quot;,\&quot;value\&quot;:&#x27;2030-01-01&#x27;}}\n            ]\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f02c439-ce0c-4aba-ba85-529d3b497d00&quot;,&quot;parentUUID&quot;:&quot;d6d758bc-33e6-4396-9fff-1915550f71f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a \&quot;mine\&quot; list of instances filtered&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests getInstancesByPermission should return a \&quot;mine\&quot; list of instances filtered&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:96,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.params.permissionType = \&quot;mine\&quot;;\n            req.query.filters = [\n                \n                {\&quot;field\&quot;:\&quot;instanceName\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.instanceName}},\n                {\&quot;field\&quot;:\&quot;instanceId\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;gteq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:1}},\n                {\&quot;field\&quot;:\&quot;instanceId\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;lteq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:1000000}},\n                {\&quot;field\&quot;:\&quot;processName\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.processName}},\n                {\&quot;field\&quot;:\&quot;instanceState\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.instanceState}},\n                {\&quot;field\&quot;:\&quot;lastMilestone\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.lastMilestone}},\n                {\&quot;field\&quot;:\&quot;requesterGuid\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;eq\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.requesterGuid}},\n                {\&quot;field\&quot;:\&quot;requester\&quot;,\&quot;data\&quot;:{\&quot;comparison\&quot;:\&quot;contains\&quot;,\&quot;type\&quot;:\&quot;string\&quot;,\&quot;value\&quot;:sampleInstance.requester}}\n            ]\n\t\t\tawait handlers.getInstancesByPermission(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst result = mockRes.body;\n            expect(result.total).to.exist;\n            expect(result.total).to.be.gt(0);\n            expect(result.results).to.be.array();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d3d96d2b-e1b5-4759-8b55-19d9a92c8e12&quot;,&quot;parentUUID&quot;:&quot;d6d758bc-33e6-4396-9fff-1915550f71f7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;790ecfd6-ab32-4064-9776-49183b33e38e&quot;,&quot;d687cdb9-bb04-4e61-9ec5-1d94440e49b9&quot;,&quot;8fb1cfd5-1c1b-4904-9983-dceee25f6604&quot;,&quot;6f02c439-ce0c-4aba-ba85-529d3b497d00&quot;,&quot;d3d96d2b-e1b5-4759-8b55-19d9a92c8e12&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:219,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;22058eca-d1c7-41b7-abd4-5c7363cc6792&quot;,&quot;title&quot;:&quot;deleteInstances&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/integration/instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/instance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a batch of instances&quot;,&quot;fullTitle&quot;:&quot;Instance API Tests deleteInstances should delete a batch of instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:183,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const instanceController = new InstanceController(session);\n            let result = await instanceController.getMyRequests()\n            let instanceGuids= result.results.map((i) =&gt; {\n                return i.instanceGuid;\n            })\n\t\t\tconst mockRes = await mocks.mockResponse();\n            let req = await mocks.req(jwt)\n            req.body = JSON.stringify(instanceGuids);\n           \n\t\t\tawait handlers.deleteInstances(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n            expect(mockRes.body).to.exist;\n\t\t\tlet deleted = mockRes.body;\n            expect(deleted.instancesDeleted).to.exist;\n            expect(deleted.instancesDeleted).to.equal(instanceGuids.length);\n            \n            //retore them\n            \n            let restored = await instanceController.restoreInstances(instanceGuids);\n            //expect(firstInstance.instanceGuid).to.equal(deleted.instanceGuid)\n            expect(restored.length).to.equal(instanceGuids.length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;917b3f08-77df-48f5-bb5d-f2ff1750c678&quot;,&quot;parentUUID&quot;:&quot;22058eca-d1c7-41b7-abd4-5c7363cc6792&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;917b3f08-77df-48f5-bb5d-f2ff1750c678&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:183,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;b06b00f9-7f4a-4a60-b6e7-5da9c7d3c823&quot;,&quot;title&quot;:&quot;MyTask API Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-instance/test/integration/myTask.test.js&quot;,&quot;file&quot;:&quot;/test/integration/myTask.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;MyTask API Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\njwt = await testLib.getAuthToken();\nthis.timeout(10500);\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86a4091e-7d7a-4339-8c81-39856379568f&quot;,&quot;parentUUID&quot;:&quot;b06b00f9-7f4a-4a60-b6e7-5da9c7d3c823&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of my tasks&quot;,&quot;fullTitle&quot;:&quot;MyTask API Tests should return a list of my tasks&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:105,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req(jwt);\nawait handlers.getMyTasks(req, mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;\nconst result = mockRes.body;\nexpect(result.total).to.exist;\nexpect(result.total).to.be.gt(0);\nexpect(result.results).to.be.array();\nexpect(result.results.length).to.be.gt(0);\nsampleTask = result.results[0];&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86a16763-6d85-4bbb-8e5d-3e6d765d6b93&quot;,&quot;parentUUID&quot;:&quot;b06b00f9-7f4a-4a60-b6e7-5da9c7d3c823&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;86a16763-6d85-4bbb-8e5d-3e6d765d6b93&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:105,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;d5de5375-2330-498e-b102-36a4c5a22423&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d13e18e9-c728-4d36-91f2-ed8b579963c0&quot;,&quot;title&quot;:&quot;Process controller tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-processes/test/controller.test.js&quot;,&quot;file&quot;:&quot;/test/controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Process controller tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Process controller tests \&quot;before all\&quot; hook in \&quot;Process controller tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\nconfig = await mocks.getTestConfig();\ntenant = config.tenantOne.tenantId;\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()} //system level&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;885a7d47-8263-44b2-93d5-b0cd0239a991&quot;,&quot;parentUUID&quot;:&quot;d13e18e9-c728-4d36-91f2-ed8b579963c0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;85906b6e-5066-43b8-ad8d-72a992d8f7b5&quot;,&quot;title&quot;:&quot;process crud &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-processes/test/controller.test.js&quot;,&quot;file&quot;:&quot;/test/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;searches for a process with run permissions&quot;,&quot;fullTitle&quot;:&quot;Process controller tests process crud  searches for a process with run permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:155,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processConstroller = new ProcessController(session);\n//const  processes = await processConstroller.searchProcesses(&#x27;Update my profile&#x27;, &#x27;run&#x27;, {});\nconst  processes = await processConstroller.searchProcesses({permissionType: &#x27;run&#x27;, search:&#x27;Update my profile&#x27;});\n\nexpect(processes.length).to.be.gt(0);\nconst process = processes[0];\nexpect(process.categoryName).to.exist;\nexpect(process.processGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b6b83a5-9039-4a44-987b-409218cdd9e9&quot;,&quot;parentUUID&quot;:&quot;85906b6e-5066-43b8-ad8d-72a992d8f7b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;searches for a process with viewConfig permissions&quot;,&quot;fullTitle&quot;:&quot;Process controller tests process crud  searches for a process with viewConfig permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processConstroller = new ProcessController(session);\n//const  processes = await processConstroller.searchProcesses(&#x27;Update my profile&#x27;, &#x27;run&#x27;, {});\nconst  processes = await processConstroller.searchProcesses({permissionType: &#x27;viewconfig&#x27;, search:&#x27;Update my profile&#x27;});\n\nexpect(processes.length).to.be.gt(0);\nconst process = processes[0];\nexpect(process.categoryName).to.exist;\nexpect(process.processGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f60e06ab-35e7-4997-b7e1-8b83b433c4cd&quot;,&quot;parentUUID&quot;:&quot;85906b6e-5066-43b8-ad8d-72a992d8f7b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;searches for a process with edit permissions&quot;,&quot;fullTitle&quot;:&quot;Process controller tests process crud  searches for a process with edit permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processConstroller = new ProcessController(session);\n//const  processes = await processConstroller.searchProcesses(&#x27;Update my profile&#x27;, &#x27;run&#x27;, {});\nconst  processes = await processConstroller.searchProcesses({permissionType: &#x27;edit&#x27;, search:&#x27;Update my profile&#x27;});\n\nexpect(processes.length).to.be.gt(0);\nconst process = processes[0];\nexpect(process.categoryName).to.exist;\nexpect(process.processGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fc777dc-420f-45f8-86ea-6f7b73333a28&quot;,&quot;parentUUID&quot;:&quot;85906b6e-5066-43b8-ad8d-72a992d8f7b5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5b6b83a5-9039-4a44-987b-409218cdd9e9&quot;,&quot;f60e06ab-35e7-4997-b7e1-8b83b433c4cd&quot;,&quot;8fc777dc-420f-45f8-86ea-6f7b73333a28&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:166,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bd1e34b7-c710-4fc1-9e30-724431ae37d3&quot;,&quot;title&quot;:&quot;Process route handler tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-processes/test/handlers.test.js&quot;,&quot;file&quot;:&quot;/test/handlers.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Process route handler tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Process route handler tests \&quot;before all\&quot; hook in \&quot;Process route handler tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e03b76d-11ba-491a-bd59-0e031c5d571a&quot;,&quot;parentUUID&quot;:&quot;bd1e34b7-c710-4fc1-9e30-724431ae37d3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;bb78a106-b219-407a-9aa6-39b9e851e70b&quot;,&quot;title&quot;:&quot;process crud &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-processes/test/handlers.test.js&quot;,&quot;file&quot;:&quot;/test/handlers.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should search processes with run perms&quot;,&quot;fullTitle&quot;:&quot;Process route handler tests process crud  should search processes with run perms&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.query = {permissionType: &#x27;run&#x27;, search:&#x27;Update my profile&#x27;}\nawait handlers.searchProcesses(req,mockRes);\nconst processes = mockRes.body;\nconst process= processes[0];\nexpect(process).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6ff59b36-a032-4604-83bc-5d766c26a0a8&quot;,&quot;parentUUID&quot;:&quot;bb78a106-b219-407a-9aa6-39b9e851e70b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should search processes with view config perms&quot;,&quot;fullTitle&quot;:&quot;Process route handler tests process crud  should search processes with view config perms&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.query = {permissionType: &#x27;viewconfig&#x27;, search:&#x27;Update my profile&#x27;}\nawait handlers.searchProcesses(req,mockRes);\nconst processes = mockRes.body;\nconst process= processes[0];\nexpect(process).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01221f6b-9251-43f0-be47-4a7a2086572b&quot;,&quot;parentUUID&quot;:&quot;bb78a106-b219-407a-9aa6-39b9e851e70b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6ff59b36-a032-4604-83bc-5d766c26a0a8&quot;,&quot;01221f6b-9251-43f0-be47-4a7a2086572b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;eca326cb-9667-4208-bc66-c379acbd029f&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;8e7664c6-df41-41bb-93ca-c1aa1774b82a&quot;,&quot;title&quot;:&quot;Report controller tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-reports/test/controller.test.js&quot;,&quot;file&quot;:&quot;/test/controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Report controller tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f69b5e7-ac58-459f-8330-01557c98ea2f&quot;,&quot;parentUUID&quot;:&quot;8e7664c6-df41-41bb-93ca-c1aa1774b82a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f1a456cc-d9ff-4e00-a799-57f3188ddacc&quot;,&quot;title&quot;:&quot;process crud &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-reports/test/controller.test.js&quot;,&quot;file&quot;:&quot;/test/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a report&quot;,&quot;fullTitle&quot;:&quot;Report controller tests process crud  should create a report&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:48,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const reportJson = { name: \&quot;test report\&quot;,\n                     categorySid: &#x27;test-category-sid&#x27; };\nconst report = await reportController.createReport(tenant, reportJson);\nexpect(report.sid).to.exist\nreportSid = report.sid&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9c446af9-5d8e-4030-a3ae-164e7586ef73&quot;,&quot;parentUUID&quot;:&quot;f1a456cc-d9ff-4e00-a799-57f3188ddacc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should retrieve a report&quot;,&quot;fullTitle&quot;:&quot;Report controller tests process crud  should retrieve a report&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const report = await reportController.getReport(tenant,reportSid);\nexpect(report.sid).to.equal(reportSid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58d87d5c-0c21-461a-b3f8-4037fb2e113c&quot;,&quot;parentUUID&quot;:&quot;f1a456cc-d9ff-4e00-a799-57f3188ddacc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should populate core-service expected default values&quot;,&quot;fullTitle&quot;:&quot;Report controller tests process crud  should populate core-service expected default values&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const report = await reportController.getReport(tenant,reportSid);\nexpect(report.limits.get(&#x27;DateRange&#x27;)).to.equal(30);\nexpect(report.limits.get(&#x27;UserFilter&#x27;)).to.equal(&#x27;No&#x27;);\nexpect(report.limits.get(&#x27;PageSize&#x27;)).to.equal(10);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ee5c7062-ed9b-4104-93d9-c5b6b7c30161&quot;,&quot;parentUUID&quot;:&quot;f1a456cc-d9ff-4e00-a799-57f3188ddacc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a report&quot;,&quot;fullTitle&quot;:&quot;Report controller tests process crud  should update a report&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const columnMap = { \&quot;column\&quot; : {\n  \&quot;@alias\&quot; : \&quot;Address Line 1\&quot;,\n  \&quot;@sortable\&quot; : \&quot;No\&quot;,\n  \&quot;mapping_val\&quot; : \&quot;Client|AddressLine1\&quot;,\n  \&quot;mapping_text\&quot; : \&quot;Client - Address Line 1\&quot;\n}}\nconst newFields = { \&quot;columns\&quot; : [ columnMap ]}\nconst updatedReport = await reportController.updateReport(tenant,reportSid,newFields)\nexpect(updatedReport).to.exist\nexpect(updatedReport.sid).to.equal(reportSid)\nexpect(updatedReport.modifiedDate).to.be.above(updatedReport.createdDate);\nexpect(updatedReport.columns.length).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b48cb9e2-b4fb-4ff9-bf74-8bcb9cdadb97&quot;,&quot;parentUUID&quot;:&quot;f1a456cc-d9ff-4e00-a799-57f3188ddacc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;soft deletes a report&quot;,&quot;fullTitle&quot;:&quot;Report controller tests process crud  soft deletes a report&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const report = await reportController.getReport(tenant,reportSid);\nexpect(report.deletedDate).to.not.exist\nconst deleted = await reportController.deleteReport(tenant,reportSid);\nexpect(deleted).to.exist\nexpect(deleted.deletedDate).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;65dbcfb5-b339-4ce0-b5de-14de5d520056&quot;,&quot;parentUUID&quot;:&quot;f1a456cc-d9ff-4e00-a799-57f3188ddacc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9c446af9-5d8e-4030-a3ae-164e7586ef73&quot;,&quot;58d87d5c-0c21-461a-b3f8-4037fb2e113c&quot;,&quot;ee5c7062-ed9b-4104-93d9-c5b6b7c30161&quot;,&quot;b48cb9e2-b4fb-4ff9-bf74-8bcb9cdadb97&quot;,&quot;65dbcfb5-b339-4ce0-b5de-14de5d520056&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:79,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;40aea769-c96f-4dc9-9c92-47eddfa2b827&quot;,&quot;title&quot;:&quot;Report route handler tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-reports/test/handlers.test.js&quot;,&quot;file&quot;:&quot;/test/handlers.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Report route handler tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;testConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;17a3e2aa-7523-4125-a036-b417d6fd2d04&quot;,&quot;parentUUID&quot;:&quot;40aea769-c96f-4dc9-9c92-47eddfa2b827&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c90f2a4d-3143-41f0-94b8-730fb3dc5df5&quot;,&quot;title&quot;:&quot;handler report crud &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-reports/test/handlers.test.js&quot;,&quot;file&quot;:&quot;/test/handlers.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a report&quot;,&quot;fullTitle&quot;:&quot;Report route handler tests handler report crud  should create a report&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = { name: \&quot;handler test report\&quot;,\n             categorySid: &#x27;test-category-sid&#x27; }\nconst response = await handlers.createReport(req,mockRes);\nconst report = response.body;\nexpect(report.sid).to.exist;\nreportSid = report.sid;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c14cc19-4431-4211-a700-b29af33f9916&quot;,&quot;parentUUID&quot;:&quot;c90f2a4d-3143-41f0-94b8-730fb3dc5df5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a report&quot;,&quot;fullTitle&quot;:&quot;Report route handler tests handler report crud  should get a report&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.reportSid = reportSid;\nconst response = await handlers.getReport(req,mockRes);\nconst report = response.body;\nexpect(report).to.exist\nexpect(report.sid).to.equal(reportSid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22036796-ce8f-40c7-8ba9-11dfda0bf9e6&quot;,&quot;parentUUID&quot;:&quot;c90f2a4d-3143-41f0-94b8-730fb3dc5df5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a report&quot;,&quot;fullTitle&quot;:&quot;Report route handler tests handler report crud  should update a report&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.reportSid = reportSid;\nreq.body = { Description: &#x27;handler test description&#x27; }\nconst response = await handlers.updateReport(req,mockRes);\nconst updatedReport = response.body;\nexpect(updatedReport).to.exist\nexpect(updatedReport.sid).to.equal(reportSid)\nexpect(updatedReport.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bdc57ef0-17ea-4d2a-b2fc-50cbb4bf6148&quot;,&quot;parentUUID&quot;:&quot;c90f2a4d-3143-41f0-94b8-730fb3dc5df5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should delete a report&quot;,&quot;fullTitle&quot;:&quot;Report route handler tests handler report crud  should delete a report&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.reportSid = reportSid;\nconst response = await handlers.deleteReport(req,mockRes);\nlet deletedReport = response.body;\nexpect(deletedReport).to.exist;\nexpect(deletedReport.deletedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;853768ed-a72f-48ee-9f1c-aabe2f71dc03&quot;,&quot;parentUUID&quot;:&quot;c90f2a4d-3143-41f0-94b8-730fb3dc5df5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3c14cc19-4431-4211-a700-b29af33f9916&quot;,&quot;22036796-ce8f-40c7-8ba9-11dfda0bf9e6&quot;,&quot;bdc57ef0-17ea-4d2a-b2fc-50cbb4bf6148&quot;,&quot;853768ed-a72f-48ee-9f1c-aabe2f71dc03&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;940952db-aa46-4e30-b5a5-4e39fec60a0e&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2d14bf96-7e92-4391-a5e0-9063d7231bb2&quot;,&quot;title&quot;:&quot;Settings API Holiday Controller tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/db/holidays.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/holidays.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Settings API Holiday Controller tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nsession = {tenantId: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()}\ntenantId = config.tenantOne.tenantId;\noauth = {\n  instance_name: config.tenantOne.tenantId,\n  user_sid: config.tenantOne.adminUser.sid\n}\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;15ea8c98-4822-4376-8d93-acb3fa93d300&quot;,&quot;parentUUID&quot;:&quot;2d14bf96-7e92-4391-a5e0-9063d7231bb2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should insert, select, delete and list holidays&quot;,&quot;fullTitle&quot;:&quot;Settings API Holiday Controller tests should insert, select, delete and list holidays&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:203,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let holiday = {\n  holidayName: \&quot;O Day\&quot;,\n  startDate: \&quot;2019-10-10T00:00:00.000Z\&quot;,\n  endDate: \&quot;2019-10-11T00:00:00.000Z\&quot;,\n  country: \&quot;USA\&quot;\n};\nlet holidayController = new HolidayController(oauth);\n// insert\nconst inserted = await holidayController.insertHoliday(holiday);\nvalidateHoliday(holiday, inserted);\n// select\nlet gotOne = await holidayController.getHoliday(inserted.holidayGuid);\nvalidateHoliday(holiday, gotOne);\n// update\nholiday.holidayGuid = inserted.holidayGuid;\nholiday.holidayName = \&quot;Easter Monday\&quot;;\nholiday.country = \&quot;Papa New Guinea\&quot;;\nawait holidayController.updateHoliday(holiday);\ngotOne = await holidayController.getHoliday(inserted.holidayGuid);\nvalidateHoliday(holiday, gotOne);\n//list\nconst holidays = await holidayController.listHolidays();\nexpect(holidays.length).to.be.gt(0);\nholiday = holidays[0];\nexpect(holiday.holidayGuid).to.exist;\nexpect(holiday.holidayName).to.exist;\nexpect(holiday.startDate).to.exist;\nexpect(holiday.endDate).to.exist;\nexpect(holiday.country).to.exist;\n// delete\nconst holidayGuids = [inserted.holidayGuid];\nawait holidayController.deleteHolidays(holidayGuids);\ngotOne = await holidayController.getHoliday(inserted.holidayGuid);\nexpect(gotOne).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ce2dd7e-8e27-43e3-a232-cedc7f1b7a7b&quot;,&quot;parentUUID&quot;:&quot;2d14bf96-7e92-4391-a5e0-9063d7231bb2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3ce2dd7e-8e27-43e3-a232-cedc7f1b7a7b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:203,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;985a6a75-3096-4e3f-b6a3-311a173950bd&quot;,&quot;title&quot;:&quot;Settings API Language Controller test&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/db/languages.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/languages.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Settings API Language Controller test \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\noauth = {\n  instance_name: config.tenantOne.tenantId,\n  user_sid: config.tenantOne.adminUser.sid\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dab0a111-28a2-4e26-bc83-2dc0d65677bc&quot;,&quot;parentUUID&quot;:&quot;985a6a75-3096-4e3f-b6a3-311a173950bd&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a list of languages&quot;,&quot;fullTitle&quot;:&quot;Settings API Language Controller test should get a list of languages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const languageCtrl = new LanguageController(oauth);\nconst languages = await languageCtrl.listLanguages();\nexpect(languages.length).to.be.gt(0);\nconst language = languages[0];\nexpect(language.languageGuid).to.exist;\nexpect(language.languageName).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b4053226-b930-43ce-b44f-44b0cce37cf9&quot;,&quot;parentUUID&quot;:&quot;985a6a75-3096-4e3f-b6a3-311a173950bd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b4053226-b930-43ce-b44f-44b0cce37cf9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5700e15f-4419-4277-b605-a6ba9ed04188&quot;,&quot;title&quot;:&quot;Settings API System Setting Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/db/systemsetting.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/systemsetting.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()} \nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f5e9c83-fcb0-4149-9a24-72fa73262c7a&quot;,&quot;parentUUID&quot;:&quot;5700e15f-4419-4277-b605-a6ba9ed04188&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4fa7ed7d-96c0-4091-ad1a-a494f3508ab9&quot;,&quot;title&quot;:&quot;Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/db/systemsetting.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/systemsetting.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a system setting model&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Model Tests should get a system setting model&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const SystemSettingsModel = await model.getConsumerModel(\n  config.ConsumersConn1,\n  \&quot;SystemSettings\&quot;\n);\nexpect(SystemSettingsModel).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4f2c77c5-d363-48c1-b1b5-831c37239577&quot;,&quot;parentUUID&quot;:&quot;4fa7ed7d-96c0-4091-ad1a-a494f3508ab9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return system settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Model Tests should return system settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:18,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const SystemSettingsModel = await model.getConsumerModel(\n  config.ConsumersConn1,\n  \&quot;SystemSettings\&quot;\n);\nlet results = await SystemSettingsModel.query();\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2676e00d-337c-4c16-b9b6-a0613a842eb1&quot;,&quot;parentUUID&quot;:&quot;4fa7ed7d-96c0-4091-ad1a-a494f3508ab9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4f2c77c5-d363-48c1-b1b5-831c37239577&quot;,&quot;2676e00d-337c-4c16-b9b6-a0613a842eb1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;75bd1549-395d-4056-87e4-10d895e8676e&quot;,&quot;title&quot;:&quot;Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/db/systemsetting.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/systemsetting.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list system settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Controller Tests should list system settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:36,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let systemSettingController = new SystemSettingController(session);\nlet systemSettings = await systemSettingController.listSystemSettings();\nexpect(systemSettings).to.exist;\nexpect(systemSettings.length).to.be.gt(0);\nexpect(systemSettings[0].masterSettings.settingsGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e13cb459-5dd9-42c3-af0b-1193abdda0f1&quot;,&quot;parentUUID&quot;:&quot;75bd1549-395d-4056-87e4-10d895e8676e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list password settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Controller Tests should list password settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let systemSettingController = new SystemSettingController(session);\nlet systemSettings = await systemSettingController.listPasswordSettings();\nexpect(systemSettings).to.exist;\nexpect(systemSettings.length).to.be.gt(0);\n// only system settings listed should be the ones related to passwords   \nexpect(systemSettings.filter(x =&gt; x.settingsKey.startsWith(&#x27;PWD&#x27;)).length).to.equal(systemSettings.length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;98914e5a-7d0a-4fcd-9454-60ed61494439&quot;,&quot;parentUUID&quot;:&quot;75bd1549-395d-4056-87e4-10d895e8676e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update system settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Setting Controller Tests Controller Tests should update system settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:146,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let pwdSettings = [{\n  \&quot;settingsGuid\&quot;:\&quot;6F170960-C5BC-4A12-B170-1CCEDCAC3DF2\&quot;,\n  \&quot;dataInstanceGuid\&quot;:\&quot;2CA0CE58-B55B-4DA7-ACE1-5FC37E3D32D5\&quot;,\n  \&quot;settingsKey\&quot;:\&quot;PWD_EXPIRATION\&quot;,\n  \&quot;settingsValue\&quot;:\&quot;14\&quot;, // changed\n  \&quot;createdBy\&quot;:\&quot;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF\&quot;,\n  \&quot;createdDate\&quot;:\&quot;2020-01-28T03:38:03.200Z\&quot;,\n  \&quot;modifiedBy\&quot;:null,\n  \&quot;modifiedDate\&quot;:null,\n  \&quot;masterSettings\&quot;:{\n    \&quot;settingsGuid\&quot;:\&quot;6F170960-C5BC-4A12-B170-1CCEDCAC3DF2\&quot;,\n    \&quot;settingsKey\&quot;:\&quot;PWD_EXPIRATION\&quot;,\n    \&quot;keyDefault\&quot;:\&quot;7\&quot;,\n    \&quot;keyOptions\&quot;:null,\n    \&quot;description\&quot;:\&quot;Length in days before a user is prompted to change his or her password.\&quot;\n  }\n}, {\n  \&quot;settingsGuid\&quot;:\&quot;B2476A3D-095F-424A-9C29-4AA95E93A09E\&quot;,\n  \&quot;dataInstanceGuid\&quot;:\&quot;2CA0CE58-B55B-4DA7-ACE1-5FC37E3D32D5\&quot;,\n  \&quot;settingsKey\&quot;:\&quot;PWD_EXPIRATION_ACTIVE\&quot;,\n  \&quot;settingsValue\&quot;:\&quot;1\&quot;, // changed\n  \&quot;createdBy\&quot;:\&quot;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF\&quot;,\n  \&quot;createdDate\&quot;:\&quot;2020-01-28T03:38:03.200Z\&quot;,\n  \&quot;modifiedBy\&quot;:null,\n  \&quot;modifiedDate\&quot;:null,\n  \&quot;masterSettings\&quot;:{\n    \&quot;settingsGuid\&quot;:\&quot;B2476A3D-095F-424A-9C29-4AA95E93A09E\&quot;,\n    \&quot;settingsKey\&quot;:\&quot;PWD_EXPIRATION_ACTIVE\&quot;,\n    \&quot;keyDefault\&quot;:\&quot;0\&quot;,\n    \&quot;keyOptions\&quot;:\&quot;1|0\&quot;,\n    \&quot;description\&quot;:\&quot;Flag to turn enforcement of password expiration.  1 = On, 0 = Off\&quot;\n  }\n}]\n// save the changes above, query to verify changes, set them back to the defaults\nlet systemSettingController = new SystemSettingController(session)\nawait systemSettingController.updateSystemSettings(pwdSettings)\nlet systemSettings = await systemSettingController.listPasswordSettings();\nexpect(systemSettings.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION&#x27;).settingsValue).to.equal(&#x27;14&#x27;)\nexpect(systemSettings.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION_ACTIVE&#x27;).settingsValue).to.equal(&#x27;1&#x27;)\npwdSettings.forEach(setting =&gt; {\n  setting.settingsValue = setting.masterSettings.keyDefault\n})\nawait systemSettingController.updateSystemSettings(pwdSettings)\nsystemSettings = await systemSettingController.listPasswordSettings();\nlet pwdExpiration = systemSettings.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION&#x27;)\nlet pwdExpirationActive = systemSettings.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION_ACTIVE&#x27;)\nexpect(pwdExpiration.settingsValue).to.equal(pwdExpiration.masterSettings.keyDefault)\nexpect(pwdExpirationActive.settingsValue).to.equal(pwdExpirationActive.masterSettings.keyDefault)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4ad0a7b1-48a9-4f20-8b17-72559c8a9a0e&quot;,&quot;parentUUID&quot;:&quot;75bd1549-395d-4056-87e4-10d895e8676e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e13cb459-5dd9-42c3-af0b-1193abdda0f1&quot;,&quot;98914e5a-7d0a-4fcd-9454-60ed61494439&quot;,&quot;4ad0a7b1-48a9-4f20-8b17-72559c8a9a0e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:199,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8d682949-8b54-4901-b4f7-49b60fd33285&quot;,&quot;title&quot;:&quot;Biztime API Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/functions/biztimes.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/biztimes.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Biztime API Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\njwt = await testLib.getAuthToken();\nthis.timeout(10500);\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()};\nmockRes = await mocks.mockResponse();\nreq = await mocks.req(jwt);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;411d00dd-a972-4db1-8876-1929afcb56a2&quot;,&quot;parentUUID&quot;:&quot;8d682949-8b54-4901-b4f7-49b60fd33285&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of biztimes&quot;,&quot;fullTitle&quot;:&quot;Biztime API Tests should return a list of biztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await handlers.listBiztimes(req, mockRes);\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;\nexpect(mockRes.body.length).to.be.gt(0);\nvalidateBiztime(mockRes.body[0]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c3abcf2f-c185-4cb3-8671-fbc0fc07c3b8&quot;,&quot;parentUUID&quot;:&quot;8d682949-8b54-4901-b4f7-49b60fd33285&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert a biztime&quot;,&quot;fullTitle&quot;:&quot;Biztime API Tests should insert a biztime&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await handlers.insertBiztime(\n  {...req, body: {...biztimeToInsert}},\n  mockRes);\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;\ninsertedBiztime = mockRes.body;\nvalidateBiztime(biztimeToInsert, insertedBiztime);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4633c224-873e-4e1f-8715-b8602d5e6544&quot;,&quot;parentUUID&quot;:&quot;8d682949-8b54-4901-b4f7-49b60fd33285&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a biztime&quot;,&quot;fullTitle&quot;:&quot;Biztime API Tests should update a biztime&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await handlers.updateBiztime(\n  {\n    ...req,\n    params: {bizTimeGuid: insertedBiztime.bizTimeGuid},\n    body: {...biztimeToUpdate}},\n  mockRes\n  );\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;\nvalidateBiztime(biztimeToUpdate, mockRes.body);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e254b050-4f17-4f36-af43-bac61c4a2ffe&quot;,&quot;parentUUID&quot;:&quot;8d682949-8b54-4901-b4f7-49b60fd33285&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c3abcf2f-c185-4cb3-8671-fbc0fc07c3b8&quot;,&quot;4633c224-873e-4e1f-8715-b8602d5e6544&quot;,&quot;e254b050-4f17-4f36-af43-bac61c4a2ffe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:26,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1a10e028-3824-456f-8326-b585f4700dfa&quot;,&quot;title&quot;:&quot;Settings API Holiday Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/functions/holidays.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/holidays.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;insert, list, get, delete holiday&quot;,&quot;fullTitle&quot;:&quot;Settings API Holiday Tests insert, list, get, delete holiday&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = mocks.mockResponse();\nlet listHolidaysEvent = await mocks.listHolidaysEvent()\nlet insertHolidayEvent = await mocks.insertHolidayEvent();\nlet getHolidayEvent = await mocks.getHolidayEvent();\n\n// insert\nawait holidays.insert(insertHolidayEvent, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst inserted = mockRes.body;\nvalidateHoliday(insertHolidayEvent.body, inserted);\n//list\nawait holidays.list(listHolidaysEvent, mockRes);\n\t\texpect(mockRes.statusCode).to.equal(200);\nexpect(mockRes.body.length).to.be.greaterThan(0);\nexpectDefinedHoliday(mockRes.body[0]);\n// get\ngetHolidayEvent.params.holidayGuid = inserted.holidayGuid;\nawait holidays.get(getHolidayEvent, mockRes);\n\t\texpect(mockRes.statusCode).to.equal(200);\nconst got = mockRes.body;\nvalidateHoliday(inserted, got);\n// delete\nlet deleteEvent = Object.assign({}, listHolidaysEvent);\ndeleteEvent.body = [inserted.holidayGuid];\nawait holidays.remove(deleteEvent, mockRes);\n\t\texpect(mockRes.statusCode).to.equal(200);\ngetHolidayEvent.params = {\n  holidayGuid: inserted.holidayGuid\n};\nawait holidays.get(getHolidayEvent, mockRes);\nexpect(mockRes.statusCode).to.equal(404);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84597a12-f13f-47df-8962-8b79e413f62f&quot;,&quot;parentUUID&quot;:&quot;1a10e028-3824-456f-8326-b585f4700dfa&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;84597a12-f13f-47df-8962-8b79e413f62f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f2d2d5d0-aad3-4cfb-81b6-5f35159f701f&quot;,&quot;title&quot;:&quot;Settings API Languages Test&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/functions/languages.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/languages.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a list of holidays&quot;,&quot;fullTitle&quot;:&quot;Settings API Languages Test should get a list of holidays&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = mocks.mockResponse();\nconst listLanguagesEvent = await mocks.listLanguagesEvent();\nawait languages.list(listLanguagesEvent, mockRes);\nexpect(mockRes.statusCode).to.eq(200);\nexpect(mockRes.body.length).to.be.gt(0);\nconst language = mockRes.body[0];\nexpect(language.languageGuid).to.exist;\nexpect(language.languageName).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ccd97bf-83ed-437a-8da3-bc2c0f8f7f3e&quot;,&quot;parentUUID&quot;:&quot;f2d2d5d0-aad3-4cfb-81b6-5f35159f701f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1ccd97bf-83ed-437a-8da3-bc2c0f8f7f3e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5d0e9eda-2864-430b-8f03-2fa7d918a7c4&quot;,&quot;title&quot;:&quot;Settings API Password Settings Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/functions/passwordSettings.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/passwordSettings.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;lists the password settings&quot;,&quot;fullTitle&quot;:&quot;Settings API Password Settings Tests lists the password settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse();\nawait passwordSettings.list(mockReq, mockRes);\n\n\t\texpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body\nexpect(result.length).to.be.greaterThan(0);\n// only system settings listed should be the ones related to passwords\nexpect(result.filter(x =&gt; x.settingsKey.startsWith(&#x27;PWD&#x27;)).length).to.equal(result.length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;19c0883f-2e0c-41f1-a2bc-d6d66e3bb6e4&quot;,&quot;parentUUID&quot;:&quot;5d0e9eda-2864-430b-8f03-2fa7d918a7c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;19c0883f-2e0c-41f1-a2bc-d6d66e3bb6e4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9e95a923-99cc-4d55-9088-f8c3b0eeb626&quot;,&quot;title&quot;:&quot;Settings API System Config Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/functions/systemConfig.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/systemConfig.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;lists the system config settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Config Tests lists the system config settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse();\nawait systemConfig.list(mockReq, mockRes);\n\n\t\texpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body\nexpect(result.length).to.be.greaterThan(40);\nexpect(result[0].settingsGuid).to.exist\nexpect(result[0].settingsKey).to.exist\nexpect(result[0].settingsValue).to.exist\nexpect(result[0].masterSettings.description).to.exist\nexpect(result[0].masterSettings.keyDefault).to.exist\nexpect(result[0].masterSettings.keyOptions).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c3647d0-4a91-410a-97c1-70e0ac55ed18&quot;,&quot;parentUUID&quot;:&quot;9e95a923-99cc-4d55-9088-f8c3b0eeb626&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;updates system config settings&quot;,&quot;fullTitle&quot;:&quot;Settings API System Config Tests updates system config settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:134,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse();\nmockReq.body = [{\n  settingsGuid: \&quot;2B18AE62-7C26-439C-84A7-371B4A51BE26\&quot;,\n  settingsKey: \&quot;AllowGetReqInfo\&quot;,\n  settingsValue: \&quot;true\&quot;\n}]\nawait systemConfig.update(mockReq, mockRes);\n\n\t\texpect(mockRes.statusCode).to.equal(200);\nlet result = mockRes.body\nexpect(result).to.equal(&#x27;1&#x27;);\n// verify that change was made\nawait systemConfig.list(mockReq, mockRes);\nresult = mockRes.body\nlet allowGetReqInfo = result.find( x =&gt; x.settingsKey == &#x27;AllowGetReqInfo&#x27;)\nexpect(allowGetReqInfo.settingsValue).to.equal(&#x27;true&#x27;)\n// revert the change\nmockReq.body = [{\n  settingsGuid: \&quot;2B18AE62-7C26-439C-84A7-371B4A51BE26\&quot;,\n  settingsKey: \&quot;AllowGetReqInfo\&quot;,\n  settingsValue: \&quot;false\&quot;\n}]\nawait systemConfig.update(mockReq, mockRes);\nawait systemConfig.list(mockReq, mockRes);\nresult = mockRes.body\nallowGetReqInfo = result.find( x =&gt; x.settingsKey == &#x27;AllowGetReqInfo&#x27;)\nexpect(allowGetReqInfo.settingsValue).to.equal(&#x27;false&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;06c7c8d2-3b24-423f-ac8d-ed419a80c75c&quot;,&quot;parentUUID&quot;:&quot;9e95a923-99cc-4d55-9088-f8c3b0eeb626&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8c3647d0-4a91-410a-97c1-70e0ac55ed18&quot;,&quot;06c7c8d2-3b24-423f-ac8d-ed419a80c75c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:157,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a83ab4bf-5539-4aaf-892d-d62eb18614a9&quot;,&quot;title&quot;:&quot;Settings API Utilities Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/functions/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0918179f-9507-4a02-9910-7d31f9bd888f&quot;,&quot;title&quot;:&quot;locales&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/functions/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;lists locales&quot;,&quot;fullTitle&quot;:&quot;Settings API Utilities Tests locales lists locales&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\nawait utils.listLocales(mocks.req(), mockRes);\nexpect(mockRes.statusCode).equal(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ff92b32-f015-4f06-96de-fcbf8a25bd50&quot;,&quot;parentUUID&quot;:&quot;0918179f-9507-4a02-9910-7d31f9bd888f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3ff92b32-f015-4f06-96de-fcbf8a25bd50&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b4a0f8c5-fbdc-4bc8-b43b-b9904a8f4104&quot;,&quot;title&quot;:&quot;timezones&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/functions/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list timezones&quot;,&quot;fullTitle&quot;:&quot;Settings API Utilities Tests timezones should list timezones&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nawait utils.listTimezones(mocks.req(), mockRes);\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ff63172-eecc-4f08-8a18-1f17ccc6daa9&quot;,&quot;parentUUID&quot;:&quot;b4a0f8c5-fbdc-4bc8-b43b-b9904a8f4104&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8ff63172-eecc-4f08-8a18-1f17ccc6daa9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ce3a946e-b3b9-4118-8059-177ee9886a6d&quot;,&quot;title&quot;:&quot;running versions&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-settings/test/integration/functions/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list running versions&quot;,&quot;fullTitle&quot;:&quot;Settings API Utilities Tests running versions should list running versions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nawait utils.listRunningVersions(mocks.req(), mockRes);\nexpect(mockRes.statusCode).eq(200);\nexpect(mockRes.body).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3dbc845-1973-4cc8-89ff-8f1867e04f9d&quot;,&quot;parentUUID&quot;:&quot;ce3a946e-b3b9-4118-8059-177ee9886a6d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a3dbc845-1973-4cc8-89ff-8f1867e04f9d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2f84f603-31e1-4f72-bd00-71098194e7dd&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4193f068-48f4-4962-ac8f-95aa6b895e8c&quot;,&quot;title&quot;:&quot;Task Dispatcher API Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Task Dispatcher API Controller Tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests \&quot;before all\&quot; hook in \&quot;Task Dispatcher API Controller Tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nsession = {tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6fbdfa19-b486-4b62-8224-4e52b60ed20b&quot;,&quot;parentUUID&quot;:&quot;4193f068-48f4-4962-ac8f-95aa6b895e8c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;863f43db-4466-4b6f-8772-2e9e78cf7764&quot;,&quot;title&quot;:&quot;ProcessTaskController&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get process tasks&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskController should get process tasks&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:155,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processTaskController = new controllers.ProcessTaskController(session);\nconst updateMyProfileProcessSid = &#x27;f864cfe2-98df-4724-8db1-de2cc538d4e0&#x27;\nlet processTasks = await processTaskController.getProcessTasks(updateMyProfileProcessSid)\nexpect(processTasks).to.exist;\nexpect(processTasks.length).to.be.gt(0);\nexpect(processTasks[0].processTaskGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f77ad00e-49f3-4d35-b6c1-2a6a6cee1f1c&quot;,&quot;parentUUID&quot;:&quot;863f43db-4466-4b6f-8772-2e9e78cf7764&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f77ad00e-49f3-4d35-b6c1-2a6a6cee1f1c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:155,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cd866686-e4f3-46d6-87a5-431dd61ba54c&quot;,&quot;title&quot;:&quot;ProcessTaskAttributeController&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list process task attributes&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskAttributeController should list process task attributes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processTaskAttributeController = new controllers.ProcessTaskAttributeController(session);\nconst profileFormProcessTaskSid = &#x27;c0473244-f04f-4916-8ac9-a73cc538d434&#x27;\nlet includeExt = false\nlet processTaskAttributes = await processTaskAttributeController.list(profileFormProcessTaskSid, includeExt)\nexpect(processTaskAttributes).to.exist;\nexpect(processTaskAttributes.length).to.be.gt(0);\nexpect(processTaskAttributes[6].processTaskAttributeGuid).to.exist;\nexpect(processTaskAttributes[6].extendedAtt).to.not.exist;\nincludeExt = true\nlet processTaskAttributesIncExt = await processTaskAttributeController.list(profileFormProcessTaskSid, includeExt)\nexpect(processTaskAttributesIncExt).to.exist;\nexpect(processTaskAttributesIncExt.length).to.be.gt(0);\nexpect(processTaskAttributesIncExt[6].processTaskAttributeGuid).to.exist;\nexpect(processTaskAttributesIncExt[6].extendedAtt.extAttribute).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;44f198b2-c08e-47d4-acc0-9df38fda374d&quot;,&quot;parentUUID&quot;:&quot;cd866686-e4f3-46d6-87a5-431dd61ba54c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get and update a process task attribute&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskAttributeController should get and update a process task attribute&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:64,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processTaskAttributeGuid = &#x27;7cece0ab-bda6-4b13-a8fb-3f5c467371e6&#x27;  \nlet processTaskAttributeController = new controllers.ProcessTaskAttributeController(session);\nlet processTaskAttribute =  await processTaskAttributeController.get(processTaskAttributeGuid)\n// console.log(processTaskAttribute)\nexpect(processTaskAttribute.attributeValue).to.equal(&#x27;0&#x27;)\nlet numberOfAffectedRows = await processTaskAttributeController.update({\n  processTaskAttributeGuid,\n  fields: {\n    attributeValue: &#x27;TEST&#x27;\n  }\n})\nexpect(numberOfAffectedRows).to.equal(1)\nprocessTaskAttribute =  await processTaskAttributeController.get(processTaskAttributeGuid)\nexpect(processTaskAttribute.attributeValue).to.equal(&#x27;TEST&#x27;)\n// must set it back to original value so that we don&#x27;t break anything\nnumberOfAffectedRows = await processTaskAttributeController.update({\n  processTaskAttributeGuid,\n  fields: {\n    attributeValue: &#x27;0&#x27;\n  }\n})\nexpect(numberOfAffectedRows).to.equal(1)\nprocessTaskAttribute =  await processTaskAttributeController.get(processTaskAttributeGuid)\nexpect(processTaskAttribute.attributeValue).to.equal(&#x27;0&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7a4f4efb-331f-451f-8af0-80ea55fc5d5c&quot;,&quot;parentUUID&quot;:&quot;cd866686-e4f3-46d6-87a5-431dd61ba54c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert a process task attribute&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskAttributeController should insert a process task attribute&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// pick any process task and insert a process task attribute\n// then delete it\nconst processTaskAttributeController = new controllers.ProcessTaskAttributeController(session);\n// give \&quot;Update my profile - Start task\&quot; a test process task att\nconst processTaskGuid = &#x27;27cb04ea-b19d-4327-8b3a-e82cc538d44d&#x27;\nconst attributeKey = &#x27;TEST_KEY&#x27;\nconst attributeValue = &#x27;TEST_VALUE&#x27;\nconst ordinal = 1\nconst processTaskAttribute = await processTaskAttributeController.insert({\n  processTaskGuid,\n  attributeKey,\n  attributeValue,\n  ordinal\n})\nexpect(processTaskAttribute.processTaskAttributeGuid).to.be.a.uuid()\nexpect(processTaskAttribute.processTaskGuid).to.equal(processTaskGuid)\nexpect(processTaskAttribute.attributeKey).to.equal(attributeKey)\nexpect(processTaskAttribute.attributeValue).to.equal(attributeValue)\nexpect(processTaskAttribute.ordinal).to.equal(ordinal)\n// cleanup\n// const numberOfAffectedRows = await processTaskAttributeController.delete(processTaskAttribute.processTaskAttributeGuid)\nconst numberOfAffectedRows = await processTaskAttributeController.delete(processTaskAttribute.processTaskAttributeGuid)\nexpect(numberOfAffectedRows).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9b22913-0625-4acd-9ba3-a7484e4656b6&quot;,&quot;parentUUID&quot;:&quot;cd866686-e4f3-46d6-87a5-431dd61ba54c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get the process task attribute max ordinal value for a process task&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskAttributeController should get the process task attribute max ordinal value for a process task&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processTaskAttributeController = new controllers.ProcessTaskAttributeController(session);\n// \&quot;Update my profile - Start task\&quot; a test process task att\nlet processTaskGuid = \&quot;27cb04ea-b19d-4327-8b3a-e82cc538d44d\&quot;;\n// that process task has no atts so its max ordinal should be null\nlet maxOrdinal = await processTaskAttributeController.getMaxOrdinal(processTaskGuid);\nexpect(maxOrdinal).to.equal(null);\n// \&quot;Update my profile - User Profile\&quot; task does have atts.  seed db goes up to 12\nprocessTaskGuid = \&quot;28d88aa5-fc4c-4e16-b32d-2964c738d49b\&quot;;\nmaxOrdinal = await processTaskAttributeController.getMaxOrdinal(processTaskGuid);\nexpect(maxOrdinal).to.equal(12);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a26a5591-8245-4d7b-9174-533711bd3ec9&quot;,&quot;parentUUID&quot;:&quot;cd866686-e4f3-46d6-87a5-431dd61ba54c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;44f198b2-c08e-47d4-acc0-9df38fda374d&quot;,&quot;7a4f4efb-331f-451f-8af0-80ea55fc5d5c&quot;,&quot;a9b22913-0625-4acd-9ba3-a7484e4656b6&quot;,&quot;a26a5591-8245-4d7b-9174-533711bd3ec9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:107,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;903b6ba3-168b-418e-be06-5613c01a3744&quot;,&quot;title&quot;:&quot;ProcessTaskMappingController&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list process task mappings&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessTaskMappingController should list process task mappings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processTaskMappingController = new controllers.ProcessTaskMappingController(session);\nconst profileFormProcessTaskSid = &#x27;c0473244-f04f-4916-8ac9-a73cc538d434&#x27;\nlet processTaskAttributes = await processTaskMappingController.list(profileFormProcessTaskSid)\nexpect(processTaskAttributes).to.exist;\nexpect(processTaskAttributes.length).to.be.gt(0);\nexpect(processTaskAttributes[0].processTaskMappingGuid).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe355591-11f0-4c24-b7e6-64b05a4a6816&quot;,&quot;parentUUID&quot;:&quot;903b6ba3-168b-418e-be06-5613c01a3744&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fe355591-11f0-4c24-b7e6-64b05a4a6816&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0e3d4e39-859a-4d58-83ce-5a49e61a27cd&quot;,&quot;title&quot;:&quot;ProcessController&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task-dispatcher/test/integration/db/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should update a process&#x27;s modified by and date fields&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Controller Tests ProcessController should update a process&#x27;s modified by and date fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processController = new controllers.ProcessController(session);\nconst updateMyProfileProcessSid = &#x27;f864cfe2-98df-4724-8db1-de2cc538d4e0&#x27;\nconst systemUserGuid = &#x27;D8C469C3-F781-4179-A09C-6D148885FB30&#x27;\nlet process = await processController.get(updateMyProfileProcessSid)\nexpect(process).to.exist;\nexpect(process.processGuid.toLowerCase()).to.equal(updateMyProfileProcessSid);\nconst oldModifiedDate = process.modifiedDate\nconst numberOfAffectedRows = await processController.updateModifiedByAndDate(updateMyProfileProcessSid)\nexpect(numberOfAffectedRows).to.equal(1)\nprocess = await processController.get(updateMyProfileProcessSid) \nexpect(process.modifiedDate).to.be.greaterThan(oldModifiedDate)\n// for some reason when executed in a test the db record&#x27;s modifiedBy is set to \n// the systemUserGuid instead of the contact sid specified in the session (4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF)\nexpect(process.modifiedBy).to.equal(systemUserGuid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1d1b4af-6740-4743-9ce6-370c6cb62016&quot;,&quot;parentUUID&quot;:&quot;0e3d4e39-859a-4d58-83ce-5a49e61a27cd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e1d1b4af-6740-4743-9ce6-370c6cb62016&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c5968391-233d-4013-9fef-1f68e8794647&quot;,&quot;title&quot;:&quot;Task Dispatcher API Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task-dispatcher/test/integration/db/model.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d405d127-38e9-4301-964d-3134f13055be&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task-dispatcher/test/integration/db/model.test.js&quot;,&quot;file&quot;:&quot;/test/integration/db/model.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Model Tests tests \&quot;before all\&quot; hook in \&quot;tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nuser = config.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d799df19-db8a-4686-a7e9-e87aebb23ce1&quot;,&quot;parentUUID&quot;:&quot;d405d127-38e9-4301-964d-3134f13055be&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:59,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const vwProcessTasksModel = await sqldb.models.bindModel(\n  config.tenantOne.tenantId,\n  vwProcessTasksModels.vwProcessTasks\n);\nlet results = await vwProcessTasksModel.query();\n//console.log(results)\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0942b0e9-90d9-4e04-9efb-b5c19078b6a8&quot;,&quot;parentUUID&quot;:&quot;d405d127-38e9-4301-964d-3134f13055be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a hash of bound models&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Model Tests tests should return a hash of bound models&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:34,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const vwProcessTasksModel = (await models.getModels(config.tenantOne.tenantId))\n  .vwProcessTasks;\nlet results = await vwProcessTasksModel.query();\n//console.log(results)\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42571251-eb1c-477e-999e-32a3327ec991&quot;,&quot;parentUUID&quot;:&quot;d405d127-38e9-4301-964d-3134f13055be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should bound models should be cached in memory&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API Model Tests tests should bound models should be cached in memory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:35,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(models._tentantModels[config.tenantOne.tenantId]).to.exist;\nlet results = await models._tentantModels[\n  config.tenantOne.tenantId\n].vwProcessTasks.query();\n//console.log(results)\nexpect(results.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6fe30605-47bd-4d3a-871a-baed14636988&quot;,&quot;parentUUID&quot;:&quot;d405d127-38e9-4301-964d-3134f13055be&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0942b0e9-90d9-4e04-9efb-b5c19078b6a8&quot;,&quot;42571251-eb1c-477e-999e-32a3327ec991&quot;,&quot;6fe30605-47bd-4d3a-871a-baed14636988&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:128,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;12d81823-b26a-4e8d-8115-6e0e2318e951&quot;,&quot;title&quot;:&quot;Task Dispatcher API FTP Push Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task-dispatcher/test/integration/functions/ftpPush.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/ftpPush.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets task file settings&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API FTP Push Tests gets task file settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;script_getfilesettings\&quot;, tasktype }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst data = mockRes.body.Data;\nexpect(data).to.include({PickDirectory: \&quot;No\&quot;});\nexpect(data).to.include({FileToFTP: \&quot;4a6c9613-bac9-4448-93c9-d9342bf5d897;96865aec-667c-4db5-8116-f1d1bae512ab\&quot;});\nexpect(data).to.include({FTPSite: \&quot;ftp\&quot;});\nexpect(data).to.include({FTPUsername: \&quot;ftp_user\&quot;});\nexpect(data).to.include({FTPPassword: \&quot;ftp_pass\&quot;});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a334637-7ae9-4853-9c3e-e865a65bd00b&quot;,&quot;parentUUID&quot;:&quot;12d81823-b26a-4e8d-8115-6e0e2318e951&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets task file options&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API FTP Push Tests gets task file options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;script_getfileoptions\&quot;, tasktype }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nconst data = mockRes.body.Data[0];\nexpect(data).to.include(&#x27;4a6c9613-bac9-4448-93c9-d9342bf5d897;96865aec-667c-4db5-8116-f1d1bae512ab&#x27;);\nexpect(data).to.include(&#x27;Form : File Attachment:  (Task Output)&#x27;),\nexpect(data).to.include(&#x27;322ffece-654f-49e4-bb5c-4ae41768d5be&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6dc5978-fb21-4bd1-b363-2de6e9ec57b1&quot;,&quot;parentUUID&quot;:&quot;12d81823-b26a-4e8d-8115-6e0e2318e951&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2a334637-7ae9-4853-9c3e-e865a65bd00b&quot;,&quot;f6dc5978-fb21-4bd1-b363-2de6e9ec57b1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;14ce9e6b-7aac-4396-807d-a05cf14b1227&quot;,&quot;title&quot;:&quot;Task Dispatcher API PDF Merge Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-task-dispatcher/test/integration/functions/pdfMerge.test.js&quot;,&quot;file&quot;:&quot;/test/integration/functions/pdfMerge.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets task settings&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets task settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;script_gettasksettings\&quot;, tasktype }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\n// vue output\n// expect(result.length).to.be.greaterThan(1);\n// expect(result[0].attributeKey).to.exist;\n// expect(result[0].attributeValue).to.exist;\n// expect(result.find(x =&gt; x.attributeKey == &#x27;GeneratedFileName&#x27;)).to.exist\n// expect(result.find(x =&gt; x.attributeKey == &#x27;FirstPDF&#x27;)).to.exist\n// angular output\nexpect(result.Data.GeneratedFileName).to.exist;\nexpect(result.Data.FirstPDF).to.exist;\nexpect(result.Data.SecondPDF).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c9998db6-38d5-495e-b7fb-601b55cef2a3&quot;,&quot;parentUUID&quot;:&quot;14ce9e6b-7aac-4396-807d-a05cf14b1227&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets PDF options&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets PDF options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;script_getpdfoptions\&quot;, tasktype }\nmockReq.query = { processSid }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result.length).to.be.greaterThan(1);\n// vue output\n// expect(result[0].displayName).to.exist;\n// expect(result[0].processTaskGuid).to.exist;\n// expect(result[0].taskTypeGuid).to.exist;\n// angular output\nexpect(result[0].length).to.be.greaterThan(1);\nexpect(result[0][0]).to.equal(&#x27;ae9b4a71-5f37-4fe9-9926-a0901da0eb0e;52407ad7-bd98-4023-8d88-91ef4464cd98&#x27;);\nexpect(result[0][1]).to.equal(&#x27;second PDF Merge Form : File Attachment (Task Output)&#x27;);\nexpect(result[0][2]).to.equal(&#x27;322ffece-654f-49e4-bb5c-4ae41768d5be&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;49cded11-535a-4851-b87d-ba2496eab320&quot;,&quot;parentUUID&quot;:&quot;14ce9e6b-7aac-4396-807d-a05cf14b1227&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;lists PDF rule options&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests lists PDF rule options&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req();\nconst mockRes = await mocks.mockResponse();\nmockReq.params = { processTaskSid, op: \&quot;listRuleOptions\&quot;, tasktype }\nmockReq.query = { processSid }\nawait functions.getConfig(mockReq, mockRes);\nexpect(mockRes.statusCode).to.equal(200);\nconst result = mockRes.body;\nexpect(result).to.eql([{ Value: \&quot;GeneratedPDF\&quot;, Label: \&quot;Generated PDF\&quot;, Type: \&quot;FileAttachment\&quot;}])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e41853e9-6f65-401c-a1f3-b256151e742a&quot;,&quot;parentUUID&quot;:&quot;14ce9e6b-7aac-4396-807d-a05cf14b1227&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets PDF fields&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets PDF fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid, op: \&quot;script_getpdffields\&quot;, tasktype }\nmockReq.query = { processSid }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\n// vue output\n// expect(result.length).to.equal(1)\n// expect(result[0]).to.equal(&#x27;FILE_NAME&#x27;)\n// angular output\nexpect(result.Data.length).to.equal(1)\nexpect(result.Data[0][0]).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result.Data[0][1]).to.equal(&#x27;FILE_NAME&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6cd89e0c-eee7-4343-a7ca-7582c7d79689&quot;,&quot;parentUUID&quot;:&quot;14ce9e6b-7aac-4396-807d-a05cf14b1227&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - data source - form mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - data source - form mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Task_Input&#x27;)\nexpect(result[0].PrefillField).to.equal(&#x27;1601919933647&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Data - second PDF Merge Form - Merged PDF Filename:&#x27;)\nexpect(result[0].TaskSID).to.equal(&#x27;ae9b4a71-5f37-4fe9-9926-a0901da0eb0e&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dbc3899e-74c6-46d1-8451-49e04881a790&quot;,&quot;parentUUID&quot;:&quot;14ce9e6b-7aac-4396-807d-a05cf14b1227&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - fixed value mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - fixed value mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processSid_fixedValue = &#x27;c2095ccf-896b-46a0-b5e9-8e5b7e288270&#x27; \nconst processTaskSid_fixedValue = &#x27;5f719bb1-11b8-43d9-a9fd-66e55306f4eb&#x27;\nconst mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid: processTaskSid_fixedValue, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid: processSid_fixedValue }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Fixed_Value&#x27;)\nexpect(result[0].PrefillField).to.equal(&#x27;fixValFileName&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Fixed Value - fixValFileName&#x27;)\nexpect(result[0].TaskSID).to.not.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;292637fa-409e-4923-95bb-f041bf6a68f4&quot;,&quot;parentUUID&quot;:&quot;14ce9e6b-7aac-4396-807d-a05cf14b1227&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - request id mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - request id mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processSid_requestId = &#x27;f9f94cfe-d4b3-4d89-9695-1b32c6cee55d&#x27; \nconst processTaskSid_requestId = &#x27;9b4f1444-7bd7-481a-8008-69a0490da139&#x27;\nconst mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid: processTaskSid_requestId, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid: processSid_requestId }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Request&#x27;)\nexpect(result[0].PrefillField).to.equal(&#x27;ID&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Request - ID&#x27;)\nexpect(result[0].TaskSID).to.not.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ff419179-2c2b-41a7-9a9d-dded805918c9&quot;,&quot;parentUUID&quot;:&quot;14ce9e6b-7aac-4396-807d-a05cf14b1227&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - client username mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - client username mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processSid_clientUsername = &#x27;d1a7c44e-1e6e-4cdf-9d39-deac08a8b5cc&#x27; \nconst processTaskSid_clientUsername = &#x27;a79cde56-9f3a-4be4-9824-dd634eddbff3&#x27;\nconst mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid: processTaskSid_clientUsername, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid: processSid_clientUsername }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Client&#x27;)\nexpect(result[0].PrefillField).to.equal(&#x27;UserName&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Client - UserName&#x27;)\nexpect(result[0].TaskSID).to.not.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f29090b4-2f98-43cb-a78b-4935aa5861a4&quot;,&quot;parentUUID&quot;:&quot;14ce9e6b-7aac-4396-807d-a05cf14b1227&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;gets load params - status pdfmerge mapping&quot;,&quot;fullTitle&quot;:&quot;Task Dispatcher API PDF Merge Tests gets load params - status pdfmerge mapping&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const processSid_statusPdfMerge = &#x27;ab3a8404-c208-4ca7-8ae6-637b16c23368&#x27; \nconst processTaskSid_statusPdfMerge = &#x27;7f4f1f42-228c-46dc-90a3-77fe15fe7412&#x27;\nconst mockReq = await mocks.req()\nconst mockRes = await mocks.mockResponse()\nmockReq.params = { processTaskSid: processTaskSid_statusPdfMerge, op: \&quot;script_getloadparams\&quot;, tasktype }\nmockReq.query = { processSid: processSid_statusPdfMerge }\nawait functions.getConfig(mockReq, mockRes)\nexpect(mockRes.statusCode).to.equal(200)\nconst result = mockRes.body\nexpect(result.length).to.equal(1)\n\nexpect(result[0].ParameterName).to.equal(&#x27;FILE_NAME&#x27;)\nexpect(result[0].PrefillType).to.equal(&#x27;Task_State&#x27;)\n// expect(result[0].PrefillField).to.equal(&#x27;UserName&#x27;)\nexpect(result[0].Description).to.equal(&#x27;Status - PDF Merge - &#x27;)\nexpect(result[0].TaskSID).to.equal(&#x27;7f4f1f42-228c-46dc-90a3-77fe15fe7412&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41a77102-e98a-4bd8-b7c3-19ba6fbf1af7&quot;,&quot;parentUUID&quot;:&quot;14ce9e6b-7aac-4396-807d-a05cf14b1227&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c9998db6-38d5-495e-b7fb-601b55cef2a3&quot;,&quot;49cded11-535a-4851-b87d-ba2496eab320&quot;,&quot;e41853e9-6f65-401c-a1f3-b256151e742a&quot;,&quot;6cd89e0c-eee7-4343-a7ca-7582c7d79689&quot;,&quot;dbc3899e-74c6-46d1-8451-49e04881a790&quot;,&quot;292637fa-409e-4923-95bb-f041bf6a68f4&quot;,&quot;ff419179-2c2b-41a7-9a9d-dded805918c9&quot;,&quot;f29090b4-2f98-43cb-a78b-4935aa5861a4&quot;,&quot;41a77102-e98a-4bd8-b7c3-19ba6fbf1af7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:84,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;26fd8659-4e50-4bed-b3dc-670865965850&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0dcfccf8-5ae5-416d-9de7-527113c20896&quot;,&quot;title&quot;:&quot;Tenant API Sessions Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/activeSessions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/activeSessions.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Sessions Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000); \ntestConfig = await testLib.getTestConfig();\n    \ntenant = testConfig.tenantOne.tenantId;\ngroup = \&quot;sessionServiceGroup\&quot;\ntestEventType = &#x27;extendSession&#x27;\nfullStreamName = tenant + &#x27;.stream.&#x27; + testStreamName\neventProcessedName = fullStreamName + \&quot;.\&quot; + group + \&quot;.processed\&quot;;\neventHistoryName = fullStreamName + \&quot;.history\&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54f49812-4a35-43f5-ab99-7863de2cd6f9&quot;,&quot;parentUUID&quot;:&quot;0dcfccf8-5ae5-416d-9de7-527113c20896&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Sessions Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;82b782c7-9b63-41cb-8dcd-c7bafb5afdd5&quot;,&quot;parentUUID&quot;:&quot;0dcfccf8-5ae5-416d-9de7-527113c20896&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;082b52b5-474f-413c-8cee-5f94291f5643&quot;,&quot;title&quot;:&quot;Active Sessions&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/activeSessions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/activeSessions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;07753bef-4bf9-4d3b-8c94-22fd06c7644b&quot;,&quot;title&quot;:&quot;count active sessions&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/activeSessions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/activeSessions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return activeSessions&quot;,&quot;fullTitle&quot;:&quot;Tenant API Sessions Tests Active Sessions count active sessions should return activeSessions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let sessions  = await getActiveSessions(tenant);\n//console.log(sessions)\nexpect(sessions).to.exist;\nexpect(sessions).to.have.property(\&quot;activeSessions\&quot;)\nexpect(sessions).to.have.property(\&quot;activeUsers\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7904c7b4-093f-4f9b-a190-5ef43b84ad08&quot;,&quot;parentUUID&quot;:&quot;07753bef-4bf9-4d3b-8c94-22fd06c7644b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7904c7b4-093f-4f9b-a190-5ef43b84ad08&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c0cd5017-c0f1-4943-ad64-857d22b4960a&quot;,&quot;title&quot;:&quot;Tenant API licsense stats&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/licenseStats.test.js&quot;,&quot;file&quot;:&quot;/test/integration/licenseStats.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API licsense stats \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3003,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000); \nconfig = await testLib.getTestConfig();\nlet sp = new stream.StreamPublisher(&#x27;sessions&#x27;,config.tenantOne.tenantId);\nawait sp.sendEvent(\&quot;extendSession\&quot;, {\n    token: \&quot;abcd234\&quot;,\n    user: {\n        sid:\&quot;11111\&quot;, \n        user_name: \&quot;iapprove\&quot;, \n        email: \&quot;iapprove@integrify.com\&quot;, \n        name: \&quot;System System\&quot;\n    }\n})\n    \nawait delay(3000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cfe9b668-5b04-4d0a-8fea-1d613e01ce45&quot;,&quot;parentUUID&quot;:&quot;c0cd5017-c0f1-4943-ad64-857d22b4960a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API licsense stats \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0db0f40d-a76b-4992-843e-7fc1ed103176&quot;,&quot;parentUUID&quot;:&quot;c0cd5017-c0f1-4943-ad64-857d22b4960a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;cf081782-acae-4559-831a-953a8b4ca3d2&quot;,&quot;title&quot;:&quot;Post all stats&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/licenseStats.test.js&quot;,&quot;file&quot;:&quot;/test/integration/licenseStats.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return ok&quot;,&quot;fullTitle&quot;:&quot;Tenant API licsense stats Post all stats should return ok&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:385,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let result = await postAllStats();\nexpect(result).to.eq(\&quot;ok\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d7de6f6e-a92b-4a09-969b-54401f8c0f52&quot;,&quot;parentUUID&quot;:&quot;cf081782-acae-4559-831a-953a8b4ca3d2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d7de6f6e-a92b-4a09-969b-54401f8c0f52&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:385,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9db25eca-46c0-4bb4-9261-f4d03fb9003e&quot;,&quot;title&quot;:&quot;Tenant API Stream-Manager Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;fb683aa5-15b6-48f5-afd0-3e68f681050a&quot;,&quot;title&quot;:&quot;listTenantStreams&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a list of the streams for a tenant&quot;,&quot;fullTitle&quot;:&quot;Tenant API Stream-Manager Tests listTenantStreams should return a list of the streams for a tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req();\n\t\t\tlet results = await streamMonitor.listTenantStreams(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst apps = mockRes.body;\n\t\t\tstreamName = apps[0]\n\t\t\texpect(apps).to.be.array()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac296fee-4252-42e8-af7f-55875fbd8887&quot;,&quot;parentUUID&quot;:&quot;fb683aa5-15b6-48f5-afd0-3e68f681050a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ac296fee-4252-42e8-af7f-55875fbd8887&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;74759211-b4ca-4b54-9f3a-0c013faae931&quot;,&quot;title&quot;:&quot;streamInfoReqHandler&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return info for the stream&quot;,&quot;fullTitle&quot;:&quot;Tenant API Stream-Manager Tests streamInfoReqHandler should return info for the stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req();\n\t\t\treq.params.streamName = req.params.tenant + &#x27;.stream.&#x27; + testStreamName\n\t\t\tlet results = await streamMonitor.streamInfoReqHandler(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst info = mockRes.body;\n\t\t\texpect(info).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3cf8b0e4-d460-4658-b4a3-dae6ae964199&quot;,&quot;parentUUID&quot;:&quot;74759211-b4ca-4b54-9f3a-0c013faae931&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3cf8b0e4-d460-4658-b4a3-dae6ae964199&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;88a16da5-6097-45dc-8e82-07b7455f014e&quot;,&quot;title&quot;:&quot;getGroupInfo&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return group info for the stream&quot;,&quot;fullTitle&quot;:&quot;Tenant API Stream-Manager Tests getGroupInfo should return group info for the stream&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req();\n\t\t\treq.params.streamName = req.params.tenant + &#x27;.stream.&#x27; + testStreamName\n\t\t\tlet results = await streamMonitor.getGroupInfo(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst info = mockRes.body;\n\t\t\texpect(info).to.be.array()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cfa43300-9bde-4e63-8899-692c19a8d20b&quot;,&quot;parentUUID&quot;:&quot;88a16da5-6097-45dc-8e82-07b7455f014e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cfa43300-9bde-4e63-8899-692c19a8d20b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;eb63c946-2ec3-4843-8f51-e3452aca1c05&quot;,&quot;title&quot;:&quot;getConsumerInfo&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/monitor.test.js&quot;,&quot;file&quot;:&quot;/test/integration/monitor.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return consumer info for the group&quot;,&quot;fullTitle&quot;:&quot;Tenant API Stream-Manager Tests getConsumerInfo should return consumer info for the group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req();\n\t\t\treq.params.streamName = req.params.tenant + &#x27;.stream.&#x27; + testStreamName\n\t\t\treq.params.groupName = \&quot;sessionServiceGroup\&quot; \n\t\t\tlet results = await streamMonitor.getConsumerInfo(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst info = mockRes.body;\n\t\t\texpect(info).to.be.array()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c7f1737-e8ef-47cc-928c-fba86413aeb2&quot;,&quot;parentUUID&quot;:&quot;eb63c946-2ec3-4843-8f51-e3452aca1c05&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6c7f1737-e8ef-47cc-928c-fba86413aeb2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;59d38efc-f909-4810-b12b-86b9966f1094&quot;,&quot;title&quot;:&quot;Tenant API License, Apps and Settings Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ea2a8024-a5f8-435d-bc97-88c5402553c6&quot;,&quot;title&quot;:&quot;getTenantLicense&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a license for a tenant&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantLicense should return a license for a tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await mocks.req()\n\t\t\tlet results = await getTenantLicense(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst licenseInfo = mockRes.body;\n\t\t\texpect(licenseInfo.instanceId).equal(req.oauth.tenant);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cdee26d8-4b07-4786-ac82-edee24e709f8&quot;,&quot;parentUUID&quot;:&quot;ea2a8024-a5f8-435d-bc97-88c5402553c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cdee26d8-4b07-4786-ac82-edee24e709f8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;647ba6a5-a3ec-4a14-b334-fc3511a4e307&quot;,&quot;title&quot;:&quot;getTenantApps&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return apps for a tenant&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantApps should return apps for a tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await  mocks.req()\n\t\t\tlet results = await getTenantApps(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst apps = mockRes.body;\n\t\t\texpect(apps).to.be.array()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d8bf424-ade2-41ed-b7c8-c13e2a3b3089&quot;,&quot;parentUUID&quot;:&quot;647ba6a5-a3ec-4a14-b334-fc3511a4e307&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3d8bf424-ade2-41ed-b7c8-c13e2a3b3089&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;83a0d343-0e4b-45e7-a093-a7e88a57cc0e&quot;,&quot;title&quot;:&quot;getTenantLicenseLocation&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return license location for a tenant&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantLicenseLocation should return license location for a tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await  mocks.req()\n\t\t\tlet results = await getTenantLicenseLocation(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst licenseLocation = mockRes.body;\n      expect(licenseLocation).to.satisfy(function(val) { return val === &#x27;onpremise&#x27; || val.toLowerCase().includes(&#x27;cloud&#x27;); });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;198df3b7-7820-4f5c-8a20-e31a0b5df57f&quot;,&quot;parentUUID&quot;:&quot;83a0d343-0e4b-45e7-a093-a7e88a57cc0e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;198df3b7-7820-4f5c-8a20-e31a0b5df57f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1feb3fb2-19b7-4560-8c16-d0612d88ec68&quot;,&quot;title&quot;:&quot;getTenantLoginSettings&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/tenant.test.js&quot;,&quot;file&quot;:&quot;/test/integration/tenant.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should login settings for a tenant based on a tenant id&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantLoginSettings should login settings for a tenant based on a tenant id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await  mocks.req()\n\t\t\treq.query = {tenant: req.config.tenantOne.tenantId}\n\t\t\tlet results = await getTenantLoginSettings(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst settings = mockRes.body;\n\t\t\texpect(settings.ID).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99708068-e04a-4159-9325-3f052c4cc086&quot;,&quot;parentUUID&quot;:&quot;1feb3fb2-19b7-4560-8c16-d0612d88ec68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should login settings for a tenant based on a host header&quot;,&quot;fullTitle&quot;:&quot;Tenant API License, Apps and Settings Tests getTenantLoginSettings should login settings for a tenant based on a host header&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n\t\t\tlet req = await  mocks.req()\n\t\t\treq.query = {hostHeader: req.config.tenantOne.hostHeader}\n\t\t\tlet results = await getTenantLoginSettings(req, mockRes);\n\t\t\texpect(mockRes.statusCode).equal(200);\n\t\t\texpect(mockRes.body).to.exist;\n\t\t\tconst settings = mockRes.body;\n\t\t\texpect(settings.ID).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8ea762c7-ffb2-4530-94f2-8ef017582ece&quot;,&quot;parentUUID&quot;:&quot;1feb3fb2-19b7-4560-8c16-d0612d88ec68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;99708068-e04a-4159-9325-3f052c4cc086&quot;,&quot;8ea762c7-ffb2-4530-94f2-8ef017582ece&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9a52a478-1d8e-4edf-a57f-c258c2288c6b&quot;,&quot;title&quot;:&quot;Tenant API Translation controller tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/translation.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;641f738a-ad6a-4f07-81e8-1bfaa84cf6fc&quot;,&quot;parentUUID&quot;:&quot;9a52a478-1d8e-4edf-a57f-c258c2288c6b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await translationController.deleteLanguages(tenant, {languageName: &#x27;test&#x27;});\ndeleted = await translationController.deleteLabels(tenant, {defaultText: &#x27;label from test&#x27;});\nconsole.log(deleted);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2c9613b-9ffc-4aa8-9a39-31331ffb6fc4&quot;,&quot;parentUUID&quot;:&quot;9a52a478-1d8e-4edf-a57f-c258c2288c6b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;69d6ff87-aa76-4b74-8aca-3a5272cea066&quot;,&quot;title&quot;:&quot;language crud &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/translation.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests language crud  should create a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:33,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  language = await translationController.createLanguage(tenant, languageObj);\n_id = language._id.toString();\nexpect(_id).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9bac9ae-930d-45fe-8098-176a53e5c65e&quot;,&quot;parentUUID&quot;:&quot;69d6ff87-aa76-4b74-8aca-3a5272cea066&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list languages&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests language crud  should list languages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  languages = await translationController.listLanguages(tenant);\n         console.log(JSON.stringify(languages));\n         expect(languages.length).to.be.gt(0);  \n         let createdLanguage  = languages.find((d) =&gt; {\n             return d._id.toString() === _id;\n         })\n         expect(createdLanguage).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1b3db0b-e62f-476b-8dd8-fac6a88d9b2b&quot;,&quot;parentUUID&quot;:&quot;69d6ff87-aa76-4b74-8aca-3a5272cea066&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests language crud  should get a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;language = await translationController.getLanguage(tenant,_id);\n            expect(language).to.exist         \n            expect(language._id.toString()).to.equal(_id)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4efc2236-4296-4f08-a2cd-4aac44690749&quot;,&quot;parentUUID&quot;:&quot;69d6ff87-aa76-4b74-8aca-3a5272cea066&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests language crud  should update a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;language.translationCode = &#x27;test-updated&#x27;;\n            language.modifiedBy = IntegrifySystemContactSid;\n            const updatedLanguage = await translationController.updateLanguage(tenant,language.toObject());\n            expect(updatedLanguage).to.exist         \n            expect(updatedLanguage._id.toString()).to.equal(_id)\n            expect(updatedLanguage.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2930bf7d-4bed-451c-be86-e4b93878bd46&quot;,&quot;parentUUID&quot;:&quot;69d6ff87-aa76-4b74-8aca-3a5272cea066&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests language crud  delete a a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const deleted = await translationController.deleteLanguage(tenant,_id);\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cce0b132-5840-449c-a056-4e10111d0e17&quot;,&quot;parentUUID&quot;:&quot;69d6ff87-aa76-4b74-8aca-3a5272cea066&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a9bac9ae-930d-45fe-8098-176a53e5c65e&quot;,&quot;c1b3db0b-e62f-476b-8dd8-fac6a88d9b2b&quot;,&quot;4efc2236-4296-4f08-a2cd-4aac44690749&quot;,&quot;2930bf7d-4bed-451c-be86-e4b93878bd46&quot;,&quot;cce0b132-5840-449c-a056-4e10111d0e17&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:56,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e898b334-49cb-46f4-8c58-2cd0131fc273&quot;,&quot;title&quot;:&quot;label crud &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/translation.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  should create a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  label = await translationController.createLabel(tenant, labelObj);\n_id = label._id.toString();\nexpect(_id).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cb3bc883-b5fc-41c5-acc8-02b137ee7e20&quot;,&quot;parentUUID&quot;:&quot;e898b334-49cb-46f4-8c58-2cd0131fc273&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list labels&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  should list labels&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  labels = await translationController.listLabels(tenant);\n         expect(labels.length).to.be.gt(0);  \n         let createdLabel  = labels.find((d) =&gt; {\n             return d._id.toString() === _id;\n         })\n         expect(createdLabel).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2ae7c54-ee91-45da-9a99-8b251cbaf6ff&quot;,&quot;parentUUID&quot;:&quot;e898b334-49cb-46f4-8c58-2cd0131fc273&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  should get a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;label = await translationController.getLabel(tenant,_id);\n            expect(label).to.exist         \n            expect(label._id.toString()).to.equal(_id)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a01898be-c344-4917-8f29-137d200ce5ef&quot;,&quot;parentUUID&quot;:&quot;e898b334-49cb-46f4-8c58-2cd0131fc273&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  should update a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;label.translatedText = &#x27;test-updated&#x27;;\n            label.modifiedBy = IntegrifySystemContactSid;\n            const updatedLabel = await translationController.updateLabel(tenant,label.toObject());\n            expect(updatedLabel).to.exist         \n            expect(updatedLabel._id.toString()).to.equal(_id)\n            expect(updatedLabel.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39af4e7a-d9c3-43c7-88b3-390a8de8bad5&quot;,&quot;parentUUID&quot;:&quot;e898b334-49cb-46f4-8c58-2cd0131fc273&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  delete a a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const deleted = await translationController.deleteLabel(tenant,_id);\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ab1e6b1f-44c7-4c90-beb7-57bb0e83ef05&quot;,&quot;parentUUID&quot;:&quot;e898b334-49cb-46f4-8c58-2cd0131fc273&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;save new labels from ui list&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests label crud  save new labels from ui list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let unsaved = [&#x27;label from test&#x27;]\nconst savedCount = await translationController.saveNewDefaultLabels(tenant, unsaved);\nexpect(savedCount).to.exist         \nexpect(savedCount).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5da812d4-0281-4741-b674-12f2db916327&quot;,&quot;parentUUID&quot;:&quot;e898b334-49cb-46f4-8c58-2cd0131fc273&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cb3bc883-b5fc-41c5-acc8-02b137ee7e20&quot;,&quot;c2ae7c54-ee91-45da-9a99-8b251cbaf6ff&quot;,&quot;a01898be-c344-4917-8f29-137d200ce5ef&quot;,&quot;39af4e7a-d9c3-43c7-88b3-390a8de8bad5&quot;,&quot;ab1e6b1f-44c7-4c90-beb7-57bb0e83ef05&quot;,&quot;5da812d4-0281-4741-b674-12f2db916327&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:18,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;911e6fff-ed77-448f-9835-8713eb21b21b&quot;,&quot;title&quot;:&quot;seed functions &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/translation.controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should seed languages&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests seed functions  should seed languages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  seeded = await translationController.seedLanguages(true) //true for isTest;\n\nexpect(seeded).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a3240ef1-15a7-408d-a894-21f45f0d445a&quot;,&quot;parentUUID&quot;:&quot;911e6fff-ed77-448f-9835-8713eb21b21b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should seed labels&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation controller tests seed functions  should seed labels&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const  seeded = await translationController.seedLabels(true) //true for isTest;\n\nexpect(seeded).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;60753b90-8efb-49cd-8340-43ddaaff6a8f&quot;,&quot;parentUUID&quot;:&quot;911e6fff-ed77-448f-9835-8713eb21b21b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a3240ef1-15a7-408d-a894-21f45f0d445a&quot;,&quot;60753b90-8efb-49cd-8340-43ddaaff6a8f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:24,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c9474fdb-6b3e-486c-a319-66d9eb83b7f5&quot;,&quot;title&quot;:&quot;Tenant API Translation handler tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/translation.handler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.handler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntestConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81cee41a-09f9-454a-ab43-b2d987aca9e7&quot;,&quot;parentUUID&quot;:&quot;c9474fdb-6b3e-486c-a319-66d9eb83b7f5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let deleted = await translationController.deleteLanguages(tenant, {languageName: &#x27;test&#x27;});\ndeleted = await translationController.deleteLabels(tenant, {defaultText: &#x27;label from test&#x27;});\nconsole.log(deleted);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd1b08f0-9698-4ed0-818d-ccda038230ca&quot;,&quot;parentUUID&quot;:&quot;c9474fdb-6b3e-486c-a319-66d9eb83b7f5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6a63042a-c54c-421a-8142-78b68e3bd6a6&quot;,&quot;title&quot;:&quot;language crud &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/translation.handler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.handler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  should create a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = languageObj;\nawait translationHandler.createLanguage(req, mockRes);\nlanguage = mockRes.body;\n_id = language._id.toString();\nexpect(_id).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01bedd2e-5fd9-4513-91e2-70c138423079&quot;,&quot;parentUUID&quot;:&quot;6a63042a-c54c-421a-8142-78b68e3bd6a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list languages&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  should list languages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n         const req = await mocks.req();\n         await translationHandler.listLanguages(req,mockRes);\n         const  languages = mockRes.body;\n         expect(languages.length).to.be.gt(0);  \n         let createdLanguage  = languages.find((d) =&gt; {\n             return d._id.toString() === _id;\n         })\n         expect(createdLanguage).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31daf103-119e-4f1d-a677-5e99cae8e47b&quot;,&quot;parentUUID&quot;:&quot;6a63042a-c54c-421a-8142-78b68e3bd6a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list tenant languages&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  should list tenant languages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n         const req = await mocks.req();\n         req.params.tenant = tenant\n         await translationHandler.listTenantLanguages(req,mockRes);\n         const  languages = mockRes.body;\n         expect(languages.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;036d1156-377b-45d3-bb6d-ccb317384ed4&quot;,&quot;parentUUID&quot;:&quot;6a63042a-c54c-421a-8142-78b68e3bd6a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  should get a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            const req = await mocks.req();\n            req.params.id = _id;\n            await translationHandler.getLanguage(req,mockRes);\n            language = mockRes.body;\n            expect(language).to.exist         \n            expect(language._id.toString()).to.equal(_id)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c0a910f-9f42-47e9-9525-43037fa03884&quot;,&quot;parentUUID&quot;:&quot;6a63042a-c54c-421a-8142-78b68e3bd6a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  should update a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = language;\nawait translationHandler.updateLanguage(req, mockRes);\nconst updatedLanguage = mockRes.body;\nexpect(updatedLanguage).to.exist         \nexpect(updatedLanguage._id.toString()).to.equal(_id)\nexpect(updatedLanguage.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7bc3e14c-2167-4368-a245-546764d73934&quot;,&quot;parentUUID&quot;:&quot;6a63042a-c54c-421a-8142-78b68e3bd6a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete a language&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests language crud  delete a language&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.id = _id;\nawait translationHandler.deleteLanguage(req,mockRes);\nconst  deleted = mockRes.body;\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;87bb1bbb-86d6-4792-acc7-d3ad04609706&quot;,&quot;parentUUID&quot;:&quot;6a63042a-c54c-421a-8142-78b68e3bd6a6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;01bedd2e-5fd9-4513-91e2-70c138423079&quot;,&quot;31daf103-119e-4f1d-a677-5e99cae8e47b&quot;,&quot;036d1156-377b-45d3-bb6d-ccb317384ed4&quot;,&quot;5c0a910f-9f42-47e9-9525-43037fa03884&quot;,&quot;7bc3e14c-2167-4368-a245-546764d73934&quot;,&quot;87bb1bbb-86d6-4792-acc7-d3ad04609706&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4b21dd50-6ae6-4550-96b5-c96a4e114ce5&quot;,&quot;title&quot;:&quot;label crud &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-tenant/test/integration/translation.handler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/translation.handler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  should create a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = labelObj;\nawait translationHandler.createLabel(req, mockRes);\nlabel = mockRes.body;\n_id = label._id.toString();\nexpect(_id).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2fe1cc43-951c-428f-b003-e18730e8bc79&quot;,&quot;parentUUID&quot;:&quot;4b21dd50-6ae6-4550-96b5-c96a4e114ce5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should list labels&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  should list labels&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n         const req = await mocks.req();\n         req.query.tenant = tenant\n         await translationHandler.listLabels(req,mockRes);\n         const  labels = mockRes.body;\n         expect(labels.length).to.be.gt(0);  \n         let createdLabel  = labels.find((d) =&gt; {\n             return d._id.toString() === _id;\n         })\n         expect(createdLabel).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71f965ff-2d23-4a0f-b7ec-38b90893a5f8&quot;,&quot;parentUUID&quot;:&quot;4b21dd50-6ae6-4550-96b5-c96a4e114ce5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  should get a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\n            const req = await mocks.req();\n            req.params.id = _id;\n            await translationHandler.getLabel(req,mockRes);\n            label = mockRes.body;\n            expect(label).to.exist         \n            expect(label._id.toString()).to.equal(_id)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1428c121-4366-4c8d-b891-fbde70b61ff5&quot;,&quot;parentUUID&quot;:&quot;4b21dd50-6ae6-4550-96b5-c96a4e114ce5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  should update a label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;label.translatedText = &#x27;test-updated&#x27;;\nlabel.modifiedBy = IntegrifySystemContactSid;\nconst mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = label;\nawait translationHandler.updateLabel(req, mockRes);\nconst updatedLabel = mockRes.body;   \nexpect(updatedLabel).to.exist         \nexpect(updatedLabel._id.toString()).to.equal(_id)\nexpect(updatedLabel.modifiedDate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5a0d268d-0d76-4453-a5e4-702c29c84db6&quot;,&quot;parentUUID&quot;:&quot;4b21dd50-6ae6-4550-96b5-c96a4e114ce5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete aa label&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  delete aa label&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.params.id = _id;\nawait translationHandler.deleteLabel(req,mockRes);\nconst  deleted = mockRes.body;\nexpect(deleted).to.exist         \nexpect(deleted.deletedCount).to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;422b874a-e368-4f9d-bba7-012d6dcf1fc2&quot;,&quot;parentUUID&quot;:&quot;4b21dd50-6ae6-4550-96b5-c96a4e114ce5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;delete labels&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  delete labels&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let results = await translationController.listLabels(tenant,{_id})\n            let labelIds= results.map((i) =&gt; {\n                return i._id;\n            })\n\t\t\tconst mockRes = await mocks.mockResponse();\n            let req = await mocks.req()\n            req.body = labelIds;\n            await translationHandler.deleteLabels(req,mockRes);\n\t\t\tconst  deleted = mockRes.body;\n            expect(deleted).to.exist         \n            expect(deleted.deletedCount).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce537b0b-c4da-4d58-9085-a4e0bdb492da&quot;,&quot;parentUUID&quot;:&quot;4b21dd50-6ae6-4550-96b5-c96a4e114ce5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;save new labels from ui list&quot;,&quot;fullTitle&quot;:&quot;Tenant API Translation handler tests label crud  save new labels from ui list&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let unsaved = [&#x27;label from test&#x27;]\nconst mockRes = await mocks.mockResponse();\nlet req = await mocks.req()\nreq.body = unsaved;\nawait translationHandler.saveNewDefaultLabels(req,mockRes);\nconst result = mockRes.body;\nexpect(result).to.exist         \nexpect(result.saved).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4bcbe371-b38f-4775-a7b8-27a43cd7fdff&quot;,&quot;parentUUID&quot;:&quot;4b21dd50-6ae6-4550-96b5-c96a4e114ce5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2fe1cc43-951c-428f-b003-e18730e8bc79&quot;,&quot;71f965ff-2d23-4a0f-b7ec-38b90893a5f8&quot;,&quot;1428c121-4366-4c8d-b891-fbde70b61ff5&quot;,&quot;5a0d268d-0d76-4453-a5e4-702c29c84db6&quot;,&quot;422b874a-e368-4f9d-bba7-012d6dcf1fc2&quot;,&quot;ce537b0b-c4da-4d58-9085-a4e0bdb492da&quot;,&quot;4bcbe371-b38f-4775-a7b8-27a43cd7fdff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:21,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;26363e62-001c-47f6-84a0-2ad7e46cdd6a&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d982afa7-b8cd-4fb2-9e69-6cfd349f1f91&quot;,&quot;title&quot;:&quot;api-user Group Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:266,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\nsession = { tenant: config.tenantOne.tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase() }; // system level\ntenantId = config.tenantOne.tenantId;\nfor (i = 1; i &lt;= 10; i++) {\n  const groupController = new GroupController(session);\n  const result = await groupController.addGroup({ groupName: `Test Automation Group ${i}` });\n  testGroups.push(result);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;43a088a5-3b0b-41f7-9064-29f8a09ac8ed&quot;,&quot;parentUUID&quot;:&quot;d982afa7-b8cd-4fb2-9e69-6cfd349f1f91&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:48,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// clean up our test data\nconst Group = await models.getModel(config.tenantOne.tenantId, &#x27;Group&#x27;);\nconst ContactGroup = await models.getModel(config.tenantOne.tenantId, &#x27;ContactGroup&#x27;);\nawait Promise.all(testGroups.map(async (group) =&gt; {\n  await Group.query().hardDelete(group);\n  await ContactGroup.query()\n    .where(&#x27;groupGuid&#x27;, group.groupGuid)\n    .delete();\n}));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2f33bd87-ae6a-46a5-ae9c-897332c7f006&quot;,&quot;parentUUID&quot;:&quot;d982afa7-b8cd-4fb2-9e69-6cfd349f1f91&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;a215cacb-9fcb-4227-ad9d-193f79b2f0bc&quot;,&quot;title&quot;:&quot;get tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;retrieves a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests get tests retrieves a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Group = await models.getModel(config.tenantOne.tenantId, &#x27;Group&#x27;);\nconst groups = await Group.query().where(&#x27;group_name&#x27;, &#x27;=&#x27;, &#x27;Administrators&#x27;);\nexpect(groups.length).to.equal(1);\nadminGroupGuid = groups[0].groupGuid;\nconst groupController = new GroupController(config.tenantOne);\nconst adminGroup = await groupController.getGroup(adminGroupGuid);\nexpect(adminGroup).to.exist;\nexpect(adminGroup.groupName).to.equal(&#x27;Administrators&#x27;);\nexpect(adminGroup.groupDesc).to.equal(&#x27;System administrators&#x27;);\nexpect(adminGroup.groupSql).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7e3f5a9-e7b0-40f1-bccf-662edbeb9552&quot;,&quot;parentUUID&quot;:&quot;a215cacb-9fcb-4227-ad9d-193f79b2f0bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retrieves all groups by default&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests get tests retrieves all groups by default&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Group = await models.getModel(config.tenantOne.tenantId, &#x27;Group&#x27;);\nconst groupController = new GroupController(config.tenantOne);\nconst response = await groupController.getGroups();\nconst groups = response.results;\nexpect(groups.length).to.be.above(10);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;088a846e-4c18-4d2d-bc89-395267651a5c&quot;,&quot;parentUUID&quot;:&quot;a215cacb-9fcb-4227-ad9d-193f79b2f0bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retrieves filtered list of groups&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests get tests retrieves filtered list of groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Group = await models.getModel(config.tenantOne.tenantId, &#x27;Group&#x27;);\nconst groupController = new GroupController(config.tenantOne);\nconst response = await groupController.getGroups({ search: &#x27;Test Automation Group&#x27;, count: 4 });\nconst groups = response.results;\nexpect(groups.length).to.equal(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;45a46f24-ad17-4418-b255-6b5ce5d88868&quot;,&quot;parentUUID&quot;:&quot;a215cacb-9fcb-4227-ad9d-193f79b2f0bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retrieves all possible members for adding to groups&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests get tests retrieves all possible members for adding to groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const Group = await models.getModel(config.tenantOne.tenantId, &#x27;Group&#x27;);\nconst groupController = new GroupController(config.tenantOne);\nconst group = testGroups[9];\nconst response = await groupController.getNonMembers(group.groupGuid);\nconst results = response.results;\nexpect(results.length).to.be.equal(response.total);\n// empty group, so test a sampling of accounts that should be non-members\nexpect(results).to.include.deep({ memberGuid: \&quot;A03BDD24-A0BA-4071-9A5B-2833C865EC3D\&quot;,\n                                  memberId: 1,\n                                  memberName: \&quot;Administrators\&quot;,\n                                  memberType: \&quot;Group\&quot;\n                                })\nexpect(results).to.include.deep({ memberGuid: testGroups[8].groupGuid.toUpperCase(),\n                                  memberId: testGroups[8].groupId,\n                                  memberName: testGroups[8].groupName,\n                                  memberType: \&quot;Group\&quot;\n                                })\nexpect(results).to.include.deep({ memberGuid: &#x27;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF&#x27;,\n                                  memberId: 1,\n                                  memberName: &#x27;System System&#x27;,\n                                  memberType: &#x27;User&#x27;\n                                })\n// two system accounts that should not be returned, plus the group itself\nexpect(results).to.not.include.deep({ memberGuid: &#x27;D8C469C3-F781-4179-A09C-6D148885FB30&#x27;,\n                                               memberId: 92,\n                                               memberName: \&quot;Integrify System\&quot;,\n                                               memberType: \&quot;User\&quot;\n                                             })\nexpect(results).to.not.include.deep({ memberGuid: &#x27;64EC8FC9-B426-4376-A1A4-3AD16F0F9906&#x27;,\n                                               memberId: 96,\n                                               memberName: \&quot;Guest Account\&quot;,\n                                               memberType: \&quot;User\&quot;\n                                             })\nexpect(results).to.not.include.deep({ memberGuid: testGroups[9].groupGuid.toUpperCase(),\n                                           memberId: testGroups[9].groupId,\n                                           memberName: testGroups[9].groupName,\n                                           memberType: \&quot;Group\&quot;\n                                         })&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8580ccc7-a2f7-42c0-9e4d-dcc5b470e707&quot;,&quot;parentUUID&quot;:&quot;a215cacb-9fcb-4227-ad9d-193f79b2f0bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e7e3f5a9-e7b0-40f1-bccf-662edbeb9552&quot;,&quot;088a846e-4c18-4d2d-bc89-395267651a5c&quot;,&quot;45a46f24-ad17-4418-b255-6b5ce5d88868&quot;,&quot;8580ccc7-a2f7-42c0-9e4d-dcc5b470e707&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:46,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;8c8c3f36-def8-4fa6-93fe-3b14da068723&quot;,&quot;title&quot;:&quot;insert tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;inserts a non-dynamic group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests inserts a non-dynamic group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;Test Group (simple)&#x27;;\nconst groupDesc = &#x27;Simple test group&#x27;;\nconst groupData = {\n  groupName,\n  groupDesc,\n};\nconst groupController = new GroupController(session);\nconst result = await groupController.addGroup(groupData);\nexpect(result.groupName).to.equal(groupName);\nexpect(result.groupDesc).to.equal(groupDesc);\nexpect(result.dynamic).to.equal(&#x27;No&#x27;); // ensure defaulting to \&quot;No\&quot; rather than null\nexpect(result.createdBy).to.equal(session.user_sid);\ntestGroups.push(result); // for cleanup at end&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c89be52-d228-4f15-a2e3-d2e5d5b85226&quot;,&quot;parentUUID&quot;:&quot;8c8c3f36-def8-4fa6-93fe-3b14da068723&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;inserts a dynamic group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests inserts a dynamic group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;Test Group (simple)&#x27;;\nconst groupDesc = &#x27;Simple test group&#x27;;\nconst groupData = {\n  groupName,\n  groupDesc,\n  dynamic: &#x27;Yes&#x27;,\n  groupSql: \&quot;first_name = &#x27;Admin&#x27;\&quot;,\n};\nconst groupController = new GroupController(session);\nconst result = await groupController.addGroup(groupData);\nexpect(result.groupName).to.equal(groupName);\nexpect(result.groupDesc).to.equal(groupDesc);\nexpect(result.createdBy).to.equal(session.user_sid);\ntestGroups.push(result); // for cleanup at end&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;497a7375-eeba-4ad3-8386-6c7a322dc755&quot;,&quot;parentUUID&quot;:&quot;8c8c3f36-def8-4fa6-93fe-3b14da068723&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects a dynamic group with bad SQL&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests rejects a dynamic group with bad SQL&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;Test Group (simple)&#x27;;\nconst groupDesc = &#x27;Simple test group&#x27;;\nconst groupData = {\n  groupName,\n  groupDesc,\n  dynamic: &#x27;Yes&#x27;,\n  groupSql: \&quot;bad_column_name = &#x27;Admin&#x27;\&quot;,\n};\nconst groupController = new GroupController(session);\nawait expect(groupController.addGroup(groupData)).to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;23ddfa0d-6e60-4a0e-bdc0-160d130e0c4a&quot;,&quot;parentUUID&quot;:&quot;8c8c3f36-def8-4fa6-93fe-3b14da068723&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects a group with no name&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests rejects a group with no name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nawait expect(groupController.addGroup({ groupDesc: &#x27;Test Group&#x27; })).to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0581b97d-cb28-482e-9c0b-6d9995038f70&quot;,&quot;parentUUID&quot;:&quot;8c8c3f36-def8-4fa6-93fe-3b14da068723&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects a dynamic group with no SQL&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests insert tests rejects a dynamic group with no SQL&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupData = {\n  groupName: &#x27;Dynamic Test Group&#x27;,\n  dynamic: &#x27;Yes&#x27;,\n};\nconst groupController = new GroupController(session);\nawait expect(groupController.addGroup(groupData)).to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;79eb8c70-597d-46ce-8cf4-ee07c1c2d18f&quot;,&quot;parentUUID&quot;:&quot;8c8c3f36-def8-4fa6-93fe-3b14da068723&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2c89be52-d228-4f15-a2e3-d2e5d5b85226&quot;,&quot;497a7375-eeba-4ad3-8386-6c7a322dc755&quot;,&quot;23ddfa0d-6e60-4a0e-bdc0-160d130e0c4a&quot;,&quot;0581b97d-cb28-482e-9c0b-6d9995038f70&quot;,&quot;79eb8c70-597d-46ce-8cf4-ee07c1c2d18f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:34,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;9edbce31-7a94-469e-a1cf-753f5647bc97&quot;,&quot;title&quot;:&quot;update tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests update tests updates a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[0];\nconst result = await groupController.updateGroup({\n  groupGuid: group.groupGuid,\n  groupName: &#x27;Updated Test Automation Group&#x27;,\n  dynamic: &#x27;Yes&#x27;,\n  groupSql: \&quot;first_name = &#x27;Admin&#x27;\&quot;,\n});\nexpect(result.groupName).to.equal(&#x27;Updated Test Automation Group&#x27;);\nexpect(result.dynamic).to.equal(&#x27;Yes&#x27;);\nexpect(result.groupSql).to.equal(\&quot;first_name = &#x27;Admin&#x27;\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;70b8edeb-1021-4dd4-acd1-00c7f66b38c7&quot;,&quot;parentUUID&quot;:&quot;9edbce31-7a94-469e-a1cf-753f5647bc97&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects an update with no group name&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests update tests rejects an update with no group name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[0];\nawait expect(groupController\n  .updateGroup({\n    groupGuid: group.groupGuid,\n    groupName: &#x27;&#x27;,\n  }))\n  .to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71d3290d-f592-4bad-b6d2-850d9595cdc1&quot;,&quot;parentUUID&quot;:&quot;9edbce31-7a94-469e-a1cf-753f5647bc97&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects an update for dynamic without sql&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests update tests rejects an update for dynamic without sql&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[0];\nawait expect(groupController\n  .updateGroup({\n    groupGuid: group.groupGuid,\n    groupName: &#x27;Validation test&#x27;,\n    dynamic: &#x27;Yes&#x27;,\n    groupSql: &#x27;&#x27;,\n  }))\n  .to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dde01539-ab42-40a7-83e3-d2298f12de37&quot;,&quot;parentUUID&quot;:&quot;9edbce31-7a94-469e-a1cf-753f5647bc97&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;rejects an update for dynamic other than Yes/No&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests update tests rejects an update for dynamic other than Yes/No&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[0];\nawait expect(groupController\n  .updateGroup({\n    groupGuid: group.groupGuid,\n    groupName: &#x27;Validation test&#x27;,\n    dynamic: true,\n    groupSql: \&quot;name = &#x27;Admin&#x27;\&quot;,\n  }))\n  .to.be.rejectedWith(Error);\nawait expect(groupController\n  .updateGroup({\n    groupGuid: group.groupGuid,\n    groupName: &#x27;Validation test&#x27;,\n    dynamic: &#x27;yes&#x27;,\n    groupSql: \&quot;name = &#x27;Admin&#x27;\&quot;,\n  }))\n  .to.be.rejectedWith(Error);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;884daebb-0eeb-45fb-8af7-1941dfff0041&quot;,&quot;parentUUID&quot;:&quot;9edbce31-7a94-469e-a1cf-753f5647bc97&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;70b8edeb-1021-4dd4-acd1-00c7f66b38c7&quot;,&quot;71d3290d-f592-4bad-b6d2-850d9595cdc1&quot;,&quot;dde01539-ab42-40a7-83e3-d2298f12de37&quot;,&quot;884daebb-0eeb-45fb-8af7-1941dfff0041&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;e87a967f-70ac-4426-9e44-e90f9e3013ab&quot;,&quot;title&quot;:&quot;delete tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;soft deletes a list of groups&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests delete tests soft deletes a list of groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:34,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst timeBeforeDelete = Date.now();\nconst firstGroup = testGroups[0];\nconst response = await groupController.deleteGroups(testGroups.slice(0, 5).map((group) =&gt; group.groupGuid));\nexpect(response).to.eql([1, 1, 1, 1, 1]);\nconst deletedGroup = groupController.getGroup(firstGroup.groupGuid);\nexpect(deletedGroup).to.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a74d0e07-f908-4a40-8a24-7f2f2bfe03c7&quot;,&quot;parentUUID&quot;:&quot;e87a967f-70ac-4426-9e44-e90f9e3013ab&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a74d0e07-f908-4a40-8a24-7f2f2bfe03c7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:34,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;ab4a49fe-d0bc-4077-9d7a-1dabf639e3e6&quot;,&quot;title&quot;:&quot;membership test&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;adds a user to a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test adds a user to a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[9]; // 0-4 get deleted in a previous test\nres = await groupController.getMembers(group.groupGuid);\nexpect(res.results.length).to.equal(0); // make sure group starts empty\nlet result = await groupController.addMembersToGroup({\n  groupGuid: group.groupGuid,\n  members: [{\n    memberGuid: session.user_sid,\n    memberType: &#x27;User&#x27;,\n  },\n  ],\n});\nexpect(result).to.not.be.undefined;\nres = await groupController.getMembers(group.groupGuid);\nresult = res.results;\nexpect(result.length).to.equal(1);\nexpect(result[0].memberGuid.toLowerCase()).to.equal(session.user_sid);\nexpect(result[0].groupGuid.toLowerCase()).to.equal(group.groupGuid);\nexpect(result[0].memberType).to.equal(&#x27;User&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e91de836-baca-4627-bec5-f96721898453&quot;,&quot;parentUUID&quot;:&quot;ab4a49fe-d0bc-4077-9d7a-1dabf639e3e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;removes members from a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test removes members from a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst group = testGroups[9];\nres = await groupController.getMembers(group.groupGuid);\nexpect(res.results.length).to.equal(1); // should have 1 member from preceding addUser test\nlet result = await groupController.removeMembersFromGroup({\n  groupGuid: group.groupGuid,\n  members: [session.user_sid],\n});\nexpect(result).to.equal(1);\nres = await groupController.getMembers(group.groupGuid);\nresult = res.results;\nexpect(result.length).to.equal(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b82b5ff3-10d6-456a-9a05-944ca74c2103&quot;,&quot;parentUUID&quot;:&quot;ab4a49fe-d0bc-4077-9d7a-1dabf639e3e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;lists members of a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test lists members of a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst usersGroupGuid = &#x27;eab8a4c9-6903-40bc-a2ee-cf254a408d6f&#x27;;\nconst res = await groupController.getMembers(usersGroupGuid);\nexpect(res.results.length).to.be.at.least(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6cb253d9-45ee-4531-9640-4dbc56e7e9ab&quot;,&quot;parentUUID&quot;:&quot;ab4a49fe-d0bc-4077-9d7a-1dabf639e3e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;filters members of a group based on search string&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test filters members of a group based on search string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst usersGroupGuid = &#x27;eab8a4c9-6903-40bc-a2ee-cf254a408d6f&#x27;;\nconst res = await groupController.getMembers(usersGroupGuid, { search: &#x27;no-reply@integrify.com&#x27; });\nexpect(res.results.length).to.equal(2);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8a222003-07fe-4398-9a81-e37adb676bdc&quot;,&quot;parentUUID&quot;:&quot;ab4a49fe-d0bc-4077-9d7a-1dabf639e3e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits result members of a group based start/count&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits result members of a group based start/count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst usersGroupGuid = &#x27;eab8a4c9-6903-40bc-a2ee-cf254a408d6f&#x27;;\nlet res = await groupController.getMembers(usersGroupGuid);\nconst groupSize = res.results.length;\nexpect(groupSize).to.equal(res.total);\nres = await groupController.getMembers(usersGroupGuid, { count: 1 });\nexpect(res.results.length).to.equal(1);\nexpect(res.total).to.equal(groupSize);\nres = await groupController.getMembers(usersGroupGuid, { start: 1 });\nexpect(res.results.length).to.equal(groupSize - 1);\nexpect(res.total).to.equal(groupSize);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;14bb652d-8323-48e2-9b95-88e4061e5a51&quot;,&quot;parentUUID&quot;:&quot;ab4a49fe-d0bc-4077-9d7a-1dabf639e3e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits nonmembers to users only&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits nonmembers to users only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst adminGroupGuid = &#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;;\nconst res = await groupController.getNonMembers(adminGroupGuid, { users: &#x27;true&#x27;, groups: &#x27;false&#x27; });\nres.results.forEach((groupMember) =&gt; expect(groupMember.memberType).to.equal(&#x27;User&#x27;));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f16c3e9f-3d5a-4950-a112-f4f63827ed45&quot;,&quot;parentUUID&quot;:&quot;ab4a49fe-d0bc-4077-9d7a-1dabf639e3e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits nonmembers to groups only&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits nonmembers to groups only&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst adminGroupGuid = &#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;;\nconst res = await groupController.getNonMembers(adminGroupGuid, { users: &#x27;false&#x27;, groups: &#x27;true&#x27; });\nres.results.forEach((groupMember) =&gt; expect(groupMember.memberType).to.equal(&#x27;Group&#x27;));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6cf3e10-1e6a-42d0-ae13-7c4117838d0f&quot;,&quot;parentUUID&quot;:&quot;ab4a49fe-d0bc-4077-9d7a-1dabf639e3e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;retrieves groups a user belongs to&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test retrieves groups a user belongs to&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst userGuid = &#x27;4e99e0dd-b3b3-4d5d-826d-3d5ae62a16cf&#x27;;\nconst res = await groupController.getUserGroups(userGuid);\nexpect(res.results.find((result) =&gt; result.groupName == &#x27;Administrators&#x27;)).to.not.be.undefined;\nexpect(res.results.find((result) =&gt; result.groupDesc == &#x27;All users&#x27;)).to.not.be.undefined;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1fdb577-0ef3-427a-900a-221f67e866ff&quot;,&quot;parentUUID&quot;:&quot;ab4a49fe-d0bc-4077-9d7a-1dabf639e3e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits resulting nonmembers based on start/count&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits resulting nonmembers based on start/count&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const group = testGroups[9];\nconst groupController = new GroupController(session);\nlet res = await groupController.getNonMembers(group.groupGuid);\nconst availableSize = res.results.length;\nexpect(availableSize).to.equal(res.total);\nres = await groupController.getNonMembers(group.groupGuid, { count: 1 });\nexpect(res.results.length).to.equal(1);\nexpect(res.total).to.equal(availableSize);\nres = await groupController.getNonMembers(group.groupGuid, { start: 0, count: 5 });\nexpect(res.results.length).to.equal(5);\nexpect(res.total).to.equal(availableSize);\nres = await groupController.getNonMembers(group.groupGuid, { start: 1, count: 5 });\nexpect(res.results.length).to.equal(5);\nexpect(res.total).to.equal(availableSize);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09a0d218-2ce6-4530-a28f-69af076c7dbd&quot;,&quot;parentUUID&quot;:&quot;ab4a49fe-d0bc-4077-9d7a-1dabf639e3e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;limits resulting nonmembers based on search string&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test limits resulting nonmembers based on search string&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const group = testGroups[9];\nconst groupController = new GroupController(session);\nlet res = await groupController.getNonMembers(group.groupGuid);\nconst availableSize = res.results.length;\nexpect(availableSize).to.equal(res.total);\nres = await groupController.getNonMembers(group.groupGuid, { search: &#x27;System&#x27; });\nconst { results } = res;\nexpect(results).to.eql([{\n  memberGuid: &#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;,\n  memberName: &#x27;Administrators&#x27;,\n  memberType: &#x27;Group&#x27;,\n  memberId: 1,\n},\n{\n  memberGuid: &#x27;4E99E0DD-B3B3-4D5D-826D-3D5AE62A16CF&#x27;,\n  memberId: 1,\n  memberName: &#x27;System System&#x27;,\n  memberType: &#x27;User&#x27;,\n},\n]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0b70c901-1c91-4c4e-a694-fd4d62adfd57&quot;,&quot;parentUUID&quot;:&quot;ab4a49fe-d0bc-4077-9d7a-1dabf639e3e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;lists members of a dynamic group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test lists members of a dynamic group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst allUsersGroupGuid = &#x27;eab8a4c9-6903-40bc-a2ee-cf254a408d6f&#x27;;\nconst result = await groupController.getMembers(allUsersGroupGuid);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e5ebdc30-109d-4d20-babb-e41002f30564&quot;,&quot;parentUUID&quot;:&quot;ab4a49fe-d0bc-4077-9d7a-1dabf639e3e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;lists all members of a group containing groups&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests membership test lists all members of a group containing groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e98e2681-a053-41ba-80dd-bf9c13fb8a09&quot;,&quot;parentUUID&quot;:&quot;ab4a49fe-d0bc-4077-9d7a-1dabf639e3e6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e91de836-baca-4627-bec5-f96721898453&quot;,&quot;b82b5ff3-10d6-456a-9a05-944ca74c2103&quot;,&quot;6cb253d9-45ee-4531-9640-4dbc56e7e9ab&quot;,&quot;8a222003-07fe-4398-9a81-e37adb676bdc&quot;,&quot;14bb652d-8323-48e2-9b95-88e4061e5a51&quot;,&quot;f16c3e9f-3d5a-4950-a112-f4f63827ed45&quot;,&quot;f6cf3e10-1e6a-42d0-ae13-7c4117838d0f&quot;,&quot;a1fdb577-0ef3-427a-900a-221f67e866ff&quot;,&quot;09a0d218-2ce6-4530-a28f-69af076c7dbd&quot;,&quot;0b70c901-1c91-4c4e-a694-fd4d62adfd57&quot;,&quot;e5ebdc30-109d-4d20-babb-e41002f30564&quot;,&quot;e98e2681-a053-41ba-80dd-bf9c13fb8a09&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:135,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;c4f908b5-37e8-485c-bcbd-85360120c304&quot;,&quot;title&quot;:&quot;association tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-user/test/db/groupController.test.js&quot;,&quot;file&quot;:&quot;/test/db/groupController.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;list processes associated to a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests association tests list processes associated to a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst res = await groupController.getProcessAssociations(&#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;);\nexpect(res.length).to.equal(47);\n// should not include categoryLevel by default\nexpect(res[0]).to.have.keys(&#x27;processGuid&#x27;, &#x27;processName&#x27;, &#x27;processVersion&#x27;, &#x27;taskName&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;523184b9-fc89-47a1-b2ff-158f20bc0049&quot;,&quot;parentUUID&quot;:&quot;c4f908b5-37e8-485c-bcbd-85360120c304&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;list processes associated to a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests association tests list processes associated to a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:57,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst res = await groupController.getProcessAssociations(&#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;, { include: [&#x27;category&#x27;] });\nexpect(res[0]).to.have.keys(&#x27;processGuid&#x27;, &#x27;processName&#x27;, &#x27;processVersion&#x27;, &#x27;taskName&#x27;, &#x27;categoryLevel&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e7b1dfdb-0977-4e72-8d3e-fb636a546e53&quot;,&quot;parentUUID&quot;:&quot;c4f908b5-37e8-485c-bcbd-85360120c304&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;list roles associated to a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Controller Tests association tests list roles associated to a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupController = new GroupController(session);\nconst res = await groupController.getRoleAssociations(&#x27;A03BDD24-A0BA-4071-9A5B-2833C865EC3D&#x27;);\nexpect(res.length).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d9009dc9-df2f-4da4-a1f6-f11e0d686daa&quot;,&quot;parentUUID&quot;:&quot;c4f908b5-37e8-485c-bcbd-85360120c304&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;523184b9-fc89-47a1-b2ff-158f20bc0049&quot;,&quot;e7b1dfdb-0977-4e72-8d3e-fb636a546e53&quot;,&quot;d9009dc9-df2f-4da4-a1f6-f11e0d686daa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:64,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;c9097afc-5c39-4faa-8e6d-02a968bafcd7&quot;,&quot;title&quot;:&quot;api-user User Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-user/test/db/userController.test.js&quot;,&quot;file&quot;:&quot;/test/db/userController.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1101,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await testLib.getTestConfig();\ntenantId = config.tenantOne.tenantId;\nsession = {tenant: tenantId, user_sid: config.tenantOne.adminUser.sid.toLowerCase()};\nUser = await models.getModel(tenantId, &#x27;User&#x27;);\nMetadataValue = await models.getModel(tenantId, &#x27;MetadataValue&#x27;);\nUserAuth = await models.getModel(tenantId, &#x27;UserAuth&#x27;);\n// add user\nuserCtrl = new UserController(session);\nfor (let i=1; i&lt;=limit; i++) {\n  const user = {\n    firstName: &#x27;test first name&#x27; + i,\n    lastName: &#x27;last&#x27; + i,\n    userName: &#x27;test_username&#x27; + i,\n    email: `test${i}@test.test${i}`,\n    locale: &#x27;en-US&#x27;,\n    languageGuid: &#x27;2a803d80-de6d-4adc-a642-4e3d831f5460&#x27;, // US English\n    password: testPwd,\n    confirmPassword: testPwd,\n    title: &#x27;title&#x27; + i\n  };\n  const dbUser = await userCtrl.insertUser(user)\n  testUsers.push(dbUser);\n}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f52cc39-9c9d-4414-9807-8162c4d6259b&quot;,&quot;parentUUID&quot;:&quot;c9097afc-5c39-4faa-8e6d-02a968bafcd7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:30,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await Promise.all( testUsers.map( async (user) =&gt; {\n  return UserAuth.query().deleteById(user.contactGuid);\n}));\nawait User.query().delete().where(&#x27;firstName&#x27;, &#x27;like&#x27;, &#x27;test first%&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed6be142-a3b4-4a0c-943c-13832abb1ef9&quot;,&quot;parentUUID&quot;:&quot;c9097afc-5c39-4faa-8e6d-02a968bafcd7&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should retrieves users&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should retrieves users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:39,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const User = await models.getModel(tenantId, &#x27;User&#x27;);\nconst UserAuth = await models.getModel(tenantId, &#x27;UserAuth&#x27;);\nconst users = await User.query()\n  .orderBy(&#x27;createdDate&#x27;, &#x27;desc&#x27;)\n  .limit(limit);\nawait Promise.all(users.map(async user =&gt; {\n  const result = await userCtrl.getUser(user.contactGuid);\n  const {userName, managerGuid, ...userToCompare1} = result;\n  user.languageGuid = user.languageGuid.toLowerCase() // &#x27;user&#x27; from Database query has \&quot;upper case\&quot; language guid - but userToCompare1 from API should be in lower case\n  user.contactGuid = user.contactGuid.toLowerCase()\n  user.createdBy = user.createdBy.toLowerCase()\n  expect(userToCompare1).to.deep.eq(user);\n  // compare testUser to user\n  const testUser = testUsers.find(u =&gt; u.contactGuid === user.contactGuid);\n  [&#x27;firstName&#x27;, &#x27;lastName&#x27;, &#x27;email&#x27;, &#x27;locale&#x27;, &#x27;languageGuid&#x27;, &#x27;contactId&#x27;, &#x27;title&#x27;].forEach(p =&gt; {\n    expect(testUser[p]).to.eq(user[p]);\n  });\n  // check userNames\n  const userAuth = await UserAuth.query()\n    .findById(user.contactGuid);\n  expect(userAuth).to.exist;\n  expect(userAuth.userName).to.eq(testUser.userName);\n}));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;495373ef-9892-4657-be94-fa0646e81f8a&quot;,&quot;parentUUID&quot;:&quot;c9097afc-5c39-4faa-8e6d-02a968bafcd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should search in users&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should search in users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:42,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testUser = testUsers[0];\n// search by id\nlet result = await userCtrl.getUsers({search: testUser.contactId});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.eq(1);\n// search by username\nresult = await userCtrl.getUsers({search: testUser.userName});\nexpect(result.results.length).to.be.gt(0);\nlet found = result.results.find(u =&gt; u.userName = testUser.userName);\nexpect(found).to.exist;\n// search by first &amp; last names\nresult = await userCtrl.getUsers({search: testUser.firstName.slice(0, -2)});\nexpect(result.results.length).to.be.gt(0);\nfound = result.results.find(u =&gt; u.first === testUser.first);\nexpect(found).to.exist;\nresult = await userCtrl.getUsers({search: testUser.lastName.slice(0, -1)});\nexpect(result.results.length).to.be.gt(0);\nfound = result.results.find(u =&gt; u.lastName === testUser.lastName);\nexpect(found).to.exist;\n// search by email\nresult = await userCtrl.getUsers({search: testUser.email.slice(-10)});\nexpect(result.results.length).to.be.gt(0);\nfound = result.results.find(u =&gt; u.email === testUser.email);\nexpect(found).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5653af17-e567-49d3-b152-96e991aa41e0&quot;,&quot;parentUUID&quot;:&quot;c9097afc-5c39-4faa-8e6d-02a968bafcd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should limit results&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should limit results&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const result = await userCtrl.getUsers({count: 4});\nexpect(result.results.length).to.eq(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cea1ecf8-ac15-4457-b524-81295284f2f7&quot;,&quot;parentUUID&quot;:&quot;c9097afc-5c39-4faa-8e6d-02a968bafcd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should retrieve filtered users &quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should retrieve filtered users &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testUser = testUsers[0];\nconst user = await userCtrl.getUser(testUser.contactGuid);\nconst filters = [\n  {\n    field: &#x27;lastName&#x27;,\n    data: {comparison: &#x27;eq&#x27;, type: &#x27;string&#x27;, value: user.lastName,}\n  },\n  {\n    field: &#x27;firstName&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.firstName}\n  },\n  {\n    field: &#x27;userName&#x27;,\n    data: {comparison: &#x27;eq&#x27;, value: user.userName}\n  },\n  {\n    field: &#x27;email&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.email}\n  },\n  {\n    field: &#x27;title&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.title}\n  },\n  {\n    field: &#x27;constCenter&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.constCenter}\n  },\n  {\n    field: &#x27;country&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.country}\n  },\n  {\n    field: &#x27;department&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.department}\n  },\n  {\n    field: &#x27;managerName&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.managerName}\n  },\n  {\n    field: &#x27;managerGuid&#x27;,\n    data: {comparison: &#x27;contains&#x27;, value: user.managerGuid}\n  },\n];\nconst result = await userCtrl.getUsers({filters});\nexpect(result.results).to.exist;\nexpect(result.results.length).to.be.gt(0);\nconst found = result.results.find(u =&gt; u.contactGuid === testUser.contactGuid);\nexpect(found).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3e03f480-01a7-4269-b986-80de1d07264d&quot;,&quot;parentUUID&quot;:&quot;c9097afc-5c39-4faa-8e6d-02a968bafcd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a list of managers&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should get a list of managers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const exceptGuid = testUsers[0].contactGuid;\nconst managers = await userCtrl.getManagers({exceptGuid});\nmanagers.forEach(manager =&gt; {\n  expect(manager.contactGuid).to.not.eq(exceptGuid);\n});\ntestUsers.filter(u =&gt; u.contactGuid !== exceptGuid).forEach(u =&gt; {\n  const manager = managers.find(m =&gt; m.contactGuid === u.contactGuid);\n  const {contactGuid, firstName, lastName, email, title} = u;\n  const testUser = {contactGuid, firstName, lastName, email, title};\n  expect(manager).to.deep.eq(testUser);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;494bfdf6-0e6d-4c46-8fa6-b9f2efbe1660&quot;,&quot;parentUUID&quot;:&quot;c9097afc-5c39-4faa-8e6d-02a968bafcd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a single user&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should get a single user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testUser = testUsers[3];\nconst user = await userCtrl.getUser(testUser.contactGuid);\nexpect(user).to.exist;\n[&#x27;contactGuid&#x27;, &#x27;contactId&#x27;, &#x27;firstName&#x27;, &#x27;lastName&#x27;, &#x27;userName&#x27;, &#x27;email&#x27;, &#x27;locale&#x27;, &#x27;languageGuid&#x27;, &#x27;title&#x27;].forEach(p =&gt; {\n  expect(user[p]).to.eq(testUser[p]);\n});\n[&#x27;middleName&#x27;, &#x27;phone&#x27;, &#x27;address1&#x27;, &#x27;address2&#x27;, &#x27;city&#x27;, &#x27;state&#x27;, &#x27;zip&#x27;, &#x27;country&#x27;,\n  &#x27;department&#x27;, &#x27;costCenter&#x27;, &#x27;division&#x27;, &#x27;managerGuid&#x27;, &#x27;cField1&#x27;, &#x27;cField2&#x27;].forEach(p =&gt; {\n  expect(!!user[p] || user[p] === null || user[p] === &#x27;&#x27;).to.eq(true);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ffcf225c-4152-4994-8923-f604a4e5fb03&quot;,&quot;parentUUID&quot;:&quot;c9097afc-5c39-4faa-8e6d-02a968bafcd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update and get delegate&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should update and get delegate&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// insert delegate\nconst testDelegate = {\n  contactGuid: testUsers[3].contactGuid,\n  processes: [{id: &#x27;a6714779-4bde-4000-8361-ad37c838d440&#x27;}, {id: &#x27;3545404d-6fff-4ed5-ba9a-1100ce38d421&#x27;}, {id: &#x27;cfc36de0-a71b-451f-817a-2092c3c247ca&#x27;}],\n  startDate: &#x27;2021-01-14&#x27;,\n  startTime: &#x27;06:00&#x27;,\n  endDate: &#x27;2021-01-15&#x27;,\n  endTime: &#x27;17:35&#x27;,\n};\nawait userCtrl.updateDelegate(testUsers[3].contactGuid, testDelegate);\n// get delegate\nlet delegate = await userCtrl.getDelegate(testDelegate.contactGuid);\n[&#x27;contactGuid&#x27;, &#x27;startDate&#x27;, &#x27;startTime&#x27;, &#x27;endDate&#x27;, &#x27;endTime&#x27;].forEach(p =&gt; {\n  expect(delegate[p]).to.exist;\n  expect(delegate[p]).to.eq(testDelegate[p]);\n})\nexpect(delegate.processes).to.exist;\nexpect(delegate.processes.length).to.eq(testDelegate.processes.length);\ntestDelegate.processes.forEach(p =&gt; {\n  const process = delegate.processes.find(dp =&gt; dp.id === p.id);\n  expect(process).to.exist;\n});\n// for user without delegate\ndelegate = await userCtrl.getDelegate(testUsers[1].contactGuid);\n[&#x27;contactGuid&#x27;, &#x27;startDate&#x27;, &#x27;startTime&#x27;, &#x27;endDate&#x27;, &#x27;endTime&#x27;].forEach(p =&gt; {\n  expect(delegate[p]).to.be.null;\n});\nexpect(delegate.processes.length).to.eq(0);\n// delete delegate\nawait MetadataValue.query()\n  .where(&#x27;ownerSid&#x27;, testDelegate.contactGuid)\n  .delete();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f455b323-cd50-48ac-9979-a7405839518b&quot;,&quot;parentUUID&quot;:&quot;c9097afc-5c39-4faa-8e6d-02a968bafcd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;password should be hashed&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests password should be hashed&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const user = await UserAuth.query()\n  .findById(testUsers[0].contactGuid);\nexpect(user.password).to.not.eq(testPwd);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8c8b1f79-6510-42f7-9eba-1b88eb1f7709&quot;,&quot;parentUUID&quot;:&quot;c9097afc-5c39-4faa-8e6d-02a968bafcd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;user should be active (not deleted)&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests user should be active (not deleted)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const user = await User.query()\n  .findById(testUsers[0].contactGuid);\nexpect(user.deletedDate).to.be.null;\nexpect(user.deletedBy).to.be.null;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6792a7f1-69b9-4682-ac14-58bf4cad0eb1&quot;,&quot;parentUUID&quot;:&quot;c9097afc-5c39-4faa-8e6d-02a968bafcd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should convert user Guids&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should convert user Guids&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testUser = {\n  contactGuid: &#x27;SomeRandomString&#x27;,\n  managerGuid: &#x27;SomeRandomString&#x27;,\n  signatureGuid: &#x27;SomeRandomString&#x27;,\n  languageGuid: &#x27;SomeRandomString&#x27;,\n  createdBy: &#x27;SomeRandomString&#x27;,\n};\nconst convertedUser1 = userCtrl.convertUserGuids(testUser);\nconst convertedUser2 = userCtrl.convertUserGuids({contactGuid: testUser.contactGuid});\n[convertedUser1, convertedUser2].forEach(u =&gt; {\n  Object.keys(u).forEach(key =&gt; {\n    expect(u[key]).to.eq(u[key].toLowerCase());\n  });\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95625ade-4697-4332-a668-9c5fff0f8c6a&quot;,&quot;parentUUID&quot;:&quot;c9097afc-5c39-4faa-8e6d-02a968bafcd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should check if username is taken&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should check if username is taken&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const userGuid = testUsers[0].contactGuid;\nconst username = testUsers[0].userName;\nlet isTaken = await userCtrl.isUserNameTaken(username);\nexpect(isTaken).to.be.true;\nisTaken = await userCtrl.isUserNameTaken(username.toUpperCase());\nexpect(isTaken).to.be.true;\n// with un-taken username\nisTaken = await userCtrl.isUserNameTaken(&#x27;someUnusedUsernameTest&#x27;);\nexpect(isTaken).to.be.false;\n// with Guid provided\nisTaken = await userCtrl.isUserNameTaken(username, userGuid);\nexpect(isTaken).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40ddbd39-aa81-488a-add0-0c0652fc77bc&quot;,&quot;parentUUID&quot;:&quot;c9097afc-5c39-4faa-8e6d-02a968bafcd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update user&quot;,&quot;fullTitle&quot;:&quot;api-user User Controller Tests should update user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:111,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const userGuid = testUsers[3].contactGuid;\nconst data = {\n  firstName: &#x27;test first updated&#x27;,\n  middleName: &#x27;up mid name&#x27;,\n  lastName: &#x27;up last name&#x27;,\n  email: &#x27;updated@email.com&#x27;,\n  title: &#x27;updatedTitle&#x27;,\n  division: &#x27;up division&#x27;,\n  department: &#x27;upd department&#x27;,\n  costCenter: &#x27;upd cost center&#x27;,\n  location: &#x27;upd loc&#x27;,\n  phone: &#x27;094-242-5654 ext 4&#x27;,\n  managerGuid: testUsers[0].contactGuid,\n  address1: &#x27;654 Some ave&#x27;,\n  address2: &#x27;apt 589&#x27;,\n  city: &#x27;New London&#x27;,\n  state: &#x27;OR&#x27;,\n  zip: &#x27;98353&#x27;,\n  country: &#x27;USM&#x27;,\n  languageGuid: testUsers[0].languageGuid,\n  timezone: &#x27;PFT-09&#x27;,\n  locale: &#x27;en-US&#x27;,\n  cField1: &#x27;upd cust field 1&#x27;,\n  cField2: &#x27;upd cust field 2&#x27;,\n  active: false,\n  userName: &#x27;updatedUserName&#x27;,\n  password: &#x27;updatedPwd&#x27;,\n  signatureGuid: &#x27;36b65bca-140d-41b9-ac8b-89b50c86e7ba&#x27;\n};\n// get current password\nlet user = await UserAuth.query()\n  .findById(testUsers[3].contactGuid);\nconst previousPwd = user.password;\n// update\nuser = await userCtrl.updateUser(userGuid, data);\nconst {contactGuid, contactId, createdBy, createdDate, deletedBy, deletedDate, modifiedBy, modifiedDate, ntId, reportsToGuid, lastUpdate, ...updatedUser} = user;\nconst {password, active, ...testData} = data;\nexpect(updatedUser).to.deep.eq(testData);\n// should be inactive/deleted\nexpect(!!deletedBy).to.be.true;\nexpect(!!deletedDate).to.be.true;\n// should change the password\nuser = await UserAuth.query()\n  .findById(testUsers[3].contactGuid);\nconst updatedPwd = user.password;\nexpect(previousPwd).to.not.eq(updatedPwd);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6f7d9bf8-1859-45af-b0d9-3aba8ef32775&quot;,&quot;parentUUID&quot;:&quot;c9097afc-5c39-4faa-8e6d-02a968bafcd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;495373ef-9892-4657-be94-fa0646e81f8a&quot;,&quot;5653af17-e567-49d3-b152-96e991aa41e0&quot;,&quot;cea1ecf8-ac15-4457-b524-81295284f2f7&quot;,&quot;3e03f480-01a7-4269-b986-80de1d07264d&quot;,&quot;494bfdf6-0e6d-4c46-8fa6-b9f2efbe1660&quot;,&quot;ffcf225c-4152-4994-8923-f604a4e5fb03&quot;,&quot;f455b323-cd50-48ac-9979-a7405839518b&quot;,&quot;8c8b1f79-6510-42f7-9eba-1b88eb1f7709&quot;,&quot;6792a7f1-69b9-4682-ac14-58bf4cad0eb1&quot;,&quot;95625ade-4697-4332-a668-9c5fff0f8c6a&quot;,&quot;40ddbd39-aa81-488a-add0-0c0652fc77bc&quot;,&quot;6f7d9bf8-1859-45af-b0d9-3aba8ef32775&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:267,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;20ecb492-14b2-48a8-993e-add473b414d9&quot;,&quot;title&quot;:&quot;api-user Group Handler Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-user/test/groupHandler.test.js&quot;,&quot;file&quot;:&quot;/test/groupHandler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:105,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;testConfig = await mocks.getTestConfig();\ntenant = testConfig.tenantOne.tenantId;\nconst userCtl = new UserController({tenantId: tenant})\nrestrictedUser = await userCtl.insertUser({firstName: &#x27;groups test&#x27;,\n                                           lastName: &#x27;groups test&#x27;,\n                                           userName: &#x27;restricted user for groups permission test&#x27;,\n                                           password: &#x27;password&#x27;})&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e96a9bb-1c8b-42b5-bc49-f7fb2beb3a35&quot;,&quot;parentUUID&quot;:&quot;20ecb492-14b2-48a8-993e-add473b414d9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const User = await models.getModel(tenant, &#x27;User&#x27;);\nawait User.query().hardDelete(restrictedUser)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93c7253e-3864-4fdc-b2b5-52d7a177e898&quot;,&quot;parentUUID&quot;:&quot;20ecb492-14b2-48a8-993e-add473b414d9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d4f57af7-211a-49fb-a20e-d78337e1764d&quot;,&quot;title&quot;:&quot;crud tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-user/test/groupHandler.test.js&quot;,&quot;file&quot;:&quot;/test/groupHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should create a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests crud tests should create a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;api-user group test&#x27;\nconst mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.body = { groupName: groupName,\n             groupDesc: &#x27;api-user group test description&#x27; }\nconst response = await handlers.addGroup(req,mockRes);\nconst group = response.body\nexpect(response.statusCode).to.equal(200)\nexpect(group.groupGuid).to.match(/([-\\w]+)/)\nexpect(group.groupName).to.equal(groupName);\n// cleanup\nreq.body = [group.groupGuid]\nconst foo = await handlers.deleteGroups(req, mockRes)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cfa68f82-12a5-40d0-8376-b3000919515e&quot;,&quot;parentUUID&quot;:&quot;d4f57af7-211a-49fb-a20e-d78337e1764d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;cfa68f82-12a5-40d0-8376-b3000919515e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;b97d96eb-b184-4eab-a49f-bb53e33f21e3&quot;,&quot;title&quot;:&quot;permission tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-user/test/groupHandler.test.js&quot;,&quot;file&quot;:&quot;/test/groupHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;admin should have manage/edit permissions per group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests permission tests admin should have manage/edit permissions per group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.oauth.user_sid = testConfig.tenantOne.adminUser.sid;\nconst response = await handlers.getGroups(req,mockRes);\nconst groups = response.body.results;\ngroups.forEach( group =&gt; {\n  expect(group.canManage).to.equal(true);\n  expect(group.canEdit).to.equal(true);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d4426888-0020-4f21-ba09-5bbd0746973d&quot;,&quot;parentUUID&quot;:&quot;b97d96eb-b184-4eab-a49f-bb53e33f21e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not have permission to create a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests permission tests should not have permission to create a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupName = &#x27;api-user group test&#x27;\nconst mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.oauth.user_sid = restrictedUser.contactGuid;\nreq.body = { groupName: groupName,\n             groupDesc: &#x27;api-user group test description&#x27; }\nconst response = await handlers.addGroup(req,mockRes);\nexpect(response.statusCode).to.equal(403)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46fc0b19-76ae-4426-b9ad-935666b744b5&quot;,&quot;parentUUID&quot;:&quot;b97d96eb-b184-4eab-a49f-bb53e33f21e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not have permission to list groups members&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests permission tests should not have permission to list groups members&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupCtl = new GroupController({tenantId: tenant})\nconst group = groupCtl.getGroups({count: 1})\nconst mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.oauth.user_sid = restrictedUser.contactGuid\nreq.params.groupGuid = group.groupGuid\nconst response = await handlers.getGroups(req,mockRes);\nexpect(response.statusCode).to.equal(403)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;84423f19-9b5d-42c4-8cb0-f36888414d5e&quot;,&quot;parentUUID&quot;:&quot;b97d96eb-b184-4eab-a49f-bb53e33f21e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not have permission to delete a group&quot;,&quot;fullTitle&quot;:&quot;api-user Group Handler Tests permission tests should not have permission to delete a group&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const groupCtl = new GroupController({tenantId: tenant})\nconst group = groupCtl.getGroups({count: 1})\nconst mockRes = await mocks.mockResponse();\nconst req = await mocks.req();\nreq.oauth.user_sid = restrictedUser.contactGuid\nreq.params.body = [ group.groupGuid ]\nconst response = await handlers.deleteGroups(req,mockRes);\nexpect(response.statusCode).to.equal(403)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;46a86ef8-f2b1-465a-871d-2be19cd858f3&quot;,&quot;parentUUID&quot;:&quot;b97d96eb-b184-4eab-a49f-bb53e33f21e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d4426888-0020-4f21-ba09-5bbd0746973d&quot;,&quot;46fc0b19-76ae-4426-b9ad-935666b744b5&quot;,&quot;84423f19-9b5d-42c4-8cb0-f36888414d5e&quot;,&quot;46a86ef8-f2b1-465a-871d-2be19cd858f3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:35,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;4f6ce613-25b3-4716-91d2-f1e0faa883e3&quot;,&quot;title&quot;:&quot;api-user User Handler Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/api-user/test/userHandler.test.js&quot;,&quot;file&quot;:&quot;/test/userHandler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;testConfig = await mocks.getTestConfig();\ntenantId = testConfig.tenantOne.tenantId;\nsession = {tenant: tenantId, user_sid: testConfig.tenantOne.adminUser.sid.toLowerCase()};\nUser = await models.getModel(tenantId, &#x27;User&#x27;);\nUserAuth = await models.getModel(tenantId, &#x27;UserAuth&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e3977033-be31-4898-96e4-ff96730ee8c9&quot;,&quot;parentUUID&quot;:&quot;4f6ce613-25b3-4716-91d2-f1e0faa883e3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;req = await mocks.req();\nmockRes = await mocks.mockResponse();\ntestUser = (await User.query().limit(1))[0];\ntestUser.userName  = (await UserAuth.query().select(&#x27;userName&#x27;).where(&#x27;contactGuid&#x27;, testUser.contactGuid))[0].userName;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e753baa2-eb5d-46f9-9bb9-8a91aa8d8bc0&quot;,&quot;parentUUID&quot;:&quot;4f6ce613-25b3-4716-91d2-f1e0faa883e3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await UserAuth.query().delete().where(&#x27;userName&#x27;, &#x27;like&#x27;, &#x27;user_to_delete%&#x27;);\nawait User.query().delete().where(&#x27;firstName&#x27;, &#x27;like&#x27;, &#x27;user_to_delete%&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e536075a-a048-4fd6-894c-8fef9b87ba76&quot;,&quot;parentUUID&quot;:&quot;4f6ce613-25b3-4716-91d2-f1e0faa883e3&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a list of users&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should get a list of users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const response = await handlers.getUsers(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body).to.exist;\nexpect(response.body.results).to.exist;\nexpect(response.body.results.length).to.be.gt(0);\nexpect(response.body.total).to.exist;\nexpect(response.body.total).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6bd8716a-95d9-44ca-9eb1-a47eb61359d1&quot;,&quot;parentUUID&quot;:&quot;4f6ce613-25b3-4716-91d2-f1e0faa883e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return a list of managers&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should return a list of managers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const response = await handlers.getManagers(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body).to.exist;\nexpect(response.body.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54cd6fc3-f8bf-4841-8567-e506511dea6f&quot;,&quot;parentUUID&quot;:&quot;4f6ce613-25b3-4716-91d2-f1e0faa883e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get single user&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should get single user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;req.params.userGuid = testUser.contactGuid;\nconst response = await handlers.getUser(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body).to.exist;\nexpect(response.body.contactGuid).to.exist;\nexpect(response.body.firstName).to.exist;\nexpect(response.body.delegate).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ffb5078-1eaf-4dc8-88cc-80d2bff54923&quot;,&quot;parentUUID&quot;:&quot;4f6ce613-25b3-4716-91d2-f1e0faa883e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should check if userName is taken&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should check if userName is taken&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;req.query.userName = testUser.userName;\nreq.query.userGuid = testUser.contactGuid;\nconst response = await handlers.checkIfUserNameIsTaken(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body).to.exist;\nexpect(response.body.isTaken).to.exist;\nexpect(response.body.isTaken).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;056c1f8d-2cd8-413f-a2ba-baffe11b7e65&quot;,&quot;parentUUID&quot;:&quot;4f6ce613-25b3-4716-91d2-f1e0faa883e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not insert user without data&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should not insert user without data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const response = await handlers.insertUser(req, mockRes);\nexpect(response.statusCode).to.eq(400);\nexpect(response.body.firstName).to.exist;\nexpect(response.body.firstName).to.deep.eq([&#x27;The firstName field is required.&#x27;]);\nexpect(response.body.lastName).to.exist;\nexpect(response.body.password).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e8d82414-f603-4899-b607-528e765a1f3e&quot;,&quot;parentUUID&quot;:&quot;4f6ce613-25b3-4716-91d2-f1e0faa883e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insert user&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should insert user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:110,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;req.body = {\n  firstName: &#x27;user_to_delete&#x27;,\n  lastName: &#x27;lastName&#x27;,\n  userName: &#x27;user_to_delete&#x27; + Math.random().toString(36).substring(7), // random string\n  email: &#x27;random@test.com&#x27;,\n  locale: &#x27;en-US&#x27;,\n  timezone: &#x27;Pacific&#x27;,\n  languageGuid: testUser.languageGuid,\n  password: &#x27;randomPwd&#x27;,\n}\nconst response = await handlers.insertUser(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body).to.exist;\nexpect(response.body.contactGuid).to.exist;\nexpect(response.body.firstName).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6738e83a-4924-40f2-ac8f-42421938ea1b&quot;,&quot;parentUUID&quot;:&quot;4f6ce613-25b3-4716-91d2-f1e0faa883e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should register a user&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should register a user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2576,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const userName = &#x27;register_user&#x27; + Math.random().toString(36).substring(7) // random string\nreq.body = {\n  firstName: &#x27;register_user&#x27;,\n  lastName: &#x27;lastName&#x27;,\n  userName,\n  email: &#x27;random@test.com&#x27;,\n  // locale: &#x27;en-US&#x27;,\n  timezone: &#x27;US/Central&#x27;,\n  languageGuid: testUser.languageGuid,\n  password: &#x27;randomPwd&#x27;,\n  tenant: tenantId\n}\nreq.bypassRecaptcha = true\nconst response = await handlers.registerUser(req, mockRes);\nexpect(response.statusCode).to.eq(200);\n// search by username to verify user record was created\nconst userCtrl = new UserController(session);\nconst result = await userCtrl.getUsers({search: userName});\nexpect(result.results.length).to.be.gt(0);\nlet found = result.results.find(u =&gt; u.userName = userName);\nexpect(found).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30b77cac-1443-433a-9eba-cb96c8f3110c&quot;,&quot;parentUUID&quot;:&quot;4f6ce613-25b3-4716-91d2-f1e0faa883e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not update user with empty data&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should not update user with empty data&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;req.body = &#x27;{}&#x27;;\nconst response = await handlers.updateUser(req, mockRes);\nexpect(response.statusCode).to.eq(400);\nexpect(response.body.firstName).to.exist;\nexpect(response.body.firstName).to.deep.eq([&#x27;The firstName field is required.&#x27;]);\nexpect(response.body.lastName).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc0ce403-229c-4d35-bfe5-a409fe8ff2bb&quot;,&quot;parentUUID&quot;:&quot;4f6ce613-25b3-4716-91d2-f1e0faa883e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update user&quot;,&quot;fullTitle&quot;:&quot;api-user User Handler Tests should update user&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let userToDelete = (await UserAuth.query().where(&#x27;userName&#x27;, &#x27;like&#x27;, &#x27;user_to_delete%&#x27;).limit(1))[0];\nif (!userToDelete) {\n  req.body = {\n    firstName: &#x27;user_to_delete&#x27;,\n    lastName: &#x27;lastName&#x27;,\n    userName: &#x27;user_to_delete&#x27; + Math.random().toString(36).substring(7), // random string\n    email: &#x27;random@test.com&#x27;,\n    locale: &#x27;en-US&#x27;,\n    timezone: &#x27;Pacific&#x27;,\n    languageGuid: testUser.languageGuid,\n    password: &#x27;randomPwd&#x27;,\n  }\n  userToDelete  = (await handlers.insertUser(req, mockRes)).body;\n}\nconst data = {\n  firstName: &#x27;user_to_delete&#x27;,\n  lastName: &#x27;updated last&#x27;,\n  userName: &#x27;user_to_delete&#x27; + Math.random().toString(36).substring(7),\n  email: &#x27;random@test.updated&#x27;,\n  locale: &#x27;en-US&#x27;,\n  timezone: &#x27;Atlantic/New York&#x27;,\n  languageGuid: testUser.languageGuid,\n};\nreq.params.userGuid = userToDelete.contactGuid;\nreq.body = JSON.stringify(data);\nconst response = await handlers.updateUser(req, mockRes);\nexpect(response.statusCode).to.eq(200);\nexpect(response.body.contactGuid).to.exist;\nexpect(response.body.firstName).to.exist;\nexpect(response.body.firstName).to.eq(data.firstName);\nexpect(response.body.timezone).to.exist;\nexpect(response.body.timezone).to.eq(data.timezone);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;804afca4-4670-4d25-969e-90be4165a963&quot;,&quot;parentUUID&quot;:&quot;4f6ce613-25b3-4716-91d2-f1e0faa883e3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6bd8716a-95d9-44ca-9eb1-a47eb61359d1&quot;,&quot;54cd6fc3-f8bf-4841-8567-e506511dea6f&quot;,&quot;3ffb5078-1eaf-4dc8-88cc-80d2bff54923&quot;,&quot;056c1f8d-2cd8-413f-a2ba-baffe11b7e65&quot;,&quot;e8d82414-f603-4899-b607-528e765a1f3e&quot;,&quot;6738e83a-4924-40f2-ac8f-42421938ea1b&quot;,&quot;30b77cac-1443-433a-9eba-cb96c8f3110c&quot;,&quot;bc0ce403-229c-4d35-bfe5-a409fe8ff2bb&quot;,&quot;804afca4-4670-4d25-969e-90be4165a963&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2728,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;183368d4-e242-40ec-8a91-e6eca90c925b&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3670d370-8b16-414c-81e8-db22f9b1d0c9&quot;,&quot;title&quot;:&quot;Config Processor ENV.CONFIG tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config Processor ENV.CONFIG tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:39,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\nprocess.env.TESTING = true;\n\nconfigHelper = require(\&quot;../../src/helpers/config\&quot;)\nredis = require(\&quot;integrify-libs\&quot;).redisClient\npubSubClient = redis.makeCopy();\npubSubClient.subscribe(&#x27;updateEnvConfig&#x27;)\npubSubClient.on(&#x27;message&#x27;, function(channel, message) {\n  \n  pubSubMessage = {channel, message}\n  // pubSubMessage[channel] = message;\n  \n});\n//let deletes = await redis.delAsync([&#x27;ENV.CONFIG&#x27;]);\n//console.log(deletes)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9d9832e-d8ca-41e4-b4f3-13b09a680fa0&quot;,&quot;parentUUID&quot;:&quot;3670d370-8b16-414c-81e8-db22f9b1d0c9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0cd8b126-c1e1-43fc-990c-c435755436ae&quot;,&quot;title&quot;:&quot;config helper&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;13099266-bb81-40b8-a1df-dcac86cd0acd&quot;,&quot;title&quot;:&quot;setConfig&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set ENV.CONFIG in redis based on a local config file&quot;,&quot;fullTitle&quot;:&quot;Config Processor ENV.CONFIG tests config helper setConfig should set ENV.CONFIG in redis based on a local config file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:335,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await configHelper.setEnvConfig()\nlet storedConfig = await redis.getAsync(&#x27;ENV.CONFIG&#x27;)\n//console.log(\&quot;wow\&quot;,storedConfig)\nexpect(storedConfig).to.exist;\nstoredConfig = JSON.parse(storedConfig);\n//expect(storedConfig.cacheTime).to.exist;\nawait delay(300)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;20e4f3a1-3852-4f1e-8c67-d46403cb186d&quot;,&quot;parentUUID&quot;:&quot;13099266-bb81-40b8-a1df-dcac86cd0acd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a message on the updateEnvConfig pub/sub channel&quot;,&quot;fullTitle&quot;:&quot;Config Processor ENV.CONFIG tests config helper setConfig should get a message on the updateEnvConfig pub/sub channel&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(pubSubMessage.channel).to.equal(&#x27;updateEnvConfig&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c2f21ed-7ab1-461e-a61f-034b4d75d046&quot;,&quot;parentUUID&quot;:&quot;13099266-bb81-40b8-a1df-dcac86cd0acd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should set ENV.CONFIG in redis based on a S3 config file&quot;,&quot;fullTitle&quot;:&quot;Config Processor ENV.CONFIG tests config helper setConfig should set ENV.CONFIG in redis based on a S3 config file&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.USE_S3_FILES=\&quot;true\&quot;\nawait configHelper.setEnvConfig()\nlet storedConfig = await redis.getAsync(&#x27;ENV.CONFIG&#x27;)\nexpect(storedConfig).to.exist;\nstoredConfig = JSON.parse(storedConfig);\nexpect(storedConfig.cacheTime).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b7bf6304-94c1-4e3d-ab89-ba3b689e55d9&quot;,&quot;parentUUID&quot;:&quot;13099266-bb81-40b8-a1df-dcac86cd0acd&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;20e4f3a1-3852-4f1e-8c67-d46403cb186d&quot;,&quot;2c2f21ed-7ab1-461e-a61f-034b4d75d046&quot;,&quot;b7bf6304-94c1-4e3d-ab89-ba3b689e55d9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:349,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5d4d8d6a-1ad1-44e2-a450-7bf23fee69ad&quot;,&quot;title&quot;:&quot;Config Processor Event Handler Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/configEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/configEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config Processor Event Handler Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10071,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.TESTING = true;\nthis.timeout(105000);\nlet deletes = await redis.delAsync([fullStreamName, eventHistoryName, eventProcessedName]);\n\nconsole.log(deletes)\nlet sp = new StreamPublisher(testStreamName,tenant);\nawait sp.sendEvent(\&quot;updateEnvConfig\&quot;, {\n    update: new Date().toISOString()\n});\nawait sp.sendEvent(\&quot;updateDataInstances\&quot;, {\n  update: new Date().toISOString()\n});\nawait sp.sendEvent(\&quot;updateLicenses\&quot;, {\n    update: new Date().toISOString()\n});\nawait sp.sendEvent(\&quot;updateLicenses\&quot;, {\n  update: new Date().toISOString(),\n  tenantId: &#x27;integrifydev&#x27;\n      });\n\n\nforkedProcessor = await configStreamConsumer.monitorStream(tenant);\nawait delay(10000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8719e384-98de-4ad1-9f3a-cf75fd229030&quot;,&quot;parentUUID&quot;:&quot;5d4d8d6a-1ad1-44e2-a450-7bf23fee69ad&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config Processor Event Handler Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a9c3795c-6c5a-49fb-813e-c3f233ce7ac5&quot;,&quot;parentUUID&quot;:&quot;5d4d8d6a-1ad1-44e2-a450-7bf23fee69ad&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7ff3d114-a941-40c6-8b10-8b26fe62b580&quot;,&quot;title&quot;:&quot;config stream processor&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/configEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/configEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;496bb58a-39a5-4205-9471-f2de04968916&quot;,&quot;title&quot;:&quot;reads from config stream&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/configEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/configEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should process events&quot;,&quot;fullTitle&quot;:&quot;Config Processor Event Handler Tests config stream processor reads from config stream should process events&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processedCount = await redis.zcardAsync(eventProcessedName)\n              let historyCount = await redis.zcardAsync(eventHistoryName)\n              expect(historyCount).to.equal(processedCount)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d402bbef-ff16-4751-852e-07d0acb32f50&quot;,&quot;parentUUID&quot;:&quot;496bb58a-39a5-4205-9471-f2de04968916&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d402bbef-ff16-4751-852e-07d0acb32f50&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;87620edd-9411-4b6f-b435-ce4c65b9fa9e&quot;,&quot;title&quot;:&quot;Config data instance tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/dataInstance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/dataInstance.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config data instance tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.TESTING = true;\npubSubClient.subscribe(&#x27;updateDataInstances&#x27;)\npubSubClient.on(&#x27;message&#x27;, function(channel, message) {\n  \n  pubSubMessage = {channel, message}\n  // pubSubMessage[channel] = message;\n  \n});\n  \nlet deletes = await redis.delAsync([&#x27;data_instances&#x27;]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1bc556bf-6b65-4a67-958c-6e6696fe38f4&quot;,&quot;parentUUID&quot;:&quot;87620edd-9411-4b6f-b435-ce4c65b9fa9e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5090c99f-6e7f-4067-9a90-ca8d82395a29&quot;,&quot;title&quot;:&quot;dataInstasnce helper&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/dataInstance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/dataInstance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;34e8ae7a-1a84-4a3b-a8e3-c6951371ea6e&quot;,&quot;title&quot;:&quot;updateDataInstances&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/dataInstance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/dataInstance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set data_instances in redis&quot;,&quot;fullTitle&quot;:&quot;Config data instance tests dataInstasnce helper updateDataInstances should set data_instances in redis&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:639,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await dataInstanceHelper.updateDataInstances();\nlet storedDataInstances = await redis.getAsync(&#x27;data_instances&#x27;)\nexpect(storedDataInstances).to.exist;\nstoredDataInstances = JSON.parse(storedDataInstances);\nexpect(Object.keys(storedDataInstances).length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;341fb893-5631-4b20-ad5f-cf582c77f0f8&quot;,&quot;parentUUID&quot;:&quot;34e8ae7a-1a84-4a3b-a8e3-c6951371ea6e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a message on the updateDataInstances pub/sub channel&quot;,&quot;fullTitle&quot;:&quot;Config data instance tests dataInstasnce helper updateDataInstances should get a message on the updateDataInstances pub/sub channel&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:300,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await delay(300)\nexpect(pubSubMessage.channel).to.equal(&#x27;updateDataInstances&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cd3fc42b-fcac-4e8c-bb2d-da1482927d44&quot;,&quot;parentUUID&quot;:&quot;34e8ae7a-1a84-4a3b-a8e3-c6951371ea6e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;341fb893-5631-4b20-ad5f-cf582c77f0f8&quot;,&quot;cd3fc42b-fcac-4e8c-bb2d-da1482927d44&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:939,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;716956c4-32b1-47e3-8807-dffc23e9658b&quot;,&quot;title&quot;:&quot;Config license tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/license.test.js&quot;,&quot;file&quot;:&quot;/test/integration/license.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Config license tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.TESTING = true;\npubSubClient.subscribe(&#x27;updateLicenses&#x27;)\npubSubClient.on(&#x27;message&#x27;, function(channel, message) {\n  \n  pubSubMessage = {channel, message}\n  // pubSubMessage[channel] = message;\n  \n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09ef35e9-cfb7-4717-a6c5-4647bbd480e5&quot;,&quot;parentUUID&quot;:&quot;716956c4-32b1-47e3-8807-dffc23e9658b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6127c9d8-6e49-4c5a-b19f-c67f0a6bb0aa&quot;,&quot;title&quot;:&quot;license helper&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/license.test.js&quot;,&quot;file&quot;:&quot;/test/integration/license.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4556405c-79b2-4c9e-85d9-c22aff367ffe&quot;,&quot;title&quot;:&quot;updateLicenses&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/config-processor/test/integration/license.test.js&quot;,&quot;file&quot;:&quot;/test/integration/license.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should set licenses and x.license in redis for all dataInstances&quot;,&quot;fullTitle&quot;:&quot;Config license tests license helper updateLicenses should set licenses and x.license in redis for all dataInstances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:321,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await licenseHelper.updateLicenses()\nlet storedLicences = await redis.hgetallAsync(&#x27;licenses&#x27;)\nlicenseId = Object.keys(storedLicences)[0]\nexpect(storedLicences).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;51373682-686e-4d1d-9323-157c227d7faa&quot;,&quot;parentUUID&quot;:&quot;4556405c-79b2-4c9e-85d9-c22aff367ffe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a message on the updateLicenses pub/sub channel&quot;,&quot;fullTitle&quot;:&quot;Config license tests license helper updateLicenses should get a message on the updateLicenses pub/sub channel&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:301,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await delay(300)\nexpect(pubSubMessage.channel).to.equal(&#x27;updateLicenses&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;124436a7-044e-4304-93be-eb2ed2a8ea15&quot;,&quot;parentUUID&quot;:&quot;4556405c-79b2-4c9e-85d9-c22aff367ffe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should set license redis for all dataInstances&quot;,&quot;fullTitle&quot;:&quot;Config license tests license helper updateLicenses should set license redis for all dataInstances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:147,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await licenseHelper.updateLicenses(licenseId)\nlet storedLicences = await redis.hgetallAsync(&#x27;licenses&#x27;)\nexpect(storedLicences).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0891b8ac-be4f-4b53-9295-9e02ba1a914e&quot;,&quot;parentUUID&quot;:&quot;4556405c-79b2-4c9e-85d9-c22aff367ffe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;51373682-686e-4d1d-9323-157c227d7faa&quot;,&quot;124436a7-044e-4304-93be-eb2ed2a8ea15&quot;,&quot;0891b8ac-be4f-4b53-9295-9e02ba1a914e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:769,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1100538d-fb23-4530-ad3c-4692f3bb0d99&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9432c405-2490-4672-89de-34f711ff072a&quot;,&quot;title&quot;:&quot;Core Service biztimes&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/biztimes.test.js&quot;,&quot;file&quot;:&quot;/test/biztimes.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service biztimes \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()\nlet test_yml = await getTestConfig();\ntest_data = test_yml.data;\nbiz = { \&quot;Active\&quot;: false, \&quot;EndHour\&quot;: 17, \&quot;EndMinute\&quot;: 0, \&quot;SID\&quot;: test_data.biz_sid, \&quot;StartHour\&quot;: 9, \&quot;StartMinute\&quot;: 15, \&quot;Weekday\&quot;: 0 }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;226e97da-5cae-4b85-b8b8-fafe49dc0ea1&quot;,&quot;parentUUID&quot;:&quot;9432c405-2490-4672-89de-34f711ff072a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;c366f0ee-eead-4cb9-97d7-ced4bf8224fe&quot;,&quot;title&quot;:&quot;GET /biztimes&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/biztimes.test.js&quot;,&quot;file&quot;:&quot;/test/biztimes.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;gets biztimes&quot;,&quot;fullTitle&quot;:&quot;Core Service biztimes GET /biztimes gets biztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/biztimes&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n// biz = res.body.Items[0];\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c622f721-6c91-4b46-b009-bf8fc19ca67d&quot;,&quot;parentUUID&quot;:&quot;c366f0ee-eead-4cb9-97d7-ced4bf8224fe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c622f721-6c91-4b46-b009-bf8fc19ca67d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;16882ab9-772c-4cd4-b5cb-04efe0832a9c&quot;,&quot;title&quot;:&quot;POST /biztimes/save&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/biztimes.test.js&quot;,&quot;file&quot;:&quot;/test/biztimes.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service biztimes POST /biztimes/save \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;if (biz.EndHour &lt; 24)\n    biz.EndHour = biz.EndHour + 1\nelse\n    biz.EndHour = biz.EndHour - 23&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a825101-aad1-460d-87ef-c28aa97ff412&quot;,&quot;parentUUID&quot;:&quot;16882ab9-772c-4cd4-b5cb-04efe0832a9c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;saves biztimes&quot;,&quot;fullTitle&quot;:&quot;Core Service biztimes POST /biztimes/save saves biztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/biztimes/save&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(biz)\n//console.log(res.body)\nexpect(res.status).to.equal(200);\nexpect(res.body.EndHour).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42f22136-ce3b-4182-a47e-f37d04695966&quot;,&quot;parentUUID&quot;:&quot;16882ab9-772c-4cd4-b5cb-04efe0832a9c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;42f22136-ce3b-4182-a47e-f37d04695966&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;0e18e5dd-651f-4d62-8606-da2ea204bbf0&quot;,&quot;title&quot;:&quot;Core Service category&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service category \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;42db7fd3-1373-45ad-befd-911c4fd67870&quot;,&quot;parentUUID&quot;:&quot;0e18e5dd-651f-4d62-8606-da2ea204bbf0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;87414fdf-745d-4989-88e7-cba3dd48000b&quot;,&quot;title&quot;:&quot;GET tree/{object_type}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service category GET tree/{object_type} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/categories/tree/category?node=all&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            category = res.body[0]\n            coreResult = res.body;\n            //console.log(res.body)\n            expect(res.status).to.equal(200);\n            // expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;75a94f22-5181-42bb-ac83-a5f10ef90d27&quot;,&quot;parentUUID&quot;:&quot;87414fdf-745d-4989-88e7-cba3dd48000b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;75a94f22-5181-42bb-ac83-a5f10ef90d27&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;22e736a2-2c31-4166-991f-4c9110e1094b&quot;,&quot;title&quot;:&quot;GET {sid}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service category GET {sid} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/category/&#x27; + category.id)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            //console.log(res.body);\n            coreResult = res.body;\n            expect(res.status).to.equal(200);\n            expect(res.body.Name).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;94b62224-78de-42b2-b138-a99c4b0d5c4f&quot;,&quot;parentUUID&quot;:&quot;22e736a2-2c31-4166-991f-4c9110e1094b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;94b62224-78de-42b2-b138-a99c4b0d5c4f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;9e87556a-6ead-4c53-a6a4-b067ca6899fb&quot;,&quot;title&quot;:&quot;POST save&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service category POST save core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/category/save&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(category_save)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.CreatedDate).to.exist;\n// expect(res.body.Name).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8363ac5d-55b0-4f1c-bc28-42da25bc59a4&quot;,&quot;parentUUID&quot;:&quot;9e87556a-6ead-4c53-a6a4-b067ca6899fb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8363ac5d-55b0-4f1c-bc28-42da25bc59a4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;f754e993-46f0-497b-8c9f-e21f42661f56&quot;,&quot;title&quot;:&quot;GET {sid}/delete&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/category.test.js&quot;,&quot;file&quot;:&quot;/test/category.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service category GET {sid}/delete \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//Fetch category sid to delete\n            let resp = await chai.request(newUrlBase)\n                .get(&#x27;/categories/tree/category?node=all&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            category = resp.body;\n            category.forEach(element =&gt; {\n                //console.log(element.Name);\n                if (element.Name == &#x27;Qa Auto&#x27;)\n                    cate_delete = element;\n            });&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e55cedd2-2b3f-4dd1-b4f1-c2dcee30ab6d&quot;,&quot;parentUUID&quot;:&quot;f754e993-46f0-497b-8c9f-e21f42661f56&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service category GET {sid}/delete core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/category/&#x27; + cate_delete.id + &#x27;/delete&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body).to.equal(0);\n// expect(res.body.Name).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8a3df565-3c30-49b4-846e-0848bcfbc54e&quot;,&quot;parentUUID&quot;:&quot;f754e993-46f0-497b-8c9f-e21f42661f56&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8a3df565-3c30-49b4-846e-0848bcfbc54e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;4dfa1b98-3147-40c9-8b45-ee3f6beed013&quot;,&quot;title&quot;:&quot;Core Service contacts&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe4236fd-0ab9-4c8a-80ef-9c27d89828df&quot;,&quot;parentUUID&quot;:&quot;4dfa1b98-3147-40c9-8b45-ee3f6beed013&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;64208dd6-a216-4c61-8712-453983c008e0&quot;,&quot;title&quot;:&quot;GET /contacts/current&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET /contacts/current core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                        .get(&#x27;/contacts/current/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n                        .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n                  coreResult = res.body;\n                  expect(res.status).to.equal(200);\n                  expect(res.body.ContactID).to.exist;\n                  currentUser_sid = res.body.SID&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9aa09af6-cca3-4147-b25c-c7bcb3c09015&quot;,&quot;parentUUID&quot;:&quot;64208dd6-a216-4c61-8712-453983c008e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9aa09af6-cca3-4147-b25c-c7bcb3c09015&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;a9364a35-6de7-48d2-bd64-29923854b0ee&quot;,&quot;title&quot;:&quot;GET detail/{contact_sid}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET detail/{contact_sid} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                        .get(&#x27;/contacts/detail/&#x27; + currentUser_sid)\n                        .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n                  coreResult = res.body;\n                  expect(res.status).to.equal(200);\n                  expect(res.body.ContactID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f652d0cc-93fe-45a6-ba44-948e10b8ee6b&quot;,&quot;parentUUID&quot;:&quot;a9364a35-6de7-48d2-bd64-29923854b0ee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f652d0cc-93fe-45a6-ba44-948e10b8ee6b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;4077e6e0-e3e6-4c8f-949c-b2f6941b165a&quot;,&quot;title&quot;:&quot;GET {contact_sid}/attributes&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET {contact_sid}/attributes core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contact/&#x27; + currentUser_sid + &#x27;/attributes&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//Need clarifacation on a valaid test \nexpect(res.body[0]).to.exist;\nexpect(res.body[1]).to.exist;\nexpect(res.body[2]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0087c0a8-757c-4a94-bc5f-621cb067e8e7&quot;,&quot;parentUUID&quot;:&quot;4077e6e0-e3e6-4c8f-949c-b2f6941b165a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0087c0a8-757c-4a94-bc5f-621cb067e8e7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;a0a73e82-40f7-4979-a16d-f3e926730bf0&quot;,&quot;title&quot;:&quot;GET {contact_sid}/delegations&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET {contact_sid}/delegations core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contact/&#x27; + currentUser_sid + &#x27;/delegations&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\n// //console.log(res.body)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fefa9cf-a87e-44df-b813-006378d29072&quot;,&quot;parentUUID&quot;:&quot;a0a73e82-40f7-4979-a16d-f3e926730bf0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8fefa9cf-a87e-44df-b813-006378d29072&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;320b4471-5674-45cf-9c8a-da85aec14998&quot;,&quot;title&quot;:&quot;GET byuserid/{user_id}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET byuserid/{user_id} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contacts/byuserid/iApprove&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\n//console.log(res.body)\nexpect(res.status).to.equal(200);\n//Need clarifacation on a valaid test \n// expect(res.body[0]).to.exist;\n// expect(res.body[1]).to.exist;\n// expect(res.body[2]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3c055c69-791b-4a1a-a283-098d5cd80124&quot;,&quot;parentUUID&quot;:&quot;320b4471-5674-45cf-9c8a-da85aec14998&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3c055c69-791b-4a1a-a283-098d5cd80124&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;be181827-005e-4fb3-af6f-76e92e902b70&quot;,&quot;title&quot;:&quot;GET /contacts/search&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET /contacts/search core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contacts/search?search=System&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n// //console.log(res.body)\ncoreResult = res.body;\n//console.log(res.body);\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dfe1aa1c-86ac-4771-92ab-96ec210061e7&quot;,&quot;parentUUID&quot;:&quot;be181827-005e-4fb3-af6f-76e92e902b70&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dfe1aa1c-86ac-4771-92ab-96ec210061e7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;d69fc078-0d40-4439-8836-1e893e4c994f&quot;,&quot;title&quot;:&quot;GET /contact/search/quick/name&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET /contact/search/quick/name core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contacts/search/quick/name/script/?start=0&amp;count=20&amp;sort=Name&amp;dir=ASC&amp;filter=System&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n//console.log(res.body)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d8297073-19aa-46ae-8b56-7ae24b216665&quot;,&quot;parentUUID&quot;:&quot;d69fc078-0d40-4439-8836-1e893e4c994f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d8297073-19aa-46ae-8b56-7ae24b216665&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;dfd7ba64-655c-4262-a764-b3b041664011&quot;,&quot;title&quot;:&quot;GET /contacts/contactdetailsearch/{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts GET /contacts/contactdetailsearch/{page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/contacts/contactdetailsearch/0/10/LAST_NAME/ASC/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n//console.log(res.body)\nexpect(res.status).to.equal(200);\ncoreResult = res.body;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c692c5d2-48fd-4a4e-952e-e83ecf4bcaad&quot;,&quot;parentUUID&quot;:&quot;dfd7ba64-655c-4262-a764-b3b041664011&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c692c5d2-48fd-4a4e-952e-e83ecf4bcaad&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;e78342ed-1c21-4f99-b700-05271d1c5ff4&quot;,&quot;title&quot;:&quot;POST /contacts/save | update&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts POST /contacts/save | update core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:316,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .post(&#x27;/contacts/save&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send(contact);\ninsertedSid = res.text\n//console.log(res.text)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ccde282-e5a1-4708-b5ff-f5e2c77d29bc&quot;,&quot;parentUUID&quot;:&quot;e78342ed-1c21-4f99-b700-05271d1c5ff4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;core service update&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts POST /contacts/save | update core service update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:321,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;contact.SID = insertedSid;\nlet res = await chai.request(newUrlBase)\n      .post(&#x27;/contacts/update&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send(contact);\n//console.log(res.body)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;faa47101-e56a-4d77-aede-93f74f3f89dc&quot;,&quot;parentUUID&quot;:&quot;e78342ed-1c21-4f99-b700-05271d1c5ff4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2ccde282-e5a1-4708-b5ff-f5e2c77d29bc&quot;,&quot;faa47101-e56a-4d77-aede-93f74f3f89dc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:637,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;d7bdc9c4-d8b0-4f9b-99da-f1f129d3ce1e&quot;,&quot;title&quot;:&quot;POST /contacts/replace POST&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/contact.test.js&quot;,&quot;file&quot;:&quot;/test/contact.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts POST /contacts/replace POST \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;replace_user = [[\&quot;OldContactSid\&quot;, insertedSid], [\&quot;ReplacementContactSid\&quot;, insertedSid2], [\&quot;RecipientReplace\&quot;, \&quot;No\&quot;], [\&quot;OpenTaskReplace\&quot;, \&quot;No\&quot;], [\&quot;GroupReplace\&quot;, \&quot;No\&quot;], [\&quot;RoleReplace\&quot;, \&quot;No\&quot;], [\&quot;DelegationReplace\&quot;, \&quot;No\&quot;]]&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;70646e57-1f00-4229-9343-305aa4a3e59a&quot;,&quot;parentUUID&quot;:&quot;d7bdc9c4-d8b0-4f9b-99da-f1f129d3ce1e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service update&quot;,&quot;fullTitle&quot;:&quot;Core Service contacts POST /contacts/replace POST core service update&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;contact.SID = insertedSid;\nlet res = await chai.request(newUrlBase)\n      .post(&#x27;/contacts/replace &#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send(replace_user);\n//console.log(res.body)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85df9146-7912-44d8-b838-5287cf7649f5&quot;,&quot;parentUUID&quot;:&quot;d7bdc9c4-d8b0-4f9b-99da-f1f129d3ce1e&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;85df9146-7912-44d8-b838-5287cf7649f5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;6e9966a1-e5a0-4035-8e66-fec23c5e852c&quot;,&quot;title&quot;:&quot;Core service dbconns&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/dbconn.test.js&quot;,&quot;file&quot;:&quot;/test/dbconn.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core service dbconns \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aac7e2f9-e263-4e9e-957e-30de91d7e972&quot;,&quot;parentUUID&quot;:&quot;6e9966a1-e5a0-4035-8e66-fec23c5e852c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all dbconns&quot;,&quot;fullTitle&quot;:&quot;Core service dbconns it should GET all dbconns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .get(&#x27;/dbconns/list/0/1000/Name/ASC/script/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f6ad7f11-b801-447e-ac52-a72b14115998&quot;,&quot;parentUUID&quot;:&quot;6e9966a1-e5a0-4035-8e66-fec23c5e852c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should add a test dbconn&quot;,&quot;fullTitle&quot;:&quot;Core service dbconns it should add a test dbconn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .post(&#x27;/dbconns/save/script/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n  .send(testDbConn)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\nexpect(res.text).to.be.a.guid()\ntestDbConnSid = res.text\n// verify testDbConn comes back in list\nres = await chai.request(newUrlBase)\n  .get(&#x27;/dbconns/list/0/1000/Name/ASC/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst idx = res.body.Items.findIndex(item =&gt; item.SID == testDbConnSid);\nexpect(idx).to.be.greaterThan(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ccb2effc-906e-4fb0-ac64-e679fa5931ab&quot;,&quot;parentUUID&quot;:&quot;6e9966a1-e5a0-4035-8e66-fec23c5e852c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;it should delete the test dbconn&quot;,&quot;fullTitle&quot;:&quot;Core service dbconns it should delete the test dbconn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .post(&#x27;/dbconns/delete/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n  .send([testDbConnSid])\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\nexpect(res.text).to.equal(&#x27;1&#x27;);\n// verify testDbConn does not come back in list\nres = await chai.request(newUrlBase)\n  .get(&#x27;/dbconns/list/0/1000/Name/ASC/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst idx = res.body.Items.findIndex(item =&gt; item.SID == testDbConnSid);\nexpect(idx).to.equal(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bab0bec5-ba47-4c74-958a-fc7f962bf083&quot;,&quot;parentUUID&quot;:&quot;6e9966a1-e5a0-4035-8e66-fec23c5e852c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f6ad7f11-b801-447e-ac52-a72b14115998&quot;,&quot;ccb2effc-906e-4fb0-ac64-e679fa5931ab&quot;,&quot;bab0bec5-ba47-4c74-958a-fc7f962bf083&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:29,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;6a49edc6-e596-4201-b1d5-136908ca08f5&quot;,&quot;title&quot;:&quot;Core Service groups&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service groups \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d71abd7a-086e-448d-b107-2461a6280676&quot;,&quot;parentUUID&quot;:&quot;6a49edc6-e596-4201-b1d5-136908ca08f5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;614cfc26-aace-428d-9754-27d551efa00d&quot;,&quot;title&quot;:&quot;POST /group/save&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups POST /group/save core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                        .post(&#x27;/groups/save/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n                        .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n                        .send({ \&quot;Name\&quot;: \&quot;Qa Auto\&quot;, \&quot;Description\&quot;: \&quot;This is an automation\&quot;, \&quot;Dynamic\&quot;: 0 })\n                  new_groupSid = res.text;\n                  expect(res.status).to.equal(200);\n                  expect(res.text).to.exist;\n                  expect(res.text).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c01bd789-f009-4cde-b4fa-81441183d915&quot;,&quot;parentUUID&quot;:&quot;614cfc26-aace-428d-9754-27d551efa00d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c01bd789-f009-4cde-b4fa-81441183d915&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;108ccf76-036f-4f93-afab-3bc199050769&quot;,&quot;title&quot;:&quot;POST /groups/members/{groupSid}/add&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups POST /groups/members/{groupSid}/add core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .post(&#x27;/groups/members/&#x27; + new_groupSid + &#x27;/add&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send([{ SID: system_user, ContactType: 1 }])\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;225c6021-18b1-4d51-a6ca-b9fb452e94c9&quot;,&quot;parentUUID&quot;:&quot;108ccf76-036f-4f93-afab-3bc199050769&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;225c6021-18b1-4d51-a6ca-b9fb452e94c9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;bde4cbd5-1f73-4c5a-b89d-35e6ba1f3466&quot;,&quot;title&quot;:&quot;POST /groups/members/{groupSid}/remove&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups POST /groups/members/{groupSid}/remove core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .post(&#x27;/groups/members/&#x27; + new_groupSid + &#x27;/remove&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send([{ SID: system_user, ContactType: 1 }])\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56f97d5f-0ac9-43cf-94f2-2f2821996296&quot;,&quot;parentUUID&quot;:&quot;bde4cbd5-1f73-4c5a-b89d-35e6ba1f3466&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;56f97d5f-0ac9-43cf-94f2-2f2821996296&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;641088b8-341f-457a-a724-c1d754f332e1&quot;,&quot;title&quot;:&quot;GET /groups​/{sid}​/delete&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups​/{sid}​/delete core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/&#x27; + new_groupSid + &#x27;/delete&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\nexpect(res.text).to.equal(&#x27;true&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1cc838d5-6cca-42ef-9719-3760e6c306b4&quot;,&quot;parentUUID&quot;:&quot;641088b8-341f-457a-a724-c1d754f332e1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1cc838d5-6cca-42ef-9719-3760e6c306b4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;e3f7609e-2963-4999-bf33-d0896470b589&quot;,&quot;title&quot;:&quot;GET /groups/list/simple&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/list/simple core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/list/simple&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body[0]).to.be.an(&#x27;array&#x27;).that.does.include(&#x27;Administrators&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81be5caf-7879-4af2-bf3d-74be38d5a8b5&quot;,&quot;parentUUID&quot;:&quot;e3f7609e-2963-4999-bf33-d0896470b589&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;81be5caf-7879-4af2-bf3d-74be38d5a8b5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;1f2cd6b9-5adb-4182-a117-92c006b2a95a&quot;,&quot;title&quot;:&quot;GET /groups/{sid}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/{sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/&#x27; + groupSid)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.SID).to.exist\nexpect(res.body.SID).to.be.guid\n// expect(res.).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6bd311f2-e600-419a-901c-5b0b3d07ba0b&quot;,&quot;parentUUID&quot;:&quot;1f2cd6b9-5adb-4182-a117-92c006b2a95a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6bd311f2-e600-419a-901c-5b0b3d07ba0b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;291b8cf9-7ec7-4bc6-993e-fbd4a166784d&quot;,&quot;title&quot;:&quot;GET /groups/listroleassociation/{groupSid}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/listroleassociation/{groupSid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/listroleassociation/&#x27; + groupSid)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body[0]).to.be.an(&#x27;array&#x27;).that.does.include(&#x27;System Administrators&#x27;);\n// expect(res.).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1fc7f4cb-6c52-427c-bac5-223438f9027f&quot;,&quot;parentUUID&quot;:&quot;291b8cf9-7ec7-4bc6-993e-fbd4a166784d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1fc7f4cb-6c52-427c-bac5-223438f9027f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;9caeae53-2ef8-4679-982b-1c6e7dc3ec82&quot;,&quot;title&quot;:&quot;GET /groups/select/{contact_sid}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/select/{contact_sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/select/&#x27; + system_user)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ed6e2e3-804a-47de-b3af-75d9d924d4a0&quot;,&quot;parentUUID&quot;:&quot;9caeae53-2ef8-4679-982b-1c6e7dc3ec82&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2ed6e2e3-804a-47de-b3af-75d9d924d4a0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;f0995435-737b-467e-ae4e-e871e5c505de&quot;,&quot;title&quot;:&quot;GET /groups​/nondynamic​/list​/simple&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups​/nondynamic​/list​/simple core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/nondynamic/list/simple&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3d9ba8bd-937b-437f-8097-51a8c94ae7be&quot;,&quot;parentUUID&quot;:&quot;f0995435-737b-467e-ae4e-e871e5c505de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3d9ba8bd-937b-437f-8097-51a8c94ae7be&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;7097255a-4db0-4595-87e0-420065ad105b&quot;,&quot;title&quot;:&quot;​GET /groups​/listmembers​/{sid}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups ​GET /groups​/listmembers​/{sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/listmembers/&#x27; + groupSid)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d87452fc-09f0-4f1c-88bf-b84cf721d75a&quot;,&quot;parentUUID&quot;:&quot;7097255a-4db0-4595-87e0-420065ad105b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d87452fc-09f0-4f1c-88bf-b84cf721d75a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;965abc37-af38-4194-9006-f88a54c89973&quot;,&quot;title&quot;:&quot;​GET /groups​/list​/{page}​/{count}​/{sort}​/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups ​GET /groups​/list​/{page}​/{count}​/{sort}​/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/list/0/10/Name/asc&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0ec8c2b7-ef47-4473-a3db-df13963a7d17&quot;,&quot;parentUUID&quot;:&quot;965abc37-af38-4194-9006-f88a54c89973&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0ec8c2b7-ef47-4473-a3db-df13963a7d17&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;c25fcea3-f697-4ea6-8a78-5c26f277926f&quot;,&quot;title&quot;:&quot;GET /groups/listbypage/{sid}/{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/listbypage/{sid}/{page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/listbypage/&#x27; + groupSid + &#x27;/0/10/Name/asc&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;86968f91-917b-41f8-ae31-7e2711d0d9a3&quot;,&quot;parentUUID&quot;:&quot;c25fcea3-f697-4ea6-8a78-5c26f277926f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;86968f91-917b-41f8-ae31-7e2711d0d9a3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;77de2425-a69c-461b-b7e3-5afe9f3f58c6&quot;,&quot;title&quot;:&quot;GET /groups/listprocessassociation/{sid}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/group.test.js&quot;,&quot;file&quot;:&quot;/test/group.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service groups GET /groups/listprocessassociation/{sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/groups/listprocessassociation/&#x27; + groupSid)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5f345f7e-cce9-428f-98b6-a02423a1712f&quot;,&quot;parentUUID&quot;:&quot;77de2425-a69c-461b-b7e3-5afe9f3f58c6&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5f345f7e-cce9-428f-98b6-a02423a1712f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;c99ddc46-aa9b-4cc4-85ff-3ba464220b58&quot;,&quot;title&quot;:&quot;Core Service Members&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/member.test.js&quot;,&quot;file&quot;:&quot;/test/member.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service Members \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a61eb2c-5054-4271-a859-c17f82d6fca6&quot;,&quot;parentUUID&quot;:&quot;c99ddc46-aa9b-4cc4-85ff-3ba464220b58&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7fbcd12d-9ef4-4c84-afa4-17883145cc51&quot;,&quot;title&quot;:&quot;{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/member.test.js&quot;,&quot;file&quot;:&quot;/test/member.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Members {page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/member/0/10/Name/Asc/script/?filter=&amp;include=3&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.text;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist\n// expect(res.).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f9e1834-82d0-4368-8e34-585fcf0082ef&quot;,&quot;parentUUID&quot;:&quot;7fbcd12d-9ef4-4c84-afa4-17883145cc51&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1f9e1834-82d0-4368-8e34-585fcf0082ef&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;67b0183b-b1c7-44e0-8c3c-8e7ed36d6d2b&quot;,&quot;title&quot;:&quot;Core Service myTasks&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/myTasks.test.js&quot;,&quot;file&quot;:&quot;/test/myTasks.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service myTasks \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5aee5c07-39ce-45ae-9023-a63d3da36f9e&quot;,&quot;parentUUID&quot;:&quot;67b0183b-b1c7-44e0-8c3c-8e7ed36d6d2b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1c1426dd-1f02-482d-9f9c-3bd78d307431&quot;,&quot;title&quot;:&quot;GEt {status}/{page}/{count}/{sort}/{dir}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/myTasks.test.js&quot;,&quot;file&quot;:&quot;/test/myTasks.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service myTasks GEt {status}/{page}/{count}/{sort}/{dir} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:91,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/myTasks/status/0/10/Name/Asc&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ac5a505a-ac5d-46e7-8813-edefc1b089e5&quot;,&quot;parentUUID&quot;:&quot;1c1426dd-1f02-482d-9f9c-3bd78d307431&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ac5a505a-ac5d-46e7-8813-edefc1b089e5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:91,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;8e7d0317-7a8f-4999-b8cf-ec9ef9370424&quot;,&quot;title&quot;:&quot;Core Service powerForm&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()\nlet test_yml = await getTestConfig();\ntest_data = test_yml.data;\n// //console.log(test_data);\nnew_role = &#x27;{ \&quot;Name\&quot;: \&quot;Qatest\&quot;, \&quot;ExtendedDescription\&quot;: \&quot;qa automated\&quot;, \&quot;OwnerSID\&quot;:&#x27; + test_data.object_sid + &#x27;, \&quot;OwnerType\&quot;: 2 }&#x27;\npowerform = {\n    CategorySID: test_data.category_sid,\n    Name: \&quot;test\&quot;,\n    PowerFormType: \&quot;0\&quot;,\n    Version: 1\n}\n// { \&quot;ID\&quot;: 9999, \&quot;Mode\&quot;: 2, \&quot;ObjectType\&quot;: 1, \&quot;RoleSID\&quot;: test_data.role_sid, \&quot;SID\&quot;: \&quot;90645d40-9de6-48b1-b689-0a610ef1d716\&quot;, \&quot;Permissions\&quot;: 0 }, { \&quot;ID\&quot;: 9999, \&quot;Mode\&quot;: 3, \&quot;ObjectType\&quot;: 1, \&quot;RoleSID\&quot;: \&quot;e513a6ec-cfea-4bcb-8b74-eebc3439c9fc\&quot;, \&quot;SID\&quot;: \&quot;4711a8f4-68be-4772-b389-0a610ef1d7fe\&quot;, \&quot;Permissions\&quot;: 0 }, { \&quot;ID\&quot;: 9999, \&quot;Mode\&quot;: 4, \&quot;ObjectType\&quot;: 1, \&quot;RoleSID\&quot;: \&quot;e513a6ec-cfea-4bcb-8b74-eebc3439c9fc\&quot;, \&quot;SID\&quot;: \&quot;b1e03457-e202-4a99-a389-0a610ef1d79d\&quot;, \&quot;Permissions\&quot;: 0 }, { \&quot;ID\&quot;: 0, \&quot;Mode\&quot;: 5, \&quot;ObjectType\&quot;: 1, \&quot;RoleSID\&quot;: \&quot;e513a6ec-cfea-4bcb-8b74-eebc3439c9fc\&quot;, \&quot;SID\&quot;: \&quot;f221751c-ba9f-4b19-9708-1f22372dffde\&quot;, \&quot;Permissions\&quot;: 1023 }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f09f49c0-53dc-4108-bdf3-9dee2d68acb2&quot;,&quot;parentUUID&quot;:&quot;8e7d0317-7a8f-4999-b8cf-ec9ef9370424&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;59f50e28-bbc0-4a5a-a8cd-2737d9d6c413&quot;,&quot;title&quot;:&quot;POST /Powerform/save&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm POST /Powerform/save core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/powerform/save&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(powerform)\nexpect(res.status).to.equal(200);\nsid = res.body.SID\n//console.log(sid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7748591a-1f38-41fb-b5d0-b54b889adee0&quot;,&quot;parentUUID&quot;:&quot;59f50e28-bbc0-4a5a-a8cd-2737d9d6c413&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7748591a-1f38-41fb-b5d0-b54b889adee0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;6f20eca9-37b2-451a-b432-107e385e9f57&quot;,&quot;title&quot;:&quot;GET /Powerform/{sid}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm GET /Powerform/{sid} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/powerform/&#x27; + sid)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;183bdb75-7f17-404c-bc18-9f0688514c85&quot;,&quot;parentUUID&quot;:&quot;6f20eca9-37b2-451a-b432-107e385e9f57&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;183bdb75-7f17-404c-bc18-9f0688514c85&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;0d93f15f-0eff-4ecf-9f81-90611cb85685&quot;,&quot;title&quot;:&quot;GET /Powerform/{sid}/detail&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm GET /Powerform/{sid}/detail core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/powerform/&#x27; + sid + &#x27;/detail&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0946f80-feca-4701-9a64-b12564ea9933&quot;,&quot;parentUUID&quot;:&quot;0d93f15f-0eff-4ecf-9f81-90611cb85685&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d0946f80-feca-4701-9a64-b12564ea9933&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;4cf9ca5d-fd50-4fcc-bb98-f9a89f3ed413&quot;,&quot;title&quot;:&quot;GET /Powerform/{sid}/delete&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/powerform.test.js&quot;,&quot;file&quot;:&quot;/test/powerform.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service powerForm GET /Powerform/{sid}/delete core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/powerform/&#x27; + sid + &#x27;/delete&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe07017d-0100-43b5-b18f-2660a1154e8e&quot;,&quot;parentUUID&quot;:&quot;4cf9ca5d-fd50-4fcc-bb98-f9a89f3ed413&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fe07017d-0100-43b5-b18f-2660a1154e8e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;2a379943-c219-4800-81c9-f9f4f79530e0&quot;,&quot;title&quot;:&quot;Core Service Process&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service Process \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken();\nlet test_yml = await getTestConfig();\ntest_data = test_yml.data;\nprc = { Name: new Date().toISOString(), Description: \&quot;Qa Automation\&quot;, CategorySID: test_data.category_sid }&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;51c79c37-65b6-48d8-aa9f-2d6258c9a7da&quot;,&quot;parentUUID&quot;:&quot;2a379943-c219-4800-81c9-f9f4f79530e0&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6974d9b1-c123-407e-8349-752ac87ca692&quot;,&quot;title&quot;:&quot;POST /process​/create|delete&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process POST /process​/create|delete core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:27,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/process/create&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(prc)\np1 = res.body.SID;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d7c04b3-1147-4a55-ad18-a10180a3971f&quot;,&quot;parentUUID&quot;:&quot;6974d9b1-c123-407e-8349-752ac87ca692&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;core service | Delete&quot;,&quot;fullTitle&quot;:&quot;Core Service Process POST /process​/create|delete core service | Delete&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:113,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/process/&#x27; + p1 + &#x27;/delete&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\nconsole.log(res);\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;405a80a9-39aa-4999-8500-1867ed1067b9&quot;,&quot;parentUUID&quot;:&quot;6974d9b1-c123-407e-8349-752ac87ca692&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8d7c04b3-1147-4a55-ad18-a10180a3971f&quot;,&quot;405a80a9-39aa-4999-8500-1867ed1067b9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:140,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;298396cb-45a5-4e79-8e91-ccf4475f4843&quot;,&quot;title&quot;:&quot;GET /process/{sid}/copy&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /process/{sid}/copy core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:789,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/processes/&#x27; + test_data.process_sid + &#x27;/copy&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            expect(res.status).to.equal(200);\n            //delete copied process\n            let del = await chai.request(newUrlBase)\n                .get(&#x27;/process/&#x27; + res.text + &#x27;/delete&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            expect(del.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e054d26-c2d5-4927-bd65-5a423c5fc9ea&quot;,&quot;parentUUID&quot;:&quot;298396cb-45a5-4e79-8e91-ccf4475f4843&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0e054d26-c2d5-4927-bd65-5a423c5fc9ea&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:789,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;735e5cc1-8f85-4a62-b876-ad28bbf007bc&quot;,&quot;title&quot;:&quot;GET /processes&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:44,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;373c933b-efeb-46e3-b862-9b282a12e70c&quot;,&quot;parentUUID&quot;:&quot;735e5cc1-8f85-4a62-b876-ad28bbf007bc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;373c933b-efeb-46e3-b862-9b282a12e70c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:44,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;8a086104-ca4b-4266-a924-c3a4064e8a72&quot;,&quot;title&quot;:&quot;GET /processes/{SID}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{SID} core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9933b6a9-43f9-4822-9a28-c5e4f86c66d5&quot;,&quot;parentUUID&quot;:&quot;8a086104-ca4b-4266-a924-c3a4064e8a72&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9933b6a9-43f9-4822-9a28-c5e4f86c66d5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;b99b0f2d-6b80-4037-9fbe-8b809c180ad9&quot;,&quot;title&quot;:&quot;GET /processes/{sid}/detail&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{sid}/detail core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/detail&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;64b1644a-d0f7-4166-9d1b-d41948aa72c0&quot;,&quot;parentUUID&quot;:&quot;b99b0f2d-6b80-4037-9fbe-8b809c180ad9&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;64b1644a-d0f7-4166-9d1b-d41948aa72c0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;2f01e2b0-1ff7-4413-a6ed-b3382f8393ed&quot;,&quot;title&quot;:&quot;GET /processes/{sid}/name&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{sid}/name core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/name&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.text)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3722974a-20e4-49bb-ab26-71c1b026f725&quot;,&quot;parentUUID&quot;:&quot;2f01e2b0-1ff7-4413-a6ed-b3382f8393ed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3722974a-20e4-49bb-ab26-71c1b026f725&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;859889c4-5eaa-42bb-914e-c49d1b2d4a55&quot;,&quot;title&quot;:&quot;GET ​/processes​/{sid}​/summary&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET ​/processes​/{sid}​/summary core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/summary&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.text)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;70e9c964-8701-4660-9298-89a4b4541cbc&quot;,&quot;parentUUID&quot;:&quot;859889c4-5eaa-42bb-914e-c49d1b2d4a55&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;70e9c964-8701-4660-9298-89a4b4541cbc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;d1ca9d45-7bba-4abe-8949-d184eae58f19&quot;,&quot;title&quot;:&quot;​GET /processes​/{process_sid}​/tasks&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process ​GET /processes​/{process_sid}​/tasks core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/tasks&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a293a44-cd80-431e-a8a7-f92f8e97e6ff&quot;,&quot;parentUUID&quot;:&quot;d1ca9d45-7bba-4abe-8949-d184eae58f19&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2a293a44-cd80-431e-a8a7-f92f8e97e6ff&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;0c34d44d-6aa4-46dc-b131-c59947cb8ec8&quot;,&quot;title&quot;:&quot;GET /processes/{process_sid}/tasks/{task_sid}/rules&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process GET /processes/{process_sid}/tasks/{task_sid}/rules core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/tasks/&#x27; + test_data.task_sid + &#x27;/rules&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4b8f8bef-bd72-49f1-8cbc-cd546fbb22ba&quot;,&quot;parentUUID&quot;:&quot;0c34d44d-6aa4-46dc-b131-c59947cb8ec8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4b8f8bef-bd72-49f1-8cbc-cd546fbb22ba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;fef41696-c080-463f-b524-dfca981defee&quot;,&quot;title&quot;:&quot;POST /processes/{process_sid}/tasks/{task_sid}/rules/update | reorder | delete &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/process.test.js&quot;,&quot;file&quot;:&quot;/test/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Process POST /processes/{process_sid}/tasks/{task_sid}/rules/update | reorder | delete  core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/tasks/&#x27; + test_data.task_sid + &#x27;/rules/update/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(rule)\nsids.one = res.body.SID;\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41f816ee-b8cf-479e-9bc2-0147b8c77c79&quot;,&quot;parentUUID&quot;:&quot;fef41696-c080-463f-b524-dfca981defee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;core service | reorder&quot;,&quot;fullTitle&quot;:&quot;Core Service Process POST /processes/{process_sid}/tasks/{task_sid}/rules/update | reorder | delete  core service | reorder&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let reorder = { \&quot;SID\&quot;: sids.two, \&quot;Ordinal\&quot;: 2, \&quot;ConditionType\&quot;: 1, \&quot;MatchGuid\&quot;: \&quot;\&quot;, \&quot;RecipientSID\&quot;: null, \&quot;DestinationAction\&quot;: \&quot;0\&quot; }\nlet res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/&#x27; + test_data.processes_sid + &#x27;/tasks/&#x27; + test_data.task_sid + &#x27;/rules/reorder/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(reorder)\n//console.log(res.body)\nexpect(res.status).to.equal(200);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;99b398c5-2ac8-4c43-87f6-b48633bddd8e&quot;,&quot;parentUUID&quot;:&quot;fef41696-c080-463f-b524-dfca981defee&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;41f816ee-b8cf-479e-9bc2-0147b8c77c79&quot;,&quot;99b398c5-2ac8-4c43-87f6-b48633bddd8e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;a1e6d112-7c79-4334-ad20-7125f208f460&quot;,&quot;title&quot;:&quot;Core Service processes/tasks&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()\nlet test_yml = await getTestConfig();\ntest_data = test_yml.data;\nrecipient = [{ \&quot;BaseObjectSID\&quot;: \&quot;\&quot;, \&quot;ContactType\&quot;: 2, \&quot;ReferenceObjectSID\&quot;: \&quot;\&quot;, \&quot;SID\&quot;: test_data.contact_sid }]&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c40bad5-6bf5-48ec-8aea-14de10bab379&quot;,&quot;parentUUID&quot;:&quot;a1e6d112-7c79-4334-ad20-7125f208f460&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;79e71b11-159e-4d66-a2eb-257191617a51&quot;,&quot;title&quot;:&quot;GET {sid}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {sid} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.task_sid)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01d5a1c0-9b79-430c-bc0e-993b1d5c3802&quot;,&quot;parentUUID&quot;:&quot;79e71b11-159e-4d66-a2eb-257191617a51&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;01d5a1c0-9b79-430c-bc0e-993b1d5c3802&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;61eca896-e88a-4fd8-813c-373e67f66ed3&quot;,&quot;title&quot;:&quot;GET {task_sid}/copy&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/copy core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:43,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/processes/tasks/&#x27; + test_data.task_sid + &#x27;/copy&#x27;)\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            //console.log(res.body);\n            coreResult = res.body;\n            //console.log(res.body);\n            expect(res.status).to.equal(200);\n            expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2889fe9-af57-418a-bf7e-bbcd74f44929&quot;,&quot;parentUUID&quot;:&quot;61eca896-e88a-4fd8-813c-373e67f66ed3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a2889fe9-af57-418a-bf7e-bbcd74f44929&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:43,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;0f6a2102-20a7-41c2-ad1d-44f8d0970fcf&quot;,&quot;title&quot;:&quot;GET {task_sid}/notification&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/notification core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/notification&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d1cbeed1-7960-49bb-821a-474bd985edb3&quot;,&quot;parentUUID&quot;:&quot;0f6a2102-20a7-41c2-ad1d-44f8d0970fcf&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d1cbeed1-7960-49bb-821a-474bd985edb3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;bb07a4b2-3ce9-4885-a4a3-7292279f78fc&quot;,&quot;title&quot;:&quot;GET {task_sid}/notification/restore&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/notification/restore core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/notification/restore&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8a3fb54a-fb98-4a7e-bc6d-5c6b0f342b0a&quot;,&quot;parentUUID&quot;:&quot;bb07a4b2-3ce9-4885-a4a3-7292279f78fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8a3fb54a-fb98-4a7e-bc6d-5c6b0f342b0a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;93b7d8c9-1c74-4c98-b52c-bd56dc90d9e0&quot;,&quot;title&quot;:&quot;GET {task_sid}/notification/{enabledisable}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/notification/{enabledisable} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/notification/enabled&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;195eb01c-fac2-4860-9782-144848b38577&quot;,&quot;parentUUID&quot;:&quot;93b7d8c9-1c74-4c98-b52c-bd56dc90d9e0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;195eb01c-fac2-4860-9782-144848b38577&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;eeb21655-6341-4dab-b802-4d8d4852ed47&quot;,&quot;title&quot;:&quot;POST notification/save&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks POST notification/save core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/tasks/notification/save&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(notification)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;54b8f18a-5bf7-4e8f-9ee7-2736f1f05a72&quot;,&quot;parentUUID&quot;:&quot;eeb21655-6341-4dab-b802-4d8d4852ed47&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;54b8f18a-5bf7-4e8f-9ee7-2736f1f05a72&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;91be4625-a5e6-4bb1-89fb-8686019446d5&quot;,&quot;title&quot;:&quot;GET {task_sid}/notification/advancedsettings&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/notification/advancedsettings core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/notification/advancesettings&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = JSON.stringify(res.body);\nexpect(res.status).to.equal(200);\n//   expect(res.body.ProcessID).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5cf79890-2e21-410c-8b4a-11b25acbd9b2&quot;,&quot;parentUUID&quot;:&quot;91be4625-a5e6-4bb1-89fb-8686019446d5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;5cf79890-2e21-410c-8b4a-11b25acbd9b2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;0e14742c-5d9d-4a84-aeaf-a71cbb1591d0&quot;,&quot;title&quot;:&quot;GET {task_sid}/recipients&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/recipients core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipients/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f357b8d2-c3c5-452d-8a0e-ed9cb7db8450&quot;,&quot;parentUUID&quot;:&quot;0e14742c-5d9d-4a84-aeaf-a71cbb1591d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f357b8d2-c3c5-452d-8a0e-ed9cb7db8450&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;7b2f7d32-4f35-411f-9ce3-3c391b83e73d&quot;,&quot;title&quot;:&quot;POST {task_sid}/recipients/add&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks POST {task_sid}/recipients/add core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipients/add&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(recipient);\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2980bc49-a7b6-48be-9b64-a20ac792f06d&quot;,&quot;parentUUID&quot;:&quot;7b2f7d32-4f35-411f-9ce3-3c391b83e73d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2980bc49-a7b6-48be-9b64-a20ac792f06d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;b9a37b4d-b839-42a1-adfc-d0ea37aa2a0d&quot;,&quot;title&quot;:&quot;POST {task_sid}/recipients/remove&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks POST {task_sid}/recipients/remove core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .post(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipients/remove&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n    .send(recipient);\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a2c01df0-42ca-4844-8a53-f2350188786c&quot;,&quot;parentUUID&quot;:&quot;b9a37b4d-b839-42a1-adfc-d0ea37aa2a0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a2c01df0-42ca-4844-8a53-f2350188786c&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;60ef5643-f44e-4e4e-a8d1-75ffc5b2b31a&quot;,&quot;title&quot;:&quot;GET {task_sid}/recipsettings&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET {task_sid}/recipsettings core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipsettings/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = JSON.stringify(res.body);\nexpect(res.status).to.equal(200);\n// expect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;95652394-6fbb-4cdb-ad09-83ab948d60c5&quot;,&quot;parentUUID&quot;:&quot;60ef5643-f44e-4e4e-a8d1-75ffc5b2b31a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;95652394-6fbb-4cdb-ad09-83ab948d60c5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;6341f5e0-c966-4161-80f5-4b5503c90c7a&quot;,&quot;title&quot;:&quot;GET task_sid}/recipients/dynamic&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/processTask.test.js&quot;,&quot;file&quot;:&quot;/test/processTask.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service processes/tasks GET task_sid}/recipients/dynamic core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:7,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/processes/tasks/&#x27; + test_data.pTask_sid + &#x27;/recipients/dynamic/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = JSON.stringify(res.body);\nexpect(res.status).to.equal(200);\nexpect(res.body.TotalItemCnt).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fc7aae71-3b69-4e35-aa46-52365beada18&quot;,&quot;parentUUID&quot;:&quot;6341f5e0-c966-4161-80f5-4b5503c90c7a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fc7aae71-3b69-4e35-aa46-52365beada18&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;23979a60-8d3e-441f-b1cd-f26b5a4314a2&quot;,&quot;title&quot;:&quot;Core Service systemmessages&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5fc67cb6-c2c5-4fa8-b3eb-1742ed55790f&quot;,&quot;parentUUID&quot;:&quot;23979a60-8d3e-441f-b1cd-f26b5a4314a2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e0302378-5507-421b-8c31-6078ca98ffd8&quot;,&quot;title&quot;:&quot;POST /systemmessages/save&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should save a systemmessage&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages POST /systemmessages/save it should save a systemmessage&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .post(&#x27;/systemmessages/save/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n      .send(testMsg)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\n\n// verify systemMessage is in the list\nres = await chai.request(newUrlBase)\n      .get(&#x27;/systemmessages/list/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst idx = res.body.Items.findIndex(item =&gt; item.MessageBody == testMsg.MessageBody);\nexpect(idx).to.be.greaterThan(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13250d82-3a45-4e68-b157-d2113ea76f50&quot;,&quot;parentUUID&quot;:&quot;e0302378-5507-421b-8c31-6078ca98ffd8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;13250d82-3a45-4e68-b157-d2113ea76f50&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;72f98b5a-3384-40af-9bd0-bcc82fda5d46&quot;,&quot;title&quot;:&quot;GET /systemmessages/list&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET all systemmessages&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages GET /systemmessages/list it should GET all systemmessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:8,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .get(&#x27;/systemmessages/list/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n  \ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;41178c5c-55b8-4bbe-af34-d8283844294f&quot;,&quot;parentUUID&quot;:&quot;72f98b5a-3384-40af-9bd0-bcc82fda5d46&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;41178c5c-55b8-4bbe-af34-d8283844294f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;796f2b4d-1e30-4d8e-8e7c-2b80e5e4e266&quot;,&quot;title&quot;:&quot;GET /systemmessages/active/list&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET active systemmessages&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages GET /systemmessages/active/list it should GET active systemmessages&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n  .get(&#x27;/systemmessages/active/list/script/&#x27;)\n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n  \ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78c9b563-52ba-48d3-ac98-7d9867bd5009&quot;,&quot;parentUUID&quot;:&quot;796f2b4d-1e30-4d8e-8e7c-2b80e5e4e266&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;78c9b563-52ba-48d3-ac98-7d9867bd5009&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;e7c67837-e37b-4728-aeb2-29b485c03e25&quot;,&quot;title&quot;:&quot;/systemmessages/{sid}}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should GET system message by SID&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages /systemmessages/{sid}} it should GET system message by SID&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:13,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n             .get(&#x27;/systemmessages/list/script/&#x27;)\n             .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n       \n             expect(res.status).to.equal(200);\n             expect(res.body.Items).to.exist;\n             const testSystemMsgSID = res.body.Items[0].SID;\n             res = await chai.request(newUrlBase)\n             .get(`/systemmessages/${testSystemMsgSID}/script/`)\n             .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n             expect(res.status).to.equal(200);\n             expect(res.body.SID).to.equal(testSystemMsgSID);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c4e1d4f-ebf8-4e32-9332-47afead82ffa&quot;,&quot;parentUUID&quot;:&quot;e7c67837-e37b-4728-aeb2-29b485c03e25&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0c4e1d4f-ebf8-4e32-9332-47afead82ffa&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:13,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;d314b990-5a58-4a29-b01d-81a6f864d809&quot;,&quot;title&quot;:&quot;GET /systemmessages/delete&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/systemmessage.test.js&quot;,&quot;file&quot;:&quot;/test/systemmessage.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should DELETE system message&quot;,&quot;fullTitle&quot;:&quot;Core Service systemmessages GET /systemmessages/delete it should DELETE system message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n      .get(&#x27;/systemmessages/list/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n      \nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst testSystemMsgSID = res.body.Items[0].SID;\nres = await chai.request(newUrlBase)\n  .post(&#x27;/systemmessages/delete/script/&#x27;) \n  .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n  .send([testSystemMsgSID])\n        \nexpect(res.status).to.equal(200);\nexpect(res.text).to.exist;\nexpect(res.text).to.equal(&#x27;1&#x27;);\n        \n// verify that system message is not in the list anymore\nres = await chai.request(newUrlBase)\n      .get(&#x27;/systemmessages/list/script/&#x27;)\n      .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token);\n\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;\nconst idx = res.body.Items.findIndex(item =&gt; item.SID == testSystemMsgSID);\nexpect(idx).to.equal(-1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2bcc9c74-c3e6-4645-9bee-76ab6a540d4f&quot;,&quot;parentUUID&quot;:&quot;d314b990-5a58-4a29-b01d-81a6f864d809&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2bcc9c74-c3e6-4645-9bee-76ab6a540d4f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;9cc1ddd2-1411-4e4a-96b9-68f4f3118540&quot;,&quot;title&quot;:&quot;Core Service System Process&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/systemProcess.test.js&quot;,&quot;file&quot;:&quot;/test/systemProcess.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service System Process \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f3fe93da-eb8b-4f64-9865-23c445938ea8&quot;,&quot;parentUUID&quot;:&quot;9cc1ddd2-1411-4e4a-96b9-68f4f3118540&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e8a655b9-7f66-47ae-9180-d882dd1ec51a&quot;,&quot;title&quot;:&quot;GET S/SystemProcess/list&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/systemProcess.test.js&quot;,&quot;file&quot;:&quot;/test/systemProcess.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;it should save a systemmessage&quot;,&quot;fullTitle&quot;:&quot;Core Service System Process GET S/SystemProcess/list it should save a systemmessage&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/SystemProcess/list&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Items).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d01a092-1159-49f5-aad3-fc235a062774&quot;,&quot;parentUUID&quot;:&quot;e8a655b9-7f66-47ae-9180-d882dd1ec51a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4d01a092-1159-49f5-aad3-fc235a062774&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:12,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;c3981e0c-9cfa-462f-baa4-2311cfe76ce9&quot;,&quot;title&quot;:&quot;Core Service system Settings&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/systemSettings.test.js&quot;,&quot;file&quot;:&quot;/test/systemSettings.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service system Settings \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a887fe4-0bba-4b54-a1fd-9241dec4e94c&quot;,&quot;parentUUID&quot;:&quot;c3981e0c-9cfa-462f-baa4-2311cfe76ce9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;84e84849-ec8c-41b0-baee-dadd02e0491b&quot;,&quot;title&quot;:&quot;GET /systemsettings/list&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/systemSettings.test.js&quot;,&quot;file&quot;:&quot;/test/systemSettings.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service system Settings GET /systemsettings/list core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:17,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/systemsettings/list/script/&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\n// expect(res.body.InstanceSID).to.exist\ncoreResult = res.body;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;55076580-85eb-42fe-8e91-fec6594f2b57&quot;,&quot;parentUUID&quot;:&quot;84e84849-ec8c-41b0-baee-dadd02e0491b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;55076580-85eb-42fe-8e91-fec6594f2b57&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:17,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;5e3d3d79-81fd-43ab-8a4d-fafcaccc746a&quot;,&quot;title&quot;:&quot;Core Service Tabs&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/tabs.test.js&quot;,&quot;file&quot;:&quot;/test/tabs.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service Tabs \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c483e52c-f086-4757-9d19-f285e56e0597&quot;,&quot;parentUUID&quot;:&quot;5e3d3d79-81fd-43ab-8a4d-fafcaccc746a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;35d6e07a-e998-490a-9618-0d9e36cf161c&quot;,&quot;title&quot;:&quot;GET {sid}&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/tabs.test.js&quot;,&quot;file&quot;:&quot;/test/tabs.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service&quot;,&quot;fullTitle&quot;:&quot;Core Service Tabs GET {sid} core-service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/tabs/5ffbf397-8b3a-4d06-a773-58158e39d46f/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Banner).to.exist\ncoreResult = res.body;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;85cf2d4c-27ed-4ae3-a1c1-66d362d63809&quot;,&quot;parentUUID&quot;:&quot;35d6e07a-e998-490a-9618-0d9e36cf161c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;85cf2d4c-27ed-4ae3-a1c1-66d362d63809&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;eae41fe0-9667-49bc-a671-8cae5c592433&quot;,&quot;title&quot;:&quot;GET {sid}/delete&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/tabs.test.js&quot;,&quot;file&quot;:&quot;/test/tabs.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core-service &quot;,&quot;fullTitle&quot;:&quot;Core Service Tabs GET {sid}/delete core-service &quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/tabs/5ffbf397-8b3a-4d06-a773-58158e39d46f/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body.Banner).to.exist\ncoreResult = res.body;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8440907f-7c1f-48b7-ac09-8670d9368bc3&quot;,&quot;parentUUID&quot;:&quot;eae41fe0-9667-49bc-a671-8cae5c592433&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8440907f-7c1f-48b7-ac09-8670d9368bc3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;d1302dad-1094-4438-bd77-26024d584436&quot;,&quot;title&quot;:&quot;Core Service Utilities&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/utilities.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Core Service Utilities \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntoken = await getAuthToken()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8d680891-7980-4967-b008-57aa4de1bf85&quot;,&quot;parentUUID&quot;:&quot;d1302dad-1094-4438-bd77-26024d584436&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5e1988e3-6849-4437-9f0a-813c8c8bb8cc&quot;,&quot;title&quot;:&quot;locale&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Utilities locale core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n                .get(&#x27;/Utilities/locales/&#x27;) //we can append the /script/ section of the url to match WCF. It will get stgripped by middleware\n                .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n            //console.log(res.body);\n            coreResult = res.body;\n            expect(res.status).to.equal(200);\n            // expect(res.text).to.exist;\n            // expect(res.text).to.be.a.guid()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a6f6b0e9-6511-4b34-a1e0-771ae0231ce8&quot;,&quot;parentUUID&quot;:&quot;5e1988e3-6849-4437-9f0a-813c8c8bb8cc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a6f6b0e9-6511-4b34-a1e0-771ae0231ce8&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;2e3da88e-cf11-407a-beba-d134bf88d173&quot;,&quot;title&quot;:&quot;GET /Utilities/timezone&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/core-service/test/utilities.test.js&quot;,&quot;file&quot;:&quot;/test/utilities.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;core service&quot;,&quot;fullTitle&quot;:&quot;Core Service Utilities GET /Utilities/timezone core service&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let res = await chai.request(newUrlBase)\n    .get(&#x27;/Utilities/timezone&#x27;)\n    .set(&#x27;Authorization&#x27;, &#x27;Bearer &#x27; + token)\n//console.log(res.body);\ncoreResult = res.body;\nexpect(res.status).to.equal(200);\nexpect(res.body[0]).to.be.an(&#x27;array&#x27;).that.does.include(&#x27;Etc/GMT+12&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;033b8e3c-e43a-44f4-93d8-f7a51aeb79fc&quot;,&quot;parentUUID&quot;:&quot;2e3da88e-cf11-407a-beba-d134bf88d173&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;033b8e3c-e43a-44f4-93d8-f7a51aeb79fc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:100000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:100000},{&quot;uuid&quot;:&quot;2db6d090-073d-44fa-a81e-22e92a705c04&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d609a9ef-3484-4f5d-b6f1-3ac3d142da5a&quot;,&quot;title&quot;:&quot;Integrify Libs JWT Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a4c0ac2-41f1-4403-8ccb-82d293f70547&quot;,&quot;parentUUID&quot;:&quot;d609a9ef-3484-4f5d-b6f1-3ac3d142da5a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;12ed6fe0-6630-42d7-bf39-c9f3c34b6248&quot;,&quot;title&quot;:&quot;getSystemToken&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a system token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests getSystemToken should return a system token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nlet token = await jwt.getSystemToken(process.env.INTEGRIFY_ENV_TOKEN, tenant)\nexpect(token).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7825b11a-cd3c-4904-b8cc-8ece16cee297&quot;,&quot;parentUUID&quot;:&quot;12ed6fe0-6630-42d7-bf39-c9f3c34b6248&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7825b11a-cd3c-4904-b8cc-8ece16cee297&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;88917c03-5517-41a7-8d78-ab27e60be82d&quot;,&quot;title&quot;:&quot;createRefreshToken&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a refresh token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests createRefreshToken should return a refresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet exists = await redis.zrankAsync(tenant + \&quot;.refreshTokens\&quot;, refreshToken)\nexpect(refreshToken).to.exist;\nexpect(exists !== null).to.be.true&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d9e771e-0e9f-4dc8-94e0-9d0dcb31e43b&quot;,&quot;parentUUID&quot;:&quot;88917c03-5517-41a7-8d78-ab27e60be82d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4d9e771e-0e9f-4dc8-94e0-9d0dcb31e43b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4afff9ca-a5d0-4056-8eae-f9a0f7bd7d9b&quot;,&quot;title&quot;:&quot;verifyRefreshToken&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true for the non-expired token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests verifyRefreshToken should return true for the non-expired token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet exists = await jwt.verifyRefreshToken(tenant, refreshToken, options)\nexpect(exists).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;407603d9-7c19-4a5e-8293-619c56def811&quot;,&quot;parentUUID&quot;:&quot;4afff9ca-a5d0-4056-8eae-f9a0f7bd7d9b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false for the expired token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests verifyRefreshToken should return false for the expired token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5002,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\nlet refreshToken = await jwt.createRefreshToken(tenant, options)\nawait delay(5000);\nlet exists = await jwt.verifyRefreshToken(tenant, refreshToken, options)\nexpect(exists).to.be.false\nexists = await redis.zrankAsync(tenant + \&quot;.refreshTokens\&quot;, refreshToken)\nexpect(exists === null).to.be.true&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;57e7abd9-53c3-411d-b9ae-d1952238ffce&quot;,&quot;parentUUID&quot;:&quot;4afff9ca-a5d0-4056-8eae-f9a0f7bd7d9b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;407603d9-7c19-4a5e-8293-619c56def811&quot;,&quot;57e7abd9-53c3-411d-b9ae-d1952238ffce&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5003,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c89e8341-7f48-4ce4-b1b4-c4fdb6a03131&quot;,&quot;title&quot;:&quot;issueJwt&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a JWT&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests issueJwt should return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\noptions.expiresInAmount = 15\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\n//let exists = await jwt.verifyRefreshToken(tenant, refreshToken, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\noptions.expiresInAmount = 5\nexpect(token).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;739c2716-4ba9-4b26-ae2e-7debbdeb3b18&quot;,&quot;parentUUID&quot;:&quot;c89e8341-7f48-4ce4-b1b4-c4fdb6a03131&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;739c2716-4ba9-4b26-ae2e-7debbdeb3b18&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6d2b29ba-b727-4397-b50e-ed7aafa8e931&quot;,&quot;title&quot;:&quot;verifyJwt&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a JWT&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests verifyJwt should return a JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\nlet verified = jwt.verifyJwt(token, options);\nexpect(verified).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;77a5b389-38cc-4c89-ae60-1ad57a60aaf9&quot;,&quot;parentUUID&quot;:&quot;6d2b29ba-b727-4397-b50e-ed7aafa8e931&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail for an expired JWT&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests verifyJwt should fail for an expired JWT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5004,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\nawait delay(5000);\nlet verified, error;\ntry {\n   verified = await jwt.verifyJwt(token, options)\n} catch(e) {\n    error = e;\n}\nexpect(error).to.exist\nexpect(error.name).to.equal(\&quot;TokenExpiredError\&quot;)\nexpect(verified).to.not.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2a8033f5-e6c6-4e3a-9fbf-4dca00d0cead&quot;,&quot;parentUUID&quot;:&quot;6d2b29ba-b727-4397-b50e-ed7aafa8e931&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;77a5b389-38cc-4c89-ae60-1ad57a60aaf9&quot;,&quot;2a8033f5-e6c6-4e3a-9fbf-4dca00d0cead&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5005,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;167ae226-21df-49aa-957d-0f8102e0a604&quot;,&quot;title&quot;:&quot;renewJwt&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a new JWT using a valid refresh token and an expired token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests renewJwt should return a new JWT using a valid refresh token and an expired token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3007,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\noptions.expiresInAmount = 5;\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\nawait delay(3000); //let the token JWT time out\nlet error;\ntry {\n    verified = await jwt.verifyJwt(token, options)\n } catch(e) {\n     error = e;\n}\nexpect(error).to.exist\nexpect(error.name).to.equal(\&quot;TokenExpiredError\&quot;)\ntoken = await jwt.renewJwt(token,refreshToken, options)\nexpect(token).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a46e137a-ac55-4bd4-8a85-d1173cd9da8a&quot;,&quot;parentUUID&quot;:&quot;167ae226-21df-49aa-957d-0f8102e0a604&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should fail to return a new JWT using a invalid refresh token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests renewJwt should fail to return a new JWT using a invalid refresh token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5005,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\noptions.expiresInAmount = 2;\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\nlet token = await jwt.issueJwt(Contact, refreshToken, options)\nawait delay(5000); //let the token JWT time out\nlet error;\ntry {\n    verified = await jwt.verifyJwt(token, options)\n } catch(e) {\n     error = e;\n}\nexpect(error).to.exist\nexpect(error.name).to.equal(\&quot;TokenExpiredError\&quot;)\ntry {\n    token = await jwt.renewJwt(token,refreshToken, options)\n} catch(e) {\n    error = e\n}\nexpect(error).to.exist\nexpect(error.name).to.equal(\&quot;TokenExpiredError\&quot;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5d082c4a-44a0-4b4f-a93e-05245a71fd4f&quot;,&quot;parentUUID&quot;:&quot;167ae226-21df-49aa-957d-0f8102e0a604&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a46e137a-ac55-4bd4-8a85-d1173cd9da8a&quot;,&quot;5d082c4a-44a0-4b4f-a93e-05245a71fd4f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8012,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;51bbac42-cc53-4789-b29b-87a5611fa8a5&quot;,&quot;title&quot;:&quot;reIssueJwt&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/auth/jwt.test.js&quot;,&quot;file&quot;:&quot;/test/integration/auth/jwt.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a new JWT using a valid refresh token and an Contact&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs JWT Tests reIssueJwt should return a new JWT using a valid refresh token and an Contact&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(50000);\noptions.expiresInAmount = 5;\nlet refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload, options)\ntoken = await jwt.reIssueJwt(Contact,refreshToken, options)\nexpect(token).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6dfa181f-cfbe-43e3-b01c-0e89ecdb490e&quot;,&quot;parentUUID&quot;:&quot;51bbac42-cc53-4789-b29b-87a5611fa8a5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6dfa181f-cfbe-43e3-b01c-0e89ecdb490e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2ae79927-c56d-46f6-a1ec-996ff9b7e826&quot;,&quot;title&quot;:&quot;Integrify Libs Config Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/config/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;19f2b9ba-77d6-43c8-bf5a-49d6966e27a8&quot;,&quot;title&quot;:&quot;Config&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/config/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config/config.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Config Tests Config \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c92c96f7-f8d4-44e9-84d3-0fab97bfd94e&quot;,&quot;parentUUID&quot;:&quot;19f2b9ba-77d6-43c8-bf5a-49d6966e27a8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;eb215a78-9008-48af-bfc5-a8c7bb613a4f&quot;,&quot;title&quot;:&quot;get a config from redis&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/config/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should have config.mongo&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Config Tests Config get a config from redis should have config.mongo&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(config.mongo).to.exist;\n                //expect(true).to.equal(true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;909bd844-9b10-4703-b657-de8f919293f6&quot;,&quot;parentUUID&quot;:&quot;eb215a78-9008-48af-bfc5-a8c7bb613a4f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;909bd844-9b10-4703-b657-de8f919293f6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;a4a6ff82-1f8e-486a-818b-90211d1c96d5&quot;,&quot;title&quot;:&quot;log the latest git commit&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/config/config.test.js&quot;,&quot;file&quot;:&quot;/test/integration/config/config.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return the lates git commit&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Config Tests Config log the latest git commit should return the lates git commit&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let commit = Config.logRunningGitCommit(&#x27;integrify-libs&#x27;, true);\nexpect(commit).to.exist;\n//expect(true).to.equal(true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e498272e-c32b-4359-9a7c-07e6bcebbc2d&quot;,&quot;parentUUID&quot;:&quot;a4a6ff82-1f8e-486a-818b-90211d1c96d5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e498272e-c32b-4359-9a7c-07e6bcebbc2d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c5ad6478-4d5d-4701-b1a5-d4e31a9b87fb&quot;,&quot;title&quot;:&quot;Integrify Libs Logger Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/logger/logger.test.js&quot;,&quot;file&quot;:&quot;/test/integration/logger/logger.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;318b4b61-b042-47e7-99f3-de9aa12d891f&quot;,&quot;title&quot;:&quot;Logger&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/logger/logger.test.js&quot;,&quot;file&quot;:&quot;/test/integration/logger/logger.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Logger Tests Logger \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nconfig = config.test;\nthis.timeout(105000);\n//let deletes = await redis.delAsync([`${session.tenant}.permissions.${session.user_sid}`]);\n//cnsole.log(deletes)\n//process.env.DEBUG=\&quot;knex:query\&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1fa270f6-dca0-4af6-bd0a-55ee22acdc38&quot;,&quot;parentUUID&quot;:&quot;318b4b61-b042-47e7-99f3-de9aa12d891f&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;e3467f7d-f7bd-497f-9d64-3ad0d52e3759&quot;,&quot;title&quot;:&quot;info&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/logger/logger.test.js&quot;,&quot;file&quot;:&quot;/test/integration/logger/logger.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should connect log a message&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Logger Tests Logger info should connect log a message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;logger.info(config.tenantOne.tenantId);\n  \nexpect(logger).to.exist;\n              \n//expect(true).to.equal(true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7250ed0b-b508-4ed2-a4f4-0d1003302672&quot;,&quot;parentUUID&quot;:&quot;e3467f7d-f7bd-497f-9d64-3ad0d52e3759&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7250ed0b-b508-4ed2-a4f4-0d1003302672&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;56704179-4c4d-46b5-9bbe-e06fe27ded8e&quot;,&quot;title&quot;:&quot;Integrify Libs Parse JWT Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/middleware/parseJWT.test.js&quot;,&quot;file&quot;:&quot;/test/integration/middleware/parseJWT.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Parse JWT Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);        config = await Config.getConfig()\nContact = {\n    contactSid: \&quot;1234\&quot;,\n    userName: \&quot;testuser\&quot;,\n    tenant: config.test.tenantOne.tenantId,\n    email: \&quot;test@test.com\&quot;,\n    name: \&quot;Test User\&quot;\n}\nrefreshTokenPayload = {userName: Contact.userName, contactSid: Contact.contactSid}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;11f7f06d-a414-41f6-8b66-d408d4b22580&quot;,&quot;parentUUID&quot;:&quot;56704179-4c4d-46b5-9bbe-e06fe27ded8e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;252a3cf6-d127-40b6-a290-09fbc12bfbb4&quot;,&quot;title&quot;:&quot;parse token&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/middleware/parseJWT.test.js&quot;,&quot;file&quot;:&quot;/test/integration/middleware/parseJWT.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return extract data from a token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Parse JWT Tests parse token should return extract data from a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let refreshToken = await jwt.createRefreshToken(tenant, refreshTokenPayload)\n\ntoken = jsonwebtoken.sign(Contact, config.jwtSecret, {\&quot;audience\&quot;: config.test.tenantOne.tenantId});\nlet req = {headers: {authorization: \&quot;Bearer \&quot; + token}, cookies: {integrifyRefreshToken: refreshToken}}\nawait parseJWT(req, {status:200}, function(){})\nexpect(req.oauth.profile).to.exist;\nexpect(req.oauth.profile.sid).to.equal(\&quot;1234\&quot;);\nexpect(req.oauth.profile.user_name).to.equal(\&quot;testuser\&quot;);\nexpect(req.oauth.tenant).to.equal(config.test.tenantOne.tenantId)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e4b47d6-e1b1-4440-ab65-0cd1142ae952&quot;,&quot;parentUUID&quot;:&quot;252a3cf6-d127-40b6-a290-09fbc12bfbb4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0e4b47d6-e1b1-4440-ab65-0cd1142ae952&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000},{&quot;uuid&quot;:&quot;a484d46f-5bd0-4663-a1f6-5cfa2702414b&quot;,&quot;title&quot;:&quot;auto refresh and parse token&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/middleware/parseJWT.test.js&quot;,&quot;file&quot;:&quot;/test/integration/middleware/parseJWT.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return extract data from a token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Parse JWT Tests auto refresh and parse token should return extract data from a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20021,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let refreshToken = await jwt.createRefreshToken(Contact.tenant, refreshTokenPayload)\n\ntoken = jsonwebtoken.sign(Contact, config.jwtSecret, {\&quot;audience\&quot;: Contact.tenant, expiresIn:1});\n           \nawait delay(20000)\nlet req = {headers: {authorization: \&quot;Bearer \&quot; + token}, cookies: {integrifyRefreshToken: refreshToken}}\n          \nlet mockRes = await mocks.mockResponse();\n\nawait parseJWT(req, mockRes, function(){})\nexpect(req.oauth.profile).to.exist;\nexpect(req.oauth.profile.sid).to.equal(\&quot;1234\&quot;);\nexpect(req.oauth.profile.user_name).to.equal(\&quot;testuser\&quot;);\nexpect(req.oauth.tenant).to.equal(config.test.tenantOne.tenantId)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;aacdcef2-19c2-4b8b-9673-d9ad1028d095&quot;,&quot;parentUUID&quot;:&quot;a484d46f-5bd0-4663-a1f6-5cfa2702414b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;aacdcef2-19c2-4b8b-9673-d9ad1028d095&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:20021,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000},{&quot;uuid&quot;:&quot;9c125e02-589d-4cb4-a996-77fb8de4f496&quot;,&quot;title&quot;:&quot;use system token&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/middleware/parseJWT.test.js&quot;,&quot;file&quot;:&quot;/test/integration/middleware/parseJWT.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return extract data from a token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Parse JWT Tests use system token should return extract data from a token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let req = {headers: {\&quot;integrify-system-token\&quot;: config.test.tenantOne.tenantId + \&quot; \&quot; +  process.env.INTEGRIFY_ENV_TOKEN}}\nawait parseJWT(req, {status:200}, function(){})\nexpect(req.oauth.profile).to.exist;\nexpect(req.oauth.profile.sid).to.equal(\&quot;d8c469c3-f781-4179-a09c-6d148885fb30\&quot;);\nexpect(req.oauth.profile.user_name).to.equal(\&quot;Integrify\&quot;);\nexpect(req.oauth.tenant).to.equal(config.test.tenantOne.tenantId)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8f562ce1-8c2a-4aba-8088-b4e0acb08a0d&quot;,&quot;parentUUID&quot;:&quot;9c125e02-589d-4cb4-a996-77fb8de4f496&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;8f562ce1-8c2a-4aba-8088-b4e0acb08a0d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000},{&quot;uuid&quot;:&quot;68833516-bb9a-4066-85c7-5386fb0c3b2b&quot;,&quot;title&quot;:&quot;Integrify Libs Mongeese Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/mongeese/db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/mongeese/db.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6e2f83a1-03de-47e5-8e2a-1c48f9794011&quot;,&quot;title&quot;:&quot;Mongeese&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/mongeese/db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/mongeese/db.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Mongeese Tests Mongeese \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nconsole.log(config)\nconfig = config.test;\nthis.timeout(105000);\n//let deletes = await redis.delAsync([`${session.tenant}.permissions.${session.user_sid}`]);\n//cnsole.log(deletes)\n//process.env.DEBUG=\&quot;knex:query\&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1c655cbb-09c0-4eb6-a877-de5f5a766edc&quot;,&quot;parentUUID&quot;:&quot;6e2f83a1-03de-47e5-8e2a-1c48f9794011&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5f8fb851-ae41-4900-9f56-bd50309a4ab3&quot;,&quot;title&quot;:&quot;mongoConn&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/mongeese/db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/mongeese/db.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should connect to mongo based on a tenant id&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Mongeese Tests Mongeese mongoConn should connect to mongo based on a tenant id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const tenantId = await config.tenantOne.tenantId;\nvar db = await mongeese.getConn(tenantId);\n    \nexpect(db).to.exist;\nexpect(db.name).to.equal(tenantId);\nexpect(db.readyState).to.equal(2);\n//expect(true).to.equal(true)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;56624b6c-55b6-4210-8bee-c44c1f09f865&quot;,&quot;parentUUID&quot;:&quot;5f8fb851-ae41-4900-9f56-bd50309a4ab3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;56624b6c-55b6-4210-8bee-c44c1f09f865&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8dd97a93-356e-429c-a8d1-1440ec11e939&quot;,&quot;title&quot;:&quot;Integrify Libs Permissions Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/permissions/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/permissions/permissions.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\nlet config = await Config.getConfig();\nconfig = config.test;\nsession = {user_sid: config.tenantOne.adminUser.sid.toLowerCase(), user_name: config.tenantOne.adminUser.userName, tenant: config.tenantOne.tenantId }\nlet deletes = await redis.delAsync([`${session.tenant}.permissions.${session.user_sid}`]);\nconsole.log(deletes)\n//process.env.DEBUG=\&quot;knex:query\&quot;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a36174c5-44fa-4763-8797-883a9ed444e6&quot;,&quot;parentUUID&quot;:&quot;8dd97a93-356e-429c-a8d1-1440ec11e939&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await redis.delAsync([`${session.tenant}.permissions.${session.user_sid}`]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;59538231-4073-464d-a1ea-f66c9e65d936&quot;,&quot;parentUUID&quot;:&quot;8dd97a93-356e-429c-a8d1-1440ec11e939&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;23b98647-574d-4ea9-aa45-17b21e1c4340&quot;,&quot;title&quot;:&quot;currentUserPermssions&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/permissions/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/permissions/permissions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should cache and return the current users permssiosn based on a passed-in session&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests currentUserPermssions should cache and return the current users permssiosn based on a passed-in session&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:187,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nlet perms = await permissions.currentUserPermissions(session);\nlet cached =  await redis.getAsync([`${session.tenant}.permissions.${session.user_sid}`]);\ncached = JSON.parse(cached)\nexpect(perms).length.to.be.gt(0);\nexpect(cached.length).to.equal(perms.length)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7d8596d1-b8a3-4943-8bbf-e476e0e2e3c9&quot;,&quot;parentUUID&quot;:&quot;23b98647-574d-4ea9-aa45-17b21e1c4340&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7d8596d1-b8a3-4943-8bbf-e476e0e2e3c9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:187,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;af63fc76-12b0-4a3d-8bcd-17824f54802c&quot;,&quot;title&quot;:&quot;isSysAdmin&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/permissions/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/permissions/permissions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should cache and return the current users permssiosn based on a passed-in session&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests isSysAdmin should cache and return the current users permssiosn based on a passed-in session&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nlet perms = await permissions.isSysAdmin(session);\nexpect(perms).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;035ea055-7eea-4e87-b117-10fe8012151d&quot;,&quot;parentUUID&quot;:&quot;af63fc76-12b0-4a3d-8bcd-17824f54802c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;035ea055-7eea-4e87-b117-10fe8012151d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;70abb584-a40b-4b28-bc33-49ccfe141f1c&quot;,&quot;title&quot;:&quot;hasPermissions&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/permissions/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/permissions/permissions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return true for sysAdmin permissions&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return true for sysAdmin permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.sysAdmin);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    \&quot;irrelevantObjectGuid\&quot;,\n    \&quot;irrelevantCategoryGuid\&quot;, \&quot;irrelevantPublishStatus\&quot;);\nexpect(hasPerms).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ba8a8d0e-ae91-4004-90cb-f28a112569f8&quot;,&quot;parentUUID&quot;:&quot;70abb584-a40b-4b28-bc33-49ccfe141f1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return true for System scoped permissions&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return true for System scoped permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.systemScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    \&quot;irrelevantObjectGuid\&quot;,\n    \&quot;irrelevantCategoryGuid\&quot;,\n    \&quot;irrelevantPublishStatus\&quot;);\nexpect(hasPerms).to.be.true;\nlet perms = await permissions.isSysAdmin(session);\nexpect(perms).to.be.undefined&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ab194d6-0657-44e2-8196-2aa787e976d0&quot;,&quot;parentUUID&quot;:&quot;70abb584-a40b-4b28-bc33-49ccfe141f1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return true for category scoped permissions&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return true for category scoped permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.categoryScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    \&quot;irrelevantObjectGuid\&quot;,\n    mocks.categoryScoped[0].ownerSid,\n    mocks.categoryScoped[0].publishStatus);\nexpect(hasPerms).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bfad262c-dfb8-4eda-a1f8-9abba1aca0bf&quot;,&quot;parentUUID&quot;:&quot;70abb584-a40b-4b28-bc33-49ccfe141f1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return true for Object scoped permissions&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return true for Object scoped permissions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.objectScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    mocks.objectScoped[0].ownerSid,\n    \&quot;irrelevantCategoryGuid\&quot;,\n    mocks.categoryScoped[0].publishStatus);\nexpect(hasPerms).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dac2d6af-cd3a-45c6-abab-7136c652314d&quot;,&quot;parentUUID&quot;:&quot;70abb584-a40b-4b28-bc33-49ccfe141f1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false for Object scoped permissions with wrong publish status&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return false for Object scoped permissions with wrong publish status&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.objectScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edit&#x27;,\n    mocks.objectScoped[0].ownerSid,\n    \&quot;irrelevantCategoryGuid\&quot;,\n    \&quot;production\&quot;);\nexpect(hasPerms).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;71400458-f49b-446c-9b65-ac7504d36aef&quot;,&quot;parentUUID&quot;:&quot;70abb584-a40b-4b28-bc33-49ccfe141f1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return false for bogus permission type&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Tests hasPermissions should return false for bogus permission type&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(5000);\nawait permissions.cachePerms(session, mocks.objectScoped);\nlet hasPerms = await permissions.hasPermissions(session,\n    &#x27;process&#x27;,\n    &#x27;edizt&#x27;,\n    mocks.objectScoped[0].ownerSid,\n    \&quot;irrelevantCategoryGuid\&quot;,\n    mocks.categoryScoped[0].publishStatus);\nexpect(hasPerms).to.be.false;\nhasPerms = await permissions.hasPermissions(session,\n    &#x27;holiday&#x27;,\n    &#x27;viewconfig&#x27;);\nexpect(hasPerms).to.be.false&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a05070d7-e362-476c-a841-d4193e83f4fe&quot;,&quot;parentUUID&quot;:&quot;70abb584-a40b-4b28-bc33-49ccfe141f1c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ba8a8d0e-ae91-4004-90cb-f28a112569f8&quot;,&quot;1ab194d6-0657-44e2-8196-2aa787e976d0&quot;,&quot;bfad262c-dfb8-4eda-a1f8-9abba1aca0bf&quot;,&quot;dac2d6af-cd3a-45c6-abab-7136c652314d&quot;,&quot;71400458-f49b-446c-9b65-ac7504d36aef&quot;,&quot;a05070d7-e362-476c-a841-d4193e83f4fe&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;979f2f76-4576-4bb8-a7d0-e77ca3d32df6&quot;,&quot;title&quot;:&quot;Integrify Libs SwaggerClient Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/serviceClient/serviceClient.test.js&quot;,&quot;file&quot;:&quot;/test/integration/serviceClient/serviceClient.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f6dcaa56-f65f-423c-b1b0-de1005a724cc&quot;,&quot;title&quot;:&quot;Test portalUrl&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/serviceClient/serviceClient.test.js&quot;,&quot;file&quot;:&quot;/test/integration/serviceClient/serviceClient.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs SwaggerClient Tests Test portalUrl \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//config = await Config.getConfig()\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b2275ba2-811b-4159-8c0d-067eb0018190&quot;,&quot;parentUUID&quot;:&quot;f6dcaa56-f65f-423c-b1b0-de1005a724cc&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;908fb35a-3e71-459d-a222-f950ac0b3edc&quot;,&quot;title&quot;:&quot;first check PORTAL_URL env var, then check redis&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/serviceClient/serviceClient.test.js&quot;,&quot;file&quot;:&quot;/test/integration/serviceClient/serviceClient.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should have gotten portalUrl from redis&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs SwaggerClient Tests Test portalUrl first check PORTAL_URL env var, then check redis should have gotten portalUrl from redis&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;process.env.PORTAL_URL = &#x27;&#x27;\nconst serviceClient = new ServiceClient(&#x27;constructor param no longer used&#x27;)\nconst portalUrl = await serviceClient._getPortalUrl()\nexpect(portalUrl).to.exist\nexpect(portalUrl.startsWith(&#x27;http&#x27;)).to.be.true&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9def340e-7a81-4271-850b-8f7a683f9c75&quot;,&quot;parentUUID&quot;:&quot;908fb35a-3e71-459d-a222-f950ac0b3edc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9def340e-7a81-4271-850b-8f7a683f9c75&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0a99f81a-762c-4f0f-b24b-cbafa4c5463d&quot;,&quot;title&quot;:&quot;Integrify Libs Contact Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/contacts.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/contacts.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;1b095d7b-4f20-49ed-979b-f96f142bd938&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/contacts.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/contacts.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig();\nuser = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db449776-8883-45c4-897d-98b66e4ecdbd&quot;,&quot;parentUUID&quot;:&quot;1b095d7b-4f20-49ed-979b-f96f142bd938&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should getContact&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should getContact&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:36,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nconst ContactModel = await model.getModel(config.test.tenantOne.tenantId, &#x27;Contact&#x27;)\n//console.dir(ContactModel)\nlet results = await ContactModel.query()\n//console.log(results)\nexpect(results.length).to.be.gt(0)\nlet sampleContactGuid = results[0].contactGuid\nlet contactController = new ContactController(config.test.tenantOne)\nconst Contact = await contactController.getContact(sampleContactGuid);\nexpect(Contact).to.exist;\nexpect(Contact.contactGuid).equal(sampleContactGuid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e9427486-a52a-4b31-abe6-359b7b0d1ba4&quot;,&quot;parentUUID&quot;:&quot;1b095d7b-4f20-49ed-979b-f96f142bd938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getContactByUserName&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should getContactByUserName&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nlet sampleUserName = user.userName\nlet contactController = new ContactController(config.test.tenantOne)\nconst Contact = await contactController.getContactByUserName(sampleUserName);\nexpect(Contact).to.exist;\nexpect(Contact.userName).equal(sampleUserName)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;db5e0fe6-a50c-4739-8ff9-5e732df1e6b8&quot;,&quot;parentUUID&quot;:&quot;1b095d7b-4f20-49ed-979b-f96f142bd938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should searchContacts&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should searchContacts&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne)\n            let Contacts = await contactController.searchContacts({&#x27;auth.userName&#x27;: &#x27;iApprov&#x27;, firstName: &#x27;Sys&#x27;, lastName: &#x27;S&#x27;});\n            expect(Contacts[0]).to.exist;\n            expect(Contacts[0].userName).equal(&#x27;iApprove&#x27;)\n            Contacts = await contactController.searchContacts({&#x27;auth.userName&#x27;: &#x27;iApprove&#x27;});\n            let Contact = Contacts[0]\n            expect(Contact).to.exist;\n            expect(Contact.userName).equal(&#x27;iApprove&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;93250d25-15b9-41f9-8260-e61c5d2ba3c7&quot;,&quot;parentUUID&quot;:&quot;1b095d7b-4f20-49ed-979b-f96f142bd938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should dbAuthContact&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should dbAuthContact&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:124,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\n            const Contact = await contactController.dbAuthContact(user.userName, user.password)\n            expect(Contact).to.exist;\n            expect(Contact.token).to.exist;\n            expect(Contact.refreshToken).to.exist;\n            expect(Contact).to.have.property(&#x27;passwordResetDate&#x27;);\n            expect(Contact.userName).equal(user.userName);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f9c6daa6-016d-43ca-adac-c92f045ba6ea&quot;,&quot;parentUUID&quot;:&quot;1b095d7b-4f20-49ed-979b-f96f142bd938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should indicate that juser password is not expired (passwordResetDate 2121)&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should indicate that juser password is not expired (passwordResetDate 2121)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\nconst isPasswordExpired = await contactController.isPasswordExpired(&#x27;juser&#x27;)\n\nexpect(isPasswordExpired).to.exist\nexpect(isPasswordExpired).to.be.false&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;37f55062-0a51-475a-aa37-cd3b3abd6a33&quot;,&quot;parentUUID&quot;:&quot;1b095d7b-4f20-49ed-979b-f96f142bd938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should indicate that password is expired (passwordResetDate is NULL)&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should indicate that password is expired (passwordResetDate is NULL)&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\nconst isPasswordExpired = await contactController.isPasswordExpired(user.userName)\n\nexpect(isPasswordExpired).to.exist\nexpect(isPasswordExpired).to.be.true&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;48ad26e6-547a-4b61-8c1b-1878525683bb&quot;,&quot;parentUUID&quot;:&quot;1b095d7b-4f20-49ed-979b-f96f142bd938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getGroupSids&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should getGroupSids&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:106,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\n            const Contact = await contactController.dbAuthContact(user.userName, user.password)\n            expect(Contact).to.exist;\n            let groupSids = await contactController.getGroupSids(Contact.contactSid)\n            expect(groupSids.length).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce8c304d-5fad-430d-8093-f120e01370b6&quot;,&quot;parentUUID&quot;:&quot;1b095d7b-4f20-49ed-979b-f96f142bd938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getAccountsByEmail&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should getAccountsByEmail&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\nlet Contacts = await contactController.getAccountsByEmail(config.test.tenantOne.adminUser.email);\nexpect(Contacts.length).to.be.gt(0);\nContacts.forEach(contact =&gt; {\n  expect(contact).to.have.all.keys(&#x27;contactGuid&#x27;, &#x27;ntId&#x27;, &#x27;email&#x27;);\n  expect(contact.email).to.equal(config.test.tenantOne.adminUser.email);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e5cd630-94aa-43fc-972e-5d125514d739&quot;,&quot;parentUUID&quot;:&quot;1b095d7b-4f20-49ed-979b-f96f142bd938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should updatePassword&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Contact Model Tests tests should updatePassword&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:135,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let contactController = new ContactController(config.test.tenantOne);\nlet Contact = await contactController.updatePassword(\n  config.test.tenantOne.adminUser.sid,\n  bcrypt.hashSync(config.test.tenantOne.adminUser.password)\n);\nexpect(Contact).to.exist\n  .and.to.equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9a7288bb-fdcc-44d9-8660-808b817676e5&quot;,&quot;parentUUID&quot;:&quot;1b095d7b-4f20-49ed-979b-f96f142bd938&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e9427486-a52a-4b31-abe6-359b7b0d1ba4&quot;,&quot;db5e0fe6-a50c-4739-8ff9-5e732df1e6b8&quot;,&quot;93250d25-15b9-41f9-8260-e61c5d2ba3c7&quot;,&quot;f9c6daa6-016d-43ca-adac-c92f045ba6ea&quot;,&quot;37f55062-0a51-475a-aa37-cd3b3abd6a33&quot;,&quot;48ad26e6-547a-4b61-8c1b-1878525683bb&quot;,&quot;ce8c304d-5fad-430d-8093-f120e01370b6&quot;,&quot;2e5cd630-94aa-43fc-972e-5d125514d739&quot;,&quot;9a7288bb-fdcc-44d9-8660-808b817676e5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:433,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;86982906-66bf-4069-94f9-2f8355f20ce6&quot;,&quot;title&quot;:&quot;Integrify Libs Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/controller.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0a26a098-7d53-401d-b049-8a270b4a4496&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/controller.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/controller.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Controller Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig();\nuser = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b13d2fe2-9be5-4bd2-b6f5-fbc088554a07&quot;,&quot;parentUUID&quot;:&quot;0a26a098-7d53-401d-b049-8a270b4a4496&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Controller Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(controllers.BaseController).to.exist;\nclass TestController extends controllers.BaseController {}            \nconst testController = new TestController(config.test.tenantOne)\nlet tenantDb =  await testController.getTenantDb()\n\nexpect(tenantDb).to.exist&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36e84a19-b063-459e-af42-40632fedfdfc&quot;,&quot;parentUUID&quot;:&quot;0a26a098-7d53-401d-b049-8a270b4a4496&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;36e84a19-b063-459e-af42-40632fedfdfc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;399681a5-d06c-49e4-a781-bca8ffd02d36&quot;,&quot;title&quot;:&quot;Integrify Libs Data Instance Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/data-instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/data-instance.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig();\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;65fd539e-6527-41bd-8df9-36b6f8181761&quot;,&quot;parentUUID&quot;:&quot;399681a5-d06c-49e4-a781-bca8ffd02d36&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;f9059b57-93f3-45c0-96a1-6f0ffa5314de&quot;,&quot;title&quot;:&quot;Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/data-instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/data-instance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a consumer model&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Model Tests should get a consumer model&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const DataInstanceModel = await model.getConsumerModel(config.consumersConn, &#x27;DataInstance&#x27;)\nexpect(DataInstanceModel).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed4eff6b-eb0c-41b3-a2b5-c0aa6c7a931b&quot;,&quot;parentUUID&quot;:&quot;f9059b57-93f3-45c0-96a1-6f0ffa5314de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return data instances&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Model Tests should return data instances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:12,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const DataInstanceModel = await model.getConsumerModel(config.consumersConn, &#x27;DataInstance&#x27;)\nexpect(DataInstanceModel).to.exist;\nlet results = await DataInstanceModel.query()\nexpect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7badb91e-6603-4971-8472-9645cbb622e6&quot;,&quot;parentUUID&quot;:&quot;f9059b57-93f3-45c0-96a1-6f0ffa5314de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should return data instances with settings&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Model Tests should return data instances with settings&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const DataInstanceModel = await model.getConsumerModel(config.consumersConn, &#x27;DataInstance&#x27;)\nexpect(DataInstanceModel).to.exist;\nlet results = await DataInstanceModel.query().eager(&#x27;[dataInstanceSettings]&#x27;)\nconsole.dir(results)\nexpect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d36e7256-dc47-42a8-b84e-da27726cc996&quot;,&quot;parentUUID&quot;:&quot;f9059b57-93f3-45c0-96a1-6f0ffa5314de&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ed4eff6b-eb0c-41b3-a2b5-c0aa6c7a931b&quot;,&quot;7badb91e-6603-4971-8472-9645cbb622e6&quot;,&quot;d36e7256-dc47-42a8-b84e-da27726cc996&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:39,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;04ec1692-25b7-4bfa-928f-8d5af2198af0&quot;,&quot;title&quot;:&quot;Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/data-instance.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/data-instance.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should list datainstances&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Controller Tests should list datainstances&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let dataInstanceController = new DataInstanceController();\nlet dataInstances = await dataInstanceController.listDataInstances()\nexpect(dataInstances).to.exist;\nexpect(dataInstances.length).to.be.gt(0)\nexpect(dataInstances[0].dataInstanceSettings.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;968c77c3-a7d3-4df1-be5e-62c37af880ea&quot;,&quot;parentUUID&quot;:&quot;04ec1692-25b7-4bfa-928f-8d5af2198af0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a datainstance&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Controller Tests should get a datainstance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let dataInstanceController = new DataInstanceController();\nlet dataInstance = await dataInstanceController.getDataInstance(config.test.tenantOne.tenantId)\nexpect(dataInstance).to.exist;\nexpect(dataInstance.dataInstanceSettings.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;27e4c8bf-f877-43b2-b292-91b63dd5920d&quot;,&quot;parentUUID&quot;:&quot;04ec1692-25b7-4bfa-928f-8d5af2198af0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get a datainstances hash&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Controller Tests should get a datainstances hash&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:26,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let dataInstanceController = new DataInstanceController();\nlet dataInstanceHt = await dataInstanceController.GetDataInstancesHash()\nexpect(dataInstanceHt).to.exist;\nexpect(dataInstanceHt[config.test.tenantOne.tenantId]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1e74a207-8653-46eb-937e-d9ce61e72bdb&quot;,&quot;parentUUID&quot;:&quot;04ec1692-25b7-4bfa-928f-8d5af2198af0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should update a datainstance&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Data Instance Tests Controller Tests should update a datainstance&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:55,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let settingVal = new Date().toISOString()\nlet dataInstanceController = new DataInstanceController();\nlet dataInstance = await dataInstanceController.getDataInstance(config.test.tenantOne.tenantId)\nlet settingIdx  = dataInstance.dataInstanceSettings.findIndex((s =&gt; s.settingsKey === &#x27;HelpURL&#x27;));\ndataInstance.dataInstanceSettings[settingIdx].settingsValue = settingVal\ndataInstance  = await dataInstanceController.updateDataInstance(dataInstance)\nexpect(dataInstance.dataInstanceSettings.length).to.be.gt(0)\nlet setting  = dataInstance.dataInstanceSettings.find((s =&gt; s.settingsKey === &#x27;HelpURL&#x27;));\nexpect(setting).to.exist\nexpect(setting.settingsValue).to.equal(settingVal)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c636ebf5-5ff5-4e8a-9da8-af918332b88e&quot;,&quot;parentUUID&quot;:&quot;04ec1692-25b7-4bfa-928f-8d5af2198af0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;968c77c3-a7d3-4df1-be5e-62c37af880ea&quot;,&quot;27e4c8bf-f877-43b2-b292-91b63dd5920d&quot;,&quot;1e74a207-8653-46eb-937e-d9ce61e72bdb&quot;,&quot;c636ebf5-5ff5-4e8a-9da8-af918332b88e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:122,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;648eaa6f-5823-4f34-aba7-b472ddcb4a91&quot;,&quot;title&quot;:&quot;Integrify Libs Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/model.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/model.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;04e290d7-0ddf-4342-a902-b263329b959d&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/model.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/model.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig();\nuser = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5b298986-6ee4-4c84-92d8-6b65e2e54852&quot;,&quot;parentUUID&quot;:&quot;04e290d7-0ddf-4342-a902-b263329b959d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should bind a model based on Tenant&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Model Tests tests should bind a model based on Tenant&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nthis.timeout(105000);\nconst ContactModel = await model.bindModel(config.test.tenantOne.tenantId, models.Contact)\n//console.dir(ContactModel)\n//ContactModel.setOptions({excludeDeleted:false})\n//let results = await ContactModel.query().where(&#x27;contactId&#x27;, &#x27;&gt;&#x27;, 0)\n//console.log(results)\nlet results;\nresults = await ContactModel.query().setOptions({excludeDeleted:false}).where(&#x27;contactId&#x27;, &#x27;&gt;&#x27;, 0)\nresults = await ContactModel.query().where(&#x27;contactId&#x27;, &#x27;&gt;&#x27;, 0)\nlet c = await ContactModel.query().findOne({userName: &#x27;iApprove&#x27;}).joinRelated(&#x27;auth&#x27;).select(&#x27;contact.*&#x27;, &#x27;contact.contactGuid as contactSid&#x27;,&#x27;auth.userName as userName&#x27;)\nconsole.log(c)\nlet patched = await c.$query().patch({middleName: \&quot;bob\&quot;})\nconsole.log(patched)\n\n\nexpect(results.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9d47edf5-f36a-49e1-99a3-381eb51cf1c1&quot;,&quot;parentUUID&quot;:&quot;04e290d7-0ddf-4342-a902-b263329b959d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9d47edf5-f36a-49e1-99a3-381eb51cf1c1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:19,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:105000},{&quot;uuid&quot;:&quot;bbd0f257-f050-495a-8055-3c573b5d4571&quot;,&quot;title&quot;:&quot;Integrify Libs Permissions Controller Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/permissions.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;d616126b-76bd-47cb-9be9-3c42a70e6b68&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/permissions.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/permissions.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Controller Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nuser  = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;67bd92e5-222f-4bb3-9baf-d40bae7015b9&quot;,&quot;parentUUID&quot;:&quot;d616126b-76bd-47cb-9be9-3c42a70e6b68&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should getUserPermissionsFromDb&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Permissions Controller Tests tests should getUserPermissionsFromDb&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nconst session = {tenantId: config.test.tenantOne.tenantId, user_sid: user.sid}\nlet permissionsController = new PermissionsController(session)\nlet permissions = await permissionsController.getWorkflowPermissionsFromDb(session);\nconsole.log(permissions)\nexpect(permissions[0]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;463e5ecc-4a08-45ad-8da0-05756a1cc922&quot;,&quot;parentUUID&quot;:&quot;d616126b-76bd-47cb-9be9-3c42a70e6b68&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;463e5ecc-4a08-45ad-8da0-05756a1cc922&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;92e6054f-fae7-4593-9cd7-05e57e37d5d7&quot;,&quot;title&quot;:&quot;Integrify Libs Process Model Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/process.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/process.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;502adc6b-db78-4125-8d97-fb9ebf3cfa6b&quot;,&quot;title&quot;:&quot;tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/process.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/process.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Process Model Tests tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;config = await Config.getConfig()\nuser  = config.test.tenantOne.adminUser;\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1497d343-1899-486c-b60e-b9e858de8e9b&quot;,&quot;parentUUID&quot;:&quot;502adc6b-db78-4125-8d97-fb9ebf3cfa6b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a process from sql&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Process Model Tests tests should get a process from sql&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:88,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nconst ProcessModel = await model.getModel(config.test.tenantOne.tenantId, &#x27;Process&#x27;)\n\n\nlet results = await ProcessModel.query()\n//console.log(results)\nexpect(results.length).to.be.gt(0)\nlet sampleProcesstGuid = results[0].processGuid\nlet processController = new ProcessController(config.test.tenantOne)\nconst Process = await processController.getFullProcessFromSql(sampleProcesstGuid);\nexpect(Process).to.exist;\nconsole.log([Process])\nexpect(Process.processGuid).equal(sampleProcesstGuid)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0baabab7-81c3-4083-9aed-a687fb90c4ef&quot;,&quot;parentUUID&quot;:&quot;502adc6b-db78-4125-8d97-fb9ebf3cfa6b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should upsert a process in sql&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Process Model Tests tests should upsert a process in sql&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:334,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//console.log(model)\nconst ProcessModel = await model.getModel(config.test.tenantOne.tenantId, &#x27;Process&#x27;)\n//console.dir(ContactModel)\nlet results = await ProcessModel.query()\n//console.log(results)\nexpect(results.length).to.be.gt(0)\nlet sampleProcesstGuid = results[0].processGuid\nlet processController = new ProcessController(config.test.tenantOne)\nlet Process = await processController.getFullProcessFromSql(sampleProcesstGuid);\nexpect(Process).to.exist;\nexpect(Process.processGuid).equal(sampleProcesstGuid)\nlet newName = &#x27;Updated &#x27; + new Date().toISOString()\nclonedProcess = JSON.parse(JSON.stringify(Process));\n           \nProcess.objective = newName;\nProcess.tasks[0].internalNotes = newName;\nProcess.processCategory.ordinal = 1;\nawait processController.upsertFullProcess(Process);\nProcess = await processController.getFullProcessFromSql(sampleProcesstGuid);\nexpect(Process.objective).to.equal(newName);\nexpect(Process.tasks[0].internalNotes).to.equal(newName);\nexpect(Process.processCategory.ordinal).equal(1)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;18159f07-3cb2-4c7e-bd17-474a645d687e&quot;,&quot;parentUUID&quot;:&quot;502adc6b-db78-4125-8d97-fb9ebf3cfa6b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0baabab7-81c3-4083-9aed-a687fb90c4ef&quot;,&quot;18159f07-3cb2-4c7e-bd17-474a645d687e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:422,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b9ad0072-23f6-40c4-9aee-30bb5ff3095e&quot;,&quot;title&quot;:&quot;Integrify Libs Tenant tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/sqldb-db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/sqldb-db.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;7d7d0c3b-c7ef-4d3a-ad2b-e0fec80944b4&quot;,&quot;title&quot;:&quot;tentantSql tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/sqldb/sqldb-db.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sqldb/sqldb-db.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tenant tests tentantSql tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// let configClass = await require(&#x27;../../../config&#x27;)\n            // await configClass.setConfigs();\n            // config = await configClass.getConfig();\n            config = await Config.getConfig();\n            this.timeout(100000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6acc9fe4-f05a-45c8-83f3-9ff76aeaba17&quot;,&quot;parentUUID&quot;:&quot;7d7d0c3b-c7ef-4d3a-ad2b-e0fec80944b4&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get the consumer Db&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tenant tests tentantSql tests should get the consumer Db&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let db = await sqlDb.getConsumersDb(config.consumersConn)\nexpect(db).to.exist;\nlet queyResults =  await db.raw(`SELECT * FROM sys.tables WHERE name = &#x27;data_instance&#x27;`)\nexpect(queyResults.length).equal(1)\n//console.log(queyResults)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f51f7637-ff30-4e0f-857b-7bd9d552ff10&quot;,&quot;parentUUID&quot;:&quot;7d7d0c3b-c7ef-4d3a-ad2b-e0fec80944b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;shoulld get the tenant Db&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tenant tests tentantSql tests shoulld get the tenant Db&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let db = await sqlDb.getTenantDb(config.test.tenantOne.tenantId)\nexpect(db).to.exist;\nlet queyResults =  await db.raw(`select * from contact`)\nexpect(queyResults.length).to.be.gt(0)\nqueyResults = await db.raw(\&quot;select * from contact_auth where user_name = :uname\&quot;, {uname: &#x27;iApprove&#x27;})\nexpect(queyResults.length).to.be.gt(0)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;155a54e1-817a-457e-9ca2-f13c13385560&quot;,&quot;parentUUID&quot;:&quot;7d7d0c3b-c7ef-4d3a-ad2b-e0fec80944b4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f51f7637-ff30-4e0f-857b-7bd9d552ff10&quot;,&quot;155a54e1-817a-457e-9ca2-f13c13385560&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:26,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d9cd14fa-1c83-438a-8fe4-86d9822a993b&quot;,&quot;title&quot;:&quot;Integrify Libs StreamConsumer Load Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Load Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3844,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(1050000000);\nlet deletes = await redis.delAsync([fullStreamName, eventHistoryName, eventProcessedName, `${tenant}.activeSessions`]);\n/*\nRedis stream stuff:\nYou can scale up by running additional processors in the group. This creates a new Node process and runs a new consumer\nin the existing stream group. The consumer name for each processor will have an incremental suffix so it will be unique\nensuring that each consumer processes a unique set of events.\nWith 3 processors, it handeld a loadSize of a million events as they came in with no backlog build up in the group.\n */\nforkedProcessor = await streamConsumer.forkStreamProcessor()\nforkedProcessor2 = await streamConsumer.forkStreamProcessor()\nforkedProcessor3 = await streamConsumer.forkStreamProcessor()\nfor (let index = 0; index &lt; loadSize; index++) {\n\n    await sp.sendEvent(\&quot;extendSession\&quot;,{\n        token: \&quot;abcd234\&quot;,\n        user: {\n            sid:\&quot;11111\&quot;, \n            user_name: \&quot;iapprove\&quot;, \n            email: \&quot;iapprove@integrify.com\&quot;, \n            name: \&quot;System System\&quot;\n        }\n    })\n\n}\n       \nawait delay(1000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6dd3aee8-745f-498d-80dc-f7bb79562c26&quot;,&quot;parentUUID&quot;:&quot;d9cd14fa-1c83-438a-8fe4-86d9822a993b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Load Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;forkedProcessor.kill()\nforkedProcessor2.kill()\nforkedProcessor3.kill()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e7682f1-c96b-44f0-a2ea-434b2462cb22&quot;,&quot;parentUUID&quot;:&quot;d9cd14fa-1c83-438a-8fe4-86d9822a993b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;0450a72c-4164-4222-b7f8-0845d2dacfbc&quot;,&quot;title&quot;:&quot;forkStreamProcessor&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;2dbefae1-d4a9-4be5-b444-ada67a98845b&quot;,&quot;title&quot;:&quot;processed event count  = history count&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.load.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should process events&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Load Tests forkStreamProcessor processed event count  = history count should process events&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processedCount = await redis.zcardAsync(eventProcessedName)\n let historyCount = await redis.zcardAsync(eventHistoryName)\n expect(historyCount).to.equal(processedCount)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1ac0f4df-d440-4c4c-b892-04892eb61e1b&quot;,&quot;parentUUID&quot;:&quot;2dbefae1-d4a9-4be5-b444-ada67a98845b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1ac0f4df-d440-4c4c-b892-04892eb61e1b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;149b528d-fe86-487d-9d41-d5ad8bbe460e&quot;,&quot;title&quot;:&quot;Integrify Libs StreamConsumer Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/stream/streamConsumer.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5015,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\nlet deletes = await redis.delAsync([fullStreamName, eventHistoryName, eventProcessedName, `${tenant}.activeSessions`]);\nconsole.log(deletes)\nfor (let index = 0; index &lt; 5; index++) {\n    await sp.sendEvent(\&quot;extendSession\&quot;, {activityDate: new Date(),\n        token: \&quot;abcd234\&quot;,\n        user: {\n            sid:\&quot;11111\&quot;,\n            user_name: \&quot;iapprove\&quot;,\n            email: \&quot;iapprove@integrify.com\&quot;,\n            name: \&quot;System System\&quot;\n        }\n    })\n}\nforkedProcessor = await streamConsumer.forkStreamProcessor()\nawait delay(5000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;96992f94-8263-4ce1-88e2-be4f1d8fb667&quot;,&quot;parentUUID&quot;:&quot;149b528d-fe86-487d-9d41-d5ad8bbe460e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40329638-601d-4744-99b5-41d443cce3d3&quot;,&quot;parentUUID&quot;:&quot;149b528d-fe86-487d-9d41-d5ad8bbe460e&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;9c75c498-b6c7-47c6-a329-ef36567609da&quot;,&quot;title&quot;:&quot;forkStreamProcessor&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/stream/streamConsumer.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5a6494bc-f28d-45d9-8c88-39d742afa6e4&quot;,&quot;title&quot;:&quot;processed event count  = history count&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/stream/streamConsumer.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamConsumer.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should process events&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs StreamConsumer Tests forkStreamProcessor processed event count  = history count should process events&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processedCount = await redis.zcardAsync(eventProcessedName)\n let historyCount = await redis.zcardAsync(eventHistoryName)\n expect(historyCount).to.equal(processedCount)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;842f2a97-73bd-40fa-9e3f-15eebaa5b155&quot;,&quot;parentUUID&quot;:&quot;5a6494bc-f28d-45d9-8c88-39d742afa6e4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;842f2a97-73bd-40fa-9e3f-15eebaa5b155&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b1acff0f-5242-4579-a8f3-cb327d3a8f82&quot;,&quot;title&quot;:&quot;Integrify Libs Stream Publisher Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/stream/streamPublisher.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamPublisher.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;691e1cc0-1a3d-4874-a9c4-1b26c73aff5a&quot;,&quot;title&quot;:&quot;stream publisher&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/stream/streamPublisher.test.js&quot;,&quot;file&quot;:&quot;/test/integration/stream/streamPublisher.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Stream Publisher Tests stream publisher \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(100000)\nprocess.env.jest = \&quot;true\&quot;;\nawait redis.delAsync([fullStreamName, eventHistoryName])&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;facc783f-7014-4ab6-9767-705e508be1ac&quot;,&quot;parentUUID&quot;:&quot;691e1cc0-1a3d-4874-a9c4-1b26c73aff5a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should handle the constructor&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Stream Publisher Tests stream publisher should handle the constructor&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const sp = new StreamPublisher(testStreamName, tenant);\nexpect(sp.streamName).equal(fullStreamName)\nexpect(sp.baseStreamName).equal(testStreamName)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f36d8e1c-8c36-433e-9c13-36c4c3426f10&quot;,&quot;parentUUID&quot;:&quot;691e1cc0-1a3d-4874-a9c4-1b26c73aff5a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should an sendEvent&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Stream Publisher Tests stream publisher should an sendEvent&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:101,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const sp = new StreamPublisher(testStreamName, tenant,1000);\nexpect(sp.streamName).equal(fullStreamName)\n//sendEvent(eventType, data) data will get stringified\nlet id = await sp.sendEvent(testEventType, {foo:\&quot;bar\&quot;, biz:\&quot;buzz\&quot;, beep:{bop:\&quot;bam\&quot;}})   \nexpect(id).to.exist;\nexpect (id.indexOf(\&quot;-\&quot;)).to.be.gt(-1)  \nawait delay(100);\nlet id2 = await sp.sendEvent(testEventType, {foo:\&quot;bar2\&quot;, biz:\&quot;buzz2\&quot;, beep:{bop:\&quot;bam2\&quot;}})   \nexpect (Number(id2.split(\&quot;-\&quot;)[0])).to.be.gt(Number(id.split(\&quot;-\&quot;)[0]))&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;50c4dfd6-fec6-45e6-a428-ba02786592cb&quot;,&quot;parentUUID&quot;:&quot;691e1cc0-1a3d-4874-a9c4-1b26c73aff5a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should append to eventhistory&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Stream Publisher Tests stream publisher should append to eventhistory&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const sp = new StreamPublisher(testStreamName, tenant, 1000); \n\nlet id = await sp.sendEvent(testEventType, {foo:\&quot;bar\&quot;, biz:\&quot;buzz\&quot;, beep:{bop:\&quot;bam\&quot;}}) \n           \n//console.log(historySet)\nlet historyCount = await redis.zcardAsync(eventHistoryName)\nexpect(historyCount).to.be.gt(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;574b6dff-7321-4af7-87e3-a2e074044ac7&quot;,&quot;parentUUID&quot;:&quot;691e1cc0-1a3d-4874-a9c4-1b26c73aff5a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f36d8e1c-8c36-433e-9c13-36c4c3426f10&quot;,&quot;50c4dfd6-fec6-45e6-a428-ba02786592cb&quot;,&quot;574b6dff-7321-4af7-87e3-a2e074044ac7&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:102,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;dcdde7fb-3231-4fec-a143-a3e293e00be5&quot;,&quot;title&quot;:&quot;Integrify Libs Tes-lib Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/test-lib/test-lib.test.js&quot;,&quot;file&quot;:&quot;/test/integration/test-lib/test-lib.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;4efd9d38-ccb9-4f90-ae41-de67fc3682c9&quot;,&quot;title&quot;:&quot;Test Config&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/test-lib/test-lib.test.js&quot;,&quot;file&quot;:&quot;/test/integration/test-lib/test-lib.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tes-lib Tests Test Config \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//config = await Config.getConfig()\nthis.timeout(105000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5469edad-0cf2-4e5a-86b8-5f1a218a8301&quot;,&quot;parentUUID&quot;:&quot;4efd9d38-ccb9-4f90-ae41-de67fc3682c9&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;77b33358-71c9-4ee8-8ccd-ea78f513cc59&quot;,&quot;title&quot;:&quot;get a test config&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/test-lib/test-lib.test.js&quot;,&quot;file&quot;:&quot;/test/integration/test-lib/test-lib.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should have config.mongo&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tes-lib Tests Test Config get a test config should have config.mongo&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const testConfig = await testLib.getTestConfig();\nconsole.log(testConfig)\nexpect(testConfig).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7c57aff5-4bea-41b8-b575-0e17d49bccc1&quot;,&quot;parentUUID&quot;:&quot;77b33358-71c9-4ee8-8ccd-ea78f513cc59&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7c57aff5-4bea-41b8-b575-0e17d49bccc1&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;87e7fc35-209a-4ba8-9117-be5731302b0f&quot;,&quot;title&quot;:&quot;get an auth Token &quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/integrify-libs/test/integration/test-lib/test-lib.test.js&quot;,&quot;file&quot;:&quot;/test/integration/test-lib/test-lib.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should have a auth token&quot;,&quot;fullTitle&quot;:&quot;Integrify Libs Tes-lib Tests Test Config get an auth Token  should have a auth token&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const authToken = await testLib.getAuthToken();\nconsole.log(authToken)\nexpect(authToken).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a42d9aaa-4fc6-4954-93e6-5936e433b2c4&quot;,&quot;parentUUID&quot;:&quot;87e7fc35-209a-4ba8-9117-be5731302b0f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a42d9aaa-4fc6-4954-93e6-5936e433b2c4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c12a08fe-48f6-4574-9702-1d5f5417c9c2&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;aa26fb5f-1f6e-47ee-81af-238cc90a6d37&quot;,&quot;title&quot;:&quot;Scheduler CRUD tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Scheduler CRUD tests\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests \&quot;before all\&quot; hook in \&quot;Scheduler CRUD tests\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:167,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(105000);\ntry {\n    testConfig = await serverConfig.setProcessServerConfig()\n    config = await (require(\&quot;./test-config.js\&quot;)).consoleTestConfig();\n    jobCtrl = require(\&quot;../lib/scheduler/mongo/jobCtrl.js\&quot;);\n} catch(e){}&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b76f5b27-e565-46f3-aef8-38c05871d790&quot;,&quot;parentUUID&quot;:&quot;aa26fb5f-1f6e-47ee-81af-238cc90a6d37&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;93296ce0-fe15-4b72-a608-e1c6f6151396&quot;,&quot;title&quot;:&quot;.save&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;saves the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .save saves the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let sDate = new Date();\nlet startThis = new Date(\n    new Date().setMinutes(sDate.getMinutes() - 5)\n);\nlet endThis = new Date(\n    new Date().setMinutes(sDate.getMinutes() + 5)\n);\nlet job = {\n    dbName: config.dbName,\n    status: \&quot;Scheduled\&quot;,\n    name: config.name,\n    initData: config.initData,\n    runAs: config.runAs,\n    frequency: \&quot;Recurring\&quot;,\n    rminutes: 1,\n    state: \&quot;ended\&quot;,\n    startDate: startThis,\n    startHour: startThis.getHours(),\n    startMinute: startThis.getMinutes(),\n    startAMPM: startThis.getHours() &gt; 12 ? \&quot;PM\&quot; : \&quot;AM\&quot;,\n    endDate: endThis,\n    endHour: endThis.getHours(),\n    endMinute: endThis.getMinutes(),\n    endAMPM: endThis.getHours() &gt; 12 ? \&quot;PM\&quot; : \&quot;AM\&quot;,\n    jobType: config.jobType\n};\nreturn jobCtrl.save(job).then(saved =&gt; {\n    expect(saved).to.exist;\n    dbJob = saved;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3a013674-da2b-4bdd-ae2c-a9bdc0354dd6&quot;,&quot;parentUUID&quot;:&quot;93296ce0-fe15-4b72-a608-e1c6f6151396&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3a013674-da2b-4bdd-ae2c-a9bdc0354dd6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:38,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b7c64e59-2f3a-458e-b4e7-a24048cf6469&quot;,&quot;title&quot;:&quot;.upate&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;updates the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .upate updates the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;dbJob.name = \&quot;pdq\&quot;;\nreturn jobCtrl.update(dbJob).then(updated =&gt; {\n    expect(updated).to.exist;\n    expect(updated.modifiedDate.getTime()).to.be.greaterThan(\n        updated.createdDate.getTime()\n    );\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ca3a2f3d-89bd-41f4-80d0-f170a4fe11cf&quot;,&quot;parentUUID&quot;:&quot;b7c64e59-2f3a-458e-b4e7-a24048cf6469&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ca3a2f3d-89bd-41f4-80d0-f170a4fe11cf&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:10,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;99d131c9-1440-4283-81d5-a94d2829bd71&quot;,&quot;title&quot;:&quot;.getOne&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a job by id&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .getOne should get a job by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;dbJob.name = \&quot;pdq\&quot;;\nreturn jobCtrl.getOne(config.dbName, dbJob._id).then(job =&gt; {\n    expect(job).to.exist;\n    expect(job._id.toString()).to.equal(dbJob._id.toString());\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;39227db3-da20-4ae5-8865-2c592a72911a&quot;,&quot;parentUUID&quot;:&quot;99d131c9-1440-4283-81d5-a94d2829bd71&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;39227db3-da20-4ae5-8865-2c592a72911a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3647c5b4-1af1-4f5d-8cfe-d6ee4adcc186&quot;,&quot;title&quot;:&quot;.getAll&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get all jobs&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .getAll should get all jobs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return jobCtrl.getAll(config.dbName).then(jobs =&gt; {\n    expect(jobs).to.be.an(\&quot;array\&quot;).that.is.not.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;29d6b23e-20db-4412-9a74-9cadcbf41169&quot;,&quot;parentUUID&quot;:&quot;3647c5b4-1af1-4f5d-8cfe-d6ee4adcc186&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;29d6b23e-20db-4412-9a74-9cadcbf41169&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;51bd8007-108c-4e89-bb72-27481ece748f&quot;,&quot;title&quot;:&quot;.getAll(filter)&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get all jobs of type testToConsole&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .getAll(filter) should get all jobs of type testToConsole&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return jobCtrl.getAll(config.dbName, \&quot;testToConsole\&quot;).then(jobs =&gt; {\n    expect(jobs).to.be.an(\&quot;array\&quot;).that.is.not.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0bf5291-e2f3-4ca9-9543-95e810b2e0ba&quot;,&quot;parentUUID&quot;:&quot;51bd8007-108c-4e89-bb72-27481ece748f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f0bf5291-e2f3-4ca9-9543-95e810b2e0ba&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;36f11746-a3bc-4f18-b920-28b49ae14655&quot;,&quot;title&quot;:&quot;.getAll(filter-bad)&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should not have any jobs of type fakeJob&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .getAll(filter-bad) should not have any jobs of type fakeJob&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return jobCtrl.getAll(config.dbName, \&quot;fakeJob\&quot;).then(jobs =&gt; {\n    expect(jobs).to.be.an(\&quot;array\&quot;).that.is.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4a45fd24-7c2e-45f6-a3ef-956bbf476284&quot;,&quot;parentUUID&quot;:&quot;36f11746-a3bc-4f18-b920-28b49ae14655&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4a45fd24-7c2e-45f6-a3ef-956bbf476284&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;cc7e2d84-f9d2-4675-b182-37a2fed66b45&quot;,&quot;title&quot;:&quot;.delete&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/crud.test.js&quot;,&quot;file&quot;:&quot;/test/crud.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should delete a job&quot;,&quot;fullTitle&quot;:&quot;Scheduler CRUD tests .delete should delete a job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return jobCtrl.delete(config.dbName, dbJob._id).then(deleted =&gt; {\n    expect(deleted).to.be.true;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2259fb25-5268-4ede-90e2-4af74ea59968&quot;,&quot;parentUUID&quot;:&quot;cc7e2d84-f9d2-4675-b182-37a2fed66b45&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;2259fb25-5268-4ede-90e2-4af74ea59968&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;36c0f617-a5f8-4729-9c50-51f75c38b14b&quot;,&quot;title&quot;:&quot;Scheduler OneTimeJob&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/onetime.test.js&quot;,&quot;file&quot;:&quot;/test/onetime.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Scheduler OneTimeJob\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob \&quot;before all\&quot; hook in \&quot;Scheduler OneTimeJob\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:87,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(20000);\nconfig = await (require(\&quot;./test-config.js\&quot;)).reportTestConfig();\njob = {\n    _id: \&quot;596628f40fa55f6d4c30bc44\&quot;,\n    status: \&quot;Scheduled\&quot;,\n    jobType: \&quot;sendReport\&quot;,\n    initData: config.initData,\n    frequency: \&quot;One Time\&quot;,\n    name: \&quot;only run once\&quot;,\n    runAs: config.runAs,\n    dbName: config.dbName,\n    runCount: 0,\n    smonths: [],\n    sdays: [],\n    shours: [],\n    sminutes: [],\n    sdow: [],\n    restart: false,\n    startDate: dt\n};\ntestConfig = await serverConfig.setProcessServerConfig()\nscheduler = require(\&quot;../lib/scheduler/index.js\&quot;);\n//jobCtrl = require(\&quot;../lib/scheduler/mongo/jobCtrl\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d78ca0b1-d868-4aef-b6d2-17e08258b9f6&quot;,&quot;parentUUID&quot;:&quot;36c0f617-a5f8-4729-9c50-51f75c38b14b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;af5aa8cb-8861-4752-bd91-9e62843e8bed&quot;,&quot;title&quot;:&quot;#addOneTimeJob&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/onetime.test.js&quot;,&quot;file&quot;:&quot;/test/onetime.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add a job&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob #addOneTimeJob should add a job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.addJob(job);\nexpect(job._id).to.equal(j.name);\n//setTimeout(done, 2500);\n// done()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7f8ee2ce-73ca-4dd4-bfde-6307ff596896&quot;,&quot;parentUUID&quot;:&quot;af5aa8cb-8861-4752-bd91-9e62843e8bed&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7f8ee2ce-73ca-4dd4-bfde-6307ff596896&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;df4b8e55-9f59-4724-97a5-e7ed05a54be8&quot;,&quot;title&quot;:&quot;#listJobs&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/onetime.test.js&quot;,&quot;file&quot;:&quot;/test/onetime.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a hash with jobs&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob #listJobs should return a hash with jobs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let jobs = scheduler.listJobs();\nexpect(Object.keys(jobs).length).to.be.greaterThan(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;01683321-aa94-498b-93cd-fa37e85bf83d&quot;,&quot;parentUUID&quot;:&quot;df4b8e55-9f59-4724-97a5-e7ed05a54be8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should contain job xyz&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob #listJobs should contain job xyz&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let jobs = scheduler.listJobs();\nexpect(jobs[job._id]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8677e266-3b8a-4e68-b671-25ede3ba0f8a&quot;,&quot;parentUUID&quot;:&quot;df4b8e55-9f59-4724-97a5-e7ed05a54be8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;01683321-aa94-498b-93cd-fa37e85bf83d&quot;,&quot;8677e266-3b8a-4e68-b671-25ede3ba0f8a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;367a8c8e-22fe-43a5-b8dd-3d45dfe53228&quot;,&quot;title&quot;:&quot;#getJob&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/onetime.test.js&quot;,&quot;file&quot;:&quot;/test/onetime.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a job by id&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob #getJob should get a job by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.getJobById(job._id);\n//expect(j.nextInvocation()).to.equal(job.start);\nexpect(j.name).to.equal(job._id);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;69b1d5ed-2c0b-4b31-af90-70998116eead&quot;,&quot;parentUUID&quot;:&quot;367a8c8e-22fe-43a5-b8dd-3d45dfe53228&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;69b1d5ed-2c0b-4b31-af90-70998116eead&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ec3ce114-6a39-471b-8bbc-2fd030904be7&quot;,&quot;title&quot;:&quot;#runJob&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/onetime.test.js&quot;,&quot;file&quot;:&quot;/test/onetime.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should run the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler OneTimeJob #runJob should run the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:15001,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.getJobById(job._id);\nlet c = await delay(15000);\nexpect(j.triggeredJobs()).to.equal(1);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;946237b4-aa7b-4485-ad04-66247b6b95f9&quot;,&quot;parentUUID&quot;:&quot;ec3ce114-6a39-471b-8bbc-2fd030904be7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;946237b4-aa7b-4485-ad04-66247b6b95f9&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:15001,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:20000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;74785274-eca5-4077-9bea-b864f97e5952&quot;,&quot;title&quot;:&quot;Scheduler PubSubHandler&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/pubsub.test.js&quot;,&quot;file&quot;:&quot;/test/pubsub.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Scheduler PubSubHandler\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler PubSubHandler \&quot;before all\&quot; hook in \&quot;Scheduler PubSubHandler\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;testConfig = await serverConfig.setProcessServerConfig()\n        config = await (require(\&quot;./test-config.js\&quot;)).consoleTestConfig();\n        let dbJob = {\n            dbName: config.dbName,\n            name: config.name,\n            jobType: config.jobType,\n            status: \&quot;Scheduled\&quot;,\n            initData: config.initData,\n            runAs: config.runAs,\n            frequency: \&quot;Recurring\&quot;,\n            restart: true,\n            rminutes: 1,\n            state: \&quot;ended\&quot;,\n            startDate: startThis,\n            startHour: startThis.getHours(),\n            startMinute: startThis.getMinutes(),\n            startAMPM: startThis.getHours() &gt; 12 ? \&quot;PM\&quot; : \&quot;AM\&quot;,\n            endDate: endThis,\n            endHour: endThis.getHours(),\n            endMinute: endThis.getMinutes(),\n            endAMPM: endThis.getHours() &gt; 12 ? \&quot;PM\&quot; : \&quot;AM\&quot;\n        };\n        scheduler = require(\&quot;../lib/scheduler/index.js\&quot;);\n        jobCtrl = require(\&quot;../lib/scheduler/mongo/jobCtrl\&quot;);\n        dbJobWithId = await jobCtrl.save(dbJob);\n        service = require(\&quot;../scheduler.js\&quot;);\n        integrify_redis = require(\&quot;../lib/redis/integrify-redis.js\&quot;);\n        pubSubClient = integrify_redis.getRedisPubSubClient();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22ad8918-d74f-4698-97fe-3781c59243bd&quot;,&quot;parentUUID&quot;:&quot;74785274-eca5-4077-9bea-b864f97e5952&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;Scheduler PubSubHandler\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler PubSubHandler \&quot;after all\&quot; hook in \&quot;Scheduler PubSubHandler\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;failed&quot;,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:true,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return await jobCtrl.delete(dbJob.dbName, dbJobWithId._id.toString());&quot;,&quot;err&quot;:{&quot;message&quot;:&quot;TypeError: Cannot read property &#x27;dbName&#x27; of undefined&quot;,&quot;estack&quot;:&quot;TypeError: Cannot read property &#x27;dbName&#x27; of undefined\n    at Context.&lt;anonymous&gt; (test/pubsub.test.js:56:43)\n    at processImmediate (internal/timers.js:461:21)&quot;,&quot;diff&quot;:null},&quot;uuid&quot;:&quot;62f33b47-65ff-4a5d-9c5c-f33fc5b1f2a0&quot;,&quot;parentUUID&quot;:&quot;74785274-eca5-4077-9bea-b864f97e5952&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;143c1dd0-21d4-43a4-a7a0-33f7c77f68cb&quot;,&quot;title&quot;:&quot;#addJob&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/pubsub.test.js&quot;,&quot;file&quot;:&quot;/test/pubsub.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;add a new job based on a message&quot;,&quot;fullTitle&quot;:&quot;Scheduler PubSubHandler #addJob add a new job based on a message&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3003,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pubSubClient.publish(\n    `schedule:add`,\n    JSON.stringify({\n        dbName: dbJobWithId.dbName,\n        jobId: dbJobWithId._id\n    }),\n    function(err, ok) {\n        setTimeout(\n            function() {\n                let j = scheduler.getJobById(dbJobWithId._id);\n                expect(j).to.exist;\n                done();\n            },\n            3000\n        );\n    }\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed09a531-d3e3-4afb-8cd7-4246004082e2&quot;,&quot;parentUUID&quot;:&quot;143c1dd0-21d4-43a4-a7a0-33f7c77f68cb&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ed09a531-d3e3-4afb-8cd7-4246004082e2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3003,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;d0b6ca15-65a2-410d-ba65-9ccf2efea5ff&quot;,&quot;title&quot;:&quot;#cancel&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/pubsub.test.js&quot;,&quot;file&quot;:&quot;/test/pubsub.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should cancel the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler PubSubHandler #cancel should cancel the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pubSubClient.publish(\n    `schedule:delete`,\n    JSON.stringify({\n        dbName: dbJobWithId.dbName,\n        jobId: dbJobWithId._id\n    }),\n    async function(err, ok) {\n        delay(500);\n        let jobs = scheduler.listJobs();\n        expect(jobs[dbJobWithId._id]).to.not.exist;\n                        }\n);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c332a5c-b0ee-4a84-b1c5-8098eddfe2db&quot;,&quot;parentUUID&quot;:&quot;d0b6ca15-65a2-410d-ba65-9ccf2efea5ff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0c332a5c-b0ee-4a84-b1c5-8098eddfe2db&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;483b716a-6954-420e-822e-684619c99d83&quot;,&quot;title&quot;:&quot;Scheduler RecurringJob&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/recur.test.js&quot;,&quot;file&quot;:&quot;/test/recur.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Scheduler RecurringJob\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler RecurringJob \&quot;before all\&quot; hook in \&quot;Scheduler RecurringJob\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:11,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(20000);\ntestConfig = await serverConfig.setProcessServerConfig();\nconfig = await (require(\&quot;./test-config.js\&quot;)).consoleTestConfig();\njob = {\n    _id: \&quot;596628f40fa55f6d4c30bc44\&quot;,\n    jobType: config.jobType,\n    status: \&quot;Scheduled\&quot;,\n    initData: config.initData,\n    frequency: \&quot;Recurring\&quot;,\n    name: \&quot;this is recurring\&quot;,\n    runAs: config.runAs,\n    dbName: config.dbName,\n    runCount: 0,\n    smonths: [],\n    rseconds: 2,\n    rmonths: 1,\n    sdays: [],\n    shours: [],\n    sminutes: [],\n    sdow: [],\n    restart: false,\n    startDate: dt,\n    endDate: enddt\n};\nscheduler = require(\&quot;../lib/scheduler/index.js\&quot;);\n//jobCtrl = require(\&quot;../lib/scheduler/mongo/jobCtrl\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bd4b6cef-494f-4544-8fe9-a67eddbff30b&quot;,&quot;parentUUID&quot;:&quot;483b716a-6954-420e-822e-684619c99d83&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b5e46c5c-4591-4efa-bbbd-6b7f50a6ede1&quot;,&quot;title&quot;:&quot;#addRecurringJob&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/recur.test.js&quot;,&quot;file&quot;:&quot;/test/recur.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add a job&quot;,&quot;fullTitle&quot;:&quot;Scheduler RecurringJob #addRecurringJob should add a job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.addJob(job);5\nexpect(job.recur).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0162f543-6d2a-4419-ae0b-e5ff4683da57&quot;,&quot;parentUUID&quot;:&quot;b5e46c5c-4591-4efa-bbbd-6b7f50a6ede1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;0162f543-6d2a-4419-ae0b-e5ff4683da57&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;f97e560b-f041-42cc-b5c9-a957c42c4cd7&quot;,&quot;title&quot;:&quot;#listJobs&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/recur.test.js&quot;,&quot;file&quot;:&quot;/test/recur.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a hash with jobs&quot;,&quot;fullTitle&quot;:&quot;Scheduler RecurringJob #listJobs should return a hash with jobs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;jobs = scheduler.listJobs();\nexpect(Object.keys(jobs).length).to.be.greaterThan(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c6ea5e44-bb3f-48da-9cce-8f759f9fe670&quot;,&quot;parentUUID&quot;:&quot;f97e560b-f041-42cc-b5c9-a957c42c4cd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should contain job xyz&quot;,&quot;fullTitle&quot;:&quot;Scheduler RecurringJob #listJobs should contain job xyz&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(jobs[job._id]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c1e96dab-0027-411d-b9ed-ad5940581b53&quot;,&quot;parentUUID&quot;:&quot;f97e560b-f041-42cc-b5c9-a957c42c4cd7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c6ea5e44-bb3f-48da-9cce-8f759f9fe670&quot;,&quot;c1e96dab-0027-411d-b9ed-ad5940581b53&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d4ee237a-e002-4ac0-b3ad-61342101f6fe&quot;,&quot;title&quot;:&quot;#getJob&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/recur.test.js&quot;,&quot;file&quot;:&quot;/test/recur.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a job by id&quot;,&quot;fullTitle&quot;:&quot;Scheduler RecurringJob #getJob should get a job by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.getJobById(job._id);\n//expect(j.nextInvocation()).to.equal(job.start);\nexpect(j.name).to.equal(job._id);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b597920c-f92f-4f81-9890-de326162ced4&quot;,&quot;parentUUID&quot;:&quot;d4ee237a-e002-4ac0-b3ad-61342101f6fe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b597920c-f92f-4f81-9890-de326162ced4&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;0e5cf31c-bb89-4902-b7b2-f0e372fb9a50&quot;,&quot;title&quot;:&quot;Scheduler Scheduled Jobs&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook in \&quot;Scheduler Scheduled Jobs\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs \&quot;before all\&quot; hook in \&quot;Scheduler Scheduled Jobs\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:19,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;this.timeout(20000);\ntestConfig = await serverConfig.setProcessServerConfig()\nconfig = await (require(\&quot;./test-config.js\&quot;)).consoleTestConfig();\njob = {\n    _id: \&quot;596628f40fa55f6d4c30bc44\&quot;,\n    jobType: config.jobType,\n    status: \&quot;Scheduled\&quot;,\n    initData: config.initData,\n    frequency: \&quot;Recurring\&quot;,\n    name: \&quot;this is recurring\&quot;,\n    runAs: config.runAs,\n    dbName: config.dbName,\n    runCount: 0,\n    smonths: [],\n    rseconds: 2,\n    rmonths: 1,\n    sdays: [],\n    shours: [],\n    sminutes: [],\n    sdow: [],\n    restart: false,\n    startDate: dt,\n    endDate: enddt\n};\nlet dbJob = {\n    dbName: config.dbName,\n    name: config.name,\n    jobType: config.jobType,\n    status: \&quot;Scheduled\&quot;,\n    initData: config.initData,\n    runAs: config.runAs,\n    frequency: \&quot;Recurring\&quot;,\n    restart: true,\n    rminutes: 1,\n    state: \&quot;ended\&quot;,\n    startDate: startThis,\n    startHour: startThis.getHours(),\n    startMinute: startThis.getMinutes(),\n    startAMPM: startThis.getHours() &gt; 12 ? \&quot;PM\&quot; : \&quot;AM\&quot;,\n    endDate: endThis,\n    endHour: endThis.getHours(),\n    endMinute: endThis.getMinutes(),\n    endAMPM: endThis.getHours() &gt; 12 ? \&quot;PM\&quot; : \&quot;AM\&quot;\n};\nscheduler = require(\&quot;../lib/scheduler/index.js\&quot;);\njobCtrl = require(\&quot;../lib/scheduler/mongo/jobCtrl\&quot;);\nreturn jobCtrl.save(dbJob).then(j =&gt; {\n    dbJobWithId = j;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5c1bcc04-0c25-4fbc-8b78-82731ded04a5&quot;,&quot;parentUUID&quot;:&quot;0e5cf31c-bb89-4902-b7b2-f0e372fb9a50&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3f6209f5-42ec-4bfc-889e-e7464d3ffa27&quot;,&quot;title&quot;:&quot;#addJob&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should add a job&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #addJob should add a job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.addJob(job);\nexpect(job._id).to.equal(j.name);\n//setTimeout(done, 2500);\n// done()&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b5ed2bc-b700-4431-9f88-400a9b75609f&quot;,&quot;parentUUID&quot;:&quot;3f6209f5-42ec-4bfc-889e-e7464d3ffa27&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9b5ed2bc-b700-4431-9f88-400a9b75609f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;1abd6b37-ba8b-44b3-86e5-bec908646c9a&quot;,&quot;title&quot;:&quot;#loadAllJobsFromMongo&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook in \&quot;#loadAllJobsFromMongo\&quot;&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #loadAllJobsFromMongo \&quot;after all\&quot; hook in \&quot;#loadAllJobsFromMongo\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;//return jobCtrl.delete(dbJob.dbName, dbJobWithId._id.toString())&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0e127e72-8507-4aa3-bb2c-e26e9ff890b8&quot;,&quot;parentUUID&quot;:&quot;1abd6b37-ba8b-44b3-86e5-bec908646c9a&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should load the jobs from mongo&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #loadAllJobsFromMongo should load the jobs from mongo&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:14,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;return scheduler.loadJobsFromMongo().then(loadedJobs =&gt; {\n    expect(loadedJobs.length).to.be.greaterThan(0);\n    expect(scheduler.listJobs()[dbJobWithId.id]).to.exist;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b6ae6392-b8e6-4870-89ab-fcbec7e2bd4d&quot;,&quot;parentUUID&quot;:&quot;1abd6b37-ba8b-44b3-86e5-bec908646c9a&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b6ae6392-b8e6-4870-89ab-fcbec7e2bd4d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:14,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;ff58dbe3-81fd-40aa-a716-06648d358842&quot;,&quot;title&quot;:&quot;#listJobs&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should return a hash with jobs&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #listJobs should return a hash with jobs&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;jobs = scheduler.listJobs();\nexpect(Object.keys(jobs).length).to.be.greaterThan(0);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b030b955-abce-4d99-81c1-27e82ed9c18e&quot;,&quot;parentUUID&quot;:&quot;ff58dbe3-81fd-40aa-a716-06648d358842&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should contain job xyz&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #listJobs should contain job xyz&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(jobs[job._id]).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;acc17bd9-352b-4454-a83b-9cc70c946430&quot;,&quot;parentUUID&quot;:&quot;ff58dbe3-81fd-40aa-a716-06648d358842&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b030b955-abce-4d99-81c1-27e82ed9c18e&quot;,&quot;acc17bd9-352b-4454-a83b-9cc70c946430&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;40e5d918-032a-4b69-a6ae-358e9e948838&quot;,&quot;title&quot;:&quot;#getJob&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get a job by id&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #getJob should get a job by id&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let j = scheduler.getJobById(job._id);\n//expect(j.nextInvocation()).to.equal(job.start);\nexpect(j.name).to.equal(job._id);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f4ed33aa-891c-496b-b6b6-5451dbd57327&quot;,&quot;parentUUID&quot;:&quot;40e5d918-032a-4b69-a6ae-358e9e948838&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f4ed33aa-891c-496b-b6b6-5451dbd57327&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;977f73fb-dafa-4614-934c-886a23831fc3&quot;,&quot;title&quot;:&quot;#reschedule&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should reschedule the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #reschedule should reschedule the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:305,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let oldStart = job.start;\n            job.start =  new Date(job.start.getTime() + 100);\n            job.end =   new Date(job.end.getTime() + 10000);\n            let rj = scheduler.rescheduleJob(job);\n            await delay(300);\n            let j = scheduler.getJobById(job._id);\n            expect(new Date(j.nextInvocation()).getTime()).to.be.greaterThan(oldStart.getTime());&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4c268059-9152-49b8-837a-217b853bde5a&quot;,&quot;parentUUID&quot;:&quot;977f73fb-dafa-4614-934c-886a23831fc3&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4c268059-9152-49b8-837a-217b853bde5a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:305,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000},{&quot;uuid&quot;:&quot;99f56576-8085-471e-beaa-55ba2b7129b0&quot;,&quot;title&quot;:&quot;#cancel&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/scheduler/test/schedule.test.js&quot;,&quot;file&quot;:&quot;/test/schedule.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should cancel the job&quot;,&quot;fullTitle&quot;:&quot;Scheduler Scheduled Jobs #cancel should cancel the job&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let cj = scheduler.cancelJob(job._id);\nlet jobs = scheduler.listJobs();\nexpect(jobs[job._id]).to.not.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6634c125-bd2a-445d-8835-e0a1902fbcae&quot;,&quot;parentUUID&quot;:&quot;99f56576-8085-471e-beaa-55ba2b7129b0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;6634c125-bd2a-445d-8835-e0a1902fbcae&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:10000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7364a73a-f513-4ee9-8925-0ff3df14f8d2&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;b34cd4fb-bef6-414a-b5ea-66117c59a84d&quot;,&quot;title&quot;:&quot;Session Processor Tests&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/session-processor/test/integration/sessionEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sessionEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Session Processor Tests \&quot;before all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:10060,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let testConfig = await testLib.getTestConfig();\n       \nthis.timeout(105000);\nlet deletes = await redis.delAsync([fullStreamName, eventHistoryName, eventProcessedName, `${tenant}.activeSessions`]);\nconsole.log(deletes)\nlet sp = new StreamPublisher(testStreamName,tenant);\nawait sp.sendEvent(\&quot;login\&quot;, {\n  token: \&quot;abcd234\&quot;,\n  user:  {jwt_token: &#x27;xxxxx&#x27;, tenantId: testConfig.tenantOne.tenantId, sid: testConfig.tenantOne.adminUser.sid}\n})\nfor (let index = 0; index &lt; 5; index++) {\n    await sp.sendEvent(\&quot;extendSession\&quot;, {\n        token: \&quot;abcd234\&quot;,\n        user: {\n            sid: testConfig.tenantOne.adminUser.sid,\n            user_name: \&quot;iapprove\&quot;,\n            email: \&quot;iapprove@integrify.com\&quot;,\n            name: \&quot;System System\&quot;\n        }\n    })\n}\n\nforkedProcessor = await sessionStreamConsumer.forkStreamProcessor(tenant)\nawait delay(10000);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b7ef07c9-1393-4dcb-a371-1cad2451df1c&quot;,&quot;parentUUID&quot;:&quot;b34cd4fb-bef6-414a-b5ea-66117c59a84d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after all\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Session Processor Tests \&quot;after all\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;forkedProcessor.kill(&#x27;SIGTERM&#x27;)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;810d904c-03f4-4a1b-9e37-31b1db73d184&quot;,&quot;parentUUID&quot;:&quot;b34cd4fb-bef6-414a-b5ea-66117c59a84d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;75624ae3-fd4c-498c-a760-3f25ea4b7cf9&quot;,&quot;title&quot;:&quot;stream processor&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/session-processor/test/integration/sessionEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sessionEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ea07a3c0-8051-4016-8077-676a8f54224b&quot;,&quot;title&quot;:&quot;reads from session stream&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/session-processor/test/integration/sessionEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sessionEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should process events&quot;,&quot;fullTitle&quot;:&quot;Session Processor Tests stream processor reads from session stream should process events&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let processedCount = await redis.zcardAsync(eventProcessedName)\n              let historyCount = await redis.zcardAsync(eventHistoryName)\n              expect(historyCount).to.equal(processedCount)&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;92b4e82a-d2cb-406d-b091-14d3ca9a16de&quot;,&quot;parentUUID&quot;:&quot;ea07a3c0-8051-4016-8077-676a8f54224b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;92b4e82a-d2cb-406d-b091-14d3ca9a16de&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;589dcbab-cd74-4c1d-a13f-69f1109a97c4&quot;,&quot;title&quot;:&quot;handles events&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/session-processor/test/integration/sessionEventHandler.test.js&quot;,&quot;file&quot;:&quot;/test/integration/sessionEventHandler.test.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should push events into REDIS activeSession set&quot;,&quot;fullTitle&quot;:&quot;Session Processor Tests stream processor handles events should push events into REDIS activeSession set&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;let sessions = await redis.zrangebyscoreAsync(`${tenant}.activeSessions`, \&quot;-inf\&quot;, \&quot;+inf\&quot;);\nconsole.log(sessions)\nexpect(sessions).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4bad15e1-2c23-42b2-ba7a-66723e5c1921&quot;,&quot;parentUUID&quot;:&quot;589dcbab-cd74-4c1d-a13f-69f1109a97c4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4bad15e1-2c23-42b2-ba7a-66723e5c1921&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;82717259-7a99-4894-aee9-d8d4749238ab&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;84ca8aaf-2137-45b9-99a5-127124fbe2fe&quot;,&quot;title&quot;:&quot;adminCategoryConfig.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;adminCategoryConfig.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=objectCatTree]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=btn_addCategory]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=dialog_addCategory]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=dialog_editCategory]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=dialog_deleteCategory]&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;dcdec3d5-6eed-41c2-902e-68728ee76247&quot;,&quot;parentUUID&quot;:&quot;84ca8aaf-2137-45b9-99a5-127124fbe2fe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;dcdec3d5-6eed-41c2-902e-68728ee76247&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b0a2cfb8-b722-4a1e-8af4-cb7fe6bf3f7b&quot;,&quot;title&quot;:&quot;adminTreeAddObjectButton.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;adminTreeAddObjectButton.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(btn_addObject.exists()).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;51e811ca-1e57-48a4-b623-39ec7d466f62&quot;,&quot;parentUUID&quot;:&quot;b0a2cfb8-b722-4a1e-8af4-cb7fe6bf3f7b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;51e811ca-1e57-48a4-b623-39ec7d466f62&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ec239d41-1261-425c-b7ca-d2e299cb003f&quot;,&quot;title&quot;:&quot;adminTreePermsButton.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;adminTreePermsButton.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(btn_permsButton.exists()).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b08d67b7-4f07-4d3c-bf5f-0d6b9c846484&quot;,&quot;parentUUID&quot;:&quot;ec239d41-1261-425c-b7ca-d2e299cb003f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b08d67b7-4f07-4d3c-bf5f-0d6b9c846484&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e80cefa9-6ab4-45e1-8496-6ae0ac34a238&quot;,&quot;title&quot;:&quot;adminTreeViewButton.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;adminTreeViewButton.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(btn_viewButton.exists()).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ed806a6c-4b2a-4695-8af7-4409d351fc7f&quot;,&quot;parentUUID&quot;:&quot;e80cefa9-6ab4-45e1-8496-6ae0ac34a238&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ed806a6c-4b2a-4695-8af7-4409d351fc7f&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;b3ad49f3-2fb0-48d4-ba17-93a919ad1c63&quot;,&quot;title&quot;:&quot;AddGroupDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;AddGroupDialog.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:112,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_AddGroupDialog.default);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2ede3a31-975a-4109-bcc2-609d08a8c219&quot;,&quot;parentUUID&quot;:&quot;b3ad49f3-2fb0-48d4-ba17-93a919ad1c63&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;20e70f72-b42e-49f1-8ba4-cf3cf44a1fa8&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays group fields&quot;,&quot;fullTitle&quot;:&quot;AddGroupDialog.vue inital state displays group fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=nameField]&#x27;)).to.exist;\nexpect(wrapper.find(&#x27;[data-test=descField]&#x27;)).to.exist;\nexpect(wrapper.find(&#x27;[data-test=dynamicField]&#x27;)).to.exist;\nexpect(wrapper.find(&#x27;[data-test=sqlField]&#x27;)).to.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;7291e114-7c8b-4ea6-9858-76cdbe1ac1eb&quot;,&quot;parentUUID&quot;:&quot;20e70f72-b42e-49f1-8ba4-cf3cf44a1fa8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;save button disabled&quot;,&quot;fullTitle&quot;:&quot;AddGroupDialog.vue inital state save button disabled&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=saveButton]&#x27;).element.disabled).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0c9089a8-431f-4d88-a1f9-594d51350da2&quot;,&quot;parentUUID&quot;:&quot;20e70f72-b42e-49f1-8ba4-cf3cf44a1fa8&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;7291e114-7c8b-4ea6-9858-76cdbe1ac1eb&quot;,&quot;0c9089a8-431f-4d88-a1f9-594d51350da2&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;24e2eab2-ad52-4e52-be92-ae4b5433204d&quot;,&quot;title&quot;:&quot;EditGroupDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;EditGroupDialog.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:76,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\ngroup = {\n  groupName: \&quot;test group\&quot;,\n  groupDesc: \&quot;test group description\&quot;,\n  dynamic: false,\n  groupSql: \&quot;first_name like &#x27;%foo%&#x27;\&quot;\n};\nwrapper = (0, _mocks.initWrapper)(_EditGroupDialog.default, {\n  propsData: {\n    group\n  },\n  data() {\n    return {\n      activeTab: 0\n    };\n  },\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9512d1ce-f97c-460b-8787-cc22627294c2&quot;,&quot;parentUUID&quot;:&quot;24e2eab2-ad52-4e52-be92-ae4b5433204d&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ca3ba5fc-cb79-4c23-ba4b-3709099f1e0d&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays group fields&quot;,&quot;fullTitle&quot;:&quot;EditGroupDialog.vue inital state displays group fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=nameField]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=descField]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=dynamicField]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=sqlField]&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a5a5ce87-a71a-4c6a-be0b-adcd09267933&quot;,&quot;parentUUID&quot;:&quot;ca3ba5fc-cb79-4c23-ba4b-3709099f1e0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;populates group fields&quot;,&quot;fullTitle&quot;:&quot;EditGroupDialog.vue inital state populates group fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=nameField]&#x27;).element.value).to.equal(group.groupName);\nexpect(wrapper.find(&#x27;[data-test=descField]&#x27;).element.value).to.equal(group.groupDesc);\nexpect(wrapper.find(&#x27;[data-test=sqlField]&#x27;).element.value).to.equal(group.groupSql);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;10ce7263-262b-4dcf-a9f1-8bc5e5adfc1b&quot;,&quot;parentUUID&quot;:&quot;ca3ba5fc-cb79-4c23-ba4b-3709099f1e0d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;a5a5ce87-a71a-4c6a-be0b-adcd09267933&quot;,&quot;10ce7263-262b-4dcf-a9f1-8bc5e5adfc1b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;8b88a759-18d9-4325-a4c4-1ea550bd2445&quot;,&quot;title&quot;:&quot;GroupList.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GroupList.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:70,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_GroupList.default, {\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3618e2d2-e8dd-4403-b839-faf092ffce07&quot;,&quot;parentUUID&quot;:&quot;8b88a759-18d9-4325-a4c4-1ea550bd2445&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;dac09270-c0f9-4f0f-8e05-57917165fb52&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays toolbar buttons&quot;,&quot;fullTitle&quot;:&quot;GroupList.vue inital state displays toolbar buttons&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const toolbar = wrapper.find(&#x27;[data-test=buttonBar]&#x27;);\nexpect(toolbar.exists()).to.equal(true);\nconst buttons = toolbar.findAll(&#x27;button&#x27;);\nexpect(buttons.at(0).text()).to.equal(&#x27;Add Group&#x27;);\nexpect(buttons.at(1).text()).to.equal(&#x27;Delete Group&#x27;);\nexpect(buttons.at(1).props().disabled).to.equal(true);\nexpect(buttons.at(2).text()).to.equal(&#x27;Set Roles &amp; Permissions&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b44a9cf7-2dc5-4048-b2fe-2946aec32693&quot;,&quot;parentUUID&quot;:&quot;dac09270-c0f9-4f0f-8e05-57917165fb52&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays list of groups&quot;,&quot;fullTitle&quot;:&quot;GroupList.vue inital state displays list of groups&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const table = wrapper.find(&#x27;div.v-data-table&#x27;);\nexpect(table.exists()).to.equal(true);\nconst rows = table.findAll(&#x27;table &gt; tbody &gt; tr&#x27;);\nconst adminRow = rows.at(0).findAll(&#x27;td&#x27;);\nconst userRow = rows.at(1).findAll(&#x27;td&#x27;);\nexpect(rows.length).to.equal(2);\nexpect(adminRow.at(3).text()).to.equal(&#x27;Administrators&#x27;); // group name column\nexpect(userRow.at(3).text()).to.equal(&#x27;Users&#x27;);\nexpect(adminRow.at(5).text()).to.equal(&#x27;No&#x27;); // dynamic column\nexpect(userRow.at(5).text()).to.equal(&#x27;Yes&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d3349aea-ab38-4a93-85d8-87e67c04363d&quot;,&quot;parentUUID&quot;:&quot;dac09270-c0f9-4f0f-8e05-57917165fb52&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;b44a9cf7-2dc5-4048-b2fe-2946aec32693&quot;,&quot;d3349aea-ab38-4a93-85d8-87e67c04363d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:11,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;9c733898-9f7b-4783-8207-89c4df424ae8&quot;,&quot;title&quot;:&quot;GroupMembershipDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;GroupMembershipDialog.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:168,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\ngroup = {\n  groupName: \&quot;test group\&quot;,\n  groupDesc: \&quot;test group description\&quot;,\n  dynamic: false,\n  groupSql: \&quot;first_name like &#x27;%foo%&#x27;\&quot;,\n  canManage: true,\n  canEdit: true\n};\nwrapper = (0, _mocks.initWrapper)(_GroupMembershipDialog.default, {\n  propsData: {\n    group\n  },\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a1acfa46-ee34-45a6-a1b5-343ca25068eb&quot;,&quot;parentUUID&quot;:&quot;9c733898-9f7b-4783-8207-89c4df424ae8&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;62126259-6dd1-444a-9ea0-58ebeba37e4f&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;membership tables&quot;,&quot;fullTitle&quot;:&quot;GroupMembershipDialog.vue inital state membership tables&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:9,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const nonMembersTable = wrapper.find(&#x27;[data-test=nonMembersTable]&#x27;);\nconst membersTable = wrapper.find(&#x27;[data-test=membersTable]&#x27;);\nexpect(nonMembersTable.exists()).to.equal(true);\nexpect(membersTable.exists()).to.equal(true); // Non members table\nlet rows = nonMembersTable.findAll(&#x27;table &gt; tbody &gt; tr&#x27;);\nlet firstRow = rows.at(0).findAll(&#x27;td&#x27;);\nexpect(rows.length).to.equal(3);\nexpect(firstRow.length).to.equal(5);\nexpect(firstRow.at(0).find(&#x27;div.v-simple-checkbox&#x27;).exists()).to.equal(true); //  selectable column\nexpect(firstRow.at(1).find(&#x27;button.mdi-plus-circle-outline&#x27;).exists()).to.equal(true); // button to add members\nexpect(firstRow.at(2).find(&#x27;i.mdi-account&#x27;).exists()).to.equal(true); // icon for user accoutn\nexpect(firstRow.at(3).text()).to.equal(&#x27;97&#x27;); // member id\nexpect(firstRow.at(4).text()).to.equal(&#x27;Joe User&#x27;); // member name\nexpect(rows.at(2).find(&#x27;i.mdi-account-multiple&#x27;).exists()).to.equal(true); // check a group member row renders with the group icon\n// Members table\nrows = membersTable.findAll(&#x27;table &gt; tbody &gt; tr&#x27;);\nexpect(rows.length).to.equal(2);\nfirstRow = rows.at(0).findAll(&#x27;td&#x27;);\nexpect(rows.length).to.equal(2);\nexpect(firstRow.length).to.equal(5);\nexpect(firstRow.at(0).find(&#x27;div.v-simple-checkbox&#x27;).exists()).to.equal(true); //  selectable column\nexpect(firstRow.at(1).find(&#x27;button.mdi-minus-circle-outline&#x27;).exists()).to.equal(true); // button to add members\nexpect(firstRow.at(2).find(&#x27;i.mdi-account&#x27;).exists()).to.equal(true); // icon for user accoutn\nexpect(firstRow.at(3).text()).to.equal(&#x27;98&#x27;); // member id\nexpect(firstRow.at(4).text()).to.equal(&#x27;Integrify Services&#x27;); // member name&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fa24a072-a64f-4258-afa8-4010e21ae9ef&quot;,&quot;parentUUID&quot;:&quot;62126259-6dd1-444a-9ea0-58ebeba37e4f&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;fa24a072-a64f-4258-afa8-4010e21ae9ef&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:9,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7a02a538-7e8f-418f-b431-7adf6656691b&quot;,&quot;title&quot;:&quot;UserCreate.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserCreate.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:88,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserCreate.default, {\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f0b7b846-bdba-40b1-b690-c06ac7c86252&quot;,&quot;parentUUID&quot;:&quot;7a02a538-7e8f-418f-b431-7adf6656691b&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should display all necessary fields&quot;,&quot;fullTitle&quot;:&quot;UserCreate.vue should display all necessary fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;[&#x27;firstName&#x27;, &#x27;middleName&#x27;, &#x27;lastName&#x27;, &#x27;username&#x27;, &#x27;email&#x27;, &#x27;locale&#x27;, &#x27;timezone&#x27;, &#x27;language&#x27;, &#x27;password&#x27;, &#x27;confirmPassword&#x27;].forEach(fieldName =&gt; {\n  const field = wrapper.find(`[data-test=${fieldName}Input]`);\n  expect(field.exists()).to.be.true;\n  expect(field.text()).to.be.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d4a2935-6251-4bfb-904d-a7e18ca81e12&quot;,&quot;parentUUID&quot;:&quot;7a02a538-7e8f-418f-b431-7adf6656691b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should display cancel and save btns&quot;,&quot;fullTitle&quot;:&quot;UserCreate.vue should display cancel and save btns&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;[{\n  key: &#x27;cancelBtn&#x27;,\n  value: &#x27;Cancel&#x27;\n}, {\n  key: &#x27;saveBtn&#x27;,\n  value: &#x27;Save&#x27;\n}].forEach(btn =&gt; {\n  const button = wrapper.find(`[data-test=${btn.key}]`);\n  expect(button.exists()).to.be.true;\n  expect(button.text()).to.eq(btn.value);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;283bb86a-e80b-428e-96d7-c58df254e0a6&quot;,&quot;parentUUID&quot;:&quot;7a02a538-7e8f-418f-b431-7adf6656691b&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4d4a2935-6251-4bfb-904d-a7e18ca81e12&quot;,&quot;283bb86a-e80b-428e-96d7-c58df254e0a6&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:24,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;bcd67800-a807-470a-8251-71b15ad23281&quot;,&quot;title&quot;:&quot;UserEdit.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// store = new Vuex.Store({modules: mockStore().modules})\nstore = new _vuex.default.Store({\n  modules: (0, _store.mockStore)({\n    state: {\n      selectedUser: _mockedData.mockedUser\n    },\n    actions: {\n      getUser: function () {\n        console.log(&#x27;--- getUser()&#x27;);\n        return { ..._mockedData.mockedUser\n        };\n      }\n    }\n  }).modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserEdit.default, {\n  store,\n  propsData: {\n    id: _mockedData.mockedUser.contactGuid\n  }\n});\nmockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d940180b-f94e-40b1-8c06-60800f04c596&quot;,&quot;parentUUID&quot;:&quot;bcd67800-a807-470a-8251-71b15ad23281&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should always display page title&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue should always display page title&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const pageTitle = wrapper.find(&#x27;#pageTitle&#x27;);\nexpect(pageTitle.text()).to.eq(&#x27;Edit User&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1a5201da-d3fb-4a50-8caf-14232236cc37&quot;,&quot;parentUUID&quot;:&quot;bcd67800-a807-470a-8251-71b15ad23281&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should not display form if loading&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue should not display form if loading&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const form = wrapper.find(&#x27;form[data-test=userForm]&#x27;);\nexpect(form.exists()).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bad869de-6cd1-4cfb-902f-3bf567e25504&quot;,&quot;parentUUID&quot;:&quot;bcd67800-a807-470a-8251-71b15ad23281&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should display form and btns if user information present&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue should display form and btns if user information present&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:308,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper.vm.$store.state.users.userLoading = false;\nawait wrapper.vm.$nextTick();\nconst form = wrapper.find(&#x27;form[data-test=userForm]&#x27;);\nexpect(form.exists()).to.be.true;\n[{\n  key: &#x27;cancelBtn&#x27;,\n  value: &#x27;Cancel&#x27;\n}, {\n  key: &#x27;saveBtn&#x27;,\n  value: &#x27;Save&#x27;\n}].forEach(btn =&gt; {\n  const button = wrapper.find(`[data-test=${btn.key}]`);\n  expect(button.exists()).to.be.true;\n  expect(button.text()).to.eq(btn.value);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e02ad196-c1f6-4766-8d48-77054bc1b415&quot;,&quot;parentUUID&quot;:&quot;bcd67800-a807-470a-8251-71b15ad23281&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1a5201da-d3fb-4a50-8caf-14232236cc37&quot;,&quot;bad869de-6cd1-4cfb-902f-3bf567e25504&quot;,&quot;e02ad196-c1f6-4766-8d48-77054bc1b415&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:309,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;dc578830-9bb1-45ff-9f91-f6c5e32860e5&quot;,&quot;title&quot;:&quot;UserEdit.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:65,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)({\n    state: {\n      selectedUser: _mockedData.mockedUser\n    }\n  }).modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserEditDelegation.default, {\n  store\n});\nmockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;677abad2-6f66-4cdf-b1e2-582d51539c9f&quot;,&quot;parentUUID&quot;:&quot;dc578830-9bb1-45ff-9f91-f6c5e32860e5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should display all fields&quot;,&quot;fullTitle&quot;:&quot;UserEdit.vue should display all fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:25,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;[&#x27;delegate&#x27;, &#x27;processes&#x27;] // &#x27;startDate&#x27;, &#x27;startTime&#x27;, &#x27;endDate&#x27;, &#x27;endTime&#x27;\n.forEach(fieldName =&gt; {\n  const field = wrapper.find(`[data-test=${fieldName}Input]`);\n  expect(field.exists()).to.be.true;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d428c229-35d4-49f3-8c81-a960979d702b&quot;,&quot;parentUUID&quot;:&quot;dc578830-9bb1-45ff-9f91-f6c5e32860e5&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d428c229-35d4-49f3-8c81-a960979d702b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:25,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2544a723-df10-4d2c-82a3-aaed64ba607c&quot;,&quot;title&quot;:&quot;UserEditOrganizationalDetails.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserEditOrganizationalDetails.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:46,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserEditOrganizationalDetails.default, {\n  store\n});\nmockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;0a465257-4550-42b4-883e-ff55c1483961&quot;,&quot;parentUUID&quot;:&quot;2544a723-df10-4d2c-82a3-aaed64ba607c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should display all fields&quot;,&quot;fullTitle&quot;:&quot;UserEditOrganizationalDetails.vue should display all fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper.vm.$store.state.users.selectedUser = _mockedData.mockedUser;\nawait wrapper.vm.$nextTick();\n[&#x27;title&#x27;, &#x27;division&#x27;, &#x27;department&#x27;, &#x27;costCenter&#x27;, &#x27;location&#x27;, &#x27;phone&#x27;, &#x27;manager&#x27;].forEach(fieldName =&gt; {\n  const field = wrapper.find(`[data-test=${fieldName}Input]`);\n  expect(field.exists()).to.be.true;\n  if (!!field.element.value || !!_mockedData.mockedUser[fieldName]) {\n    expect(field.element.value).to.eq(_mockedData.mockedUser[fieldName]);\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d0725316-fe05-41a5-b6b9-014521ba5896&quot;,&quot;parentUUID&quot;:&quot;2544a723-df10-4d2c-82a3-aaed64ba607c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d0725316-fe05-41a5-b6b9-014521ba5896&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:38,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6061317e-763b-440b-bb86-2f1cbfe86a18&quot;,&quot;title&quot;:&quot;UserEditUserDetails.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserEditUserDetails.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:99,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserEditUserDetails.default, {\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;03e05938-7aee-4c52-ba77-cf9198ea24c6&quot;,&quot;parentUUID&quot;:&quot;6061317e-763b-440b-bb86-2f1cbfe86a18&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should display card title&quot;,&quot;fullTitle&quot;:&quot;UserEditUserDetails.vue should display card title&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const title = wrapper.find(&#x27;.v-card__title&#x27;);\nexpect(title.exists()).to.be.true;\nexpect(title.text()).contains(&#x27;User Details&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eb60ac6e-509f-42db-b3f5-e78101e11132&quot;,&quot;parentUUID&quot;:&quot;6061317e-763b-440b-bb86-2f1cbfe86a18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should display all fields&quot;,&quot;fullTitle&quot;:&quot;UserEditUserDetails.vue should display all fields&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:81,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper.vm.$store.state.users.selectedUser = _mockedData.mockedUser;\nawait wrapper.vm.$nextTick();\n[&#x27;firstName&#x27;, &#x27;middleName&#x27;, &#x27;lastName&#x27;, &#x27;contactId&#x27;, &#x27;userName&#x27;, &#x27;email&#x27;, &#x27;address1&#x27;, &#x27;address2&#x27;, &#x27;city&#x27;, &#x27;state&#x27;, &#x27;zip&#x27;, &#x27;country&#x27;, &#x27;language&#x27;, &#x27;timezone&#x27;, &#x27;locale&#x27;, &#x27;cField1&#x27;, &#x27;cField2&#x27;, &#x27;password&#x27;, &#x27;confirmPassword&#x27;].forEach(fieldName =&gt; {\n  const field = wrapper.find(`[data-test=${fieldName}Input]`);\n  expect(field.exists()).to.be.true;\n  if (!!field.element.value &amp;&amp; !!_mockedData.mockedUser[fieldName]) {\n    expect(field.element.value.toString()).to.eq(_mockedData.mockedUser[fieldName].toString());\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e1d08fe1-5e59-4b30-97e0-ac4406b467f5&quot;,&quot;parentUUID&quot;:&quot;6061317e-763b-440b-bb86-2f1cbfe86a18&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eb60ac6e-509f-42db-b3f5-e78101e11132&quot;,&quot;e1d08fe1-5e59-4b30-97e0-ac4406b467f5&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:83,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3ffc5c16-76a7-4417-b70c-852cee599511&quot;,&quot;title&quot;:&quot;UserFilterDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserFilterDialog.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:64,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserFilterDialog.default, {\n  store\n});\nmockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;66ed3903-0ae1-401a-a1ab-aa9c0fdae8a5&quot;,&quot;parentUUID&quot;:&quot;3ffc5c16-76a7-4417-b70c-852cee599511&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;UserFilterDialog.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:42,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const title = wrapper.find(&#x27;.v-card__title .headline&#x27;);\nexpect(title.text()).to.eq(&#x27;User Filters&#x27;);\n[&#x27;lastName&#x27;, &#x27;firstName&#x27;, &#x27;username&#x27;, &#x27;email&#x27;, &#x27;title&#x27;, &#x27;managerName&#x27;, &#x27;costCenter&#x27;, &#x27;country&#x27;, &#x27;department&#x27;].forEach(fieldName =&gt; {\n  const field = wrapper.find(`[data-test=${fieldName}Input]`);\n  expect(field.exists()).to.be.true;\n  expect(field.element.value).to.be.empty;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c300980b-b9d2-4ec3-99ad-23ac4b07142e&quot;,&quot;parentUUID&quot;:&quot;3ffc5c16-76a7-4417-b70c-852cee599511&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should close dialog on clicking Close btn&quot;,&quot;fullTitle&quot;:&quot;UserFilterDialog.vue should close dialog on clicking Close btn&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:32,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.vm.showDialog).to.be.false;\nwrapper.vm.$store.state.users.showDialog = true;\nawait wrapper.vm.$nextTick();\nexpect(wrapper.vm.showDialog).to.be.true;\nconst closeBtn = wrapper.find(&#x27;[data-test=closeBtn]&#x27;);\nexpect(closeBtn.exists()).to.be.true;\nawait closeBtn.trigger(&#x27;click&#x27;);\nexpect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;\nexpect(mockstore.actions.getUsers).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2c85f19d-16d5-4e63-b42e-b9ea8ba12674&quot;,&quot;parentUUID&quot;:&quot;3ffc5c16-76a7-4417-b70c-852cee599511&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c300980b-b9d2-4ec3-99ad-23ac4b07142e&quot;,&quot;2c85f19d-16d5-4e63-b42e-b9ea8ba12674&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:74,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;6d6f6346-0703-484f-94a5-aec0f7426bc2&quot;,&quot;title&quot;:&quot;UserList.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;UserList.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:56,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_UserList.default, {\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bafbbe1c-8263-4f56-90bf-fbc82d6f5d2a&quot;,&quot;parentUUID&quot;:&quot;6d6f6346-0703-484f-94a5-aec0f7426bc2&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should contain pageTitle and search input&quot;,&quot;fullTitle&quot;:&quot;UserList.vue should contain pageTitle and search input&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// pageTitle\nconst pageTitle = wrapper.find(&#x27;#pageTitle&#x27;);\nexpect(pageTitle.exists()).to.be.true;\nexpect(pageTitle.text()).to.eq(&#x27;Users&#x27;); // searchInput\nconst searchInput = wrapper.get(&#x27;input#searchText&#x27;);\nexpect(searchInput.exists()).to.be.true;\nexpect(searchInput.text()).to.be.empty;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c31161fb-125d-4ef7-90a1-a49fffa4e6ec&quot;,&quot;parentUUID&quot;:&quot;6d6f6346-0703-484f-94a5-aec0f7426bc2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should display toolbar buttons&quot;,&quot;fullTitle&quot;:&quot;UserList.vue should display toolbar buttons&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;[{\n  key: &#x27;addUserBtn&#x27;,\n  value: &#x27;Add User&#x27;\n}, {\n  key: &#x27;replaceUserBtn&#x27;,\n  value: &#x27;Replace User&#x27;\n}].forEach(btn =&gt; {\n  const button = wrapper.find(`[data-test=${btn.key}]`);\n  expect(button.exists()).to.be.true;\n  expect(button.text()).to.eq(btn.value);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;2e487f2b-0d07-4b52-b1f1-e6d8f0389df2&quot;,&quot;parentUUID&quot;:&quot;6d6f6346-0703-484f-94a5-aec0f7426bc2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should display list of users&quot;,&quot;fullTitle&quot;:&quot;UserList.vue should display list of users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const table = wrapper.find(&#x27;[data-test=usersTable]&#x27;);\nexpect(table.exists()).to.be.true;\nconst header = table.find(&#x27;table &gt; thead&#x27;);\n[&#x27;Last Name&#x27;, &#x27;First Name&#x27;, &#x27;Username&#x27;, &#x27;Email&#x27;, &#x27;Created&#x27;, &#x27;Last Updated&#x27;, &#x27;Active&#x27;].forEach(colName =&gt; {\n  expect(header.text()).contains(colName);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;52d40cf3-887e-4ca4-b9b5-34dca8d76fef&quot;,&quot;parentUUID&quot;:&quot;6d6f6346-0703-484f-94a5-aec0f7426bc2&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c31161fb-125d-4ef7-90a1-a49fffa4e6ec&quot;,&quot;2e487f2b-0d07-4b52-b1f1-e6d8f0389df2&quot;,&quot;52d40cf3-887e-4ca4-b9b5-34dca8d76fef&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:6,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;df04a06d-7b3f-4a45-bfbc-7d5ba56835ae&quot;,&quot;title&quot;:&quot;users store actions&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;users store actions \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;commit = _sinon.default.spy();\nstate = { ..._users.default.state\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8017d78b-98e4-4b29-be70-1bdf05da7478&quot;,&quot;parentUUID&quot;:&quot;df04a06d-7b3f-4a45-bfbc-7d5ba56835ae&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;users store actions \&quot;after each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;_sinon.default.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fe2887d5-e186-4832-b7ac-589ffcf4e81f&quot;,&quot;parentUUID&quot;:&quot;df04a06d-7b3f-4a45-bfbc-7d5ba56835ae&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should getUsers&quot;,&quot;fullTitle&quot;:&quot;users store actions should getUsers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:4,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await _actions.default.getUsers({\n  commit,\n  state\n}, _commonLib.default);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_LIST_LOADING&#x27;, true]);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_USERS&#x27;, [..._mockedData.mockedUsers]]);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_USERS_TOTAL&#x27;, _mockedData.mockedUsers.length]);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_LIST_LOADING&#x27;, false]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;eee99ef0-fc7d-41ac-933e-f5f2cffb39cb&quot;,&quot;parentUUID&quot;:&quot;df04a06d-7b3f-4a45-bfbc-7d5ba56835ae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should getUser&quot;,&quot;fullTitle&quot;:&quot;users store actions should getUser&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const user = { ..._mockedData.mockedUser\n};\nawait _actions.default.getUser({\n  commit,\n  state\n}, {\n  userGuid: user.contactGuid,\n  $commonLib: _commonLib.default\n});\nuser.active = !user.deletedDate;\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_USER_LOADING&#x27;, true]);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_SELECTED_USER&#x27;, user]);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_USER_LOADING&#x27;, false]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8618b5da-c2a6-48d6-9b1f-b73255da9267&quot;,&quot;parentUUID&quot;:&quot;df04a06d-7b3f-4a45-bfbc-7d5ba56835ae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should insertUser&quot;,&quot;fullTitle&quot;:&quot;users store actions should insertUser&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await _actions.default.insertUser({\n  commit,\n  state\n}, _commonLib.default);\n(0, _chai.expect)(commit.args).to.deep.include([&#x27;SET_SELECTED_USER&#x27;, _mockedData.mockedUser]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;30cc7051-d647-41c5-b7f5-1a38e87159bc&quot;,&quot;parentUUID&quot;:&quot;df04a06d-7b3f-4a45-bfbc-7d5ba56835ae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should clearFiltersAndOptions&quot;,&quot;fullTitle&quot;:&quot;users store actions should clearFiltersAndOptions&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;_actions.default.clearFiltersAndOptions({\n  commit,\n  state\n});\n(0, _chai.expect)(commit.args).to.deep.eq([[&#x27;CLEAR_FILTERS&#x27;], [&#x27;SET_LIST_OPTIONS&#x27;]]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;91e53b6e-8fe5-4a69-91e1-a4edb0c70135&quot;,&quot;parentUUID&quot;:&quot;df04a06d-7b3f-4a45-bfbc-7d5ba56835ae&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;eee99ef0-fc7d-41ac-933e-f5f2cffb39cb&quot;,&quot;8618b5da-c2a6-48d6-9b1f-b73255da9267&quot;,&quot;30cc7051-d647-41c5-b7f5-1a38e87159bc&quot;,&quot;91e53b6e-8fe5-4a69-91e1-a4edb0c70135&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:7,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ce0a9922-c35b-4a67-b145-dfea28d87572&quot;,&quot;title&quot;:&quot;users store getters&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get users&quot;,&quot;fullTitle&quot;:&quot;users store getters should get users&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;state.users = [..._mockedData.mockedUsers];\nconst users = _getters.default.users(state);\n(0, _chai.expect)(users).to.deep.equal(_mockedData.mockedUsers);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d35db817-7623-4af2-92fe-95fb2710d963&quot;,&quot;parentUUID&quot;:&quot;ce0a9922-c35b-4a67-b145-dfea28d87572&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should get filterCount&quot;,&quot;fullTitle&quot;:&quot;users store getters should get filterCount&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;(0, _chai.expect)(_getters.default.filterCount(state)).to.eq(0);\nstate.filters.lastName = &#x27;foo&#x27;;\nstate.filters.firstName = &#x27;bar&#x27;;\nstate.filters.costCenter = &#x27;costCenter&#x27;;\nstate.filters.country = &#x27;&#x27;;\nstate.filters.activeOnly = true;\n(0, _chai.expect)(_getters.default.filterCount(state)).to.eq(4);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;13c34f25-9bf6-4358-9474-c8705c42e77a&quot;,&quot;parentUUID&quot;:&quot;ce0a9922-c35b-4a67-b145-dfea28d87572&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d35db817-7623-4af2-92fe-95fb2710d963&quot;,&quot;13c34f25-9bf6-4358-9474-c8705c42e77a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5466c2ee-a9be-4c3b-aeea-26cd5affc1d0&quot;,&quot;title&quot;:&quot;users store mutations&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/admin/build/admin/admin.js&quot;,&quot;file&quot;:&quot;/build/admin/admin.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should SET_USERS&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_USERS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_USERS(state, [..._mockedData.mockedUsers]);\n(0, _chai.expect)(state.users).to.deep.eq(_mockedData.mockedUsers);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;31827a4b-6ad4-4f01-ab4d-447079021522&quot;,&quot;parentUUID&quot;:&quot;5466c2ee-a9be-4c3b-aeea-26cd5affc1d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_USERS_TOTAL&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_USERS_TOTAL&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_USERS_TOTAL(state, _mockedData.mockedUsers.length);\n(0, _chai.expect)(state.total).to.eq(_mockedData.mockedUsers.length);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3de94475-ead6-422c-9142-cdf4b9eebf03&quot;,&quot;parentUUID&quot;:&quot;5466c2ee-a9be-4c3b-aeea-26cd5affc1d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SEARCH&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_SEARCH&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const searchTxt = &#x27;searching for something&#x27;;\nSET_SEARCH(state, searchTxt);\n(0, _chai.expect)(state.search).to.eq(searchTxt);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;cf8c76db-e90a-49a3-9987-b4889102c0fe&quot;,&quot;parentUUID&quot;:&quot;5466c2ee-a9be-4c3b-aeea-26cd5affc1d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_LIST_LOADING&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_LIST_LOADING&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_LIST_LOADING(state, true);\n(0, _chai.expect)(state.listLoading).to.eq(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;06428cf7-9b08-494f-a17d-066915c34875&quot;,&quot;parentUUID&quot;:&quot;5466c2ee-a9be-4c3b-aeea-26cd5affc1d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should CLEAR_FILTERS&quot;,&quot;fullTitle&quot;:&quot;users store mutations should CLEAR_FILTERS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;state.filters = {\n  lastName: &#x27;test last name&#x27;,\n  firstName: &#x27;first name&#x27;,\n  userName: &#x27;fooBar&#x27;,\n  email: &#x27;foo@bar.com&#x27;,\n  title: &#x27;my title&#x27;,\n  managerName: &#x27;manager name&#x27;,\n  managerGuid: 123,\n  costCenter: &#x27;cost center&#x27;,\n  country: &#x27;USM&#x27;,\n  department: &#x27;manager of managers&#x27;,\n  activeOnly: true\n};\nCLEAR_FILTERS(state);\n(0, _chai.expect)(state.filters).to.deep.eq({\n  lastName: null,\n  firstName: null,\n  userName: null,\n  email: null,\n  title: null,\n  managerName: null,\n  managerGuid: null,\n  costCenter: null,\n  country: null,\n  department: null,\n  activeOnly: false\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3ff44214-93b6-4b33-9c5e-3b00753de4fb&quot;,&quot;parentUUID&quot;:&quot;5466c2ee-a9be-4c3b-aeea-26cd5affc1d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_LIST_OPTIONS&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_LIST_OPTIONS&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const listOptions = {\n  sortBy: [&#x27;firstName&#x27;],\n  sortDesc: [true],\n  page: 2\n};\nSET_LIST_OPTIONS(state, listOptions);\n(0, _chai.expect)(state.listOptions).to.deep.eq(listOptions); // clear listOptions\nSET_LIST_OPTIONS(state);\n(0, _chai.expect)(state.listOptions).to.deep.eq({\n  sortBy: [],\n  sortDesc: [],\n  page: 1\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;58dcbc5b-d6c8-41d0-a017-388314fd0ea3&quot;,&quot;parentUUID&quot;:&quot;5466c2ee-a9be-4c3b-aeea-26cd5affc1d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SHOW_DIALOG&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_SHOW_DIALOG&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_SHOW_DIALOG(state, true);\n(0, _chai.expect)(state.showDialog).to.eq(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d6dded40-66c8-422e-91e1-071d83e93642&quot;,&quot;parentUUID&quot;:&quot;5466c2ee-a9be-4c3b-aeea-26cd5affc1d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_USER_LOADING&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_USER_LOADING&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_USER_LOADING(state, false);\n(0, _chai.expect)(state.userLoading).to.be.false;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;78dd6eda-7bd2-4e21-ace7-0a26951d3b5c&quot;,&quot;parentUUID&quot;:&quot;5466c2ee-a9be-4c3b-aeea-26cd5affc1d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_IS_CHECKING_USERNAME&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_IS_CHECKING_USERNAME&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_IS_CHECKING_USERNAME(state, true);\n(0, _chai.expect)(state.isCheckingUsername).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b8d4f1da-b0ea-4b89-8794-bb0e93ee40ab&quot;,&quot;parentUUID&quot;:&quot;5466c2ee-a9be-4c3b-aeea-26cd5affc1d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SELECTED_USER&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_SELECTED_USER&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const user = { ..._mockedData.mockedUser,\n  password: &#x27;testPwd&#x27;,\n  confirmPassword: &#x27;testPwd&#x27;\n};\nSET_SELECTED_USER(state, user);\n(0, _chai.expect)(state.selectedUser).to.deep.eq(user); // when no user specified\nSET_SELECTED_USER(state);\n(0, _chai.expect)(state.selectedUser).to.deep.eq({\n  firstName: &#x27;&#x27;,\n  middleName: &#x27;&#x27;,\n  lastName: &#x27;&#x27;,\n  userName: &#x27;&#x27;,\n  email: &#x27;&#x27;,\n  locale: &#x27;en-US&#x27;,\n  timezone: &#x27;&#x27;,\n  languageGuid: &#x27;2a803d80-de6d-4adc-a642-4e3d831f5460&#x27;,\n  // US English\n  password: &#x27;&#x27;,\n  confirmPassword: &#x27;&#x27;\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d2e9410b-adab-4484-a927-9102eeb396f7&quot;,&quot;parentUUID&quot;:&quot;5466c2ee-a9be-4c3b-aeea-26cd5affc1d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_LOCALES&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_LOCALES&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_LOCALES(state, [..._mockedData.mockedLocales]);\n(0, _chai.expect)(state.locales).to.deep.eq(_mockedData.mockedLocales);\nSET_LOCALES(state);\n(0, _chai.expect)(state.locales).to.deep.eq([]);\nSET_LOCALES(state, []);\n(0, _chai.expect)(state.locales).to.deep.eq([]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5fe78400-dcad-4eaf-9ca6-1e06745429ba&quot;,&quot;parentUUID&quot;:&quot;5466c2ee-a9be-4c3b-aeea-26cd5affc1d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_DELEGATION_START_DATE&quot;,&quot;fullTitle&quot;:&quot;users store mutations should SET_DELEGATION_START_DATE&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const date = &#x27;2020-01-12&#x27;;\nSET_SELECTED_USER(state, { ..._mockedData.mockedUser\n});\nSET_DELEGATION_START_DATE(state, date);\n(0, _chai.expect)(state.selectedUser.delegate.startDate).to.eq(date);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b364cbfd-6def-4000-9b70-e657100fd056&quot;,&quot;parentUUID&quot;:&quot;5466c2ee-a9be-4c3b-aeea-26cd5affc1d0&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;31827a4b-6ad4-4f01-ab4d-447079021522&quot;,&quot;3de94475-ead6-422c-9142-cdf4b9eebf03&quot;,&quot;cf8c76db-e90a-49a3-9987-b4889102c0fe&quot;,&quot;06428cf7-9b08-494f-a17d-066915c34875&quot;,&quot;3ff44214-93b6-4b33-9c5e-3b00753de4fb&quot;,&quot;58dcbc5b-d6c8-41d0-a017-388314fd0ea3&quot;,&quot;d6dded40-66c8-422e-91e1-071d83e93642&quot;,&quot;78dd6eda-7bd2-4e21-ace7-0a26951d3b5c&quot;,&quot;b8d4f1da-b0ea-4b89-8794-bb0e93ee40ab&quot;,&quot;d2e9410b-adab-4484-a927-9102eeb396f7&quot;,&quot;5fe78400-dcad-4eaf-9ca6-1e06745429ba&quot;,&quot;b364cbfd-6def-4000-9b70-e657100fd056&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:4,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;7cfd85cb-0c6c-43eb-877b-6289aa4ff2f1&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;27f94ea8-dd62-4da7-a3f6-15681f56c217&quot;,&quot;title&quot;:&quot;recentlyVisited&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/libs/commonLib/tests/unit/bookmarks.spec.js&quot;,&quot;file&quot;:&quot;/tests/unit/bookmarks.spec.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;recentlyVisited\&quot;&quot;,&quot;fullTitle&quot;:&quot;recentlyVisited \&quot;before each\&quot; hook in \&quot;recentlyVisited\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:31,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const dom = new JSDOM(\&quot;&lt;html&gt;\\n       &lt;body&gt;\\n          &lt;div class=\\\&quot;v-toolbar__title hidden-sm-and-down\\\&quot;&gt;Holidays&lt;/div&gt;\\n       &lt;/body&gt;\\n     &lt;/html&gt;\&quot;);\nglobal.window = dom.window;\nglobal.document = dom.window.document;\nglobal.location = {\n  hostname: hostname\n};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1f6e0bdb-70c9-4b82-98c7-86204d8b587e&quot;,&quot;parentUUID&quot;:&quot;27f94ea8-dd62-4da7-a3f6-15681f56c217&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;adds to recently visted history&quot;,&quot;fullTitle&quot;:&quot;recentlyVisited adds to recently visted history&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:51,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const bookmarks = require(&#x27;./mocks/bookmarks&#x27;);\nexpect(bookmarks.recentlyVisited).to.be.empty;\nawait bookmarks.addRecentlyVisited();\nexpect(bookmarks.recentlyVisited.length).to.equal(1);\nexpect(bookmarks.recentlyVisited[0].label).to.equal(&#x27;Holidays&#x27;);\nexpect(bookmarks.recentlyVisited[0].icon).to.equal(&#x27;mdi-calendar-month&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;acaad030-74bf-4f06-a736-bfaacf7e2e46&quot;,&quot;parentUUID&quot;:&quot;27f94ea8-dd62-4da7-a3f6-15681f56c217&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;acaad030-74bf-4f06-a736-bfaacf7e2e46&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:51,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;34fbceda-4338-4e5d-bc61-70c3df9b6756&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;544f15db-9eee-4b52-9ddc-dc5b905f8615&quot;,&quot;title&quot;:&quot;CategorySelect.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;CategorySelect.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:157,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_CategorySelect.CategorySelect, {\n  showDialog: false\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6bdeb654-6227-4c31-984e-2aa408b98a3f&quot;,&quot;parentUUID&quot;:&quot;544f15db-9eee-4b52-9ddc-dc5b905f8615&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ce9f5f0a-2607-4a16-9c89-b17bd9db2715&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;renders correctly&quot;,&quot;fullTitle&quot;:&quot;CategorySelect.vue inital state renders correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=input_categorySelect]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=dialog_categorySelect]&#x27;).exists()).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4fa87468-be9a-4f23-806d-e0973ac60d1b&quot;,&quot;parentUUID&quot;:&quot;ce9f5f0a-2607-4a16-9c89-b17bd9db2715&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;4fa87468-be9a-4f23-806d-e0973ac60d1b&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;fdd459f6-7d2b-49a7-8ff5-83ab1c5eb2db&quot;,&quot;title&quot;:&quot;CategorySelectDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;CategorySelectDialog.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:89,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_CategorySelectDialog.default, {\n  items: _mockedCategoryResponse.default\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f8900e93-c0f8-4a43-ac79-f56af18cb9b8&quot;,&quot;parentUUID&quot;:&quot;fdd459f6-7d2b-49a7-8ff5-83ab1c5eb2db&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;16d4e794-27e6-4a4c-8f34-476b968c3d42&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;renders correctly&quot;,&quot;fullTitle&quot;:&quot;CategorySelectDialog.vue inital state renders correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=objectCatTree]&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e6faa30a-a964-49b9-b73e-5a170ce3fecc&quot;,&quot;parentUUID&quot;:&quot;16d4e794-27e6-4a4c-8f34-476b968c3d42&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e6faa30a-a964-49b9-b73e-5a170ce3fecc&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;40a349ed-c809-4b00-90f8-637b67368864&quot;,&quot;title&quot;:&quot;CategoryTreeTable.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;CategoryTreeTable.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:38,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_CategoryTreeTable.CategoryTreeTable, {\n  objectType: &#x27;forms&#x27;,\n  objectData: _mockedData.mockedObjectData,\n  items: _mockedCategoryResponse.mockedCategoryResponse\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;81b5dfce-08fb-46bd-ba54-e3adbe02ad2d&quot;,&quot;parentUUID&quot;:&quot;40a349ed-c809-4b00-90f8-637b67368864&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;3e2877d7-7a66-471e-83ff-dfdbdf6617b7&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;renders correctly&quot;,&quot;fullTitle&quot;:&quot;CategoryTreeTable.vue inital state renders correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=objectCatTree]&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;[data-test=objectCatTree_permsButtonComponent]&#x27;).exists()).to.equal(false);\nexpect(wrapper.find(&#x27;[data-test=objectCatTree_datatable]&#x27;).exists()).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;ce534039-9470-4b17-b4e8-cfa78a62670e&quot;,&quot;parentUUID&quot;:&quot;3e2877d7-7a66-471e-83ff-dfdbdf6617b7&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;ce534039-9470-4b17-b4e8-cfa78a62670e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;2f719672-7b82-4ca8-8234-55f063cbc8c5&quot;,&quot;title&quot;:&quot;Report.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;Report.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:51,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_Reports.Report);\ndocument.body.setAttribute(&#x27;data-app&#x27;, true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;87c28723-2159-49c8-8f30-83b80c61bec1&quot;,&quot;parentUUID&quot;:&quot;2f719672-7b82-4ca8-8234-55f063cbc8c5&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;ecd8f4fb-61d2-4f15-b7ca-45c157d807fc&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays toolbar buttons&quot;,&quot;fullTitle&quot;:&quot;Report.vue inital state displays toolbar buttons&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;button i.mdi-refresh&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;button i.mdi-filter-plus-outline&#x27;).exists()).to.equal(true);\nexpect(wrapper.find(&#x27;button.mdi-export&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d79f514a-d996-4870-818b-ee32fe8e4ab9&quot;,&quot;parentUUID&quot;:&quot;ecd8f4fb-61d2-4f15-b7ca-45c157d807fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays report name&quot;,&quot;fullTitle&quot;:&quot;Report.vue inital state displays report name&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;.v-toolbar__title&#x27;).text()).to.equal(&#x27;Report - Update profile tasks&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bc6c9f81-e05d-4cf3-aca6-2dcfc316d7d3&quot;,&quot;parentUUID&quot;:&quot;ecd8f4fb-61d2-4f15-b7ca-45c157d807fc&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;d79f514a-d996-4870-818b-ee32fe8e4ab9&quot;,&quot;bc6c9f81-e05d-4cf3-aca6-2dcfc316d7d3&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;98277ca9-ffab-43f5-8c72-0f96939f1510&quot;,&quot;title&quot;:&quot;ReportTable.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;ReportTable.vue \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:96,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;wrapper = (0, _mocks.initWrapper)(_Reports.ReportTable, {\n  propsData: {\n    report: _mockedData.mockedFormattedReport\n  }\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;204683d1-7fcf-45c4-9bcc-d2662ae11524&quot;,&quot;parentUUID&quot;:&quot;98277ca9-ffab-43f5-8c72-0f96939f1510&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;18e6dee2-de4b-445a-af2e-75b9f8945193&quot;,&quot;title&quot;:&quot;inital state&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/libs/integrify-lib/build/integrify-lib/integrify-lib.js&quot;,&quot;file&quot;:&quot;/build/integrify-lib/integrify-lib.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;renders column headers&quot;,&quot;fullTitle&quot;:&quot;ReportTable.vue inital state renders column headers&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const headers = wrapper.findAll(&#x27;th&#x27;);\nconst expectedHeaders = [\&quot;Request Link\&quot;, \&quot;Username\&quot;, \&quot;ID For Manage Task\&quot;, \&quot;Status\&quot;, \&quot;Time from Start to Complete\&quot;, \&quot;Date Completed\&quot;, \&quot;Manager ID\&quot;, \&quot;System ID\&quot;, \&quot;Name\&quot;];\nexpectedHeaders.forEach((title, i) =&gt; expect(headers.at(i).text()).to.equal(title));&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f02b7483-2657-4d2c-b84f-710915caeadf&quot;,&quot;parentUUID&quot;:&quot;18e6dee2-de4b-445a-af2e-75b9f8945193&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;renders links with the correct icons&quot;,&quot;fullTitle&quot;:&quot;ReportTable.vue inital state renders links with the correct icons&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:6,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const firstRow = wrapper.find(&#x27;tbody &gt; tr&#x27;).findAll(&#x27;td&#x27;);\nexpect(firstRow.length).to.equal(9);\nexpect(firstRow.at(0).find(&#x27;button.mdi-magnify&#x27;).exists()).to.equal(true); // Request link\nexpect(firstRow.at(1).text()).to.equal(&#x27;juser&#x27;); // Username\nexpect(firstRow.at(2).find(&#x27;.mdi-menu-open&#x27;).exists()).to.equal(true); // Manage Task menu icon\nexpect(firstRow.at(2).find(&#x27;.v-menu&#x27;).exists()).to.equal(true); // manage task menu\nexpect(firstRow.at(3).text()).to.equal(&#x27;Completed&#x27;); // status\nexpect(firstRow.at(5).text()).to.equal(&#x27;2/24/2021&#x27;); // date completed\nexpect(firstRow.at(6).text()).to.equal(&#x27;1&#x27;); // manager id\nexpect(firstRow.at(7).find(&#x27;button.mdi-magnify&#x27;).exists()).to.equal(true); // link to Task\nexpect(firstRow.at(8).text()).to.equal(&#x27;System Task - Update Profile&#x27;); // task name&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;26c3b62d-ba37-455c-a90b-a0510cf39f22&quot;,&quot;parentUUID&quot;:&quot;18e6dee2-de4b-445a-af2e-75b9f8945193&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;f02b7483-2657-4d2c-b84f-710915caeadf&quot;,&quot;26c3b62d-ba37-455c-a90b-a0510cf39f22&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:8,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:true,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;d2e72ba2-d450-4fa3-b27e-79d138750bac&quot;,&quot;title&quot;:&quot;&quot;,&quot;fullFile&quot;:&quot;&quot;,&quot;file&quot;:&quot;&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;commits SET_SELECTED_FOR_EDIT mutation&quot;,&quot;fullTitle&quot;:&quot;commits SET_SELECTED_FOR_EDIT mutation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(mockstore.mutations.SET_SELECTED_FOR_EDIT).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b9c953e2-3d81-4c66-9006-b365a9ee8e01&quot;,&quot;parentUUID&quot;:&quot;d2e72ba2-d450-4fa3-b27e-79d138750bac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true},{&quot;title&quot;:&quot;commits SET_SHOW_DIALOG mutation&quot;,&quot;fullTitle&quot;:&quot;commits SET_SHOW_DIALOG mutation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;fd47cdc5-6f70-43d3-b87e-1090ff563e9f&quot;,&quot;parentUUID&quot;:&quot;d2e72ba2-d450-4fa3-b27e-79d138750bac&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:true}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;95d54e33-5402-47f9-8b70-ba52e74d71f4&quot;,&quot;title&quot;:&quot;PasswordSettings.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;renders correctly&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue renders correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:5,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(pwdSettingsApi.listPasswordSettings).to.have.been.called;\nexpect(pwdExpirationActiveCheckBox).to.be.exist;\nexpect(pwdExpirationActiveCheckBox.element.checked).to.equal(false);\nexpect(pwdExpirationTextBox).to.be.exist;\nexpect(pwdExpirationTextBox.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);\nexpect(pwdExpirationTextBox.element.value).to.equal(&#x27;7&#x27;);\nexpect(pwdStrengthActiveCheckBox).to.be.exist;\nexpect(pwdStrengthActiveCheckBox.element.checked).to.equal(false);\nexpect(minPwdLengthTextBox).to.be.exist;\nexpect(minPwdLengthTextBox.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);\nexpect(minPwdLengthTextBox.element.value).to.equal(&#x27;3&#x27;);\nexpect(maxPwdLengthTextBox).to.be.exist;\nexpect(maxPwdLengthTextBox.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);\nexpect(maxPwdLengthTextBox.element.value).to.equal(&#x27;10&#x27;);\nexpect(pwdStrengthExpressionTextBox).to.be.exist;\nexpect(pwdStrengthExpressionTextBox.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;); // remember \\\\ is escaped \\\nexpect(pwdStrengthExpressionTextBox.element.value).to.equal(&#x27;^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{3,10}$&#x27;);\nconst restoreButton = wrapper.find(&#x27;button#restoreDefaultPwdStrengthExpression&#x27;);\nexpect(restoreButton).to.be.exist;\nexpect(restoreButton.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);\nexpect(wrapper.find(&#x27;button#save&#x27;)).to.be.exist;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;36d0e73b-e17d-496e-9657-d28a1d6cdc24&quot;,&quot;parentUUID&quot;:&quot;95d54e33-5402-47f9-8b70-ba52e74d71f4&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;5d115ab1-663c-4f63-afee-d67f92b7873d&quot;,&quot;title&quot;:&quot;checkboxes enabling textboxes&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;enables Expiration (days) textbox when Enforce Password Expiration checkbox is checked&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue checkboxes enabling textboxes enables Expiration (days) textbox when Enforce Password Expiration checkbox is checked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pwdExpirationActiveCheckBox.trigger(&#x27;click&#x27;);\nawait wrapper.vm.$nextTick();\nexpect(pwdExpirationActiveCheckBox.element.checked).to.equal(true);\nexpect(pwdExpirationTextBox.attributes(&#x27;disabled&#x27;)).to.equal(undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;468e4297-9d28-4b86-a31a-644017f787fc&quot;,&quot;parentUUID&quot;:&quot;5d115ab1-663c-4f63-afee-d67f92b7873d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;enables min/max password length and strength expression textboxes when Enforce Password Strength checkbox is checked&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue checkboxes enabling textboxes enables min/max password length and strength expression textboxes when Enforce Password Strength checkbox is checked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:20,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pwdStrengthActiveCheckBox.trigger(&#x27;click&#x27;);\nawait wrapper.vm.$nextTick();\nexpect(pwdStrengthActiveCheckBox.element.checked).to.equal(true);\nexpect(minPwdLengthTextBox.attributes(&#x27;disabled&#x27;)).to.equal(undefined);\nexpect(maxPwdLengthTextBox.attributes(&#x27;disabled&#x27;)).to.equal(undefined);\nexpect(pwdStrengthExpressionTextBox.attributes(&#x27;disabled&#x27;)).to.equal(undefined);\nconst restoreButton = wrapper.find(&#x27;button#restoreDefaultPwdStrengthExpression&#x27;);\nexpect(restoreButton.attributes(&#x27;disabled&#x27;)).to.equal(undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f9bf81e1-6bf3-49c7-98dc-8f9a74c64072&quot;,&quot;parentUUID&quot;:&quot;5d115ab1-663c-4f63-afee-d67f92b7873d&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;468e4297-9d28-4b86-a31a-644017f787fc&quot;,&quot;f9bf81e1-6bf3-49c7-98dc-8f9a74c64072&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:36,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ec096bbe-944c-4497-a1f3-7402737c4eff&quot;,&quot;title&quot;:&quot;password length change effects on strength regular expression&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;correctly adjusts strength expression when min pwd length changes&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue password length change effects on strength regular expression correctly adjusts strength expression when min pwd length changes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:16,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pwdStrengthActiveCheckBox.trigger(&#x27;click&#x27;);\nminPwdLengthTextBox.element.value = &#x27;4&#x27;;\nminPwdLengthTextBox.trigger(&#x27;input&#x27;);\nmaxPwdLengthTextBox.element.value = &#x27;11&#x27;;\nmaxPwdLengthTextBox.trigger(&#x27;input&#x27;);\nawait wrapper.vm.$nextTick(); // remember \\\\ is escaped \\\nexpect(pwdStrengthExpressionTextBox.element.value).to.equal(&#x27;^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{4,11}$&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;06588b83-5863-404e-acca-a1bfcca5d331&quot;,&quot;parentUUID&quot;:&quot;ec096bbe-944c-4497-a1f3-7402737c4eff&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;06588b83-5863-404e-acca-a1bfcca5d331&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:16,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c8c8ecc3-a294-4def-a222-be24bd59d8c1&quot;,&quot;title&quot;:&quot;restore default password strength&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;restores default password strength values when restore button is clicked&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue restore default password strength restores default password strength values when restore button is clicked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:22,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;pwdStrengthActiveCheckBox.trigger(&#x27;click&#x27;);\nawait minPwdLengthTextBox.setValue(&#x27;4&#x27;);\nawait maxPwdLengthTextBox.setValue(&#x27;11&#x27;);\nawait wrapper.find(&#x27;button#restoreDefaultPwdStrengthExpression&#x27;).trigger(&#x27;click&#x27;); // remember \\\\ is escaped \\\nexpect(pwdStrengthExpressionTextBox.element.value).to.equal(&#x27;^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{3,10}$&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;558309bf-88c3-45d1-9023-57ed2ebfcb6e&quot;,&quot;parentUUID&quot;:&quot;c8c8ecc3-a294-4def-a222-be24bd59d8c1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;558309bf-88c3-45d1-9023-57ed2ebfcb6e&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:22,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e47aa6d4-7554-426b-bd10-466302baba31&quot;,&quot;title&quot;:&quot;save password settings&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;calls updatePasswordSettings with correct params when Save button is clicked&quot;,&quot;fullTitle&quot;:&quot;PasswordSettings.vue save password settings calls updatePasswordSettings with correct params when Save button is clicked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(pwdExpirationActiveCheckBox.element.checked).to.equal(true); // change some settings in ui. make sure api call has correct params when saved\npwdExpirationTextBox.setValue(&#x27;10&#x27;);\nawait minPwdLengthTextBox.setValue(&#x27;4&#x27;);\nawait maxPwdLengthTextBox.setValue(&#x27;11&#x27;);\nwrapper.find(&#x27;button#save&#x27;).trigger(&#x27;click&#x27;);\nexpect(pwdSettingsApi.updatePasswordSettings).to.have.been.called;\nconst requestBody = pwdSettingsApi.updatePasswordSettings.args[0][1].requestBody;\nexpect(requestBody).to.be.ok;\nexpect(requestBody.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION&#x27;).settingsValue).to.equal(&#x27;10&#x27;);\nexpect(requestBody.find(x =&gt; x.settingsKey == &#x27;PWD_EXPIRATION_ACTIVE&#x27;).settingsValue).to.equal(&#x27;1&#x27;);\nexpect(requestBody.find(x =&gt; x.settingsKey == &#x27;PWD_STRENGTH_ACTIVE&#x27;).settingsValue).to.equal(&#x27;1&#x27;);\nexpect(requestBody.find(x =&gt; x.settingsKey == &#x27;PWD_STRENGTH&#x27;).settingsValue).to.equal(&#x27;^(?=.*\\\\d)(?=.*[a-z])(?=.*[A-Z]).{4,11}$&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;290dfb81-6dd5-4eef-a0f7-5772cf46df81&quot;,&quot;parentUUID&quot;:&quot;e47aa6d4-7554-426b-bd10-466302baba31&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;290dfb81-6dd5-4eef-a0f7-5772cf46df81&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:24,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[&quot;36d0e73b-e17d-496e-9657-d28a1d6cdc24&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;68270c0a-309e-49a6-85ec-f0cb11afdc0c&quot;,&quot;title&quot;:&quot;BiztimeDialog.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;BiztimeDialog.vue\&quot;&quot;,&quot;fullTitle&quot;:&quot;BiztimeDialog.vue \&quot;before each\&quot; hook in \&quot;BiztimeDialog.vue\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;mockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;34943cd2-ddc4-4d14-ae74-2c6b11a4eca8&quot;,&quot;parentUUID&quot;:&quot;68270c0a-309e-49a6-85ec-f0cb11afdc0c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;BiztimeDialog.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// console.log(&#x27;-- dd:&#x27;, wrapper.vm.$store.state.biztimes.selectedForEdit);\n// headline\nconst headline = wrapper.find(&#x27;span.headline&#x27;);\nexpect(headline.exists()).to.be.true;\nexpect(headline.text()).to.eq(`Edit Business Hours for ${biztime.dayOfWeek}`); // inputs\nexpect(startTimeRef.value).to.deep.equal(biztime.startTime);\nexpect(endTimeRef.value).to.deep.equal(biztime.endTime);\nexpect(activeRef.inputValue).to.equal(biztime.active); // btns\nexpect(saveBtn.exists()).to.be.true;\nexpect(closeBtn.exists()).to.be.true;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;344a0e85-60dc-407e-909a-7c6fdb6c2ecc&quot;,&quot;parentUUID&quot;:&quot;68270c0a-309e-49a6-85ec-f0cb11afdc0c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should save biztime&quot;,&quot;fullTitle&quot;:&quot;BiztimeDialog.vue should save biztime&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await saveBtn.trigger(&#x27;click&#x27;);\nexpect(mockstore.actions.saveBiztime).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4d57a7d4-dacb-415f-aced-c7de22720fab&quot;,&quot;parentUUID&quot;:&quot;68270c0a-309e-49a6-85ec-f0cb11afdc0c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should close dialog&quot;,&quot;fullTitle&quot;:&quot;BiztimeDialog.vue should close dialog&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await closeBtn.trigger(&#x27;click&#x27;);\nexpect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;\nexpect(mockstore.mutations.SET_SELECTED_FOR_EDIT).to.have.been.calledWith(store.state.biztimes, {});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;a8098063-6828-4af6-a4b8-b9bb61a5323a&quot;,&quot;parentUUID&quot;:&quot;68270c0a-309e-49a6-85ec-f0cb11afdc0c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;344a0e85-60dc-407e-909a-7c6fdb6c2ecc&quot;,&quot;4d57a7d4-dacb-415f-aced-c7de22720fab&quot;,&quot;a8098063-6828-4af6-a4b8-b9bb61a5323a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;e3cba390-2aac-4888-ab6d-86073a1d481c&quot;,&quot;title&quot;:&quot;BiztimesTable.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;BiztimesTable.vue\&quot;&quot;,&quot;fullTitle&quot;:&quot;BiztimesTable.vue \&quot;before each\&quot; hook in \&quot;BiztimesTable.vue\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;mockstore = (0, _store.mockStore)();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;945d3aae-a763-424d-ad35-d60c7614a2f3&quot;,&quot;parentUUID&quot;:&quot;e3cba390-2aac-4888-ab6d-86073a1d481c&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should render correctly&quot;,&quot;fullTitle&quot;:&quot;BiztimesTable.vue should render correctly&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;// pageTitle\nexpect(pageTitle.exists()).to.be.true;\nexpect(pageTitle.text()).to.eq(&#x27;Business Hours&#x27;); // link to set permissions\nexpect(wrapper.find(&#x27;[data-test=\&quot;setPermissions\&quot;&#x27;).exists()).to.equal(true); // getBiztimes\nexpect(mockstore.actions.getBiztimes).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bb386818-4354-4925-9a8a-22d25b943ed0&quot;,&quot;parentUUID&quot;:&quot;e3cba390-2aac-4888-ab6d-86073a1d481c&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;bb386818-4354-4925-9a8a-22d25b943ed0&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;5ba5588f-f322-4197-9008-640ae536ce8e&quot;,&quot;title&quot;:&quot;HolidaysTable.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;6ea34749-1bb7-4b6a-a535-4af0b5afde15&quot;,&quot;title&quot;:&quot;initial state&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook&quot;,&quot;fullTitle&quot;:&quot;HolidaysTable.vue initial state \&quot;before each\&quot; hook&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_HolidaysTable.default, {\n  store\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;f3edc22f-772a-4ec2-8ab8-12d342e9e2e4&quot;,&quot;parentUUID&quot;:null,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;4672f393-4e84-4dd1-b33d-bb7233128a25&quot;,&quot;title&quot;:&quot;Menu.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;Menu.vue\&quot;&quot;,&quot;fullTitle&quot;:&quot;Menu.vue \&quot;before each\&quot; hook in \&quot;Menu.vue\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:23,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_Menu.default, {\n  store\n}); // data-app prevents warning during test: [Vuetify] Unable to locate target [data-app]\n// https://forum.vuejs.org/t/vuetify-data-app-true-and-problems-rendering-v-dialog-in-unit-tests/27495\ndocument.body.setAttribute(&#x27;data-app&#x27;, true);\nmenuButton = wrapper.find(\&quot;button#holidayMenu\&quot;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;5443e953-773f-441f-a7cf-bd47a66e3dc7&quot;,&quot;parentUUID&quot;:&quot;4672f393-4e84-4dd1-b33d-bb7233128a25&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;19d19325-ae52-425b-a09f-d0a36302dc31&quot;,&quot;title&quot;:&quot;initial state&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays add holiday button&quot;,&quot;fullTitle&quot;:&quot;Menu.vue initial state displays add holiday button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:74,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;menuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  expect(wrapper.find(&#x27;#addHolidayMobile&#x27;).exists()).to.equal(true);\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;972204e5-77ba-4cea-900a-1711776c597c&quot;,&quot;parentUUID&quot;:&quot;19d19325-ae52-425b-a09f-d0a36302dc31&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays set roles &amp; permissions button&quot;,&quot;fullTitle&quot;:&quot;Menu.vue initial state displays set roles &amp; permissions button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:89,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;menuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  expect(wrapper.find(&#x27;[data-test=\&quot;setPermissionsMobile\&quot;&#x27;).exists()).to.equal(true);\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;bffef44b-c9e9-474f-8ee8-9127ed6c0cd5&quot;,&quot;parentUUID&quot;:&quot;19d19325-ae52-425b-a09f-d0a36302dc31&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays disabled delete holidays button&quot;,&quot;fullTitle&quot;:&quot;Menu.vue initial state displays disabled delete holidays button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:75,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;menuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  const deleteButton = wrapper.find(&#x27;[data-test=\&quot;deleteButtonMobile\&quot;&#x27;);\n  expect(deleteButton.exists()).to.equal(true);\n  expect(deleteButton.attributes(&#x27;disabled&#x27;)).to.not.be.undefined;\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;8fed5012-2c55-4af2-8de7-d36a4208cd37&quot;,&quot;parentUUID&quot;:&quot;19d19325-ae52-425b-a09f-d0a36302dc31&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;972204e5-77ba-4cea-900a-1711776c597c&quot;,&quot;bffef44b-c9e9-474f-8ee8-9127ed6c0cd5&quot;,&quot;8fed5012-2c55-4af2-8de7-d36a4208cd37&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:238,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;c5f1eeac-aab8-48ac-b10b-d1cbbcd4dcfe&quot;,&quot;title&quot;:&quot;Menu item clicks&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;add holiday button click&quot;,&quot;fullTitle&quot;:&quot;Menu.vue Menu item clicks add holiday button click&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:63,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;medium&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;menuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  expect(wrapper.find(&#x27;#addHolidayMobile&#x27;).exists()).to.equal(true);\n  wrapper.find(&#x27;button#addHolidayMobile&#x27;).trigger(&#x27;click&#x27;);\n  it(&#x27;commits SET_SELECTED_FOR_EDIT mutation&#x27;, () =&gt; {\n    expect(mockstore.mutations.SET_SELECTED_FOR_EDIT).to.have.been.called;\n  });\n  it(&#x27;commits SET_SHOW_DIALOG mutation&#x27;, () =&gt; {\n    expect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;\n  });\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3cc324f4-74c6-48da-a920-1d7523c94f55&quot;,&quot;parentUUID&quot;:&quot;c5f1eeac-aab8-48ac-b10b-d1cbbcd4dcfe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;enables delete holidays button&quot;,&quot;fullTitle&quot;:&quot;Menu.vue Menu item clicks enables delete holidays button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:121,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;slow&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const state = {\n  holidays: [{}, {}, {}],\n  selectedForDelete: [{}],\n  selectedForEdit: {},\n  showDialog: false\n};\nstore = new _vuex.default.Store({\n  modules: (0, _store.mockStore)({\n    state\n  }).modules\n});\nwrapper = (0, _mocks.initWrapper)(_Menu.default, {\n  store\n});\ndocument.body.setAttribute(&#x27;data-app&#x27;, true);\nmenuButton = wrapper.find(\&quot;button#holidayMenu\&quot;);\nmenuButton.trigger(&#x27;click&#x27;).then(() =&gt; {\n  const deleteButton = wrapper.find(&#x27;[data-test=\&quot;deleteButtonMobile\&quot;&#x27;);\n  expect(deleteButton.attributes(&#x27;disabled&#x27;)).to.equal(undefined);\n  done();\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;789c787e-b69d-4779-a46a-3482a4ff4e3d&quot;,&quot;parentUUID&quot;:&quot;c5f1eeac-aab8-48ac-b10b-d1cbbcd4dcfe&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;3cc324f4-74c6-48da-a920-1d7523c94f55&quot;,&quot;789c787e-b69d-4779-a46a-3482a4ff4e3d&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:184,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;3cacbc68-36a8-4f16-8925-21617cc89316&quot;,&quot;title&quot;:&quot;Toolbar.vue&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[],&quot;suites&quot;:[{&quot;uuid&quot;:&quot;07421b58-c246-4e27-935c-a71e4471bc37&quot;,&quot;title&quot;:&quot;initial state&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;initial state\&quot;&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue initial state \&quot;before each\&quot; hook in \&quot;initial state\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;store = new _vuex.default.Store({\n  modules: (0, _store.mockStore)().modules\n});\nwrapper = (0, _mocks.initWrapper)(_Toolbar.default, {\n  store\n});\ndeleteButton = wrapper.find(&#x27;[data-test=\&quot;deleteButton\&quot;&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;3435ff4f-33fe-4baf-af09-91237af785bc&quot;,&quot;parentUUID&quot;:&quot;07421b58-c246-4e27-935c-a71e4471bc37&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;displays add holiday button&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue initial state displays add holiday button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;button#addHoliday&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9b3ff472-3f97-4408-83ff-828e7f1bdeba&quot;,&quot;parentUUID&quot;:&quot;07421b58-c246-4e27-935c-a71e4471bc37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays set roles &amp; permissions button&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue initial state displays set roles &amp; permissions button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(wrapper.find(&#x27;[data-test=\&quot;setPermissions\&quot;&#x27;).exists()).to.equal(true);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9495375b-74c2-4a5f-a3b7-968e7392d25b&quot;,&quot;parentUUID&quot;:&quot;07421b58-c246-4e27-935c-a71e4471bc37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;displays disabled delete holidays button&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue initial state displays disabled delete holidays button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(deleteButton.exists()).to.equal(true);\nexpect(deleteButton.attributes(&#x27;disabled&#x27;)).to.equal(&#x27;disabled&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;09013a54-5ffe-4b5b-92f5-1add7ae7a298&quot;,&quot;parentUUID&quot;:&quot;07421b58-c246-4e27-935c-a71e4471bc37&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;9b3ff472-3f97-4408-83ff-828e7f1bdeba&quot;,&quot;9495375b-74c2-4a5f-a3b7-968e7392d25b&quot;,&quot;09013a54-5ffe-4b5b-92f5-1add7ae7a298&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;ea5c07e8-f6e3-480a-9072-726f68e263f1&quot;,&quot;title&quot;:&quot;add holiday button click&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;add holiday button click\&quot;&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue add holiday button click \&quot;before each\&quot; hook in \&quot;add holiday button click\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:24,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;mockstore = (0, _store.mockStore)();\nstore = new _vuex.default.Store({\n  modules: mockstore.modules\n});\nwrapper = (0, _mocks.initWrapper)(_Toolbar.default, {\n  store\n});\nwrapper.find(&#x27;button#addHoliday&#x27;).trigger(&#x27;click&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;4400cece-ebee-4431-aebe-283c78fc39b2&quot;,&quot;parentUUID&quot;:&quot;ea5c07e8-f6e3-480a-9072-726f68e263f1&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;commits SET_SELECTED_FOR_EDIT mutation&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue add holiday button click commits SET_SELECTED_FOR_EDIT mutation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(mockstore.mutations.SET_SELECTED_FOR_EDIT).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;c2bd2567-c33f-4670-ad41-caae15e52ee6&quot;,&quot;parentUUID&quot;:&quot;ea5c07e8-f6e3-480a-9072-726f68e263f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;commits SET_SHOW_DIALOG mutation&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue add holiday button click commits SET_SHOW_DIALOG mutation&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(mockstore.mutations.SET_SHOW_DIALOG).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;6c36ea77-e213-4ef5-a09f-fb903e18c57a&quot;,&quot;parentUUID&quot;:&quot;ea5c07e8-f6e3-480a-9072-726f68e263f1&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;c2bd2567-c33f-4670-ad41-caae15e52ee6&quot;,&quot;6c36ea77-e213-4ef5-a09f-fb903e18c57a&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;65f71dfe-d003-4544-a5e9-e9311ddffa76&quot;,&quot;title&quot;:&quot;holidays have been selected for deletion&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;holidays have been selected for deletion\&quot;&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue holidays have been selected for deletion \&quot;before each\&quot; hook in \&quot;holidays have been selected for deletion\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:21,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const state = {\n  holidays: [{}, {}, {}],\n  selectedForDelete: [{}],\n  selectedForEdit: {},\n  showDialog: false\n};\nmockstore = (0, _store.mockStore)({\n  state\n});\nstore = new _vuex.default.Store({\n  modules: mockstore.modules\n});\nwrapper = (0, _mocks.initWrapper)(_Toolbar.default, {\n  store\n});\ndeleteButton = wrapper.find(&#x27;[data-test=\&quot;deleteButton\&quot;&#x27;);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;08ed0aac-6dc9-44eb-abc8-0a9516b3d223&quot;,&quot;parentUUID&quot;:&quot;65f71dfe-d003-4544-a5e9-e9311ddffa76&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;enables delete holidays button&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue holidays have been selected for deletion enables delete holidays button&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;expect(deleteButton.attributes(&#x27;disabled&#x27;)).to.equal(undefined);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;22ee8f0f-ea5f-4792-941b-05ddff50e57f&quot;,&quot;parentUUID&quot;:&quot;65f71dfe-d003-4544-a5e9-e9311ddffa76&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;dispatches delete_holidays action when delete holidays button is clicked&quot;,&quot;fullTitle&quot;:&quot;Toolbar.vue holidays have been selected for deletion dispatches delete_holidays action when delete holidays button is clicked&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;deleteButton.trigger(&#x27;click&#x27;);\nexpect(mockstore.actions.delete_holidays).to.have.been.called;&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;049246ba-92be-465f-99ce-62303f08eb46&quot;,&quot;parentUUID&quot;:&quot;65f71dfe-d003-4544-a5e9-e9311ddffa76&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;22ee8f0f-ea5f-4792-941b-05ddff50e57f&quot;,&quot;049246ba-92be-465f-99ce-62303f08eb46&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:1,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:0,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;aae8b483-9b5b-4a56-8561-b3d1a1675531&quot;,&quot;title&quot;:&quot;biztime actions&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[{&quot;title&quot;:&quot;\&quot;before each\&quot; hook in \&quot;biztime actions\&quot;&quot;,&quot;fullTitle&quot;:&quot;biztime actions \&quot;before each\&quot; hook in \&quot;biztime actions\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;commit = _sinon.default.spy();\nstate = {};&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;9f8beb4c-146d-427a-8edf-0aef47967736&quot;,&quot;parentUUID&quot;:&quot;aae8b483-9b5b-4a56-8561-b3d1a1675531&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;afterHooks&quot;:[{&quot;title&quot;:&quot;\&quot;after each\&quot; hook in \&quot;biztime actions\&quot;&quot;,&quot;fullTitle&quot;:&quot;biztime actions \&quot;after each\&quot; hook in \&quot;biztime actions\&quot;&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:null,&quot;speed&quot;:null,&quot;pass&quot;:false,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;_sinon.default.restore();&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;b5f929f4-085c-427e-ba2e-d1401e5eeefb&quot;,&quot;parentUUID&quot;:&quot;aae8b483-9b5b-4a56-8561-b3d1a1675531&quot;,&quot;isHook&quot;:true,&quot;skipped&quot;:false}],&quot;tests&quot;:[{&quot;title&quot;:&quot;should getBiztimes&quot;,&quot;fullTitle&quot;:&quot;biztime actions should getBiztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await _actions.default.getBiztimes({\n  commit,\n  state\n}, _commonLib.default);\n(0, _chai.expect)(commit.args).to.deep.equal([[&#x27;SET_BIZTIMES&#x27;, [..._list.default]]]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;1da556ae-d2d7-4be1-9d35-7686a96fa715&quot;,&quot;parentUUID&quot;:&quot;aae8b483-9b5b-4a56-8561-b3d1a1675531&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should saveBiztime&quot;,&quot;fullTitle&quot;:&quot;biztime actions should saveBiztime&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:2,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;await _actions.default.saveBiztime({\n  commit,\n  state\n}, { ..._list.default[0],\n  $commonLib: _commonLib.default\n});\n(0, _chai.expect)(commit.args).to.deep.equal([[&#x27;SET_BIZTIMES&#x27;, [..._list.default]], [&#x27;SET_SELECTED_FOR_EDIT&#x27;, {}], [&#x27;SET_SHOW_DIALOG&#x27;, false]]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;d31873be-a045-4776-8f9c-99c79d279416&quot;,&quot;parentUUID&quot;:&quot;aae8b483-9b5b-4a56-8561-b3d1a1675531&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;1da556ae-d2d7-4be1-9d35-7686a96fa715&quot;,&quot;d31873be-a045-4776-8f9c-99c79d279416&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:5,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;66d7ab67-9cfd-43d0-a7d1-92a62ac8f750&quot;,&quot;title&quot;:&quot;biztime getters&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should get biztimes&quot;,&quot;fullTitle&quot;:&quot;biztime getters should get biztimes&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:3,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;const state = {\n  biztimes: JSON.parse(JSON.stringify(_list.default))\n};\nconst biztimes = _getters.default.biztimes(state);\n(0, _chai.expect)(biztimes).not.to.deep.equal(_list.default);\nbiztimes.forEach(biztime =&gt; {\n  const startTime = {\n    hour: biztime.startHour,\n    minute: biztime.startMinute\n  };\n  const endTime = {\n    hour: biztime.endHour,\n    minute: biztime.endMinute\n  };\n  (0, _chai.expect)(biztime.startTime).to.deep.equal(startTime);\n  (0, _chai.expect)(biztime.endTime).to.deep.equal(endTime);\n});&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e06f93ed-3d5f-4068-beb9-622ce56ecfca&quot;,&quot;parentUUID&quot;:&quot;66d7ab67-9cfd-43d0-a7d1-92a62ac8f750&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;e06f93ed-3d5f-4068-beb9-622ce56ecfca&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:3,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000},{&quot;uuid&quot;:&quot;1666b64d-6005-4850-b572-064c40061e16&quot;,&quot;title&quot;:&quot;biztime mutations&quot;,&quot;fullFile&quot;:&quot;/home/rich/integrify/1_PLUS/single-spa-portal/systemsettings/build/systemsettings/systemsettings.js&quot;,&quot;file&quot;:&quot;/build/systemsettings/systemsettings.js&quot;,&quot;beforeHooks&quot;:[],&quot;afterHooks&quot;:[],&quot;tests&quot;:[{&quot;title&quot;:&quot;should SET_BIZTIMES&quot;,&quot;fullTitle&quot;:&quot;biztime mutations should SET_BIZTIMES&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_BIZTIMES(state, [..._list.default]);\n(0, _chai.expect)(state.biztimes).to.deep.equal(_list.default);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;40bf46d0-32fc-40f7-bf63-c0069bf99b73&quot;,&quot;parentUUID&quot;:&quot;1666b64d-6005-4850-b572-064c40061e16&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SELECTED_FOR_EDIT&quot;,&quot;fullTitle&quot;:&quot;biztime mutations should SET_SELECTED_FOR_EDIT&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:0,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_SELECTED_FOR_EDIT(state, _list.default[0]);\n(0, _chai.expect)(state.selectedForEdit).to.deep.equal(_list.default[0]);\nSET_SELECTED_FOR_EDIT(state, _list.default[3]);\n(0, _chai.expect)(state.selectedForEdit).to.deep.equal(_list.default[3]);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;89522dfe-8dfa-4b12-9733-22ccf88103e5&quot;,&quot;parentUUID&quot;:&quot;1666b64d-6005-4850-b572-064c40061e16&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false},{&quot;title&quot;:&quot;should SET_SHOW_DIALOG&quot;,&quot;fullTitle&quot;:&quot;biztime mutations should SET_SHOW_DIALOG&quot;,&quot;timedOut&quot;:false,&quot;duration&quot;:1,&quot;state&quot;:&quot;passed&quot;,&quot;speed&quot;:&quot;fast&quot;,&quot;pass&quot;:true,&quot;fail&quot;:false,&quot;pending&quot;:false,&quot;context&quot;:null,&quot;code&quot;:&quot;SET_SHOW_DIALOG(state, true);\n(0, _chai.expect)(state.showDialog).to.equal(true);\nSET_SHOW_DIALOG(state, false);\n(0, _chai.expect)(state.showDialog).to.equal(false);&quot;,&quot;err&quot;:{},&quot;uuid&quot;:&quot;e2c0542d-9769-454f-9ec3-6e3548d44c91&quot;,&quot;parentUUID&quot;:&quot;1666b64d-6005-4850-b572-064c40061e16&quot;,&quot;isHook&quot;:false,&quot;skipped&quot;:false}],&quot;suites&quot;:[],&quot;passes&quot;:[&quot;40bf46d0-32fc-40f7-bf63-c0069bf99b73&quot;,&quot;89522dfe-8dfa-4b12-9733-22ccf88103e5&quot;,&quot;e2c0542d-9769-454f-9ec3-6e3548d44c91&quot;],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[],&quot;duration&quot;:2,&quot;root&quot;:false,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;passes&quot;:[],&quot;failures&quot;:[],&quot;pending&quot;:[],&quot;skipped&quot;:[&quot;b9c953e2-3d81-4c66-9006-b365a9ee8e01&quot;,&quot;fd47cdc5-6f70-43d3-b87e-1090ff563e9f&quot;],&quot;duration&quot;:0,&quot;root&quot;:true,&quot;rootEmpty&quot;:false,&quot;_timeout&quot;:2000}],&quot;meta&quot;:{&quot;mocha&quot;:{&quot;version&quot;:&quot;8.1.1&quot;},&quot;mochawesome&quot;:{&quot;options&quot;:{&quot;quiet&quot;:false,&quot;reportFilename&quot;:&quot;mochawesome&quot;,&quot;saveHtml&quot;:true,&quot;saveJson&quot;:true,&quot;consoleReporter&quot;:&quot;spec&quot;,&quot;useInlineDiffs&quot;:false,&quot;code&quot;:true},&quot;version&quot;:&quot;6.1.1&quot;},&quot;marge&quot;:{&quot;options&quot;:null,&quot;version&quot;:&quot;5.1.0&quot;}}}" data-config="{&quot;reportDir&quot;:&quot;mochawesome-report&quot;,&quot;reportTitle&quot;:&quot;test&quot;,&quot;reportPageTitle&quot;:&quot;Mochawesome Report&quot;,&quot;inline&quot;:false,&quot;inlineAssets&quot;:false,&quot;cdn&quot;:false,&quot;charts&quot;:false,&quot;enableCharts&quot;:false,&quot;code&quot;:true,&quot;enableCode&quot;:true,&quot;autoOpen&quot;:false,&quot;overwrite&quot;:true,&quot;timestamp&quot;:false,&quot;ts&quot;:false,&quot;showPassed&quot;:true,&quot;showFailed&quot;:true,&quot;showPending&quot;:true,&quot;showSkipped&quot;:false,&quot;showHooks&quot;:&quot;failed&quot;,&quot;saveJson&quot;:false,&quot;saveHtml&quot;:true,&quot;dev&quot;:false,&quot;assetsDir&quot;:&quot;mochawesome-report/assets&quot;,&quot;htmlFile&quot;:&quot;/home/rich/integrify/1_PLUS/test/mochawesome-report/mochawesome.html&quot;}"><div id="report"></div><script src="assets/app.js"></script></body></html>